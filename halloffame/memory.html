<!doctype html>
<meta charset="utf-8">
<title>Memo</title>
<body>
<p>

<script src="data:application/x-javascript,%2F%2A%2A%0A%20%2A%20%40license%0A%20%2A%20pixi%2Ejs%20%2D%20v3%2E0%2E9%0A%20%2A%20Compiled%202015%2D12%2D22T18%3A28%3A46%2E266Z%0A%20%2A%0A%20%2A%20pixi%2Ejs%20is%20licensed%20under%20the%20MIT%20License%2E%0A%20%2A%20http%3A%2F%2Fwww%2Eopensource%2Eorg%2Flicenses%2Fmit%2Dlicense%2Ephp%0A%20%2A%0A%20%2A%0A%20%2A%20The%20MIT%20License%0A%20%2A%20%0A%20%2A%20Copyright%20%28c%29%202013%2D2015%20Mathew%20Groves%0A%20%2A%20%0A%20%2A%20Permission%20is%20hereby%20granted%2C%20free%20of%20charge%2C%20to%20any%20person%20obtaining%20a%20copy%0A%20%2A%20of%20this%20software%20and%20associated%20documentation%20files%20%28the%20%22Software%22%29%2C%20to%20deal%0A%20%2A%20in%20the%20Software%20without%20restriction%2C%20including%20without%20limitation%20the%20rights%0A%20%2A%20to%20use%2C%20copy%2C%20modify%2C%20merge%2C%20publish%2C%20distribute%2C%20sublicense%2C%20and%2For%20sell%0A%20%2A%20copies%20of%20the%20Software%2C%20and%20to%20permit%20persons%20to%20whom%20the%20Software%20is%0A%20%2A%20furnished%20to%20do%20so%2C%20subject%20to%20the%20following%20conditions%3A%0A%20%2A%20%0A%20%2A%20The%20above%20copyright%20notice%20and%20this%20permission%20notice%20shall%20be%20included%20in%0A%20%2A%20all%20copies%20or%20substantial%20portions%20of%20the%20Software%2E%0A%20%2A%20%0A%20%2A%20THE%20SOFTWARE%20IS%20PROVIDED%20%22AS%20IS%22%2C%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND%2C%20EXPRESS%20OR%0A%20%2A%20IMPLIED%2C%20INCLUDING%20BUT%20NOT%20LIMITED%20TO%20THE%20WARRANTIES%20OF%20MERCHANTABILITY%2C%0A%20%2A%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20AND%20NONINFRINGEMENT%2E%20IN%20NO%20EVENT%20SHALL%20THE%0A%20%2A%20AUTHORS%20OR%20COPYRIGHT%20HOLDERS%20BE%20LIABLE%20FOR%20ANY%20CLAIM%2C%20DAMAGES%20OR%20OTHER%0A%20%2A%20LIABILITY%2C%20WHETHER%20IN%20AN%20ACTION%20OF%20CONTRACT%2C%20TORT%20OR%20OTHERWISE%2C%20ARISING%20FROM%2C%0A%20%2A%20OUT%20OF%20OR%20IN%20CONNECTION%20WITH%20THE%20SOFTWARE%20OR%20THE%20USE%20OR%20OTHER%20DEALINGS%20IN%0A%20%2A%20THE%20SOFTWARE%2E%0A%20%2A%20%0A%20%2A%20%0A%20%2A%2F%0A%28function%28f%29%7Bif%28typeof%20exports%3D%3D%3D%22object%22%26%26typeof%20module%21%3D%3D%22undefined%22%29%7Bmodule%2Eexports%3Df%28%29%7Delse%20if%28typeof%20define%3D%3D%3D%22function%22%26%26define%2Eamd%29%7Bdefine%28%5B%5D%2Cf%29%7Delse%7Bvar%20g%3Bif%28typeof%20window%21%3D%3D%22undefined%22%29%7Bg%3Dwindow%7Delse%20if%28typeof%20global%21%3D%3D%22undefined%22%29%7Bg%3Dglobal%7Delse%20if%28typeof%20self%21%3D%3D%22undefined%22%29%7Bg%3Dself%7Delse%7Bg%3Dthis%7Dg%2EPIXI%20%3D%20f%28%29%7D%7D%29%28function%28%29%7Bvar%20define%2Cmodule%2Cexports%3Breturn%20%28function%20e%28t%2Cn%2Cr%29%7Bfunction%20s%28o%2Cu%29%7Bif%28%21n%5Bo%5D%29%7Bif%28%21t%5Bo%5D%29%7Bvar%20a%3Dtypeof%20require%3D%3D%22function%22%26%26require%3Bif%28%21u%26%26a%29return%20a%28o%2C%210%29%3Bif%28i%29return%20i%28o%2C%210%29%3Bvar%20f%3Dnew%20Error%28%22Cannot%20find%20module%20%27%22%2Bo%2B%22%27%22%29%3Bthrow%20f%2Ecode%3D%22MODULE%5FNOT%5FFOUND%22%2Cf%7Dvar%20l%3Dn%5Bo%5D%3D%7Bexports%3A%7B%7D%7D%3Bt%5Bo%5D%5B0%5D%2Ecall%28l%2Eexports%2Cfunction%28e%29%7Bvar%20n%3Dt%5Bo%5D%5B1%5D%5Be%5D%3Breturn%20s%28n%3Fn%3Ae%29%7D%2Cl%2Cl%2Eexports%2Ce%2Ct%2Cn%2Cr%29%7Dreturn%20n%5Bo%5D%2Eexports%7Dvar%20i%3Dtypeof%20require%3D%3D%22function%22%26%26require%3Bfor%28var%20o%3D0%3Bo%3Cr%2Elength%3Bo%2B%2B%29s%28r%5Bo%5D%29%3Breturn%20s%7D%29%28%7B1%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%28function%20%28process%2Cglobal%29%7B%0A%2F%2A%21%0A%20%2A%20async%0A%20%2A%20https%3A%2F%2Fgithub%2Ecom%2Fcaolan%2Fasync%0A%20%2A%0A%20%2A%20Copyright%202010%2D2014%20Caolan%20McMahon%0A%20%2A%20Released%20under%20the%20MIT%20license%0A%20%2A%2F%0A%28function%20%28%29%20%7B%0A%0A%20%20%20%20var%20async%20%3D%20%7B%7D%3B%0A%20%20%20%20function%20noop%28%29%20%7B%7D%0A%20%20%20%20function%20identity%28v%29%20%7B%0A%20%20%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20toBool%28v%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%21%21v%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20notId%28v%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%21v%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20global%20on%20the%20server%2C%20window%20in%20the%20browser%0A%20%20%20%20var%20previous%5Fasync%3B%0A%0A%20%20%20%20%2F%2F%20Establish%20the%20root%20object%2C%20%60window%60%20%28%60self%60%29%20in%20the%20browser%2C%20%60global%60%0A%20%20%20%20%2F%2F%20on%20the%20server%2C%20or%20%60this%60%20in%20some%20virtual%20machines%2E%20We%20use%20%60self%60%0A%20%20%20%20%2F%2F%20instead%20of%20%60window%60%20for%20%60WebWorker%60%20support%2E%0A%20%20%20%20var%20root%20%3D%20typeof%20self%20%3D%3D%3D%20%27object%27%20%26%26%20self%2Eself%20%3D%3D%3D%20self%20%26%26%20self%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20typeof%20global%20%3D%3D%3D%20%27object%27%20%26%26%20global%2Eglobal%20%3D%3D%3D%20global%20%26%26%20global%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%3B%0A%0A%20%20%20%20if%20%28root%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20previous%5Fasync%20%3D%20root%2Easync%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%2EnoConflict%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20root%2Easync%20%3D%20previous%5Fasync%3B%0A%20%20%20%20%20%20%20%20return%20async%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20only%5Fonce%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28fn%20%3D%3D%3D%20null%29%20throw%20new%20Error%28%22Callback%20was%20already%20called%2E%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20%5Fonce%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28fn%20%3D%3D%3D%20null%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%2F%2F%20cross%2Dbrowser%20compatiblity%20functions%20%2F%2F%2F%2F%0A%0A%20%20%20%20var%20%5FtoString%20%3D%20Object%2Eprototype%2EtoString%3B%0A%0A%20%20%20%20var%20%5FisArray%20%3D%20Array%2EisArray%20%7C%7C%20function%20%28obj%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FtoString%2Ecall%28obj%29%20%3D%3D%3D%20%27%5Bobject%20Array%5D%27%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Ported%20from%20underscore%2Ejs%20isObject%0A%20%20%20%20var%20%5FisObject%20%3D%20function%28obj%29%20%7B%0A%20%20%20%20%20%20%20%20var%20type%20%3D%20typeof%20obj%3B%0A%20%20%20%20%20%20%20%20return%20type%20%3D%3D%3D%20%27function%27%20%7C%7C%20type%20%3D%3D%3D%20%27object%27%20%26%26%20%21%21obj%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20%5FisArrayLike%28arr%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FisArray%28arr%29%20%7C%7C%20%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20has%20a%20positive%20integer%20length%20property%0A%20%20%20%20%20%20%20%20%20%20%20%20typeof%20arr%2Elength%20%3D%3D%3D%20%22number%22%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20arr%2Elength%20%3E%3D%200%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20arr%2Elength%20%25%201%20%3D%3D%3D%200%0A%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20%5FarrayEach%28arr%2C%20iterator%29%20%7B%0A%20%20%20%20%20%20%20%20var%20index%20%3D%20%2D1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20length%20%3D%20arr%2Elength%3B%0A%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bindex%20%3C%20length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28arr%5Bindex%5D%2C%20index%2C%20arr%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20%5Fmap%28arr%2C%20iterator%29%20%7B%0A%20%20%20%20%20%20%20%20var%20index%20%3D%20%2D1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20length%20%3D%20arr%2Elength%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20Array%28length%29%3B%0A%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bindex%20%3C%20length%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%5Bindex%5D%20%3D%20iterator%28arr%5Bindex%5D%2C%20index%2C%20arr%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20%5Frange%28count%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fmap%28Array%28count%29%2C%20function%20%28v%2C%20i%29%20%7B%20return%20i%3B%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20%5Freduce%28arr%2C%20iterator%2C%20memo%29%20%7B%0A%20%20%20%20%20%20%20%20%5FarrayEach%28arr%2C%20function%20%28x%2C%20i%2C%20a%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20memo%20%3D%20iterator%28memo%2C%20x%2C%20i%2C%20a%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20return%20memo%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20%5FforEachOf%28object%2C%20iterator%29%20%7B%0A%20%20%20%20%20%20%20%20%5FarrayEach%28%5Fkeys%28object%29%2C%20function%20%28key%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28object%5Bkey%5D%2C%20key%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20%5FindexOf%28arr%2C%20item%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20arr%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28arr%5Bi%5D%20%3D%3D%3D%20item%29%20return%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%2D1%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20%5Fkeys%20%3D%20Object%2Ekeys%20%7C%7C%20function%20%28obj%29%20%7B%0A%20%20%20%20%20%20%20%20var%20keys%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20k%20in%20obj%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28obj%2EhasOwnProperty%28k%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keys%2Epush%28k%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20keys%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20%5FkeyIterator%28coll%29%20%7B%0A%20%20%20%20%20%20%20%20var%20i%20%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20var%20len%3B%0A%20%20%20%20%20%20%20%20var%20keys%3B%0A%20%20%20%20%20%20%20%20if%20%28%5FisArrayLike%28coll%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20len%20%3D%20coll%2Elength%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20function%20next%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20i%20%3C%20len%20%3F%20i%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20keys%20%3D%20%5Fkeys%28coll%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20len%20%3D%20keys%2Elength%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20function%20next%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20i%20%3C%20len%20%3F%20keys%5Bi%5D%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Similar%20to%20ES6%27s%20rest%20param%20%28http%3A%2F%2Fariya%2Eofilabs%2Ecom%2F2013%2F03%2Fes6%2Dand%2Drest%2Dparameter%2Ehtml%29%0A%20%20%20%20%2F%2F%20This%20accumulates%20the%20arguments%20passed%20into%20an%20array%2C%20after%20a%20given%20index%2E%0A%20%20%20%20%2F%2F%20From%20underscore%2Ejs%20%28https%3A%2F%2Fgithub%2Ecom%2Fjashkenas%2Funderscore%2Fpull%2F2140%29%2E%0A%20%20%20%20function%20%5FrestParam%28func%2C%20startIndex%29%20%7B%0A%20%20%20%20%20%20%20%20startIndex%20%3D%20startIndex%20%3D%3D%20null%20%3F%20func%2Elength%20%2D%201%20%3A%20%2BstartIndex%3B%0A%20%20%20%20%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20length%20%3D%20Math%2Emax%28arguments%2Elength%20%2D%20startIndex%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20rest%20%3D%20Array%28length%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20index%20%3D%200%3B%20index%20%3C%20length%3B%20index%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rest%5Bindex%5D%20%3D%20arguments%5Bindex%20%2B%20startIndex%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20switch%20%28startIndex%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%200%3A%20return%20func%2Ecall%28this%2C%20rest%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%201%3A%20return%20func%2Ecall%28this%2C%20arguments%5B0%5D%2C%20rest%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Currently%20unused%20but%20handle%20cases%20outside%20of%20the%20switch%20statement%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20var%20args%20%3D%20Array%28startIndex%20%2B%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20for%20%28index%20%3D%200%3B%20index%20%3C%20startIndex%3B%20index%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20args%5Bindex%5D%20%3D%20arguments%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20args%5BstartIndex%5D%20%3D%20rest%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20return%20func%2Eapply%28this%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20%5FwithoutIndex%28iterator%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%20%28value%2C%20index%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20iterator%28value%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%2F%2F%20exported%20async%20module%20functions%20%2F%2F%2F%2F%0A%0A%20%20%20%20%2F%2F%2F%2F%20nextTick%20implementation%20with%20browser%2Dcompatible%20fallback%20%2F%2F%2F%2F%0A%0A%20%20%20%20%2F%2F%20capture%20the%20global%20reference%20to%20guard%20against%20fakeTimer%20mocks%0A%20%20%20%20var%20%5FsetImmediate%20%3D%20typeof%20setImmediate%20%3D%3D%3D%20%27function%27%20%26%26%20setImmediate%3B%0A%0A%20%20%20%20var%20%5Fdelay%20%3D%20%5FsetImmediate%20%3F%20function%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20not%20a%20direct%20alias%20for%20IE10%20compatibility%0A%20%20%20%20%20%20%20%20%5FsetImmediate%28fn%29%3B%0A%20%20%20%20%7D%20%3A%20function%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20setTimeout%28fn%2C%200%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20if%20%28typeof%20process%20%3D%3D%3D%20%27object%27%20%26%26%20typeof%20process%2EnextTick%20%3D%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20async%2EnextTick%20%3D%20process%2EnextTick%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20async%2EnextTick%20%3D%20%5Fdelay%3B%0A%20%20%20%20%7D%0A%20%20%20%20async%2EsetImmediate%20%3D%20%5FsetImmediate%20%3F%20%5Fdelay%20%3A%20async%2EnextTick%3B%0A%0A%0A%20%20%20%20async%2EforEach%20%3D%0A%20%20%20%20async%2Eeach%20%3D%20function%20%28arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20return%20async%2EeachOf%28arr%2C%20%5FwithoutIndex%28iterator%29%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EforEachSeries%20%3D%0A%20%20%20%20async%2EeachSeries%20%3D%20function%20%28arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20return%20async%2EeachOfSeries%28arr%2C%20%5FwithoutIndex%28iterator%29%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%0A%20%20%20%20async%2EforEachLimit%20%3D%0A%20%20%20%20async%2EeachLimit%20%3D%20function%20%28arr%2C%20limit%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FeachOfLimit%28limit%29%28arr%2C%20%5FwithoutIndex%28iterator%29%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EforEachOf%20%3D%0A%20%20%20%20async%2EeachOf%20%3D%20function%20%28object%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20%5Fonce%28callback%20%7C%7C%20noop%29%3B%0A%20%20%20%20%20%20%20%20object%20%3D%20object%20%7C%7C%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20var%20iter%20%3D%20%5FkeyIterator%28object%29%3B%0A%20%20%20%20%20%20%20%20var%20key%2C%20completed%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20while%20%28%28key%20%3D%20iter%28%29%29%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20completed%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28object%5Bkey%5D%2C%20key%2C%20only%5Fonce%28done%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28completed%20%3D%3D%3D%200%29%20callback%28null%29%3B%0A%0A%20%20%20%20%20%20%20%20function%20done%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20completed%2D%2D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20key%20is%20null%20in%20case%20iterator%20isn%27t%20exhausted%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20and%20done%20resolved%20synchronously%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28key%20%3D%3D%3D%20null%20%26%26%20completed%20%3C%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EforEachOfSeries%20%3D%0A%20%20%20%20async%2EeachOfSeries%20%3D%20function%20%28obj%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20%5Fonce%28callback%20%7C%7C%20noop%29%3B%0A%20%20%20%20%20%20%20%20obj%20%3D%20obj%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20var%20nextKey%20%3D%20%5FkeyIterator%28obj%29%3B%0A%20%20%20%20%20%20%20%20var%20key%20%3D%20nextKey%28%29%3B%0A%20%20%20%20%20%20%20%20function%20iterate%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20sync%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28key%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28obj%5Bkey%5D%2C%20key%2C%20only%5Fonce%28function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%20%3D%20nextKey%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28key%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sync%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28iterate%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iterate%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sync%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20iterate%28%29%3B%0A%20%20%20%20%7D%3B%0A%0A%0A%0A%20%20%20%20async%2EforEachOfLimit%20%3D%0A%20%20%20%20async%2EeachOfLimit%20%3D%20function%20%28obj%2C%20limit%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%5FeachOfLimit%28limit%29%28obj%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20%5FeachOfLimit%28limit%29%20%7B%0A%0A%20%20%20%20%20%20%20%20return%20function%20%28obj%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20%5Fonce%28callback%20%7C%7C%20noop%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20obj%20%3D%20obj%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20nextKey%20%3D%20%5FkeyIterator%28obj%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28limit%20%3C%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20done%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20running%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20errored%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%28function%20replenish%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28done%20%26%26%20running%20%3C%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20%28running%20%3C%20limit%20%26%26%20%21errored%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20key%20%3D%20nextKey%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28key%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20done%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28running%20%3C%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20running%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iterator%28obj%5Bkey%5D%2C%20key%2C%20only%5Fonce%28function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20running%20%2D%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errored%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20replenish%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20function%20doParallel%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%20%28obj%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%28async%2EeachOf%2C%20obj%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20doParallelLimit%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%20%28obj%2C%20limit%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%28%5FeachOfLimit%28limit%29%2C%20obj%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20doSeries%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%20%28obj%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%28async%2EeachOfSeries%2C%20obj%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20%5FasyncMap%28eachfn%2C%20arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20%5Fonce%28callback%20%7C%7C%20noop%29%3B%0A%20%20%20%20%20%20%20%20arr%20%3D%20arr%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20var%20results%20%3D%20%5FisArrayLike%28arr%29%20%3F%20%5B%5D%20%3A%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20eachfn%28arr%2C%20function%20%28value%2C%20index%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28value%2C%20function%20%28err%2C%20v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20v%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20results%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%2Emap%20%3D%20doParallel%28%5FasyncMap%29%3B%0A%20%20%20%20async%2EmapSeries%20%3D%20doSeries%28%5FasyncMap%29%3B%0A%20%20%20%20async%2EmapLimit%20%3D%20doParallelLimit%28%5FasyncMap%29%3B%0A%0A%20%20%20%20%2F%2F%20reduce%20only%20has%20a%20series%20version%2C%20as%20doing%20reduce%20in%20parallel%20won%27t%0A%20%20%20%20%2F%2F%20work%20in%20many%20situations%2E%0A%20%20%20%20async%2Einject%20%3D%0A%20%20%20%20async%2Efoldl%20%3D%0A%20%20%20%20async%2Ereduce%20%3D%20function%20%28arr%2C%20memo%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20async%2EeachOfSeries%28arr%2C%20function%20%28x%2C%20i%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28memo%2C%20x%2C%20function%20%28err%2C%20v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20memo%20%3D%20v%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20memo%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Efoldr%20%3D%0A%20%20%20%20async%2EreduceRight%20%3D%20function%20%28arr%2C%20memo%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20reversed%20%3D%20%5Fmap%28arr%2C%20identity%29%2Ereverse%28%29%3B%0A%20%20%20%20%20%20%20%20async%2Ereduce%28reversed%2C%20memo%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Etransform%20%3D%20function%20%28arr%2C%20memo%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%203%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20iterator%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%20%3D%20memo%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20memo%20%3D%20%5FisArray%28arr%29%20%3F%20%5B%5D%20%3A%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20async%2EeachOf%28arr%2C%20function%28v%2C%20k%2C%20cb%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28memo%2C%20v%2C%20k%2C%20cb%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20memo%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20%5Ffilter%28eachfn%2C%20arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20results%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20eachfn%28arr%2C%20function%20%28x%2C%20index%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2C%20function%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%2Epush%28%7Bindex%3A%20index%2C%20value%3A%20x%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28%5Fmap%28results%2Esort%28function%20%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20a%2Eindex%20%2D%20b%2Eindex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%2C%20function%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20x%2Evalue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%2Eselect%20%3D%0A%20%20%20%20async%2Efilter%20%3D%20doParallel%28%5Ffilter%29%3B%0A%0A%20%20%20%20async%2EselectLimit%20%3D%0A%20%20%20%20async%2EfilterLimit%20%3D%20doParallelLimit%28%5Ffilter%29%3B%0A%0A%20%20%20%20async%2EselectSeries%20%3D%0A%20%20%20%20async%2EfilterSeries%20%3D%20doSeries%28%5Ffilter%29%3B%0A%0A%20%20%20%20function%20%5Freject%28eachfn%2C%20arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%5Ffilter%28eachfn%2C%20arr%2C%20function%28value%2C%20cb%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28value%2C%20function%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cb%28%21v%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20callback%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20async%2Ereject%20%3D%20doParallel%28%5Freject%29%3B%0A%20%20%20%20async%2ErejectLimit%20%3D%20doParallelLimit%28%5Freject%29%3B%0A%20%20%20%20async%2ErejectSeries%20%3D%20doSeries%28%5Freject%29%3B%0A%0A%20%20%20%20function%20%5FcreateTester%28eachfn%2C%20check%2C%20getResult%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%28arr%2C%20limit%2C%20iterator%2C%20cb%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20done%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cb%29%20cb%28getResult%28false%2C%20void%200%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20iteratee%28x%2C%20%5F%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21cb%29%20return%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2C%20function%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cb%20%26%26%20check%28v%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cb%28getResult%28true%2C%20x%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cb%20%3D%20iterator%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28arguments%2Elength%20%3E%203%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eachfn%28arr%2C%20limit%2C%20iteratee%2C%20done%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cb%20%3D%20iterator%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iterator%20%3D%20limit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eachfn%28arr%2C%20iteratee%2C%20done%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%2Eany%20%3D%0A%20%20%20%20async%2Esome%20%3D%20%5FcreateTester%28async%2EeachOf%2C%20toBool%2C%20identity%29%3B%0A%0A%20%20%20%20async%2EsomeLimit%20%3D%20%5FcreateTester%28async%2EeachOfLimit%2C%20toBool%2C%20identity%29%3B%0A%0A%20%20%20%20async%2Eall%20%3D%0A%20%20%20%20async%2Eevery%20%3D%20%5FcreateTester%28async%2EeachOf%2C%20notId%2C%20notId%29%3B%0A%0A%20%20%20%20async%2EeveryLimit%20%3D%20%5FcreateTester%28async%2EeachOfLimit%2C%20notId%2C%20notId%29%3B%0A%0A%20%20%20%20function%20%5FfindGetResult%28v%2C%20x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20x%3B%0A%20%20%20%20%7D%0A%20%20%20%20async%2Edetect%20%3D%20%5FcreateTester%28async%2EeachOf%2C%20identity%2C%20%5FfindGetResult%29%3B%0A%20%20%20%20async%2EdetectSeries%20%3D%20%5FcreateTester%28async%2EeachOfSeries%2C%20identity%2C%20%5FfindGetResult%29%3B%0A%20%20%20%20async%2EdetectLimit%20%3D%20%5FcreateTester%28async%2EeachOfLimit%2C%20identity%2C%20%5FfindGetResult%29%3B%0A%0A%20%20%20%20async%2EsortBy%20%3D%20function%20%28arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20async%2Emap%28arr%2C%20function%20%28x%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2C%20function%20%28err%2C%20criteria%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%2C%20%7Bvalue%3A%20x%2C%20criteria%3A%20criteria%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%2C%20results%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%2C%20%5Fmap%28results%2Esort%28comparator%29%2C%20function%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20x%2Evalue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20function%20comparator%28left%2C%20right%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20a%20%3D%20left%2Ecriteria%2C%20b%20%3D%20right%2Ecriteria%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20a%20%3C%20b%20%3F%20%2D1%20%3A%20a%20%3E%20b%20%3F%201%20%3A%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eauto%20%3D%20function%20%28tasks%2C%20concurrency%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20concurrency%20is%20optional%2C%20shift%20the%20args%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20concurrency%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20concurrency%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20callback%20%3D%20%5Fonce%28callback%20%7C%7C%20noop%29%3B%0A%20%20%20%20%20%20%20%20var%20keys%20%3D%20%5Fkeys%28tasks%29%3B%0A%20%20%20%20%20%20%20%20var%20remainingTasks%20%3D%20keys%2Elength%3B%0A%20%20%20%20%20%20%20%20if%20%28%21remainingTasks%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28null%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%21concurrency%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20concurrency%20%3D%20remainingTasks%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20results%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20var%20runningTasks%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20var%20listeners%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20function%20addListener%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20listeners%2Eunshift%28fn%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20function%20removeListener%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20idx%20%3D%20%5FindexOf%28listeners%2C%20fn%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28idx%20%3E%3D%200%29%20listeners%2Esplice%28idx%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20function%20taskComplete%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remainingTasks%2D%2D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%5FarrayEach%28listeners%2Eslice%280%29%2C%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fn%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20addListener%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21remainingTasks%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%2C%20results%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%5FarrayEach%28keys%2C%20function%20%28k%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20task%20%3D%20%5FisArray%28tasks%5Bk%5D%29%20%3F%20tasks%5Bk%5D%3A%20%5Btasks%5Bk%5D%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20taskCallback%20%3D%20%5FrestParam%28function%28err%2C%20args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20runningTasks%2D%2D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28args%2Elength%20%3C%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20safeResults%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5FforEachOf%28results%2C%20function%28val%2C%20rkey%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20safeResults%5Brkey%5D%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20safeResults%5Bk%5D%20%3D%20args%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20safeResults%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5Bk%5D%20%3D%20args%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28taskComplete%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20requires%20%3D%20task%2Eslice%280%2C%20task%2Elength%20%2D%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20prevent%20dead%2Dlocks%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20len%20%3D%20requires%2Elength%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dep%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20%28len%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21%28dep%20%3D%20tasks%5Brequires%5Blen%5D%5D%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%27Has%20inexistant%20dependency%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5FisArray%28dep%29%20%26%26%20%5FindexOf%28dep%2C%20k%29%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%27Has%20cyclic%20dependencies%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20ready%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20runningTasks%20%3C%20concurrency%20%26%26%20%5Freduce%28requires%2C%20function%20%28a%2C%20x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%28a%20%26%26%20results%2EhasOwnProperty%28x%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20true%29%20%26%26%20%21results%2EhasOwnProperty%28k%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28ready%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20runningTasks%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20task%5Btask%2Elength%20%2D%201%5D%28taskCallback%2C%20results%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20addListener%28listener%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20listener%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28ready%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20runningTasks%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20removeListener%28listener%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20task%5Btask%2Elength%20%2D%201%5D%28taskCallback%2C%20results%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%0A%0A%0A%20%20%20%20async%2Eretry%20%3D%20function%28times%2C%20task%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20DEFAULT%5FTIMES%20%3D%205%3B%0A%20%20%20%20%20%20%20%20var%20DEFAULT%5FINTERVAL%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20var%20attempts%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20var%20opts%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20times%3A%20DEFAULT%5FTIMES%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20interval%3A%20DEFAULT%5FINTERVAL%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20function%20parseTimes%28acc%2C%20t%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28typeof%20t%20%3D%3D%3D%20%27number%27%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20acc%2Etimes%20%3D%20parseInt%28t%2C%2010%29%20%7C%7C%20DEFAULT%5FTIMES%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%28typeof%20t%20%3D%3D%3D%20%27object%27%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20acc%2Etimes%20%3D%20parseInt%28t%2Etimes%2C%2010%29%20%7C%7C%20DEFAULT%5FTIMES%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20acc%2Einterval%20%3D%20parseInt%28t%2Einterval%2C%2010%29%20%7C%7C%20DEFAULT%5FINTERVAL%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%27Unsupported%20argument%20type%20for%20%5C%27times%5C%27%3A%20%27%20%2B%20typeof%20t%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20length%20%3D%20arguments%2Elength%3B%0A%20%20%20%20%20%20%20%20if%20%28length%20%3C%201%20%7C%7C%20length%20%3E%203%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%27Invalid%20arguments%20%2D%20must%20be%20either%20%28task%29%2C%20%28task%2C%20callback%29%2C%20%28times%2C%20task%29%20or%20%28times%2C%20task%2C%20callback%29%27%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28length%20%3C%3D%202%20%26%26%20typeof%20times%20%3D%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20task%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20task%20%3D%20times%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28typeof%20times%20%21%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20parseTimes%28opts%2C%20times%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20opts%2Ecallback%20%3D%20callback%3B%0A%20%20%20%20%20%20%20%20opts%2Etask%20%3D%20task%3B%0A%0A%20%20%20%20%20%20%20%20function%20wrappedTask%28wrappedCallback%2C%20wrappedResults%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20retryAttempt%28task%2C%20finalAttempt%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20function%28seriesCallback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20task%28function%28err%2C%20result%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20seriesCallback%28%21err%20%7C%7C%20finalAttempt%2C%20%7Berr%3A%20err%2C%20result%3A%20result%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20wrappedResults%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20retryInterval%28interval%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20function%28seriesCallback%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout%28function%28%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20seriesCallback%28null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20interval%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20%28opts%2Etimes%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20finalAttempt%20%3D%20%21%28opts%2Etimes%2D%3D1%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20attempts%2Epush%28retryAttempt%28opts%2Etask%2C%20finalAttempt%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%28%21finalAttempt%20%26%26%20opts%2Einterval%20%3E%200%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20attempts%2Epush%28retryInterval%28opts%2Einterval%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2Eseries%28attempts%2C%20function%28done%2C%20data%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%20%3D%20data%5Bdata%2Elength%20%2D%201%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28wrappedCallback%20%7C%7C%20opts%2Ecallback%29%28data%2Eerr%2C%20data%2Eresult%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20a%20callback%20is%20passed%2C%20run%20this%20as%20a%20controll%20flow%0A%20%20%20%20%20%20%20%20return%20opts%2Ecallback%20%3F%20wrappedTask%28%29%20%3A%20wrappedTask%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Ewaterfall%20%3D%20function%20%28tasks%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20%5Fonce%28callback%20%7C%7C%20noop%29%3B%0A%20%20%20%20%20%20%20%20if%20%28%21%5FisArray%28tasks%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20err%20%3D%20new%20Error%28%27First%20argument%20to%20waterfall%20must%20be%20an%20array%20of%20functions%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%21tasks%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20function%20wrapIterator%28iterator%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%5FrestParam%28function%20%28err%2C%20args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%2Eapply%28null%2C%20%5Berr%5D%2Econcat%28args%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20next%20%3D%20iterator%2Enext%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28next%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%2Epush%28wrapIterator%28next%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%2Epush%28callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ensureAsync%28iterator%29%2Eapply%28null%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20wrapIterator%28async%2Eiterator%28tasks%29%29%28%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20%5Fparallel%28eachfn%2C%20tasks%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20callback%20%7C%7C%20noop%3B%0A%20%20%20%20%20%20%20%20var%20results%20%3D%20%5FisArrayLike%28tasks%29%20%3F%20%5B%5D%20%3A%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20eachfn%28tasks%2C%20function%20%28task%2C%20key%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20task%28%5FrestParam%28function%20%28err%2C%20args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28args%2Elength%20%3C%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5Bkey%5D%20%3D%20args%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20results%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%2Eparallel%20%3D%20function%20%28tasks%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%5Fparallel%28async%2EeachOf%2C%20tasks%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EparallelLimit%20%3D%20function%28tasks%2C%20limit%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%5Fparallel%28%5FeachOfLimit%28limit%29%2C%20tasks%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eseries%20%3D%20function%28tasks%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%5Fparallel%28async%2EeachOfSeries%2C%20tasks%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eiterator%20%3D%20function%20%28tasks%29%20%7B%0A%20%20%20%20%20%20%20%20function%20makeCallback%28index%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20fn%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28tasks%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tasks%5Bindex%5D%2Eapply%28null%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%2Enext%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%2Enext%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%28index%20%3C%20tasks%2Elength%20%2D%201%29%20%3F%20makeCallback%28index%20%2B%201%29%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20makeCallback%280%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eapply%20%3D%20%5FrestParam%28function%20%28fn%2C%20args%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FrestParam%28function%20%28callArgs%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%2Eapply%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20null%2C%20args%2Econcat%28callArgs%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20function%20%5Fconcat%28eachfn%2C%20arr%2C%20fn%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20result%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20eachfn%28arr%2C%20function%20%28x%2C%20index%2C%20cb%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%28x%2C%20function%20%28err%2C%20y%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20result%2Econcat%28y%20%7C%7C%20%5B%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cb%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20result%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20async%2Econcat%20%3D%20doParallel%28%5Fconcat%29%3B%0A%20%20%20%20async%2EconcatSeries%20%3D%20doSeries%28%5Fconcat%29%3B%0A%0A%20%20%20%20async%2Ewhilst%20%3D%20function%20%28test%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20callback%20%7C%7C%20noop%3B%0A%20%20%20%20%20%20%20%20if%20%28test%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20next%20%3D%20%5FrestParam%28function%28err%2C%20args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28test%2Eapply%28this%2C%20args%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iterator%28next%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28next%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EdoWhilst%20%3D%20function%20%28iterator%2C%20test%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20calls%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20async%2Ewhilst%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%2B%2Bcalls%20%3C%3D%201%20%7C%7C%20test%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Euntil%20%3D%20function%20%28test%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20return%20async%2Ewhilst%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%21test%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EdoUntil%20%3D%20function%20%28iterator%2C%20test%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20return%20async%2EdoWhilst%28iterator%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%21test%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eduring%20%3D%20function%20%28test%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20callback%20%7C%7C%20noop%3B%0A%0A%20%20%20%20%20%20%20%20var%20next%20%3D%20%5FrestParam%28function%28err%2C%20args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%2Epush%28check%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20test%2Eapply%28this%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20var%20check%20%3D%20function%28err%2C%20truth%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28truth%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iterator%28next%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20test%28check%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EdoDuring%20%3D%20function%20%28iterator%2C%20test%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20calls%20%3D%200%3B%0A%20%20%20%20%20%20%20%20async%2Eduring%28function%28next%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28calls%2B%2B%20%3C%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20next%28null%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20test%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20%5Fqueue%28worker%2C%20concurrency%2C%20payload%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28concurrency%20%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20concurrency%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%28concurrency%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%27Concurrency%20must%20not%20be%20zero%27%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20function%20%5Finsert%28q%2C%20data%2C%20pos%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28callback%20%21%3D%20null%20%26%26%20typeof%20callback%20%21%3D%3D%20%22function%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%22task%20callback%20must%20be%20a%20function%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20q%2Estarted%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21%5FisArray%28data%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%20%3D%20%5Bdata%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28data%2Elength%20%3D%3D%3D%200%20%26%26%20q%2Eidle%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20call%20drain%20immediately%20if%20there%20are%20no%20tasks%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20async%2EsetImmediate%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Edrain%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5FarrayEach%28data%2C%20function%28task%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20item%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20task%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%3A%20callback%20%7C%7C%20noop%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pos%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Etasks%2Eunshift%28item%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Etasks%2Epush%28item%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Etasks%2Elength%20%3D%3D%3D%20q%2Econcurrency%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Esaturated%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28q%2Eprocess%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20function%20%5Fnext%28q%2C%20tasks%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20function%28%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20workers%20%2D%3D%201%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20removed%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20arguments%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5FarrayEach%28tasks%2C%20function%20%28task%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5FarrayEach%28workersList%2C%20function%20%28worker%2C%20index%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28worker%20%3D%3D%3D%20task%20%26%26%20%21removed%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20workersList%2Esplice%28index%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20removed%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20task%2Ecallback%2Eapply%28task%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Etasks%2Elength%20%2B%20workers%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Edrain%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Eprocess%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20workers%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20workersList%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20var%20q%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tasks%3A%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20concurrency%3A%20concurrency%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20payload%3A%20payload%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20saturated%3A%20noop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20empty%3A%20noop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20drain%3A%20noop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20started%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20paused%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20push%3A%20function%20%28data%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Finsert%28q%2C%20data%2C%20false%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20kill%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Edrain%20%3D%20noop%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Etasks%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20unshift%3A%20function%20%28data%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Finsert%28q%2C%20data%2C%20true%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20process%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21q%2Epaused%20%26%26%20workers%20%3C%20q%2Econcurrency%20%26%26%20q%2Etasks%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%28workers%20%3C%20q%2Econcurrency%20%26%26%20q%2Etasks%2Elength%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20tasks%20%3D%20q%2Epayload%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Etasks%2Esplice%280%2C%20q%2Epayload%29%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Etasks%2Esplice%280%2C%20q%2Etasks%2Elength%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20data%20%3D%20%5Fmap%28tasks%2C%20function%20%28task%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20task%2Edata%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Etasks%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Eempty%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20workers%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20workersList%2Epush%28tasks%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20cb%20%3D%20only%5Fonce%28%5Fnext%28q%2C%20tasks%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20worker%28data%2C%20cb%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20length%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20q%2Etasks%2Elength%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20running%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20workers%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20workersList%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20workersList%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20idle%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20q%2Etasks%2Elength%20%2B%20workers%20%3D%3D%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20pause%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Epaused%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20resume%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Epaused%20%3D%3D%3D%20false%29%20%7B%20return%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Epaused%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20resumeCount%20%3D%20Math%2Emin%28q%2Econcurrency%2C%20q%2Etasks%2Elength%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Need%20to%20call%20q%2Eprocess%20once%20per%20concurrent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20worker%20to%20preserve%20full%20concurrency%20after%20pause%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20w%20%3D%201%3B%20w%20%3C%3D%20resumeCount%3B%20w%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28q%2Eprocess%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20return%20q%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%2Equeue%20%3D%20function%20%28worker%2C%20concurrency%29%20%7B%0A%20%20%20%20%20%20%20%20var%20q%20%3D%20%5Fqueue%28function%20%28items%2C%20cb%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20worker%28items%5B0%5D%2C%20cb%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20concurrency%2C%201%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20q%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EpriorityQueue%20%3D%20function%20%28worker%2C%20concurrency%29%20%7B%0A%0A%20%20%20%20%20%20%20%20function%20%5FcompareTasks%28a%2C%20b%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20a%2Epriority%20%2D%20b%2Epriority%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20%5FbinarySearch%28sequence%2C%20item%2C%20compare%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20beg%20%3D%20%2D1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20sequence%2Elength%20%2D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20%28beg%20%3C%20end%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20mid%20%3D%20beg%20%2B%20%28%28end%20%2D%20beg%20%2B%201%29%20%3E%3E%3E%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28compare%28item%2C%20sequence%5Bmid%5D%29%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20beg%20%3D%20mid%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20mid%20%2D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20beg%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20%5Finsert%28q%2C%20data%2C%20priority%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28callback%20%21%3D%20null%20%26%26%20typeof%20callback%20%21%3D%3D%20%22function%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%22task%20callback%20must%20be%20a%20function%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20q%2Estarted%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21%5FisArray%28data%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%20%3D%20%5Bdata%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28data%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20call%20drain%20immediately%20if%20there%20are%20no%20tasks%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20async%2EsetImmediate%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Edrain%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5FarrayEach%28data%2C%20function%28task%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20item%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20task%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20priority%3A%20priority%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%3A%20typeof%20callback%20%3D%3D%3D%20%27function%27%20%3F%20callback%20%3A%20noop%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Etasks%2Esplice%28%5FbinarySearch%28q%2Etasks%2C%20item%2C%20%5FcompareTasks%29%20%2B%201%2C%200%2C%20item%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Etasks%2Elength%20%3D%3D%3D%20q%2Econcurrency%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Esaturated%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28q%2Eprocess%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Start%20with%20a%20normal%20queue%0A%20%20%20%20%20%20%20%20var%20q%20%3D%20async%2Equeue%28worker%2C%20concurrency%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Override%20push%20to%20accept%20second%20parameter%20representing%20priority%0A%20%20%20%20%20%20%20%20q%2Epush%20%3D%20function%20%28data%2C%20priority%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Finsert%28q%2C%20data%2C%20priority%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Remove%20unshift%20function%0A%20%20%20%20%20%20%20%20delete%20q%2Eunshift%3B%0A%0A%20%20%20%20%20%20%20%20return%20q%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Ecargo%20%3D%20function%20%28worker%2C%20payload%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fqueue%28worker%2C%201%2C%20payload%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20%5Fconsole%5Ffn%28name%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FrestParam%28function%20%28fn%2C%20args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28null%2C%20args%2Econcat%28%5B%5FrestParam%28function%20%28err%2C%20args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20console%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28console%2Eerror%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console%2Eerror%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28console%5Bname%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5FarrayEach%28args%2C%20function%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console%5Bname%5D%28x%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%5D%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20async%2Elog%20%3D%20%5Fconsole%5Ffn%28%27log%27%29%3B%0A%20%20%20%20async%2Edir%20%3D%20%5Fconsole%5Ffn%28%27dir%27%29%3B%0A%20%20%20%20%2F%2Aasync%2Einfo%20%3D%20%5Fconsole%5Ffn%28%27info%27%29%3B%0A%20%20%20%20async%2Ewarn%20%3D%20%5Fconsole%5Ffn%28%27warn%27%29%3B%0A%20%20%20%20async%2Eerror%20%3D%20%5Fconsole%5Ffn%28%27error%27%29%3B%2A%2F%0A%0A%20%20%20%20async%2Ememoize%20%3D%20function%20%28fn%2C%20hasher%29%20%7B%0A%20%20%20%20%20%20%20%20var%20memo%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20var%20queues%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20hasher%20%3D%20hasher%20%7C%7C%20identity%3B%0A%20%20%20%20%20%20%20%20var%20memoized%20%3D%20%5FrestParam%28function%20memoized%28args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20callback%20%3D%20args%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20key%20%3D%20hasher%2Eapply%28null%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28key%20in%20memo%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%2Eapply%28null%2C%20memo%5Bkey%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28key%20in%20queues%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queues%5Bkey%5D%2Epush%28callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queues%5Bkey%5D%20%3D%20%5Bcallback%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28null%2C%20args%2Econcat%28%5B%5FrestParam%28function%20%28args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20memo%5Bkey%5D%20%3D%20args%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20q%20%3D%20queues%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete%20queues%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20l%20%3D%20q%2Elength%3B%20i%20%3C%20l%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%5Bi%5D%2Eapply%28null%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%5D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20memoized%2Ememo%20%3D%20memo%3B%0A%20%20%20%20%20%20%20%20memoized%2Eunmemoized%20%3D%20fn%3B%0A%20%20%20%20%20%20%20%20return%20memoized%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eunmemoize%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%28fn%2Eunmemoized%20%7C%7C%20fn%29%2Eapply%28null%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20%5Ftimes%28mapper%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%20%28count%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mapper%28%5Frange%28count%29%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%2Etimes%20%3D%20%5Ftimes%28async%2Emap%29%3B%0A%20%20%20%20async%2EtimesSeries%20%3D%20%5Ftimes%28async%2EmapSeries%29%3B%0A%20%20%20%20async%2EtimesLimit%20%3D%20function%20%28count%2C%20limit%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20return%20async%2EmapLimit%28%5Frange%28count%29%2C%20limit%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eseq%20%3D%20function%20%28%2F%2A%20functions%2E%2E%2E%20%2A%2F%29%20%7B%0A%20%20%20%20%20%20%20%20var%20fns%20%3D%20arguments%3B%0A%20%20%20%20%20%20%20%20return%20%5FrestParam%28function%20%28args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20that%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20callback%20%3D%20args%5Bargs%2Elength%20%2D%201%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20callback%20%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20noop%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2Ereduce%28fns%2C%20args%2C%20function%20%28newargs%2C%20fn%2C%20cb%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28that%2C%20newargs%2Econcat%28%5B%5FrestParam%28function%20%28err%2C%20nextargs%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cb%28err%2C%20nextargs%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%5D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20%28err%2C%20results%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%2Eapply%28that%2C%20%5Berr%5D%2Econcat%28results%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Ecompose%20%3D%20function%20%28%2F%2A%20functions%2E%2E%2E%20%2A%2F%29%20%7B%0A%20%20%20%20%20%20%20%20return%20async%2Eseq%2Eapply%28null%2C%20Array%2Eprototype%2Ereverse%2Ecall%28arguments%29%29%3B%0A%20%20%20%20%7D%3B%0A%0A%0A%20%20%20%20function%20%5FapplyEach%28eachfn%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FrestParam%28function%28fns%2C%20args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20go%20%3D%20%5FrestParam%28function%28args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20that%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20callback%20%3D%20args%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20eachfn%28fns%2C%20function%20%28fn%2C%20%5F%2C%20cb%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28that%2C%20args%2Econcat%28%5Bcb%5D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28args%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20go%2Eapply%28this%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20go%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%2EapplyEach%20%3D%20%5FapplyEach%28async%2EeachOf%29%3B%0A%20%20%20%20async%2EapplyEachSeries%20%3D%20%5FapplyEach%28async%2EeachOfSeries%29%3B%0A%0A%0A%20%20%20%20async%2Eforever%20%3D%20function%20%28fn%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20done%20%3D%20only%5Fonce%28callback%20%7C%7C%20noop%29%3B%0A%20%20%20%20%20%20%20%20var%20task%20%3D%20ensureAsync%28fn%29%3B%0A%20%20%20%20%20%20%20%20function%20next%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20done%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20task%28next%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20next%28%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20ensureAsync%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FrestParam%28function%20%28args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20callback%20%3D%20args%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20args%2Epush%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20innerArgs%20%3D%20arguments%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sync%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%2Eapply%28null%2C%20innerArgs%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%2Eapply%28null%2C%20innerArgs%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20sync%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28this%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sync%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%2EensureAsync%20%3D%20ensureAsync%3B%0A%0A%20%20%20%20async%2Econstant%20%3D%20%5FrestParam%28function%28values%29%20%7B%0A%20%20%20%20%20%20%20%20var%20args%20%3D%20%5Bnull%5D%2Econcat%28values%29%3B%0A%20%20%20%20%20%20%20%20return%20function%20%28callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%2Eapply%28this%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20async%2EwrapSync%20%3D%0A%20%20%20%20async%2Easyncify%20%3D%20function%20asyncify%28func%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FrestParam%28function%20%28args%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20callback%20%3D%20args%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20result%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20func%2Eapply%28this%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28e%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20result%20is%20Promise%20object%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5FisObject%28result%29%20%26%26%20typeof%20result%2Ethen%20%3D%3D%3D%20%22function%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%2Ethen%28function%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%5B%22catch%22%5D%28function%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2Emessage%20%3F%20err%20%3A%20new%20Error%28err%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%2C%20result%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Node%2Ejs%0A%20%20%20%20if%20%28typeof%20module%20%3D%3D%3D%20%27object%27%20%26%26%20module%2Eexports%29%20%7B%0A%20%20%20%20%20%20%20%20module%2Eexports%20%3D%20async%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20AMD%20%2F%20RequireJS%0A%20%20%20%20else%20if%20%28typeof%20define%20%3D%3D%3D%20%27function%27%20%26%26%20define%2Eamd%29%20%7B%0A%20%20%20%20%20%20%20%20define%28%5B%5D%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20async%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20included%20directly%20via%20%3Cscript%3E%20tag%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20root%2Easync%20%3D%20async%3B%0A%20%20%20%20%7D%0A%0A%7D%28%29%29%3B%0A%0A%7D%29%2Ecall%28this%2Crequire%28%27%5Fprocess%27%29%2Ctypeof%20global%20%21%3D%3D%20%22undefined%22%20%3F%20global%20%3A%20typeof%20self%20%21%3D%3D%20%22undefined%22%20%3F%20self%20%3A%20typeof%20window%20%21%3D%3D%20%22undefined%22%20%3F%20window%20%3A%20%7B%7D%29%0A%0A%7D%2C%7B%22%5Fprocess%22%3A3%7D%5D%2C2%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%28function%20%28process%29%7B%0A%2F%2F%20Copyright%20Joyent%2C%20Inc%2E%20and%20other%20Node%20contributors%2E%0A%2F%2F%0A%2F%2F%20Permission%20is%20hereby%20granted%2C%20free%20of%20charge%2C%20to%20any%20person%20obtaining%20a%0A%2F%2F%20copy%20of%20this%20software%20and%20associated%20documentation%20files%20%28the%0A%2F%2F%20%22Software%22%29%2C%20to%20deal%20in%20the%20Software%20without%20restriction%2C%20including%0A%2F%2F%20without%20limitation%20the%20rights%20to%20use%2C%20copy%2C%20modify%2C%20merge%2C%20publish%2C%0A%2F%2F%20distribute%2C%20sublicense%2C%20and%2For%20sell%20copies%20of%20the%20Software%2C%20and%20to%20permit%0A%2F%2F%20persons%20to%20whom%20the%20Software%20is%20furnished%20to%20do%20so%2C%20subject%20to%20the%0A%2F%2F%20following%20conditions%3A%0A%2F%2F%0A%2F%2F%20The%20above%20copyright%20notice%20and%20this%20permission%20notice%20shall%20be%20included%0A%2F%2F%20in%20all%20copies%20or%20substantial%20portions%20of%20the%20Software%2E%0A%2F%2F%0A%2F%2F%20THE%20SOFTWARE%20IS%20PROVIDED%20%22AS%20IS%22%2C%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND%2C%20EXPRESS%0A%2F%2F%20OR%20IMPLIED%2C%20INCLUDING%20BUT%20NOT%20LIMITED%20TO%20THE%20WARRANTIES%20OF%0A%2F%2F%20MERCHANTABILITY%2C%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20AND%20NONINFRINGEMENT%2E%20IN%0A%2F%2F%20NO%20EVENT%20SHALL%20THE%20AUTHORS%20OR%20COPYRIGHT%20HOLDERS%20BE%20LIABLE%20FOR%20ANY%20CLAIM%2C%0A%2F%2F%20DAMAGES%20OR%20OTHER%20LIABILITY%2C%20WHETHER%20IN%20AN%20ACTION%20OF%20CONTRACT%2C%20TORT%20OR%0A%2F%2F%20OTHERWISE%2C%20ARISING%20FROM%2C%20OUT%20OF%20OR%20IN%20CONNECTION%20WITH%20THE%20SOFTWARE%20OR%20THE%0A%2F%2F%20USE%20OR%20OTHER%20DEALINGS%20IN%20THE%20SOFTWARE%2E%0A%0A%2F%2F%20resolves%20%2E%20and%20%2E%2E%20elements%20in%20a%20path%20array%20with%20directory%20names%20there%0A%2F%2F%20must%20be%20no%20slashes%2C%20empty%20elements%2C%20or%20device%20names%20%28c%3A%5C%29%20in%20the%20array%0A%2F%2F%20%28so%20also%20no%20leading%20and%20trailing%20slashes%20%2D%20it%20does%20not%20distinguish%0A%2F%2F%20relative%20and%20absolute%20paths%29%0Afunction%20normalizeArray%28parts%2C%20allowAboveRoot%29%20%7B%0A%20%20%2F%2F%20if%20the%20path%20tries%20to%20go%20above%20the%20root%2C%20%60up%60%20ends%20up%20%3E%200%0A%20%20var%20up%20%3D%200%3B%0A%20%20for%20%28var%20i%20%3D%20parts%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20var%20last%20%3D%20parts%5Bi%5D%3B%0A%20%20%20%20if%20%28last%20%3D%3D%3D%20%27%2E%27%29%20%7B%0A%20%20%20%20%20%20parts%2Esplice%28i%2C%201%29%3B%0A%20%20%20%20%7D%20else%20if%20%28last%20%3D%3D%3D%20%27%2E%2E%27%29%20%7B%0A%20%20%20%20%20%20parts%2Esplice%28i%2C%201%29%3B%0A%20%20%20%20%20%20up%2B%2B%3B%0A%20%20%20%20%7D%20else%20if%20%28up%29%20%7B%0A%20%20%20%20%20%20parts%2Esplice%28i%2C%201%29%3B%0A%20%20%20%20%20%20up%2D%2D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20if%20the%20path%20is%20allowed%20to%20go%20above%20the%20root%2C%20restore%20leading%20%2E%2Es%0A%20%20if%20%28allowAboveRoot%29%20%7B%0A%20%20%20%20for%20%28%3B%20up%2D%2D%3B%20up%29%20%7B%0A%20%20%20%20%20%20parts%2Eunshift%28%27%2E%2E%27%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20return%20parts%3B%0A%7D%0A%0A%2F%2F%20Split%20a%20filename%20into%20%5Broot%2C%20dir%2C%20basename%2C%20ext%5D%2C%20unix%20version%0A%2F%2F%20%27root%27%20is%20just%20a%20slash%2C%20or%20nothing%2E%0Avar%20splitPathRe%20%3D%0A%20%20%20%20%2F%5E%28%5C%2F%3F%7C%29%28%5B%5Cs%5CS%5D%2A%3F%29%28%28%3F%3A%5C%2E%7B1%2C2%7D%7C%5B%5E%5C%2F%5D%2B%3F%7C%29%28%5C%2E%5B%5E%2E%5C%2F%5D%2A%7C%29%29%28%3F%3A%5B%5C%2F%5D%2A%29%24%2F%3B%0Avar%20splitPath%20%3D%20function%28filename%29%20%7B%0A%20%20return%20splitPathRe%2Eexec%28filename%29%2Eslice%281%29%3B%0A%7D%3B%0A%0A%2F%2F%20path%2Eresolve%28%5Bfrom%20%2E%2E%2E%5D%2C%20to%29%0A%2F%2F%20posix%20version%0Aexports%2Eresolve%20%3D%20function%28%29%20%7B%0A%20%20var%20resolvedPath%20%3D%20%27%27%2C%0A%20%20%20%20%20%20resolvedAbsolute%20%3D%20false%3B%0A%0A%20%20for%20%28var%20i%20%3D%20arguments%2Elength%20%2D%201%3B%20i%20%3E%3D%20%2D1%20%26%26%20%21resolvedAbsolute%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20var%20path%20%3D%20%28i%20%3E%3D%200%29%20%3F%20arguments%5Bi%5D%20%3A%20process%2Ecwd%28%29%3B%0A%0A%20%20%20%20%2F%2F%20Skip%20empty%20and%20invalid%20entries%0A%20%20%20%20if%20%28typeof%20path%20%21%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20throw%20new%20TypeError%28%27Arguments%20to%20path%2Eresolve%20must%20be%20strings%27%29%3B%0A%20%20%20%20%7D%20else%20if%20%28%21path%29%20%7B%0A%20%20%20%20%20%20continue%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20resolvedPath%20%3D%20path%20%2B%20%27%2F%27%20%2B%20resolvedPath%3B%0A%20%20%20%20resolvedAbsolute%20%3D%20path%2EcharAt%280%29%20%3D%3D%3D%20%27%2F%27%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20At%20this%20point%20the%20path%20should%20be%20resolved%20to%20a%20full%20absolute%20path%2C%20but%0A%20%20%2F%2F%20handle%20relative%20paths%20to%20be%20safe%20%28might%20happen%20when%20process%2Ecwd%28%29%20fails%29%0A%0A%20%20%2F%2F%20Normalize%20the%20path%0A%20%20resolvedPath%20%3D%20normalizeArray%28filter%28resolvedPath%2Esplit%28%27%2F%27%29%2C%20function%28p%29%20%7B%0A%20%20%20%20return%20%21%21p%3B%0A%20%20%7D%29%2C%20%21resolvedAbsolute%29%2Ejoin%28%27%2F%27%29%3B%0A%0A%20%20return%20%28%28resolvedAbsolute%20%3F%20%27%2F%27%20%3A%20%27%27%29%20%2B%20resolvedPath%29%20%7C%7C%20%27%2E%27%3B%0A%7D%3B%0A%0A%2F%2F%20path%2Enormalize%28path%29%0A%2F%2F%20posix%20version%0Aexports%2Enormalize%20%3D%20function%28path%29%20%7B%0A%20%20var%20isAbsolute%20%3D%20exports%2EisAbsolute%28path%29%2C%0A%20%20%20%20%20%20trailingSlash%20%3D%20substr%28path%2C%20%2D1%29%20%3D%3D%3D%20%27%2F%27%3B%0A%0A%20%20%2F%2F%20Normalize%20the%20path%0A%20%20path%20%3D%20normalizeArray%28filter%28path%2Esplit%28%27%2F%27%29%2C%20function%28p%29%20%7B%0A%20%20%20%20return%20%21%21p%3B%0A%20%20%7D%29%2C%20%21isAbsolute%29%2Ejoin%28%27%2F%27%29%3B%0A%0A%20%20if%20%28%21path%20%26%26%20%21isAbsolute%29%20%7B%0A%20%20%20%20path%20%3D%20%27%2E%27%3B%0A%20%20%7D%0A%20%20if%20%28path%20%26%26%20trailingSlash%29%20%7B%0A%20%20%20%20path%20%2B%3D%20%27%2F%27%3B%0A%20%20%7D%0A%0A%20%20return%20%28isAbsolute%20%3F%20%27%2F%27%20%3A%20%27%27%29%20%2B%20path%3B%0A%7D%3B%0A%0A%2F%2F%20posix%20version%0Aexports%2EisAbsolute%20%3D%20function%28path%29%20%7B%0A%20%20return%20path%2EcharAt%280%29%20%3D%3D%3D%20%27%2F%27%3B%0A%7D%3B%0A%0A%2F%2F%20posix%20version%0Aexports%2Ejoin%20%3D%20function%28%29%20%7B%0A%20%20var%20paths%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%200%29%3B%0A%20%20return%20exports%2Enormalize%28filter%28paths%2C%20function%28p%2C%20index%29%20%7B%0A%20%20%20%20if%20%28typeof%20p%20%21%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20throw%20new%20TypeError%28%27Arguments%20to%20path%2Ejoin%20must%20be%20strings%27%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20p%3B%0A%20%20%7D%29%2Ejoin%28%27%2F%27%29%29%3B%0A%7D%3B%0A%0A%0A%2F%2F%20path%2Erelative%28from%2C%20to%29%0A%2F%2F%20posix%20version%0Aexports%2Erelative%20%3D%20function%28from%2C%20to%29%20%7B%0A%20%20from%20%3D%20exports%2Eresolve%28from%29%2Esubstr%281%29%3B%0A%20%20to%20%3D%20exports%2Eresolve%28to%29%2Esubstr%281%29%3B%0A%0A%20%20function%20trim%28arr%29%20%7B%0A%20%20%20%20var%20start%20%3D%200%3B%0A%20%20%20%20for%20%28%3B%20start%20%3C%20arr%2Elength%3B%20start%2B%2B%29%20%7B%0A%20%20%20%20%20%20if%20%28arr%5Bstart%5D%20%21%3D%3D%20%27%27%29%20break%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20end%20%3D%20arr%2Elength%20%2D%201%3B%0A%20%20%20%20for%20%28%3B%20end%20%3E%3D%200%3B%20end%2D%2D%29%20%7B%0A%20%20%20%20%20%20if%20%28arr%5Bend%5D%20%21%3D%3D%20%27%27%29%20break%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28start%20%3E%20end%29%20return%20%5B%5D%3B%0A%20%20%20%20return%20arr%2Eslice%28start%2C%20end%20%2D%20start%20%2B%201%29%3B%0A%20%20%7D%0A%0A%20%20var%20fromParts%20%3D%20trim%28from%2Esplit%28%27%2F%27%29%29%3B%0A%20%20var%20toParts%20%3D%20trim%28to%2Esplit%28%27%2F%27%29%29%3B%0A%0A%20%20var%20length%20%3D%20Math%2Emin%28fromParts%2Elength%2C%20toParts%2Elength%29%3B%0A%20%20var%20samePartsLength%20%3D%20length%3B%0A%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20if%20%28fromParts%5Bi%5D%20%21%3D%3D%20toParts%5Bi%5D%29%20%7B%0A%20%20%20%20%20%20samePartsLength%20%3D%20i%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20var%20outputParts%20%3D%20%5B%5D%3B%0A%20%20for%20%28var%20i%20%3D%20samePartsLength%3B%20i%20%3C%20fromParts%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20outputParts%2Epush%28%27%2E%2E%27%29%3B%0A%20%20%7D%0A%0A%20%20outputParts%20%3D%20outputParts%2Econcat%28toParts%2Eslice%28samePartsLength%29%29%3B%0A%0A%20%20return%20outputParts%2Ejoin%28%27%2F%27%29%3B%0A%7D%3B%0A%0Aexports%2Esep%20%3D%20%27%2F%27%3B%0Aexports%2Edelimiter%20%3D%20%27%3A%27%3B%0A%0Aexports%2Edirname%20%3D%20function%28path%29%20%7B%0A%20%20var%20result%20%3D%20splitPath%28path%29%2C%0A%20%20%20%20%20%20root%20%3D%20result%5B0%5D%2C%0A%20%20%20%20%20%20dir%20%3D%20result%5B1%5D%3B%0A%0A%20%20if%20%28%21root%20%26%26%20%21dir%29%20%7B%0A%20%20%20%20%2F%2F%20No%20dirname%20whatsoever%0A%20%20%20%20return%20%27%2E%27%3B%0A%20%20%7D%0A%0A%20%20if%20%28dir%29%20%7B%0A%20%20%20%20%2F%2F%20It%20has%20a%20dirname%2C%20strip%20trailing%20slash%0A%20%20%20%20dir%20%3D%20dir%2Esubstr%280%2C%20dir%2Elength%20%2D%201%29%3B%0A%20%20%7D%0A%0A%20%20return%20root%20%2B%20dir%3B%0A%7D%3B%0A%0A%0Aexports%2Ebasename%20%3D%20function%28path%2C%20ext%29%20%7B%0A%20%20var%20f%20%3D%20splitPath%28path%29%5B2%5D%3B%0A%20%20%2F%2F%20TODO%3A%20make%20this%20comparison%20case%2Dinsensitive%20on%20windows%3F%0A%20%20if%20%28ext%20%26%26%20f%2Esubstr%28%2D1%20%2A%20ext%2Elength%29%20%3D%3D%3D%20ext%29%20%7B%0A%20%20%20%20f%20%3D%20f%2Esubstr%280%2C%20f%2Elength%20%2D%20ext%2Elength%29%3B%0A%20%20%7D%0A%20%20return%20f%3B%0A%7D%3B%0A%0A%0Aexports%2Eextname%20%3D%20function%28path%29%20%7B%0A%20%20return%20splitPath%28path%29%5B3%5D%3B%0A%7D%3B%0A%0Afunction%20filter%20%28xs%2C%20f%29%20%7B%0A%20%20%20%20if%20%28xs%2Efilter%29%20return%20xs%2Efilter%28f%29%3B%0A%20%20%20%20var%20res%20%3D%20%5B%5D%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20xs%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28f%28xs%5Bi%5D%2C%20i%2C%20xs%29%29%20res%2Epush%28xs%5Bi%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20res%3B%0A%7D%0A%0A%2F%2F%20String%2Eprototype%2Esubstr%20%2D%20negative%20index%20don%27t%20work%20in%20IE8%0Avar%20substr%20%3D%20%27ab%27%2Esubstr%28%2D1%29%20%3D%3D%3D%20%27b%27%0A%20%20%20%20%3F%20function%20%28str%2C%20start%2C%20len%29%20%7B%20return%20str%2Esubstr%28start%2C%20len%29%20%7D%0A%20%20%20%20%3A%20function%20%28str%2C%20start%2C%20len%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28start%20%3C%200%29%20start%20%3D%20str%2Elength%20%2B%20start%3B%0A%20%20%20%20%20%20%20%20return%20str%2Esubstr%28start%2C%20len%29%3B%0A%20%20%20%20%7D%0A%3B%0A%0A%7D%29%2Ecall%28this%2Crequire%28%27%5Fprocess%27%29%29%0A%0A%7D%2C%7B%22%5Fprocess%22%3A3%7D%5D%2C3%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2F%20shim%20for%20using%20process%20in%20browser%0A%0Avar%20process%20%3D%20module%2Eexports%20%3D%20%7B%7D%3B%0Avar%20queue%20%3D%20%5B%5D%3B%0Avar%20draining%20%3D%20false%3B%0Avar%20currentQueue%3B%0Avar%20queueIndex%20%3D%20%2D1%3B%0A%0Afunction%20cleanUpNextTick%28%29%20%7B%0A%20%20%20%20draining%20%3D%20false%3B%0A%20%20%20%20if%20%28currentQueue%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20queue%20%3D%20currentQueue%2Econcat%28queue%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20queueIndex%20%3D%20%2D1%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28queue%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20drainQueue%28%29%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20drainQueue%28%29%20%7B%0A%20%20%20%20if%20%28draining%29%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20timeout%20%3D%20setTimeout%28cleanUpNextTick%29%3B%0A%20%20%20%20draining%20%3D%20true%3B%0A%0A%20%20%20%20var%20len%20%3D%20queue%2Elength%3B%0A%20%20%20%20while%28len%29%20%7B%0A%20%20%20%20%20%20%20%20currentQueue%20%3D%20queue%3B%0A%20%20%20%20%20%20%20%20queue%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2BqueueIndex%20%3C%20len%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28currentQueue%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20currentQueue%5BqueueIndex%5D%2Erun%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20queueIndex%20%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20len%20%3D%20queue%2Elength%3B%0A%20%20%20%20%7D%0A%20%20%20%20currentQueue%20%3D%20null%3B%0A%20%20%20%20draining%20%3D%20false%3B%0A%20%20%20%20clearTimeout%28timeout%29%3B%0A%7D%0A%0Aprocess%2EnextTick%20%3D%20function%20%28fun%29%20%7B%0A%20%20%20%20var%20args%20%3D%20new%20Array%28arguments%2Elength%20%2D%201%29%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3E%201%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%201%3B%20i%20%3C%20arguments%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20args%5Bi%20%2D%201%5D%20%3D%20arguments%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20queue%2Epush%28new%20Item%28fun%2C%20args%29%29%3B%0A%20%20%20%20if%20%28queue%2Elength%20%3D%3D%3D%201%20%26%26%20%21draining%29%20%7B%0A%20%20%20%20%20%20%20%20setTimeout%28drainQueue%2C%200%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2F%20v8%20likes%20predictible%20objects%0Afunction%20Item%28fun%2C%20array%29%20%7B%0A%20%20%20%20this%2Efun%20%3D%20fun%3B%0A%20%20%20%20this%2Earray%20%3D%20array%3B%0A%7D%0AItem%2Eprototype%2Erun%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this%2Efun%2Eapply%28null%2C%20this%2Earray%29%3B%0A%7D%3B%0Aprocess%2Etitle%20%3D%20%27browser%27%3B%0Aprocess%2Ebrowser%20%3D%20true%3B%0Aprocess%2Eenv%20%3D%20%7B%7D%3B%0Aprocess%2Eargv%20%3D%20%5B%5D%3B%0Aprocess%2Eversion%20%3D%20%27%27%3B%20%2F%2F%20empty%20string%20to%20avoid%20regexp%20issues%0Aprocess%2Eversions%20%3D%20%7B%7D%3B%0A%0Afunction%20noop%28%29%20%7B%7D%0A%0Aprocess%2Eon%20%3D%20noop%3B%0Aprocess%2EaddListener%20%3D%20noop%3B%0Aprocess%2Eonce%20%3D%20noop%3B%0Aprocess%2Eoff%20%3D%20noop%3B%0Aprocess%2EremoveListener%20%3D%20noop%3B%0Aprocess%2EremoveAllListeners%20%3D%20noop%3B%0Aprocess%2Eemit%20%3D%20noop%3B%0A%0Aprocess%2Ebinding%20%3D%20function%20%28name%29%20%7B%0A%20%20%20%20throw%20new%20Error%28%27process%2Ebinding%20is%20not%20supported%27%29%3B%0A%7D%3B%0A%0Aprocess%2Ecwd%20%3D%20function%20%28%29%20%7B%20return%20%27%2F%27%20%7D%3B%0Aprocess%2Echdir%20%3D%20function%20%28dir%29%20%7B%0A%20%20%20%20throw%20new%20Error%28%27process%2Echdir%20is%20not%20supported%27%29%3B%0A%7D%3B%0Aprocess%2Eumask%20%3D%20function%28%29%20%7B%20return%200%3B%20%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C4%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%28function%20%28global%29%7B%0A%2F%2A%21%20https%3A%2F%2Fmths%2Ebe%2Fpunycode%20v1%2E3%2E2%20by%20%40mathias%20%2A%2F%0A%3B%28function%28root%29%20%7B%0A%0A%09%2F%2A%2A%20Detect%20free%20variables%20%2A%2F%0A%09var%20freeExports%20%3D%20typeof%20exports%20%3D%3D%20%27object%27%20%26%26%20exports%20%26%26%0A%09%09%21exports%2EnodeType%20%26%26%20exports%3B%0A%09var%20freeModule%20%3D%20typeof%20module%20%3D%3D%20%27object%27%20%26%26%20module%20%26%26%0A%09%09%21module%2EnodeType%20%26%26%20module%3B%0A%09var%20freeGlobal%20%3D%20typeof%20global%20%3D%3D%20%27object%27%20%26%26%20global%3B%0A%09if%20%28%0A%09%09freeGlobal%2Eglobal%20%3D%3D%3D%20freeGlobal%20%7C%7C%0A%09%09freeGlobal%2Ewindow%20%3D%3D%3D%20freeGlobal%20%7C%7C%0A%09%09freeGlobal%2Eself%20%3D%3D%3D%20freeGlobal%0A%09%29%20%7B%0A%09%09root%20%3D%20freeGlobal%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20The%20%60punycode%60%20object%2E%0A%09%20%2A%20%40name%20punycode%0A%09%20%2A%20%40type%20Object%0A%09%20%2A%2F%0A%09var%20punycode%2C%0A%0A%09%2F%2A%2A%20Highest%20positive%20signed%2032%2Dbit%20float%20value%20%2A%2F%0A%09maxInt%20%3D%202147483647%2C%20%2F%2F%20aka%2E%200x7FFFFFFF%20or%202%5E31%2D1%0A%0A%09%2F%2A%2A%20Bootstring%20parameters%20%2A%2F%0A%09base%20%3D%2036%2C%0A%09tMin%20%3D%201%2C%0A%09tMax%20%3D%2026%2C%0A%09skew%20%3D%2038%2C%0A%09damp%20%3D%20700%2C%0A%09initialBias%20%3D%2072%2C%0A%09initialN%20%3D%20128%2C%20%2F%2F%200x80%0A%09delimiter%20%3D%20%27%2D%27%2C%20%2F%2F%20%27%5Cx2D%27%0A%0A%09%2F%2A%2A%20Regular%20expressions%20%2A%2F%0A%09regexPunycode%20%3D%20%2F%5Exn%2D%2D%2F%2C%0A%09regexNonASCII%20%3D%20%2F%5B%5E%5Cx20%2D%5Cx7E%5D%2F%2C%20%2F%2F%20unprintable%20ASCII%20chars%20%2B%20non%2DASCII%20chars%0A%09regexSeparators%20%3D%20%2F%5B%5Cx2E%5Cu3002%5CuFF0E%5CuFF61%5D%2Fg%2C%20%2F%2F%20RFC%203490%20separators%0A%0A%09%2F%2A%2A%20Error%20messages%20%2A%2F%0A%09errors%20%3D%20%7B%0A%09%09%27overflow%27%3A%20%27Overflow%3A%20input%20needs%20wider%20integers%20to%20process%27%2C%0A%09%09%27not%2Dbasic%27%3A%20%27Illegal%20input%20%3E%3D%200x80%20%28not%20a%20basic%20code%20point%29%27%2C%0A%09%09%27invalid%2Dinput%27%3A%20%27Invalid%20input%27%0A%09%7D%2C%0A%0A%09%2F%2A%2A%20Convenience%20shortcuts%20%2A%2F%0A%09baseMinusTMin%20%3D%20base%20%2D%20tMin%2C%0A%09floor%20%3D%20Math%2Efloor%2C%0A%09stringFromCharCode%20%3D%20String%2EfromCharCode%2C%0A%0A%09%2F%2A%2A%20Temporary%20variable%20%2A%2F%0A%09key%3B%0A%0A%09%2F%2A%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2A%2F%0A%0A%09%2F%2A%2A%0A%09%20%2A%20A%20generic%20error%20utility%20function%2E%0A%09%20%2A%20%40private%0A%09%20%2A%20%40param%20%7BString%7D%20type%20The%20error%20type%2E%0A%09%20%2A%20%40returns%20%7BError%7D%20Throws%20a%20%60RangeError%60%20with%20the%20applicable%20error%20message%2E%0A%09%20%2A%2F%0A%09function%20error%28type%29%20%7B%0A%09%09throw%20RangeError%28errors%5Btype%5D%29%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20A%20generic%20%60Array%23map%60%20utility%20function%2E%0A%09%20%2A%20%40private%0A%09%20%2A%20%40param%20%7BArray%7D%20array%20The%20array%20to%20iterate%20over%2E%0A%09%20%2A%20%40param%20%7BFunction%7D%20callback%20The%20function%20that%20gets%20called%20for%20every%20array%0A%09%20%2A%20item%2E%0A%09%20%2A%20%40returns%20%7BArray%7D%20A%20new%20array%20of%20values%20returned%20by%20the%20callback%20function%2E%0A%09%20%2A%2F%0A%09function%20map%28array%2C%20fn%29%20%7B%0A%09%09var%20length%20%3D%20array%2Elength%3B%0A%09%09var%20result%20%3D%20%5B%5D%3B%0A%09%09while%20%28length%2D%2D%29%20%7B%0A%09%09%09result%5Blength%5D%20%3D%20fn%28array%5Blength%5D%29%3B%0A%09%09%7D%0A%09%09return%20result%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20A%20simple%20%60Array%23map%60%2Dlike%20wrapper%20to%20work%20with%20domain%20name%20strings%20or%20email%0A%09%20%2A%20addresses%2E%0A%09%20%2A%20%40private%0A%09%20%2A%20%40param%20%7BString%7D%20domain%20The%20domain%20name%20or%20email%20address%2E%0A%09%20%2A%20%40param%20%7BFunction%7D%20callback%20The%20function%20that%20gets%20called%20for%20every%0A%09%20%2A%20character%2E%0A%09%20%2A%20%40returns%20%7BArray%7D%20A%20new%20string%20of%20characters%20returned%20by%20the%20callback%0A%09%20%2A%20function%2E%0A%09%20%2A%2F%0A%09function%20mapDomain%28string%2C%20fn%29%20%7B%0A%09%09var%20parts%20%3D%20string%2Esplit%28%27%40%27%29%3B%0A%09%09var%20result%20%3D%20%27%27%3B%0A%09%09if%20%28parts%2Elength%20%3E%201%29%20%7B%0A%09%09%09%2F%2F%20In%20email%20addresses%2C%20only%20the%20domain%20name%20should%20be%20punycoded%2E%20Leave%0A%09%09%09%2F%2F%20the%20local%20part%20%28i%2Ee%2E%20everything%20up%20to%20%60%40%60%29%20intact%2E%0A%09%09%09result%20%3D%20parts%5B0%5D%20%2B%20%27%40%27%3B%0A%09%09%09string%20%3D%20parts%5B1%5D%3B%0A%09%09%7D%0A%09%09%2F%2F%20Avoid%20%60split%28regex%29%60%20for%20IE8%20compatibility%2E%20See%20%2317%2E%0A%09%09string%20%3D%20string%2Ereplace%28regexSeparators%2C%20%27%5Cx2E%27%29%3B%0A%09%09var%20labels%20%3D%20string%2Esplit%28%27%2E%27%29%3B%0A%09%09var%20encoded%20%3D%20map%28labels%2C%20fn%29%2Ejoin%28%27%2E%27%29%3B%0A%09%09return%20result%20%2B%20encoded%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20Creates%20an%20array%20containing%20the%20numeric%20code%20points%20of%20each%20Unicode%0A%09%20%2A%20character%20in%20the%20string%2E%20While%20JavaScript%20uses%20UCS%2D2%20internally%2C%0A%09%20%2A%20this%20function%20will%20convert%20a%20pair%20of%20surrogate%20halves%20%28each%20of%20which%0A%09%20%2A%20UCS%2D2%20exposes%20as%20separate%20characters%29%20into%20a%20single%20code%20point%2C%0A%09%20%2A%20matching%20UTF%2D16%2E%0A%09%20%2A%20%40see%20%60punycode%2Eucs2%2Eencode%60%0A%09%20%2A%20%40see%20%3Chttps%3A%2F%2Fmathiasbynens%2Ebe%2Fnotes%2Fjavascript%2Dencoding%3E%0A%09%20%2A%20%40memberOf%20punycode%2Eucs2%0A%09%20%2A%20%40name%20decode%0A%09%20%2A%20%40param%20%7BString%7D%20string%20The%20Unicode%20input%20string%20%28UCS%2D2%29%2E%0A%09%20%2A%20%40returns%20%7BArray%7D%20The%20new%20array%20of%20code%20points%2E%0A%09%20%2A%2F%0A%09function%20ucs2decode%28string%29%20%7B%0A%09%09var%20output%20%3D%20%5B%5D%2C%0A%09%09%20%20%20%20counter%20%3D%200%2C%0A%09%09%20%20%20%20length%20%3D%20string%2Elength%2C%0A%09%09%20%20%20%20value%2C%0A%09%09%20%20%20%20extra%3B%0A%09%09while%20%28counter%20%3C%20length%29%20%7B%0A%09%09%09value%20%3D%20string%2EcharCodeAt%28counter%2B%2B%29%3B%0A%09%09%09if%20%28value%20%3E%3D%200xD800%20%26%26%20value%20%3C%3D%200xDBFF%20%26%26%20counter%20%3C%20length%29%20%7B%0A%09%09%09%09%2F%2F%20high%20surrogate%2C%20and%20there%20is%20a%20next%20character%0A%09%09%09%09extra%20%3D%20string%2EcharCodeAt%28counter%2B%2B%29%3B%0A%09%09%09%09if%20%28%28extra%20%26%200xFC00%29%20%3D%3D%200xDC00%29%20%7B%20%2F%2F%20low%20surrogate%0A%09%09%09%09%09output%2Epush%28%28%28value%20%26%200x3FF%29%20%3C%3C%2010%29%20%2B%20%28extra%20%26%200x3FF%29%20%2B%200x10000%29%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%2F%2F%20unmatched%20surrogate%3B%20only%20append%20this%20code%20unit%2C%20in%20case%20the%20next%0A%09%09%09%09%09%2F%2F%20code%20unit%20is%20the%20high%20surrogate%20of%20a%20surrogate%20pair%0A%09%09%09%09%09output%2Epush%28value%29%3B%0A%09%09%09%09%09counter%2D%2D%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09output%2Epush%28value%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20output%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20Creates%20a%20string%20based%20on%20an%20array%20of%20numeric%20code%20points%2E%0A%09%20%2A%20%40see%20%60punycode%2Eucs2%2Edecode%60%0A%09%20%2A%20%40memberOf%20punycode%2Eucs2%0A%09%20%2A%20%40name%20encode%0A%09%20%2A%20%40param%20%7BArray%7D%20codePoints%20The%20array%20of%20numeric%20code%20points%2E%0A%09%20%2A%20%40returns%20%7BString%7D%20The%20new%20Unicode%20string%20%28UCS%2D2%29%2E%0A%09%20%2A%2F%0A%09function%20ucs2encode%28array%29%20%7B%0A%09%09return%20map%28array%2C%20function%28value%29%20%7B%0A%09%09%09var%20output%20%3D%20%27%27%3B%0A%09%09%09if%20%28value%20%3E%200xFFFF%29%20%7B%0A%09%09%09%09value%20%2D%3D%200x10000%3B%0A%09%09%09%09output%20%2B%3D%20stringFromCharCode%28value%20%3E%3E%3E%2010%20%26%200x3FF%20%7C%200xD800%29%3B%0A%09%09%09%09value%20%3D%200xDC00%20%7C%20value%20%26%200x3FF%3B%0A%09%09%09%7D%0A%09%09%09output%20%2B%3D%20stringFromCharCode%28value%29%3B%0A%09%09%09return%20output%3B%0A%09%09%7D%29%2Ejoin%28%27%27%29%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20Converts%20a%20basic%20code%20point%20into%20a%20digit%2Finteger%2E%0A%09%20%2A%20%40see%20%60digitToBasic%28%29%60%0A%09%20%2A%20%40private%0A%09%20%2A%20%40param%20%7BNumber%7D%20codePoint%20The%20basic%20numeric%20code%20point%20value%2E%0A%09%20%2A%20%40returns%20%7BNumber%7D%20The%20numeric%20value%20of%20a%20basic%20code%20point%20%28for%20use%20in%0A%09%20%2A%20representing%20integers%29%20in%20the%20range%20%600%60%20to%20%60base%20%2D%201%60%2C%20or%20%60base%60%20if%0A%09%20%2A%20the%20code%20point%20does%20not%20represent%20a%20value%2E%0A%09%20%2A%2F%0A%09function%20basicToDigit%28codePoint%29%20%7B%0A%09%09if%20%28codePoint%20%2D%2048%20%3C%2010%29%20%7B%0A%09%09%09return%20codePoint%20%2D%2022%3B%0A%09%09%7D%0A%09%09if%20%28codePoint%20%2D%2065%20%3C%2026%29%20%7B%0A%09%09%09return%20codePoint%20%2D%2065%3B%0A%09%09%7D%0A%09%09if%20%28codePoint%20%2D%2097%20%3C%2026%29%20%7B%0A%09%09%09return%20codePoint%20%2D%2097%3B%0A%09%09%7D%0A%09%09return%20base%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20Converts%20a%20digit%2Finteger%20into%20a%20basic%20code%20point%2E%0A%09%20%2A%20%40see%20%60basicToDigit%28%29%60%0A%09%20%2A%20%40private%0A%09%20%2A%20%40param%20%7BNumber%7D%20digit%20The%20numeric%20value%20of%20a%20basic%20code%20point%2E%0A%09%20%2A%20%40returns%20%7BNumber%7D%20The%20basic%20code%20point%20whose%20value%20%28when%20used%20for%0A%09%20%2A%20representing%20integers%29%20is%20%60digit%60%2C%20which%20needs%20to%20be%20in%20the%20range%0A%09%20%2A%20%600%60%20to%20%60base%20%2D%201%60%2E%20If%20%60flag%60%20is%20non%2Dzero%2C%20the%20uppercase%20form%20is%0A%09%20%2A%20used%3B%20else%2C%20the%20lowercase%20form%20is%20used%2E%20The%20behavior%20is%20undefined%0A%09%20%2A%20if%20%60flag%60%20is%20non%2Dzero%20and%20%60digit%60%20has%20no%20uppercase%20form%2E%0A%09%20%2A%2F%0A%09function%20digitToBasic%28digit%2C%20flag%29%20%7B%0A%09%09%2F%2F%20%200%2E%2E25%20map%20to%20ASCII%20a%2E%2Ez%20or%20A%2E%2EZ%0A%09%09%2F%2F%2026%2E%2E35%20map%20to%20ASCII%200%2E%2E9%0A%09%09return%20digit%20%2B%2022%20%2B%2075%20%2A%20%28digit%20%3C%2026%29%20%2D%20%28%28flag%20%21%3D%200%29%20%3C%3C%205%29%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20Bias%20adaptation%20function%20as%20per%20section%203%2E4%20of%20RFC%203492%2E%0A%09%20%2A%20http%3A%2F%2Ftools%2Eietf%2Eorg%2Fhtml%2Frfc3492%23section%2D3%2E4%0A%09%20%2A%20%40private%0A%09%20%2A%2F%0A%09function%20adapt%28delta%2C%20numPoints%2C%20firstTime%29%20%7B%0A%09%09var%20k%20%3D%200%3B%0A%09%09delta%20%3D%20firstTime%20%3F%20floor%28delta%20%2F%20damp%29%20%3A%20delta%20%3E%3E%201%3B%0A%09%09delta%20%2B%3D%20floor%28delta%20%2F%20numPoints%29%3B%0A%09%09for%20%28%2F%2A%20no%20initialization%20%2A%2F%3B%20delta%20%3E%20baseMinusTMin%20%2A%20tMax%20%3E%3E%201%3B%20k%20%2B%3D%20base%29%20%7B%0A%09%09%09delta%20%3D%20floor%28delta%20%2F%20baseMinusTMin%29%3B%0A%09%09%7D%0A%09%09return%20floor%28k%20%2B%20%28baseMinusTMin%20%2B%201%29%20%2A%20delta%20%2F%20%28delta%20%2B%20skew%29%29%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20Converts%20a%20Punycode%20string%20of%20ASCII%2Donly%20symbols%20to%20a%20string%20of%20Unicode%0A%09%20%2A%20symbols%2E%0A%09%20%2A%20%40memberOf%20punycode%0A%09%20%2A%20%40param%20%7BString%7D%20input%20The%20Punycode%20string%20of%20ASCII%2Donly%20symbols%2E%0A%09%20%2A%20%40returns%20%7BString%7D%20The%20resulting%20string%20of%20Unicode%20symbols%2E%0A%09%20%2A%2F%0A%09function%20decode%28input%29%20%7B%0A%09%09%2F%2F%20Don%27t%20use%20UCS%2D2%0A%09%09var%20output%20%3D%20%5B%5D%2C%0A%09%09%20%20%20%20inputLength%20%3D%20input%2Elength%2C%0A%09%09%20%20%20%20out%2C%0A%09%09%20%20%20%20i%20%3D%200%2C%0A%09%09%20%20%20%20n%20%3D%20initialN%2C%0A%09%09%20%20%20%20bias%20%3D%20initialBias%2C%0A%09%09%20%20%20%20basic%2C%0A%09%09%20%20%20%20j%2C%0A%09%09%20%20%20%20index%2C%0A%09%09%20%20%20%20oldi%2C%0A%09%09%20%20%20%20w%2C%0A%09%09%20%20%20%20k%2C%0A%09%09%20%20%20%20digit%2C%0A%09%09%20%20%20%20t%2C%0A%09%09%20%20%20%20%2F%2A%2A%20Cached%20calculation%20results%20%2A%2F%0A%09%09%20%20%20%20baseMinusT%3B%0A%0A%09%09%2F%2F%20Handle%20the%20basic%20code%20points%3A%20let%20%60basic%60%20be%20the%20number%20of%20input%20code%0A%09%09%2F%2F%20points%20before%20the%20last%20delimiter%2C%20or%20%600%60%20if%20there%20is%20none%2C%20then%20copy%0A%09%09%2F%2F%20the%20first%20basic%20code%20points%20to%20the%20output%2E%0A%0A%09%09basic%20%3D%20input%2ElastIndexOf%28delimiter%29%3B%0A%09%09if%20%28basic%20%3C%200%29%20%7B%0A%09%09%09basic%20%3D%200%3B%0A%09%09%7D%0A%0A%09%09for%20%28j%20%3D%200%3B%20j%20%3C%20basic%3B%20%2B%2Bj%29%20%7B%0A%09%09%09%2F%2F%20if%20it%27s%20not%20a%20basic%20code%20point%0A%09%09%09if%20%28input%2EcharCodeAt%28j%29%20%3E%3D%200x80%29%20%7B%0A%09%09%09%09error%28%27not%2Dbasic%27%29%3B%0A%09%09%09%7D%0A%09%09%09output%2Epush%28input%2EcharCodeAt%28j%29%29%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Main%20decoding%20loop%3A%20start%20just%20after%20the%20last%20delimiter%20if%20any%20basic%20code%0A%09%09%2F%2F%20points%20were%20copied%3B%20start%20at%20the%20beginning%20otherwise%2E%0A%0A%09%09for%20%28index%20%3D%20basic%20%3E%200%20%3F%20basic%20%2B%201%20%3A%200%3B%20index%20%3C%20inputLength%3B%20%2F%2A%20no%20final%20expression%20%2A%2F%29%20%7B%0A%0A%09%09%09%2F%2F%20%60index%60%20is%20the%20index%20of%20the%20next%20character%20to%20be%20consumed%2E%0A%09%09%09%2F%2F%20Decode%20a%20generalized%20variable%2Dlength%20integer%20into%20%60delta%60%2C%0A%09%09%09%2F%2F%20which%20gets%20added%20to%20%60i%60%2E%20The%20overflow%20checking%20is%20easier%0A%09%09%09%2F%2F%20if%20we%20increase%20%60i%60%20as%20we%20go%2C%20then%20subtract%20off%20its%20starting%0A%09%09%09%2F%2F%20value%20at%20the%20end%20to%20obtain%20%60delta%60%2E%0A%09%09%09for%20%28oldi%20%3D%20i%2C%20w%20%3D%201%2C%20k%20%3D%20base%3B%20%2F%2A%20no%20condition%20%2A%2F%3B%20k%20%2B%3D%20base%29%20%7B%0A%0A%09%09%09%09if%20%28index%20%3E%3D%20inputLength%29%20%7B%0A%09%09%09%09%09error%28%27invalid%2Dinput%27%29%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09digit%20%3D%20basicToDigit%28input%2EcharCodeAt%28index%2B%2B%29%29%3B%0A%0A%09%09%09%09if%20%28digit%20%3E%3D%20base%20%7C%7C%20digit%20%3E%20floor%28%28maxInt%20%2D%20i%29%20%2F%20w%29%29%20%7B%0A%09%09%09%09%09error%28%27overflow%27%29%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09i%20%2B%3D%20digit%20%2A%20w%3B%0A%09%09%09%09t%20%3D%20k%20%3C%3D%20bias%20%3F%20tMin%20%3A%20%28k%20%3E%3D%20bias%20%2B%20tMax%20%3F%20tMax%20%3A%20k%20%2D%20bias%29%3B%0A%0A%09%09%09%09if%20%28digit%20%3C%20t%29%20%7B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09baseMinusT%20%3D%20base%20%2D%20t%3B%0A%09%09%09%09if%20%28w%20%3E%20floor%28maxInt%20%2F%20baseMinusT%29%29%20%7B%0A%09%09%09%09%09error%28%27overflow%27%29%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09w%20%2A%3D%20baseMinusT%3B%0A%0A%09%09%09%7D%0A%0A%09%09%09out%20%3D%20output%2Elength%20%2B%201%3B%0A%09%09%09bias%20%3D%20adapt%28i%20%2D%20oldi%2C%20out%2C%20oldi%20%3D%3D%200%29%3B%0A%0A%09%09%09%2F%2F%20%60i%60%20was%20supposed%20to%20wrap%20around%20from%20%60out%60%20to%20%600%60%2C%0A%09%09%09%2F%2F%20incrementing%20%60n%60%20each%20time%2C%20so%20we%27ll%20fix%20that%20now%3A%0A%09%09%09if%20%28floor%28i%20%2F%20out%29%20%3E%20maxInt%20%2D%20n%29%20%7B%0A%09%09%09%09error%28%27overflow%27%29%3B%0A%09%09%09%7D%0A%0A%09%09%09n%20%2B%3D%20floor%28i%20%2F%20out%29%3B%0A%09%09%09i%20%25%3D%20out%3B%0A%0A%09%09%09%2F%2F%20Insert%20%60n%60%20at%20position%20%60i%60%20of%20the%20output%0A%09%09%09output%2Esplice%28i%2B%2B%2C%200%2C%20n%29%3B%0A%0A%09%09%7D%0A%0A%09%09return%20ucs2encode%28output%29%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20Converts%20a%20string%20of%20Unicode%20symbols%20%28e%2Eg%2E%20a%20domain%20name%20label%29%20to%20a%0A%09%20%2A%20Punycode%20string%20of%20ASCII%2Donly%20symbols%2E%0A%09%20%2A%20%40memberOf%20punycode%0A%09%20%2A%20%40param%20%7BString%7D%20input%20The%20string%20of%20Unicode%20symbols%2E%0A%09%20%2A%20%40returns%20%7BString%7D%20The%20resulting%20Punycode%20string%20of%20ASCII%2Donly%20symbols%2E%0A%09%20%2A%2F%0A%09function%20encode%28input%29%20%7B%0A%09%09var%20n%2C%0A%09%09%20%20%20%20delta%2C%0A%09%09%20%20%20%20handledCPCount%2C%0A%09%09%20%20%20%20basicLength%2C%0A%09%09%20%20%20%20bias%2C%0A%09%09%20%20%20%20j%2C%0A%09%09%20%20%20%20m%2C%0A%09%09%20%20%20%20q%2C%0A%09%09%20%20%20%20k%2C%0A%09%09%20%20%20%20t%2C%0A%09%09%20%20%20%20currentValue%2C%0A%09%09%20%20%20%20output%20%3D%20%5B%5D%2C%0A%09%09%20%20%20%20%2F%2A%2A%20%60inputLength%60%20will%20hold%20the%20number%20of%20code%20points%20in%20%60input%60%2E%20%2A%2F%0A%09%09%20%20%20%20inputLength%2C%0A%09%09%20%20%20%20%2F%2A%2A%20Cached%20calculation%20results%20%2A%2F%0A%09%09%20%20%20%20handledCPCountPlusOne%2C%0A%09%09%20%20%20%20baseMinusT%2C%0A%09%09%20%20%20%20qMinusT%3B%0A%0A%09%09%2F%2F%20Convert%20the%20input%20in%20UCS%2D2%20to%20Unicode%0A%09%09input%20%3D%20ucs2decode%28input%29%3B%0A%0A%09%09%2F%2F%20Cache%20the%20length%0A%09%09inputLength%20%3D%20input%2Elength%3B%0A%0A%09%09%2F%2F%20Initialize%20the%20state%0A%09%09n%20%3D%20initialN%3B%0A%09%09delta%20%3D%200%3B%0A%09%09bias%20%3D%20initialBias%3B%0A%0A%09%09%2F%2F%20Handle%20the%20basic%20code%20points%0A%09%09for%20%28j%20%3D%200%3B%20j%20%3C%20inputLength%3B%20%2B%2Bj%29%20%7B%0A%09%09%09currentValue%20%3D%20input%5Bj%5D%3B%0A%09%09%09if%20%28currentValue%20%3C%200x80%29%20%7B%0A%09%09%09%09output%2Epush%28stringFromCharCode%28currentValue%29%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09handledCPCount%20%3D%20basicLength%20%3D%20output%2Elength%3B%0A%0A%09%09%2F%2F%20%60handledCPCount%60%20is%20the%20number%20of%20code%20points%20that%20have%20been%20handled%3B%0A%09%09%2F%2F%20%60basicLength%60%20is%20the%20number%20of%20basic%20code%20points%2E%0A%0A%09%09%2F%2F%20Finish%20the%20basic%20string%20%2D%20if%20it%20is%20not%20empty%20%2D%20with%20a%20delimiter%0A%09%09if%20%28basicLength%29%20%7B%0A%09%09%09output%2Epush%28delimiter%29%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Main%20encoding%20loop%3A%0A%09%09while%20%28handledCPCount%20%3C%20inputLength%29%20%7B%0A%0A%09%09%09%2F%2F%20All%20non%2Dbasic%20code%20points%20%3C%20n%20have%20been%20handled%20already%2E%20Find%20the%20next%0A%09%09%09%2F%2F%20larger%20one%3A%0A%09%09%09for%20%28m%20%3D%20maxInt%2C%20j%20%3D%200%3B%20j%20%3C%20inputLength%3B%20%2B%2Bj%29%20%7B%0A%09%09%09%09currentValue%20%3D%20input%5Bj%5D%3B%0A%09%09%09%09if%20%28currentValue%20%3E%3D%20n%20%26%26%20currentValue%20%3C%20m%29%20%7B%0A%09%09%09%09%09m%20%3D%20currentValue%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09%2F%2F%20Increase%20%60delta%60%20enough%20to%20advance%20the%20decoder%27s%20%3Cn%2Ci%3E%20state%20to%20%3Cm%2C0%3E%2C%0A%09%09%09%2F%2F%20but%20guard%20against%20overflow%0A%09%09%09handledCPCountPlusOne%20%3D%20handledCPCount%20%2B%201%3B%0A%09%09%09if%20%28m%20%2D%20n%20%3E%20floor%28%28maxInt%20%2D%20delta%29%20%2F%20handledCPCountPlusOne%29%29%20%7B%0A%09%09%09%09error%28%27overflow%27%29%3B%0A%09%09%09%7D%0A%0A%09%09%09delta%20%2B%3D%20%28m%20%2D%20n%29%20%2A%20handledCPCountPlusOne%3B%0A%09%09%09n%20%3D%20m%3B%0A%0A%09%09%09for%20%28j%20%3D%200%3B%20j%20%3C%20inputLength%3B%20%2B%2Bj%29%20%7B%0A%09%09%09%09currentValue%20%3D%20input%5Bj%5D%3B%0A%0A%09%09%09%09if%20%28currentValue%20%3C%20n%20%26%26%20%2B%2Bdelta%20%3E%20maxInt%29%20%7B%0A%09%09%09%09%09error%28%27overflow%27%29%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09if%20%28currentValue%20%3D%3D%20n%29%20%7B%0A%09%09%09%09%09%2F%2F%20Represent%20delta%20as%20a%20generalized%20variable%2Dlength%20integer%0A%09%09%09%09%09for%20%28q%20%3D%20delta%2C%20k%20%3D%20base%3B%20%2F%2A%20no%20condition%20%2A%2F%3B%20k%20%2B%3D%20base%29%20%7B%0A%09%09%09%09%09%09t%20%3D%20k%20%3C%3D%20bias%20%3F%20tMin%20%3A%20%28k%20%3E%3D%20bias%20%2B%20tMax%20%3F%20tMax%20%3A%20k%20%2D%20bias%29%3B%0A%09%09%09%09%09%09if%20%28q%20%3C%20t%29%20%7B%0A%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09qMinusT%20%3D%20q%20%2D%20t%3B%0A%09%09%09%09%09%09baseMinusT%20%3D%20base%20%2D%20t%3B%0A%09%09%09%09%09%09output%2Epush%28%0A%09%09%09%09%09%09%09stringFromCharCode%28digitToBasic%28t%20%2B%20qMinusT%20%25%20baseMinusT%2C%200%29%29%0A%09%09%09%09%09%09%29%3B%0A%09%09%09%09%09%09q%20%3D%20floor%28qMinusT%20%2F%20baseMinusT%29%3B%0A%09%09%09%09%09%7D%0A%0A%09%09%09%09%09output%2Epush%28stringFromCharCode%28digitToBasic%28q%2C%200%29%29%29%3B%0A%09%09%09%09%09bias%20%3D%20adapt%28delta%2C%20handledCPCountPlusOne%2C%20handledCPCount%20%3D%3D%20basicLength%29%3B%0A%09%09%09%09%09delta%20%3D%200%3B%0A%09%09%09%09%09%2B%2BhandledCPCount%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09%2B%2Bdelta%3B%0A%09%09%09%2B%2Bn%3B%0A%0A%09%09%7D%0A%09%09return%20output%2Ejoin%28%27%27%29%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20Converts%20a%20Punycode%20string%20representing%20a%20domain%20name%20or%20an%20email%20address%0A%09%20%2A%20to%20Unicode%2E%20Only%20the%20Punycoded%20parts%20of%20the%20input%20will%20be%20converted%2C%20i%2Ee%2E%0A%09%20%2A%20it%20doesn%27t%20matter%20if%20you%20call%20it%20on%20a%20string%20that%20has%20already%20been%0A%09%20%2A%20converted%20to%20Unicode%2E%0A%09%20%2A%20%40memberOf%20punycode%0A%09%20%2A%20%40param%20%7BString%7D%20input%20The%20Punycoded%20domain%20name%20or%20email%20address%20to%0A%09%20%2A%20convert%20to%20Unicode%2E%0A%09%20%2A%20%40returns%20%7BString%7D%20The%20Unicode%20representation%20of%20the%20given%20Punycode%0A%09%20%2A%20string%2E%0A%09%20%2A%2F%0A%09function%20toUnicode%28input%29%20%7B%0A%09%09return%20mapDomain%28input%2C%20function%28string%29%20%7B%0A%09%09%09return%20regexPunycode%2Etest%28string%29%0A%09%09%09%09%3F%20decode%28string%2Eslice%284%29%2EtoLowerCase%28%29%29%0A%09%09%09%09%3A%20string%3B%0A%09%09%7D%29%3B%0A%09%7D%0A%0A%09%2F%2A%2A%0A%09%20%2A%20Converts%20a%20Unicode%20string%20representing%20a%20domain%20name%20or%20an%20email%20address%20to%0A%09%20%2A%20Punycode%2E%20Only%20the%20non%2DASCII%20parts%20of%20the%20domain%20name%20will%20be%20converted%2C%0A%09%20%2A%20i%2Ee%2E%20it%20doesn%27t%20matter%20if%20you%20call%20it%20with%20a%20domain%20that%27s%20already%20in%0A%09%20%2A%20ASCII%2E%0A%09%20%2A%20%40memberOf%20punycode%0A%09%20%2A%20%40param%20%7BString%7D%20input%20The%20domain%20name%20or%20email%20address%20to%20convert%2C%20as%20a%0A%09%20%2A%20Unicode%20string%2E%0A%09%20%2A%20%40returns%20%7BString%7D%20The%20Punycode%20representation%20of%20the%20given%20domain%20name%20or%0A%09%20%2A%20email%20address%2E%0A%09%20%2A%2F%0A%09function%20toASCII%28input%29%20%7B%0A%09%09return%20mapDomain%28input%2C%20function%28string%29%20%7B%0A%09%09%09return%20regexNonASCII%2Etest%28string%29%0A%09%09%09%09%3F%20%27xn%2D%2D%27%20%2B%20encode%28string%29%0A%09%09%09%09%3A%20string%3B%0A%09%09%7D%29%3B%0A%09%7D%0A%0A%09%2F%2A%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2A%2F%0A%0A%09%2F%2A%2A%20Define%20the%20public%20API%20%2A%2F%0A%09punycode%20%3D%20%7B%0A%09%09%2F%2A%2A%0A%09%09%20%2A%20A%20string%20representing%20the%20current%20Punycode%2Ejs%20version%20number%2E%0A%09%09%20%2A%20%40memberOf%20punycode%0A%09%09%20%2A%20%40type%20String%0A%09%09%20%2A%2F%0A%09%09%27version%27%3A%20%271%2E3%2E2%27%2C%0A%09%09%2F%2A%2A%0A%09%09%20%2A%20An%20object%20of%20methods%20to%20convert%20from%20JavaScript%27s%20internal%20character%0A%09%09%20%2A%20representation%20%28UCS%2D2%29%20to%20Unicode%20code%20points%2C%20and%20back%2E%0A%09%09%20%2A%20%40see%20%3Chttps%3A%2F%2Fmathiasbynens%2Ebe%2Fnotes%2Fjavascript%2Dencoding%3E%0A%09%09%20%2A%20%40memberOf%20punycode%0A%09%09%20%2A%20%40type%20Object%0A%09%09%20%2A%2F%0A%09%09%27ucs2%27%3A%20%7B%0A%09%09%09%27decode%27%3A%20ucs2decode%2C%0A%09%09%09%27encode%27%3A%20ucs2encode%0A%09%09%7D%2C%0A%09%09%27decode%27%3A%20decode%2C%0A%09%09%27encode%27%3A%20encode%2C%0A%09%09%27toASCII%27%3A%20toASCII%2C%0A%09%09%27toUnicode%27%3A%20toUnicode%0A%09%7D%3B%0A%0A%09%2F%2A%2A%20Expose%20%60punycode%60%20%2A%2F%0A%09%2F%2F%20Some%20AMD%20build%20optimizers%2C%20like%20r%2Ejs%2C%20check%20for%20specific%20condition%20patterns%0A%09%2F%2F%20like%20the%20following%3A%0A%09if%20%28%0A%09%09typeof%20define%20%3D%3D%20%27function%27%20%26%26%0A%09%09typeof%20define%2Eamd%20%3D%3D%20%27object%27%20%26%26%0A%09%09define%2Eamd%0A%09%29%20%7B%0A%09%09define%28%27punycode%27%2C%20function%28%29%20%7B%0A%09%09%09return%20punycode%3B%0A%09%09%7D%29%3B%0A%09%7D%20else%20if%20%28freeExports%20%26%26%20freeModule%29%20%7B%0A%09%09if%20%28module%2Eexports%20%3D%3D%20freeExports%29%20%7B%20%2F%2F%20in%20Node%2Ejs%20or%20RingoJS%20v0%2E8%2E0%2B%0A%09%09%09freeModule%2Eexports%20%3D%20punycode%3B%0A%09%09%7D%20else%20%7B%20%2F%2F%20in%20Narwhal%20or%20RingoJS%20v0%2E7%2E0%2D%0A%09%09%09for%20%28key%20in%20punycode%29%20%7B%0A%09%09%09%09punycode%2EhasOwnProperty%28key%29%20%26%26%20%28freeExports%5Bkey%5D%20%3D%20punycode%5Bkey%5D%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%20else%20%7B%20%2F%2F%20in%20Rhino%20or%20a%20web%20browser%0A%09%09root%2Epunycode%20%3D%20punycode%3B%0A%09%7D%0A%0A%7D%28this%29%29%3B%0A%0A%7D%29%2Ecall%28this%2Ctypeof%20global%20%21%3D%3D%20%22undefined%22%20%3F%20global%20%3A%20typeof%20self%20%21%3D%3D%20%22undefined%22%20%3F%20self%20%3A%20typeof%20window%20%21%3D%3D%20%22undefined%22%20%3F%20window%20%3A%20%7B%7D%29%0A%0A%7D%2C%7B%7D%5D%2C5%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2F%20Copyright%20Joyent%2C%20Inc%2E%20and%20other%20Node%20contributors%2E%0A%2F%2F%0A%2F%2F%20Permission%20is%20hereby%20granted%2C%20free%20of%20charge%2C%20to%20any%20person%20obtaining%20a%0A%2F%2F%20copy%20of%20this%20software%20and%20associated%20documentation%20files%20%28the%0A%2F%2F%20%22Software%22%29%2C%20to%20deal%20in%20the%20Software%20without%20restriction%2C%20including%0A%2F%2F%20without%20limitation%20the%20rights%20to%20use%2C%20copy%2C%20modify%2C%20merge%2C%20publish%2C%0A%2F%2F%20distribute%2C%20sublicense%2C%20and%2For%20sell%20copies%20of%20the%20Software%2C%20and%20to%20permit%0A%2F%2F%20persons%20to%20whom%20the%20Software%20is%20furnished%20to%20do%20so%2C%20subject%20to%20the%0A%2F%2F%20following%20conditions%3A%0A%2F%2F%0A%2F%2F%20The%20above%20copyright%20notice%20and%20this%20permission%20notice%20shall%20be%20included%0A%2F%2F%20in%20all%20copies%20or%20substantial%20portions%20of%20the%20Software%2E%0A%2F%2F%0A%2F%2F%20THE%20SOFTWARE%20IS%20PROVIDED%20%22AS%20IS%22%2C%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND%2C%20EXPRESS%0A%2F%2F%20OR%20IMPLIED%2C%20INCLUDING%20BUT%20NOT%20LIMITED%20TO%20THE%20WARRANTIES%20OF%0A%2F%2F%20MERCHANTABILITY%2C%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20AND%20NONINFRINGEMENT%2E%20IN%0A%2F%2F%20NO%20EVENT%20SHALL%20THE%20AUTHORS%20OR%20COPYRIGHT%20HOLDERS%20BE%20LIABLE%20FOR%20ANY%20CLAIM%2C%0A%2F%2F%20DAMAGES%20OR%20OTHER%20LIABILITY%2C%20WHETHER%20IN%20AN%20ACTION%20OF%20CONTRACT%2C%20TORT%20OR%0A%2F%2F%20OTHERWISE%2C%20ARISING%20FROM%2C%20OUT%20OF%20OR%20IN%20CONNECTION%20WITH%20THE%20SOFTWARE%20OR%20THE%0A%2F%2F%20USE%20OR%20OTHER%20DEALINGS%20IN%20THE%20SOFTWARE%2E%0A%0A%27use%20strict%27%3B%0A%0A%2F%2F%20If%20obj%2EhasOwnProperty%20has%20been%20overridden%2C%20then%20calling%0A%2F%2F%20obj%2EhasOwnProperty%28prop%29%20will%20break%2E%0A%2F%2F%20See%3A%20https%3A%2F%2Fgithub%2Ecom%2Fjoyent%2Fnode%2Fissues%2F1707%0Afunction%20hasOwnProperty%28obj%2C%20prop%29%20%7B%0A%20%20return%20Object%2Eprototype%2EhasOwnProperty%2Ecall%28obj%2C%20prop%29%3B%0A%7D%0A%0Amodule%2Eexports%20%3D%20function%28qs%2C%20sep%2C%20eq%2C%20options%29%20%7B%0A%20%20sep%20%3D%20sep%20%7C%7C%20%27%26%27%3B%0A%20%20eq%20%3D%20eq%20%7C%7C%20%27%3D%27%3B%0A%20%20var%20obj%20%3D%20%7B%7D%3B%0A%0A%20%20if%20%28typeof%20qs%20%21%3D%3D%20%27string%27%20%7C%7C%20qs%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20return%20obj%3B%0A%20%20%7D%0A%0A%20%20var%20regexp%20%3D%20%2F%5C%2B%2Fg%3B%0A%20%20qs%20%3D%20qs%2Esplit%28sep%29%3B%0A%0A%20%20var%20maxKeys%20%3D%201000%3B%0A%20%20if%20%28options%20%26%26%20typeof%20options%2EmaxKeys%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20maxKeys%20%3D%20options%2EmaxKeys%3B%0A%20%20%7D%0A%0A%20%20var%20len%20%3D%20qs%2Elength%3B%0A%20%20%2F%2F%20maxKeys%20%3C%3D%200%20means%20that%20we%20should%20not%20limit%20keys%20count%0A%20%20if%20%28maxKeys%20%3E%200%20%26%26%20len%20%3E%20maxKeys%29%20%7B%0A%20%20%20%20len%20%3D%20maxKeys%3B%0A%20%20%7D%0A%0A%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20len%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20var%20x%20%3D%20qs%5Bi%5D%2Ereplace%28regexp%2C%20%27%2520%27%29%2C%0A%20%20%20%20%20%20%20%20idx%20%3D%20x%2EindexOf%28eq%29%2C%0A%20%20%20%20%20%20%20%20kstr%2C%20vstr%2C%20k%2C%20v%3B%0A%0A%20%20%20%20if%20%28idx%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20kstr%20%3D%20x%2Esubstr%280%2C%20idx%29%3B%0A%20%20%20%20%20%20vstr%20%3D%20x%2Esubstr%28idx%20%2B%201%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20kstr%20%3D%20x%3B%0A%20%20%20%20%20%20vstr%20%3D%20%27%27%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20k%20%3D%20decodeURIComponent%28kstr%29%3B%0A%20%20%20%20v%20%3D%20decodeURIComponent%28vstr%29%3B%0A%0A%20%20%20%20if%20%28%21hasOwnProperty%28obj%2C%20k%29%29%20%7B%0A%20%20%20%20%20%20obj%5Bk%5D%20%3D%20v%3B%0A%20%20%20%20%7D%20else%20if%20%28isArray%28obj%5Bk%5D%29%29%20%7B%0A%20%20%20%20%20%20obj%5Bk%5D%2Epush%28v%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20obj%5Bk%5D%20%3D%20%5Bobj%5Bk%5D%2C%20v%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20return%20obj%3B%0A%7D%3B%0A%0Avar%20isArray%20%3D%20Array%2EisArray%20%7C%7C%20function%20%28xs%29%20%7B%0A%20%20return%20Object%2Eprototype%2EtoString%2Ecall%28xs%29%20%3D%3D%3D%20%27%5Bobject%20Array%5D%27%3B%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C6%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2F%20Copyright%20Joyent%2C%20Inc%2E%20and%20other%20Node%20contributors%2E%0A%2F%2F%0A%2F%2F%20Permission%20is%20hereby%20granted%2C%20free%20of%20charge%2C%20to%20any%20person%20obtaining%20a%0A%2F%2F%20copy%20of%20this%20software%20and%20associated%20documentation%20files%20%28the%0A%2F%2F%20%22Software%22%29%2C%20to%20deal%20in%20the%20Software%20without%20restriction%2C%20including%0A%2F%2F%20without%20limitation%20the%20rights%20to%20use%2C%20copy%2C%20modify%2C%20merge%2C%20publish%2C%0A%2F%2F%20distribute%2C%20sublicense%2C%20and%2For%20sell%20copies%20of%20the%20Software%2C%20and%20to%20permit%0A%2F%2F%20persons%20to%20whom%20the%20Software%20is%20furnished%20to%20do%20so%2C%20subject%20to%20the%0A%2F%2F%20following%20conditions%3A%0A%2F%2F%0A%2F%2F%20The%20above%20copyright%20notice%20and%20this%20permission%20notice%20shall%20be%20included%0A%2F%2F%20in%20all%20copies%20or%20substantial%20portions%20of%20the%20Software%2E%0A%2F%2F%0A%2F%2F%20THE%20SOFTWARE%20IS%20PROVIDED%20%22AS%20IS%22%2C%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND%2C%20EXPRESS%0A%2F%2F%20OR%20IMPLIED%2C%20INCLUDING%20BUT%20NOT%20LIMITED%20TO%20THE%20WARRANTIES%20OF%0A%2F%2F%20MERCHANTABILITY%2C%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20AND%20NONINFRINGEMENT%2E%20IN%0A%2F%2F%20NO%20EVENT%20SHALL%20THE%20AUTHORS%20OR%20COPYRIGHT%20HOLDERS%20BE%20LIABLE%20FOR%20ANY%20CLAIM%2C%0A%2F%2F%20DAMAGES%20OR%20OTHER%20LIABILITY%2C%20WHETHER%20IN%20AN%20ACTION%20OF%20CONTRACT%2C%20TORT%20OR%0A%2F%2F%20OTHERWISE%2C%20ARISING%20FROM%2C%20OUT%20OF%20OR%20IN%20CONNECTION%20WITH%20THE%20SOFTWARE%20OR%20THE%0A%2F%2F%20USE%20OR%20OTHER%20DEALINGS%20IN%20THE%20SOFTWARE%2E%0A%0A%27use%20strict%27%3B%0A%0Avar%20stringifyPrimitive%20%3D%20function%28v%29%20%7B%0A%20%20switch%20%28typeof%20v%29%20%7B%0A%20%20%20%20case%20%27string%27%3A%0A%20%20%20%20%20%20return%20v%3B%0A%0A%20%20%20%20case%20%27boolean%27%3A%0A%20%20%20%20%20%20return%20v%20%3F%20%27true%27%20%3A%20%27false%27%3B%0A%0A%20%20%20%20case%20%27number%27%3A%0A%20%20%20%20%20%20return%20isFinite%28v%29%20%3F%20v%20%3A%20%27%27%3B%0A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20return%20%27%27%3B%0A%20%20%7D%0A%7D%3B%0A%0Amodule%2Eexports%20%3D%20function%28obj%2C%20sep%2C%20eq%2C%20name%29%20%7B%0A%20%20sep%20%3D%20sep%20%7C%7C%20%27%26%27%3B%0A%20%20eq%20%3D%20eq%20%7C%7C%20%27%3D%27%3B%0A%20%20if%20%28obj%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20obj%20%3D%20undefined%3B%0A%20%20%7D%0A%0A%20%20if%20%28typeof%20obj%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20return%20map%28objectKeys%28obj%29%2C%20function%28k%29%20%7B%0A%20%20%20%20%20%20var%20ks%20%3D%20encodeURIComponent%28stringifyPrimitive%28k%29%29%20%2B%20eq%3B%0A%20%20%20%20%20%20if%20%28isArray%28obj%5Bk%5D%29%29%20%7B%0A%20%20%20%20%20%20%20%20return%20map%28obj%5Bk%5D%2C%20function%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20ks%20%2B%20encodeURIComponent%28stringifyPrimitive%28v%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%2Ejoin%28sep%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20ks%20%2B%20encodeURIComponent%28stringifyPrimitive%28obj%5Bk%5D%29%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%2Ejoin%28sep%29%3B%0A%0A%20%20%7D%0A%0A%20%20if%20%28%21name%29%20return%20%27%27%3B%0A%20%20return%20encodeURIComponent%28stringifyPrimitive%28name%29%29%20%2B%20eq%20%2B%0A%20%20%20%20%20%20%20%20%20encodeURIComponent%28stringifyPrimitive%28obj%29%29%3B%0A%7D%3B%0A%0Avar%20isArray%20%3D%20Array%2EisArray%20%7C%7C%20function%20%28xs%29%20%7B%0A%20%20return%20Object%2Eprototype%2EtoString%2Ecall%28xs%29%20%3D%3D%3D%20%27%5Bobject%20Array%5D%27%3B%0A%7D%3B%0A%0Afunction%20map%20%28xs%2C%20f%29%20%7B%0A%20%20if%20%28xs%2Emap%29%20return%20xs%2Emap%28f%29%3B%0A%20%20var%20res%20%3D%20%5B%5D%3B%0A%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20xs%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20res%2Epush%28f%28xs%5Bi%5D%2C%20i%29%29%3B%0A%20%20%7D%0A%20%20return%20res%3B%0A%7D%0A%0Avar%20objectKeys%20%3D%20Object%2Ekeys%20%7C%7C%20function%20%28obj%29%20%7B%0A%20%20var%20res%20%3D%20%5B%5D%3B%0A%20%20for%20%28var%20key%20in%20obj%29%20%7B%0A%20%20%20%20if%20%28Object%2Eprototype%2EhasOwnProperty%2Ecall%28obj%2C%20key%29%29%20res%2Epush%28key%29%3B%0A%20%20%7D%0A%20%20return%20res%3B%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C7%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%27use%20strict%27%3B%0A%0Aexports%2Edecode%20%3D%20exports%2Eparse%20%3D%20require%28%27%2E%2Fdecode%27%29%3B%0Aexports%2Eencode%20%3D%20exports%2Estringify%20%3D%20require%28%27%2E%2Fencode%27%29%3B%0A%0A%7D%2C%7B%22%2E%2Fdecode%22%3A5%2C%22%2E%2Fencode%22%3A6%7D%5D%2C8%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2F%20Copyright%20Joyent%2C%20Inc%2E%20and%20other%20Node%20contributors%2E%0A%2F%2F%0A%2F%2F%20Permission%20is%20hereby%20granted%2C%20free%20of%20charge%2C%20to%20any%20person%20obtaining%20a%0A%2F%2F%20copy%20of%20this%20software%20and%20associated%20documentation%20files%20%28the%0A%2F%2F%20%22Software%22%29%2C%20to%20deal%20in%20the%20Software%20without%20restriction%2C%20including%0A%2F%2F%20without%20limitation%20the%20rights%20to%20use%2C%20copy%2C%20modify%2C%20merge%2C%20publish%2C%0A%2F%2F%20distribute%2C%20sublicense%2C%20and%2For%20sell%20copies%20of%20the%20Software%2C%20and%20to%20permit%0A%2F%2F%20persons%20to%20whom%20the%20Software%20is%20furnished%20to%20do%20so%2C%20subject%20to%20the%0A%2F%2F%20following%20conditions%3A%0A%2F%2F%0A%2F%2F%20The%20above%20copyright%20notice%20and%20this%20permission%20notice%20shall%20be%20included%0A%2F%2F%20in%20all%20copies%20or%20substantial%20portions%20of%20the%20Software%2E%0A%2F%2F%0A%2F%2F%20THE%20SOFTWARE%20IS%20PROVIDED%20%22AS%20IS%22%2C%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND%2C%20EXPRESS%0A%2F%2F%20OR%20IMPLIED%2C%20INCLUDING%20BUT%20NOT%20LIMITED%20TO%20THE%20WARRANTIES%20OF%0A%2F%2F%20MERCHANTABILITY%2C%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20AND%20NONINFRINGEMENT%2E%20IN%0A%2F%2F%20NO%20EVENT%20SHALL%20THE%20AUTHORS%20OR%20COPYRIGHT%20HOLDERS%20BE%20LIABLE%20FOR%20ANY%20CLAIM%2C%0A%2F%2F%20DAMAGES%20OR%20OTHER%20LIABILITY%2C%20WHETHER%20IN%20AN%20ACTION%20OF%20CONTRACT%2C%20TORT%20OR%0A%2F%2F%20OTHERWISE%2C%20ARISING%20FROM%2C%20OUT%20OF%20OR%20IN%20CONNECTION%20WITH%20THE%20SOFTWARE%20OR%20THE%0A%2F%2F%20USE%20OR%20OTHER%20DEALINGS%20IN%20THE%20SOFTWARE%2E%0A%0Avar%20punycode%20%3D%20require%28%27punycode%27%29%3B%0A%0Aexports%2Eparse%20%3D%20urlParse%3B%0Aexports%2Eresolve%20%3D%20urlResolve%3B%0Aexports%2EresolveObject%20%3D%20urlResolveObject%3B%0Aexports%2Eformat%20%3D%20urlFormat%3B%0A%0Aexports%2EUrl%20%3D%20Url%3B%0A%0Afunction%20Url%28%29%20%7B%0A%20%20this%2Eprotocol%20%3D%20null%3B%0A%20%20this%2Eslashes%20%3D%20null%3B%0A%20%20this%2Eauth%20%3D%20null%3B%0A%20%20this%2Ehost%20%3D%20null%3B%0A%20%20this%2Eport%20%3D%20null%3B%0A%20%20this%2Ehostname%20%3D%20null%3B%0A%20%20this%2Ehash%20%3D%20null%3B%0A%20%20this%2Esearch%20%3D%20null%3B%0A%20%20this%2Equery%20%3D%20null%3B%0A%20%20this%2Epathname%20%3D%20null%3B%0A%20%20this%2Epath%20%3D%20null%3B%0A%20%20this%2Ehref%20%3D%20null%3B%0A%7D%0A%0A%2F%2F%20Reference%3A%20RFC%203986%2C%20RFC%201808%2C%20RFC%202396%0A%0A%2F%2F%20define%20these%20here%20so%20at%20least%20they%20only%20have%20to%20be%0A%2F%2F%20compiled%20once%20on%20the%20first%20module%20load%2E%0Avar%20protocolPattern%20%3D%20%2F%5E%28%5Ba%2Dz0%2D9%2E%2B%2D%5D%2B%3A%29%2Fi%2C%0A%20%20%20%20portPattern%20%3D%20%2F%3A%5B0%2D9%5D%2A%24%2F%2C%0A%0A%20%20%20%20%2F%2F%20RFC%202396%3A%20characters%20reserved%20for%20delimiting%20URLs%2E%0A%20%20%20%20%2F%2F%20We%20actually%20just%20auto%2Descape%20these%2E%0A%20%20%20%20delims%20%3D%20%5B%27%3C%27%2C%20%27%3E%27%2C%20%27%22%27%2C%20%27%60%27%2C%20%27%20%27%2C%20%27%5Cr%27%2C%20%27%5Cn%27%2C%20%27%5Ct%27%5D%2C%0A%0A%20%20%20%20%2F%2F%20RFC%202396%3A%20characters%20not%20allowed%20for%20various%20reasons%2E%0A%20%20%20%20unwise%20%3D%20%5B%27%7B%27%2C%20%27%7D%27%2C%20%27%7C%27%2C%20%27%5C%5C%27%2C%20%27%5E%27%2C%20%27%60%27%5D%2Econcat%28delims%29%2C%0A%0A%20%20%20%20%2F%2F%20Allowed%20by%20RFCs%2C%20but%20cause%20of%20XSS%20attacks%2E%20%20Always%20escape%20these%2E%0A%20%20%20%20autoEscape%20%3D%20%5B%27%5C%27%27%5D%2Econcat%28unwise%29%2C%0A%20%20%20%20%2F%2F%20Characters%20that%20are%20never%20ever%20allowed%20in%20a%20hostname%2E%0A%20%20%20%20%2F%2F%20Note%20that%20any%20invalid%20chars%20are%20also%20handled%2C%20but%20these%0A%20%20%20%20%2F%2F%20are%20the%20ones%20that%20are%20%2Aexpected%2A%20to%20be%20seen%2C%20so%20we%20fast%2Dpath%0A%20%20%20%20%2F%2F%20them%2E%0A%20%20%20%20nonHostChars%20%3D%20%5B%27%25%27%2C%20%27%2F%27%2C%20%27%3F%27%2C%20%27%3B%27%2C%20%27%23%27%5D%2Econcat%28autoEscape%29%2C%0A%20%20%20%20hostEndingChars%20%3D%20%5B%27%2F%27%2C%20%27%3F%27%2C%20%27%23%27%5D%2C%0A%20%20%20%20hostnameMaxLen%20%3D%20255%2C%0A%20%20%20%20hostnamePartPattern%20%3D%20%2F%5E%5Ba%2Dz0%2D9A%2DZ%5F%2D%5D%7B0%2C63%7D%24%2F%2C%0A%20%20%20%20hostnamePartStart%20%3D%20%2F%5E%28%5Ba%2Dz0%2D9A%2DZ%5F%2D%5D%7B0%2C63%7D%29%28%2E%2A%29%24%2F%2C%0A%20%20%20%20%2F%2F%20protocols%20that%20can%20allow%20%22unsafe%22%20and%20%22unwise%22%20chars%2E%0A%20%20%20%20unsafeProtocol%20%3D%20%7B%0A%20%20%20%20%20%20%27javascript%27%3A%20true%2C%0A%20%20%20%20%20%20%27javascript%3A%27%3A%20true%0A%20%20%20%20%7D%2C%0A%20%20%20%20%2F%2F%20protocols%20that%20never%20have%20a%20hostname%2E%0A%20%20%20%20hostlessProtocol%20%3D%20%7B%0A%20%20%20%20%20%20%27javascript%27%3A%20true%2C%0A%20%20%20%20%20%20%27javascript%3A%27%3A%20true%0A%20%20%20%20%7D%2C%0A%20%20%20%20%2F%2F%20protocols%20that%20always%20contain%20a%20%2F%2F%20bit%2E%0A%20%20%20%20slashedProtocol%20%3D%20%7B%0A%20%20%20%20%20%20%27http%27%3A%20true%2C%0A%20%20%20%20%20%20%27https%27%3A%20true%2C%0A%20%20%20%20%20%20%27ftp%27%3A%20true%2C%0A%20%20%20%20%20%20%27gopher%27%3A%20true%2C%0A%20%20%20%20%20%20%27file%27%3A%20true%2C%0A%20%20%20%20%20%20%27http%3A%27%3A%20true%2C%0A%20%20%20%20%20%20%27https%3A%27%3A%20true%2C%0A%20%20%20%20%20%20%27ftp%3A%27%3A%20true%2C%0A%20%20%20%20%20%20%27gopher%3A%27%3A%20true%2C%0A%20%20%20%20%20%20%27file%3A%27%3A%20true%0A%20%20%20%20%7D%2C%0A%20%20%20%20querystring%20%3D%20require%28%27querystring%27%29%3B%0A%0Afunction%20urlParse%28url%2C%20parseQueryString%2C%20slashesDenoteHost%29%20%7B%0A%20%20if%20%28url%20%26%26%20isObject%28url%29%20%26%26%20url%20instanceof%20Url%29%20return%20url%3B%0A%0A%20%20var%20u%20%3D%20new%20Url%3B%0A%20%20u%2Eparse%28url%2C%20parseQueryString%2C%20slashesDenoteHost%29%3B%0A%20%20return%20u%3B%0A%7D%0A%0AUrl%2Eprototype%2Eparse%20%3D%20function%28url%2C%20parseQueryString%2C%20slashesDenoteHost%29%20%7B%0A%20%20if%20%28%21isString%28url%29%29%20%7B%0A%20%20%20%20throw%20new%20TypeError%28%22Parameter%20%27url%27%20must%20be%20a%20string%2C%20not%20%22%20%2B%20typeof%20url%29%3B%0A%20%20%7D%0A%0A%20%20var%20rest%20%3D%20url%3B%0A%0A%20%20%2F%2F%20trim%20before%20proceeding%2E%0A%20%20%2F%2F%20This%20is%20to%20support%20parse%20stuff%20like%20%22%20%20http%3A%2F%2Ffoo%2Ecom%20%20%5Cn%22%0A%20%20rest%20%3D%20rest%2Etrim%28%29%3B%0A%0A%20%20var%20proto%20%3D%20protocolPattern%2Eexec%28rest%29%3B%0A%20%20if%20%28proto%29%20%7B%0A%20%20%20%20proto%20%3D%20proto%5B0%5D%3B%0A%20%20%20%20var%20lowerProto%20%3D%20proto%2EtoLowerCase%28%29%3B%0A%20%20%20%20this%2Eprotocol%20%3D%20lowerProto%3B%0A%20%20%20%20rest%20%3D%20rest%2Esubstr%28proto%2Elength%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20figure%20out%20if%20it%27s%20got%20a%20host%0A%20%20%2F%2F%20user%40server%20is%20%2Aalways%2A%20interpreted%20as%20a%20hostname%2C%20and%20url%0A%20%20%2F%2F%20resolution%20will%20treat%20%2F%2Ffoo%2Fbar%20as%20host%3Dfoo%2Cpath%3Dbar%20because%20that%27s%0A%20%20%2F%2F%20how%20the%20browser%20resolves%20relative%20URLs%2E%0A%20%20if%20%28slashesDenoteHost%20%7C%7C%20proto%20%7C%7C%20rest%2Ematch%28%2F%5E%5C%2F%5C%2F%5B%5E%40%5C%2F%5D%2B%40%5B%5E%40%5C%2F%5D%2B%2F%29%29%20%7B%0A%20%20%20%20var%20slashes%20%3D%20rest%2Esubstr%280%2C%202%29%20%3D%3D%3D%20%27%2F%2F%27%3B%0A%20%20%20%20if%20%28slashes%20%26%26%20%21%28proto%20%26%26%20hostlessProtocol%5Bproto%5D%29%29%20%7B%0A%20%20%20%20%20%20rest%20%3D%20rest%2Esubstr%282%29%3B%0A%20%20%20%20%20%20this%2Eslashes%20%3D%20true%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20if%20%28%21hostlessProtocol%5Bproto%5D%20%26%26%0A%20%20%20%20%20%20%28slashes%20%7C%7C%20%28proto%20%26%26%20%21slashedProtocol%5Bproto%5D%29%29%29%20%7B%0A%0A%20%20%20%20%2F%2F%20there%27s%20a%20hostname%2E%0A%20%20%20%20%2F%2F%20the%20first%20instance%20of%20%2F%2C%20%3F%2C%20%3B%2C%20or%20%23%20ends%20the%20host%2E%0A%20%20%20%20%2F%2F%0A%20%20%20%20%2F%2F%20If%20there%20is%20an%20%40%20in%20the%20hostname%2C%20then%20non%2Dhost%20chars%20%2Aare%2A%20allowed%0A%20%20%20%20%2F%2F%20to%20the%20left%20of%20the%20last%20%40%20sign%2C%20unless%20some%20host%2Dending%20character%0A%20%20%20%20%2F%2F%20comes%20%2Abefore%2A%20the%20%40%2Dsign%2E%0A%20%20%20%20%2F%2F%20URLs%20are%20obnoxious%2E%0A%20%20%20%20%2F%2F%0A%20%20%20%20%2F%2F%20ex%3A%0A%20%20%20%20%2F%2F%20http%3A%2F%2Fa%40b%40c%2F%20%3D%3E%20user%3Aa%40b%20host%3Ac%0A%20%20%20%20%2F%2F%20http%3A%2F%2Fa%40b%3F%40c%20%3D%3E%20user%3Aa%20host%3Ac%20path%3A%2F%3F%40c%0A%0A%20%20%20%20%2F%2F%20v0%2E12%20TODO%28isaacs%29%3A%20This%20is%20not%20quite%20how%20Chrome%20does%20things%2E%0A%20%20%20%20%2F%2F%20Review%20our%20test%20case%20against%20browsers%20more%20comprehensively%2E%0A%0A%20%20%20%20%2F%2F%20find%20the%20first%20instance%20of%20any%20hostEndingChars%0A%20%20%20%20var%20hostEnd%20%3D%20%2D1%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20hostEndingChars%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20var%20hec%20%3D%20rest%2EindexOf%28hostEndingChars%5Bi%5D%29%3B%0A%20%20%20%20%20%20if%20%28hec%20%21%3D%3D%20%2D1%20%26%26%20%28hostEnd%20%3D%3D%3D%20%2D1%20%7C%7C%20hec%20%3C%20hostEnd%29%29%0A%20%20%20%20%20%20%20%20hostEnd%20%3D%20hec%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20at%20this%20point%2C%20either%20we%20have%20an%20explicit%20point%20where%20the%0A%20%20%20%20%2F%2F%20auth%20portion%20cannot%20go%20past%2C%20or%20the%20last%20%40%20char%20is%20the%20decider%2E%0A%20%20%20%20var%20auth%2C%20atSign%3B%0A%20%20%20%20if%20%28hostEnd%20%3D%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20atSign%20can%20be%20anywhere%2E%0A%20%20%20%20%20%20atSign%20%3D%20rest%2ElastIndexOf%28%27%40%27%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%2F%2F%20atSign%20must%20be%20in%20auth%20portion%2E%0A%20%20%20%20%20%20%2F%2F%20http%3A%2F%2Fa%40b%2Fc%40d%20%3D%3E%20host%3Ab%20auth%3Aa%20path%3A%2Fc%40d%0A%20%20%20%20%20%20atSign%20%3D%20rest%2ElastIndexOf%28%27%40%27%2C%20hostEnd%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Now%20we%20have%20a%20portion%20which%20is%20definitely%20the%20auth%2E%0A%20%20%20%20%2F%2F%20Pull%20that%20off%2E%0A%20%20%20%20if%20%28atSign%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20auth%20%3D%20rest%2Eslice%280%2C%20atSign%29%3B%0A%20%20%20%20%20%20rest%20%3D%20rest%2Eslice%28atSign%20%2B%201%29%3B%0A%20%20%20%20%20%20this%2Eauth%20%3D%20decodeURIComponent%28auth%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20the%20host%20is%20the%20remaining%20to%20the%20left%20of%20the%20first%20non%2Dhost%20char%0A%20%20%20%20hostEnd%20%3D%20%2D1%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20nonHostChars%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20var%20hec%20%3D%20rest%2EindexOf%28nonHostChars%5Bi%5D%29%3B%0A%20%20%20%20%20%20if%20%28hec%20%21%3D%3D%20%2D1%20%26%26%20%28hostEnd%20%3D%3D%3D%20%2D1%20%7C%7C%20hec%20%3C%20hostEnd%29%29%0A%20%20%20%20%20%20%20%20hostEnd%20%3D%20hec%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20if%20we%20still%20have%20not%20hit%20it%2C%20then%20the%20entire%20thing%20is%20a%20host%2E%0A%20%20%20%20if%20%28hostEnd%20%3D%3D%3D%20%2D1%29%0A%20%20%20%20%20%20hostEnd%20%3D%20rest%2Elength%3B%0A%0A%20%20%20%20this%2Ehost%20%3D%20rest%2Eslice%280%2C%20hostEnd%29%3B%0A%20%20%20%20rest%20%3D%20rest%2Eslice%28hostEnd%29%3B%0A%0A%20%20%20%20%2F%2F%20pull%20out%20port%2E%0A%20%20%20%20this%2EparseHost%28%29%3B%0A%0A%20%20%20%20%2F%2F%20we%27ve%20indicated%20that%20there%20is%20a%20hostname%2C%0A%20%20%20%20%2F%2F%20so%20even%20if%20it%27s%20empty%2C%20it%20has%20to%20be%20present%2E%0A%20%20%20%20this%2Ehostname%20%3D%20this%2Ehostname%20%7C%7C%20%27%27%3B%0A%0A%20%20%20%20%2F%2F%20if%20hostname%20begins%20with%20%5B%20and%20ends%20with%20%5D%0A%20%20%20%20%2F%2F%20assume%20that%20it%27s%20an%20IPv6%20address%2E%0A%20%20%20%20var%20ipv6Hostname%20%3D%20this%2Ehostname%5B0%5D%20%3D%3D%3D%20%27%5B%27%20%26%26%0A%20%20%20%20%20%20%20%20this%2Ehostname%5Bthis%2Ehostname%2Elength%20%2D%201%5D%20%3D%3D%3D%20%27%5D%27%3B%0A%0A%20%20%20%20%2F%2F%20validate%20a%20little%2E%0A%20%20%20%20if%20%28%21ipv6Hostname%29%20%7B%0A%20%20%20%20%20%20var%20hostparts%20%3D%20this%2Ehostname%2Esplit%28%2F%5C%2E%2F%29%3B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20l%20%3D%20hostparts%2Elength%3B%20i%20%3C%20l%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20var%20part%20%3D%20hostparts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28%21part%29%20continue%3B%0A%20%20%20%20%20%20%20%20if%20%28%21part%2Ematch%28hostnamePartPattern%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20newpart%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%2C%20k%20%3D%20part%2Elength%3B%20j%20%3C%20k%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28part%2EcharCodeAt%28j%29%20%3E%20127%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20we%20replace%20non%2DASCII%20char%20with%20a%20temporary%20placeholder%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20we%20need%20this%20to%20make%20sure%20size%20of%20hostname%20is%20not%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20broken%20by%20replacing%20non%2DASCII%20by%20nothing%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newpart%20%2B%3D%20%27x%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newpart%20%2B%3D%20part%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20we%20test%20again%20with%20ASCII%20char%20only%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21newpart%2Ematch%28hostnamePartPattern%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20validParts%20%3D%20hostparts%2Eslice%280%2C%20i%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20notHost%20%3D%20hostparts%2Eslice%28i%20%2B%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20bit%20%3D%20part%2Ematch%28hostnamePartStart%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28bit%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20validParts%2Epush%28bit%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20notHost%2Eunshift%28bit%5B2%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28notHost%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20rest%20%3D%20%27%2F%27%20%2B%20notHost%2Ejoin%28%27%2E%27%29%20%2B%20rest%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ehostname%20%3D%20validParts%2Ejoin%28%27%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28this%2Ehostname%2Elength%20%3E%20hostnameMaxLen%29%20%7B%0A%20%20%20%20%20%20this%2Ehostname%20%3D%20%27%27%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%2F%2F%20hostnames%20are%20always%20lower%20case%2E%0A%20%20%20%20%20%20this%2Ehostname%20%3D%20this%2Ehostname%2EtoLowerCase%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%21ipv6Hostname%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20IDNA%20Support%3A%20Returns%20a%20puny%20coded%20representation%20of%20%22domain%22%2E%0A%20%20%20%20%20%20%2F%2F%20It%20only%20converts%20the%20part%20of%20the%20domain%20name%20that%0A%20%20%20%20%20%20%2F%2F%20has%20non%20ASCII%20characters%2E%20I%2Ee%2E%20it%20dosent%20matter%20if%0A%20%20%20%20%20%20%2F%2F%20you%20call%20it%20with%20a%20domain%20that%20already%20is%20in%20ASCII%2E%0A%20%20%20%20%20%20var%20domainArray%20%3D%20this%2Ehostname%2Esplit%28%27%2E%27%29%3B%0A%20%20%20%20%20%20var%20newOut%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20domainArray%2Elength%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20var%20s%20%3D%20domainArray%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20newOut%2Epush%28s%2Ematch%28%2F%5B%5EA%2DZa%2Dz0%2D9%5F%2D%5D%2F%29%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%27xn%2D%2D%27%20%2B%20punycode%2Eencode%28s%29%20%3A%20s%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this%2Ehostname%20%3D%20newOut%2Ejoin%28%27%2E%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20p%20%3D%20this%2Eport%20%3F%20%27%3A%27%20%2B%20this%2Eport%20%3A%20%27%27%3B%0A%20%20%20%20var%20h%20%3D%20this%2Ehostname%20%7C%7C%20%27%27%3B%0A%20%20%20%20this%2Ehost%20%3D%20h%20%2B%20p%3B%0A%20%20%20%20this%2Ehref%20%2B%3D%20this%2Ehost%3B%0A%0A%20%20%20%20%2F%2F%20strip%20%5B%20and%20%5D%20from%20the%20hostname%0A%20%20%20%20%2F%2F%20the%20host%20field%20still%20retains%20them%2C%20though%0A%20%20%20%20if%20%28ipv6Hostname%29%20%7B%0A%20%20%20%20%20%20this%2Ehostname%20%3D%20this%2Ehostname%2Esubstr%281%2C%20this%2Ehostname%2Elength%20%2D%202%29%3B%0A%20%20%20%20%20%20if%20%28rest%5B0%5D%20%21%3D%3D%20%27%2F%27%29%20%7B%0A%20%20%20%20%20%20%20%20rest%20%3D%20%27%2F%27%20%2B%20rest%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20now%20rest%20is%20set%20to%20the%20post%2Dhost%20stuff%2E%0A%20%20%2F%2F%20chop%20off%20any%20delim%20chars%2E%0A%20%20if%20%28%21unsafeProtocol%5BlowerProto%5D%29%20%7B%0A%0A%20%20%20%20%2F%2F%20First%2C%20make%20100%25%20sure%20that%20any%20%22autoEscape%22%20chars%20get%0A%20%20%20%20%2F%2F%20escaped%2C%20even%20if%20encodeURIComponent%20doesn%27t%20think%20they%0A%20%20%20%20%2F%2F%20need%20to%20be%2E%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20l%20%3D%20autoEscape%2Elength%3B%20i%20%3C%20l%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20var%20ae%20%3D%20autoEscape%5Bi%5D%3B%0A%20%20%20%20%20%20var%20esc%20%3D%20encodeURIComponent%28ae%29%3B%0A%20%20%20%20%20%20if%20%28esc%20%3D%3D%3D%20ae%29%20%7B%0A%20%20%20%20%20%20%20%20esc%20%3D%20escape%28ae%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20rest%20%3D%20rest%2Esplit%28ae%29%2Ejoin%28esc%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%0A%20%20%2F%2F%20chop%20off%20from%20the%20tail%20first%2E%0A%20%20var%20hash%20%3D%20rest%2EindexOf%28%27%23%27%29%3B%0A%20%20if%20%28hash%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%2F%2F%20got%20a%20fragment%20string%2E%0A%20%20%20%20this%2Ehash%20%3D%20rest%2Esubstr%28hash%29%3B%0A%20%20%20%20rest%20%3D%20rest%2Eslice%280%2C%20hash%29%3B%0A%20%20%7D%0A%20%20var%20qm%20%3D%20rest%2EindexOf%28%27%3F%27%29%3B%0A%20%20if%20%28qm%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20this%2Esearch%20%3D%20rest%2Esubstr%28qm%29%3B%0A%20%20%20%20this%2Equery%20%3D%20rest%2Esubstr%28qm%20%2B%201%29%3B%0A%20%20%20%20if%20%28parseQueryString%29%20%7B%0A%20%20%20%20%20%20this%2Equery%20%3D%20querystring%2Eparse%28this%2Equery%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20rest%20%3D%20rest%2Eslice%280%2C%20qm%29%3B%0A%20%20%7D%20else%20if%20%28parseQueryString%29%20%7B%0A%20%20%20%20%2F%2F%20no%20query%20string%2C%20but%20parseQueryString%20still%20requested%0A%20%20%20%20this%2Esearch%20%3D%20%27%27%3B%0A%20%20%20%20this%2Equery%20%3D%20%7B%7D%3B%0A%20%20%7D%0A%20%20if%20%28rest%29%20this%2Epathname%20%3D%20rest%3B%0A%20%20if%20%28slashedProtocol%5BlowerProto%5D%20%26%26%0A%20%20%20%20%20%20this%2Ehostname%20%26%26%20%21this%2Epathname%29%20%7B%0A%20%20%20%20this%2Epathname%20%3D%20%27%2F%27%3B%0A%20%20%7D%0A%0A%20%20%2F%2Fto%20support%20http%2Erequest%0A%20%20if%20%28this%2Epathname%20%7C%7C%20this%2Esearch%29%20%7B%0A%20%20%20%20var%20p%20%3D%20this%2Epathname%20%7C%7C%20%27%27%3B%0A%20%20%20%20var%20s%20%3D%20this%2Esearch%20%7C%7C%20%27%27%3B%0A%20%20%20%20this%2Epath%20%3D%20p%20%2B%20s%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20finally%2C%20reconstruct%20the%20href%20based%20on%20what%20has%20been%20validated%2E%0A%20%20this%2Ehref%20%3D%20this%2Eformat%28%29%3B%0A%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2F%20format%20a%20parsed%20object%20into%20a%20url%20string%0Afunction%20urlFormat%28obj%29%20%7B%0A%20%20%2F%2F%20ensure%20it%27s%20an%20object%2C%20and%20not%20a%20string%20url%2E%0A%20%20%2F%2F%20If%20it%27s%20an%20obj%2C%20this%20is%20a%20no%2Dop%2E%0A%20%20%2F%2F%20this%20way%2C%20you%20can%20call%20url%5Fformat%28%29%20on%20strings%0A%20%20%2F%2F%20to%20clean%20up%20potentially%20wonky%20urls%2E%0A%20%20if%20%28isString%28obj%29%29%20obj%20%3D%20urlParse%28obj%29%3B%0A%20%20if%20%28%21%28obj%20instanceof%20Url%29%29%20return%20Url%2Eprototype%2Eformat%2Ecall%28obj%29%3B%0A%20%20return%20obj%2Eformat%28%29%3B%0A%7D%0A%0AUrl%2Eprototype%2Eformat%20%3D%20function%28%29%20%7B%0A%20%20var%20auth%20%3D%20this%2Eauth%20%7C%7C%20%27%27%3B%0A%20%20if%20%28auth%29%20%7B%0A%20%20%20%20auth%20%3D%20encodeURIComponent%28auth%29%3B%0A%20%20%20%20auth%20%3D%20auth%2Ereplace%28%2F%253A%2Fi%2C%20%27%3A%27%29%3B%0A%20%20%20%20auth%20%2B%3D%20%27%40%27%3B%0A%20%20%7D%0A%0A%20%20var%20protocol%20%3D%20this%2Eprotocol%20%7C%7C%20%27%27%2C%0A%20%20%20%20%20%20pathname%20%3D%20this%2Epathname%20%7C%7C%20%27%27%2C%0A%20%20%20%20%20%20hash%20%3D%20this%2Ehash%20%7C%7C%20%27%27%2C%0A%20%20%20%20%20%20host%20%3D%20false%2C%0A%20%20%20%20%20%20query%20%3D%20%27%27%3B%0A%0A%20%20if%20%28this%2Ehost%29%20%7B%0A%20%20%20%20host%20%3D%20auth%20%2B%20this%2Ehost%3B%0A%20%20%7D%20else%20if%20%28this%2Ehostname%29%20%7B%0A%20%20%20%20host%20%3D%20auth%20%2B%20%28this%2Ehostname%2EindexOf%28%27%3A%27%29%20%3D%3D%3D%20%2D1%20%3F%0A%20%20%20%20%20%20%20%20this%2Ehostname%20%3A%0A%20%20%20%20%20%20%20%20%27%5B%27%20%2B%20this%2Ehostname%20%2B%20%27%5D%27%29%3B%0A%20%20%20%20if%20%28this%2Eport%29%20%7B%0A%20%20%20%20%20%20host%20%2B%3D%20%27%3A%27%20%2B%20this%2Eport%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20if%20%28this%2Equery%20%26%26%0A%20%20%20%20%20%20isObject%28this%2Equery%29%20%26%26%0A%20%20%20%20%20%20Object%2Ekeys%28this%2Equery%29%2Elength%29%20%7B%0A%20%20%20%20query%20%3D%20querystring%2Estringify%28this%2Equery%29%3B%0A%20%20%7D%0A%0A%20%20var%20search%20%3D%20this%2Esearch%20%7C%7C%20%28query%20%26%26%20%28%27%3F%27%20%2B%20query%29%29%20%7C%7C%20%27%27%3B%0A%0A%20%20if%20%28protocol%20%26%26%20protocol%2Esubstr%28%2D1%29%20%21%3D%3D%20%27%3A%27%29%20protocol%20%2B%3D%20%27%3A%27%3B%0A%0A%20%20%2F%2F%20only%20the%20slashedProtocols%20get%20the%20%2F%2F%2E%20%20Not%20mailto%3A%2C%20xmpp%3A%2C%20etc%2E%0A%20%20%2F%2F%20unless%20they%20had%20them%20to%20begin%20with%2E%0A%20%20if%20%28this%2Eslashes%20%7C%7C%0A%20%20%20%20%20%20%28%21protocol%20%7C%7C%20slashedProtocol%5Bprotocol%5D%29%20%26%26%20host%20%21%3D%3D%20false%29%20%7B%0A%20%20%20%20host%20%3D%20%27%2F%2F%27%20%2B%20%28host%20%7C%7C%20%27%27%29%3B%0A%20%20%20%20if%20%28pathname%20%26%26%20pathname%2EcharAt%280%29%20%21%3D%3D%20%27%2F%27%29%20pathname%20%3D%20%27%2F%27%20%2B%20pathname%3B%0A%20%20%7D%20else%20if%20%28%21host%29%20%7B%0A%20%20%20%20host%20%3D%20%27%27%3B%0A%20%20%7D%0A%0A%20%20if%20%28hash%20%26%26%20hash%2EcharAt%280%29%20%21%3D%3D%20%27%23%27%29%20hash%20%3D%20%27%23%27%20%2B%20hash%3B%0A%20%20if%20%28search%20%26%26%20search%2EcharAt%280%29%20%21%3D%3D%20%27%3F%27%29%20search%20%3D%20%27%3F%27%20%2B%20search%3B%0A%0A%20%20pathname%20%3D%20pathname%2Ereplace%28%2F%5B%3F%23%5D%2Fg%2C%20function%28match%29%20%7B%0A%20%20%20%20return%20encodeURIComponent%28match%29%3B%0A%20%20%7D%29%3B%0A%20%20search%20%3D%20search%2Ereplace%28%27%23%27%2C%20%27%2523%27%29%3B%0A%0A%20%20return%20protocol%20%2B%20host%20%2B%20pathname%20%2B%20search%20%2B%20hash%3B%0A%7D%3B%0A%0Afunction%20urlResolve%28source%2C%20relative%29%20%7B%0A%20%20return%20urlParse%28source%2C%20false%2C%20true%29%2Eresolve%28relative%29%3B%0A%7D%0A%0AUrl%2Eprototype%2Eresolve%20%3D%20function%28relative%29%20%7B%0A%20%20return%20this%2EresolveObject%28urlParse%28relative%2C%20false%2C%20true%29%29%2Eformat%28%29%3B%0A%7D%3B%0A%0Afunction%20urlResolveObject%28source%2C%20relative%29%20%7B%0A%20%20if%20%28%21source%29%20return%20relative%3B%0A%20%20return%20urlParse%28source%2C%20false%2C%20true%29%2EresolveObject%28relative%29%3B%0A%7D%0A%0AUrl%2Eprototype%2EresolveObject%20%3D%20function%28relative%29%20%7B%0A%20%20if%20%28isString%28relative%29%29%20%7B%0A%20%20%20%20var%20rel%20%3D%20new%20Url%28%29%3B%0A%20%20%20%20rel%2Eparse%28relative%2C%20false%2C%20true%29%3B%0A%20%20%20%20relative%20%3D%20rel%3B%0A%20%20%7D%0A%0A%20%20var%20result%20%3D%20new%20Url%28%29%3B%0A%20%20Object%2Ekeys%28this%29%2EforEach%28function%28k%29%20%7B%0A%20%20%20%20result%5Bk%5D%20%3D%20this%5Bk%5D%3B%0A%20%20%7D%2C%20this%29%3B%0A%0A%20%20%2F%2F%20hash%20is%20always%20overridden%2C%20no%20matter%20what%2E%0A%20%20%2F%2F%20even%20href%3D%22%22%20will%20remove%20it%2E%0A%20%20result%2Ehash%20%3D%20relative%2Ehash%3B%0A%0A%20%20%2F%2F%20if%20the%20relative%20url%20is%20empty%2C%20then%20there%27s%20nothing%20left%20to%20do%20here%2E%0A%20%20if%20%28relative%2Ehref%20%3D%3D%3D%20%27%27%29%20%7B%0A%20%20%20%20result%2Ehref%20%3D%20result%2Eformat%28%29%3B%0A%20%20%20%20return%20result%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20hrefs%20like%20%2F%2Ffoo%2Fbar%20always%20cut%20to%20the%20protocol%2E%0A%20%20if%20%28relative%2Eslashes%20%26%26%20%21relative%2Eprotocol%29%20%7B%0A%20%20%20%20%2F%2F%20take%20everything%20except%20the%20protocol%20from%20relative%0A%20%20%20%20Object%2Ekeys%28relative%29%2EforEach%28function%28k%29%20%7B%0A%20%20%20%20%20%20if%20%28k%20%21%3D%3D%20%27protocol%27%29%0A%20%20%20%20%20%20%20%20result%5Bk%5D%20%3D%20relative%5Bk%5D%3B%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%2F%2FurlParse%20appends%20trailing%20%2F%20to%20urls%20like%20http%3A%2F%2Fwww%2Eexample%2Ecom%0A%20%20%20%20if%20%28slashedProtocol%5Bresult%2Eprotocol%5D%20%26%26%0A%20%20%20%20%20%20%20%20result%2Ehostname%20%26%26%20%21result%2Epathname%29%20%7B%0A%20%20%20%20%20%20result%2Epath%20%3D%20result%2Epathname%20%3D%20%27%2F%27%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2Ehref%20%3D%20result%2Eformat%28%29%3B%0A%20%20%20%20return%20result%3B%0A%20%20%7D%0A%0A%20%20if%20%28relative%2Eprotocol%20%26%26%20relative%2Eprotocol%20%21%3D%3D%20result%2Eprotocol%29%20%7B%0A%20%20%20%20%2F%2F%20if%20it%27s%20a%20known%20url%20protocol%2C%20then%20changing%0A%20%20%20%20%2F%2F%20the%20protocol%20does%20weird%20things%0A%20%20%20%20%2F%2F%20first%2C%20if%20it%27s%20not%20file%3A%2C%20then%20we%20MUST%20have%20a%20host%2C%0A%20%20%20%20%2F%2F%20and%20if%20there%20was%20a%20path%0A%20%20%20%20%2F%2F%20to%20begin%20with%2C%20then%20we%20MUST%20have%20a%20path%2E%0A%20%20%20%20%2F%2F%20if%20it%20is%20file%3A%2C%20then%20the%20host%20is%20dropped%2C%0A%20%20%20%20%2F%2F%20because%20that%27s%20known%20to%20be%20hostless%2E%0A%20%20%20%20%2F%2F%20anything%20else%20is%20assumed%20to%20be%20absolute%2E%0A%20%20%20%20if%20%28%21slashedProtocol%5Brelative%2Eprotocol%5D%29%20%7B%0A%20%20%20%20%20%20Object%2Ekeys%28relative%29%2EforEach%28function%28k%29%20%7B%0A%20%20%20%20%20%20%20%20result%5Bk%5D%20%3D%20relative%5Bk%5D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20result%2Ehref%20%3D%20result%2Eformat%28%29%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2Eprotocol%20%3D%20relative%2Eprotocol%3B%0A%20%20%20%20if%20%28%21relative%2Ehost%20%26%26%20%21hostlessProtocol%5Brelative%2Eprotocol%5D%29%20%7B%0A%20%20%20%20%20%20var%20relPath%20%3D%20%28relative%2Epathname%20%7C%7C%20%27%27%29%2Esplit%28%27%2F%27%29%3B%0A%20%20%20%20%20%20while%20%28relPath%2Elength%20%26%26%20%21%28relative%2Ehost%20%3D%20relPath%2Eshift%28%29%29%29%3B%0A%20%20%20%20%20%20if%20%28%21relative%2Ehost%29%20relative%2Ehost%20%3D%20%27%27%3B%0A%20%20%20%20%20%20if%20%28%21relative%2Ehostname%29%20relative%2Ehostname%20%3D%20%27%27%3B%0A%20%20%20%20%20%20if%20%28relPath%5B0%5D%20%21%3D%3D%20%27%27%29%20relPath%2Eunshift%28%27%27%29%3B%0A%20%20%20%20%20%20if%20%28relPath%2Elength%20%3C%202%29%20relPath%2Eunshift%28%27%27%29%3B%0A%20%20%20%20%20%20result%2Epathname%20%3D%20relPath%2Ejoin%28%27%2F%27%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20result%2Epathname%20%3D%20relative%2Epathname%3B%0A%20%20%20%20%7D%0A%20%20%20%20result%2Esearch%20%3D%20relative%2Esearch%3B%0A%20%20%20%20result%2Equery%20%3D%20relative%2Equery%3B%0A%20%20%20%20result%2Ehost%20%3D%20relative%2Ehost%20%7C%7C%20%27%27%3B%0A%20%20%20%20result%2Eauth%20%3D%20relative%2Eauth%3B%0A%20%20%20%20result%2Ehostname%20%3D%20relative%2Ehostname%20%7C%7C%20relative%2Ehost%3B%0A%20%20%20%20result%2Eport%20%3D%20relative%2Eport%3B%0A%20%20%20%20%2F%2F%20to%20support%20http%2Erequest%0A%20%20%20%20if%20%28result%2Epathname%20%7C%7C%20result%2Esearch%29%20%7B%0A%20%20%20%20%20%20var%20p%20%3D%20result%2Epathname%20%7C%7C%20%27%27%3B%0A%20%20%20%20%20%20var%20s%20%3D%20result%2Esearch%20%7C%7C%20%27%27%3B%0A%20%20%20%20%20%20result%2Epath%20%3D%20p%20%2B%20s%3B%0A%20%20%20%20%7D%0A%20%20%20%20result%2Eslashes%20%3D%20result%2Eslashes%20%7C%7C%20relative%2Eslashes%3B%0A%20%20%20%20result%2Ehref%20%3D%20result%2Eformat%28%29%3B%0A%20%20%20%20return%20result%3B%0A%20%20%7D%0A%0A%20%20var%20isSourceAbs%20%3D%20%28result%2Epathname%20%26%26%20result%2Epathname%2EcharAt%280%29%20%3D%3D%3D%20%27%2F%27%29%2C%0A%20%20%20%20%20%20isRelAbs%20%3D%20%28%0A%20%20%20%20%20%20%20%20%20%20relative%2Ehost%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20relative%2Epathname%20%26%26%20relative%2Epathname%2EcharAt%280%29%20%3D%3D%3D%20%27%2F%27%0A%20%20%20%20%20%20%29%2C%0A%20%20%20%20%20%20mustEndAbs%20%3D%20%28isRelAbs%20%7C%7C%20isSourceAbs%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28result%2Ehost%20%26%26%20relative%2Epathname%29%29%2C%0A%20%20%20%20%20%20removeAllDots%20%3D%20mustEndAbs%2C%0A%20%20%20%20%20%20srcPath%20%3D%20result%2Epathname%20%26%26%20result%2Epathname%2Esplit%28%27%2F%27%29%20%7C%7C%20%5B%5D%2C%0A%20%20%20%20%20%20relPath%20%3D%20relative%2Epathname%20%26%26%20relative%2Epathname%2Esplit%28%27%2F%27%29%20%7C%7C%20%5B%5D%2C%0A%20%20%20%20%20%20psychotic%20%3D%20result%2Eprotocol%20%26%26%20%21slashedProtocol%5Bresult%2Eprotocol%5D%3B%0A%0A%20%20%2F%2F%20if%20the%20url%20is%20a%20non%2Dslashed%20url%2C%20then%20relative%0A%20%20%2F%2F%20links%20like%20%2E%2E%2F%2E%2E%20should%20be%20able%0A%20%20%2F%2F%20to%20crawl%20up%20to%20the%20hostname%2C%20as%20well%2E%20%20This%20is%20strange%2E%0A%20%20%2F%2F%20result%2Eprotocol%20has%20already%20been%20set%20by%20now%2E%0A%20%20%2F%2F%20Later%20on%2C%20put%20the%20first%20path%20part%20into%20the%20host%20field%2E%0A%20%20if%20%28psychotic%29%20%7B%0A%20%20%20%20result%2Ehostname%20%3D%20%27%27%3B%0A%20%20%20%20result%2Eport%20%3D%20null%3B%0A%20%20%20%20if%20%28result%2Ehost%29%20%7B%0A%20%20%20%20%20%20if%20%28srcPath%5B0%5D%20%3D%3D%3D%20%27%27%29%20srcPath%5B0%5D%20%3D%20result%2Ehost%3B%0A%20%20%20%20%20%20else%20srcPath%2Eunshift%28result%2Ehost%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20result%2Ehost%20%3D%20%27%27%3B%0A%20%20%20%20if%20%28relative%2Eprotocol%29%20%7B%0A%20%20%20%20%20%20relative%2Ehostname%20%3D%20null%3B%0A%20%20%20%20%20%20relative%2Eport%20%3D%20null%3B%0A%20%20%20%20%20%20if%20%28relative%2Ehost%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28relPath%5B0%5D%20%3D%3D%3D%20%27%27%29%20relPath%5B0%5D%20%3D%20relative%2Ehost%3B%0A%20%20%20%20%20%20%20%20else%20relPath%2Eunshift%28relative%2Ehost%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20relative%2Ehost%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20mustEndAbs%20%3D%20mustEndAbs%20%26%26%20%28relPath%5B0%5D%20%3D%3D%3D%20%27%27%20%7C%7C%20srcPath%5B0%5D%20%3D%3D%3D%20%27%27%29%3B%0A%20%20%7D%0A%0A%20%20if%20%28isRelAbs%29%20%7B%0A%20%20%20%20%2F%2F%20it%27s%20absolute%2E%0A%20%20%20%20result%2Ehost%20%3D%20%28relative%2Ehost%20%7C%7C%20relative%2Ehost%20%3D%3D%3D%20%27%27%29%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20relative%2Ehost%20%3A%20result%2Ehost%3B%0A%20%20%20%20result%2Ehostname%20%3D%20%28relative%2Ehostname%20%7C%7C%20relative%2Ehostname%20%3D%3D%3D%20%27%27%29%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20relative%2Ehostname%20%3A%20result%2Ehostname%3B%0A%20%20%20%20result%2Esearch%20%3D%20relative%2Esearch%3B%0A%20%20%20%20result%2Equery%20%3D%20relative%2Equery%3B%0A%20%20%20%20srcPath%20%3D%20relPath%3B%0A%20%20%20%20%2F%2F%20fall%20through%20to%20the%20dot%2Dhandling%20below%2E%0A%20%20%7D%20else%20if%20%28relPath%2Elength%29%20%7B%0A%20%20%20%20%2F%2F%20it%27s%20relative%0A%20%20%20%20%2F%2F%20throw%20away%20the%20existing%20file%2C%20and%20take%20the%20new%20path%20instead%2E%0A%20%20%20%20if%20%28%21srcPath%29%20srcPath%20%3D%20%5B%5D%3B%0A%20%20%20%20srcPath%2Epop%28%29%3B%0A%20%20%20%20srcPath%20%3D%20srcPath%2Econcat%28relPath%29%3B%0A%20%20%20%20result%2Esearch%20%3D%20relative%2Esearch%3B%0A%20%20%20%20result%2Equery%20%3D%20relative%2Equery%3B%0A%20%20%7D%20else%20if%20%28%21isNullOrUndefined%28relative%2Esearch%29%29%20%7B%0A%20%20%20%20%2F%2F%20just%20pull%20out%20the%20search%2E%0A%20%20%20%20%2F%2F%20like%20href%3D%27%3Ffoo%27%2E%0A%20%20%20%20%2F%2F%20Put%20this%20after%20the%20other%20two%20cases%20because%20it%20simplifies%20the%20booleans%0A%20%20%20%20if%20%28psychotic%29%20%7B%0A%20%20%20%20%20%20result%2Ehostname%20%3D%20result%2Ehost%20%3D%20srcPath%2Eshift%28%29%3B%0A%20%20%20%20%20%20%2F%2Foccationaly%20the%20auth%20can%20get%20stuck%20only%20in%20host%0A%20%20%20%20%20%20%2F%2Fthis%20especialy%20happens%20in%20cases%20like%0A%20%20%20%20%20%20%2F%2Furl%2EresolveObject%28%27mailto%3Alocal1%40domain1%27%2C%20%27local2%40domain2%27%29%0A%20%20%20%20%20%20var%20authInHost%20%3D%20result%2Ehost%20%26%26%20result%2Ehost%2EindexOf%28%27%40%27%29%20%3E%200%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%2Ehost%2Esplit%28%27%40%27%29%20%3A%20false%3B%0A%20%20%20%20%20%20if%20%28authInHost%29%20%7B%0A%20%20%20%20%20%20%20%20result%2Eauth%20%3D%20authInHost%2Eshift%28%29%3B%0A%20%20%20%20%20%20%20%20result%2Ehost%20%3D%20result%2Ehostname%20%3D%20authInHost%2Eshift%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20result%2Esearch%20%3D%20relative%2Esearch%3B%0A%20%20%20%20result%2Equery%20%3D%20relative%2Equery%3B%0A%20%20%20%20%2F%2Fto%20support%20http%2Erequest%0A%20%20%20%20if%20%28%21isNull%28result%2Epathname%29%20%7C%7C%20%21isNull%28result%2Esearch%29%29%20%7B%0A%20%20%20%20%20%20result%2Epath%20%3D%20%28result%2Epathname%20%3F%20result%2Epathname%20%3A%20%27%27%29%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28result%2Esearch%20%3F%20result%2Esearch%20%3A%20%27%27%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20result%2Ehref%20%3D%20result%2Eformat%28%29%3B%0A%20%20%20%20return%20result%3B%0A%20%20%7D%0A%0A%20%20if%20%28%21srcPath%2Elength%29%20%7B%0A%20%20%20%20%2F%2F%20no%20path%20at%20all%2E%20%20easy%2E%0A%20%20%20%20%2F%2F%20we%27ve%20already%20handled%20the%20other%20stuff%20above%2E%0A%20%20%20%20result%2Epathname%20%3D%20null%3B%0A%20%20%20%20%2F%2Fto%20support%20http%2Erequest%0A%20%20%20%20if%20%28result%2Esearch%29%20%7B%0A%20%20%20%20%20%20result%2Epath%20%3D%20%27%2F%27%20%2B%20result%2Esearch%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20result%2Epath%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20result%2Ehref%20%3D%20result%2Eformat%28%29%3B%0A%20%20%20%20return%20result%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20if%20a%20url%20ENDs%20in%20%2E%20or%20%2E%2E%2C%20then%20it%20must%20get%20a%20trailing%20slash%2E%0A%20%20%2F%2F%20however%2C%20if%20it%20ends%20in%20anything%20else%20non%2Dslashy%2C%0A%20%20%2F%2F%20then%20it%20must%20NOT%20get%20a%20trailing%20slash%2E%0A%20%20var%20last%20%3D%20srcPath%2Eslice%28%2D1%29%5B0%5D%3B%0A%20%20var%20hasTrailingSlash%20%3D%20%28%0A%20%20%20%20%20%20%28result%2Ehost%20%7C%7C%20relative%2Ehost%29%20%26%26%20%28last%20%3D%3D%3D%20%27%2E%27%20%7C%7C%20last%20%3D%3D%3D%20%27%2E%2E%27%29%20%7C%7C%0A%20%20%20%20%20%20last%20%3D%3D%3D%20%27%27%29%3B%0A%0A%20%20%2F%2F%20strip%20single%20dots%2C%20resolve%20double%20dots%20to%20parent%20dir%0A%20%20%2F%2F%20if%20the%20path%20tries%20to%20go%20above%20the%20root%2C%20%60up%60%20ends%20up%20%3E%200%0A%20%20var%20up%20%3D%200%3B%0A%20%20for%20%28var%20i%20%3D%20srcPath%2Elength%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20last%20%3D%20srcPath%5Bi%5D%3B%0A%20%20%20%20if%20%28last%20%3D%3D%20%27%2E%27%29%20%7B%0A%20%20%20%20%20%20srcPath%2Esplice%28i%2C%201%29%3B%0A%20%20%20%20%7D%20else%20if%20%28last%20%3D%3D%3D%20%27%2E%2E%27%29%20%7B%0A%20%20%20%20%20%20srcPath%2Esplice%28i%2C%201%29%3B%0A%20%20%20%20%20%20up%2B%2B%3B%0A%20%20%20%20%7D%20else%20if%20%28up%29%20%7B%0A%20%20%20%20%20%20srcPath%2Esplice%28i%2C%201%29%3B%0A%20%20%20%20%20%20up%2D%2D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20if%20the%20path%20is%20allowed%20to%20go%20above%20the%20root%2C%20restore%20leading%20%2E%2Es%0A%20%20if%20%28%21mustEndAbs%20%26%26%20%21removeAllDots%29%20%7B%0A%20%20%20%20for%20%28%3B%20up%2D%2D%3B%20up%29%20%7B%0A%20%20%20%20%20%20srcPath%2Eunshift%28%27%2E%2E%27%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20if%20%28mustEndAbs%20%26%26%20srcPath%5B0%5D%20%21%3D%3D%20%27%27%20%26%26%0A%20%20%20%20%20%20%28%21srcPath%5B0%5D%20%7C%7C%20srcPath%5B0%5D%2EcharAt%280%29%20%21%3D%3D%20%27%2F%27%29%29%20%7B%0A%20%20%20%20srcPath%2Eunshift%28%27%27%29%3B%0A%20%20%7D%0A%0A%20%20if%20%28hasTrailingSlash%20%26%26%20%28srcPath%2Ejoin%28%27%2F%27%29%2Esubstr%28%2D1%29%20%21%3D%3D%20%27%2F%27%29%29%20%7B%0A%20%20%20%20srcPath%2Epush%28%27%27%29%3B%0A%20%20%7D%0A%0A%20%20var%20isAbsolute%20%3D%20srcPath%5B0%5D%20%3D%3D%3D%20%27%27%20%7C%7C%0A%20%20%20%20%20%20%28srcPath%5B0%5D%20%26%26%20srcPath%5B0%5D%2EcharAt%280%29%20%3D%3D%3D%20%27%2F%27%29%3B%0A%0A%20%20%2F%2F%20put%20the%20host%20back%0A%20%20if%20%28psychotic%29%20%7B%0A%20%20%20%20result%2Ehostname%20%3D%20result%2Ehost%20%3D%20isAbsolute%20%3F%20%27%27%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20srcPath%2Elength%20%3F%20srcPath%2Eshift%28%29%20%3A%20%27%27%3B%0A%20%20%20%20%2F%2Foccationaly%20the%20auth%20can%20get%20stuck%20only%20in%20host%0A%20%20%20%20%2F%2Fthis%20especialy%20happens%20in%20cases%20like%0A%20%20%20%20%2F%2Furl%2EresolveObject%28%27mailto%3Alocal1%40domain1%27%2C%20%27local2%40domain2%27%29%0A%20%20%20%20var%20authInHost%20%3D%20result%2Ehost%20%26%26%20result%2Ehost%2EindexOf%28%27%40%27%29%20%3E%200%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%2Ehost%2Esplit%28%27%40%27%29%20%3A%20false%3B%0A%20%20%20%20if%20%28authInHost%29%20%7B%0A%20%20%20%20%20%20result%2Eauth%20%3D%20authInHost%2Eshift%28%29%3B%0A%20%20%20%20%20%20result%2Ehost%20%3D%20result%2Ehostname%20%3D%20authInHost%2Eshift%28%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20mustEndAbs%20%3D%20mustEndAbs%20%7C%7C%20%28result%2Ehost%20%26%26%20srcPath%2Elength%29%3B%0A%0A%20%20if%20%28mustEndAbs%20%26%26%20%21isAbsolute%29%20%7B%0A%20%20%20%20srcPath%2Eunshift%28%27%27%29%3B%0A%20%20%7D%0A%0A%20%20if%20%28%21srcPath%2Elength%29%20%7B%0A%20%20%20%20result%2Epathname%20%3D%20null%3B%0A%20%20%20%20result%2Epath%20%3D%20null%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20result%2Epathname%20%3D%20srcPath%2Ejoin%28%27%2F%27%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2Fto%20support%20request%2Ehttp%0A%20%20if%20%28%21isNull%28result%2Epathname%29%20%7C%7C%20%21isNull%28result%2Esearch%29%29%20%7B%0A%20%20%20%20result%2Epath%20%3D%20%28result%2Epathname%20%3F%20result%2Epathname%20%3A%20%27%27%29%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28result%2Esearch%20%3F%20result%2Esearch%20%3A%20%27%27%29%3B%0A%20%20%7D%0A%20%20result%2Eauth%20%3D%20relative%2Eauth%20%7C%7C%20result%2Eauth%3B%0A%20%20result%2Eslashes%20%3D%20result%2Eslashes%20%7C%7C%20relative%2Eslashes%3B%0A%20%20result%2Ehref%20%3D%20result%2Eformat%28%29%3B%0A%20%20return%20result%3B%0A%7D%3B%0A%0AUrl%2Eprototype%2EparseHost%20%3D%20function%28%29%20%7B%0A%20%20var%20host%20%3D%20this%2Ehost%3B%0A%20%20var%20port%20%3D%20portPattern%2Eexec%28host%29%3B%0A%20%20if%20%28port%29%20%7B%0A%20%20%20%20port%20%3D%20port%5B0%5D%3B%0A%20%20%20%20if%20%28port%20%21%3D%3D%20%27%3A%27%29%20%7B%0A%20%20%20%20%20%20this%2Eport%20%3D%20port%2Esubstr%281%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20host%20%3D%20host%2Esubstr%280%2C%20host%2Elength%20%2D%20port%2Elength%29%3B%0A%20%20%7D%0A%20%20if%20%28host%29%20this%2Ehostname%20%3D%20host%3B%0A%7D%3B%0A%0Afunction%20isString%28arg%29%20%7B%0A%20%20return%20typeof%20arg%20%3D%3D%3D%20%22string%22%3B%0A%7D%0A%0Afunction%20isObject%28arg%29%20%7B%0A%20%20return%20typeof%20arg%20%3D%3D%3D%20%27object%27%20%26%26%20arg%20%21%3D%3D%20null%3B%0A%7D%0A%0Afunction%20isNull%28arg%29%20%7B%0A%20%20return%20arg%20%3D%3D%3D%20null%3B%0A%7D%0Afunction%20isNullOrUndefined%28arg%29%20%7B%0A%20%20return%20%20arg%20%3D%3D%20null%3B%0A%7D%0A%0A%7D%2C%7B%22punycode%22%3A4%2C%22querystring%22%3A7%7D%5D%2C9%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%27use%20strict%27%3B%0A%0Amodule%2Eexports%20%3D%20earcut%3B%0A%0Afunction%20earcut%28data%2C%20holeIndices%2C%20dim%29%20%7B%0A%0A%20%20%20%20dim%20%3D%20dim%20%7C%7C%202%3B%0A%0A%20%20%20%20var%20hasHoles%20%3D%20holeIndices%20%26%26%20holeIndices%2Elength%2C%0A%20%20%20%20%20%20%20%20outerLen%20%3D%20hasHoles%20%3F%20holeIndices%5B0%5D%20%2A%20dim%20%3A%20data%2Elength%2C%0A%20%20%20%20%20%20%20%20outerNode%20%3D%20linkedList%28data%2C%200%2C%20outerLen%2C%20dim%2C%20true%29%2C%0A%20%20%20%20%20%20%20%20triangles%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20if%20%28%21outerNode%29%20return%20triangles%3B%0A%0A%20%20%20%20var%20minX%2C%20minY%2C%20maxX%2C%20maxY%2C%20x%2C%20y%2C%20size%3B%0A%0A%20%20%20%20if%20%28hasHoles%29%20outerNode%20%3D%20eliminateHoles%28data%2C%20holeIndices%2C%20outerNode%2C%20dim%29%3B%0A%0A%20%20%20%20%2F%2F%20if%20the%20shape%20is%20not%20too%20simple%2C%20we%27ll%20use%20z%2Dorder%20curve%20hash%20later%3B%20calculate%20polygon%20bbox%0A%20%20%20%20if%20%28data%2Elength%20%3E%2080%20%2A%20dim%29%20%7B%0A%20%20%20%20%20%20%20%20minX%20%3D%20maxX%20%3D%20data%5B0%5D%3B%0A%20%20%20%20%20%20%20%20minY%20%3D%20maxY%20%3D%20data%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20dim%3B%20i%20%3C%20outerLen%3B%20i%20%2B%3D%20dim%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20data%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20data%5Bi%20%2B%201%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28x%20%3C%20minX%29%20minX%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28y%20%3C%20minY%29%20minY%20%3D%20y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28x%20%3E%20maxX%29%20maxX%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28y%20%3E%20maxY%29%20maxY%20%3D%20y%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20minX%2C%20minY%20and%20size%20are%20later%20used%20to%20transform%20coords%20into%20integers%20for%20z%2Dorder%20calculation%0A%20%20%20%20%20%20%20%20size%20%3D%20Math%2Emax%28maxX%20%2D%20minX%2C%20maxY%20%2D%20minY%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20earcutLinked%28outerNode%2C%20triangles%2C%20dim%2C%20minX%2C%20minY%2C%20size%29%3B%0A%0A%20%20%20%20return%20triangles%3B%0A%7D%0A%0A%2F%2F%20create%20a%20circular%20doubly%20linked%20list%20from%20polygon%20points%20in%20the%20specified%20winding%20order%0Afunction%20linkedList%28data%2C%20start%2C%20end%2C%20dim%2C%20clockwise%29%20%7B%0A%20%20%20%20var%20sum%20%3D%200%2C%0A%20%20%20%20%20%20%20%20i%2C%20j%2C%20last%3B%0A%0A%20%20%20%20%2F%2F%20calculate%20original%20winding%20order%20of%20a%20polygon%20ring%0A%20%20%20%20for%20%28i%20%3D%20start%2C%20j%20%3D%20end%20%2D%20dim%3B%20i%20%3C%20end%3B%20i%20%2B%3D%20dim%29%20%7B%0A%20%20%20%20%20%20%20%20sum%20%2B%3D%20%28data%5Bj%5D%20%2D%20data%5Bi%5D%29%20%2A%20%28data%5Bi%20%2B%201%5D%20%2B%20data%5Bj%20%2B%201%5D%29%3B%0A%20%20%20%20%20%20%20%20j%20%3D%20i%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20link%20points%20into%20circular%20doubly%2Dlinked%20list%20in%20the%20specified%20winding%20order%0A%20%20%20%20if%20%28clockwise%20%3D%3D%3D%20%28sum%20%3E%200%29%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%20start%3B%20i%20%3C%20end%3B%20i%20%2B%3D%20dim%29%20last%20%3D%20insertNode%28i%2C%20data%5Bi%5D%2C%20data%5Bi%20%2B%201%5D%2C%20last%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%20end%20%2D%20dim%3B%20i%20%3E%3D%20start%3B%20i%20%2D%3D%20dim%29%20last%20%3D%20insertNode%28i%2C%20data%5Bi%5D%2C%20data%5Bi%20%2B%201%5D%2C%20last%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20last%3B%0A%7D%0A%0A%2F%2F%20eliminate%20colinear%20or%20duplicate%20points%0Afunction%20filterPoints%28start%2C%20end%29%20%7B%0A%20%20%20%20if%20%28%21start%29%20return%20start%3B%0A%20%20%20%20if%20%28%21end%29%20end%20%3D%20start%3B%0A%0A%20%20%20%20var%20p%20%3D%20start%2C%0A%20%20%20%20%20%20%20%20again%3B%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20again%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%21p%2Esteiner%20%26%26%20%28equals%28p%2C%20p%2Enext%29%20%7C%7C%20area%28p%2Eprev%2C%20p%2C%20p%2Enext%29%20%3D%3D%3D%200%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20removeNode%28p%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20p%20%3D%20end%20%3D%20p%2Eprev%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28p%20%3D%3D%3D%20p%2Enext%29%20return%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20again%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20p%20%3D%20p%2Enext%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20while%20%28again%20%7C%7C%20p%20%21%3D%3D%20end%29%3B%0A%0A%20%20%20%20return%20end%3B%0A%7D%0A%0A%2F%2F%20main%20ear%20slicing%20loop%20which%20triangulates%20a%20polygon%20%28given%20as%20a%20linked%20list%29%0Afunction%20earcutLinked%28ear%2C%20triangles%2C%20dim%2C%20minX%2C%20minY%2C%20size%2C%20pass%29%20%7B%0A%20%20%20%20if%20%28%21ear%29%20return%3B%0A%0A%20%20%20%20%2F%2F%20interlink%20polygon%20nodes%20in%20z%2Dorder%0A%20%20%20%20if%20%28%21pass%20%26%26%20size%29%20indexCurve%28ear%2C%20minX%2C%20minY%2C%20size%29%3B%0A%0A%20%20%20%20var%20stop%20%3D%20ear%2C%0A%20%20%20%20%20%20%20%20prev%2C%20next%3B%0A%0A%20%20%20%20%2F%2F%20iterate%20through%20ears%2C%20slicing%20them%20one%20by%20one%0A%20%20%20%20while%20%28ear%2Eprev%20%21%3D%3D%20ear%2Enext%29%20%7B%0A%20%20%20%20%20%20%20%20prev%20%3D%20ear%2Eprev%3B%0A%20%20%20%20%20%20%20%20next%20%3D%20ear%2Enext%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28size%20%3F%20isEarHashed%28ear%2C%20minX%2C%20minY%2C%20size%29%20%3A%20isEar%28ear%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20cut%20off%20the%20triangle%0A%20%20%20%20%20%20%20%20%20%20%20%20triangles%2Epush%28prev%2Ei%20%2F%20dim%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangles%2Epush%28ear%2Ei%20%2F%20dim%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangles%2Epush%28next%2Ei%20%2F%20dim%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20removeNode%28ear%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20skipping%20the%20next%20vertice%20leads%20to%20less%20sliver%20triangles%0A%20%20%20%20%20%20%20%20%20%20%20%20ear%20%3D%20next%2Enext%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20stop%20%3D%20next%2Enext%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20ear%20%3D%20next%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20we%20looped%20through%20the%20whole%20remaining%20polygon%20and%20can%27t%20find%20any%20more%20ears%0A%20%20%20%20%20%20%20%20if%20%28ear%20%3D%3D%3D%20stop%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20try%20filtering%20points%20and%20slicing%20again%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21pass%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20earcutLinked%28filterPoints%28ear%29%2C%20triangles%2C%20dim%2C%20minX%2C%20minY%2C%20size%2C%201%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20this%20didn%27t%20work%2C%20try%20curing%20all%20small%20self%2Dintersections%20locally%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28pass%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ear%20%3D%20cureLocalIntersections%28ear%2C%20triangles%2C%20dim%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20earcutLinked%28ear%2C%20triangles%2C%20dim%2C%20minX%2C%20minY%2C%20size%2C%202%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20as%20a%20last%20resort%2C%20try%20splitting%20the%20remaining%20polygon%20into%20two%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28pass%20%3D%3D%3D%202%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20splitEarcut%28ear%2C%20triangles%2C%20dim%2C%20minX%2C%20minY%2C%20size%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20check%20whether%20a%20polygon%20node%20forms%20a%20valid%20ear%20with%20adjacent%20nodes%0Afunction%20isEar%28ear%29%20%7B%0A%20%20%20%20var%20a%20%3D%20ear%2Eprev%2C%0A%20%20%20%20%20%20%20%20b%20%3D%20ear%2C%0A%20%20%20%20%20%20%20%20c%20%3D%20ear%2Enext%3B%0A%0A%20%20%20%20if%20%28area%28a%2C%20b%2C%20c%29%20%3E%3D%200%29%20return%20false%3B%20%2F%2F%20reflex%2C%20can%27t%20be%20an%20ear%0A%0A%20%20%20%20%2F%2F%20now%20make%20sure%20we%20don%27t%20have%20other%20points%20inside%20the%20potential%20ear%0A%20%20%20%20var%20p%20%3D%20ear%2Enext%2Enext%3B%0A%0A%20%20%20%20while%20%28p%20%21%3D%3D%20ear%2Eprev%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28pointInTriangle%28a%2Ex%2C%20a%2Ey%2C%20b%2Ex%2C%20b%2Ey%2C%20c%2Ex%2C%20c%2Ey%2C%20p%2Ex%2C%20p%2Ey%29%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20area%28p%2Eprev%2C%20p%2C%20p%2Enext%29%20%3E%3D%200%29%20return%20false%3B%0A%20%20%20%20%20%20%20%20p%20%3D%20p%2Enext%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20true%3B%0A%7D%0A%0Afunction%20isEarHashed%28ear%2C%20minX%2C%20minY%2C%20size%29%20%7B%0A%20%20%20%20var%20a%20%3D%20ear%2Eprev%2C%0A%20%20%20%20%20%20%20%20b%20%3D%20ear%2C%0A%20%20%20%20%20%20%20%20c%20%3D%20ear%2Enext%3B%0A%0A%20%20%20%20if%20%28area%28a%2C%20b%2C%20c%29%20%3E%3D%200%29%20return%20false%3B%20%2F%2F%20reflex%2C%20can%27t%20be%20an%20ear%0A%0A%20%20%20%20%2F%2F%20triangle%20bbox%3B%20min%20%26%20max%20are%20calculated%20like%20this%20for%20speed%0A%20%20%20%20var%20minTX%20%3D%20a%2Ex%20%3C%20b%2Ex%20%3F%20%28a%2Ex%20%3C%20c%2Ex%20%3F%20a%2Ex%20%3A%20c%2Ex%29%20%3A%20%28b%2Ex%20%3C%20c%2Ex%20%3F%20b%2Ex%20%3A%20c%2Ex%29%2C%0A%20%20%20%20%20%20%20%20minTY%20%3D%20a%2Ey%20%3C%20b%2Ey%20%3F%20%28a%2Ey%20%3C%20c%2Ey%20%3F%20a%2Ey%20%3A%20c%2Ey%29%20%3A%20%28b%2Ey%20%3C%20c%2Ey%20%3F%20b%2Ey%20%3A%20c%2Ey%29%2C%0A%20%20%20%20%20%20%20%20maxTX%20%3D%20a%2Ex%20%3E%20b%2Ex%20%3F%20%28a%2Ex%20%3E%20c%2Ex%20%3F%20a%2Ex%20%3A%20c%2Ex%29%20%3A%20%28b%2Ex%20%3E%20c%2Ex%20%3F%20b%2Ex%20%3A%20c%2Ex%29%2C%0A%20%20%20%20%20%20%20%20maxTY%20%3D%20a%2Ey%20%3E%20b%2Ey%20%3F%20%28a%2Ey%20%3E%20c%2Ey%20%3F%20a%2Ey%20%3A%20c%2Ey%29%20%3A%20%28b%2Ey%20%3E%20c%2Ey%20%3F%20b%2Ey%20%3A%20c%2Ey%29%3B%0A%0A%20%20%20%20%2F%2F%20z%2Dorder%20range%20for%20the%20current%20triangle%20bbox%3B%0A%20%20%20%20var%20minZ%20%3D%20zOrder%28minTX%2C%20minTY%2C%20minX%2C%20minY%2C%20size%29%2C%0A%20%20%20%20%20%20%20%20maxZ%20%3D%20zOrder%28maxTX%2C%20maxTY%2C%20minX%2C%20minY%2C%20size%29%3B%0A%0A%20%20%20%20%2F%2F%20first%20look%20for%20points%20inside%20the%20triangle%20in%20increasing%20z%2Dorder%0A%20%20%20%20var%20p%20%3D%20ear%2EnextZ%3B%0A%0A%20%20%20%20while%20%28p%20%26%26%20p%2Ez%20%3C%3D%20maxZ%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28p%20%21%3D%3D%20ear%2Eprev%20%26%26%20p%20%21%3D%3D%20ear%2Enext%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20pointInTriangle%28a%2Ex%2C%20a%2Ey%2C%20b%2Ex%2C%20b%2Ey%2C%20c%2Ex%2C%20c%2Ey%2C%20p%2Ex%2C%20p%2Ey%29%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20area%28p%2Eprev%2C%20p%2C%20p%2Enext%29%20%3E%3D%200%29%20return%20false%3B%0A%20%20%20%20%20%20%20%20p%20%3D%20p%2EnextZ%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20then%20look%20for%20points%20in%20decreasing%20z%2Dorder%0A%20%20%20%20p%20%3D%20ear%2EprevZ%3B%0A%0A%20%20%20%20while%20%28p%20%26%26%20p%2Ez%20%3E%3D%20minZ%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28p%20%21%3D%3D%20ear%2Eprev%20%26%26%20p%20%21%3D%3D%20ear%2Enext%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20pointInTriangle%28a%2Ex%2C%20a%2Ey%2C%20b%2Ex%2C%20b%2Ey%2C%20c%2Ex%2C%20c%2Ey%2C%20p%2Ex%2C%20p%2Ey%29%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20area%28p%2Eprev%2C%20p%2C%20p%2Enext%29%20%3E%3D%200%29%20return%20false%3B%0A%20%20%20%20%20%20%20%20p%20%3D%20p%2EprevZ%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20true%3B%0A%7D%0A%0A%2F%2F%20go%20through%20all%20polygon%20nodes%20and%20cure%20small%20local%20self%2Dintersections%0Afunction%20cureLocalIntersections%28start%2C%20triangles%2C%20dim%29%20%7B%0A%20%20%20%20var%20p%20%3D%20start%3B%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20p%2Eprev%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20p%2Enext%2Enext%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20a%20self%2Dintersection%20where%20edge%20%28v%5Bi%2D1%5D%2Cv%5Bi%5D%29%20intersects%20%28v%5Bi%2B1%5D%2Cv%5Bi%2B2%5D%29%0A%20%20%20%20%20%20%20%20if%20%28intersects%28a%2C%20p%2C%20p%2Enext%2C%20b%29%20%26%26%20locallyInside%28a%2C%20b%29%20%26%26%20locallyInside%28b%2C%20a%29%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20triangles%2Epush%28a%2Ei%20%2F%20dim%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangles%2Epush%28p%2Ei%20%2F%20dim%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangles%2Epush%28b%2Ei%20%2F%20dim%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20remove%20two%20nodes%20involved%0A%20%20%20%20%20%20%20%20%20%20%20%20removeNode%28p%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20removeNode%28p%2Enext%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20p%20%3D%20start%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20p%20%3D%20p%2Enext%3B%0A%20%20%20%20%7D%20while%20%28p%20%21%3D%3D%20start%29%3B%0A%0A%20%20%20%20return%20p%3B%0A%7D%0A%0A%2F%2F%20try%20splitting%20polygon%20into%20two%20and%20triangulate%20them%20independently%0Afunction%20splitEarcut%28start%2C%20triangles%2C%20dim%2C%20minX%2C%20minY%2C%20size%29%20%7B%0A%20%20%20%20%2F%2F%20look%20for%20a%20valid%20diagonal%20that%20divides%20the%20polygon%20into%20two%0A%20%20%20%20var%20a%20%3D%20start%3B%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20a%2Enext%2Enext%3B%0A%20%20%20%20%20%20%20%20while%20%28b%20%21%3D%3D%20a%2Eprev%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28a%2Ei%20%21%3D%3D%20b%2Ei%20%26%26%20isValidDiagonal%28a%2C%20b%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20split%20the%20polygon%20in%20two%20by%20the%20diagonal%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20c%20%3D%20splitPolygon%28a%2C%20b%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20filter%20colinear%20points%20around%20the%20cuts%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%20%3D%20filterPoints%28a%2C%20a%2Enext%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20filterPoints%28c%2C%20c%2Enext%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20run%20earcut%20on%20each%20half%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20earcutLinked%28a%2C%20triangles%2C%20dim%2C%20minX%2C%20minY%2C%20size%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20earcutLinked%28c%2C%20triangles%2C%20dim%2C%20minX%2C%20minY%2C%20size%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20b%2Enext%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20a%20%3D%20a%2Enext%3B%0A%20%20%20%20%7D%20while%20%28a%20%21%3D%3D%20start%29%3B%0A%7D%0A%0A%2F%2F%20link%20every%20hole%20into%20the%20outer%20loop%2C%20producing%20a%20single%2Dring%20polygon%20without%20holes%0Afunction%20eliminateHoles%28data%2C%20holeIndices%2C%20outerNode%2C%20dim%29%20%7B%0A%20%20%20%20var%20queue%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20i%2C%20len%2C%20start%2C%20end%2C%20list%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%2C%20len%20%3D%20holeIndices%2Elength%3B%20i%20%3C%20len%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20start%20%3D%20holeIndices%5Bi%5D%20%2A%20dim%3B%0A%20%20%20%20%20%20%20%20end%20%3D%20i%20%3C%20len%20%2D%201%20%3F%20holeIndices%5Bi%20%2B%201%5D%20%2A%20dim%20%3A%20data%2Elength%3B%0A%20%20%20%20%20%20%20%20list%20%3D%20linkedList%28data%2C%20start%2C%20end%2C%20dim%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20if%20%28list%20%3D%3D%3D%20list%2Enext%29%20list%2Esteiner%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20queue%2Epush%28getLeftmost%28list%29%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20queue%2Esort%28compareX%29%3B%0A%0A%20%20%20%20%2F%2F%20process%20holes%20from%20left%20to%20right%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20queue%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20eliminateHole%28queue%5Bi%5D%2C%20outerNode%29%3B%0A%20%20%20%20%20%20%20%20outerNode%20%3D%20filterPoints%28outerNode%2C%20outerNode%2Enext%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20outerNode%3B%0A%7D%0A%0Afunction%20compareX%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20a%2Ex%20%2D%20b%2Ex%3B%0A%7D%0A%0A%2F%2F%20find%20a%20bridge%20between%20vertices%20that%20connects%20hole%20with%20an%20outer%20ring%20and%20and%20link%20it%0Afunction%20eliminateHole%28hole%2C%20outerNode%29%20%7B%0A%20%20%20%20outerNode%20%3D%20findHoleBridge%28hole%2C%20outerNode%29%3B%0A%20%20%20%20if%20%28outerNode%29%20%7B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20splitPolygon%28outerNode%2C%20hole%29%3B%0A%20%20%20%20%20%20%20%20filterPoints%28b%2C%20b%2Enext%29%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20David%20Eberly%27s%20algorithm%20for%20finding%20a%20bridge%20between%20hole%20and%20outer%20polygon%0Afunction%20findHoleBridge%28hole%2C%20outerNode%29%20%7B%0A%20%20%20%20var%20p%20%3D%20outerNode%2C%0A%20%20%20%20%20%20%20%20hx%20%3D%20hole%2Ex%2C%0A%20%20%20%20%20%20%20%20hy%20%3D%20hole%2Ey%2C%0A%20%20%20%20%20%20%20%20qx%20%3D%20%2DInfinity%2C%0A%20%20%20%20%20%20%20%20m%3B%0A%0A%20%20%20%20%2F%2F%20find%20a%20segment%20intersected%20by%20a%20ray%20from%20the%20hole%27s%20leftmost%20point%20to%20the%20left%3B%0A%20%20%20%20%2F%2F%20segment%27s%20endpoint%20with%20lesser%20x%20will%20be%20potential%20connection%20point%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20if%20%28hy%20%3C%3D%20p%2Ey%20%26%26%20hy%20%3E%3D%20p%2Enext%2Ey%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20p%2Ex%20%2B%20%28hy%20%2D%20p%2Ey%29%20%2A%20%28p%2Enext%2Ex%20%2D%20p%2Ex%29%20%2F%20%28p%2Enext%2Ey%20%2D%20p%2Ey%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28x%20%3C%3D%20hx%20%26%26%20x%20%3E%20qx%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20qx%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20m%20%3D%20p%2Ex%20%3C%20p%2Enext%2Ex%20%3F%20p%20%3A%20p%2Enext%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20p%20%3D%20p%2Enext%3B%0A%20%20%20%20%7D%20while%20%28p%20%21%3D%3D%20outerNode%29%3B%0A%0A%20%20%20%20if%20%28%21m%29%20return%20null%3B%0A%0A%20%20%20%20%2F%2F%20look%20for%20points%20inside%20the%20triangle%20of%20hole%20point%2C%20segment%20intersection%20and%20endpoint%3B%0A%20%20%20%20%2F%2F%20if%20there%20are%20no%20points%20found%2C%20we%20have%20a%20valid%20connection%3B%0A%20%20%20%20%2F%2F%20otherwise%20choose%20the%20point%20of%20the%20minimum%20angle%20with%20the%20ray%20as%20connection%20point%0A%0A%20%20%20%20var%20stop%20%3D%20m%2C%0A%20%20%20%20%20%20%20%20tanMin%20%3D%20Infinity%2C%0A%20%20%20%20%20%20%20%20tan%3B%0A%0A%20%20%20%20p%20%3D%20m%2Enext%3B%0A%0A%20%20%20%20while%20%28p%20%21%3D%3D%20stop%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28hx%20%3E%3D%20p%2Ex%20%26%26%20p%2Ex%20%3E%3D%20m%2Ex%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointInTriangle%28hy%20%3C%20m%2Ey%20%3F%20hx%20%3A%20qx%2C%20hy%2C%20m%2Ex%2C%20m%2Ey%2C%20hy%20%3C%20m%2Ey%20%3F%20qx%20%3A%20hx%2C%20hy%2C%20p%2Ex%2C%20p%2Ey%29%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20tan%20%3D%20Math%2Eabs%28hy%20%2D%20p%2Ey%29%20%2F%20%28hx%20%2D%20p%2Ex%29%3B%20%2F%2F%20tangential%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%28tan%20%3C%20tanMin%20%7C%7C%20%28tan%20%3D%3D%3D%20tanMin%20%26%26%20p%2Ex%20%3E%20m%2Ex%29%29%20%26%26%20locallyInside%28p%2C%20hole%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20m%20%3D%20p%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tanMin%20%3D%20tan%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20p%20%3D%20p%2Enext%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20m%3B%0A%7D%0A%0A%2F%2F%20interlink%20polygon%20nodes%20in%20z%2Dorder%0Afunction%20indexCurve%28start%2C%20minX%2C%20minY%2C%20size%29%20%7B%0A%20%20%20%20var%20p%20%3D%20start%3B%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20if%20%28p%2Ez%20%3D%3D%3D%20null%29%20p%2Ez%20%3D%20zOrder%28p%2Ex%2C%20p%2Ey%2C%20minX%2C%20minY%2C%20size%29%3B%0A%20%20%20%20%20%20%20%20p%2EprevZ%20%3D%20p%2Eprev%3B%0A%20%20%20%20%20%20%20%20p%2EnextZ%20%3D%20p%2Enext%3B%0A%20%20%20%20%20%20%20%20p%20%3D%20p%2Enext%3B%0A%20%20%20%20%7D%20while%20%28p%20%21%3D%3D%20start%29%3B%0A%0A%20%20%20%20p%2EprevZ%2EnextZ%20%3D%20null%3B%0A%20%20%20%20p%2EprevZ%20%3D%20null%3B%0A%0A%20%20%20%20sortLinked%28p%29%3B%0A%7D%0A%0A%2F%2F%20Simon%20Tatham%27s%20linked%20list%20merge%20sort%20algorithm%0A%2F%2F%20http%3A%2F%2Fwww%2Echiark%2Egreenend%2Eorg%2Euk%2F%7Esgtatham%2Falgorithms%2Flistsort%2Ehtml%0Afunction%20sortLinked%28list%29%20%7B%0A%20%20%20%20var%20i%2C%20p%2C%20q%2C%20e%2C%20tail%2C%20numMerges%2C%20pSize%2C%20qSize%2C%0A%20%20%20%20%20%20%20%20inSize%20%3D%201%3B%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20p%20%3D%20list%3B%0A%20%20%20%20%20%20%20%20list%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20tail%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20numMerges%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20while%20%28p%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20numMerges%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20q%20%3D%20p%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pSize%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20inSize%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pSize%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%20%3D%20q%2EnextZ%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21q%29%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20qSize%20%3D%20inSize%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20%28pSize%20%3E%200%20%7C%7C%20%28qSize%20%3E%200%20%26%26%20q%29%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pSize%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20q%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%20%3D%20q%2EnextZ%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20qSize%2D%2D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28qSize%20%3D%3D%3D%200%20%7C%7C%20%21q%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20p%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p%20%3D%20p%2EnextZ%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pSize%2D%2D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28p%2Ez%20%3C%3D%20q%2Ez%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20p%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p%20%3D%20p%2EnextZ%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pSize%2D%2D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20q%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%20%3D%20q%2EnextZ%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20qSize%2D%2D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28tail%29%20tail%2EnextZ%20%3D%20e%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20list%20%3D%20e%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%2EprevZ%20%3D%20tail%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tail%20%3D%20e%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20p%20%3D%20q%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20tail%2EnextZ%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20inSize%20%2A%3D%202%3B%0A%0A%20%20%20%20%7D%20while%20%28numMerges%20%3E%201%29%3B%0A%0A%20%20%20%20return%20list%3B%0A%7D%0A%0A%2F%2F%20z%2Dorder%20of%20a%20point%20given%20coords%20and%20size%20of%20the%20data%20bounding%20box%0Afunction%20zOrder%28x%2C%20y%2C%20minX%2C%20minY%2C%20size%29%20%7B%0A%20%20%20%20%2F%2F%20coords%20are%20transformed%20into%20non%2Dnegative%2015%2Dbit%20integer%20range%0A%20%20%20%20x%20%3D%2032767%20%2A%20%28x%20%2D%20minX%29%20%2F%20size%3B%0A%20%20%20%20y%20%3D%2032767%20%2A%20%28y%20%2D%20minY%29%20%2F%20size%3B%0A%0A%20%20%20%20x%20%3D%20%28x%20%7C%20%28x%20%3C%3C%208%29%29%20%26%200x00FF00FF%3B%0A%20%20%20%20x%20%3D%20%28x%20%7C%20%28x%20%3C%3C%204%29%29%20%26%200x0F0F0F0F%3B%0A%20%20%20%20x%20%3D%20%28x%20%7C%20%28x%20%3C%3C%202%29%29%20%26%200x33333333%3B%0A%20%20%20%20x%20%3D%20%28x%20%7C%20%28x%20%3C%3C%201%29%29%20%26%200x55555555%3B%0A%0A%20%20%20%20y%20%3D%20%28y%20%7C%20%28y%20%3C%3C%208%29%29%20%26%200x00FF00FF%3B%0A%20%20%20%20y%20%3D%20%28y%20%7C%20%28y%20%3C%3C%204%29%29%20%26%200x0F0F0F0F%3B%0A%20%20%20%20y%20%3D%20%28y%20%7C%20%28y%20%3C%3C%202%29%29%20%26%200x33333333%3B%0A%20%20%20%20y%20%3D%20%28y%20%7C%20%28y%20%3C%3C%201%29%29%20%26%200x55555555%3B%0A%0A%20%20%20%20return%20x%20%7C%20%28y%20%3C%3C%201%29%3B%0A%7D%0A%0A%2F%2F%20find%20the%20leftmost%20node%20of%20a%20polygon%20ring%0Afunction%20getLeftmost%28start%29%20%7B%0A%20%20%20%20var%20p%20%3D%20start%2C%0A%20%20%20%20%20%20%20%20leftmost%20%3D%20start%3B%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20if%20%28p%2Ex%20%3C%20leftmost%2Ex%29%20leftmost%20%3D%20p%3B%0A%20%20%20%20%20%20%20%20p%20%3D%20p%2Enext%3B%0A%20%20%20%20%7D%20while%20%28p%20%21%3D%3D%20start%29%3B%0A%0A%20%20%20%20return%20leftmost%3B%0A%7D%0A%0A%2F%2F%20check%20if%20a%20point%20lies%20within%20a%20convex%20triangle%0Afunction%20pointInTriangle%28ax%2C%20ay%2C%20bx%2C%20by%2C%20cx%2C%20cy%2C%20px%2C%20py%29%20%7B%0A%20%20%20%20return%20%28cx%20%2D%20px%29%20%2A%20%28ay%20%2D%20py%29%20%2D%20%28ax%20%2D%20px%29%20%2A%20%28cy%20%2D%20py%29%20%3E%3D%200%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%28ax%20%2D%20px%29%20%2A%20%28by%20%2D%20py%29%20%2D%20%28bx%20%2D%20px%29%20%2A%20%28ay%20%2D%20py%29%20%3E%3D%200%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%28bx%20%2D%20px%29%20%2A%20%28cy%20%2D%20py%29%20%2D%20%28cx%20%2D%20px%29%20%2A%20%28by%20%2D%20py%29%20%3E%3D%200%3B%0A%7D%0A%0A%2F%2F%20check%20if%20a%20diagonal%20between%20two%20polygon%20nodes%20is%20valid%20%28lies%20in%20polygon%20interior%29%0Afunction%20isValidDiagonal%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20equals%28a%2C%20b%29%20%7C%7C%20a%2Enext%2Ei%20%21%3D%3D%20b%2Ei%20%26%26%20a%2Eprev%2Ei%20%21%3D%3D%20b%2Ei%20%26%26%20%21intersectsPolygon%28a%2C%20b%29%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20locallyInside%28a%2C%20b%29%20%26%26%20locallyInside%28b%2C%20a%29%20%26%26%20middleInside%28a%2C%20b%29%3B%0A%7D%0A%0A%2F%2F%20signed%20area%20of%20a%20triangle%0Afunction%20area%28p%2C%20q%2C%20r%29%20%7B%0A%20%20%20%20return%20%28q%2Ey%20%2D%20p%2Ey%29%20%2A%20%28r%2Ex%20%2D%20q%2Ex%29%20%2D%20%28q%2Ex%20%2D%20p%2Ex%29%20%2A%20%28r%2Ey%20%2D%20q%2Ey%29%3B%0A%7D%0A%0A%2F%2F%20check%20if%20two%20points%20are%20equal%0Afunction%20equals%28p1%2C%20p2%29%20%7B%0A%20%20%20%20return%20p1%2Ex%20%3D%3D%3D%20p2%2Ex%20%26%26%20p1%2Ey%20%3D%3D%3D%20p2%2Ey%3B%0A%7D%0A%0A%2F%2F%20check%20if%20two%20segments%20intersect%0Afunction%20intersects%28p1%2C%20q1%2C%20p2%2C%20q2%29%20%7B%0A%20%20%20%20return%20area%28p1%2C%20q1%2C%20p2%29%20%3E%200%20%21%3D%3D%20area%28p1%2C%20q1%2C%20q2%29%20%3E%200%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20area%28p2%2C%20q2%2C%20p1%29%20%3E%200%20%21%3D%3D%20area%28p2%2C%20q2%2C%20q1%29%20%3E%200%3B%0A%7D%0A%0A%2F%2F%20check%20if%20a%20polygon%20diagonal%20intersects%20any%20polygon%20segments%0Afunction%20intersectsPolygon%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20p%20%3D%20a%3B%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20if%20%28p%2Ei%20%21%3D%3D%20a%2Ei%20%26%26%20p%2Enext%2Ei%20%21%3D%3D%20a%2Ei%20%26%26%20p%2Ei%20%21%3D%3D%20b%2Ei%20%26%26%20p%2Enext%2Ei%20%21%3D%3D%20b%2Ei%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20intersects%28p%2C%20p%2Enext%2C%20a%2C%20b%29%29%20return%20true%3B%0A%20%20%20%20%20%20%20%20p%20%3D%20p%2Enext%3B%0A%20%20%20%20%7D%20while%20%28p%20%21%3D%3D%20a%29%3B%0A%0A%20%20%20%20return%20false%3B%0A%7D%0A%0A%2F%2F%20check%20if%20a%20polygon%20diagonal%20is%20locally%20inside%20the%20polygon%0Afunction%20locallyInside%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20area%28a%2Eprev%2C%20a%2C%20a%2Enext%29%20%3C%200%20%3F%0A%20%20%20%20%20%20%20%20area%28a%2C%20b%2C%20a%2Enext%29%20%3E%3D%200%20%26%26%20area%28a%2C%20a%2Eprev%2C%20b%29%20%3E%3D%200%20%3A%0A%20%20%20%20%20%20%20%20area%28a%2C%20b%2C%20a%2Eprev%29%20%3C%200%20%7C%7C%20area%28a%2C%20a%2Enext%2C%20b%29%20%3C%200%3B%0A%7D%0A%0A%2F%2F%20check%20if%20the%20middle%20point%20of%20a%20polygon%20diagonal%20is%20inside%20the%20polygon%0Afunction%20middleInside%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20p%20%3D%20a%2C%0A%20%20%20%20%20%20%20%20inside%20%3D%20false%2C%0A%20%20%20%20%20%20%20%20px%20%3D%20%28a%2Ex%20%2B%20b%2Ex%29%20%2F%202%2C%0A%20%20%20%20%20%20%20%20py%20%3D%20%28a%2Ey%20%2B%20b%2Ey%29%20%2F%202%3B%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%28%28p%2Ey%20%3E%20py%29%20%21%3D%3D%20%28p%2Enext%2Ey%20%3E%20py%29%29%20%26%26%20%28px%20%3C%20%28p%2Enext%2Ex%20%2D%20p%2Ex%29%20%2A%20%28py%20%2D%20p%2Ey%29%20%2F%20%28p%2Enext%2Ey%20%2D%20p%2Ey%29%20%2B%20p%2Ex%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20inside%20%3D%20%21inside%3B%0A%20%20%20%20%20%20%20%20p%20%3D%20p%2Enext%3B%0A%20%20%20%20%7D%20while%20%28p%20%21%3D%3D%20a%29%3B%0A%0A%20%20%20%20return%20inside%3B%0A%7D%0A%0A%2F%2F%20link%20two%20polygon%20vertices%20with%20a%20bridge%3B%20if%20the%20vertices%20belong%20to%20the%20same%20ring%2C%20it%20splits%20polygon%20into%20two%3B%0A%2F%2F%20if%20one%20belongs%20to%20the%20outer%20ring%20and%20another%20to%20a%20hole%2C%20it%20merges%20it%20into%20a%20single%20ring%0Afunction%20splitPolygon%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20a2%20%3D%20new%20Node%28a%2Ei%2C%20a%2Ex%2C%20a%2Ey%29%2C%0A%20%20%20%20%20%20%20%20b2%20%3D%20new%20Node%28b%2Ei%2C%20b%2Ex%2C%20b%2Ey%29%2C%0A%20%20%20%20%20%20%20%20an%20%3D%20a%2Enext%2C%0A%20%20%20%20%20%20%20%20bp%20%3D%20b%2Eprev%3B%0A%0A%20%20%20%20a%2Enext%20%3D%20b%3B%0A%20%20%20%20b%2Eprev%20%3D%20a%3B%0A%0A%20%20%20%20a2%2Enext%20%3D%20an%3B%0A%20%20%20%20an%2Eprev%20%3D%20a2%3B%0A%0A%20%20%20%20b2%2Enext%20%3D%20a2%3B%0A%20%20%20%20a2%2Eprev%20%3D%20b2%3B%0A%0A%20%20%20%20bp%2Enext%20%3D%20b2%3B%0A%20%20%20%20b2%2Eprev%20%3D%20bp%3B%0A%0A%20%20%20%20return%20b2%3B%0A%7D%0A%0A%2F%2F%20create%20a%20node%20and%20optionally%20link%20it%20with%20previous%20one%20%28in%20a%20circular%20doubly%20linked%20list%29%0Afunction%20insertNode%28i%2C%20x%2C%20y%2C%20last%29%20%7B%0A%20%20%20%20var%20p%20%3D%20new%20Node%28i%2C%20x%2C%20y%29%3B%0A%0A%20%20%20%20if%20%28%21last%29%20%7B%0A%20%20%20%20%20%20%20%20p%2Eprev%20%3D%20p%3B%0A%20%20%20%20%20%20%20%20p%2Enext%20%3D%20p%3B%0A%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20p%2Enext%20%3D%20last%2Enext%3B%0A%20%20%20%20%20%20%20%20p%2Eprev%20%3D%20last%3B%0A%20%20%20%20%20%20%20%20last%2Enext%2Eprev%20%3D%20p%3B%0A%20%20%20%20%20%20%20%20last%2Enext%20%3D%20p%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20p%3B%0A%7D%0A%0Afunction%20removeNode%28p%29%20%7B%0A%20%20%20%20p%2Enext%2Eprev%20%3D%20p%2Eprev%3B%0A%20%20%20%20p%2Eprev%2Enext%20%3D%20p%2Enext%3B%0A%0A%20%20%20%20if%20%28p%2EprevZ%29%20p%2EprevZ%2EnextZ%20%3D%20p%2EnextZ%3B%0A%20%20%20%20if%20%28p%2EnextZ%29%20p%2EnextZ%2EprevZ%20%3D%20p%2EprevZ%3B%0A%7D%0A%0Afunction%20Node%28i%2C%20x%2C%20y%29%20%7B%0A%20%20%20%20%2F%2F%20vertice%20index%20in%20coordinates%20array%0A%20%20%20%20this%2Ei%20%3D%20i%3B%0A%0A%20%20%20%20%2F%2F%20vertex%20coordinates%0A%20%20%20%20this%2Ex%20%3D%20x%3B%0A%20%20%20%20this%2Ey%20%3D%20y%3B%0A%0A%20%20%20%20%2F%2F%20previous%20and%20next%20vertice%20nodes%20in%20a%20polygon%20ring%0A%20%20%20%20this%2Eprev%20%3D%20null%3B%0A%20%20%20%20this%2Enext%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2F%20z%2Dorder%20curve%20value%0A%20%20%20%20this%2Ez%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2F%20previous%20and%20next%20nodes%20in%20z%2Dorder%0A%20%20%20%20this%2EprevZ%20%3D%20null%3B%0A%20%20%20%20this%2EnextZ%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2F%20indicates%20whether%20this%20is%20a%20steiner%20point%0A%20%20%20%20this%2Esteiner%20%3D%20false%3B%0A%7D%0A%0A%7D%2C%7B%7D%5D%2C10%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%27use%20strict%27%3B%0A%0A%2F%2F%0A%2F%2F%20We%20store%20our%20EE%20objects%20in%20a%20plain%20object%20whose%20properties%20are%20event%20names%2E%0A%2F%2F%20If%20%60Object%2Ecreate%28null%29%60%20is%20not%20supported%20we%20prefix%20the%20event%20names%20with%20a%0A%2F%2F%20%60%7E%60%20to%20make%20sure%20that%20the%20built%2Din%20object%20properties%20are%20not%20overridden%20or%0A%2F%2F%20used%20as%20an%20attack%20vector%2E%0A%2F%2F%20We%20also%20assume%20that%20%60Object%2Ecreate%28null%29%60%20is%20available%20when%20the%20event%20name%0A%2F%2F%20is%20an%20ES6%20Symbol%2E%0A%2F%2F%0Avar%20prefix%20%3D%20typeof%20Object%2Ecreate%20%21%3D%3D%20%27function%27%20%3F%20%27%7E%27%20%3A%20false%3B%0A%0A%2F%2A%2A%0A%20%2A%20Representation%20of%20a%20single%20EventEmitter%20function%2E%0A%20%2A%0A%20%2A%20%40param%20%7BFunction%7D%20fn%20Event%20handler%20to%20be%20called%2E%0A%20%2A%20%40param%20%7BMixed%7D%20context%20Context%20for%20function%20execution%2E%0A%20%2A%20%40param%20%7BBoolean%7D%20once%20Only%20emit%20once%0A%20%2A%20%40api%20private%0A%20%2A%2F%0Afunction%20EE%28fn%2C%20context%2C%20once%29%20%7B%0A%20%20this%2Efn%20%3D%20fn%3B%0A%20%20this%2Econtext%20%3D%20context%3B%0A%20%20this%2Eonce%20%3D%20once%20%7C%7C%20false%3B%0A%7D%0A%0A%2F%2A%2A%0A%20%2A%20Minimal%20EventEmitter%20interface%20that%20is%20molded%20against%20the%20Node%2Ejs%0A%20%2A%20EventEmitter%20interface%2E%0A%20%2A%0A%20%2A%20%40constructor%0A%20%2A%20%40api%20public%0A%20%2A%2F%0Afunction%20EventEmitter%28%29%20%7B%20%2F%2A%20Nothing%20to%20set%20%2A%2F%20%7D%0A%0A%2F%2A%2A%0A%20%2A%20Holds%20the%20assigned%20EventEmitters%20by%20name%2E%0A%20%2A%0A%20%2A%20%40type%20%7BObject%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AEventEmitter%2Eprototype%2E%5Fevents%20%3D%20undefined%3B%0A%0A%2F%2A%2A%0A%20%2A%20Return%20a%20list%20of%20assigned%20event%20listeners%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20The%20events%20that%20should%20be%20listed%2E%0A%20%2A%20%40param%20%7BBoolean%7D%20exists%20We%20only%20need%20to%20know%20if%20there%20are%20listeners%2E%0A%20%2A%20%40returns%20%7BArray%7CBoolean%7D%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2Elisteners%20%3D%20function%20listeners%28event%2C%20exists%29%20%7B%0A%20%20var%20evt%20%3D%20prefix%20%3F%20prefix%20%2B%20event%20%3A%20event%0A%20%20%20%20%2C%20available%20%3D%20this%2E%5Fevents%20%26%26%20this%2E%5Fevents%5Bevt%5D%3B%0A%0A%20%20if%20%28exists%29%20return%20%21%21available%3B%0A%20%20if%20%28%21available%29%20return%20%5B%5D%3B%0A%20%20if%20%28available%2Efn%29%20return%20%5Bavailable%2Efn%5D%3B%0A%0A%20%20for%20%28var%20i%20%3D%200%2C%20l%20%3D%20available%2Elength%2C%20ee%20%3D%20new%20Array%28l%29%3B%20i%20%3C%20l%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20ee%5Bi%5D%20%3D%20available%5Bi%5D%2Efn%3B%0A%20%20%7D%0A%0A%20%20return%20ee%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Emit%20an%20event%20to%20all%20registered%20event%20listeners%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20The%20name%20of%20the%20event%2E%0A%20%2A%20%40returns%20%7BBoolean%7D%20Indication%20if%20we%27ve%20emitted%20an%20event%2E%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2Eemit%20%3D%20function%20emit%28event%2C%20a1%2C%20a2%2C%20a3%2C%20a4%2C%20a5%29%20%7B%0A%20%20var%20evt%20%3D%20prefix%20%3F%20prefix%20%2B%20event%20%3A%20event%3B%0A%0A%20%20if%20%28%21this%2E%5Fevents%20%7C%7C%20%21this%2E%5Fevents%5Bevt%5D%29%20return%20false%3B%0A%0A%20%20var%20listeners%20%3D%20this%2E%5Fevents%5Bevt%5D%0A%20%20%20%20%2C%20len%20%3D%20arguments%2Elength%0A%20%20%20%20%2C%20args%0A%20%20%20%20%2C%20i%3B%0A%0A%20%20if%20%28%27function%27%20%3D%3D%3D%20typeof%20listeners%2Efn%29%20%7B%0A%20%20%20%20if%20%28listeners%2Eonce%29%20this%2EremoveListener%28event%2C%20listeners%2Efn%2C%20undefined%2C%20true%29%3B%0A%0A%20%20%20%20switch%20%28len%29%20%7B%0A%20%20%20%20%20%20case%201%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%29%2C%20true%3B%0A%20%20%20%20%20%20case%202%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%2C%20a1%29%2C%20true%3B%0A%20%20%20%20%20%20case%203%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%2C%20a1%2C%20a2%29%2C%20true%3B%0A%20%20%20%20%20%20case%204%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%2C%20a1%2C%20a2%2C%20a3%29%2C%20true%3B%0A%20%20%20%20%20%20case%205%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%2C%20a1%2C%20a2%2C%20a3%2C%20a4%29%2C%20true%3B%0A%20%20%20%20%20%20case%206%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%2C%20a1%2C%20a2%2C%20a3%2C%20a4%2C%20a5%29%2C%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20%28i%20%3D%201%2C%20args%20%3D%20new%20Array%28len%20%2D1%29%3B%20i%20%3C%20len%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20args%5Bi%20%2D%201%5D%20%3D%20arguments%5Bi%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20listeners%2Efn%2Eapply%28listeners%2Econtext%2C%20args%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20var%20length%20%3D%20listeners%2Elength%0A%20%20%20%20%20%20%2C%20j%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20if%20%28listeners%5Bi%5D%2Eonce%29%20this%2EremoveListener%28event%2C%20listeners%5Bi%5D%2Efn%2C%20undefined%2C%20true%29%3B%0A%0A%20%20%20%20%20%20switch%20%28len%29%20%7B%0A%20%20%20%20%20%20%20%20case%201%3A%20listeners%5Bi%5D%2Efn%2Ecall%28listeners%5Bi%5D%2Econtext%29%3B%20break%3B%0A%20%20%20%20%20%20%20%20case%202%3A%20listeners%5Bi%5D%2Efn%2Ecall%28listeners%5Bi%5D%2Econtext%2C%20a1%29%3B%20break%3B%0A%20%20%20%20%20%20%20%20case%203%3A%20listeners%5Bi%5D%2Efn%2Ecall%28listeners%5Bi%5D%2Econtext%2C%20a1%2C%20a2%29%3B%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21args%29%20for%20%28j%20%3D%201%2C%20args%20%3D%20new%20Array%28len%20%2D1%29%3B%20j%20%3C%20len%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20args%5Bj%20%2D%201%5D%20%3D%20arguments%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20listeners%5Bi%5D%2Efn%2Eapply%28listeners%5Bi%5D%2Econtext%2C%20args%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20return%20true%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Register%20a%20new%20EventListener%20for%20the%20given%20event%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20Name%20of%20the%20event%2E%0A%20%2A%20%40param%20%7BFuncton%7D%20fn%20Callback%20function%2E%0A%20%2A%20%40param%20%7BMixed%7D%20context%20The%20context%20of%20the%20function%2E%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2Eon%20%3D%20function%20on%28event%2C%20fn%2C%20context%29%20%7B%0A%20%20var%20listener%20%3D%20new%20EE%28fn%2C%20context%20%7C%7C%20this%29%0A%20%20%20%20%2C%20evt%20%3D%20prefix%20%3F%20prefix%20%2B%20event%20%3A%20event%3B%0A%0A%20%20if%20%28%21this%2E%5Fevents%29%20this%2E%5Fevents%20%3D%20prefix%20%3F%20%7B%7D%20%3A%20Object%2Ecreate%28null%29%3B%0A%20%20if%20%28%21this%2E%5Fevents%5Bevt%5D%29%20this%2E%5Fevents%5Bevt%5D%20%3D%20listener%3B%0A%20%20else%20%7B%0A%20%20%20%20if%20%28%21this%2E%5Fevents%5Bevt%5D%2Efn%29%20this%2E%5Fevents%5Bevt%5D%2Epush%28listener%29%3B%0A%20%20%20%20else%20this%2E%5Fevents%5Bevt%5D%20%3D%20%5B%0A%20%20%20%20%20%20this%2E%5Fevents%5Bevt%5D%2C%20listener%0A%20%20%20%20%5D%3B%0A%20%20%7D%0A%0A%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Add%20an%20EventListener%20that%27s%20only%20called%20once%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20Name%20of%20the%20event%2E%0A%20%2A%20%40param%20%7BFunction%7D%20fn%20Callback%20function%2E%0A%20%2A%20%40param%20%7BMixed%7D%20context%20The%20context%20of%20the%20function%2E%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2Eonce%20%3D%20function%20once%28event%2C%20fn%2C%20context%29%20%7B%0A%20%20var%20listener%20%3D%20new%20EE%28fn%2C%20context%20%7C%7C%20this%2C%20true%29%0A%20%20%20%20%2C%20evt%20%3D%20prefix%20%3F%20prefix%20%2B%20event%20%3A%20event%3B%0A%0A%20%20if%20%28%21this%2E%5Fevents%29%20this%2E%5Fevents%20%3D%20prefix%20%3F%20%7B%7D%20%3A%20Object%2Ecreate%28null%29%3B%0A%20%20if%20%28%21this%2E%5Fevents%5Bevt%5D%29%20this%2E%5Fevents%5Bevt%5D%20%3D%20listener%3B%0A%20%20else%20%7B%0A%20%20%20%20if%20%28%21this%2E%5Fevents%5Bevt%5D%2Efn%29%20this%2E%5Fevents%5Bevt%5D%2Epush%28listener%29%3B%0A%20%20%20%20else%20this%2E%5Fevents%5Bevt%5D%20%3D%20%5B%0A%20%20%20%20%20%20this%2E%5Fevents%5Bevt%5D%2C%20listener%0A%20%20%20%20%5D%3B%0A%20%20%7D%0A%0A%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Remove%20event%20listeners%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20The%20event%20we%20want%20to%20remove%2E%0A%20%2A%20%40param%20%7BFunction%7D%20fn%20The%20listener%20that%20we%20need%20to%20find%2E%0A%20%2A%20%40param%20%7BMixed%7D%20context%20Only%20remove%20listeners%20matching%20this%20context%2E%0A%20%2A%20%40param%20%7BBoolean%7D%20once%20Only%20remove%20once%20listeners%2E%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2EremoveListener%20%3D%20function%20removeListener%28event%2C%20fn%2C%20context%2C%20once%29%20%7B%0A%20%20var%20evt%20%3D%20prefix%20%3F%20prefix%20%2B%20event%20%3A%20event%3B%0A%0A%20%20if%20%28%21this%2E%5Fevents%20%7C%7C%20%21this%2E%5Fevents%5Bevt%5D%29%20return%20this%3B%0A%0A%20%20var%20listeners%20%3D%20this%2E%5Fevents%5Bevt%5D%0A%20%20%20%20%2C%20events%20%3D%20%5B%5D%3B%0A%0A%20%20if%20%28fn%29%20%7B%0A%20%20%20%20if%20%28listeners%2Efn%29%20%7B%0A%20%20%20%20%20%20if%20%28%0A%20%20%20%20%20%20%20%20%20%20%20listeners%2Efn%20%21%3D%3D%20fn%0A%20%20%20%20%20%20%20%20%7C%7C%20%28once%20%26%26%20%21listeners%2Eonce%29%0A%20%20%20%20%20%20%20%20%7C%7C%20%28context%20%26%26%20listeners%2Econtext%20%21%3D%3D%20context%29%0A%20%20%20%20%20%20%29%20%7B%0A%20%20%20%20%20%20%20%20events%2Epush%28listeners%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20length%20%3D%20listeners%2Elength%3B%20i%20%3C%20length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20listeners%5Bi%5D%2Efn%20%21%3D%3D%20fn%0A%20%20%20%20%20%20%20%20%20%20%7C%7C%20%28once%20%26%26%20%21listeners%5Bi%5D%2Eonce%29%0A%20%20%20%20%20%20%20%20%20%20%7C%7C%20%28context%20%26%26%20listeners%5Bi%5D%2Econtext%20%21%3D%3D%20context%29%0A%20%20%20%20%20%20%20%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20events%2Epush%28listeners%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%0A%20%20%2F%2F%20Reset%20the%20array%2C%20or%20remove%20it%20completely%20if%20we%20have%20no%20more%20listeners%2E%0A%20%20%2F%2F%0A%20%20if%20%28events%2Elength%29%20%7B%0A%20%20%20%20this%2E%5Fevents%5Bevt%5D%20%3D%20events%2Elength%20%3D%3D%3D%201%20%3F%20events%5B0%5D%20%3A%20events%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20delete%20this%2E%5Fevents%5Bevt%5D%3B%0A%20%20%7D%0A%0A%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Remove%20all%20listeners%20or%20only%20the%20listeners%20for%20the%20specified%20event%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20The%20event%20want%20to%20remove%20all%20listeners%20for%2E%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2EremoveAllListeners%20%3D%20function%20removeAllListeners%28event%29%20%7B%0A%20%20if%20%28%21this%2E%5Fevents%29%20return%20this%3B%0A%0A%20%20if%20%28event%29%20delete%20this%2E%5Fevents%5Bprefix%20%3F%20prefix%20%2B%20event%20%3A%20event%5D%3B%0A%20%20else%20this%2E%5Fevents%20%3D%20prefix%20%3F%20%7B%7D%20%3A%20Object%2Ecreate%28null%29%3B%0A%0A%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2F%0A%2F%2F%20Alias%20methods%20names%20because%20people%20roll%20like%20that%2E%0A%2F%2F%0AEventEmitter%2Eprototype%2Eoff%20%3D%20EventEmitter%2Eprototype%2EremoveListener%3B%0AEventEmitter%2Eprototype%2EaddListener%20%3D%20EventEmitter%2Eprototype%2Eon%3B%0A%0A%2F%2F%0A%2F%2F%20This%20function%20doesn%27t%20apply%20anymore%2E%0A%2F%2F%0AEventEmitter%2Eprototype%2EsetMaxListeners%20%3D%20function%20setMaxListeners%28%29%20%7B%0A%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2F%0A%2F%2F%20Expose%20the%20prefix%2E%0A%2F%2F%0AEventEmitter%2Eprefixed%20%3D%20prefix%3B%0A%0A%2F%2F%0A%2F%2F%20Expose%20the%20module%2E%0A%2F%2F%0Aif%20%28%27undefined%27%20%21%3D%3D%20typeof%20module%29%20%7B%0A%20%20module%2Eexports%20%3D%20EventEmitter%3B%0A%7D%0A%0A%7D%2C%7B%7D%5D%2C11%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%20eslint%2Ddisable%20no%2Dunused%2Dvars%20%2A%2F%0A%27use%20strict%27%3B%0Avar%20hasOwnProperty%20%3D%20Object%2Eprototype%2EhasOwnProperty%3B%0Avar%20propIsEnumerable%20%3D%20Object%2Eprototype%2EpropertyIsEnumerable%3B%0A%0Afunction%20toObject%28val%29%20%7B%0A%09if%20%28val%20%3D%3D%3D%20null%20%7C%7C%20val%20%3D%3D%3D%20undefined%29%20%7B%0A%09%09throw%20new%20TypeError%28%27Object%2Eassign%20cannot%20be%20called%20with%20null%20or%20undefined%27%29%3B%0A%09%7D%0A%0A%09return%20Object%28val%29%3B%0A%7D%0A%0Amodule%2Eexports%20%3D%20Object%2Eassign%20%7C%7C%20function%20%28target%2C%20source%29%20%7B%0A%09var%20from%3B%0A%09var%20to%20%3D%20toObject%28target%29%3B%0A%09var%20symbols%3B%0A%0A%09for%20%28var%20s%20%3D%201%3B%20s%20%3C%20arguments%2Elength%3B%20s%2B%2B%29%20%7B%0A%09%09from%20%3D%20Object%28arguments%5Bs%5D%29%3B%0A%0A%09%09for%20%28var%20key%20in%20from%29%20%7B%0A%09%09%09if%20%28hasOwnProperty%2Ecall%28from%2C%20key%29%29%20%7B%0A%09%09%09%09to%5Bkey%5D%20%3D%20from%5Bkey%5D%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09if%20%28Object%2EgetOwnPropertySymbols%29%20%7B%0A%09%09%09symbols%20%3D%20Object%2EgetOwnPropertySymbols%28from%29%3B%0A%09%09%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20symbols%2Elength%3B%20i%2B%2B%29%20%7B%0A%09%09%09%09if%20%28propIsEnumerable%2Ecall%28from%2C%20symbols%5Bi%5D%29%29%20%7B%0A%09%09%09%09%09to%5Bsymbols%5Bi%5D%5D%20%3D%20from%5Bsymbols%5Bi%5D%5D%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%0A%09return%20to%3B%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C12%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Amodule%2Eexports%3D%7B%0A%20%20%22name%22%3A%20%22pixi%2Ejs%22%2C%0A%20%20%22version%22%3A%20%223%2E0%2E9%22%2C%0A%20%20%22description%22%3A%20%22Pixi%2Ejs%20is%20a%20fast%20lightweight%202D%20library%20that%20works%20across%20all%20devices%2E%22%2C%0A%20%20%22author%22%3A%20%22Mat%20Groves%22%2C%0A%20%20%22contributors%22%3A%20%5B%0A%20%20%20%20%22Chad%20Engler%20%3Cchad%40pantherdev%2Ecom%3E%22%2C%0A%20%20%20%20%22Richard%20Davey%20%3Crdavey%40gmail%2Ecom%3E%22%0A%20%20%5D%2C%0A%20%20%22main%22%3A%20%22%2E%2Fsrc%2Findex%2Ejs%22%2C%0A%20%20%22homepage%22%3A%20%22http%3A%2F%2Fgoodboydigital%2Ecom%2F%22%2C%0A%20%20%22bugs%22%3A%20%22https%3A%2F%2Fgithub%2Ecom%2Fpixijs%2Fpixi%2Ejs%2Fissues%22%2C%0A%20%20%22license%22%3A%20%22MIT%22%2C%0A%20%20%22repository%22%3A%20%7B%0A%20%20%20%20%22type%22%3A%20%22git%22%2C%0A%20%20%20%20%22url%22%3A%20%22https%3A%2F%2Fgithub%2Ecom%2Fpixijs%2Fpixi%2Ejs%2Egit%22%0A%20%20%7D%2C%0A%20%20%22scripts%22%3A%20%7B%0A%20%20%20%20%22start%22%3A%20%22gulp%20%26%26%20gulp%20watch%22%2C%0A%20%20%20%20%22test%22%3A%20%22gulp%20%26%26%20testem%20ci%22%2C%0A%20%20%20%20%22build%22%3A%20%22gulp%22%2C%0A%20%20%20%20%22docs%22%3A%20%22jsdoc%20%2Dc%20%2E%2Fgulp%2Futil%2Fjsdoc%2Econf%2Ejson%20%2DR%20README%2Emd%22%0A%20%20%7D%2C%0A%20%20%22files%22%3A%20%5B%0A%20%20%20%20%22bin%2F%22%2C%0A%20%20%20%20%22src%2F%22%2C%0A%20%20%20%20%22CONTRIBUTING%2Emd%22%2C%0A%20%20%20%20%22LICENSE%22%2C%0A%20%20%20%20%22package%2Ejson%22%2C%0A%20%20%20%20%22README%2Emd%22%0A%20%20%5D%2C%0A%20%20%22dependencies%22%3A%20%7B%0A%20%20%20%20%22async%22%3A%20%22%5E1%2E5%2E0%22%2C%0A%20%20%20%20%22brfs%22%3A%20%22%5E1%2E4%2E1%22%2C%0A%20%20%20%20%22earcut%22%3A%20%22%5E2%2E0%2E7%22%2C%0A%20%20%20%20%22eventemitter3%22%3A%20%22%5E1%2E1%2E1%22%2C%0A%20%20%20%20%22object%2Dassign%22%3A%20%22%5E4%2E0%2E1%22%2C%0A%20%20%20%20%22resource%2Dloader%22%3A%20%22%5E1%2E6%2E4%22%0A%20%20%7D%2C%0A%20%20%22devDependencies%22%3A%20%7B%0A%20%20%20%20%22browserify%22%3A%20%22%5E11%2E1%2E0%22%2C%0A%20%20%20%20%22chai%22%3A%20%22%5E3%2E2%2E0%22%2C%0A%20%20%20%20%22del%22%3A%20%22%5E2%2E0%2E2%22%2C%0A%20%20%20%20%22gulp%22%3A%20%22%5E3%2E9%2E0%22%2C%0A%20%20%20%20%22gulp%2Dcached%22%3A%20%22%5E1%2E1%2E0%22%2C%0A%20%20%20%20%22gulp%2Dconcat%22%3A%20%22%5E2%2E6%2E0%22%2C%0A%20%20%20%20%22gulp%2Ddebug%22%3A%20%22%5E2%2E1%2E0%22%2C%0A%20%20%20%20%22gulp%2Dheader%22%3A%20%22%5E1%2E7%2E1%22%2C%0A%20%20%20%20%22gulp%2Djshint%22%3A%20%22%5E1%2E11%2E2%22%2C%0A%20%20%20%20%22gulp%2Dmirror%22%3A%20%22%5E0%2E4%2E0%22%2C%0A%20%20%20%20%22gulp%2Dplumber%22%3A%20%22%5E1%2E0%2E1%22%2C%0A%20%20%20%20%22gulp%2Drename%22%3A%20%22%5E1%2E2%2E2%22%2C%0A%20%20%20%20%22gulp%2Dsourcemaps%22%3A%20%22%5E1%2E5%2E2%22%2C%0A%20%20%20%20%22gulp%2Duglify%22%3A%20%22%5E1%2E4%2E1%22%2C%0A%20%20%20%20%22gulp%2Dutil%22%3A%20%22%5E3%2E0%2E6%22%2C%0A%20%20%20%20%22jaguarjs%2Djsdoc%22%3A%20%22git%2Bhttps%3A%2F%2Fgithub%2Ecom%2Fdavidshimjs%2Fjaguarjs%2Djsdoc%2Egit%22%2C%0A%20%20%20%20%22jsdoc%22%3A%20%22%5E3%2E3%2E2%22%2C%0A%20%20%20%20%22jshint%2Dsummary%22%3A%20%22%5E0%2E4%2E0%22%2C%0A%20%20%20%20%22minimist%22%3A%20%22%5E1%2E2%2E0%22%2C%0A%20%20%20%20%22mocha%22%3A%20%22%5E2%2E3%2E2%22%2C%0A%20%20%20%20%22require%2Ddir%22%3A%20%22%5E0%2E3%2E0%22%2C%0A%20%20%20%20%22run%2Dsequence%22%3A%20%22%5E1%2E1%2E2%22%2C%0A%20%20%20%20%22testem%22%3A%20%22%5E0%2E9%2E4%22%2C%0A%20%20%20%20%22vinyl%2Dbuffer%22%3A%20%22%5E1%2E0%2E0%22%2C%0A%20%20%20%20%22vinyl%2Dsource%2Dstream%22%3A%20%22%5E1%2E1%2E0%22%2C%0A%20%20%20%20%22watchify%22%3A%20%22%5E3%2E4%2E0%22%0A%20%20%7D%2C%0A%20%20%22browserify%22%3A%20%7B%0A%20%20%20%20%22transform%22%3A%20%5B%0A%20%20%20%20%20%20%22brfs%22%0A%20%20%20%20%5D%0A%20%20%7D%0A%7D%0A%0A%7D%2C%7B%7D%5D%2C13%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%3B%0A%0A%2F%2F%20add%20some%20extra%20variables%20to%20the%20container%2E%2E%0AObject%2Eassign%28%0A%20%20%20%20core%2EDisplayObject%2Eprototype%2C%0A%20%20%20%20require%28%27%2E%2FaccessibleTarget%27%29%0A%29%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20The%20Accessibility%20manager%20reacreates%20the%20ability%20to%20tab%20and%20and%20have%20content%20read%20by%20screen%20readers%2E%20This%20is%20very%20important%20as%20it%20can%20possibly%20help%20people%20with%20disabilities%20access%20pixi%20content%2E%0A%20%2A%20Much%20like%20interaction%20any%20DisplayObject%20can%20be%20made%20accessible%2E%20This%20manager%20will%20map%20the%20events%20as%20if%20the%20mouse%20was%20being%20used%2C%20minimizing%20the%20efferot%20required%20to%20implement%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7CPIXI%2EWebGLRenderer%7D%20A%20reference%20to%20the%20current%20renderer%0A%20%2A%2F%0Afunction%20AccessibilityManager%28renderer%29%0A%7B%0A%09%2F%2F%20first%20we%20create%20a%20div%20that%20will%20sit%20over%20the%20pixi%20element%2E%20This%20is%20where%20the%20div%20overlays%20will%20go%2E%0A%20%20%20%20var%20div%20%3D%20document%2EcreateElement%28%27div%27%29%3B%0A%20%20%20%20%0A%20%20%20%20div%2Estyle%2Ewidth%20%3D%20100%20%2B%20%27px%27%3B%0A%20%20%20%20div%2Estyle%2Eheight%20%3D%20100%20%2B%20%27px%27%3B%0A%20%20%20%20div%2Estyle%2Eposition%20%3D%20%27absolute%27%3B%0A%20%20%20%20div%2Estyle%2Etop%20%3D%200%3B%0A%20%20%20%20div%2Estyle%2Eleft%20%3D%200%3B%0A%20%20%20%2F%2F%0A%20%20%20%20div%2Estyle%2EzIndex%20%3D%202%3B%0A%20%20%20%09%0A%20%20%20%09%2F%2A%2A%0A%20%20%20%09%20%2A%20This%20is%20the%20dom%20element%20that%20will%20sit%20over%20the%20pixi%20element%2E%20This%20is%20where%20the%20div%20overlays%20will%20go%2E%0A%20%20%20%09%20%2A%20%0A%20%20%20%09%20%2A%20%40type%20%7BHTMLElement%7D%0A%20%20%20%09%20%2A%20%40private%0A%20%20%20%09%20%2A%2F%0A%20%20%20%09this%2Ediv%20%3D%20div%3B%0A%0A%20%20%20%09%2F%2A%2A%0A%20%20%20%09%20%2A%20A%20simple%20pool%20for%20storing%20divs%2E%0A%20%20%20%09%20%2A%20%0A%20%20%20%09%20%2A%20%40type%20%7BArray%7D%0A%20%20%20%09%20%2A%20%40private%0A%20%20%20%09%20%2A%2F%0A%20%09this%2Epool%20%3D%20%5B%5D%3B%0A%0A%20%09%2F%2A%2A%0A%20%09%20%2A%20This%20is%20a%20tick%20used%20to%20check%20if%20an%20object%20is%20no%20longer%20being%20rendered%2E%0A%20%09%20%2A%20%0A%20%09%20%2A%20%40type%20%7BNumber%7D%0A%20%09%20%2A%20%40private%0A%20%09%20%2A%2F%0A%20%20%20%09this%2ErenderId%20%3D%200%3B%0A%0A%20%20%20%09%2F%2A%2A%0A%20%20%20%09%20%2A%20Setting%20this%20to%20true%20will%20visually%20show%20the%20divs%0A%20%20%20%09%20%2A%20%0A%20%20%20%09%20%2A%20%40type%20%7BBoolean%7D%0A%20%20%20%09%20%2A%2F%0A%20%20%20%09this%2Edebug%20%3D%20false%3B%0A%0A%20%20%09%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20renderer%20this%20accessibility%20manager%20works%20for%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ESystemRenderer%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%09this%2Erenderer%20%3D%20renderer%3B%0A%0A%20%20%20%09%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20array%20of%20currently%20active%20accessible%20items%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BArray%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%09this%2Echildren%20%3D%20%5B%5D%3B%0A%20%20%20%09%0A%20%20%20%09%2F%2A%2A%0A%20%20%20%20%20%2A%20pre%20bind%20the%20functions%2E%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%09this%2E%5FonKeyDown%20%3D%20this%2E%5FonKeyDown%2Ebind%28this%29%3B%0A%20%20%20%09this%2E%5FonMouseMove%20%3D%20this%2E%5FonMouseMove%2Ebind%28this%29%3B%0A%20%20%20%09%0A%20%20%20%09%2F%2A%2A%0A%20%20%20%20%20%2A%20stores%20the%20state%20of%20the%20manager%2E%20If%20there%20are%20no%20accessible%20objects%20or%20the%20mouse%20is%20moving%20the%20will%20be%20false%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BArray%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%09this%2EisActive%20%3D%20false%3B%0A%0A%0A%20%20%20%09%2F%2F%20let%20listen%20for%20tab%2E%2E%20once%20pressed%20we%20can%20fire%20up%20and%20show%20the%20accessibility%20layer%0A%20%20%20%09window%2EaddEventListener%28%27keydown%27%2C%20this%2E%5FonKeyDown%2C%20false%29%3B%0A%7D%0A%0A%0AAccessibilityManager%2Eprototype%2Econstructor%20%3D%20AccessibilityManager%3B%0Amodule%2Eexports%20%3D%20AccessibilityManager%3B%0A%0A%2F%2A%2A%0A%20%2A%20Activating%20will%20cause%20the%20Accessibility%20layer%20to%20be%20shown%2E%20This%20is%20called%20when%20a%20user%20preses%20the%20tab%20key%0A%20%2A%20%40private%0A%20%2A%2F%0AAccessibilityManager%2Eprototype%2Eactivate%20%3D%20function%28%29%0A%7B%0A%09if%28this%2EisActive%29%0A%09%7B%0A%09%09return%3B%0A%09%7D%0A%0A%09this%2EisActive%20%3D%20true%3B%0A%0A%09window%2Edocument%2EaddEventListener%28%27mousemove%27%2C%20this%2E%5FonMouseMove%2C%20true%29%3B%0A%09window%2EremoveEventListener%28%27keydown%27%2C%20this%2E%5FonKeyDown%2C%20false%29%3B%0A%0A%09this%2Erenderer%2Eon%28%27postrender%27%2C%20this%2Eupdate%2C%20this%29%3B%0A%0A%09this%2Erenderer%2Eview%2EparentNode%2EappendChild%28this%2Ediv%29%3B%09%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Deactivating%20will%20cause%20the%20Accessibility%20layer%20to%20be%20hidden%2E%20This%20is%20called%20when%20a%20user%20moves%20the%20mouse%0A%20%2A%20%40private%0A%20%2A%2F%0AAccessibilityManager%2Eprototype%2Edeactivate%20%3D%20function%28%29%0A%7B%0A%09if%28%21this%2EisActive%29%0A%09%7B%0A%09%09return%3B%0A%09%7D%0A%0A%09this%2EisActive%20%3D%20false%3B%0A%0A%09window%2Edocument%2EremoveEventListener%28%27mousemove%27%2C%20this%2E%5FonMouseMove%29%3B%0A%09window%2EaddEventListener%28%27keydown%27%2C%20this%2E%5FonKeyDown%2C%20false%29%3B%0A%0A%09this%2Erenderer%2Eoff%28%27postrender%27%2C%20this%2Eupdate%29%3B%0A%0A%09this%2Ediv%2EparentNode%2EremoveChild%28this%2Ediv%29%3B%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20This%20recursive%20function%20will%20run%20throught%20he%20scene%20graph%20and%20add%20any%20new%20accessible%20objects%20to%20the%20DOM%20layer%2E%0A%20%2A%20%40param%20element%20%7BPIXI%2EContainer%7CPIXI%2ESprite%7CPIXI%2Eextras%2ETilingSprite%7D%20the%20DisplayObject%20to%20check%2E%0A%20%2A%20%40private%0A%20%2A%2F%0AAccessibilityManager%2Eprototype%2EupdateAccessibleObjects%20%3D%20function%28displayObject%29%0A%7B%0A%09if%28%21displayObject%2Evisible%29%0A%09%7B%0A%09%09return%3B%0A%09%7D%0A%0A%09if%28displayObject%2Eaccessible%20%26%26%20displayObject%2Einteractive%29%0A%09%7B%0A%09%09if%28%21displayObject%2E%5FaccessibleActive%29%0A%09%09%7B%0A%09%09%09this%2EaddChild%28displayObject%29%3B%0A%09%09%7D%0A%09%20%20%20%09%0A%09%20%20%20%09displayObject%2ErenderId%20%3D%20this%2ErenderId%3B%0A%09%7D%0A%0A%09var%20children%20%3D%20displayObject%2Echildren%3B%0A%0A%09for%20%28var%20i%20%3D%20children%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%20%7B%0A%09%09%0A%09%09this%2EupdateAccessibleObjects%28children%5Bi%5D%29%3B%0A%09%7D%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Before%20each%20render%20this%20function%20will%20ensure%20that%20all%20divs%20are%20mapped%20correctly%20to%20their%20DisplayObjects%0A%20%2A%20%40private%0A%20%2A%2F%0AAccessibilityManager%2Eprototype%2Eupdate%20%3D%20function%28%29%0A%7B%0A%0A%09%2F%2F%20update%20children%2E%2E%2E%0A%09this%2EupdateAccessibleObjects%28this%2Erenderer%2E%5FlastObjectRendered%29%3B%0A%0A%09var%20rect%20%3D%20this%2Erenderer%2Eview%2EgetBoundingClientRect%28%29%3B%0A%09var%20sx%20%3D%20rect%2Ewidth%20%20%2F%20this%2Erenderer%2Ewidth%3B%0A%09var%20sy%20%3D%20rect%2Eheight%20%2F%20this%2Erenderer%2Eheight%3B%0A%0A%09var%20div%20%3D%20this%2Ediv%3B%0A%0A%09div%2Estyle%2Eleft%20%3D%20rect%2Eleft%20%2B%20%27px%27%3B%0A%09div%2Estyle%2Etop%20%3D%20rect%2Etop%20%2B%20%27px%27%3B%0A%09div%2Estyle%2Ewidth%20%3D%20this%2Erenderer%2Ewidth%20%2B%20%27px%27%3B%0A%09div%2Estyle%2Eheight%20%3D%20this%2Erenderer%2Eheight%20%2B%20%27px%27%3B%0A%0A%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Echildren%2Elength%3B%20i%2B%2B%29%0A%09%7B%0A%0A%09%09var%20child%20%3D%20this%2Echildren%5Bi%5D%3B%0A%0A%09%09if%28child%2ErenderId%20%21%3D%3D%20this%2ErenderId%29%0A%09%09%7B%0A%09%09%09child%2E%5FaccessibleActive%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20core%2Eutils%2EremoveItems%28this%2Echildren%2C%20i%2C%201%29%3B%0A%09%09%09this%2Ediv%2EremoveChild%28%20child%2E%5FaccessibleDiv%20%29%3B%0A%09%09%09this%2Epool%2Epush%28child%2E%5FaccessibleDiv%29%3B%0A%09%09%09child%2E%5FaccessibleDiv%20%3D%20null%3B%0A%0A%09%09%09i%2D%2D%3B%0A%0A%09%09%09if%28this%2Echildren%2Elength%20%3D%3D%3D%200%29%0A%09%09%09%7B%0A%09%09%09%09this%2Edeactivate%28%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09else%0A%09%09%7B%0A%09%09%09%2F%2F%20map%20div%20to%20display%2E%2E%0A%09%09%09div%20%3D%20child%2E%5FaccessibleDiv%3B%0A%09%09%09var%20hitArea%20%3D%20child%2EhitArea%3B%0A%09%09%09var%20wt%20%3D%20child%2EworldTransform%3B%0A%0A%09%09%09if%28child%2EhitArea%29%0A%09%09%09%7B%0A%09%09%09%09div%2Estyle%2Eleft%20%3D%20%28%28wt%2Etx%20%2B%20%28hitArea%2Ex%20%2A%20wt%2Ea%29%29%20%2A%20sx%29%20%2B%20%27px%27%3B%0A%09%09%09%09div%2Estyle%2Etop%20%3D%20%20%28%28wt%2Ety%20%2B%20%28hitArea%2Ey%20%2A%20wt%2Ed%29%29%20%2A%20sy%29%20%2B%20%20%27px%27%3B%0A%0A%09%09%09%09div%2Estyle%2Ewidth%20%3D%20%28hitArea%2Ewidth%20%2A%20wt%2Ea%20%2A%20sx%29%20%2B%20%27px%27%3B%0A%09%09%09%09div%2Estyle%2Eheight%20%3D%20%28hitArea%2Eheight%20%2A%20wt%2Ed%20%2A%20sy%29%20%2B%20%27px%27%3B%0A%09%09%09%0A%09%09%09%7D%0A%09%09%09else%0A%09%09%09%7B%0A%09%09%09%09hitArea%20%3D%20child%2EgetBounds%28%29%3B%0A%0A%09%09%09%09this%2EcapHitArea%28hitArea%29%3B%0A%0A%09%09%09%09div%2Estyle%2Eleft%20%3D%20%28hitArea%2Ex%20%2A%20sx%29%20%2B%20%27px%27%3B%0A%09%09%09%09div%2Estyle%2Etop%20%3D%20%20%28hitArea%2Ey%20%2A%20sy%29%20%2B%20%20%27px%27%3B%0A%0A%09%09%09%09div%2Estyle%2Ewidth%20%3D%20%28hitArea%2Ewidth%20%2A%20sx%29%20%2B%20%27px%27%3B%0A%09%09%09%09div%2Estyle%2Eheight%20%3D%20%28hitArea%2Eheight%20%2A%20sy%29%20%2B%20%27px%27%3B%0A%09%09%09%7D%09%09%0A%09%09%7D%0A%09%7D%0A%0A%09%2F%2F%20increment%20the%20render%20id%2E%2E%0A%09this%2ErenderId%2B%2B%3B%0A%7D%3B%0A%0AAccessibilityManager%2Eprototype%2EcapHitArea%20%3D%20function%20%28hitArea%29%0A%7B%0A%20%20%20%20if%20%28hitArea%2Ex%20%3C%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20hitArea%2Ewidth%20%2B%3D%20hitArea%2Ex%3B%0A%20%20%20%20%20%20%20%20hitArea%2Ex%20%3D%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28hitArea%2Ey%20%3C%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20hitArea%2Eheight%20%2B%3D%20hitArea%2Ey%3B%0A%20%20%20%20%20%20%20%20hitArea%2Ey%20%3D%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%20hitArea%2Ex%20%2B%20hitArea%2Ewidth%20%3E%20this%2Erenderer%2Ewidth%20%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20hitArea%2Ewidth%20%3D%20this%2Erenderer%2Ewidth%20%2D%20hitArea%2Ex%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%20hitArea%2Ey%20%2B%20hitArea%2Eheight%20%3E%20this%2Erenderer%2Eheight%20%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20hitArea%2Eheight%20%3D%20this%2Erenderer%2Eheight%20%2D%20hitArea%2Ey%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Adds%20a%20DisplayObject%20to%20the%20accessibility%20manager%0A%20%2A%20%40private%0A%20%2A%2F%0AAccessibilityManager%2Eprototype%2EaddChild%20%3D%20function%28displayObject%29%0A%7B%0A%2F%2F%09this%2Eactivate%28%29%3B%0A%09%0A%09var%20div%20%3D%20this%2Epool%2Epop%28%29%3B%0A%0A%09if%28%21div%29%0A%09%7B%0A%09%09div%20%3D%20document%2EcreateElement%28%27button%27%29%3B%20%0A%0A%09%20%20%20%20div%2Estyle%2Ewidth%20%3D%20100%20%2B%20%27px%27%3B%0A%09%20%20%20%20div%2Estyle%2Eheight%20%3D%20100%20%2B%20%27px%27%3B%0A%09%20%20%20%20div%2Estyle%2EbackgroundColor%20%3D%20this%2Edebug%20%3F%20%27rgba%28255%2C0%2C0%2C0%2E5%29%27%20%3A%20%27transparent%27%3B%0A%09%20%20%20%20div%2Estyle%2Eposition%20%3D%20%27absolute%27%3B%0A%09%20%20%20%20div%2Estyle%2EzIndex%20%3D%202%3B%0A%09%20%20%20%20div%2Estyle%2EborderStyle%20%3D%20%27none%27%3B%0A%0A%09%20%20%20%20%0A%09%20%20%20%20div%2EaddEventListener%28%27click%27%2C%20this%2E%5FonClick%2Ebind%28this%29%29%3B%0A%09%20%20%20%20div%2EaddEventListener%28%27focus%27%2C%20this%2E%5FonFocus%2Ebind%28this%29%29%3B%0A%09%20%20%20%20div%2EaddEventListener%28%27focusout%27%2C%20this%2E%5FonFocusOut%2Ebind%28this%29%29%3B%0A%09%7D%0A%09%20%20%20%09%0A%0A%0A%0A%09div%2Etitle%20%3D%20displayObject%2EaccessibleTitle%20%7C%7C%20%27displayObject%20%27%20%2B%20this%2EtabIndex%3B%0A%0A%09%2F%2F%0A%09%0A%09displayObject%2E%5FaccessibleActive%20%3D%20true%3B%0A%09displayObject%2E%5FaccessibleDiv%20%3D%20div%3B%0A%09div%2EdisplayObject%20%3D%20displayObject%3B%0A%0A%0A%09this%2Echildren%2Epush%28displayObject%29%3B%0A%09this%2Ediv%2EappendChild%28%20displayObject%2E%5FaccessibleDiv%20%29%3B%0A%09displayObject%2E%5FaccessibleDiv%2EtabIndex%20%3D%20displayObject%2EtabIndex%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Maps%20the%20div%20button%20press%20to%20pixi%27s%20InteractionManager%20%28click%29%0A%20%2A%20%40private%0A%20%2A%2F%0AAccessibilityManager%2Eprototype%2E%5FonClick%20%3D%20function%28e%29%0A%7B%0A%09var%20interactionManager%20%3D%20this%2Erenderer%2Eplugins%2Einteraction%3B%0A%09interactionManager%2EdispatchEvent%28e%2Etarget%2EdisplayObject%2C%20%27click%27%2C%20interactionManager%2EeventData%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Maps%20the%20div%20focus%20events%20to%20pixis%20InteractionManager%20%28mouseover%29%0A%20%2A%20%40private%0A%20%2A%2F%0AAccessibilityManager%2Eprototype%2E%5FonFocus%20%3D%20function%28e%29%0A%7B%0A%09var%20interactionManager%20%3D%20this%2Erenderer%2Eplugins%2Einteraction%3B%0A%09interactionManager%2EdispatchEvent%28e%2Etarget%2EdisplayObject%2C%20%27mouseover%27%2C%20interactionManager%2EeventData%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Maps%20the%20div%20focus%20events%20to%20pixis%20InteractionManager%20%28mouseout%29%0A%20%2A%20%40private%0A%20%2A%2F%0AAccessibilityManager%2Eprototype%2E%5FonFocusOut%20%3D%20function%28e%29%0A%7B%0A%09var%20interactionManager%20%3D%20this%2Erenderer%2Eplugins%2Einteraction%3B%0A%09interactionManager%2EdispatchEvent%28e%2Etarget%2EdisplayObject%2C%20%27mouseout%27%2C%20interactionManager%2EeventData%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Is%20called%20when%20a%20key%20is%20pressed%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AAccessibilityManager%2Eprototype%2E%5FonKeyDown%20%3D%20function%28e%29%0A%7B%0A%09if%28e%2EkeyCode%20%21%3D%3D%209%29%0A%09%7B%0A%09%09return%3B%0A%09%7D%0A%0A%09this%2Eactivate%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Is%20called%20when%20the%20mouse%20moves%20across%20the%20renderer%20element%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AAccessibilityManager%2Eprototype%2E%5FonMouseMove%20%3D%20function%28%29%0A%7B%0A%09this%2Edeactivate%28%29%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20accessibility%20manager%0A%20%2A%0A%20%2A%2F%0AAccessibilityManager%2Eprototype%2Edestroy%20%3D%20function%20%28%29%20%0A%7B%0A%09this%2Ediv%20%3D%20null%3B%0A%0A%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Echildren%2Elength%3B%20i%2B%2B%29%0A%09%7B%0A%09%09this%2Echildren%5Bi%5D%2Ediv%20%3D%20null%3B%0A%09%7D%0A%0A%09%0A%09window%2Edocument%2EremoveEventListener%28%27mousemove%27%2C%20this%2E%5FonMouseMove%29%3B%0A%09window%2EremoveEventListener%28%27keydown%27%2C%20this%2E%5FonKeyDown%29%3B%0A%09%09%0A%09this%2Epool%20%3D%20null%3B%0A%09this%2Echildren%20%3D%20null%3B%0A%09this%2Erenderer%20%3D%20null%3B%0A%0A%7D%3B%0A%0Acore%2EWebGLRenderer%2EregisterPlugin%28%27accessibility%27%2C%20AccessibilityManager%29%3B%0Acore%2ECanvasRenderer%2EregisterPlugin%28%27accessibility%27%2C%20AccessibilityManager%29%3B%0A%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%2C%22%2E%2FaccessibleTarget%22%3A14%7D%5D%2C14%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20Default%20property%20values%20of%20accessible%20objects%0A%20%2A%20used%20by%20%7B%40link%20PIXI%2Eaccessibility%2EAccessibilityManager%7D%2E%0A%20%2A%0A%20%2A%20%40mixin%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40example%0A%20%2A%20%20%20%20%20%20function%20MyObject%28%29%20%7B%7D%0A%20%2A%0A%20%2A%20%20%20%20%20%20Object%2Eassign%28%0A%20%2A%20%20%20%20%20%20%20%20%20%20MyObject%2Eprototype%2C%0A%20%2A%20%20%20%20%20%20%20%20%20%20PIXI%2Eaccessibility%2EaccessibleTarget%0A%20%2A%20%20%20%20%20%20%29%3B%0A%20%2A%2F%0Avar%20accessibleTarget%20%3D%20%7B%0A%20%20%20%20%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Needs%20docs%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20accessible%3Afalse%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Needs%20docs%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20accessibleTitle%3Anull%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Needs%20docs%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20tabIndex%3A0%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Needs%20docs%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FaccessibleActive%3Afalse%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Needs%20docs%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FaccessibleDiv%3Afalse%0A%0A%7D%3B%0A%0Amodule%2Eexports%20%3D%20accessibleTarget%3B%0A%0A%7D%2C%7B%7D%5D%2C15%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20%40file%20%20%20%20%20%20%20%20Main%20export%20of%20the%20PIXI%20accessibility%20library%0A%20%2A%20%40author%20%20%20%20%20%20Mat%20Groves%20%3Cmat%40goodboydigital%2Ecom%3E%0A%20%2A%20%40copyright%20%20%202013%2D2015%20GoodBoyDigital%0A%20%2A%20%40license%20%20%20%20%20%7B%40link%20https%3A%2F%2Fgithub%2Ecom%2Fpixijs%2Fpixi%2Ejs%2Fblob%2Fmaster%2FLICENSE%7CMIT%20License%7D%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20%40namespace%20PIXI%2Einteraction%0A%20%2A%2F%0Amodule%2Eexports%20%3D%20%7B%0A%20%20%20%20accessibleTarget%3A%20%20%20%20%20require%28%27%2E%2FaccessibleTarget%27%29%2C%0A%20%20%20%20AccessibilityManager%3A%20require%28%27%2E%2FAccessibilityManager%27%29%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FAccessibilityManager%22%3A13%2C%22%2E%2FaccessibleTarget%22%3A14%7D%5D%2C16%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20Constant%20values%20used%20in%20pixi%0A%20%2A%0A%20%2A%20%40lends%20PIXI%0A%20%2A%2F%0Avar%20CONST%20%3D%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20String%20of%20the%20current%20PIXI%20version%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40property%20%7Bstring%7D%20VERSION%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20VERSION%3A%20require%28%27%2E%2E%2F%2E%2E%2Fpackage%2Ejson%27%29%2Eversion%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20PI%5F2%20%2D%20Two%20Pi%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20PI%5F2%3A%20Math%2EPI%20%2A%202%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20RAD%5FTO%5FDEG%20%2D%20Constant%20conversion%20factor%20for%20converting%20radians%20to%20degrees%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20RAD%5FTO%5FDEG%3A%20180%20%2F%20Math%2EPI%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40property%20%7BNumber%7D%20DEG%5FTO%5FRAD%20%2D%20Constant%20conversion%20factor%20for%20converting%20degrees%20to%20radians%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20DEG%5FTO%5FRAD%3A%20Math%2EPI%20%2F%20180%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Target%20frames%20per%20millisecond%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20TARGET%5FFPMS%3D0%2E06%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20TARGET%5FFPMS%3A%200%2E06%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Constant%20to%20identify%20the%20Renderer%20Type%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40property%20%7Bobject%7D%20RENDERER%5FTYPE%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20RENDERER%5FTYPE%2EUNKNOWN%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20RENDERER%5FTYPE%2EWEBGL%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20RENDERER%5FTYPE%2ECANVAS%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20RENDERER%5FTYPE%3A%20%7B%0A%20%20%20%20%20%20%20%20UNKNOWN%3A%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20WEBGL%3A%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%20CANVAS%3A%20%20%20%20%202%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Various%20blend%20modes%20supported%20by%20PIXI%2E%20IMPORTANT%20%2D%20The%20WebGL%20renderer%20only%20supports%0A%20%20%20%20%20%2A%20the%20NORMAL%2C%20ADD%2C%20MULTIPLY%20and%20SCREEN%20blend%20modes%2E%20Anything%20else%20will%20silently%20act%20like%0A%20%20%20%20%20%2A%20NORMAL%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40property%20%7Bobject%7D%20BLEND%5FMODES%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2ENORMAL%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2EADD%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2EMULTIPLY%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2ESCREEN%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2EOVERLAY%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2EDARKEN%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2ELIGHTEN%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2ECOLOR%5FDODGE%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2ECOLOR%5FBURN%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2EHARD%5FLIGHT%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2ESOFT%5FLIGHT%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2EDIFFERENCE%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2EEXCLUSION%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2EHUE%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2ESATURATION%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2ECOLOR%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20BLEND%5FMODES%2ELUMINOSITY%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20BLEND%5FMODES%3A%20%7B%0A%20%20%20%20%20%20%20%20NORMAL%3A%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20ADD%3A%20%20%20%20%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%20MULTIPLY%3A%20%20%20%20%20%20%202%2C%0A%20%20%20%20%20%20%20%20SCREEN%3A%20%20%20%20%20%20%20%20%203%2C%0A%20%20%20%20%20%20%20%20OVERLAY%3A%20%20%20%20%20%20%20%204%2C%0A%20%20%20%20%20%20%20%20DARKEN%3A%20%20%20%20%20%20%20%20%205%2C%0A%20%20%20%20%20%20%20%20LIGHTEN%3A%20%20%20%20%20%20%20%206%2C%0A%20%20%20%20%20%20%20%20COLOR%5FDODGE%3A%20%20%20%207%2C%0A%20%20%20%20%20%20%20%20COLOR%5FBURN%3A%20%20%20%20%208%2C%0A%20%20%20%20%20%20%20%20HARD%5FLIGHT%3A%20%20%20%20%209%2C%0A%20%20%20%20%20%20%20%20SOFT%5FLIGHT%3A%20%20%20%20%2010%2C%0A%20%20%20%20%20%20%20%20DIFFERENCE%3A%20%20%20%20%2011%2C%0A%20%20%20%20%20%20%20%20EXCLUSION%3A%20%20%20%20%20%2012%2C%0A%20%20%20%20%20%20%20%20HUE%3A%20%20%20%20%20%20%20%20%20%20%20%2013%2C%0A%20%20%20%20%20%20%20%20SATURATION%3A%20%20%20%20%2014%2C%0A%20%20%20%20%20%20%20%20COLOR%3A%20%20%20%20%20%20%20%20%20%2015%2C%0A%20%20%20%20%20%20%20%20LUMINOSITY%3A%20%20%20%20%2016%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Various%20webgl%20draw%20modes%2E%20These%20can%20be%20used%20to%20specify%20which%20GL%20drawMode%20to%20use%0A%20%20%20%20%20%2A%20under%20certain%20situations%20and%20renderers%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40property%20%7Bobject%7D%20DRAW%5FMODES%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20DRAW%5FMODES%2EPOINTS%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20DRAW%5FMODES%2ELINES%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20DRAW%5FMODES%2ELINE%5FLOOP%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20DRAW%5FMODES%2ELINE%5FSTRIP%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20DRAW%5FMODES%2ETRIANGLES%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20DRAW%5FMODES%2ETRIANGLE%5FSTRIP%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20DRAW%5FMODES%2ETRIANGLE%5FFAN%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20DRAW%5FMODES%3A%20%7B%0A%20%20%20%20%20%20%20%20POINTS%3A%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20LINES%3A%20%20%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%20LINE%5FLOOP%3A%20%20%20%20%20%202%2C%0A%20%20%20%20%20%20%20%20LINE%5FSTRIP%3A%20%20%20%20%203%2C%0A%20%20%20%20%20%20%20%20TRIANGLES%3A%20%20%20%20%20%204%2C%0A%20%20%20%20%20%20%20%20TRIANGLE%5FSTRIP%3A%205%2C%0A%20%20%20%20%20%20%20%20TRIANGLE%5FFAN%3A%20%20%206%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20scale%20modes%20that%20are%20supported%20by%20pixi%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20The%20DEFAULT%20scale%20mode%20affects%20the%20default%20scaling%20mode%20of%20future%20operations%2E%0A%20%20%20%20%20%2A%20It%20can%20be%20re%2Dassigned%20to%20either%20LINEAR%20or%20NEAREST%2C%20depending%20upon%20suitability%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40property%20%7Bobject%7D%20SCALE%5FMODES%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20SCALE%5FMODES%2EDEFAULT%3DLINEAR%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20SCALE%5FMODES%2ELINEAR%20Smooth%20scaling%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20SCALE%5FMODES%2ENEAREST%20Pixelating%20scaling%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20SCALE%5FMODES%3A%20%7B%0A%20%20%20%20%20%20%20%20DEFAULT%3A%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20LINEAR%3A%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20NEAREST%3A%20%20%20%201%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20prefix%20that%20denotes%20a%20URL%20is%20for%20a%20retina%20asset%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40property%20%7Bstring%7D%20RETINA%5FPREFIX%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%2F%2Fexample%3A%20%27%402x%27%2C%0A%20%20%20%20RETINA%5FPREFIX%3A%20%2F%40%28%2E%2B%29x%2F%2C%0A%0A%20%20%20%20RESOLUTION%3A1%2C%0A%0A%20%20%20%20FILTER%5FRESOLUTION%3A1%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20default%20render%20options%20if%20none%20are%20supplied%20to%20%7B%40link%20PIXI%2EWebGLRenderer%7D%0A%20%20%20%20%20%2A%20or%20%7B%40link%20PIXI%2ECanvasRenderer%7D%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40property%20%7Bobject%7D%20DEFAULT%5FRENDER%5FOPTIONS%0A%20%20%20%20%20%2A%20%40property%20%7BHTMLCanvasElement%7D%20DEFAULT%5FRENDER%5FOPTIONS%2Eview%3Dnull%0A%20%20%20%20%20%2A%20%40property%20%7Bboolean%7D%20DEFAULT%5FRENDER%5FOPTIONS%2Etransparent%3Dfalse%0A%20%20%20%20%20%2A%20%40property%20%7Bboolean%7D%20DEFAULT%5FRENDER%5FOPTIONS%2Eantialias%3Dfalse%0A%20%20%20%20%20%2A%20%40property%20%7Bboolean%7D%20DEFAULT%5FRENDER%5FOPTIONS%2EforceFXAA%3Dfalse%0A%20%20%20%20%20%2A%20%40property%20%7Bboolean%7D%20DEFAULT%5FRENDER%5FOPTIONS%2EpreserveDrawingBuffer%3Dfalse%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20DEFAULT%5FRENDER%5FOPTIONS%2Eresolution%3D1%0A%20%20%20%20%20%2A%20%40property%20%7Bnumber%7D%20DEFAULT%5FRENDER%5FOPTIONS%2EbackgroundColor%3D0x000000%0A%20%20%20%20%20%2A%20%40property%20%7Bboolean%7D%20DEFAULT%5FRENDER%5FOPTIONS%2EclearBeforeRender%3Dtrue%0A%20%20%20%20%20%2A%20%40property%20%7Bboolean%7D%20DEFAULT%5FRENDER%5FOPTIONS%2EautoResize%3Dfalse%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20DEFAULT%5FRENDER%5FOPTIONS%3A%20%7B%0A%20%20%20%20%20%20%20%20view%3A%20null%2C%0A%20%20%20%20%20%20%20%20resolution%3A%201%2C%0A%20%20%20%20%20%20%20%20antialias%3A%20false%2C%0A%20%20%20%20%20%20%20%20forceFXAA%3A%20false%2C%0A%20%20%20%20%20%20%20%20autoResize%3A%20false%2C%0A%20%20%20%20%20%20%20%20transparent%3A%20false%2C%0A%20%20%20%20%20%20%20%20backgroundColor%3A%200x000000%2C%0A%20%20%20%20%20%20%20%20clearBeforeRender%3A%20true%2C%0A%20%20%20%20%20%20%20%20preserveDrawingBuffer%3A%20false%2C%0A%20%20%20%20%20%20%20%20roundPixels%3A%20false%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Constants%20that%20identify%20shapes%2C%20mainly%20to%20prevent%20%60instanceof%60%20calls%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40property%20%7Bobject%7D%20SHAPES%0A%20%20%20%20%20%2A%20%40property%20%7Bobject%7D%20SHAPES%2EPOLY%3D0%0A%20%20%20%20%20%2A%20%40property%20%7Bobject%7D%20SHAPES%2ERECT%3D1%0A%20%20%20%20%20%2A%20%40property%20%7Bobject%7D%20SHAPES%2ECIRC%3D2%0A%20%20%20%20%20%2A%20%40property%20%7Bobject%7D%20SHAPES%2EELIP%3D3%0A%20%20%20%20%20%2A%20%40property%20%7Bobject%7D%20SHAPES%2ERREC%3D4%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20SHAPES%3A%20%7B%0A%20%20%20%20%20%20%20%20POLY%3A%200%2C%0A%20%20%20%20%20%20%20%20RECT%3A%201%2C%0A%20%20%20%20%20%20%20%20CIRC%3A%202%2C%0A%20%20%20%20%20%20%20%20ELIP%3A%203%2C%0A%20%20%20%20%20%20%20%20RREC%3A%204%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2F%20TODO%3A%20maybe%20change%20to%20SPRITE%2EBATCH%5FSIZE%3A%202000%0A%20%20%20%20%2F%2F%20TODO%3A%20maybe%20add%20PARTICLE%2EBATCH%5FSIZE%3A%2015000%0A%20%20%20%20SPRITE%5FBATCH%5FSIZE%3A%202000%20%2F%2Fnice%20balance%20between%20mobile%20and%20desktop%20machines%0A%7D%3B%0A%0Amodule%2Eexports%20%3D%20CONST%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fpackage%2Ejson%22%3A12%7D%5D%2C17%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20math%20%3D%20require%28%27%2E%2E%2Fmath%27%29%2C%0A%20%20%20%20utils%20%3D%20require%28%27%2E%2E%2Futils%27%29%2C%0A%20%20%20%20DisplayObject%20%3D%20require%28%27%2E%2FDisplayObject%27%29%2C%0A%20%20%20%20RenderTexture%20%3D%20require%28%27%2E%2E%2Ftextures%2FRenderTexture%27%29%2C%0A%20%20%20%20%5FtempMatrix%20%3D%20new%20math%2EMatrix%28%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20Container%20represents%20a%20collection%20of%20display%20objects%2E%0A%20%2A%20It%20is%20the%20base%20class%20of%20all%20display%20objects%20that%20act%20as%20a%20container%20for%20other%20objects%2E%0A%20%2A%0A%20%2A%60%60%60js%0A%20%2A%20var%20container%20%3D%20new%20PIXI%2EContainer%28%29%3B%0A%20%2A%20container%2EaddChild%28sprite%29%3B%0A%20%2A%20%60%60%60%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EDisplayObject%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%2F%0Afunction%20Container%28%29%0A%7B%0A%20%20%20%20DisplayObject%2Ecall%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20array%20of%20children%20of%20this%20container%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EDisplayObject%5B%5D%7D%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Echildren%20%3D%20%5B%5D%3B%0A%7D%0A%0A%2F%2F%20constructor%0AContainer%2Eprototype%20%3D%20Object%2Ecreate%28DisplayObject%2Eprototype%29%3B%0AContainer%2Eprototype%2Econstructor%20%3D%20Container%3B%0Amodule%2Eexports%20%3D%20Container%3B%0A%0AObject%2EdefineProperties%28Container%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20width%20of%20the%20Container%2C%20setting%20this%20will%20actually%20modify%20the%20scale%20to%20achieve%20the%20value%20set%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EContainer%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20width%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Escale%2Ex%20%2A%20this%2EgetLocalBounds%28%29%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20width%20%3D%20this%2EgetLocalBounds%28%29%2Ewidth%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28width%20%21%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Escale%2Ex%20%3D%20value%20%2F%20width%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Escale%2Ex%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fwidth%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20Container%2C%20setting%20this%20will%20actually%20modify%20the%20scale%20to%20achieve%20the%20value%20set%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EContainer%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20height%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20this%2Escale%2Ey%20%2A%20this%2EgetLocalBounds%28%29%2Eheight%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20height%20%3D%20this%2EgetLocalBounds%28%29%2Eheight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28height%20%21%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Escale%2Ey%20%3D%20value%20%2F%20height%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Escale%2Ey%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fheight%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Overridable%20method%20that%20can%20be%20used%20by%20Container%20subclasses%20whenever%20the%20children%20array%20is%20modified%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AContainer%2Eprototype%2EonChildrenChange%20%3D%20function%20%28%29%20%7B%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Adds%20a%20child%20to%20the%20container%2E%0A%20%2A%20%0A%20%2A%20You%20can%20also%20add%20multple%20items%20like%20so%3A%20myContainer%2EaddChild%28thinkOne%2C%20thingTwo%2C%20thingThree%29%0A%20%2A%20%40param%20child%20%7BPIXI%2EDisplayObject%7D%20The%20DisplayObject%20to%20add%20to%20the%20container%0A%20%2A%20%40return%20%7BPIXI%2EDisplayObject%7D%20The%20child%20that%20was%20added%2E%0A%20%2A%2F%0AContainer%2Eprototype%2EaddChild%20%3D%20function%20%28child%29%0A%7B%20%0A%20%20%20%20var%20argumentsLength%20%3D%20arguments%2Elength%3B%0A%0A%20%20%20%20%2F%2F%20if%20there%20is%20only%20one%20argument%20we%20can%20bypass%20looping%20through%20the%20them%0A%20%20%20%20if%28argumentsLength%20%3E%201%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20loop%20through%20the%20arguments%20property%20and%20add%20all%20children%0A%20%20%20%20%20%20%20%20%2F%2F%20use%20it%20the%20right%20way%20%28%2Elength%20and%20%5Bi%5D%29%20so%20that%20this%20function%20can%20still%20be%20optimised%20by%20JS%20runtimes%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20argumentsLength%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EaddChild%28%20arguments%5Bi%5D%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20%20%20%20%20%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20the%20child%20has%20a%20parent%20then%20lets%20remove%20it%20as%20Pixi%20objects%20can%20only%20exist%20in%20one%20place%0A%20%20%20%20%20%20%20%20if%20%28child%2Eparent%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20child%2Eparent%2EremoveChild%28child%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20child%2Eparent%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this%2Echildren%2Epush%28child%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%20%2D%20lets%20either%20do%20all%20callbacks%20or%20all%20events%2E%2E%20not%20both%21%0A%20%20%20%20%20%20%20%20this%2EonChildrenChange%28this%2Echildren%2Elength%2D1%29%3B%0A%20%20%20%20%20%20%20%20child%2Eemit%28%27added%27%2C%20this%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20child%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Adds%20a%20child%20to%20the%20container%20at%20a%20specified%20index%2E%20If%20the%20index%20is%20out%20of%20bounds%20an%20error%20will%20be%20thrown%0A%20%2A%0A%20%2A%20%40param%20child%20%7BPIXI%2EDisplayObject%7D%20The%20child%20to%20add%0A%20%2A%20%40param%20index%20%7Bnumber%7D%20The%20index%20to%20place%20the%20child%20in%0A%20%2A%20%40return%20%7BPIXI%2EDisplayObject%7D%20The%20child%20that%20was%20added%2E%0A%20%2A%2F%0AContainer%2Eprototype%2EaddChildAt%20%3D%20function%20%28child%2C%20index%29%0A%7B%0A%20%20%20%20if%20%28index%20%3E%3D%200%20%26%26%20index%20%3C%3D%20this%2Echildren%2Elength%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28child%2Eparent%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20child%2Eparent%2EremoveChild%28child%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20child%2Eparent%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%20%20this%2Echildren%2Esplice%28index%2C%200%2C%20child%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%20%2D%20lets%20either%20do%20all%20callbacks%20or%20all%20events%2E%2E%20not%20both%21%0A%20%20%20%20%20%20%20%20this%2EonChildrenChange%28index%29%3B%0A%20%20%20%20%20%20%20%20child%2Eemit%28%27added%27%2C%20this%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20child%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28child%20%2B%20%27addChildAt%3A%20The%20index%20%27%2B%20index%20%2B%27%20supplied%20is%20out%20of%20bounds%20%27%20%2B%20this%2Echildren%2Elength%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Swaps%20the%20position%20of%202%20Display%20Objects%20within%20this%20container%2E%0A%20%2A%0A%20%2A%20%40param%20child%20%7BPIXI%2EDisplayObject%7D%0A%20%2A%20%40param%20child2%20%7BPIXI%2EDisplayObject%7D%0A%20%2A%2F%0AContainer%2Eprototype%2EswapChildren%20%3D%20function%20%28child%2C%20child2%29%0A%7B%0A%20%20%20%20if%20%28child%20%3D%3D%3D%20child2%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20index1%20%3D%20this%2EgetChildIndex%28child%29%3B%0A%20%20%20%20var%20index2%20%3D%20this%2EgetChildIndex%28child2%29%3B%0A%0A%20%20%20%20if%20%28index1%20%3C%200%20%7C%7C%20index2%20%3C%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27swapChildren%3A%20Both%20the%20supplied%20DisplayObjects%20must%20be%20children%20of%20the%20caller%2E%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Echildren%5Bindex1%5D%20%3D%20child2%3B%0A%20%20%20%20this%2Echildren%5Bindex2%5D%20%3D%20child%3B%0A%20%20%20%20this%2EonChildrenChange%28index1%20%3C%20index2%20%3F%20index1%20%3A%20index2%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Returns%20the%20index%20position%20of%20a%20child%20DisplayObject%20instance%0A%20%2A%0A%20%2A%20%40param%20child%20%7BPIXI%2EDisplayObject%7D%20The%20DisplayObject%20instance%20to%20identify%0A%20%2A%20%40return%20%7Bnumber%7D%20The%20index%20position%20of%20the%20child%20display%20object%20to%20identify%0A%20%2A%2F%0AContainer%2Eprototype%2EgetChildIndex%20%3D%20function%20%28child%29%0A%7B%0A%20%20%20%20var%20index%20%3D%20this%2Echildren%2EindexOf%28child%29%3B%0A%0A%20%20%20%20if%20%28index%20%3D%3D%3D%20%2D1%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27The%20supplied%20DisplayObject%20must%20be%20a%20child%20of%20the%20caller%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20index%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Changes%20the%20position%20of%20an%20existing%20child%20in%20the%20display%20object%20container%0A%20%2A%0A%20%2A%20%40param%20child%20%7BPIXI%2EDisplayObject%7D%20The%20child%20DisplayObject%20instance%20for%20which%20you%20want%20to%20change%20the%20index%20number%0A%20%2A%20%40param%20index%20%7Bnumber%7D%20The%20resulting%20index%20number%20for%20the%20child%20display%20object%0A%20%2A%2F%0AContainer%2Eprototype%2EsetChildIndex%20%3D%20function%20%28child%2C%20index%29%0A%7B%0A%20%20%20%20if%20%28index%20%3C%200%20%7C%7C%20index%20%3E%3D%20this%2Echildren%2Elength%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27The%20supplied%20index%20is%20out%20of%20bounds%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20currentIndex%20%3D%20this%2EgetChildIndex%28child%29%3B%0A%0A%20%20%20%20utils%2EremoveItems%28this%2Echildren%2C%20currentIndex%2C%201%29%3B%20%2F%2F%20remove%20from%20old%20position%0A%20%20%20%20this%2Echildren%2Esplice%28index%2C%200%2C%20child%29%3B%20%2F%2Fadd%20at%20new%20position%0A%20%20%20%20this%2EonChildrenChange%28index%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Returns%20the%20child%20at%20the%20specified%20index%0A%20%2A%0A%20%2A%20%40param%20index%20%7Bnumber%7D%20The%20index%20to%20get%20the%20child%20at%0A%20%2A%20%40return%20%7BPIXI%2EDisplayObject%7D%20The%20child%20at%20the%20given%20index%2C%20if%20any%2E%0A%20%2A%2F%0AContainer%2Eprototype%2EgetChildAt%20%3D%20function%20%28index%29%0A%7B%0A%20%20%20%20if%20%28index%20%3C%200%20%7C%7C%20index%20%3E%3D%20this%2Echildren%2Elength%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27getChildAt%3A%20Supplied%20index%20%27%20%2B%20index%20%2B%20%27%20does%20not%20exist%20in%20the%20child%20list%2C%20or%20the%20supplied%20DisplayObject%20is%20not%20a%20child%20of%20the%20caller%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20this%2Echildren%5Bindex%5D%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20a%20child%20from%20the%20container%2E%0A%20%2A%0A%20%2A%20%40param%20child%20%7BPIXI%2EDisplayObject%7D%20The%20DisplayObject%20to%20remove%0A%20%2A%20%40return%20%7BPIXI%2EDisplayObject%7D%20The%20child%20that%20was%20removed%2E%0A%20%2A%2F%0AContainer%2Eprototype%2EremoveChild%20%3D%20function%20%28child%29%0A%7B%0A%20%20%20%20var%20argumentsLength%20%3D%20arguments%2Elength%3B%0A%0A%20%20%20%20%2F%2F%20if%20there%20is%20only%20one%20argument%20we%20can%20bypass%20looping%20through%20the%20them%0A%20%20%20%20if%28argumentsLength%20%3E%201%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20loop%20through%20the%20arguments%20property%20and%20add%20all%20children%0A%20%20%20%20%20%20%20%20%2F%2F%20use%20it%20the%20right%20way%20%28%2Elength%20and%20%5Bi%5D%29%20so%20that%20this%20function%20can%20still%20be%20optimised%20by%20JS%20runtimes%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20argumentsLength%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EremoveChild%28%20arguments%5Bi%5D%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20%20%20%20%20%0A%20%20%20%20else%0A%20%20%20%20%7B%20%20%20%0A%20%20%20%20%20%20%20%20var%20index%20%3D%20this%2Echildren%2EindexOf%28child%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28index%20%3D%3D%3D%20%2D1%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20child%2Eparent%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20utils%2EremoveItems%28this%2Echildren%2C%20index%2C%201%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%20%2D%20lets%20either%20do%20all%20callbacks%20or%20all%20events%2E%2E%20not%20both%21%0A%20%20%20%20%20%20%20%20this%2EonChildrenChange%28index%29%3B%0A%20%20%20%20%20%20%20%20child%2Eemit%28%27removed%27%2C%20this%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20child%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20a%20child%20from%20the%20specified%20index%20position%2E%0A%20%2A%0A%20%2A%20%40param%20index%20%7Bnumber%7D%20The%20index%20to%20get%20the%20child%20from%0A%20%2A%20%40return%20%7BPIXI%2EDisplayObject%7D%20The%20child%20that%20was%20removed%2E%0A%20%2A%2F%0AContainer%2Eprototype%2EremoveChildAt%20%3D%20function%20%28index%29%0A%7B%0A%20%20%20%20var%20child%20%3D%20this%2EgetChildAt%28index%29%3B%0A%0A%20%20%20%20child%2Eparent%20%3D%20null%3B%0A%20%20%20%20utils%2EremoveItems%28this%2Echildren%2C%20index%2C%201%29%3B%0A%0A%20%20%20%20%2F%2F%20TODO%20%2D%20lets%20either%20do%20all%20callbacks%20or%20all%20events%2E%2E%20not%20both%21%0A%20%20%20%20this%2EonChildrenChange%28index%29%3B%0A%20%20%20%20child%2Eemit%28%27removed%27%2C%20this%29%3B%0A%0A%20%20%20%20return%20child%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20all%20children%20from%20this%20container%20that%20are%20within%20the%20begin%20and%20end%20indexes%2E%0A%20%2A%0A%20%2A%20%40param%20beginIndex%20%7Bnumber%7D%20The%20beginning%20position%2E%20Default%20value%20is%200%2E%0A%20%2A%20%40param%20endIndex%20%7Bnumber%7D%20The%20ending%20position%2E%20Default%20value%20is%20size%20of%20the%20container%2E%0A%20%2A%2F%0AContainer%2Eprototype%2EremoveChildren%20%3D%20function%20%28beginIndex%2C%20endIndex%29%0A%7B%0A%20%20%20%20var%20begin%20%3D%20beginIndex%20%7C%7C%200%3B%0A%20%20%20%20var%20end%20%3D%20typeof%20endIndex%20%3D%3D%3D%20%27number%27%20%3F%20endIndex%20%3A%20this%2Echildren%2Elength%3B%0A%20%20%20%20var%20range%20%3D%20end%20%2D%20begin%3B%0A%20%20%20%20var%20removed%2C%20i%3B%0A%0A%20%20%20%20if%20%28range%20%3E%200%20%26%26%20range%20%3C%3D%20end%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20removed%20%3D%20this%2Echildren%2Esplice%28begin%2C%20range%29%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20removed%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20removed%5Bi%5D%2Eparent%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this%2EonChildrenChange%28beginIndex%29%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20removed%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20removed%5Bi%5D%2Eemit%28%27removed%27%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20removed%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20%28range%20%3D%3D%3D%200%20%26%26%20this%2Echildren%2Elength%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20RangeError%28%27removeChildren%3A%20numeric%20values%20are%20outside%20the%20acceptable%20range%2E%27%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Useful%20function%20that%20returns%20a%20texture%20of%20the%20display%20object%20that%20can%20then%20be%20used%20to%20create%20sprites%0A%20%2A%20This%20can%20be%20quite%20useful%20if%20your%20displayObject%20is%20static%20%2F%20complicated%20and%20needs%20to%20be%20reused%20multiple%20times%2E%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7CPIXI%2EWebGLRenderer%7D%20The%20renderer%20used%20to%20generate%20the%20texture%2E%0A%20%2A%20%40param%20resolution%20%7Bnumber%7D%20The%20resolution%20of%20the%20texture%20being%20generated%0A%20%2A%20%40param%20scaleMode%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40return%20%7BPIXI%2ETexture%7D%20a%20texture%20of%20the%20display%20object%0A%20%2A%2F%0AContainer%2Eprototype%2EgenerateTexture%20%3D%20function%20%28renderer%2C%20resolution%2C%20scaleMode%29%0A%7B%0A%20%20%20%20var%20bounds%20%3D%20this%2EgetLocalBounds%28%29%3B%0A%0A%20%20%20%20var%20renderTexture%20%3D%20new%20RenderTexture%28renderer%2C%20bounds%2Ewidth%20%7C%200%2C%20bounds%2Eheight%20%7C%200%2C%20scaleMode%2C%20resolution%29%3B%0A%0A%20%20%20%20%5FtempMatrix%2Etx%20%3D%20%2Dbounds%2Ex%3B%0A%20%20%20%20%5FtempMatrix%2Ety%20%3D%20%2Dbounds%2Ey%3B%0A%0A%20%20%20%20renderTexture%2Erender%28this%2C%20%5FtempMatrix%29%3B%0A%0A%20%20%20%20return%20renderTexture%3B%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Updates%20the%20transform%20on%20all%20children%20of%20this%20container%20for%20rendering%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AContainer%2Eprototype%2EupdateTransform%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28%21this%2Evisible%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EdisplayObjectUpdateTransform%28%29%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20j%20%3D%20this%2Echildren%2Elength%3B%20i%20%3C%20j%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Echildren%5Bi%5D%2EupdateTransform%28%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2F%20performance%20increase%20to%20avoid%20using%20call%2E%2E%20%2810x%20faster%29%0AContainer%2Eprototype%2EcontainerUpdateTransform%20%3D%20Container%2Eprototype%2EupdateTransform%3B%0A%0A%2F%2A%2A%0A%20%2A%20Retrieves%20the%20bounds%20of%20the%20Container%20as%20a%20rectangle%2E%20The%20bounds%20calculation%20takes%20all%20visible%20children%20into%20consideration%2E%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20The%20rectangular%20bounding%20area%0A%20%2A%2F%0AContainer%2Eprototype%2EgetBounds%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%28%21this%2E%5FcurrentBounds%29%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20if%20%28this%2Echildren%2Elength%20%3D%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20math%2ERectangle%2EEMPTY%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%20the%20bounds%20have%20already%20been%20calculated%20this%20render%20session%20so%20return%20what%20we%20have%0A%0A%20%20%20%20%20%20%20%20var%20minX%20%3D%20Infinity%3B%0A%20%20%20%20%20%20%20%20var%20minY%20%3D%20Infinity%3B%0A%0A%20%20%20%20%20%20%20%20var%20maxX%20%3D%20%2DInfinity%3B%0A%20%20%20%20%20%20%20%20var%20maxY%20%3D%20%2DInfinity%3B%0A%0A%20%20%20%20%20%20%20%20var%20childBounds%3B%0A%20%20%20%20%20%20%20%20var%20childMaxX%3B%0A%20%20%20%20%20%20%20%20var%20childMaxY%3B%0A%0A%20%20%20%20%20%20%20%20var%20childVisible%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20j%20%3D%20this%2Echildren%2Elength%3B%20i%20%3C%20j%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20child%20%3D%20this%2Echildren%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21child%2Evisible%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20childVisible%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20childBounds%20%3D%20this%2Echildren%5Bi%5D%2EgetBounds%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20minX%20%3D%20minX%20%3C%20childBounds%2Ex%20%3F%20minX%20%3A%20childBounds%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minY%20%3D%20minY%20%3C%20childBounds%2Ey%20%3F%20minY%20%3A%20childBounds%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20childMaxX%20%3D%20childBounds%2Ewidth%20%2B%20childBounds%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20childMaxY%20%3D%20childBounds%2Eheight%20%2B%20childBounds%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20maxX%20%3D%20maxX%20%3E%20childMaxX%20%3F%20maxX%20%3A%20childMaxX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20maxY%20%3D%20maxY%20%3E%20childMaxY%20%3F%20maxY%20%3A%20childMaxY%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28%21childVisible%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20math%2ERectangle%2EEMPTY%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20bounds%20%3D%20this%2E%5Fbounds%3B%0A%0A%20%20%20%20%20%20%20%20bounds%2Ex%20%3D%20minX%3B%0A%20%20%20%20%20%20%20%20bounds%2Ey%20%3D%20minY%3B%0A%20%20%20%20%20%20%20%20bounds%2Ewidth%20%3D%20maxX%20%2D%20minX%3B%0A%20%20%20%20%20%20%20%20bounds%2Eheight%20%3D%20maxY%20%2D%20minY%3B%0A%0A%20%20%20%20%20%20%20%20this%2E%5FcurrentBounds%20%3D%20bounds%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20this%2E%5FcurrentBounds%3B%0A%7D%3B%0A%0AContainer%2Eprototype%2EcontainerGetBounds%20%3D%20Container%2Eprototype%2EgetBounds%3B%0A%0A%2F%2A%2A%0A%20%2A%20Retrieves%20the%20non%2Dglobal%20local%20bounds%20of%20the%20Container%20as%20a%20rectangle%2E%0A%20%2A%20The%20calculation%20takes%20all%20visible%20children%20into%20consideration%2E%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20The%20rectangular%20bounding%20area%0A%20%2A%2F%0AContainer%2Eprototype%2EgetLocalBounds%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20matrixCache%20%3D%20this%2EworldTransform%3B%0A%0A%20%20%20%20this%2EworldTransform%20%3D%20math%2EMatrix%2EIDENTITY%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20j%20%3D%20this%2Echildren%2Elength%3B%20i%20%3C%20j%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Echildren%5Bi%5D%2EupdateTransform%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EworldTransform%20%3D%20matrixCache%3B%0A%0A%20%20%20%20this%2E%5FcurrentBounds%20%3D%20null%3B%0A%0A%20%20%20%20return%20this%2EgetBounds%28%20math%2EMatrix%2EIDENTITY%20%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20WebGL%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%0A%20%2A%2F%0AContainer%2Eprototype%2ErenderWebGL%20%3D%20function%20%28renderer%29%0A%7B%0A%0A%20%20%20%20%2F%2F%20if%20the%20object%20is%20not%20visible%20or%20the%20alpha%20is%200%20then%20no%20need%20to%20render%20this%20element%0A%20%20%20%20if%20%28%21this%2Evisible%20%7C%7C%20this%2EworldAlpha%20%3C%3D%200%20%7C%7C%20%21this%2Erenderable%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20i%2C%20j%3B%0A%0A%20%20%20%20%2F%2F%20do%20a%20quick%20check%20to%20see%20if%20this%20element%20has%20a%20mask%20or%20a%20filter%2E%0A%20%20%20%20if%20%28this%2E%5Fmask%20%7C%7C%20this%2E%5Ffilters%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20renderer%2EcurrentRenderer%2Eflush%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20push%20filter%20first%20as%20we%20need%20to%20ensure%20the%20stencil%20buffer%20is%20correct%20for%20any%20masking%0A%20%20%20%20%20%20%20%20if%20%28this%2E%5Ffilters%20%26%26%20this%2E%5Ffilters%2Elength%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EpushFilter%28this%2C%20this%2E%5Ffilters%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28this%2E%5Fmask%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2EmaskManager%2EpushMask%28this%2C%20this%2E%5Fmask%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20renderer%2EcurrentRenderer%2Estart%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20add%20this%20object%20to%20the%20batch%2C%20only%20rendered%20if%20it%20has%20a%20texture%2E%0A%20%20%20%20%20%20%20%20this%2E%5FrenderWebGL%28renderer%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20now%20loop%20through%20the%20children%20and%20make%20sure%20they%20get%20rendered%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20j%20%3D%20this%2Echildren%2Elength%3B%20i%20%3C%20j%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Echildren%5Bi%5D%2ErenderWebGL%28renderer%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20renderer%2EcurrentRenderer%2Eflush%28%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28this%2E%5Fmask%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2EmaskManager%2EpopMask%28this%2C%20this%2E%5Fmask%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28this%2E%5Ffilters%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EpopFilter%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20renderer%2EcurrentRenderer%2Estart%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FrenderWebGL%28renderer%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20simple%20render%20children%21%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20j%20%3D%20this%2Echildren%2Elength%3B%20i%20%3C%20j%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Echildren%5Bi%5D%2ErenderWebGL%28renderer%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20To%20be%20overridden%20by%20the%20subclass%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%0A%20%2A%20%40private%0A%20%2A%2F%0AContainer%2Eprototype%2E%5FrenderWebGL%20%3D%20function%20%28renderer%29%20%2F%2F%20jshint%20unused%3Afalse%0A%7B%0A%20%20%20%20%2F%2F%20this%20is%20where%20content%20itself%20gets%20rendered%2E%2E%2E%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20To%20be%20overridden%20by%20the%20subclass%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7D%20The%20renderer%0A%20%2A%20%40private%0A%20%2A%2F%0AContainer%2Eprototype%2E%5FrenderCanvas%20%3D%20function%20%28renderer%29%20%2F%2F%20jshint%20unused%3Afalse%0A%7B%0A%20%20%20%20%2F%2F%20this%20is%20where%20content%20itself%20gets%20rendered%2E%2E%2E%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20Canvas%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7D%20The%20renderer%0A%20%2A%2F%0AContainer%2Eprototype%2ErenderCanvas%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20%2F%2F%20if%20not%20visible%20or%20the%20alpha%20is%200%20then%20no%20need%20to%20render%20this%0A%20%20%20%20if%20%28%21this%2Evisible%20%7C%7C%20this%2Ealpha%20%3C%3D%200%20%7C%7C%20%21this%2Erenderable%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28this%2E%5Fmask%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20renderer%2EmaskManager%2EpushMask%28this%2E%5Fmask%2C%20renderer%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2E%5FrenderCanvas%28renderer%29%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20j%20%3D%20this%2Echildren%2Elength%3B%20i%20%3C%20j%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Echildren%5Bi%5D%2ErenderCanvas%28renderer%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28this%2E%5Fmask%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20renderer%2EmaskManager%2EpopMask%28renderer%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20container%0A%20%2A%20%40param%20%5BdestroyChildren%3Dfalse%5D%20%7Bboolean%7D%20if%20set%20to%20true%2C%20all%20the%20children%20will%20have%20their%20destroy%20method%20called%20as%20well%0A%20%2A%2F%0AContainer%2Eprototype%2Edestroy%20%3D%20function%20%28destroyChildren%29%0A%7B%0A%20%20%20%20DisplayObject%2Eprototype%2Edestroy%2Ecall%28this%29%3B%0A%0A%20%20%20%20if%20%28destroyChildren%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20j%20%3D%20this%2Echildren%2Elength%3B%20i%20%3C%20j%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Echildren%5Bi%5D%2Edestroy%28destroyChildren%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EremoveChildren%28%29%3B%0A%0A%20%20%20%20this%2Echildren%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2Ftextures%2FRenderTexture%22%3A64%2C%22%2E%2E%2Futils%22%3A70%2C%22%2E%2FDisplayObject%22%3A18%7D%5D%2C18%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20math%20%3D%20require%28%27%2E%2E%2Fmath%27%29%2C%0A%20%20%20%20RenderTexture%20%3D%20require%28%27%2E%2E%2Ftextures%2FRenderTexture%27%29%2C%0A%20%20%20%20EventEmitter%20%3D%20require%28%27eventemitter3%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2Fconst%27%29%2C%0A%20%20%20%20%5FtempMatrix%20%3D%20new%20math%2EMatrix%28%29%2C%0A%20%20%20%20%5FtempDisplayObjectParent%20%3D%20%7BworldTransform%3Anew%20math%2EMatrix%28%29%2C%20worldAlpha%3A1%2C%20children%3A%5B%5D%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20The%20base%20class%20for%20all%20objects%20that%20are%20rendered%20on%20the%20screen%2E%0A%20%2A%20This%20is%20an%20abstract%20class%20and%20should%20not%20be%20used%20on%20its%20own%20rather%20it%20should%20be%20extended%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20EventEmitter%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%2F%0Afunction%20DisplayObject%28%29%0A%7B%0A%20%20%20%20EventEmitter%2Ecall%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20coordinate%20of%20the%20object%20relative%20to%20the%20local%20coordinates%20of%20the%20parent%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eposition%20%3D%20new%20math%2EPoint%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20scale%20factor%20of%20the%20object%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Escale%20%3D%20new%20math%2EPoint%281%2C%201%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20pivot%20point%20of%20the%20displayObject%20that%20it%20rotates%20around%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Epivot%20%3D%20new%20math%2EPoint%280%2C%200%29%3B%0A%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20skew%20factor%20for%20the%20object%20in%20radians%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eskew%20%3D%20new%20math%2EPoint%280%2C%200%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20rotation%20of%20the%20object%20in%20radians%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Erotation%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20opacity%20of%20the%20object%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ealpha%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20visibility%20of%20the%20object%2E%20If%20false%20the%20object%20will%20not%20be%20drawn%2C%20and%0A%20%20%20%20%20%2A%20the%20updateTransform%20function%20will%20not%20be%20called%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Evisible%20%3D%20true%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Can%20this%20object%20be%20rendered%2C%20if%20false%20the%20object%20will%20not%20be%20drawn%20but%20the%20updateTransform%0A%20%20%20%20%20%2A%20methods%20will%20still%20be%20called%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Erenderable%20%3D%20true%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20display%20object%20container%20that%20contains%20this%20display%20object%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EContainer%7D%0A%20%20%20%20%20%2A%20%40readOnly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eparent%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20multiplied%20alpha%20of%20the%20displayObject%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40readOnly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EworldAlpha%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Current%20transform%20of%20the%20object%20based%20on%20world%20%28parent%29%20factors%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EMatrix%7D%0A%20%20%20%20%20%2A%20%40readOnly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EworldTransform%20%3D%20new%20math%2EMatrix%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20area%20the%20filter%20is%20applied%20to%2E%20This%20is%20used%20as%20more%20of%20an%20optimisation%0A%20%20%20%20%20%2A%20rather%20than%20figuring%20out%20the%20dimensions%20of%20the%20displayObject%20each%20frame%20you%20can%20set%20this%20rectangle%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EfilterArea%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20cached%20sin%20rotation%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fsr%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20cached%20cos%20rotation%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fcr%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20original%2C%20cached%20bounds%20of%20the%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fbounds%20%3D%20new%20math%2ERectangle%280%2C%200%2C%201%2C%201%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20most%20up%2Dto%2Ddate%20bounds%20of%20the%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FcurrentBounds%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20original%2C%20cached%20mask%20of%20the%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fmask%20%3D%20null%3B%0A%7D%0A%0A%2F%2F%20constructor%0ADisplayObject%2Eprototype%20%3D%20Object%2Ecreate%28EventEmitter%2Eprototype%29%3B%0ADisplayObject%2Eprototype%2Econstructor%20%3D%20DisplayObject%3B%0Amodule%2Eexports%20%3D%20DisplayObject%3B%0A%0AObject%2EdefineProperties%28DisplayObject%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20position%20of%20the%20displayObject%20on%20the%20x%20axis%20relative%20to%20the%20local%20coordinates%20of%20the%20parent%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EDisplayObject%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20x%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Eposition%2Ex%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eposition%2Ex%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20position%20of%20the%20displayObject%20on%20the%20y%20axis%20relative%20to%20the%20local%20coordinates%20of%20the%20parent%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EDisplayObject%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20y%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Eposition%2Ey%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eposition%2Ey%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Indicates%20if%20the%20sprite%20is%20globally%20visible%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EDisplayObject%23%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20worldVisible%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20item%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21item%2Evisible%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%20%3D%20item%2Eparent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20while%20%28item%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20a%20mask%20for%20the%20displayObject%2E%20A%20mask%20is%20an%20object%20that%20limits%20the%20visibility%20of%20an%20object%20to%20the%20shape%20of%20the%20mask%20applied%20to%20it%2E%0A%20%20%20%20%20%2A%20In%20PIXI%20a%20regular%20mask%20must%20be%20a%20PIXI%2EGraphics%20or%20a%20PIXI%2ESprite%20object%2E%20This%20allows%20for%20much%20faster%20masking%20in%20canvas%20as%20it%20utilises%20shape%20clipping%2E%0A%20%20%20%20%20%2A%20To%20remove%20a%20mask%2C%20set%20this%20property%20to%20null%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EGraphics%7CPIXI%2ESprite%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EDisplayObject%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20mask%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fmask%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2E%5Fmask%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fmask%2Erenderable%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fmask%20%3D%20value%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2E%5Fmask%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fmask%2Erenderable%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20filters%20for%20the%20displayObject%2E%0A%20%20%20%20%20%2A%20%2A%20IMPORTANT%3A%20This%20is%20a%20webGL%20only%20feature%20and%20will%20be%20ignored%20by%20the%20canvas%20renderer%2E%0A%20%20%20%20%20%2A%20To%20remove%20filters%20simply%20set%20this%20property%20to%20%27null%27%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EAbstractFilter%5B%5D%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EDisplayObject%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20filters%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Ffilters%20%26%26%20this%2E%5Ffilters%2Eslice%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ffilters%20%3D%20value%20%26%26%20value%2Eslice%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%7D%29%3B%0A%0A%2F%2A%0A%20%2A%20Updates%20the%20object%20transform%20for%20rendering%0A%20%2A%0A%20%2A%20TODO%20%2D%20Optimization%20pass%21%0A%20%2A%2F%0ADisplayObject%2Eprototype%2EupdateTransform%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20%2F%2F%20create%20some%20matrix%20refs%20for%20easy%20access%0A%20%20%20%20var%20pt%20%3D%20this%2Eparent%2EworldTransform%3B%0A%20%20%20%20var%20wt%20%3D%20this%2EworldTransform%3B%0A%0A%20%20%20%20%2F%2F%20temporary%20matrix%20variables%0A%20%20%20%20var%20a%2C%20b%2C%20c%2C%20d%2C%20tx%2C%20ty%3B%0A%0A%20%20%20%20%2F%2F%20looks%20like%20we%20are%20skewing%0A%20%20%20%20if%28this%2Eskew%2Ex%20%7C%7C%20this%2Eskew%2Ey%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20I%27m%20assuming%20that%20skewing%20is%20not%20going%20to%20be%20very%20common%0A%20%20%20%20%20%20%20%20%2F%2F%20With%20that%20in%20mind%2C%20we%20can%20do%20a%20full%20setTransform%20using%20the%20temp%20matrix%0A%20%20%20%20%20%20%20%20%5FtempMatrix%2EsetTransform%28%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eposition%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eposition%2Ey%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Epivot%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Epivot%2Ey%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Escale%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Escale%2Ey%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Erotation%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eskew%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eskew%2Ey%0A%20%20%20%20%20%20%20%20%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20now%20concat%20the%20matrix%20%28inlined%20so%20that%20we%20can%20avoid%20using%20copy%29%0A%20%20%20%20%20%20%20%20wt%2Ea%20%20%3D%20%5FtempMatrix%2Ea%20%20%2A%20pt%2Ea%20%2B%20%5FtempMatrix%2Eb%20%20%2A%20pt%2Ec%3B%0A%20%20%20%20%20%20%20%20wt%2Eb%20%20%3D%20%5FtempMatrix%2Ea%20%20%2A%20pt%2Eb%20%2B%20%5FtempMatrix%2Eb%20%20%2A%20pt%2Ed%3B%0A%20%20%20%20%20%20%20%20wt%2Ec%20%20%3D%20%5FtempMatrix%2Ec%20%20%2A%20pt%2Ea%20%2B%20%5FtempMatrix%2Ed%20%20%2A%20pt%2Ec%3B%0A%20%20%20%20%20%20%20%20wt%2Ed%20%20%3D%20%5FtempMatrix%2Ec%20%20%2A%20pt%2Eb%20%2B%20%5FtempMatrix%2Ed%20%20%2A%20pt%2Ed%3B%0A%20%20%20%20%20%20%20%20wt%2Etx%20%3D%20%5FtempMatrix%2Etx%20%2A%20pt%2Ea%20%2B%20%5FtempMatrix%2Ety%20%2A%20pt%2Ec%20%2B%20pt%2Etx%3B%0A%20%20%20%20%20%20%20%20wt%2Ety%20%3D%20%5FtempMatrix%2Etx%20%2A%20pt%2Eb%20%2B%20%5FtempMatrix%2Ety%20%2A%20pt%2Ed%20%2B%20pt%2Ety%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20so%20if%20rotation%20is%20between%200%20then%20we%20can%20simplify%20the%20multiplication%20process%2E%2E%2E%0A%20%20%20%20%20%20%20%20if%20%28this%2Erotation%20%25%20CONST%2EPI%5F2%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20check%20to%20see%20if%20the%20rotation%20is%20the%20same%20as%20the%20previous%20render%2E%20This%20means%20we%20only%20need%20to%20use%20sin%20and%20cos%20when%20rotation%20actually%20changes%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2Erotation%20%21%3D%3D%20this%2ErotationCache%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2ErotationCache%20%3D%20this%2Erotation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fsr%20%3D%20Math%2Esin%28this%2Erotation%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fcr%20%3D%20Math%2Ecos%28this%2Erotation%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20get%20the%20matrix%20values%20of%20the%20displayobject%20based%20on%20its%20transform%20properties%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20a%20%20%3D%20%20this%2E%5Fcr%20%2A%20this%2Escale%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%20%3D%20%20this%2E%5Fsr%20%2A%20this%2Escale%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%20%3D%20%2Dthis%2E%5Fsr%20%2A%20this%2Escale%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d%20%20%3D%20%20this%2E%5Fcr%20%2A%20this%2Escale%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tx%20%3D%20%20this%2Eposition%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ty%20%3D%20%20this%2Eposition%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20check%20for%20pivot%2E%2E%20not%20often%20used%20so%20geared%20towards%20that%20fact%21%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2Epivot%2Ex%20%7C%7C%20this%2Epivot%2Ey%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tx%20%2D%3D%20this%2Epivot%2Ex%20%2A%20a%20%2B%20this%2Epivot%2Ey%20%2A%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ty%20%2D%3D%20this%2Epivot%2Ex%20%2A%20b%20%2B%20this%2Epivot%2Ey%20%2A%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20concat%20the%20parent%20matrix%20with%20the%20objects%20transform%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ea%20%20%3D%20a%20%20%2A%20pt%2Ea%20%2B%20b%20%20%2A%20pt%2Ec%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Eb%20%20%3D%20a%20%20%2A%20pt%2Eb%20%2B%20b%20%20%2A%20pt%2Ed%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ec%20%20%3D%20c%20%20%2A%20pt%2Ea%20%2B%20d%20%20%2A%20pt%2Ec%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ed%20%20%3D%20c%20%20%2A%20pt%2Eb%20%2B%20d%20%20%2A%20pt%2Ed%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Etx%20%3D%20tx%20%2A%20pt%2Ea%20%2B%20ty%20%2A%20pt%2Ec%20%2B%20pt%2Etx%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ety%20%3D%20tx%20%2A%20pt%2Eb%20%2B%20ty%20%2A%20pt%2Ed%20%2B%20pt%2Ety%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20lets%20do%20the%20fast%20version%20as%20we%20know%20there%20is%20no%20rotation%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20a%20%20%3D%20this%2Escale%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d%20%20%3D%20this%2Escale%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20tx%20%3D%20this%2Eposition%2Ex%20%2D%20this%2Epivot%2Ex%20%2A%20a%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ty%20%3D%20this%2Eposition%2Ey%20%2D%20this%2Epivot%2Ey%20%2A%20d%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ea%20%20%3D%20a%20%20%2A%20pt%2Ea%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Eb%20%20%3D%20a%20%20%2A%20pt%2Eb%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ec%20%20%3D%20d%20%20%2A%20pt%2Ec%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ed%20%20%3D%20d%20%20%2A%20pt%2Ed%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Etx%20%3D%20tx%20%2A%20pt%2Ea%20%2B%20ty%20%2A%20pt%2Ec%20%2B%20pt%2Etx%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ety%20%3D%20tx%20%2A%20pt%2Eb%20%2B%20ty%20%2A%20pt%2Ed%20%2B%20pt%2Ety%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20multiply%20the%20alphas%2E%2E%0A%20%20%20%20this%2EworldAlpha%20%3D%20this%2Ealpha%20%2A%20this%2Eparent%2EworldAlpha%3B%0A%0A%20%20%20%20%2F%2F%20reset%20the%20bounds%20each%20time%20this%20is%20called%21%0A%20%20%20%20this%2E%5FcurrentBounds%20%3D%20null%3B%0A%7D%3B%0A%0A%2F%2F%20performance%20increase%20to%20avoid%20using%20call%2E%2E%20%2810x%20faster%29%0ADisplayObject%2Eprototype%2EdisplayObjectUpdateTransform%20%3D%20DisplayObject%2Eprototype%2EupdateTransform%3B%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%0A%20%2A%20Retrieves%20the%20bounds%20of%20the%20displayObject%20as%20a%20rectangle%20object%0A%20%2A%0A%20%2A%20%40param%20matrix%20%7BPIXI%2EMatrix%7D%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20the%20rectangular%20bounding%20area%0A%20%2A%2F%0ADisplayObject%2Eprototype%2EgetBounds%20%3D%20function%20%28matrix%29%20%2F%2F%20jshint%20unused%3Afalse%0A%7B%0A%20%20%20%20return%20math%2ERectangle%2EEMPTY%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Retrieves%20the%20local%20bounds%20of%20the%20displayObject%20as%20a%20rectangle%20object%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20the%20rectangular%20bounding%20area%0A%20%2A%2F%0ADisplayObject%2Eprototype%2EgetLocalBounds%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20this%2EgetBounds%28math%2EMatrix%2EIDENTITY%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Calculates%20the%20global%20position%20of%20the%20display%20object%0A%20%2A%0A%20%2A%20%40param%20position%20%7BPIXI%2EPoint%7D%20The%20world%20origin%20to%20calculate%20from%0A%20%2A%20%40return%20%7BPIXI%2EPoint%7D%20A%20point%20object%20representing%20the%20position%20of%20this%20object%0A%20%2A%2F%0ADisplayObject%2Eprototype%2EtoGlobal%20%3D%20function%20%28position%29%0A%7B%0A%20%20%20%20%2F%2F%20this%20parent%20check%20is%20for%20just%20in%20case%20the%20item%20is%20a%20root%20object%2E%0A%20%20%20%20%2F%2F%20If%20it%20is%20we%20need%20to%20give%20it%20a%20temporary%20parent%20so%20that%20displayObjectUpdateTransform%20works%20correctly%0A%20%20%20%20%2F%2F%20this%20is%20mainly%20to%20avoid%20a%20parent%20check%20in%20the%20main%20loop%2E%20Every%20little%20helps%20for%20performance%20%3A%29%0A%20%20%20%20if%28%21this%2Eparent%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eparent%20%3D%20%5FtempDisplayObjectParent%3B%0A%20%20%20%20%20%20%20%20this%2EdisplayObjectUpdateTransform%28%29%3B%0A%20%20%20%20%20%20%20%20this%2Eparent%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EdisplayObjectUpdateTransform%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20don%27t%20need%20to%20update%20the%20lot%0A%20%20%20%20return%20this%2EworldTransform%2Eapply%28position%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Calculates%20the%20local%20position%20of%20the%20display%20object%20relative%20to%20another%20point%0A%20%2A%0A%20%2A%20%40param%20position%20%7BPIXI%2EPoint%7D%20The%20world%20origin%20to%20calculate%20from%0A%20%2A%20%40param%20%5Bfrom%5D%20%7BPIXI%2EDisplayObject%7D%20The%20DisplayObject%20to%20calculate%20the%20global%20position%20from%0A%20%2A%20%40param%20%5Bpoint%5D%20%7BPIXI%2EPoint%7D%20A%20Point%20object%20in%20which%20to%20store%20the%20value%2C%20optional%20%28otherwise%20will%20create%20a%20new%20Point%29%0A%20%2A%20%40return%20%7BPIXI%2EPoint%7D%20A%20point%20object%20representing%20the%20position%20of%20this%20object%0A%20%2A%2F%0ADisplayObject%2Eprototype%2EtoLocal%20%3D%20function%20%28position%2C%20from%2C%20point%29%0A%7B%0A%20%20%20%20if%20%28from%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20position%20%3D%20from%2EtoGlobal%28position%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20this%20parent%20check%20is%20for%20just%20in%20case%20the%20item%20is%20a%20root%20object%2E%0A%20%20%20%20%2F%2F%20If%20it%20is%20we%20need%20to%20give%20it%20a%20temporary%20parent%20so%20that%20displayObjectUpdateTransform%20works%20correctly%0A%20%20%20%20%2F%2F%20this%20is%20mainly%20to%20avoid%20a%20parent%20check%20in%20the%20main%20loop%2E%20Every%20little%20helps%20for%20performance%20%3A%29%0A%20%20%20%20if%28%21this%2Eparent%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eparent%20%3D%20%5FtempDisplayObjectParent%3B%0A%20%20%20%20%20%20%20%20this%2EdisplayObjectUpdateTransform%28%29%3B%0A%20%20%20%20%20%20%20%20this%2Eparent%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EdisplayObjectUpdateTransform%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20simply%20apply%20the%20matrix%2E%2E%0A%20%20%20%20return%20this%2EworldTransform%2EapplyInverse%28position%2C%20point%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20WebGL%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%0A%20%2A%20%40private%0A%20%2A%2F%0ADisplayObject%2Eprototype%2ErenderWebGL%20%3D%20function%20%28renderer%29%20%2F%2F%20jshint%20unused%3Afalse%0A%7B%0A%20%20%20%20%2F%2F%20OVERWRITE%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20Canvas%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7D%20The%20renderer%0A%20%2A%20%40private%0A%20%2A%2F%0ADisplayObject%2Eprototype%2ErenderCanvas%20%3D%20function%20%28renderer%29%20%2F%2F%20jshint%20unused%3Afalse%0A%7B%0A%20%20%20%20%2F%2F%20OVERWRITE%3B%0A%7D%3B%0A%2F%2A%2A%0A%20%2A%20Useful%20function%20that%20returns%20a%20texture%20of%20the%20display%20object%20that%20can%20then%20be%20used%20to%20create%20sprites%0A%20%2A%20This%20can%20be%20quite%20useful%20if%20your%20displayObject%20is%20static%20%2F%20complicated%20and%20needs%20to%20be%20reused%20multiple%20times%2E%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7CPIXI%2EWebGLRenderer%7D%20The%20renderer%20used%20to%20generate%20the%20texture%2E%0A%20%2A%20%40param%20scaleMode%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40param%20resolution%20%7Bnumber%7D%20The%20resolution%20of%20the%20texture%20being%20generated%0A%20%2A%20%40return%20%7BPIXI%2ETexture%7D%20a%20texture%20of%20the%20display%20object%0A%20%2A%2F%0ADisplayObject%2Eprototype%2EgenerateTexture%20%3D%20function%20%28renderer%2C%20scaleMode%2C%20resolution%29%0A%7B%0A%20%20%20%20var%20bounds%20%3D%20this%2EgetLocalBounds%28%29%3B%0A%0A%20%20%20%20var%20renderTexture%20%3D%20new%20RenderTexture%28renderer%2C%20bounds%2Ewidth%20%7C%200%2C%20bounds%2Eheight%20%7C%200%2C%20scaleMode%2C%20resolution%29%3B%0A%0A%20%20%20%20%5FtempMatrix%2Etx%20%3D%20%2Dbounds%2Ex%3B%0A%20%20%20%20%5FtempMatrix%2Ety%20%3D%20%2Dbounds%2Ey%3B%0A%0A%20%20%20%20renderTexture%2Erender%28this%2C%20%5FtempMatrix%29%3B%0A%0A%20%20%20%20return%20renderTexture%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Set%20the%20parent%20Container%20of%20this%20DisplayObject%0A%20%2A%0A%20%2A%20%40param%20container%20%7BContainer%7D%20The%20Container%20to%20add%20this%20DisplayObject%20to%0A%20%2A%20%40return%20%7BContainer%7D%20The%20Container%20that%20this%20DisplayObject%20was%20added%20to%0A%20%2A%2F%0ADisplayObject%2Eprototype%2EsetParent%20%3D%20function%20%28container%29%0A%7B%0A%20%20%20%20if%20%28%21container%20%7C%7C%20%21container%2EaddChild%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27setParent%3A%20Argument%20must%20be%20a%20Container%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20container%2EaddChild%28this%29%3B%0A%20%20%20%20return%20container%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Convenience%20function%20to%20set%20the%20postion%2C%20scale%2C%20skew%20and%20pivot%20at%20once%2E%0A%20%2A%0A%20%2A%20%40param%20%5Bx%3D0%5D%20%7Bnumber%7D%20The%20X%20position%0A%20%2A%20%40param%20%5By%3D0%5D%20%7Bnumber%7D%20The%20Y%20position%0A%20%2A%20%40param%20%5BscaleX%3D1%5D%20%7Bnumber%7D%20The%20X%20scale%20value%0A%20%2A%20%40param%20%5BscaleY%3D1%5D%20%7Bnumber%7D%20The%20Y%20scale%20value%0A%20%2A%20%40param%20%5Brotation%3D0%5D%20%7Bnumber%7D%20The%20rotation%0A%20%2A%20%40param%20%5BskewX%3D0%5D%20%7Bnumber%7D%20The%20X%20skew%20value%0A%20%2A%20%40param%20%5BskewY%3D0%5D%20%7Bnumber%7D%20The%20Y%20skew%20value%0A%20%2A%20%40param%20%5BpivotX%3D0%5D%20%7Bnumber%7D%20The%20X%20pivot%20value%0A%20%2A%20%40param%20%5BpivotY%3D0%5D%20%7Bnumber%7D%20The%20Y%20pivot%20value%0A%20%2A%20%40return%20%7BPIXI%2EDisplayObject%7D%0A%20%2A%2F%0ADisplayObject%2Eprototype%2EsetTransform%20%3D%20function%28x%2C%20y%2C%20scaleX%2C%20scaleY%2C%20rotation%2C%20skewX%2C%20skewY%2C%20pivotX%2C%20pivotY%29%20%2F%2Fjshint%20ignore%3Aline%0A%7B%0A%20%20%20%20this%2Eposition%2Ex%20%3D%20x%20%7C%7C%200%3B%0A%20%20%20%20this%2Eposition%2Ey%20%3D%20y%20%7C%7C%200%3B%0A%20%20%20%20this%2Escale%2Ex%20%3D%20%21scaleX%20%3F%201%20%3A%20scaleX%3B%0A%20%20%20%20this%2Escale%2Ey%20%3D%20%21scaleY%20%3F%201%20%3A%20scaleY%3B%0A%20%20%20%20this%2Erotation%20%3D%20rotation%20%7C%7C%200%3B%0A%20%20%20%20this%2Eskew%2Ex%20%3D%20skewX%20%7C%7C%200%3B%0A%20%20%20%20this%2Eskew%2Ey%20%3D%20skewY%20%7C%7C%200%3B%0A%20%20%20%20this%2Epivot%2Ex%20%3D%20pivotX%20%7C%7C%200%3B%0A%20%20%20%20this%2Epivot%2Ey%20%3D%20pivotY%20%7C%7C%200%3B%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Base%20destroy%20method%20for%20generic%20display%20objects%0A%20%2A%0A%20%2A%2F%0ADisplayObject%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%0A%20%20%20%20this%2Eposition%20%3D%20null%3B%0A%20%20%20%20this%2Escale%20%3D%20null%3B%0A%20%20%20%20this%2Epivot%20%3D%20null%3B%0A%20%20%20%20this%2Eskew%20%3D%20null%3B%0A%0A%20%20%20%20this%2Eparent%20%3D%20null%3B%0A%0A%20%20%20%20this%2E%5Fbounds%20%3D%20null%3B%0A%20%20%20%20this%2E%5FcurrentBounds%20%3D%20null%3B%0A%20%20%20%20this%2E%5Fmask%20%3D%20null%3B%0A%0A%20%20%20%20this%2EworldTransform%20%3D%20null%3B%0A%20%20%20%20this%2EfilterArea%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2Ftextures%2FRenderTexture%22%3A64%2C%22eventemitter3%22%3A10%7D%5D%2C19%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Container%20%3D%20require%28%27%2E%2E%2Fdisplay%2FContainer%27%29%2C%0A%20%20%20%20Texture%20%3D%20require%28%27%2E%2E%2Ftextures%2FTexture%27%29%2C%0A%20%20%20%20CanvasBuffer%20%3D%20require%28%27%2E%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasBuffer%27%29%2C%0A%20%20%20%20CanvasGraphics%20%3D%20require%28%27%2E%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasGraphics%27%29%2C%0A%20%20%20%20GraphicsData%20%3D%20require%28%27%2E%2FGraphicsData%27%29%2C%0A%20%20%20%20math%20%3D%20require%28%27%2E%2E%2Fmath%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2Fconst%27%29%2C%0A%20%20%20%20tempPoint%20%3D%20new%20math%2EPoint%28%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20Graphics%20class%20contains%20methods%20used%20to%20draw%20primitive%20shapes%20such%20as%20lines%2C%20circles%20and%0A%20%2A%20rectangles%20to%20the%20display%2C%20and%20to%20color%20and%20fill%20them%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EContainer%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%2F%0Afunction%20Graphics%28%29%0A%7B%0A%20%20%20%20Container%2Ecall%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20alpha%20value%20used%20when%20filling%20the%20Graphics%20object%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%201%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EfillAlpha%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20width%20%28thickness%29%20of%20any%20lines%20drawn%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2ElineWidth%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20color%20of%20any%20lines%20drawn%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2ElineColor%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Graphics%20data%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EGraphicsData%5B%5D%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EgraphicsData%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20tint%20applied%20to%20the%20graphic%20shape%2E%20This%20is%20a%20hex%20value%2E%20Apply%20a%20value%20of%200xFFFFFF%20to%20reset%20the%20tint%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200xFFFFFF%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etint%20%3D%200xFFFFFF%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20previous%20tint%20applied%20to%20the%20graphic%20shape%2E%20Used%20to%20compare%20to%20the%20current%20tint%20and%20check%20if%20theres%20change%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40default%200xFFFFFF%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FprevTint%20%3D%200xFFFFFF%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20blend%20mode%20to%20be%20applied%20to%20the%20graphic%20shape%2E%20Apply%20a%20value%20of%20%60PIXI%2EBLEND%5FMODES%2ENORMAL%60%20to%20reset%20the%20blend%20mode%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%20PIXI%2EBLEND%5FMODES%2ENORMAL%3B%0A%20%20%20%20%20%2A%20%40see%20PIXI%2EBLEND%5FMODES%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EblendMode%20%3D%20CONST%2EBLEND%5FMODES%2ENORMAL%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Current%20path%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EGraphicsData%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcurrentPath%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Array%20containing%20some%20WebGL%2Drelated%20properties%20used%20by%20the%20WebGL%20renderer%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%3Cnumber%2C%20object%3E%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%2F%2F%20TODO%20%2D%20%5Fwebgl%20should%20use%20a%20prototype%20object%2C%20not%20a%20random%20undocumented%20object%2E%2E%2E%0A%20%20%20%20this%2E%5FwebGL%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Whether%20this%20shape%20is%20being%20used%20as%20a%20mask%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EisMask%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20bounds%27%20padding%20used%20for%20bounds%20calculation%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EboundsPadding%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20A%20cache%20of%20the%20local%20bounds%20to%20prevent%20recalculation%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FlocalBounds%20%3D%20new%20math%2ERectangle%280%2C0%2C1%2C1%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Used%20to%20detect%20if%20the%20graphics%20object%20has%20changed%2E%20If%20this%20is%20set%20to%20true%20then%20the%20graphics%0A%20%20%20%20%20%2A%20object%20will%20be%20recalculated%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Used%20to%20detect%20if%20the%20WebGL%20graphics%20object%20has%20changed%2E%20If%20this%20is%20set%20to%20true%20then%20the%0A%20%20%20%20%20%2A%20graphics%20object%20will%20be%20recalculated%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EglDirty%20%3D%20false%3B%0A%0A%20%20%20%20this%2EboundsDirty%20%3D%20true%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Used%20to%20detect%20if%20the%20cached%20sprite%20object%20needs%20to%20be%20updated%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcachedSpriteDirty%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20When%20cacheAsBitmap%20is%20set%20to%20true%20the%20graphics%20object%20will%20be%20rendered%20as%20if%20it%20was%20a%20sprite%2E%0A%20%20%20%20%20%2A%20This%20is%20useful%20if%20your%20graphics%20element%20does%20not%20change%20often%2C%20as%20it%20will%20speed%20up%20the%20rendering%0A%20%20%20%20%20%2A%20of%20the%20object%20in%20exchange%20for%20taking%20up%20texture%20memory%2E%20It%20is%20also%20useful%20if%20you%20need%20the%20graphics%0A%20%20%20%20%20%2A%20object%20to%20be%20anti%2Daliased%2C%20because%20it%20will%20be%20rendered%20using%20canvas%2E%20This%20is%20not%20recommended%20if%0A%20%20%20%20%20%2A%20you%20are%20constantly%20redrawing%20the%20graphics%20element%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40name%20cacheAsBitmap%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EGraphics%23%0A%20%20%20%20%20%2A%20%40default%20false%0A%20%20%20%20%20%2A%2F%0A%7D%0A%0A%2F%2F%20constructor%0AGraphics%2Eprototype%20%3D%20Object%2Ecreate%28Container%2Eprototype%29%3B%0AGraphics%2Eprototype%2Econstructor%20%3D%20Graphics%3B%0Amodule%2Eexports%20%3D%20Graphics%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20new%20Graphics%20object%20with%20the%20same%20values%20as%20this%20one%2E%0A%20%2A%20Note%20that%20the%20only%20the%20properties%20of%20the%20object%20are%20cloned%2C%20not%20its%20transform%20%28position%2Cscale%2Cetc%29%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2Eclone%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20clone%20%3D%20new%20Graphics%28%29%3B%0A%0A%20%20%20%20clone%2Erenderable%20%20%20%20%3D%20this%2Erenderable%3B%0A%20%20%20%20clone%2EfillAlpha%20%20%20%20%20%3D%20this%2EfillAlpha%3B%0A%20%20%20%20clone%2ElineWidth%20%20%20%20%20%3D%20this%2ElineWidth%3B%0A%20%20%20%20clone%2ElineColor%20%20%20%20%20%3D%20this%2ElineColor%3B%0A%20%20%20%20clone%2Etint%20%20%20%20%20%20%20%20%20%20%3D%20this%2Etint%3B%0A%20%20%20%20clone%2EblendMode%20%20%20%20%20%3D%20this%2EblendMode%3B%0A%20%20%20%20clone%2EisMask%20%20%20%20%20%20%20%20%3D%20this%2EisMask%3B%0A%20%20%20%20clone%2EboundsPadding%20%3D%20this%2EboundsPadding%3B%0A%20%20%20%20clone%2Edirty%20%20%20%20%20%20%20%20%20%3D%20true%3B%0A%20%20%20%20clone%2EglDirty%20%20%20%20%20%20%20%3D%20true%3B%0A%20%20%20%20clone%2EcachedSpriteDirty%20%3D%20this%2EcachedSpriteDirty%3B%0A%0A%20%20%20%20%2F%2F%20copy%20graphics%20data%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2EgraphicsData%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20clone%2EgraphicsData%2Epush%28this%2EgraphicsData%5Bi%5D%2Eclone%28%29%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20clone%2EcurrentPath%20%3D%20clone%2EgraphicsData%5Bclone%2EgraphicsData%2Elength%20%2D%201%5D%3B%0A%0A%20%20%20%20clone%2EupdateLocalBounds%28%29%3B%0A%0A%20%20%20%20return%20clone%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Specifies%20the%20line%20style%20used%20for%20subsequent%20calls%20to%20Graphics%20methods%20such%20as%20the%20lineTo%28%29%20method%20or%20the%20drawCircle%28%29%20method%2E%0A%20%2A%0A%20%2A%20%40param%20lineWidth%20%7Bnumber%7D%20width%20of%20the%20line%20to%20draw%2C%20will%20update%20the%20objects%20stored%20style%0A%20%2A%20%40param%20color%20%7Bnumber%7D%20color%20of%20the%20line%20to%20draw%2C%20will%20update%20the%20objects%20stored%20style%0A%20%2A%20%40param%20alpha%20%7Bnumber%7D%20alpha%20of%20the%20line%20to%20draw%2C%20will%20update%20the%20objects%20stored%20style%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2ElineStyle%20%3D%20function%20%28lineWidth%2C%20color%2C%20alpha%29%0A%7B%0A%20%20%20%20this%2ElineWidth%20%3D%20lineWidth%20%7C%7C%200%3B%0A%20%20%20%20this%2ElineColor%20%3D%20color%20%7C%7C%200%3B%0A%20%20%20%20this%2ElineAlpha%20%3D%20%28alpha%20%3D%3D%3D%20undefined%29%20%3F%201%20%3A%20alpha%3B%0A%0A%20%20%20%20if%20%28this%2EcurrentPath%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2EcurrentPath%2Eshape%2Epoints%2Elength%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20halfway%20through%20a%20line%3F%20start%20a%20new%20one%21%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20shape%20%3D%20new%20math%2EPolygon%28this%2EcurrentPath%2Eshape%2Epoints%2Eslice%28%2D2%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20shape%2Eclosed%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EdrawShape%28shape%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20otherwise%20its%20empty%20so%20lets%20just%20set%20the%20line%20properties%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcurrentPath%2ElineWidth%20%3D%20this%2ElineWidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcurrentPath%2ElineColor%20%3D%20this%2ElineColor%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcurrentPath%2ElineAlpha%20%3D%20this%2ElineAlpha%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Moves%20the%20current%20drawing%20position%20to%20x%2C%20y%2E%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20the%20X%20coordinate%20to%20move%20to%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20the%20Y%20coordinate%20to%20move%20to%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%20%2A%2F%0AGraphics%2Eprototype%2EmoveTo%20%3D%20function%20%28x%2C%20y%29%0A%7B%0A%20%20%20%20var%20shape%20%3D%20new%20math%2EPolygon%28%5Bx%2Cy%5D%29%3B%0A%20%20%20%20shape%2Eclosed%20%3D%20false%3B%0A%20%20%20%20this%2EdrawShape%28shape%29%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Draws%20a%20line%20using%20the%20current%20line%20style%20from%20the%20current%20drawing%20position%20to%20%28x%2C%20y%29%3B%0A%20%2A%20The%20current%20drawing%20position%20is%20then%20set%20to%20%28x%2C%20y%29%2E%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20the%20X%20coordinate%20to%20draw%20to%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20the%20Y%20coordinate%20to%20draw%20to%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2ElineTo%20%3D%20function%20%28x%2C%20y%29%0A%7B%0A%20%20%20%20this%2EcurrentPath%2Eshape%2Epoints%2Epush%28x%2C%20y%29%3B%0A%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Calculate%20the%20points%20for%20a%20quadratic%20bezier%20curve%20and%20then%20draws%20it%2E%0A%20%2A%20Based%20on%3A%20https%3A%2F%2Fstackoverflow%2Ecom%2Fquestions%2F785097%2Fhow%2Ddo%2Di%2Dimplement%2Da%2Dbezier%2Dcurve%2Din%2Dc%0A%20%2A%0A%20%2A%20%40param%20cpX%20%7Bnumber%7D%20Control%20point%20x%0A%20%2A%20%40param%20cpY%20%7Bnumber%7D%20Control%20point%20y%0A%20%2A%20%40param%20toX%20%7Bnumber%7D%20Destination%20point%20x%0A%20%2A%20%40param%20toY%20%7Bnumber%7D%20Destination%20point%20y%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2EquadraticCurveTo%20%3D%20function%20%28cpX%2C%20cpY%2C%20toX%2C%20toY%29%0A%7B%0A%20%20%20%20if%20%28this%2EcurrentPath%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2EcurrentPath%2Eshape%2Epoints%2Elength%20%3D%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcurrentPath%2Eshape%2Epoints%20%3D%20%5B0%2C%200%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EmoveTo%280%2C0%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20xa%2C%0A%20%20%20%20%20%20%20%20ya%2C%0A%20%20%20%20%20%20%20%20n%20%3D%2020%2C%0A%20%20%20%20%20%20%20%20points%20%3D%20this%2EcurrentPath%2Eshape%2Epoints%3B%0A%0A%20%20%20%20if%20%28points%2Elength%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EmoveTo%280%2C%200%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20fromX%20%3D%20points%5Bpoints%2Elength%2D2%5D%3B%0A%20%20%20%20var%20fromY%20%3D%20points%5Bpoints%2Elength%2D1%5D%3B%0A%0A%20%20%20%20var%20j%20%3D%200%3B%0A%20%20%20%20for%20%28var%20i%20%3D%201%3B%20i%20%3C%3D%20n%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20j%20%3D%20i%20%2F%20n%3B%0A%0A%20%20%20%20%20%20%20%20xa%20%3D%20fromX%20%2B%20%28%20%28cpX%20%2D%20fromX%29%20%2A%20j%20%29%3B%0A%20%20%20%20%20%20%20%20ya%20%3D%20fromY%20%2B%20%28%20%28cpY%20%2D%20fromY%29%20%2A%20j%20%29%3B%0A%0A%20%20%20%20%20%20%20%20points%2Epush%28%20xa%20%2B%20%28%20%28%28cpX%20%2B%20%28%20%28toX%20%2D%20cpX%29%20%2A%20j%20%29%29%20%2D%20xa%29%20%2A%20j%20%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ya%20%2B%20%28%20%28%28cpY%20%2B%20%28%20%28toY%20%2D%20cpY%29%20%2A%20j%20%29%29%20%2D%20ya%29%20%2A%20j%20%29%20%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Edirty%20%3D%20this%2EboundsDirty%20%3D%20true%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Calculate%20the%20points%20for%20a%20bezier%20curve%20and%20then%20draws%20it%2E%0A%20%2A%0A%20%2A%20%40param%20cpX%20%7Bnumber%7D%20Control%20point%20x%0A%20%2A%20%40param%20cpY%20%7Bnumber%7D%20Control%20point%20y%0A%20%2A%20%40param%20cpX2%20%7Bnumber%7D%20Second%20Control%20point%20x%0A%20%2A%20%40param%20cpY2%20%7Bnumber%7D%20Second%20Control%20point%20y%0A%20%2A%20%40param%20toX%20%7Bnumber%7D%20Destination%20point%20x%0A%20%2A%20%40param%20toY%20%7Bnumber%7D%20Destination%20point%20y%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2EbezierCurveTo%20%3D%20function%20%28cpX%2C%20cpY%2C%20cpX2%2C%20cpY2%2C%20toX%2C%20toY%29%0A%7B%0A%20%20%20%20if%20%28this%2EcurrentPath%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2EcurrentPath%2Eshape%2Epoints%2Elength%20%3D%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcurrentPath%2Eshape%2Epoints%20%3D%20%5B0%2C%200%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EmoveTo%280%2C0%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20n%20%3D%2020%2C%0A%20%20%20%20%20%20%20%20dt%2C%0A%20%20%20%20%20%20%20%20dt2%2C%0A%20%20%20%20%20%20%20%20dt3%2C%0A%20%20%20%20%20%20%20%20t2%2C%0A%20%20%20%20%20%20%20%20t3%2C%0A%20%20%20%20%20%20%20%20points%20%3D%20this%2EcurrentPath%2Eshape%2Epoints%3B%0A%0A%20%20%20%20var%20fromX%20%3D%20points%5Bpoints%2Elength%2D2%5D%3B%0A%20%20%20%20var%20fromY%20%3D%20points%5Bpoints%2Elength%2D1%5D%3B%0A%0A%20%20%20%20var%20j%20%3D%200%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%201%3B%20i%20%3C%3D%20n%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20j%20%3D%20i%20%2F%20n%3B%0A%0A%20%20%20%20%20%20%20%20dt%20%3D%20%281%20%2D%20j%29%3B%0A%20%20%20%20%20%20%20%20dt2%20%3D%20dt%20%2A%20dt%3B%0A%20%20%20%20%20%20%20%20dt3%20%3D%20dt2%20%2A%20dt%3B%0A%0A%20%20%20%20%20%20%20%20t2%20%3D%20j%20%2A%20j%3B%0A%20%20%20%20%20%20%20%20t3%20%3D%20t2%20%2A%20j%3B%0A%0A%20%20%20%20%20%20%20%20points%2Epush%28%20dt3%20%2A%20fromX%20%2B%203%20%2A%20dt2%20%2A%20j%20%2A%20cpX%20%2B%203%20%2A%20dt%20%2A%20t2%20%2A%20cpX2%20%2B%20t3%20%2A%20toX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dt3%20%2A%20fromY%20%2B%203%20%2A%20dt2%20%2A%20j%20%2A%20cpY%20%2B%203%20%2A%20dt%20%2A%20t2%20%2A%20cpY2%20%2B%20t3%20%2A%20toY%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Edirty%20%3D%20this%2EboundsDirty%20%3D%20true%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20arcTo%28%29%20method%20creates%20an%20arc%2Fcurve%20between%20two%20tangents%20on%20the%20canvas%2E%0A%20%2A%0A%20%2A%20%22borrowed%22%20from%20https%3A%2F%2Fcode%2Egoogle%2Ecom%2Fp%2Ffxcanvas%2F%20%2D%20thanks%20google%21%0A%20%2A%0A%20%2A%20%40param%20x1%20%7Bnumber%7D%20The%20x%2Dcoordinate%20of%20the%20beginning%20of%20the%20arc%0A%20%2A%20%40param%20y1%20%7Bnumber%7D%20The%20y%2Dcoordinate%20of%20the%20beginning%20of%20the%20arc%0A%20%2A%20%40param%20x2%20%7Bnumber%7D%20The%20x%2Dcoordinate%20of%20the%20end%20of%20the%20arc%0A%20%2A%20%40param%20y2%20%7Bnumber%7D%20The%20y%2Dcoordinate%20of%20the%20end%20of%20the%20arc%0A%20%2A%20%40param%20radius%20%7Bnumber%7D%20The%20radius%20of%20the%20arc%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2EarcTo%20%3D%20function%20%28x1%2C%20y1%2C%20x2%2C%20y2%2C%20radius%29%0A%7B%0A%20%20%20%20if%20%28this%2EcurrentPath%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2EcurrentPath%2Eshape%2Epoints%2Elength%20%3D%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcurrentPath%2Eshape%2Epoints%2Epush%28x1%2C%20y1%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EmoveTo%28x1%2C%20y1%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20points%20%3D%20this%2EcurrentPath%2Eshape%2Epoints%2C%0A%20%20%20%20%20%20%20%20fromX%20%3D%20points%5Bpoints%2Elength%2D2%5D%2C%0A%20%20%20%20%20%20%20%20fromY%20%3D%20points%5Bpoints%2Elength%2D1%5D%2C%0A%20%20%20%20%20%20%20%20a1%20%3D%20fromY%20%2D%20y1%2C%0A%20%20%20%20%20%20%20%20b1%20%3D%20fromX%20%2D%20x1%2C%0A%20%20%20%20%20%20%20%20a2%20%3D%20y2%20%20%20%2D%20y1%2C%0A%20%20%20%20%20%20%20%20b2%20%3D%20x2%20%20%20%2D%20x1%2C%0A%20%20%20%20%20%20%20%20mm%20%3D%20Math%2Eabs%28a1%20%2A%20b2%20%2D%20b1%20%2A%20a2%29%3B%0A%0A%20%20%20%20if%20%28mm%20%3C%201%2E0e%2D8%20%7C%7C%20radius%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28points%5Bpoints%2Elength%2D2%5D%20%21%3D%3D%20x1%20%7C%7C%20points%5Bpoints%2Elength%2D1%5D%20%21%3D%3D%20y1%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%2Epush%28x1%2C%20y1%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20dd%20%3D%20a1%20%2A%20a1%20%2B%20b1%20%2A%20b1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20cc%20%3D%20a2%20%2A%20a2%20%2B%20b2%20%2A%20b2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20tt%20%3D%20a1%20%2A%20a2%20%2B%20b1%20%2A%20b2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20k1%20%3D%20radius%20%2A%20Math%2Esqrt%28dd%29%20%2F%20mm%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20k2%20%3D%20radius%20%2A%20Math%2Esqrt%28cc%29%20%2F%20mm%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20j1%20%3D%20k1%20%2A%20tt%20%2F%20dd%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20j2%20%3D%20k2%20%2A%20tt%20%2F%20cc%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20cx%20%3D%20k1%20%2A%20b2%20%2B%20k2%20%2A%20b1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20cy%20%3D%20k1%20%2A%20a2%20%2B%20k2%20%2A%20a1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20px%20%3D%20b1%20%2A%20%28k2%20%2B%20j1%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20py%20%3D%20a1%20%2A%20%28k2%20%2B%20j1%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20qx%20%3D%20b2%20%2A%20%28k1%20%2B%20j2%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20qy%20%3D%20a2%20%2A%20%28k1%20%2B%20j2%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20startAngle%20%3D%20Math%2Eatan2%28py%20%2D%20cy%2C%20px%20%2D%20cx%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20endAngle%20%20%20%3D%20Math%2Eatan2%28qy%20%2D%20cy%2C%20qx%20%2D%20cx%29%3B%0A%0A%20%20%20%20%20%20%20%20this%2Earc%28cx%20%2B%20x1%2C%20cy%20%2B%20y1%2C%20radius%2C%20startAngle%2C%20endAngle%2C%20b1%20%2A%20a2%20%3E%20b2%20%2A%20a1%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Edirty%20%3D%20this%2EboundsDirty%20%3D%20true%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20arc%20method%20creates%20an%20arc%2Fcurve%20%28used%20to%20create%20circles%2C%20or%20parts%20of%20circles%29%2E%0A%20%2A%0A%20%2A%20%40param%20cx%20%7Bnumber%7D%20The%20x%2Dcoordinate%20of%20the%20center%20of%20the%20circle%0A%20%2A%20%40param%20cy%20%7Bnumber%7D%20The%20y%2Dcoordinate%20of%20the%20center%20of%20the%20circle%0A%20%2A%20%40param%20radius%20%7Bnumber%7D%20The%20radius%20of%20the%20circle%0A%20%2A%20%40param%20startAngle%20%7Bnumber%7D%20The%20starting%20angle%2C%20in%20radians%20%280%20is%20at%20the%203%20o%27clock%20position%20of%20the%20arc%27s%20circle%29%0A%20%2A%20%40param%20endAngle%20%7Bnumber%7D%20The%20ending%20angle%2C%20in%20radians%0A%20%2A%20%40param%20anticlockwise%20%7Bboolean%7D%20Optional%2E%20Specifies%20whether%20the%20drawing%20should%20be%20counterclockwise%20or%20clockwise%2E%20False%20is%20default%2C%20and%20indicates%20clockwise%2C%20while%20true%20indicates%20counter%2Dclockwise%2E%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2Earc%20%3D%20function%28cx%2C%20cy%2C%20radius%2C%20startAngle%2C%20endAngle%2C%20anticlockwise%29%0A%7B%0A%20%20%20%20anticlockwise%20%3D%20anticlockwise%20%7C%7C%20false%3B%0A%0A%20%20%20%20if%20%28startAngle%20%3D%3D%3D%20endAngle%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%28%20%21anticlockwise%20%26%26%20endAngle%20%3C%3D%20startAngle%20%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20endAngle%20%2B%3D%20Math%2EPI%20%2A%202%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%28%20anticlockwise%20%26%26%20startAngle%20%3C%3D%20endAngle%20%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20startAngle%20%2B%3D%20Math%2EPI%20%2A%202%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20sweep%20%3D%20anticlockwise%20%3F%20%28startAngle%20%2D%20endAngle%29%20%2A%20%2D1%20%3A%20%28endAngle%20%2D%20startAngle%29%3B%0A%20%20%20%20var%20segs%20%3D%20%20Math%2Eceil%28Math%2Eabs%28sweep%29%20%2F%20%28Math%2EPI%20%2A%202%29%29%20%2A%2040%3B%0A%0A%20%20%20%20if%28sweep%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20startX%20%3D%20cx%20%2B%20Math%2Ecos%28startAngle%29%20%2A%20radius%3B%0A%20%20%20%20var%20startY%20%3D%20cy%20%2B%20Math%2Esin%28startAngle%29%20%2A%20radius%3B%0A%0A%20%20%20%20if%20%28this%2EcurrentPath%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EcurrentPath%2Eshape%2Epoints%2Epush%28startX%2C%20startY%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EmoveTo%28startX%2C%20startY%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20points%20%3D%20this%2EcurrentPath%2Eshape%2Epoints%3B%0A%0A%20%20%20%20var%20theta%20%3D%20sweep%2F%28segs%2A2%29%3B%0A%20%20%20%20var%20theta2%20%3D%20theta%2A2%3B%0A%0A%20%20%20%20var%20cTheta%20%3D%20Math%2Ecos%28theta%29%3B%0A%20%20%20%20var%20sTheta%20%3D%20Math%2Esin%28theta%29%3B%0A%0A%20%20%20%20var%20segMinus%20%3D%20segs%20%2D%201%3B%0A%0A%20%20%20%20var%20remainder%20%3D%20%28%20segMinus%20%25%201%20%29%20%2F%20segMinus%3B%0A%0A%20%20%20%20for%28var%20i%3D0%3B%20i%3C%3DsegMinus%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20real%20%3D%20%20i%20%2B%20remainder%20%2A%20i%3B%0A%0A%0A%20%20%20%20%20%20%20%20var%20angle%20%3D%20%28%28theta%29%20%2B%20startAngle%20%2B%20%28theta2%20%2A%20real%29%29%3B%0A%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20Math%2Ecos%28angle%29%3B%0A%20%20%20%20%20%20%20%20var%20s%20%3D%20%2DMath%2Esin%28angle%29%3B%0A%0A%20%20%20%20%20%20%20%20points%2Epush%28%28%20%28cTheta%20%2A%20%20c%29%20%2B%20%28sTheta%20%2A%20s%29%20%29%20%2A%20radius%20%2B%20cx%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28%20%28cTheta%20%2A%20%2Ds%29%20%2B%20%28sTheta%20%2A%20c%29%20%29%20%2A%20radius%20%2B%20cy%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Edirty%20%3D%20this%2EboundsDirty%20%3D%20true%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Specifies%20a%20simple%20one%2Dcolor%20fill%20that%20subsequent%20calls%20to%20other%20Graphics%20methods%0A%20%2A%20%28such%20as%20lineTo%28%29%20or%20drawCircle%28%29%29%20use%20when%20drawing%2E%0A%20%2A%0A%20%2A%20%40param%20color%20%7Bnumber%7D%20the%20color%20of%20the%20fill%0A%20%2A%20%40param%20alpha%20%7Bnumber%7D%20the%20alpha%20of%20the%20fill%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2EbeginFill%20%3D%20function%20%28color%2C%20alpha%29%0A%7B%0A%20%20%20%20this%2Efilling%20%3D%20true%3B%0A%20%20%20%20this%2EfillColor%20%3D%20color%20%7C%7C%200%3B%0A%20%20%20%20this%2EfillAlpha%20%3D%20%28alpha%20%3D%3D%3D%20undefined%29%20%3F%201%20%3A%20alpha%3B%0A%0A%20%20%20%20if%20%28this%2EcurrentPath%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2EcurrentPath%2Eshape%2Epoints%2Elength%20%3C%3D%202%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcurrentPath%2Efill%20%3D%20this%2Efilling%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcurrentPath%2EfillColor%20%3D%20this%2EfillColor%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcurrentPath%2EfillAlpha%20%3D%20this%2EfillAlpha%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20a%20fill%20to%20the%20lines%20and%20shapes%20that%20were%20added%20since%20the%20last%20call%20to%20the%20beginFill%28%29%20method%2E%0A%20%2A%0A%20%2A%20%40return%20%7BGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2EendFill%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Efilling%20%3D%20false%3B%0A%20%20%20%20this%2EfillColor%20%3D%20null%3B%0A%20%20%20%20this%2EfillAlpha%20%3D%201%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coord%20of%20the%20top%2Dleft%20of%20the%20rectangle%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coord%20of%20the%20top%2Dleft%20of%20the%20rectangle%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20The%20width%20of%20the%20rectangle%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20The%20height%20of%20the%20rectangle%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2EdrawRect%20%3D%20function%20%28%20x%2C%20y%2C%20width%2C%20height%20%29%0A%7B%0A%20%20%20%20this%2EdrawShape%28new%20math%2ERectangle%28x%2Cy%2C%20width%2C%20height%29%29%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coord%20of%20the%20top%2Dleft%20of%20the%20rectangle%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coord%20of%20the%20top%2Dleft%20of%20the%20rectangle%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20The%20width%20of%20the%20rectangle%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20The%20height%20of%20the%20rectangle%0A%20%2A%20%40param%20radius%20%7Bnumber%7D%20Radius%20of%20the%20rectangle%20corners%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2EdrawRoundedRect%20%3D%20function%20%28%20x%2C%20y%2C%20width%2C%20height%2C%20radius%20%29%0A%7B%0A%20%20%20%20this%2EdrawShape%28new%20math%2ERoundedRectangle%28x%2C%20y%2C%20width%2C%20height%2C%20radius%29%29%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Draws%20a%20circle%2E%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coordinate%20of%20the%20center%20of%20the%20circle%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coordinate%20of%20the%20center%20of%20the%20circle%0A%20%2A%20%40param%20radius%20%7Bnumber%7D%20The%20radius%20of%20the%20circle%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2EdrawCircle%20%3D%20function%20%28x%2C%20y%2C%20radius%29%0A%7B%0A%20%20%20%20this%2EdrawShape%28new%20math%2ECircle%28x%2Cy%2C%20radius%29%29%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Draws%20an%20ellipse%2E%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coordinate%20of%20the%20center%20of%20the%20ellipse%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coordinate%20of%20the%20center%20of%20the%20ellipse%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20The%20half%20width%20of%20the%20ellipse%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20The%20half%20height%20of%20the%20ellipse%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2EdrawEllipse%20%3D%20function%20%28x%2C%20y%2C%20width%2C%20height%29%0A%7B%0A%20%20%20%20this%2EdrawShape%28new%20math%2EEllipse%28x%2C%20y%2C%20width%2C%20height%29%29%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Draws%20a%20polygon%20using%20the%20given%20path%2E%0A%20%2A%0A%20%2A%20%40param%20path%20%7Bnumber%5B%5D%7CPIXI%2EPoint%5B%5D%7D%20The%20path%20data%20used%20to%20construct%20the%20polygon%2E%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2EdrawPolygon%20%3D%20function%20%28path%29%0A%7B%0A%20%20%20%20%2F%2F%20prevents%20an%20argument%20assignment%20deopt%0A%20%20%20%20%2F%2F%20see%20section%203%2E1%3A%20https%3A%2F%2Fgithub%2Ecom%2Fpetkaantonov%2Fbluebird%2Fwiki%2FOptimization%2Dkillers%233%2Dmanaging%2Darguments%0A%20%20%20%20var%20points%20%3D%20path%3B%0A%0A%20%20%20%20var%20closed%20%3D%20true%3B%0A%0A%20%20%20%20if%20%28points%20instanceof%20math%2EPolygon%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20closed%20%3D%20points%2Eclosed%3B%0A%20%20%20%20%20%20%20%20points%20%3D%20points%2Epoints%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%21Array%2EisArray%28points%29%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20prevents%20an%20argument%20leak%20deopt%0A%20%20%20%20%20%20%20%20%2F%2F%20see%20section%203%2E2%3A%20https%3A%2F%2Fgithub%2Ecom%2Fpetkaantonov%2Fbluebird%2Fwiki%2FOptimization%2Dkillers%233%2Dmanaging%2Darguments%0A%20%20%20%20%20%20%20%20points%20%3D%20new%20Array%28arguments%2Elength%29%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20points%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5Bi%5D%20%3D%20arguments%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20shape%20%3D%20new%20math%2EPolygon%28points%29%3B%0A%20%20%20%20shape%2Eclosed%20%3D%20closed%3B%0A%0A%20%20%20%20this%2EdrawShape%28shape%29%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Clears%20the%20graphics%20that%20were%20drawn%20to%20this%20Graphics%20object%2C%20and%20resets%20fill%20and%20line%20style%20settings%2E%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EGraphics%7D%0A%20%2A%2F%0AGraphics%2Eprototype%2Eclear%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2ElineWidth%20%3D%200%3B%0A%20%20%20%20this%2Efilling%20%3D%20false%3B%0A%0A%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%20%20%20%20this%2EclearDirty%20%3D%20true%3B%0A%20%20%20%20this%2EgraphicsData%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Useful%20function%20that%20returns%20a%20texture%20of%20the%20graphics%20object%20that%20can%20then%20be%20used%20to%20create%20sprites%0A%20%2A%20This%20can%20be%20quite%20useful%20if%20your%20geometry%20is%20complicated%20and%20needs%20to%20be%20reused%20multiple%20times%2E%0A%20%2A%0A%20%2A%20%40param%20resolution%20%7Bnumber%7D%20The%20resolution%20of%20the%20texture%20being%20generated%0A%20%2A%20%40param%20scaleMode%20%7Bnumber%7D%20Should%20be%20one%20of%20the%20scaleMode%20consts%0A%20%2A%20%40return%20%7BPIXI%2ETexture%7D%20a%20texture%20of%20the%20graphics%20object%0A%20%2A%2F%0AGraphics%2Eprototype%2EgenerateTexture%20%3D%20function%20%28renderer%2C%20resolution%2C%20scaleMode%29%0A%7B%0A%0A%20%20%20%20resolution%20%3D%20resolution%20%7C%7C%201%3B%0A%0A%20%20%20%20var%20bounds%20%3D%20this%2EgetLocalBounds%28%29%3B%0A%0A%20%20%20%20var%20canvasBuffer%20%3D%20new%20CanvasBuffer%28bounds%2Ewidth%20%2A%20resolution%2C%20bounds%2Eheight%20%2A%20resolution%29%3B%0A%0A%20%20%20%20var%20texture%20%3D%20Texture%2EfromCanvas%28canvasBuffer%2Ecanvas%2C%20scaleMode%29%3B%0A%20%20%20%20texture%2EbaseTexture%2Eresolution%20%3D%20resolution%3B%0A%0A%20%20%20%20canvasBuffer%2Econtext%2Escale%28resolution%2C%20resolution%29%3B%0A%0A%20%20%20%20canvasBuffer%2Econtext%2Etranslate%28%2Dbounds%2Ex%2C%2Dbounds%2Ey%29%3B%0A%0A%20%20%20%20CanvasGraphics%2ErenderGraphics%28this%2C%20canvasBuffer%2Econtext%29%3B%0A%0A%20%20%20%20return%20texture%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20WebGL%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AGraphics%2Eprototype%2E%5FrenderWebGL%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20%2F%2F%20if%20the%20sprite%20is%20not%20visible%20or%20the%20alpha%20is%200%20then%20no%20need%20to%20render%20this%20element%0A%0A%20%20%20%20%2F%2F%20this%20code%20may%20still%20be%20needed%20so%20leaving%20for%20now%2E%2E%0A%20%20%20%20%2F%2F%0A%20%20%20%20%2F%2A%0A%20%20%20%20if%20%28this%2E%5FcacheAsBitmap%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2Edirty%20%7C%7C%20this%2EcachedSpriteDirty%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FgenerateCachedSprite%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20we%20will%20also%20need%20to%20update%20the%20texture%20on%20the%20gpu%20too%21%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EupdateCachedSpriteTexture%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcachedSpriteDirty%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Edirty%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this%2E%5FcachedSprite%2EworldAlpha%20%3D%20this%2EworldAlpha%3B%0A%0A%20%20%20%20%20%20%20%20Sprite%2Eprototype%2ErenderWebGL%2Ecall%28this%2E%5FcachedSprite%2C%20renderer%29%3B%0A%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2A%2F%0A%0A%20%20%20%20if%20%28this%2EglDirty%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this%2EglDirty%20%3D%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20renderer%2EsetObjectRenderer%28renderer%2Eplugins%2Egraphics%29%3B%0A%20%20%20%20renderer%2Eplugins%2Egraphics%2Erender%28this%29%3B%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20Canvas%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AGraphics%2Eprototype%2E%5FrenderCanvas%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20if%20%28this%2EisMask%20%3D%3D%3D%20true%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20if%20the%20tint%20has%20changed%2C%20set%20the%20graphics%20object%20to%20dirty%2E%0A%20%20%20%20if%20%28this%2E%5FprevTint%20%21%3D%3D%20this%2Etint%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20this%20code%20may%20still%20be%20needed%20so%20leaving%20for%20now%2E%2E%0A%20%20%20%20%2F%2F%0A%20%20%20%20%2F%2A%0A%20%20%20%20if%20%28this%2E%5FcacheAsBitmap%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2Edirty%20%7C%7C%20this%2EcachedSpriteDirty%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FgenerateCachedSprite%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20we%20will%20also%20need%20to%20update%20the%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EupdateCachedSpriteTexture%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcachedSpriteDirty%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Edirty%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this%2E%5FcachedSprite%2Ealpha%20%3D%20this%2Ealpha%3B%0A%0A%20%20%20%20%20%20%20%20Sprite%2Eprototype%2E%5FrenderCanvas%2Ecall%28this%2E%5FcachedSprite%2C%20renderer%29%3B%0A%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2A%2F%0A%20%20%20%20var%20context%20%3D%20renderer%2Econtext%3B%0A%20%20%20%20var%20transform%20%3D%20this%2EworldTransform%3B%0A%0A%20%20%20%20var%20compositeOperation%20%3D%20renderer%2EblendModes%5Bthis%2EblendMode%5D%3B%0A%20%20%20%20if%20%28compositeOperation%20%21%3D%3D%20context%2EglobalCompositeOperation%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20context%2EglobalCompositeOperation%20%3D%20compositeOperation%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20resolution%20%3D%20renderer%2Eresolution%3B%0A%20%20%20%20context%2EsetTransform%28%0A%20%20%20%20%20%20%20%20transform%2Ea%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20transform%2Eb%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20transform%2Ec%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20transform%2Ed%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20transform%2Etx%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20transform%2Ety%20%2A%20resolution%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20CanvasGraphics%2ErenderGraphics%28this%2C%20context%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Retrieves%20the%20bounds%20of%20the%20graphic%20shape%20as%20a%20rectangle%20object%0A%20%2A%0A%20%2A%20%40param%20%5Bmatrix%5D%20%7BPIXI%2EMatrix%7D%20The%20world%20transform%20matrix%20to%20use%2C%20defaults%20to%20this%0A%20%2A%20%20object%27s%20worldTransform%2E%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20the%20rectangular%20bounding%20area%0A%20%2A%2F%0AGraphics%2Eprototype%2EgetBounds%20%3D%20function%20%28matrix%29%0A%7B%0A%20%20%20%20if%28%21this%2E%5FcurrentBounds%29%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20return%20an%20empty%20object%20if%20the%20item%20is%20a%20mask%21%0A%20%20%20%20%20%20%20%20if%20%28%21this%2Erenderable%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20math%2ERectangle%2EEMPTY%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28this%2EboundsDirty%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EupdateLocalBounds%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EglDirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcachedSpriteDirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EboundsDirty%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20bounds%20%3D%20this%2E%5FlocalBounds%3B%0A%0A%20%20%20%20%20%20%20%20var%20w0%20%3D%20bounds%2Ex%3B%0A%20%20%20%20%20%20%20%20var%20w1%20%3D%20bounds%2Ewidth%20%2B%20bounds%2Ex%3B%0A%0A%20%20%20%20%20%20%20%20var%20h0%20%3D%20bounds%2Ey%3B%0A%20%20%20%20%20%20%20%20var%20h1%20%3D%20bounds%2Eheight%20%2B%20bounds%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20var%20worldTransform%20%3D%20matrix%20%7C%7C%20this%2EworldTransform%3B%0A%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20worldTransform%2Ea%3B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20worldTransform%2Eb%3B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20worldTransform%2Ec%3B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%20worldTransform%2Ed%3B%0A%20%20%20%20%20%20%20%20var%20tx%20%3D%20worldTransform%2Etx%3B%0A%20%20%20%20%20%20%20%20var%20ty%20%3D%20worldTransform%2Ety%3B%0A%0A%20%20%20%20%20%20%20%20var%20x1%20%3D%20a%20%2A%20w1%20%2B%20c%20%2A%20h1%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20var%20y1%20%3D%20d%20%2A%20h1%20%2B%20b%20%2A%20w1%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20var%20x2%20%3D%20a%20%2A%20w0%20%2B%20c%20%2A%20h1%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20var%20y2%20%3D%20d%20%2A%20h1%20%2B%20b%20%2A%20w0%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20var%20x3%20%3D%20a%20%2A%20w0%20%2B%20c%20%2A%20h0%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20var%20y3%20%3D%20d%20%2A%20h0%20%2B%20b%20%2A%20w0%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20var%20x4%20%3D%20%20a%20%2A%20w1%20%2B%20c%20%2A%20h0%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20var%20y4%20%3D%20%20d%20%2A%20h0%20%2B%20b%20%2A%20w1%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20var%20maxX%20%3D%20x1%3B%0A%20%20%20%20%20%20%20%20var%20maxY%20%3D%20y1%3B%0A%0A%20%20%20%20%20%20%20%20var%20minX%20%3D%20x1%3B%0A%20%20%20%20%20%20%20%20var%20minY%20%3D%20y1%3B%0A%0A%20%20%20%20%20%20%20%20minX%20%3D%20x2%20%3C%20minX%20%3F%20x2%20%3A%20minX%3B%0A%20%20%20%20%20%20%20%20minX%20%3D%20x3%20%3C%20minX%20%3F%20x3%20%3A%20minX%3B%0A%20%20%20%20%20%20%20%20minX%20%3D%20x4%20%3C%20minX%20%3F%20x4%20%3A%20minX%3B%0A%0A%20%20%20%20%20%20%20%20minY%20%3D%20y2%20%3C%20minY%20%3F%20y2%20%3A%20minY%3B%0A%20%20%20%20%20%20%20%20minY%20%3D%20y3%20%3C%20minY%20%3F%20y3%20%3A%20minY%3B%0A%20%20%20%20%20%20%20%20minY%20%3D%20y4%20%3C%20minY%20%3F%20y4%20%3A%20minY%3B%0A%0A%20%20%20%20%20%20%20%20maxX%20%3D%20x2%20%3E%20maxX%20%3F%20x2%20%3A%20maxX%3B%0A%20%20%20%20%20%20%20%20maxX%20%3D%20x3%20%3E%20maxX%20%3F%20x3%20%3A%20maxX%3B%0A%20%20%20%20%20%20%20%20maxX%20%3D%20x4%20%3E%20maxX%20%3F%20x4%20%3A%20maxX%3B%0A%0A%20%20%20%20%20%20%20%20maxY%20%3D%20y2%20%3E%20maxY%20%3F%20y2%20%3A%20maxY%3B%0A%20%20%20%20%20%20%20%20maxY%20%3D%20y3%20%3E%20maxY%20%3F%20y3%20%3A%20maxY%3B%0A%20%20%20%20%20%20%20%20maxY%20%3D%20y4%20%3E%20maxY%20%3F%20y4%20%3A%20maxY%3B%0A%0A%20%20%20%20%20%20%20%20this%2E%5Fbounds%2Ex%20%3D%20minX%3B%0A%20%20%20%20%20%20%20%20this%2E%5Fbounds%2Ewidth%20%3D%20maxX%20%2D%20minX%3B%0A%0A%20%20%20%20%20%20%20%20this%2E%5Fbounds%2Ey%20%3D%20minY%3B%0A%20%20%20%20%20%20%20%20this%2E%5Fbounds%2Eheight%20%3D%20maxY%20%2D%20minY%3B%0A%0A%20%20%20%20%20%20%20%20this%2E%5FcurrentBounds%20%3D%20this%2E%5Fbounds%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20this%2E%5FcurrentBounds%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%2A%20Tests%20if%20a%20point%20is%20inside%20this%20graphics%20object%0A%2A%0A%2A%20%40param%20point%20%7BPIXI%2EPoint%7D%20the%20point%20to%20test%0A%2A%20%40return%20%7Bboolean%7D%20the%20result%20of%20the%20test%0A%2A%2F%0AGraphics%2Eprototype%2EcontainsPoint%20%3D%20function%28%20point%20%29%0A%7B%0A%20%20%20%20this%2EworldTransform%2EapplyInverse%28point%2C%20%20tempPoint%29%3B%0A%0A%20%20%20%20var%20graphicsData%20%3D%20this%2EgraphicsData%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20graphicsData%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20data%20%3D%20graphicsData%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%21data%2Efill%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20only%20deal%20with%20fills%2E%2E%0A%20%20%20%20%20%20%20%20if%20%28data%2Eshape%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%20data%2Eshape%2Econtains%28%20tempPoint%2Ex%2C%20tempPoint%2Ey%20%29%20%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20false%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Update%20the%20bounds%20of%20the%20object%0A%20%2A%0A%20%2A%2F%0AGraphics%2Eprototype%2EupdateLocalBounds%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20minX%20%3D%20Infinity%3B%0A%20%20%20%20var%20maxX%20%3D%20%2DInfinity%3B%0A%0A%20%20%20%20var%20minY%20%3D%20Infinity%3B%0A%20%20%20%20var%20maxY%20%3D%20%2DInfinity%3B%0A%0A%20%20%20%20if%20%28this%2EgraphicsData%2Elength%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20shape%2C%20points%2C%20x%2C%20y%2C%20w%2C%20h%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2EgraphicsData%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20data%20%3D%20this%2EgraphicsData%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20type%20%3D%20data%2Etype%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20lineWidth%20%3D%20data%2ElineWidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20shape%20%3D%20data%2Eshape%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28type%20%3D%3D%3D%20CONST%2ESHAPES%2ERECT%20%7C%7C%20type%20%3D%3D%3D%20CONST%2ESHAPES%2ERREC%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20shape%2Ex%20%2D%20lineWidth%2F2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20shape%2Ey%20%2D%20lineWidth%2F2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20w%20%3D%20shape%2Ewidth%20%2B%20lineWidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20%3D%20shape%2Eheight%20%2B%20lineWidth%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minX%20%3D%20x%20%3C%20minX%20%3F%20x%20%3A%20minX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxX%20%3D%20x%20%2B%20w%20%3E%20maxX%20%3F%20x%20%2B%20w%20%3A%20maxX%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minY%20%3D%20y%20%3C%20minY%20%3F%20y%20%3A%20minY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxY%20%3D%20y%20%2B%20h%20%3E%20maxY%20%3F%20y%20%2B%20h%20%3A%20maxY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28type%20%3D%3D%3D%20CONST%2ESHAPES%2ECIRC%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20shape%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20shape%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20w%20%3D%20shape%2Eradius%20%2B%20lineWidth%2F2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20%3D%20shape%2Eradius%20%2B%20lineWidth%2F2%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minX%20%3D%20x%20%2D%20w%20%3C%20minX%20%3F%20x%20%2D%20w%20%3A%20minX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxX%20%3D%20x%20%2B%20w%20%3E%20maxX%20%3F%20x%20%2B%20w%20%3A%20maxX%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minY%20%3D%20y%20%2D%20h%20%3C%20minY%20%3F%20y%20%2D%20h%20%3A%20minY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxY%20%3D%20y%20%2B%20h%20%3E%20maxY%20%3F%20y%20%2B%20h%20%3A%20maxY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28type%20%3D%3D%3D%20CONST%2ESHAPES%2EELIP%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20shape%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20shape%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20w%20%3D%20shape%2Ewidth%20%2B%20lineWidth%2F2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20%3D%20shape%2Eheight%20%2B%20lineWidth%2F2%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minX%20%3D%20x%20%2D%20w%20%3C%20minX%20%3F%20x%20%2D%20w%20%3A%20minX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxX%20%3D%20x%20%2B%20w%20%3E%20maxX%20%3F%20x%20%2B%20w%20%3A%20maxX%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minY%20%3D%20y%20%2D%20h%20%3C%20minY%20%3F%20y%20%2D%20h%20%3A%20minY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxY%20%3D%20y%20%2B%20h%20%3E%20maxY%20%3F%20y%20%2B%20h%20%3A%20maxY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20POLY%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20points%20%3D%20shape%2Epoints%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%3B%20j%20%3C%20points%2Elength%3B%20j%20%2B%3D%202%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20points%5Bj%2B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minX%20%3D%20x%2DlineWidth%20%3C%20minX%20%3F%20x%2DlineWidth%20%3A%20minX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxX%20%3D%20x%2BlineWidth%20%3E%20maxX%20%3F%20x%2BlineWidth%20%3A%20maxX%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minY%20%3D%20y%2DlineWidth%20%3C%20minY%20%3F%20y%2DlineWidth%20%3A%20minY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxY%20%3D%20y%2BlineWidth%20%3E%20maxY%20%3F%20y%2BlineWidth%20%3A%20maxY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20minX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20maxX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20minY%20%3D%200%3B%0A%20%20%20%20%20%20%20%20maxY%20%3D%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20padding%20%3D%20this%2EboundsPadding%3B%0A%0A%20%20%20%20this%2E%5FlocalBounds%2Ex%20%3D%20minX%20%2D%20padding%3B%0A%20%20%20%20this%2E%5FlocalBounds%2Ewidth%20%3D%20%28maxX%20%2D%20minX%29%20%2B%20padding%20%2A%202%3B%0A%0A%20%20%20%20this%2E%5FlocalBounds%2Ey%20%3D%20minY%20%2D%20padding%3B%0A%20%20%20%20this%2E%5FlocalBounds%2Eheight%20%3D%20%28maxY%20%2D%20minY%29%20%2B%20padding%20%2A%202%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Generates%20the%20cached%20sprite%20when%20the%20sprite%20has%20cacheAsBitmap%20%3D%20true%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0A%2F%2A%0AGraphics%2Eprototype%2E%5FgenerateCachedSprite%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20bounds%20%3D%20this%2EgetLocalBounds%28%29%3B%0A%0A%20%20%20%20if%20%28%21this%2E%5FcachedSprite%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20canvasBuffer%20%3D%20new%20CanvasBuffer%28bounds%2Ewidth%2C%20bounds%2Eheight%29%3B%0A%20%20%20%20%20%20%20%20var%20texture%20%3D%20Texture%2EfromCanvas%28canvasBuffer%2Ecanvas%29%3B%0A%0A%20%20%20%20%20%20%20%20this%2E%5FcachedSprite%20%3D%20new%20Sprite%28texture%29%3B%0A%20%20%20%20%20%20%20%20this%2E%5FcachedSprite%2Ebuffer%20%3D%20canvasBuffer%3B%0A%0A%20%20%20%20%20%20%20%20this%2E%5FcachedSprite%2EworldTransform%20%3D%20this%2EworldTransform%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FcachedSprite%2Ebuffer%2Eresize%28bounds%2Ewidth%2C%20bounds%2Eheight%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20leverage%20the%20anchor%20to%20account%20for%20the%20offset%20of%20the%20element%0A%20%20%20%20this%2E%5FcachedSprite%2Eanchor%2Ex%20%3D%20%2D%28%20bounds%2Ex%20%2F%20bounds%2Ewidth%20%29%3B%0A%20%20%20%20this%2E%5FcachedSprite%2Eanchor%2Ey%20%3D%20%2D%28%20bounds%2Ey%20%2F%20bounds%2Eheight%20%29%3B%0A%0A%20%20%20%20%2F%2F%20this%2E%5FcachedSprite%2Ebuffer%2Econtext%2Esave%28%29%3B%0A%20%20%20%20this%2E%5FcachedSprite%2Ebuffer%2Econtext%2Etranslate%28%2Dbounds%2Ex%2C%2Dbounds%2Ey%29%3B%0A%0A%20%20%20%20%2F%2F%20make%20sure%20we%20set%20the%20alpha%20of%20the%20graphics%20to%201%20for%20the%20render%2E%2E%0A%20%20%20%20this%2EworldAlpha%20%3D%201%3B%0A%0A%20%20%20%20%2F%2F%20now%20render%20the%20graphic%2E%2E%0A%20%20%20%20CanvasGraphics%2ErenderGraphics%28this%2C%20this%2E%5FcachedSprite%2Ebuffer%2Econtext%29%3B%0A%0A%20%20%20%20this%2E%5FcachedSprite%2Ealpha%20%3D%20this%2Ealpha%3B%0A%7D%3B%0A%2A%2F%0A%2F%2A%2A%0A%20%2A%20Updates%20texture%20size%20based%20on%20canvas%20size%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0A%2F%2A%0AGraphics%2Eprototype%2EupdateCachedSpriteTexture%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20cachedSprite%20%3D%20this%2E%5FcachedSprite%3B%0A%20%20%20%20var%20texture%20%3D%20cachedSprite%2Etexture%3B%0A%20%20%20%20var%20canvas%20%3D%20cachedSprite%2Ebuffer%2Ecanvas%3B%0A%0A%20%20%20%20texture%2EbaseTexture%2Ewidth%20%3D%20canvas%2Ewidth%3B%0A%20%20%20%20texture%2EbaseTexture%2Eheight%20%3D%20canvas%2Eheight%3B%0A%20%20%20%20texture%2Ecrop%2Ewidth%20%3D%20texture%2Eframe%2Ewidth%20%3D%20canvas%2Ewidth%3B%0A%20%20%20%20texture%2Ecrop%2Eheight%20%3D%20texture%2Eframe%2Eheight%20%3D%20canvas%2Eheight%3B%0A%0A%20%20%20%20cachedSprite%2E%5Fwidth%20%3D%20canvas%2Ewidth%3B%0A%20%20%20%20cachedSprite%2E%5Fheight%20%3D%20canvas%2Eheight%3B%0A%0A%20%20%20%20%2F%2F%20update%20the%20dirty%20base%20textures%0A%20%20%20%20texture%2EbaseTexture%2Edirty%28%29%3B%0A%7D%3B%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20a%20previous%20cached%20sprite%2E%0A%20%2A%0A%20%2A%2F%0A%2F%2A%0AGraphics%2Eprototype%2EdestroyCachedSprite%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2E%5FcachedSprite%2Etexture%2Edestroy%28true%29%3B%0A%0A%20%20%20%20%2F%2F%20let%20the%20gc%20collect%20the%20unused%20sprite%0A%20%20%20%20%2F%2F%20TODO%20could%20be%20object%20pooled%21%0A%20%20%20%20this%2E%5FcachedSprite%20%3D%20null%3B%0A%7D%3B%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20Draws%20the%20given%20shape%20to%20this%20Graphics%20object%2E%20Can%20be%20any%20of%20Circle%2C%20Rectangle%2C%20Ellipse%2C%20Line%20or%20Polygon%2E%0A%20%2A%0A%20%2A%20%40param%20shape%20%7BPIXI%2ECircle%7CPIXI%2ERectangle%7CPIXI%2EEllipse%7CPIXI%2ELine%7CPIXI%2EPolygon%7D%20The%20shape%20object%20to%20draw%2E%0A%20%2A%20%40return%20%7BPIXI%2EGraphicsData%7D%20The%20generated%20GraphicsData%20object%2E%0A%20%2A%2F%0AGraphics%2Eprototype%2EdrawShape%20%3D%20function%20%28shape%29%0A%7B%0A%20%20%20%20if%20%28this%2EcurrentPath%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20check%20current%20path%21%0A%20%20%20%20%20%20%20%20if%20%28this%2EcurrentPath%2Eshape%2Epoints%2Elength%20%3C%3D%202%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EgraphicsData%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EcurrentPath%20%3D%20null%3B%0A%0A%20%20%20%20var%20data%20%3D%20new%20GraphicsData%28this%2ElineWidth%2C%20this%2ElineColor%2C%20this%2ElineAlpha%2C%20this%2EfillColor%2C%20this%2EfillAlpha%2C%20this%2Efilling%2C%20shape%29%3B%0A%0A%20%20%20%20this%2EgraphicsData%2Epush%28data%29%3B%0A%0A%20%20%20%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2EPOLY%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20data%2Eshape%2Eclosed%20%3D%20data%2Eshape%2Eclosed%20%7C%7C%20this%2Efilling%3B%0A%20%20%20%20%20%20%20%20this%2EcurrentPath%20%3D%20data%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Edirty%20%3D%20this%2EboundsDirty%20%3D%20true%3B%0A%0A%20%20%20%20return%20data%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20Graphics%20object%2E%0A%20%2A%2F%0AGraphics%2Eprototype%2Edestroy%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20Container%2Eprototype%2Edestroy%2Eapply%28this%2C%20arguments%29%3B%0A%0A%20%20%20%20%2F%2F%20destroy%20each%20of%20the%20GraphicsData%20objects%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2EgraphicsData%2Elength%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20this%2EgraphicsData%5Bi%5D%2Edestroy%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20for%20each%20webgl%20data%20entry%2C%20destroy%20the%20WebGLGraphicsData%0A%20%20%20%20for%20%28var%20id%20in%20this%2E%5Fwebgl%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%3B%20j%20%3C%20this%2E%5Fwebgl%5Bid%5D%2Edata%2Elength%3B%20%2B%2Bj%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fwebgl%5Bid%5D%2Edata%5Bj%5D%2Edestroy%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EgraphicsData%20%3D%20null%3B%0A%0A%20%20%20%20this%2EcurrentPath%20%3D%20null%3B%0A%20%20%20%20this%2E%5Fwebgl%20%3D%20null%3B%0A%20%20%20%20this%2E%5FlocalBounds%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2Fdisplay%2FContainer%22%3A17%2C%22%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasBuffer%22%3A38%2C%22%2E%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasGraphics%22%3A39%2C%22%2E%2E%2Ftextures%2FTexture%22%3A65%2C%22%2E%2FGraphicsData%22%3A20%7D%5D%2C20%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20A%20GraphicsData%20object%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20lineWidth%20%7Bnumber%7D%20the%20width%20of%20the%20line%20to%20draw%0A%20%2A%20%40param%20lineColor%20%7Bnumber%7D%20the%20color%20of%20the%20line%20to%20draw%0A%20%2A%20%40param%20lineAlpha%20%7Bnumber%7D%20the%20alpha%20of%20the%20line%20to%20draw%0A%20%2A%20%40param%20fillColor%20%7Bnumber%7D%20the%20color%20of%20the%20fill%0A%20%2A%20%40param%20fillAlpha%20%7Bnumber%7D%20the%20alpha%20of%20the%20fill%0A%20%2A%20%40param%20fill%20%20%20%20%20%20%7Bboolean%7D%20whether%20or%20not%20the%20shape%20is%20filled%20with%20a%20colour%0A%20%2A%20%40param%20shape%20%20%20%20%20%7BCircle%7CRectangle%7CEllipse%7CLine%7CPolygon%7D%20The%20shape%20object%20to%20draw%2E%0A%20%2A%2F%0Afunction%20GraphicsData%28lineWidth%2C%20lineColor%2C%20lineAlpha%2C%20fillColor%2C%20fillAlpha%2C%20fill%2C%20shape%29%0A%7B%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%20the%20width%20of%20the%20line%20to%20draw%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2ElineWidth%20%3D%20lineWidth%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%20the%20color%20of%20the%20line%20to%20draw%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2ElineColor%20%3D%20lineColor%3B%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%20the%20alpha%20of%20the%20line%20to%20draw%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2ElineAlpha%20%3D%20lineAlpha%3B%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%20cached%20tint%20of%20the%20line%20to%20draw%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FlineTint%20%3D%20lineColor%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%20the%20color%20of%20the%20fill%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EfillColor%20%3D%20fillColor%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%20the%20alpha%20of%20the%20fill%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EfillAlpha%20%3D%20fillAlpha%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%20cached%20tint%20of%20the%20fill%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FfillTint%20%3D%20fillColor%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%20whether%20or%20not%20the%20shape%20is%20filled%20with%20a%20colour%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Efill%20%3D%20fill%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ECircle%7CPIXI%2ERectangle%7CPIXI%2EEllipse%7CPIXI%2ELine%7CPIXI%2EPolygon%7D%20The%20shape%20object%20to%20draw%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eshape%20%3D%20shape%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%20The%20type%20of%20the%20shape%2C%20see%20the%20Const%2EShapes%20file%20for%20all%20the%20existing%20types%2C%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etype%20%3D%20shape%2Etype%3B%0A%7D%0A%0AGraphicsData%2Eprototype%2Econstructor%20%3D%20GraphicsData%3B%0Amodule%2Eexports%20%3D%20GraphicsData%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20new%20GraphicsData%20object%20with%20the%20same%20values%20as%20this%20one%2E%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EGraphicsData%7D%0A%20%2A%2F%0AGraphicsData%2Eprototype%2Eclone%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20new%20GraphicsData%28%0A%20%20%20%20%20%20%20%20this%2ElineWidth%2C%0A%20%20%20%20%20%20%20%20this%2ElineColor%2C%0A%20%20%20%20%20%20%20%20this%2ElineAlpha%2C%0A%20%20%20%20%20%20%20%20this%2EfillColor%2C%0A%20%20%20%20%20%20%20%20this%2EfillAlpha%2C%0A%20%20%20%20%20%20%20%20this%2Efill%2C%0A%20%20%20%20%20%20%20%20this%2Eshape%0A%20%20%20%20%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20Graphics%20data%2E%0A%20%2A%2F%0AGraphicsData%2Eprototype%2Edestroy%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this%2Eshape%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C21%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20utils%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Futils%27%29%2C%0A%20%20%20%20math%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fmath%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fconst%27%29%2C%0A%20%20%20%20ObjectRenderer%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2Futils%2FObjectRenderer%27%29%2C%0A%20%20%20%20WebGLRenderer%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2FWebGLRenderer%27%29%2C%0A%20%20%20%20WebGLGraphicsData%20%3D%20require%28%27%2E%2FWebGLGraphicsData%27%29%2C%0A%20%20%20%20earcut%20%3D%20require%28%27earcut%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20graphics%20object%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40private%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40extends%20PIXI%2EObjectRenderer%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20this%20object%20renderer%20works%20for%2E%0A%20%2A%2F%0Afunction%20GraphicsRenderer%28renderer%29%0A%7B%0A%20%20%20%20ObjectRenderer%2Ecall%28this%2C%20renderer%29%3B%0A%0A%20%20%20%20this%2EgraphicsDataPool%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20this%2EprimitiveShader%20%3D%20null%3B%0A%20%20%20%20this%2EcomplexPrimitiveShader%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20is%20the%20maximum%20number%20of%20points%20a%20poly%20can%20contain%20before%20it%20is%20rendered%20as%20a%20complex%20polygon%20%28using%20the%20stencil%20buffer%29%0A%20%20%20%20%20%2A%20%40type%20%7BNumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EmaximumSimplePolySize%20%3D%20200%3B%0A%7D%0A%0AGraphicsRenderer%2Eprototype%20%3D%20Object%2Ecreate%28ObjectRenderer%2Eprototype%29%3B%0AGraphicsRenderer%2Eprototype%2Econstructor%20%3D%20GraphicsRenderer%3B%0Amodule%2Eexports%20%3D%20GraphicsRenderer%3B%0A%0AWebGLRenderer%2EregisterPlugin%28%27graphics%27%2C%20GraphicsRenderer%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20when%20there%20is%20a%20WebGL%20context%20change%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2EonContextChange%20%3D%20function%28%29%0A%7B%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20this%20renderer%2E%0A%20%2A%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2Edestroy%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20ObjectRenderer%2Eprototype%2Edestroy%2Ecall%28this%29%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2EgraphicsDataPool%2Elength%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20this%2EgraphicsDataPool%5Bi%5D%2Edestroy%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EgraphicsDataPool%20%3D%20null%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20a%20graphics%20object%2E%0A%20%2A%0A%20%2A%20%40param%20graphics%20%7BPIXI%2EGraphics%7D%20The%20graphics%20object%20to%20render%2E%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2Erender%20%3D%20function%28graphics%29%0A%7B%0A%20%20%20%20var%20renderer%20%3D%20this%2Erenderer%3B%0A%20%20%20%20var%20gl%20%3D%20renderer%2Egl%3B%0A%0A%20%20%20%20var%20shader%20%3D%20renderer%2EshaderManager%2Eplugins%2EprimitiveShader%2C%0A%20%20%20%20%20%20%20%20webGLData%3B%0A%0A%20%20%20%20if%20%28graphics%2Edirty%20%7C%7C%20%21graphics%2E%5FwebGL%5Bgl%2Eid%5D%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EupdateGraphics%28graphics%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20webGL%20%3D%20graphics%2E%5FwebGL%5Bgl%2Eid%5D%3B%0A%0A%20%20%20%20%2F%2F%20This%20%20could%20be%20speeded%20up%20for%20sure%21%0A%0A%20%20%20%20renderer%2EblendModeManager%2EsetBlendMode%28%20graphics%2EblendMode%20%29%3B%0A%0A%2F%2F%20%20%20%20var%20matrix%20%3D%20%20graphics%2EworldTransform%2Eclone%28%29%3B%0A%2F%2F%20%20%20%20var%20matrix%20%3D%20%20renderer%2EcurrentRenderTarget%2EprojectionMatrix%2Eclone%28%29%3B%0A%2F%2F%20%20%20%20matrix%2Eappend%28graphics%2EworldTransform%29%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20n%20%3D%20webGL%2Edata%2Elength%3B%20i%20%3C%20n%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20webGLData%20%3D%20webGL%2Edata%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28webGL%2Edata%5Bi%5D%2Emode%20%3D%3D%3D%201%29%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2EstencilManager%2EpushStencil%28graphics%2C%20webGLData%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform1f%28renderer%2EshaderManager%2EcomplexPrimitiveShader%2Euniforms%2Ealpha%2E%5Flocation%2C%20graphics%2EworldAlpha%20%2A%20webGLData%2Ealpha%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20render%20quad%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EdrawElements%28gl%2ETRIANGLE%5FFAN%2C%204%2C%20gl%2EUNSIGNED%5FSHORT%2C%20%28%20webGLData%2Eindices%2Elength%20%2D%204%20%29%20%2A%202%20%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2EstencilManager%2EpopStencil%28graphics%2C%20webGLData%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20shader%20%3D%20renderer%2EshaderManager%2EprimitiveShader%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2EshaderManager%2EsetShader%28%20shader%20%29%3B%2F%2FactivatePrimitiveShader%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EuniformMatrix3fv%28shader%2Euniforms%2EtranslationMatrix%2E%5Flocation%2C%20false%2C%20graphics%2EworldTransform%2EtoArray%28true%29%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EuniformMatrix3fv%28shader%2Euniforms%2EprojectionMatrix%2E%5Flocation%2C%20false%2C%20renderer%2EcurrentRenderTarget%2EprojectionMatrix%2EtoArray%28true%29%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform3fv%28shader%2Euniforms%2Etint%2E%5Flocation%2C%20utils%2Ehex2rgb%28graphics%2Etint%29%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform1f%28shader%2Euniforms%2Ealpha%2E%5Flocation%2C%20graphics%2EworldAlpha%29%3B%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20webGLData%2Ebuffer%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaVertexPosition%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%204%20%2A%206%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaColor%2C%204%2C%20gl%2EFLOAT%2C%20false%2C4%20%2A%206%2C%202%20%2A%204%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20index%20buffer%21%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20webGLData%2EindexBuffer%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EdrawElements%28gl%2ETRIANGLE%5FSTRIP%2C%20%20webGLData%2Eindices%2Elength%2C%20gl%2EUNSIGNED%5FSHORT%2C%200%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20renderer%2EdrawCount%2B%2B%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20graphics%20object%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20graphics%20%7BPIXI%2EGraphics%7D%20The%20graphics%20object%20to%20update%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2EupdateGraphics%20%3D%20function%28graphics%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20%20%2F%2F%20get%20the%20contexts%20graphics%20object%0A%20%20%20%20var%20webGL%20%3D%20graphics%2E%5FwebGL%5Bgl%2Eid%5D%3B%0A%0A%20%20%20%20%2F%2F%20if%20the%20graphics%20object%20does%20not%20exist%20in%20the%20webGL%20context%20time%20to%20create%20it%21%0A%20%20%20%20if%20%28%21webGL%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20webGL%20%3D%20graphics%2E%5FwebGL%5Bgl%2Eid%5D%20%3D%20%7BlastIndex%3A0%2C%20data%3A%5B%5D%2C%20gl%3Agl%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20flag%20the%20graphics%20as%20not%20dirty%20as%20we%20are%20about%20to%20update%20it%2E%2E%2E%0A%20%20%20%20graphics%2Edirty%20%3D%20false%3B%0A%0A%20%20%20%20var%20i%3B%0A%0A%20%20%20%20%2F%2F%20if%20the%20user%20cleared%20the%20graphics%20object%20we%20will%20need%20to%20clear%20every%20object%0A%20%20%20%20if%20%28graphics%2EclearDirty%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20graphics%2EclearDirty%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20loop%20through%20and%20return%20all%20the%20webGLDatas%20to%20the%20object%20pool%20so%20than%20can%20be%20reused%20later%20on%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20webGL%2Edata%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20graphicsData%20%3D%20webGL%2Edata%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20graphicsData%2Ereset%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EgraphicsDataPool%2Epush%28%20graphicsData%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20clear%20the%20array%20and%20reset%20the%20index%2E%2E%0A%20%20%20%20%20%20%20%20webGL%2Edata%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20webGL%2ElastIndex%20%3D%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20webGLData%3B%0A%0A%20%20%20%20%2F%2F%20loop%20through%20the%20graphics%20datas%20and%20construct%20each%20one%2E%2E%0A%20%20%20%20%2F%2F%20if%20the%20object%20is%20a%20complex%20fill%20then%20the%20new%20stencil%20buffer%20technique%20will%20be%20used%0A%20%20%20%20%2F%2F%20other%20wise%20graphics%20objects%20will%20be%20pushed%20into%20a%20batch%2E%2E%0A%20%20%20%20for%20%28i%20%3D%20webGL%2ElastIndex%3B%20i%20%3C%20graphics%2EgraphicsData%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20data%20%3D%20graphics%2EgraphicsData%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2EPOLY%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20need%20to%20add%20the%20points%20the%20the%20graphics%20object%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20data%2Epoints%20%3D%20data%2Eshape%2Epoints%2Eslice%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2Eshape%2Eclosed%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20close%20the%20poly%20if%20the%20value%20is%20true%21%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2Epoints%5B0%5D%20%21%3D%3D%20data%2Epoints%5Bdata%2Epoints%2Elength%2D2%5D%20%7C%7C%20data%2Epoints%5B1%5D%20%21%3D%3D%20data%2Epoints%5Bdata%2Epoints%2Elength%2D1%5D%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%2Epoints%2Epush%28data%2Epoints%5B0%5D%2C%20data%2Epoints%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20MAKE%20SURE%20WE%20HAVE%20THE%20CORRECT%20TYPE%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2Efill%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2Epoints%2Elength%20%3E%3D%206%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2Epoints%2Elength%20%3C%20this%2EmaximumSimplePolySize%20%2A%202%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20webGLData%20%3D%20this%2EswitchMode%28webGL%2C%200%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20canDrawUsingSimple%20%3D%20this%2EbuildPoly%28data%2C%20webGLData%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21canDrawUsingSimple%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20webGLData%20%3D%20this%2EswitchMode%28webGL%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EbuildComplexPoly%28data%2C%20webGLData%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20webGLData%20%3D%20this%2EswitchMode%28webGL%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EbuildComplexPoly%28data%2C%20webGLData%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2ElineWidth%20%3E%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20webGLData%20%3D%20this%2EswitchMode%28webGL%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EbuildLine%28data%2C%20webGLData%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20webGLData%20%3D%20this%2EswitchMode%28webGL%2C%200%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2ERECT%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EbuildRectangle%28data%2C%20webGLData%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2ECIRC%20%7C%7C%20data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2EELIP%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EbuildCircle%28data%2C%20webGLData%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2ERREC%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EbuildRoundedRectangle%28data%2C%20webGLData%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20webGL%2ElastIndex%2B%2B%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20upload%20all%20the%20dirty%20data%2E%2E%2E%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20webGL%2Edata%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20webGLData%20%3D%20webGL%2Edata%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28webGLData%2Edirty%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20webGLData%2Eupload%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20webGL%20%7BWebGLRenderingContext%7D%20the%20current%20WebGL%20drawing%20context%0A%20%2A%20%40param%20type%20%7Bnumber%7D%20TODO%20%40Alvin%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2EswitchMode%20%3D%20function%20%28webGL%2C%20type%29%0A%7B%0A%20%20%20%20var%20webGLData%3B%0A%0A%20%20%20%20if%20%28%21webGL%2Edata%2Elength%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20webGLData%20%3D%20this%2EgraphicsDataPool%2Epop%28%29%20%7C%7C%20new%20WebGLGraphicsData%28webGL%2Egl%29%3B%0A%20%20%20%20%20%20%20%20webGLData%2Emode%20%3D%20type%3B%0A%20%20%20%20%20%20%20%20webGL%2Edata%2Epush%28webGLData%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20webGLData%20%3D%20webGL%2Edata%5BwebGL%2Edata%2Elength%2D1%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%28webGLData%2Epoints%2Elength%20%3E%20320000%29%20%7C%7C%20webGLData%2Emode%20%21%3D%3D%20type%20%7C%7C%20type%20%3D%3D%3D%201%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20webGLData%20%3D%20this%2EgraphicsDataPool%2Epop%28%29%20%7C%7C%20new%20WebGLGraphicsData%28webGL%2Egl%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20webGLData%2Emode%20%3D%20type%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20webGL%2Edata%2Epush%28webGLData%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20webGLData%2Edirty%20%3D%20true%3B%0A%0A%20%20%20%20return%20webGLData%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Builds%20a%20rectangle%20to%20draw%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20graphicsData%20%7BPIXI%2EGraphics%7D%20The%20graphics%20object%20containing%20all%20the%20necessary%20properties%0A%20%2A%20%40param%20webGLData%20%7Bobject%7D%20an%20object%20containing%20all%20the%20webGL%2Dspecific%20information%20to%20create%20this%20shape%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2EbuildRectangle%20%3D%20function%20%28graphicsData%2C%20webGLData%29%0A%7B%0A%20%20%20%20%2F%2F%20%2D%2D%2D%20%2F%2F%0A%20%20%20%20%2F%2F%20need%20to%20convert%20points%20to%20a%20nice%20regular%20data%0A%20%20%20%20%2F%2F%0A%20%20%20%20var%20rectData%20%3D%20graphicsData%2Eshape%3B%0A%20%20%20%20var%20x%20%3D%20rectData%2Ex%3B%0A%20%20%20%20var%20y%20%3D%20rectData%2Ey%3B%0A%20%20%20%20var%20width%20%3D%20rectData%2Ewidth%3B%0A%20%20%20%20var%20height%20%3D%20rectData%2Eheight%3B%0A%0A%20%20%20%20if%20%28graphicsData%2Efill%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20color%20%3D%20utils%2Ehex2rgb%28graphicsData%2EfillColor%29%3B%0A%20%20%20%20%20%20%20%20var%20alpha%20%3D%20graphicsData%2EfillAlpha%3B%0A%0A%20%20%20%20%20%20%20%20var%20r%20%3D%20color%5B0%5D%20%2A%20alpha%3B%0A%20%20%20%20%20%20%20%20var%20g%20%3D%20color%5B1%5D%20%2A%20alpha%3B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20color%5B2%5D%20%2A%20alpha%3B%0A%0A%20%20%20%20%20%20%20%20var%20verts%20%3D%20webGLData%2Epoints%3B%0A%20%20%20%20%20%20%20%20var%20indices%20%3D%20webGLData%2Eindices%3B%0A%0A%20%20%20%20%20%20%20%20var%20vertPos%20%3D%20verts%2Elength%2F6%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20start%0A%20%20%20%20%20%20%20%20verts%2Epush%28x%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20verts%2Epush%28r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20verts%2Epush%28x%20%2B%20width%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20verts%2Epush%28r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20verts%2Epush%28x%20%2C%20y%20%2B%20height%29%3B%0A%20%20%20%20%20%20%20%20verts%2Epush%28r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20verts%2Epush%28x%20%2B%20width%2C%20y%20%2B%20height%29%3B%0A%20%20%20%20%20%20%20%20verts%2Epush%28r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20insert%202%20dead%20triangles%2E%2E%0A%20%20%20%20%20%20%20%20indices%2Epush%28vertPos%2C%20vertPos%2C%20vertPos%2B1%2C%20vertPos%2B2%2C%20vertPos%2B3%2C%20vertPos%2B3%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28graphicsData%2ElineWidth%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20tempPoints%20%3D%20graphicsData%2Epoints%3B%0A%0A%20%20%20%20%20%20%20%20graphicsData%2Epoints%20%3D%20%5Bx%2C%20y%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%2B%20width%2C%20y%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%2B%20width%2C%20y%20%2B%20height%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%2C%20y%20%2B%20height%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%2C%20y%5D%3B%0A%0A%0A%20%20%20%20%20%20%20%20this%2EbuildLine%28graphicsData%2C%20webGLData%29%3B%0A%0A%20%20%20%20%20%20%20%20graphicsData%2Epoints%20%3D%20tempPoints%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Builds%20a%20rounded%20rectangle%20to%20draw%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20graphicsData%20%7BPIXI%2EGraphics%7D%20The%20graphics%20object%20containing%20all%20the%20necessary%20properties%0A%20%2A%20%40param%20webGLData%20%7Bobject%7D%20an%20object%20containing%20all%20the%20webGL%2Dspecific%20information%20to%20create%20this%20shape%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2EbuildRoundedRectangle%20%3D%20function%20%28graphicsData%2C%20webGLData%29%0A%7B%0A%20%20%20%20var%20rrectData%20%3D%20graphicsData%2Eshape%3B%0A%20%20%20%20var%20x%20%3D%20rrectData%2Ex%3B%0A%20%20%20%20var%20y%20%3D%20rrectData%2Ey%3B%0A%20%20%20%20var%20width%20%3D%20rrectData%2Ewidth%3B%0A%20%20%20%20var%20height%20%3D%20rrectData%2Eheight%3B%0A%0A%20%20%20%20var%20radius%20%3D%20rrectData%2Eradius%3B%0A%0A%20%20%20%20var%20recPoints%20%3D%20%5B%5D%3B%0A%20%20%20%20recPoints%2Epush%28x%2C%20y%20%2B%20radius%29%3B%0A%20%20%20%20this%2EquadraticBezierCurve%28x%2C%20y%20%2B%20height%20%2D%20radius%2C%20x%2C%20y%20%2B%20height%2C%20x%20%2B%20radius%2C%20y%20%2B%20height%2C%20recPoints%29%3B%0A%20%20%20%20this%2EquadraticBezierCurve%28x%20%2B%20width%20%2D%20radius%2C%20y%20%2B%20height%2C%20x%20%2B%20width%2C%20y%20%2B%20height%2C%20x%20%2B%20width%2C%20y%20%2B%20height%20%2D%20radius%2C%20recPoints%29%3B%0A%20%20%20%20this%2EquadraticBezierCurve%28x%20%2B%20width%2C%20y%20%2B%20radius%2C%20x%20%2B%20width%2C%20y%2C%20x%20%2B%20width%20%2D%20radius%2C%20y%2C%20recPoints%29%3B%0A%20%20%20%20this%2EquadraticBezierCurve%28x%20%2B%20radius%2C%20y%2C%20x%2C%20y%2C%20x%2C%20y%20%2B%20radius%20%2B%200%2E0000000001%2C%20recPoints%29%3B%0A%0A%20%20%20%20%2F%2F%20this%20tiny%20number%20deals%20with%20the%20issue%20that%20occurs%20when%20points%20overlap%20and%20earcut%20fails%20to%20triangulate%20the%20item%2E%0A%20%20%20%20%2F%2F%20TODO%20%2D%20fix%20this%20properly%2C%20this%20is%20not%20very%20elegant%2E%2E%20but%20it%20works%20for%20now%2E%0A%0A%20%20%20%20if%20%28graphicsData%2Efill%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20color%20%3D%20utils%2Ehex2rgb%28graphicsData%2EfillColor%29%3B%0A%20%20%20%20%20%20%20%20var%20alpha%20%3D%20graphicsData%2EfillAlpha%3B%0A%0A%20%20%20%20%20%20%20%20var%20r%20%3D%20color%5B0%5D%20%2A%20alpha%3B%0A%20%20%20%20%20%20%20%20var%20g%20%3D%20color%5B1%5D%20%2A%20alpha%3B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20color%5B2%5D%20%2A%20alpha%3B%0A%0A%20%20%20%20%20%20%20%20var%20verts%20%3D%20webGLData%2Epoints%3B%0A%20%20%20%20%20%20%20%20var%20indices%20%3D%20webGLData%2Eindices%3B%0A%0A%20%20%20%20%20%20%20%20var%20vecPos%20%3D%20verts%2Elength%2F6%3B%0A%0A%20%20%20%20%20%20%20%20var%20triangles%20%3D%20earcut%28recPoints%2C%20null%2C%202%29%3B%0A%0A%20%20%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20triangles%2Elength%3B%20i%2B%3D3%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20indices%2Epush%28triangles%5Bi%5D%20%2B%20vecPos%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20indices%2Epush%28triangles%5Bi%5D%20%2B%20vecPos%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20indices%2Epush%28triangles%5Bi%2B1%5D%20%2B%20vecPos%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20indices%2Epush%28triangles%5Bi%2B2%5D%20%2B%20vecPos%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20indices%2Epush%28triangles%5Bi%2B2%5D%20%2B%20vecPos%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20recPoints%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28recPoints%5Bi%5D%2C%20recPoints%5B%2B%2Bi%5D%2C%20r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28graphicsData%2ElineWidth%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20tempPoints%20%3D%20graphicsData%2Epoints%3B%0A%0A%20%20%20%20%20%20%20%20graphicsData%2Epoints%20%3D%20recPoints%3B%0A%0A%20%20%20%20%20%20%20%20this%2EbuildLine%28graphicsData%2C%20webGLData%29%3B%0A%0A%20%20%20%20%20%20%20%20graphicsData%2Epoints%20%3D%20tempPoints%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Calculate%20the%20points%20for%20a%20quadratic%20bezier%20curve%2E%20%28helper%20function%2E%2E%29%0A%20%2A%20Based%20on%3A%20https%3A%2F%2Fstackoverflow%2Ecom%2Fquestions%2F785097%2Fhow%2Ddo%2Di%2Dimplement%2Da%2Dbezier%2Dcurve%2Din%2Dc%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20fromX%20%7Bnumber%7D%20Origin%20point%20x%0A%20%2A%20%40param%20fromY%20%7Bnumber%7D%20Origin%20point%20x%0A%20%2A%20%40param%20cpX%20%7Bnumber%7D%20Control%20point%20x%0A%20%2A%20%40param%20cpY%20%7Bnumber%7D%20Control%20point%20y%0A%20%2A%20%40param%20toX%20%7Bnumber%7D%20Destination%20point%20x%0A%20%2A%20%40param%20toY%20%7Bnumber%7D%20Destination%20point%20y%0A%20%2A%20%40param%20%5Bout%5D%20%7Bnumber%5B%5D%7D%20The%20output%20array%20to%20add%20points%20into%2E%20If%20not%20passed%2C%20a%20new%20array%20is%20created%2E%0A%20%2A%20%40return%20%7Bnumber%5B%5D%7D%20an%20array%20of%20points%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2EquadraticBezierCurve%20%3D%20function%20%28fromX%2C%20fromY%2C%20cpX%2C%20cpY%2C%20toX%2C%20toY%2C%20out%29%0A%7B%0A%20%20%20%20var%20xa%2C%0A%20%20%20%20%20%20%20%20ya%2C%0A%20%20%20%20%20%20%20%20xb%2C%0A%20%20%20%20%20%20%20%20yb%2C%0A%20%20%20%20%20%20%20%20x%2C%0A%20%20%20%20%20%20%20%20y%2C%0A%20%20%20%20%20%20%20%20n%20%3D%2020%2C%0A%20%20%20%20%20%20%20%20points%20%3D%20out%20%7C%7C%20%5B%5D%3B%0A%0A%20%20%20%20function%20getPt%28n1%20%2C%20n2%2C%20perc%29%20%7B%0A%20%20%20%20%20%20%20%20var%20diff%20%3D%20n2%20%2D%20n1%3B%0A%0A%20%20%20%20%20%20%20%20return%20n1%20%2B%20%28%20diff%20%2A%20perc%20%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20j%20%3D%200%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%3D%20n%3B%20i%2B%2B%20%29%20%7B%0A%20%20%20%20%20%20%20%20j%20%3D%20i%20%2F%20n%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20The%20Green%20Line%0A%20%20%20%20%20%20%20%20xa%20%3D%20getPt%28%20fromX%20%2C%20cpX%20%2C%20j%20%29%3B%0A%20%20%20%20%20%20%20%20ya%20%3D%20getPt%28%20fromY%20%2C%20cpY%20%2C%20j%20%29%3B%0A%20%20%20%20%20%20%20%20xb%20%3D%20getPt%28%20cpX%20%2C%20toX%20%2C%20j%20%29%3B%0A%20%20%20%20%20%20%20%20yb%20%3D%20getPt%28%20cpY%20%2C%20toY%20%2C%20j%20%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20The%20Black%20Dot%0A%20%20%20%20%20%20%20%20x%20%3D%20getPt%28%20xa%20%2C%20xb%20%2C%20j%20%29%3B%0A%20%20%20%20%20%20%20%20y%20%3D%20getPt%28%20ya%20%2C%20yb%20%2C%20j%20%29%3B%0A%0A%20%20%20%20%20%20%20%20points%2Epush%28x%2C%20y%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20points%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Builds%20a%20circle%20to%20draw%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20graphicsData%20%7BPIXI%2EGraphics%7D%20The%20graphics%20object%20to%20draw%0A%20%2A%20%40param%20webGLData%20%7Bobject%7D%20an%20object%20containing%20all%20the%20webGL%2Dspecific%20information%20to%20create%20this%20shape%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2EbuildCircle%20%3D%20function%20%28graphicsData%2C%20webGLData%29%0A%7B%0A%20%20%20%20%2F%2F%20need%20to%20convert%20points%20to%20a%20nice%20regular%20data%0A%20%20%20%20var%20circleData%20%3D%20graphicsData%2Eshape%3B%0A%20%20%20%20var%20x%20%3D%20circleData%2Ex%3B%0A%20%20%20%20var%20y%20%3D%20circleData%2Ey%3B%0A%20%20%20%20var%20width%3B%0A%20%20%20%20var%20height%3B%0A%0A%20%20%20%20%2F%2F%20TODO%20%2D%20bit%20hacky%3F%3F%0A%20%20%20%20if%20%28graphicsData%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2ECIRC%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20width%20%3D%20circleData%2Eradius%3B%0A%20%20%20%20%20%20%20%20height%20%3D%20circleData%2Eradius%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20width%20%3D%20circleData%2Ewidth%3B%0A%20%20%20%20%20%20%20%20height%20%3D%20circleData%2Eheight%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20totalSegs%20%3D%20Math%2Efloor%2830%20%2A%20Math%2Esqrt%28circleData%2Eradius%29%29%20%7C%7C%20Math%2Efloor%2815%20%2A%20Math%2Esqrt%28circleData%2Ewidth%20%2B%20circleData%2Eheight%29%29%3B%0A%20%20%20%20var%20seg%20%3D%20%28Math%2EPI%20%2A%202%29%20%2F%20totalSegs%20%3B%0A%0A%20%20%20%20var%20i%20%3D%200%3B%0A%0A%20%20%20%20if%20%28graphicsData%2Efill%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20color%20%3D%20utils%2Ehex2rgb%28graphicsData%2EfillColor%29%3B%0A%20%20%20%20%20%20%20%20var%20alpha%20%3D%20graphicsData%2EfillAlpha%3B%0A%0A%20%20%20%20%20%20%20%20var%20r%20%3D%20color%5B0%5D%20%2A%20alpha%3B%0A%20%20%20%20%20%20%20%20var%20g%20%3D%20color%5B1%5D%20%2A%20alpha%3B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20color%5B2%5D%20%2A%20alpha%3B%0A%0A%20%20%20%20%20%20%20%20var%20verts%20%3D%20webGLData%2Epoints%3B%0A%20%20%20%20%20%20%20%20var%20indices%20%3D%20webGLData%2Eindices%3B%0A%0A%20%20%20%20%20%20%20%20var%20vecPos%20%3D%20verts%2Elength%2F6%3B%0A%0A%20%20%20%20%20%20%20%20indices%2Epush%28vecPos%29%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20totalSegs%20%2B%201%20%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28x%2Cy%2C%20r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28x%20%2B%20Math%2Esin%28seg%20%2A%20i%29%20%2A%20width%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%2B%20Math%2Ecos%28seg%20%2A%20i%29%20%2A%20height%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20indices%2Epush%28vecPos%2B%2B%2C%20vecPos%2B%2B%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20indices%2Epush%28vecPos%2D1%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28graphicsData%2ElineWidth%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20tempPoints%20%3D%20graphicsData%2Epoints%3B%0A%0A%20%20%20%20%20%20%20%20graphicsData%2Epoints%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20totalSegs%20%2B%201%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20graphicsData%2Epoints%2Epush%28x%20%2B%20Math%2Esin%28seg%20%2A%20i%29%20%2A%20width%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%2B%20Math%2Ecos%28seg%20%2A%20i%29%20%2A%20height%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this%2EbuildLine%28graphicsData%2C%20webGLData%29%3B%0A%0A%20%20%20%20%20%20%20%20graphicsData%2Epoints%20%3D%20tempPoints%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Builds%20a%20line%20to%20draw%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20graphicsData%20%7BPIXI%2EGraphics%7D%20The%20graphics%20object%20containing%20all%20the%20necessary%20properties%0A%20%2A%20%40param%20webGLData%20%7Bobject%7D%20an%20object%20containing%20all%20the%20webGL%2Dspecific%20information%20to%20create%20this%20shape%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2EbuildLine%20%3D%20function%20%28graphicsData%2C%20webGLData%29%0A%7B%0A%20%20%20%20%2F%2F%20TODO%20OPTIMISE%21%0A%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20var%20points%20%3D%20graphicsData%2Epoints%3B%0A%0A%20%20%20%20if%20%28points%2Elength%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20if%20the%20line%20width%20is%20an%20odd%20number%20add%200%2E5%20to%20align%20to%20a%20whole%20pixel%0A%20%20%20%20%2F%2F%20commenting%20this%20out%20fixes%20%23711%20and%20%231620%0A%20%20%20%20%2F%2F%20if%20%28graphicsData%2ElineWidth%252%29%0A%20%20%20%20%2F%2F%20%7B%0A%20%20%20%20%2F%2F%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20points%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%2F%2F%20%20%20%20%20%7B%0A%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20points%5Bi%5D%20%2B%3D%200%2E5%3B%0A%20%20%20%20%2F%2F%20%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20get%20first%20and%20last%20point%2E%2E%20figure%20out%20the%20middle%21%0A%20%20%20%20var%20firstPoint%20%3D%20new%20math%2EPoint%28points%5B0%5D%2C%20points%5B1%5D%29%3B%0A%20%20%20%20var%20lastPoint%20%3D%20new%20math%2EPoint%28points%5Bpoints%2Elength%20%2D%202%5D%2C%20points%5Bpoints%2Elength%20%2D%201%5D%29%3B%0A%0A%20%20%20%20%2F%2F%20if%20the%20first%20point%20is%20the%20last%20point%20%2D%20gonna%20have%20issues%20%3A%29%0A%20%20%20%20if%20%28firstPoint%2Ex%20%3D%3D%3D%20lastPoint%2Ex%20%26%26%20firstPoint%2Ey%20%3D%3D%3D%20lastPoint%2Ey%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20need%20to%20clone%20as%20we%20are%20going%20to%20slightly%20modify%20the%20shape%2E%2E%0A%20%20%20%20%20%20%20%20points%20%3D%20points%2Eslice%28%29%3B%0A%0A%20%20%20%20%20%20%20%20points%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20points%2Epop%28%29%3B%0A%0A%20%20%20%20%20%20%20%20lastPoint%20%3D%20new%20math%2EPoint%28points%5Bpoints%2Elength%20%2D%202%5D%2C%20points%5Bpoints%2Elength%20%2D%201%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20var%20midPointX%20%3D%20lastPoint%2Ex%20%2B%20%28firstPoint%2Ex%20%2D%20lastPoint%2Ex%29%20%2A0%2E5%3B%0A%20%20%20%20%20%20%20%20var%20midPointY%20%3D%20lastPoint%2Ey%20%2B%20%28firstPoint%2Ey%20%2D%20lastPoint%2Ey%29%20%2A0%2E5%3B%0A%0A%20%20%20%20%20%20%20%20points%2Eunshift%28midPointX%2C%20midPointY%29%3B%0A%20%20%20%20%20%20%20%20points%2Epush%28midPointX%2C%20midPointY%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20verts%20%3D%20webGLData%2Epoints%3B%0A%20%20%20%20var%20indices%20%3D%20webGLData%2Eindices%3B%0A%20%20%20%20var%20length%20%3D%20points%2Elength%20%2F%202%3B%0A%20%20%20%20var%20indexCount%20%3D%20points%2Elength%3B%0A%20%20%20%20var%20indexStart%20%3D%20verts%2Elength%2F6%3B%0A%0A%20%20%20%20%2F%2F%20DRAW%20the%20Line%0A%20%20%20%20var%20width%20%3D%20graphicsData%2ElineWidth%20%2F%202%3B%0A%0A%20%20%20%20%2F%2F%20sort%20color%0A%20%20%20%20var%20color%20%3D%20utils%2Ehex2rgb%28graphicsData%2ElineColor%29%3B%0A%20%20%20%20var%20alpha%20%3D%20graphicsData%2ElineAlpha%3B%0A%20%20%20%20var%20r%20%3D%20color%5B0%5D%20%2A%20alpha%3B%0A%20%20%20%20var%20g%20%3D%20color%5B1%5D%20%2A%20alpha%3B%0A%20%20%20%20var%20b%20%3D%20color%5B2%5D%20%2A%20alpha%3B%0A%0A%20%20%20%20var%20px%2C%20py%2C%20p1x%2C%20p1y%2C%20p2x%2C%20p2y%2C%20p3x%2C%20p3y%3B%0A%20%20%20%20var%20perpx%2C%20perpy%2C%20perp2x%2C%20perp2y%2C%20perp3x%2C%20perp3y%3B%0A%20%20%20%20var%20a1%2C%20b1%2C%20c1%2C%20a2%2C%20b2%2C%20c2%3B%0A%20%20%20%20var%20denom%2C%20pdist%2C%20dist%3B%0A%0A%20%20%20%20p1x%20%3D%20points%5B0%5D%3B%0A%20%20%20%20p1y%20%3D%20points%5B1%5D%3B%0A%0A%20%20%20%20p2x%20%3D%20points%5B2%5D%3B%0A%20%20%20%20p2y%20%3D%20points%5B3%5D%3B%0A%0A%20%20%20%20perpx%20%3D%20%2D%28p1y%20%2D%20p2y%29%3B%0A%20%20%20%20perpy%20%3D%20%20p1x%20%2D%20p2x%3B%0A%0A%20%20%20%20dist%20%3D%20Math%2Esqrt%28perpx%2Aperpx%20%2B%20perpy%2Aperpy%29%3B%0A%0A%20%20%20%20perpx%20%2F%3D%20dist%3B%0A%20%20%20%20perpy%20%2F%3D%20dist%3B%0A%20%20%20%20perpx%20%2A%3D%20width%3B%0A%20%20%20%20perpy%20%2A%3D%20width%3B%0A%0A%20%20%20%20%2F%2F%20start%0A%20%20%20%20verts%2Epush%28p1x%20%2D%20perpx%20%2C%20p1y%20%2D%20perpy%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20verts%2Epush%28p1x%20%2B%20perpx%20%2C%20p1y%20%2B%20perpy%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20for%20%28i%20%3D%201%3B%20i%20%3C%20length%2D1%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20p1x%20%3D%20points%5B%28i%2D1%29%2A2%5D%3B%0A%20%20%20%20%20%20%20%20p1y%20%3D%20points%5B%28i%2D1%29%2A2%20%2B%201%5D%3B%0A%0A%20%20%20%20%20%20%20%20p2x%20%3D%20points%5B%28i%29%2A2%5D%3B%0A%20%20%20%20%20%20%20%20p2y%20%3D%20points%5B%28i%29%2A2%20%2B%201%5D%3B%0A%0A%20%20%20%20%20%20%20%20p3x%20%3D%20points%5B%28i%2B1%29%2A2%5D%3B%0A%20%20%20%20%20%20%20%20p3y%20%3D%20points%5B%28i%2B1%29%2A2%20%2B%201%5D%3B%0A%0A%20%20%20%20%20%20%20%20perpx%20%3D%20%2D%28p1y%20%2D%20p2y%29%3B%0A%20%20%20%20%20%20%20%20perpy%20%3D%20p1x%20%2D%20p2x%3B%0A%0A%20%20%20%20%20%20%20%20dist%20%3D%20Math%2Esqrt%28perpx%2Aperpx%20%2B%20perpy%2Aperpy%29%3B%0A%20%20%20%20%20%20%20%20perpx%20%2F%3D%20dist%3B%0A%20%20%20%20%20%20%20%20perpy%20%2F%3D%20dist%3B%0A%20%20%20%20%20%20%20%20perpx%20%2A%3D%20width%3B%0A%20%20%20%20%20%20%20%20perpy%20%2A%3D%20width%3B%0A%0A%20%20%20%20%20%20%20%20perp2x%20%3D%20%2D%28p2y%20%2D%20p3y%29%3B%0A%20%20%20%20%20%20%20%20perp2y%20%3D%20p2x%20%2D%20p3x%3B%0A%0A%20%20%20%20%20%20%20%20dist%20%3D%20Math%2Esqrt%28perp2x%2Aperp2x%20%2B%20perp2y%2Aperp2y%29%3B%0A%20%20%20%20%20%20%20%20perp2x%20%2F%3D%20dist%3B%0A%20%20%20%20%20%20%20%20perp2y%20%2F%3D%20dist%3B%0A%20%20%20%20%20%20%20%20perp2x%20%2A%3D%20width%3B%0A%20%20%20%20%20%20%20%20perp2y%20%2A%3D%20width%3B%0A%0A%20%20%20%20%20%20%20%20a1%20%3D%20%28%2Dperpy%20%2B%20p1y%29%20%2D%20%28%2Dperpy%20%2B%20p2y%29%3B%0A%20%20%20%20%20%20%20%20b1%20%3D%20%28%2Dperpx%20%2B%20p2x%29%20%2D%20%28%2Dperpx%20%2B%20p1x%29%3B%0A%20%20%20%20%20%20%20%20c1%20%3D%20%28%2Dperpx%20%2B%20p1x%29%20%2A%20%28%2Dperpy%20%2B%20p2y%29%20%2D%20%28%2Dperpx%20%2B%20p2x%29%20%2A%20%28%2Dperpy%20%2B%20p1y%29%3B%0A%20%20%20%20%20%20%20%20a2%20%3D%20%28%2Dperp2y%20%2B%20p3y%29%20%2D%20%28%2Dperp2y%20%2B%20p2y%29%3B%0A%20%20%20%20%20%20%20%20b2%20%3D%20%28%2Dperp2x%20%2B%20p2x%29%20%2D%20%28%2Dperp2x%20%2B%20p3x%29%3B%0A%20%20%20%20%20%20%20%20c2%20%3D%20%28%2Dperp2x%20%2B%20p3x%29%20%2A%20%28%2Dperp2y%20%2B%20p2y%29%20%2D%20%28%2Dperp2x%20%2B%20p2x%29%20%2A%20%28%2Dperp2y%20%2B%20p3y%29%3B%0A%0A%20%20%20%20%20%20%20%20denom%20%3D%20a1%2Ab2%20%2D%20a2%2Ab1%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28Math%2Eabs%28denom%29%20%3C%200%2E1%20%29%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20denom%2B%3D10%2E1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28p2x%20%2D%20perpx%20%2C%20p2y%20%2D%20perpy%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28p2x%20%2B%20perpx%20%2C%20p2y%20%2B%20perpy%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20px%20%3D%20%28b1%2Ac2%20%2D%20b2%2Ac1%29%2Fdenom%3B%0A%20%20%20%20%20%20%20%20py%20%3D%20%28a2%2Ac1%20%2D%20a1%2Ac2%29%2Fdenom%3B%0A%0A%0A%20%20%20%20%20%20%20%20pdist%20%3D%20%28px%20%2Dp2x%29%20%2A%20%28px%20%2Dp2x%29%20%2B%20%28py%20%2Dp2y%29%20%2A%20%28py%20%2Dp2y%29%3B%0A%0A%0A%20%20%20%20%20%20%20%20if%20%28pdist%20%3E%20140%20%2A%20140%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20perp3x%20%3D%20perpx%20%2D%20perp2x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20perp3y%20%3D%20perpy%20%2D%20perp2y%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20dist%20%3D%20Math%2Esqrt%28perp3x%2Aperp3x%20%2B%20perp3y%2Aperp3y%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20perp3x%20%2F%3D%20dist%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20perp3y%20%2F%3D%20dist%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20perp3x%20%2A%3D%20width%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20perp3y%20%2A%3D%20width%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28p2x%20%2D%20perp3x%2C%20p2y%20%2Dperp3y%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28p2x%20%2B%20perp3x%2C%20p2y%20%2Bperp3y%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28p2x%20%2D%20perp3x%2C%20p2y%20%2Dperp3y%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20indexCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28px%20%2C%20py%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28p2x%20%2D%20%28px%2Dp2x%29%2C%20p2y%20%2D%20%28py%20%2D%20p2y%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20verts%2Epush%28r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20p1x%20%3D%20points%5B%28length%2D2%29%2A2%5D%3B%0A%20%20%20%20p1y%20%3D%20points%5B%28length%2D2%29%2A2%20%2B%201%5D%3B%0A%0A%20%20%20%20p2x%20%3D%20points%5B%28length%2D1%29%2A2%5D%3B%0A%20%20%20%20p2y%20%3D%20points%5B%28length%2D1%29%2A2%20%2B%201%5D%3B%0A%0A%20%20%20%20perpx%20%3D%20%2D%28p1y%20%2D%20p2y%29%3B%0A%20%20%20%20perpy%20%3D%20p1x%20%2D%20p2x%3B%0A%0A%20%20%20%20dist%20%3D%20Math%2Esqrt%28perpx%2Aperpx%20%2B%20perpy%2Aperpy%29%3B%0A%20%20%20%20perpx%20%2F%3D%20dist%3B%0A%20%20%20%20perpy%20%2F%3D%20dist%3B%0A%20%20%20%20perpx%20%2A%3D%20width%3B%0A%20%20%20%20perpy%20%2A%3D%20width%3B%0A%0A%20%20%20%20verts%2Epush%28p2x%20%2D%20perpx%20%2C%20p2y%20%2D%20perpy%29%3B%0A%20%20%20%20verts%2Epush%28r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20verts%2Epush%28p2x%20%2B%20perpx%20%2C%20p2y%20%2B%20perpy%29%3B%0A%20%20%20%20verts%2Epush%28r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%0A%20%20%20%20indices%2Epush%28indexStart%29%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20indexCount%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20indices%2Epush%28indexStart%2B%2B%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20indices%2Epush%28indexStart%2D1%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Builds%20a%20complex%20polygon%20to%20draw%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20graphicsData%20%7BPIXI%2EGraphics%7D%20The%20graphics%20object%20containing%20all%20the%20necessary%20properties%0A%20%2A%20%40param%20webGLData%20%7Bobject%7D%20an%20object%20containing%20all%20the%20webGL%2Dspecific%20information%20to%20create%20this%20shape%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2EbuildComplexPoly%20%3D%20function%20%28graphicsData%2C%20webGLData%29%0A%7B%0A%20%20%20%20%2F%2FTODO%20%2D%20no%20need%20to%20copy%20this%20as%20it%20gets%20turned%20into%20a%20FLoat32Array%20anyways%2E%2E%0A%20%20%20%20var%20points%20%3D%20graphicsData%2Epoints%2Eslice%28%29%3B%0A%0A%20%20%20%20if%20%28points%2Elength%20%3C%206%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20get%20first%20and%20last%20point%2E%2E%20figure%20out%20the%20middle%21%0A%20%20%20%20var%20indices%20%3D%20webGLData%2Eindices%3B%0A%20%20%20%20webGLData%2Epoints%20%3D%20points%3B%0A%20%20%20%20webGLData%2Ealpha%20%3D%20graphicsData%2EfillAlpha%3B%0A%20%20%20%20webGLData%2Ecolor%20%3D%20utils%2Ehex2rgb%28graphicsData%2EfillColor%29%3B%0A%0A%20%20%20%20%2F%2F%20calclate%20the%20bounds%2E%2E%0A%20%20%20%20var%20minX%20%3D%20Infinity%3B%0A%20%20%20%20var%20maxX%20%3D%20%2DInfinity%3B%0A%0A%20%20%20%20var%20minY%20%3D%20Infinity%3B%0A%20%20%20%20var%20maxY%20%3D%20%2DInfinity%3B%0A%0A%20%20%20%20var%20x%2Cy%3B%0A%0A%20%20%20%20%2F%2F%20get%20size%2E%2E%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20points%2Elength%3B%20i%2B%3D2%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20x%20%3D%20points%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20y%20%3D%20points%5Bi%2B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20minX%20%3D%20x%20%3C%20minX%20%3F%20x%20%3A%20minX%3B%0A%20%20%20%20%20%20%20%20maxX%20%3D%20x%20%3E%20maxX%20%3F%20x%20%3A%20maxX%3B%0A%0A%20%20%20%20%20%20%20%20minY%20%3D%20y%20%3C%20minY%20%3F%20y%20%3A%20minY%3B%0A%20%20%20%20%20%20%20%20maxY%20%3D%20y%20%3E%20maxY%20%3F%20y%20%3A%20maxY%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20add%20a%20quad%20to%20the%20end%20cos%20there%20is%20no%20point%20making%20another%20buffer%21%0A%20%20%20%20points%2Epush%28minX%2C%20minY%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxX%2C%20minY%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxX%2C%20maxY%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20minX%2C%20maxY%29%3B%0A%0A%20%20%20%20%2F%2F%20push%20a%20quad%20onto%20the%20end%2E%2E%0A%0A%20%20%20%20%2F%2FTODO%20%2D%20this%20aint%20needed%21%0A%20%20%20%20var%20length%20%3D%20points%2Elength%20%2F%202%3B%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20length%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20indices%2Epush%28%20i%20%29%3B%0A%20%20%20%20%7D%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Builds%20a%20polygon%20to%20draw%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20graphicsData%20%7BPIXI%2EWebGLGraphicsData%7D%20The%20graphics%20object%20containing%20all%20the%20necessary%20properties%0A%20%2A%20%40param%20webGLData%20%7Bobject%7D%20an%20object%20containing%20all%20the%20webGL%2Dspecific%20information%20to%20create%20this%20shape%0A%20%2A%2F%0AGraphicsRenderer%2Eprototype%2EbuildPoly%20%3D%20function%20%28graphicsData%2C%20webGLData%29%0A%7B%0A%20%20%20%20var%20points%20%3D%20graphicsData%2Epoints%3B%0A%0A%20%20%20%20if%20%28points%2Elength%20%3C%206%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20get%20first%20and%20last%20point%2E%2E%20figure%20out%20the%20middle%21%0A%20%20%20%20var%20verts%20%3D%20webGLData%2Epoints%3B%0A%20%20%20%20var%20indices%20%3D%20webGLData%2Eindices%3B%0A%0A%20%20%20%20var%20length%20%3D%20points%2Elength%20%2F%202%3B%0A%0A%20%20%20%20%2F%2F%20sort%20color%0A%20%20%20%20var%20color%20%3D%20utils%2Ehex2rgb%28graphicsData%2EfillColor%29%3B%0A%20%20%20%20var%20alpha%20%3D%20graphicsData%2EfillAlpha%3B%0A%20%20%20%20var%20r%20%3D%20color%5B0%5D%20%2A%20alpha%3B%0A%20%20%20%20var%20g%20%3D%20color%5B1%5D%20%2A%20alpha%3B%0A%20%20%20%20var%20b%20%3D%20color%5B2%5D%20%2A%20alpha%3B%0A%0A%20%20%20%20var%20triangles%20%3D%20earcut%28points%2C%20null%2C%202%29%3B%0A%0A%20%20%20%20if%20%28%21triangles%29%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20vertPos%20%3D%20verts%2Elength%20%2F%206%3B%0A%0A%20%20%20%20var%20i%20%3D%200%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20triangles%2Elength%3B%20i%2B%3D3%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20indices%2Epush%28triangles%5Bi%5D%20%2B%20vertPos%29%3B%0A%20%20%20%20%20%20%20%20indices%2Epush%28triangles%5Bi%5D%20%2B%20vertPos%29%3B%0A%20%20%20%20%20%20%20%20indices%2Epush%28triangles%5Bi%2B1%5D%20%2B%20vertPos%29%3B%0A%20%20%20%20%20%20%20%20indices%2Epush%28triangles%5Bi%2B2%5D%20%2BvertPos%29%3B%0A%20%20%20%20%20%20%20%20indices%2Epush%28triangles%5Bi%2B2%5D%20%2B%20vertPos%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20length%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20verts%2Epush%28points%5Bi%20%2A%202%5D%2C%20points%5Bi%20%2A%202%20%2B%201%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r%2C%20g%2C%20b%2C%20alpha%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20true%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2F%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2FWebGLRenderer%22%3A42%2C%22%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2Futils%2FObjectRenderer%22%3A56%2C%22%2E%2E%2F%2E%2E%2Futils%22%3A70%2C%22%2E%2FWebGLGraphicsData%22%3A22%2C%22earcut%22%3A9%7D%5D%2C22%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20An%20object%20containing%20WebGL%20specific%20properties%20to%20be%20used%20by%20the%20WebGL%20renderer%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20gl%20%7BWebGLRenderingContext%7D%20the%20current%20WebGL%20drawing%20context%0A%20%2A%20%40private%0A%20%2A%2F%0Afunction%20WebGLGraphicsData%28gl%29%20%7B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20current%20WebGL%20drawing%20context%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLRenderingContext%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Egl%20%3D%20gl%3B%0A%0A%20%20%20%20%2F%2FTODO%20does%20this%20need%20to%20be%20split%20before%20uploding%3F%3F%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20An%20array%20of%20color%20components%20%28r%2Cg%2Cb%29%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ecolor%20%3D%20%5B0%2C0%2C0%5D%3B%20%2F%2F%20color%20split%21%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20An%20array%20of%20points%20to%20draw%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Epoints%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20indices%20of%20the%20vertices%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eindices%20%3D%20%5B%5D%3B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20main%20buffer%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLBuffer%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ebuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20index%20buffer%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLBuffer%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EindexBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20todo%20%40alvin%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Emode%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20alpha%20of%20the%20graphics%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ealpha%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Whether%20this%20graphics%20is%20dirty%20or%20not%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%0A%20%20%20%20this%2EglPoints%20%3D%20null%3B%0A%20%20%20%20this%2EglIndices%20%3D%20null%3B%0A%7D%0A%0AWebGLGraphicsData%2Eprototype%2Econstructor%20%3D%20WebGLGraphicsData%3B%0Amodule%2Eexports%20%3D%20WebGLGraphicsData%3B%0A%0A%2F%2A%2A%0A%20%2A%20Resets%20the%20vertices%20and%20the%20indices%0A%20%2A%2F%0AWebGLGraphicsData%2Eprototype%2Ereset%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this%2Epoints%2Elength%20%3D%200%3B%0A%20%20%20%20this%2Eindices%2Elength%20%3D%200%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Binds%20the%20buffers%20and%20uploads%20the%20data%0A%20%2A%2F%0AWebGLGraphicsData%2Eprototype%2Eupload%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%2F%2F%20%20%20%20this%2ElastIndex%20%3D%20graphics%2EgraphicsData%2Elength%3B%0A%20%20%20%20this%2EglPoints%20%3D%20new%20Float32Array%28this%2Epoints%29%3B%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20this%2Ebuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EARRAY%5FBUFFER%2C%20this%2EglPoints%2C%20gl%2ESTATIC%5FDRAW%29%3B%0A%0A%20%20%20%20this%2EglIndices%20%3D%20new%20Uint16Array%28this%2Eindices%29%3B%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20this%2EindexBuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20this%2EglIndices%2C%20gl%2ESTATIC%5FDRAW%29%3B%0A%0A%20%20%20%20this%2Edirty%20%3D%20false%3B%0A%7D%3B%0A%0AWebGLGraphicsData%2Eprototype%2Edestroy%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this%2Ecolor%20%3D%20null%3B%0A%20%20%20%20this%2Epoints%20%3D%20null%3B%0A%20%20%20%20this%2Eindices%20%3D%20null%3B%0A%0A%20%20%20%20this%2Egl%2EdeleteBuffer%28this%2Ebuffer%29%3B%0A%20%20%20%20this%2Egl%2EdeleteBuffer%28this%2EindexBuffer%29%3B%0A%20%20%20%20%0A%20%20%20%20this%2Egl%20%3D%20null%3B%0A%0A%20%20%20%20this%2Ebuffer%20%3D%20null%3B%0A%20%20%20%20this%2EindexBuffer%20%3D%20null%3B%0A%0A%20%20%20%20this%2EglPoints%20%3D%20null%3B%0A%20%20%20%20this%2EglIndices%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C23%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20%40file%20%20%20%20%20%20%20%20Main%20export%20of%20the%20PIXI%20core%20library%0A%20%2A%20%40author%20%20%20%20%20%20Mat%20Groves%20%3Cmat%40goodboydigital%2Ecom%3E%0A%20%2A%20%40copyright%20%20%202013%2D2015%20GoodBoyDigital%0A%20%2A%20%40license%20%20%20%20%20%7B%40link%20https%3A%2F%2Fgithub%2Ecom%2Fpixijs%2Fpixi%2Ejs%2Fblob%2Fmaster%2FLICENSE%7CMIT%20License%7D%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20%40namespace%20PIXI%0A%20%2A%2F%0A%2F%2F%20export%20core%20and%20const%2E%20We%20assign%20core%20to%20const%20so%20that%20the%20non%2Dreference%20types%20in%20const%20remain%20in%2Dtact%0Avar%20core%20%3D%20module%2Eexports%20%3D%20Object%2Eassign%28require%28%27%2E%2Fconst%27%29%2C%20require%28%27%2E%2Fmath%27%29%2C%20%7B%0A%20%20%20%20%2F%2F%20utils%0A%20%20%20%20utils%3A%20require%28%27%2E%2Futils%27%29%2C%0A%20%20%20%20ticker%3A%20require%28%27%2E%2Fticker%27%29%2C%0A%0A%20%20%20%20%2F%2F%20display%0A%20%20%20%20DisplayObject%3A%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Fdisplay%2FDisplayObject%27%29%2C%0A%20%20%20%20Container%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Fdisplay%2FContainer%27%29%2C%0A%0A%20%20%20%20%2F%2F%20sprites%0A%20%20%20%20Sprite%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Fsprites%2FSprite%27%29%2C%0A%20%20%20%20ParticleContainer%3A%20%20%20%20%20%20require%28%27%2E%2Fparticles%2FParticleContainer%27%29%2C%0A%20%20%20%20SpriteRenderer%3A%20%20%20%20%20%20%20%20%20require%28%27%2E%2Fsprites%2Fwebgl%2FSpriteRenderer%27%29%2C%0A%20%20%20%20ParticleRenderer%3A%20%20%20%20%20%20%20require%28%27%2E%2Fparticles%2Fwebgl%2FParticleRenderer%27%29%2C%0A%0A%20%20%20%20%2F%2F%20text%0A%20%20%20%20Text%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Ftext%2FText%27%29%2C%0A%0A%20%20%20%20%2F%2F%20primitives%0A%20%20%20%20Graphics%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Fgraphics%2FGraphics%27%29%2C%0A%20%20%20%20GraphicsData%3A%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Fgraphics%2FGraphicsData%27%29%2C%0A%20%20%20%20GraphicsRenderer%3A%20%20%20%20%20%20%20require%28%27%2E%2Fgraphics%2Fwebgl%2FGraphicsRenderer%27%29%2C%0A%0A%20%20%20%20%2F%2F%20textures%0A%20%20%20%20Texture%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Ftextures%2FTexture%27%29%2C%0A%20%20%20%20BaseTexture%3A%20%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Ftextures%2FBaseTexture%27%29%2C%0A%20%20%20%20RenderTexture%3A%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Ftextures%2FRenderTexture%27%29%2C%0A%20%20%20%20VideoBaseTexture%3A%20%20%20%20%20%20%20require%28%27%2E%2Ftextures%2FVideoBaseTexture%27%29%2C%0A%20%20%20%20TextureUvs%3A%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Ftextures%2FTextureUvs%27%29%2C%0A%0A%20%20%20%20%2F%2F%20renderers%20%2D%20canvas%0A%20%20%20%20CanvasRenderer%3A%20%20%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fcanvas%2FCanvasRenderer%27%29%2C%0A%20%20%20%20CanvasGraphics%3A%20%20%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasGraphics%27%29%2C%0A%20%20%20%20CanvasBuffer%3A%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasBuffer%27%29%2C%0A%0A%20%20%20%20%2F%2F%20renderers%20%2D%20webgl%0A%20%20%20%20WebGLRenderer%3A%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fwebgl%2FWebGLRenderer%27%29%2C%0A%20%20%20%20WebGLManager%3A%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fwebgl%2Fmanagers%2FWebGLManager%27%29%2C%0A%20%20%20%20ShaderManager%3A%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fwebgl%2Fmanagers%2FShaderManager%27%29%2C%0A%20%20%20%20Shader%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fwebgl%2Fshaders%2FShader%27%29%2C%0A%20%20%20%20ObjectRenderer%3A%20%20%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fwebgl%2Futils%2FObjectRenderer%27%29%2C%0A%20%20%20%20RenderTarget%3A%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fwebgl%2Futils%2FRenderTarget%27%29%2C%0A%0A%20%20%20%20%2F%2F%20filters%20%2D%20webgl%0A%20%20%20%20AbstractFilter%3A%20%20%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fwebgl%2Ffilters%2FAbstractFilter%27%29%2C%0A%20%20%20%20FXAAFilter%3A%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fwebgl%2Ffilters%2FFXAAFilter%27%29%2C%0A%20%20%20%20SpriteMaskFilter%3A%20%20%20%20%20%20%20require%28%27%2E%2Frenderers%2Fwebgl%2Ffilters%2FSpriteMaskFilter%27%29%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20helper%20function%20will%20automatically%20detect%20which%20renderer%20you%20should%20be%20using%2E%0A%20%20%20%20%20%2A%20WebGL%20is%20the%20preferred%20renderer%20as%20it%20is%20a%20lot%20faster%2E%20If%20webGL%20is%20not%20supported%20by%0A%20%20%20%20%20%2A%20the%20browser%20then%20this%20function%20will%20return%20a%20canvas%20renderer%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40param%20width%3D800%20%7Bnumber%7D%20the%20width%20of%20the%20renderers%20view%0A%20%20%20%20%20%2A%20%40param%20height%3D600%20%7Bnumber%7D%20the%20height%20of%20the%20renderers%20view%0A%20%20%20%20%20%2A%20%40param%20%5Boptions%5D%20%7Bobject%7D%20The%20optional%20renderer%20parameters%0A%20%20%20%20%20%2A%20%40param%20%5Boptions%2Eview%5D%20%7BHTMLCanvasElement%7D%20the%20canvas%20to%20use%20as%20a%20view%2C%20optional%0A%20%20%20%20%20%2A%20%40param%20%5Boptions%2Etransparent%3Dfalse%5D%20%7Bboolean%7D%20If%20the%20render%20view%20is%20transparent%2C%20default%20false%0A%20%20%20%20%20%2A%20%40param%20%5Boptions%2Eantialias%3Dfalse%5D%20%7Bboolean%7D%20sets%20antialias%20%28only%20applicable%20in%20chrome%20at%20the%20moment%29%0A%20%20%20%20%20%2A%20%40param%20%5Boptions%2EpreserveDrawingBuffer%3Dfalse%5D%20%7Bboolean%7D%20enables%20drawing%20buffer%20preservation%2C%20enable%20this%20if%20you%0A%20%20%20%20%20%2A%20%20%20%20%20%20need%20to%20call%20toDataUrl%20on%20the%20webgl%20context%0A%20%20%20%20%20%2A%20%40param%20%5Boptions%2Eresolution%3D1%5D%20%7Bnumber%7D%20the%20resolution%20of%20the%20renderer%2C%20retina%20would%20be%202%0A%20%20%20%20%20%2A%20%40param%20%5BnoWebGL%3Dfalse%5D%20%7Bboolean%7D%20prevents%20selection%20of%20WebGL%20renderer%2C%20even%20if%20such%20is%20present%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40return%20%7BWebGLRenderer%7CCanvasRenderer%7D%20Returns%20WebGL%20renderer%20if%20available%2C%20otherwise%20CanvasRenderer%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20autoDetectRenderer%3A%20function%20%28width%2C%20height%2C%20options%2C%20noWebGL%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20width%20%3D%20width%20%7C%7C%20800%3B%0A%20%20%20%20%20%20%20%20height%20%3D%20height%20%7C%7C%20600%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%21noWebGL%20%26%26%20core%2Eutils%2EisWebGLSupported%28%29%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20new%20core%2EWebGLRenderer%28width%2C%20height%2C%20options%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20new%20core%2ECanvasRenderer%28width%2C%20height%2C%20options%29%3B%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2Fconst%22%3A16%2C%22%2E%2Fdisplay%2FContainer%22%3A17%2C%22%2E%2Fdisplay%2FDisplayObject%22%3A18%2C%22%2E%2Fgraphics%2FGraphics%22%3A19%2C%22%2E%2Fgraphics%2FGraphicsData%22%3A20%2C%22%2E%2Fgraphics%2Fwebgl%2FGraphicsRenderer%22%3A21%2C%22%2E%2Fmath%22%3A26%2C%22%2E%2Fparticles%2FParticleContainer%22%3A32%2C%22%2E%2Fparticles%2Fwebgl%2FParticleRenderer%22%3A34%2C%22%2E%2Frenderers%2Fcanvas%2FCanvasRenderer%22%3A37%2C%22%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasBuffer%22%3A38%2C%22%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasGraphics%22%3A39%2C%22%2E%2Frenderers%2Fwebgl%2FWebGLRenderer%22%3A42%2C%22%2E%2Frenderers%2Fwebgl%2Ffilters%2FAbstractFilter%22%3A43%2C%22%2E%2Frenderers%2Fwebgl%2Ffilters%2FFXAAFilter%22%3A44%2C%22%2E%2Frenderers%2Fwebgl%2Ffilters%2FSpriteMaskFilter%22%3A45%2C%22%2E%2Frenderers%2Fwebgl%2Fmanagers%2FShaderManager%22%3A49%2C%22%2E%2Frenderers%2Fwebgl%2Fmanagers%2FWebGLManager%22%3A51%2C%22%2E%2Frenderers%2Fwebgl%2Fshaders%2FShader%22%3A54%2C%22%2E%2Frenderers%2Fwebgl%2Futils%2FObjectRenderer%22%3A56%2C%22%2E%2Frenderers%2Fwebgl%2Futils%2FRenderTarget%22%3A58%2C%22%2E%2Fsprites%2FSprite%22%3A60%2C%22%2E%2Fsprites%2Fwebgl%2FSpriteRenderer%22%3A61%2C%22%2E%2Ftext%2FText%22%3A62%2C%22%2E%2Ftextures%2FBaseTexture%22%3A63%2C%22%2E%2Ftextures%2FRenderTexture%22%3A64%2C%22%2E%2Ftextures%2FTexture%22%3A65%2C%22%2E%2Ftextures%2FTextureUvs%22%3A66%2C%22%2E%2Ftextures%2FVideoBaseTexture%22%3A67%2C%22%2E%2Fticker%22%3A69%2C%22%2E%2Futils%22%3A70%7D%5D%2C24%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2F%20%40todo%20%2D%20ignore%20the%20too%20many%20parameters%20warning%20for%20now%0A%2F%2F%20should%20either%20fix%20it%20or%20change%20the%20jshint%20config%0A%2F%2F%20jshint%20%2DW072%0A%0Avar%20Point%20%3D%20require%28%27%2E%2FPoint%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20pixi%20Matrix%20class%20as%20an%20object%2C%20which%20makes%20it%20a%20lot%20faster%2C%0A%20%2A%20here%20is%20a%20representation%20of%20it%20%3A%0A%20%2A%20%7C%20a%20%7C%20b%20%7C%20tx%7C%0A%20%2A%20%7C%20c%20%7C%20d%20%7C%20ty%7C%0A%20%2A%20%7C%200%20%7C%200%20%7C%201%20%7C%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%2F%0Afunction%20Matrix%28%29%0A%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%201%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ea%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eb%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ec%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%201%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ed%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etx%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ety%20%3D%200%3B%0A%7D%0A%0AMatrix%2Eprototype%2Econstructor%20%3D%20Matrix%3B%0Amodule%2Eexports%20%3D%20Matrix%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20Matrix%20object%20based%20on%20the%20given%20array%2E%20The%20Element%20to%20Matrix%20mapping%20order%20is%20as%20follows%3A%0A%20%2A%0A%20%2A%20a%20%3D%20array%5B0%5D%0A%20%2A%20b%20%3D%20array%5B1%5D%0A%20%2A%20c%20%3D%20array%5B3%5D%0A%20%2A%20d%20%3D%20array%5B4%5D%0A%20%2A%20tx%20%3D%20array%5B2%5D%0A%20%2A%20ty%20%3D%20array%5B5%5D%0A%20%2A%0A%20%2A%20%40param%20array%20%7Bnumber%5B%5D%7D%20The%20array%20that%20the%20matrix%20will%20be%20populated%20from%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2EfromArray%20%3D%20function%20%28array%29%0A%7B%0A%20%20%20%20this%2Ea%20%3D%20array%5B0%5D%3B%0A%20%20%20%20this%2Eb%20%3D%20array%5B1%5D%3B%0A%20%20%20%20this%2Ec%20%3D%20array%5B3%5D%3B%0A%20%20%20%20this%2Ed%20%3D%20array%5B4%5D%3B%0A%20%20%20%20this%2Etx%20%3D%20array%5B2%5D%3B%0A%20%20%20%20this%2Ety%20%3D%20array%5B5%5D%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20sets%20the%20matrix%20properties%0A%20%2A%0A%20%2A%20%40param%20%7Bnumber%7D%20a%0A%20%2A%20%40param%20%7Bnumber%7D%20b%0A%20%2A%20%40param%20%7Bnumber%7D%20c%0A%20%2A%20%40param%20%7Bnumber%7D%20d%0A%20%2A%20%40param%20%7Bnumber%7D%20tx%0A%20%2A%20%40param%20%7Bnumber%7D%20ty%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EMatrix%7D%20This%20matrix%2E%20Good%20for%20chaining%20method%20calls%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2Eset%20%3D%20function%20%28a%2C%20b%2C%20c%2C%20d%2C%20tx%2C%20ty%29%0A%7B%0A%20%20%20%20this%2Ea%20%3D%20a%3B%0A%20%20%20%20this%2Eb%20%3D%20b%3B%0A%20%20%20%20this%2Ec%20%3D%20c%3B%0A%20%20%20%20this%2Ed%20%3D%20d%3B%0A%20%20%20%20this%2Etx%20%3D%20tx%3B%0A%20%20%20%20this%2Ety%20%3D%20ty%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20an%20array%20from%20the%20current%20Matrix%20object%2E%0A%20%2A%0A%20%2A%20%40param%20transpose%20%7Bboolean%7D%20Whether%20we%20need%20to%20transpose%20the%20matrix%20or%20not%0A%20%2A%20%40param%20%5Bout%5D%20%7BArray%7D%20If%20provided%20the%20array%20will%20be%20assigned%20to%20out%0A%20%2A%20%40return%20%7Bnumber%5B%5D%7D%20the%20newly%20created%20array%20which%20contains%20the%20matrix%0A%20%2A%2F%0AMatrix%2Eprototype%2EtoArray%20%3D%20function%20%28transpose%2C%20out%29%0A%7B%0A%20%20%20%20if%20%28%21this%2Earray%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Earray%20%3D%20new%20Float32Array%289%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20array%20%3D%20out%20%7C%7C%20this%2Earray%3B%0A%0A%20%20%20%20if%20%28transpose%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20array%5B0%5D%20%3D%20this%2Ea%3B%0A%20%20%20%20%20%20%20%20array%5B1%5D%20%3D%20this%2Eb%3B%0A%20%20%20%20%20%20%20%20array%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20array%5B3%5D%20%3D%20this%2Ec%3B%0A%20%20%20%20%20%20%20%20array%5B4%5D%20%3D%20this%2Ed%3B%0A%20%20%20%20%20%20%20%20array%5B5%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20array%5B6%5D%20%3D%20this%2Etx%3B%0A%20%20%20%20%20%20%20%20array%5B7%5D%20%3D%20this%2Ety%3B%0A%20%20%20%20%20%20%20%20array%5B8%5D%20%3D%201%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20array%5B0%5D%20%3D%20this%2Ea%3B%0A%20%20%20%20%20%20%20%20array%5B1%5D%20%3D%20this%2Ec%3B%0A%20%20%20%20%20%20%20%20array%5B2%5D%20%3D%20this%2Etx%3B%0A%20%20%20%20%20%20%20%20array%5B3%5D%20%3D%20this%2Eb%3B%0A%20%20%20%20%20%20%20%20array%5B4%5D%20%3D%20this%2Ed%3B%0A%20%20%20%20%20%20%20%20array%5B5%5D%20%3D%20this%2Ety%3B%0A%20%20%20%20%20%20%20%20array%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20array%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20array%5B8%5D%20%3D%201%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20array%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Get%20a%20new%20position%20with%20the%20current%20transformation%20applied%2E%0A%20%2A%20Can%20be%20used%20to%20go%20from%20a%20child%27s%20coordinate%20space%20to%20the%20world%20coordinate%20space%2E%20%28e%2Eg%2E%20rendering%29%0A%20%2A%0A%20%2A%20%40param%20pos%20%7BPIXI%2EPoint%7D%20The%20origin%0A%20%2A%20%40param%20%5BnewPos%5D%20%7BPIXI%2EPoint%7D%20The%20point%20that%20the%20new%20position%20is%20assigned%20to%20%28allowed%20to%20be%20same%20as%20input%29%0A%20%2A%20%40return%20%7BPIXI%2EPoint%7D%20The%20new%20point%2C%20transformed%20through%20this%20matrix%0A%20%2A%2F%0AMatrix%2Eprototype%2Eapply%20%3D%20function%20%28pos%2C%20newPos%29%0A%7B%0A%20%20%20%20newPos%20%3D%20newPos%20%7C%7C%20new%20Point%28%29%3B%0A%0A%20%20%20%20var%20x%20%3D%20pos%2Ex%3B%0A%20%20%20%20var%20y%20%3D%20pos%2Ey%3B%0A%0A%20%20%20%20newPos%2Ex%20%3D%20this%2Ea%20%2A%20x%20%2B%20this%2Ec%20%2A%20y%20%2B%20this%2Etx%3B%0A%20%20%20%20newPos%2Ey%20%3D%20this%2Eb%20%2A%20x%20%2B%20this%2Ed%20%2A%20y%20%2B%20this%2Ety%3B%0A%0A%20%20%20%20return%20newPos%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Get%20a%20new%20position%20with%20the%20inverse%20of%20the%20current%20transformation%20applied%2E%0A%20%2A%20Can%20be%20used%20to%20go%20from%20the%20world%20coordinate%20space%20to%20a%20child%27s%20coordinate%20space%2E%20%28e%2Eg%2E%20input%29%0A%20%2A%0A%20%2A%20%40param%20pos%20%7BPIXI%2EPoint%7D%20The%20origin%0A%20%2A%20%40param%20%5BnewPos%5D%20%7BPIXI%2EPoint%7D%20The%20point%20that%20the%20new%20position%20is%20assigned%20to%20%28allowed%20to%20be%20same%20as%20input%29%0A%20%2A%20%40return%20%7BPIXI%2EPoint%7D%20The%20new%20point%2C%20inverse%2Dtransformed%20through%20this%20matrix%0A%20%2A%2F%0AMatrix%2Eprototype%2EapplyInverse%20%3D%20function%20%28pos%2C%20newPos%29%0A%7B%0A%20%20%20%20newPos%20%3D%20newPos%20%7C%7C%20new%20Point%28%29%3B%0A%0A%20%20%20%20var%20id%20%3D%201%20%2F%20%28this%2Ea%20%2A%20this%2Ed%20%2B%20this%2Ec%20%2A%20%2Dthis%2Eb%29%3B%0A%0A%20%20%20%20var%20x%20%3D%20pos%2Ex%3B%0A%20%20%20%20var%20y%20%3D%20pos%2Ey%3B%0A%0A%20%20%20%20newPos%2Ex%20%3D%20this%2Ed%20%2A%20id%20%2A%20x%20%2B%20%2Dthis%2Ec%20%2A%20id%20%2A%20y%20%2B%20%28this%2Ety%20%2A%20this%2Ec%20%2D%20this%2Etx%20%2A%20this%2Ed%29%20%2A%20id%3B%0A%20%20%20%20newPos%2Ey%20%3D%20this%2Ea%20%2A%20id%20%2A%20y%20%2B%20%2Dthis%2Eb%20%2A%20id%20%2A%20x%20%2B%20%28%2Dthis%2Ety%20%2A%20this%2Ea%20%2B%20this%2Etx%20%2A%20this%2Eb%29%20%2A%20id%3B%0A%0A%20%20%20%20return%20newPos%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Translates%20the%20matrix%20on%20the%20x%20and%20y%2E%0A%20%2A%0A%20%2A%20%40param%20%7Bnumber%7D%20x%0A%20%2A%20%40param%20%7Bnumber%7D%20y%0A%20%2A%20%40return%20%7BPIXI%2EMatrix%7D%20This%20matrix%2E%20Good%20for%20chaining%20method%20calls%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2Etranslate%20%3D%20function%20%28x%2C%20y%29%0A%7B%0A%20%20%20%20this%2Etx%20%2B%3D%20x%3B%0A%20%20%20%20this%2Ety%20%2B%3D%20y%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20a%20scale%20transformation%20to%20the%20matrix%2E%0A%20%2A%0A%20%2A%20%40param%20%7Bnumber%7D%20x%20The%20amount%20to%20scale%20horizontally%0A%20%2A%20%40param%20%7Bnumber%7D%20y%20The%20amount%20to%20scale%20vertically%0A%20%2A%20%40return%20%7BPIXI%2EMatrix%7D%20This%20matrix%2E%20Good%20for%20chaining%20method%20calls%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2Escale%20%3D%20function%20%28x%2C%20y%29%0A%7B%0A%20%20%20%20this%2Ea%20%2A%3D%20x%3B%0A%20%20%20%20this%2Ed%20%2A%3D%20y%3B%0A%20%20%20%20this%2Ec%20%2A%3D%20x%3B%0A%20%20%20%20this%2Eb%20%2A%3D%20y%3B%0A%20%20%20%20this%2Etx%20%2A%3D%20x%3B%0A%20%20%20%20this%2Ety%20%2A%3D%20y%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20a%20rotation%20transformation%20to%20the%20matrix%2E%0A%20%2A%0A%20%2A%20%40param%20%7Bnumber%7D%20angle%20%2D%20The%20angle%20in%20radians%2E%0A%20%2A%20%40return%20%7BPIXI%2EMatrix%7D%20This%20matrix%2E%20Good%20for%20chaining%20method%20calls%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2Erotate%20%3D%20function%20%28angle%29%0A%7B%0A%20%20%20%20var%20cos%20%3D%20Math%2Ecos%28%20angle%20%29%3B%0A%20%20%20%20var%20sin%20%3D%20Math%2Esin%28%20angle%20%29%3B%0A%0A%20%20%20%20var%20a1%20%3D%20this%2Ea%3B%0A%20%20%20%20var%20c1%20%3D%20this%2Ec%3B%0A%20%20%20%20var%20tx1%20%3D%20this%2Etx%3B%0A%0A%20%20%20%20this%2Ea%20%3D%20a1%20%2A%20cos%2Dthis%2Eb%20%2A%20sin%3B%0A%20%20%20%20this%2Eb%20%3D%20a1%20%2A%20sin%2Bthis%2Eb%20%2A%20cos%3B%0A%20%20%20%20this%2Ec%20%3D%20c1%20%2A%20cos%2Dthis%2Ed%20%2A%20sin%3B%0A%20%20%20%20this%2Ed%20%3D%20c1%20%2A%20sin%2Bthis%2Ed%20%2A%20cos%3B%0A%20%20%20%20this%2Etx%20%3D%20tx1%20%2A%20cos%20%2D%20this%2Ety%20%2A%20sin%3B%0A%20%20%20%20this%2Ety%20%3D%20tx1%20%2A%20sin%20%2B%20this%2Ety%20%2A%20cos%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Appends%20the%20given%20Matrix%20to%20this%20Matrix%2E%0A%20%2A%0A%20%2A%20%40param%20%7BPIXI%2EMatrix%7D%20matrix%0A%20%2A%20%40return%20%7BPIXI%2EMatrix%7D%20This%20matrix%2E%20Good%20for%20chaining%20method%20calls%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2Eappend%20%3D%20function%20%28matrix%29%0A%7B%0A%20%20%20%20var%20a1%20%3D%20this%2Ea%3B%0A%20%20%20%20var%20b1%20%3D%20this%2Eb%3B%0A%20%20%20%20var%20c1%20%3D%20this%2Ec%3B%0A%20%20%20%20var%20d1%20%3D%20this%2Ed%3B%0A%0A%20%20%20%20this%2Ea%20%20%3D%20matrix%2Ea%20%2A%20a1%20%2B%20matrix%2Eb%20%2A%20c1%3B%0A%20%20%20%20this%2Eb%20%20%3D%20matrix%2Ea%20%2A%20b1%20%2B%20matrix%2Eb%20%2A%20d1%3B%0A%20%20%20%20this%2Ec%20%20%3D%20matrix%2Ec%20%2A%20a1%20%2B%20matrix%2Ed%20%2A%20c1%3B%0A%20%20%20%20this%2Ed%20%20%3D%20matrix%2Ec%20%2A%20b1%20%2B%20matrix%2Ed%20%2A%20d1%3B%0A%0A%20%20%20%20this%2Etx%20%3D%20matrix%2Etx%20%2A%20a1%20%2B%20matrix%2Ety%20%2A%20c1%20%2B%20this%2Etx%3B%0A%20%20%20%20this%2Ety%20%3D%20matrix%2Etx%20%2A%20b1%20%2B%20matrix%2Ety%20%2A%20d1%20%2B%20this%2Ety%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20the%20matrix%20based%20on%20all%20the%20available%20properties%0A%20%2A%0A%20%2A%20%40param%20%7Bnumber%7D%20x%0A%20%2A%20%40param%20%7Bnumber%7D%20y%0A%20%2A%20%40param%20%7Bnumber%7D%20pivotX%0A%20%2A%20%40param%20%7Bnumber%7D%20pivotY%0A%20%2A%20%40param%20%7Bnumber%7D%20scaleX%0A%20%2A%20%40param%20%7Bnumber%7D%20scaleY%0A%20%2A%20%40param%20%7Bnumber%7D%20rotation%0A%20%2A%20%40param%20%7Bnumber%7D%20skewX%0A%20%2A%20%40param%20%7Bnumber%7D%20skewY%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EMatrix%7D%20This%20matrix%2E%20Good%20for%20chaining%20method%20calls%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2EsetTransform%20%3D%20function%20%28x%2C%20y%2C%20pivotX%2C%20pivotY%2C%20scaleX%2C%20scaleY%2C%20rotation%2C%20skewX%2C%20skewY%29%0A%7B%0A%20%20%20%20var%20a%2C%20b%2C%20c%2C%20d%2C%20sr%2C%20cr%2C%20cy%2C%20sy%2C%20nsx%2C%20cx%3B%0A%0A%20%20%20%20sr%20%20%3D%20Math%2Esin%28rotation%29%3B%0A%20%20%20%20cr%20%20%3D%20Math%2Ecos%28rotation%29%3B%0A%20%20%20%20cy%20%20%3D%20Math%2Ecos%28skewY%29%3B%0A%20%20%20%20sy%20%20%3D%20Math%2Esin%28skewY%29%3B%0A%20%20%20%20nsx%20%3D%20%2DMath%2Esin%28skewX%29%3B%0A%20%20%20%20cx%20%20%3D%20%20Math%2Ecos%28skewX%29%3B%0A%0A%20%20%20%20a%20%20%3D%20%20cr%20%2A%20scaleX%3B%0A%20%20%20%20b%20%20%3D%20%20sr%20%2A%20scaleX%3B%0A%20%20%20%20c%20%20%3D%20%2Dsr%20%2A%20scaleY%3B%0A%20%20%20%20d%20%20%3D%20%20cr%20%2A%20scaleY%3B%0A%0A%20%20%20%20this%2Ea%20%20%3D%20cy%20%2A%20a%20%2B%20sy%20%2A%20c%3B%0A%20%20%20%20this%2Eb%20%20%3D%20cy%20%2A%20b%20%2B%20sy%20%2A%20d%3B%0A%20%20%20%20this%2Ec%20%20%3D%20nsx%20%2A%20a%20%2B%20cx%20%2A%20c%3B%0A%20%20%20%20this%2Ed%20%20%3D%20nsx%20%2A%20b%20%2B%20cx%20%2A%20d%3B%0A%0A%20%20%20%20this%2Etx%20%3D%20x%20%2B%20%28%20pivotX%20%2A%20a%20%2B%20pivotY%20%2A%20c%20%29%3B%0A%20%20%20%20this%2Ety%20%3D%20y%20%2B%20%28%20pivotX%20%2A%20b%20%2B%20pivotY%20%2A%20d%20%29%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Prepends%20the%20given%20Matrix%20to%20this%20Matrix%2E%0A%20%2A%0A%20%2A%20%40param%20%7BPIXI%2EMatrix%7D%20matrix%0A%20%2A%20%40return%20%7BPIXI%2EMatrix%7D%20This%20matrix%2E%20Good%20for%20chaining%20method%20calls%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2Eprepend%20%3D%20function%28matrix%29%0A%7B%0A%20%20%20%20var%20tx1%20%3D%20this%2Etx%3B%0A%0A%20%20%20%20if%20%28matrix%2Ea%20%21%3D%3D%201%20%7C%7C%20matrix%2Eb%20%21%3D%3D%200%20%7C%7C%20matrix%2Ec%20%21%3D%3D%200%20%7C%7C%20matrix%2Ed%20%21%3D%3D%201%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20a1%20%3D%20this%2Ea%3B%0A%20%20%20%20%20%20%20%20var%20c1%20%3D%20this%2Ec%3B%0A%20%20%20%20%20%20%20%20this%2Ea%20%20%3D%20a1%2Amatrix%2Ea%2Bthis%2Eb%2Amatrix%2Ec%3B%0A%20%20%20%20%20%20%20%20this%2Eb%20%20%3D%20a1%2Amatrix%2Eb%2Bthis%2Eb%2Amatrix%2Ed%3B%0A%20%20%20%20%20%20%20%20this%2Ec%20%20%3D%20c1%2Amatrix%2Ea%2Bthis%2Ed%2Amatrix%2Ec%3B%0A%20%20%20%20%20%20%20%20this%2Ed%20%20%3D%20c1%2Amatrix%2Eb%2Bthis%2Ed%2Amatrix%2Ed%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Etx%20%3D%20tx1%2Amatrix%2Ea%2Bthis%2Ety%2Amatrix%2Ec%2Bmatrix%2Etx%3B%0A%20%20%20%20this%2Ety%20%3D%20tx1%2Amatrix%2Eb%2Bthis%2Ety%2Amatrix%2Ed%2Bmatrix%2Ety%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Inverts%20this%20matrix%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EMatrix%7D%20This%20matrix%2E%20Good%20for%20chaining%20method%20calls%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2Einvert%20%3D%20function%28%29%0A%7B%0A%20%20%20%20var%20a1%20%3D%20this%2Ea%3B%0A%20%20%20%20var%20b1%20%3D%20this%2Eb%3B%0A%20%20%20%20var%20c1%20%3D%20this%2Ec%3B%0A%20%20%20%20var%20d1%20%3D%20this%2Ed%3B%0A%20%20%20%20var%20tx1%20%3D%20this%2Etx%3B%0A%20%20%20%20var%20n%20%3D%20a1%2Ad1%2Db1%2Ac1%3B%0A%0A%20%20%20%20this%2Ea%20%3D%20d1%2Fn%3B%0A%20%20%20%20this%2Eb%20%3D%20%2Db1%2Fn%3B%0A%20%20%20%20this%2Ec%20%3D%20%2Dc1%2Fn%3B%0A%20%20%20%20this%2Ed%20%3D%20a1%2Fn%3B%0A%20%20%20%20this%2Etx%20%3D%20%28c1%2Athis%2Ety%2Dd1%2Atx1%29%2Fn%3B%0A%20%20%20%20this%2Ety%20%3D%20%2D%28a1%2Athis%2Ety%2Db1%2Atx1%29%2Fn%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Resets%20this%20Matix%20to%20an%20identity%20%28default%29%20matrix%2E%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EMatrix%7D%20This%20matrix%2E%20Good%20for%20chaining%20method%20calls%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2Eidentity%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Ea%20%3D%201%3B%0A%20%20%20%20this%2Eb%20%3D%200%3B%0A%20%20%20%20this%2Ec%20%3D%200%3B%0A%20%20%20%20this%2Ed%20%3D%201%3B%0A%20%20%20%20this%2Etx%20%3D%200%3B%0A%20%20%20%20this%2Ety%20%3D%200%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20new%20Matrix%20object%20with%20the%20same%20values%20as%20this%20one%2E%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EMatrix%7D%20A%20copy%20of%20this%20matrix%2E%20Good%20for%20chaining%20method%20calls%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2Eclone%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20new%20Matrix%28%29%3B%0A%20%20%20%20matrix%2Ea%20%3D%20this%2Ea%3B%0A%20%20%20%20matrix%2Eb%20%3D%20this%2Eb%3B%0A%20%20%20%20matrix%2Ec%20%3D%20this%2Ec%3B%0A%20%20%20%20matrix%2Ed%20%3D%20this%2Ed%3B%0A%20%20%20%20matrix%2Etx%20%3D%20this%2Etx%3B%0A%20%20%20%20matrix%2Ety%20%3D%20this%2Ety%3B%0A%0A%20%20%20%20return%20matrix%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Changes%20the%20values%20of%20the%20given%20matrix%20to%20be%20the%20same%20as%20the%20ones%20in%20this%20matrix%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EMatrix%7D%20The%20matrix%20given%20in%20parameter%20with%20its%20values%20updated%2E%0A%20%2A%2F%0AMatrix%2Eprototype%2Ecopy%20%3D%20function%20%28matrix%29%0A%7B%0A%20%20%20%20matrix%2Ea%20%3D%20this%2Ea%3B%0A%20%20%20%20matrix%2Eb%20%3D%20this%2Eb%3B%0A%20%20%20%20matrix%2Ec%20%3D%20this%2Ec%3B%0A%20%20%20%20matrix%2Ed%20%3D%20this%2Ed%3B%0A%20%20%20%20matrix%2Etx%20%3D%20this%2Etx%3B%0A%20%20%20%20matrix%2Ety%20%3D%20this%2Ety%3B%0A%0A%20%20%20%20return%20matrix%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20default%20%28identity%29%20matrix%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40const%0A%20%2A%2F%0AMatrix%2EIDENTITY%20%3D%20new%20Matrix%28%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20temp%20matrix%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40const%0A%20%2A%2F%0AMatrix%2ETEMP%5FMATRIX%20%3D%20new%20Matrix%28%29%3B%0A%0A%7D%2C%7B%22%2E%2FPoint%22%3A25%7D%5D%2C25%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20The%20Point%20object%20represents%20a%20location%20in%20a%20two%2Ddimensional%20coordinate%20system%2C%20where%20x%20represents%0A%20%2A%20the%20horizontal%20axis%20and%20y%20represents%20the%20vertical%20axis%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20%5Bx%3D0%5D%20%7Bnumber%7D%20position%20of%20the%20point%20on%20the%20x%20axis%0A%20%2A%20%40param%20%5By%3D0%5D%20%7Bnumber%7D%20position%20of%20the%20point%20on%20the%20y%20axis%0A%20%2A%2F%0Afunction%20Point%28x%2C%20y%29%0A%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ex%20%3D%20x%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ey%20%3D%20y%20%7C%7C%200%3B%0A%7D%0A%0APoint%2Eprototype%2Econstructor%20%3D%20Point%3B%0Amodule%2Eexports%20%3D%20Point%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20clone%20of%20this%20point%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EPoint%7D%20a%20copy%20of%20the%20point%0A%20%2A%2F%0APoint%2Eprototype%2Eclone%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20new%20Point%28this%2Ex%2C%20this%2Ey%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Copies%20x%20and%20y%20from%20the%20given%20point%0A%20%2A%0A%20%2A%20%40param%20p%20%7BPIXI%2EPoint%7D%0A%20%2A%2F%0APoint%2Eprototype%2Ecopy%20%3D%20function%20%28p%29%20%7B%0A%20%20%20%20this%2Eset%28p%2Ex%2C%20p%2Ey%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Returns%20true%20if%20the%20given%20point%20is%20equal%20to%20this%20point%0A%20%2A%0A%20%2A%20%40param%20p%20%7BPIXI%2EPoint%7D%0A%20%2A%20%40returns%20%7Bboolean%7D%0A%20%2A%2F%0APoint%2Eprototype%2Eequals%20%3D%20function%20%28p%29%20%7B%0A%20%20%20%20return%20%28p%2Ex%20%3D%3D%3D%20this%2Ex%29%20%26%26%20%28p%2Ey%20%3D%3D%3D%20this%2Ey%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20the%20point%20to%20a%20new%20x%20and%20y%20position%2E%0A%20%2A%20If%20y%20is%20omitted%2C%20both%20x%20and%20y%20will%20be%20set%20to%20x%2E%0A%20%2A%0A%20%2A%20%40param%20%5Bx%3D0%5D%20%7Bnumber%7D%20position%20of%20the%20point%20on%20the%20x%20axis%0A%20%2A%20%40param%20%5By%3D0%5D%20%7Bnumber%7D%20position%20of%20the%20point%20on%20the%20y%20axis%0A%20%2A%2F%0APoint%2Eprototype%2Eset%20%3D%20function%20%28x%2C%20y%29%0A%7B%0A%20%20%20%20this%2Ex%20%3D%20x%20%7C%7C%200%3B%0A%20%20%20%20this%2Ey%20%3D%20y%20%7C%7C%20%28%20%28y%20%21%3D%3D%200%29%20%3F%20this%2Ex%20%3A%200%20%29%20%3B%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C26%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20Math%20classes%20and%20utilities%20mixed%20into%20PIXI%20namespace%2E%0A%20%2A%0A%20%2A%20%40lends%20PIXI%0A%20%2A%2F%0Amodule%2Eexports%20%3D%20%7B%0A%20%20%20%20%2F%2F%20These%20will%20be%20mixed%20to%20be%20made%20publicly%20available%2C%0A%20%20%20%20%2F%2F%20while%20this%20module%20is%20used%20internally%20in%20core%0A%20%20%20%20%2F%2F%20to%20avoid%20circular%20dependencies%20and%20cut%20down%20on%0A%20%20%20%20%2F%2F%20internal%20module%20requires%2E%0A%0A%20%20%20%20Point%3A%20%20%20%20%20%20require%28%27%2E%2FPoint%27%29%2C%0A%20%20%20%20Matrix%3A%20%20%20%20%20require%28%27%2E%2FMatrix%27%29%2C%0A%0A%20%20%20%20Circle%3A%20%20%20%20%20require%28%27%2E%2Fshapes%2FCircle%27%29%2C%0A%20%20%20%20Ellipse%3A%20%20%20%20require%28%27%2E%2Fshapes%2FEllipse%27%29%2C%0A%20%20%20%20Polygon%3A%20%20%20%20require%28%27%2E%2Fshapes%2FPolygon%27%29%2C%0A%20%20%20%20Rectangle%3A%20%20require%28%27%2E%2Fshapes%2FRectangle%27%29%2C%0A%20%20%20%20RoundedRectangle%3A%20require%28%27%2E%2Fshapes%2FRoundedRectangle%27%29%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FMatrix%22%3A24%2C%22%2E%2FPoint%22%3A25%2C%22%2E%2Fshapes%2FCircle%22%3A27%2C%22%2E%2Fshapes%2FEllipse%22%3A28%2C%22%2E%2Fshapes%2FPolygon%22%3A29%2C%22%2E%2Fshapes%2FRectangle%22%3A30%2C%22%2E%2Fshapes%2FRoundedRectangle%22%3A31%7D%5D%2C27%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Rectangle%20%3D%20require%28%27%2E%2FRectangle%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20Circle%20object%20can%20be%20used%20to%20specify%20a%20hit%20area%20for%20displayObjects%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coordinate%20of%20the%20center%20of%20this%20circle%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coordinate%20of%20the%20center%20of%20this%20circle%0A%20%2A%20%40param%20radius%20%7Bnumber%7D%20The%20radius%20of%20the%20circle%0A%20%2A%2F%0Afunction%20Circle%28x%2C%20y%2C%20radius%29%0A%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ex%20%3D%20x%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ey%20%3D%20y%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eradius%20%3D%20radius%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20type%20of%20the%20object%2C%20mainly%20used%20to%20avoid%20%60instanceof%60%20checks%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etype%20%3D%20CONST%2ESHAPES%2ECIRC%3B%0A%7D%0A%0ACircle%2Eprototype%2Econstructor%20%3D%20Circle%3B%0Amodule%2Eexports%20%3D%20Circle%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20clone%20of%20this%20Circle%20instance%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2ECircle%7D%20a%20copy%20of%20the%20Circle%0A%20%2A%2F%0ACircle%2Eprototype%2Eclone%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20new%20Circle%28this%2Ex%2C%20this%2Ey%2C%20this%2Eradius%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Checks%20whether%20the%20x%20and%20y%20coordinates%20given%20are%20contained%20within%20this%20circle%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coordinate%20of%20the%20point%20to%20test%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coordinate%20of%20the%20point%20to%20test%0A%20%2A%20%40return%20%7Bboolean%7D%20Whether%20the%20x%2Fy%20coordinates%20are%20within%20this%20Circle%0A%20%2A%2F%0ACircle%2Eprototype%2Econtains%20%3D%20function%20%28x%2C%20y%29%0A%7B%0A%20%20%20%20if%20%28this%2Eradius%20%3C%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20dx%20%3D%20%28this%2Ex%20%2D%20x%29%2C%0A%20%20%20%20%20%20%20%20dy%20%3D%20%28this%2Ey%20%2D%20y%29%2C%0A%20%20%20%20%20%20%20%20r2%20%3D%20this%2Eradius%20%2A%20this%2Eradius%3B%0A%0A%20%20%20%20dx%20%2A%3D%20dx%3B%0A%20%20%20%20dy%20%2A%3D%20dy%3B%0A%0A%20%20%20%20return%20%28dx%20%2B%20dy%20%3C%3D%20r2%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%2A%20Returns%20the%20framing%20rectangle%20of%20the%20circle%20as%20a%20Rectangle%20object%0A%2A%0A%2A%20%40return%20%7BPIXI%2ERectangle%7D%20the%20framing%20rectangle%0A%2A%2F%0ACircle%2Eprototype%2EgetBounds%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20new%20Rectangle%28this%2Ex%20%2D%20this%2Eradius%2C%20this%2Ey%20%2D%20this%2Eradius%2C%20this%2Eradius%20%2A%202%2C%20this%2Eradius%20%2A%202%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fconst%22%3A16%2C%22%2E%2FRectangle%22%3A30%7D%5D%2C28%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Rectangle%20%3D%20require%28%27%2E%2FRectangle%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20Ellipse%20object%20can%20be%20used%20to%20specify%20a%20hit%20area%20for%20displayObjects%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coordinate%20of%20the%20center%20of%20the%20ellipse%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coordinate%20of%20the%20center%20of%20the%20ellipse%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20The%20half%20width%20of%20this%20ellipse%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20The%20half%20height%20of%20this%20ellipse%0A%20%2A%2F%0Afunction%20Ellipse%28x%2C%20y%2C%20width%2C%20height%29%0A%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ex%20%3D%20x%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ey%20%3D%20y%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ewidth%20%3D%20width%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eheight%20%3D%20height%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20type%20of%20the%20object%2C%20mainly%20used%20to%20avoid%20%60instanceof%60%20checks%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etype%20%3D%20CONST%2ESHAPES%2EELIP%3B%0A%7D%0A%0AEllipse%2Eprototype%2Econstructor%20%3D%20Ellipse%3B%0Amodule%2Eexports%20%3D%20Ellipse%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20clone%20of%20this%20Ellipse%20instance%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EEllipse%7D%20a%20copy%20of%20the%20ellipse%0A%20%2A%2F%0AEllipse%2Eprototype%2Eclone%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20new%20Ellipse%28this%2Ex%2C%20this%2Ey%2C%20this%2Ewidth%2C%20this%2Eheight%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Checks%20whether%20the%20x%20and%20y%20coordinates%20given%20are%20contained%20within%20this%20ellipse%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coordinate%20of%20the%20point%20to%20test%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coordinate%20of%20the%20point%20to%20test%0A%20%2A%20%40return%20%7Bboolean%7D%20Whether%20the%20x%2Fy%20coords%20are%20within%20this%20ellipse%0A%20%2A%2F%0AEllipse%2Eprototype%2Econtains%20%3D%20function%20%28x%2C%20y%29%0A%7B%0A%20%20%20%20if%20%28this%2Ewidth%20%3C%3D%200%20%7C%7C%20this%2Eheight%20%3C%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2Fnormalize%20the%20coords%20to%20an%20ellipse%20with%20center%200%2C0%0A%20%20%20%20var%20normx%20%3D%20%28%28x%20%2D%20this%2Ex%29%20%2F%20this%2Ewidth%29%2C%0A%20%20%20%20%20%20%20%20normy%20%3D%20%28%28y%20%2D%20this%2Ey%29%20%2F%20this%2Eheight%29%3B%0A%0A%20%20%20%20normx%20%2A%3D%20normx%3B%0A%20%20%20%20normy%20%2A%3D%20normy%3B%0A%0A%20%20%20%20return%20%28normx%20%2B%20normy%20%3C%3D%201%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Returns%20the%20framing%20rectangle%20of%20the%20ellipse%20as%20a%20Rectangle%20object%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20the%20framing%20rectangle%0A%20%2A%2F%0AEllipse%2Eprototype%2EgetBounds%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20new%20Rectangle%28this%2Ex%20%2D%20this%2Ewidth%2C%20this%2Ey%20%2D%20this%2Eheight%2C%20this%2Ewidth%2C%20this%2Eheight%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fconst%22%3A16%2C%22%2E%2FRectangle%22%3A30%7D%5D%2C29%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Point%20%3D%20require%28%27%2E%2E%2FPoint%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20points%20%7BPIXI%2EPoint%5B%5D%7Cnumber%5B%5D%7C%2E%2E%2EPIXI%2EPoint%7C%2E%2E%2Enumber%7D%20This%20can%20be%20an%20array%20of%20Points%20that%20form%20the%20polygon%2C%0A%20%2A%20%20%20%20%20%20a%20flat%20array%20of%20numbers%20that%20will%20be%20interpreted%20as%20%5Bx%2Cy%2C%20x%2Cy%2C%20%2E%2E%2E%5D%2C%20or%20the%20arguments%20passed%20can%20be%0A%20%2A%20%20%20%20%20%20all%20the%20points%20of%20the%20polygon%20e%2Eg%2E%20%60new%20PIXI%2EPolygon%28new%20PIXI%2EPoint%28%29%2C%20new%20PIXI%2EPoint%28%29%2C%20%2E%2E%2E%29%60%2C%20or%20the%0A%20%2A%20%20%20%20%20%20arguments%20passed%20can%20be%20flat%20x%2Cy%20values%20e%2Eg%2E%20%60new%20Polygon%28x%2Cy%2C%20x%2Cy%2C%20x%2Cy%2C%20%2E%2E%2E%29%60%20where%20%60x%60%20and%20%60y%60%20are%0A%20%2A%20%20%20%20%20%20Numbers%2E%0A%20%2A%2F%0Afunction%20Polygon%28points%5F%29%0A%7B%0A%20%20%20%20%2F%2F%20prevents%20an%20argument%20assignment%20deopt%0A%20%20%20%20%2F%2F%20see%20section%203%2E1%3A%20https%3A%2F%2Fgithub%2Ecom%2Fpetkaantonov%2Fbluebird%2Fwiki%2FOptimization%2Dkillers%233%2Dmanaging%2Darguments%0A%20%20%20%20var%20points%20%3D%20points%5F%3B%0A%0A%20%20%20%20%2F%2Fif%20points%20isn%27t%20an%20array%2C%20use%20arguments%20as%20the%20array%0A%20%20%20%20if%20%28%21Array%2EisArray%28points%29%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20prevents%20an%20argument%20leak%20deopt%0A%20%20%20%20%20%20%20%20%2F%2F%20see%20section%203%2E2%3A%20https%3A%2F%2Fgithub%2Ecom%2Fpetkaantonov%2Fbluebird%2Fwiki%2FOptimization%2Dkillers%233%2Dmanaging%2Darguments%0A%20%20%20%20%20%20%20%20points%20%3D%20new%20Array%28arguments%2Elength%29%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28var%20a%20%3D%200%3B%20a%20%3C%20points%2Elength%3B%20%2B%2Ba%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5Ba%5D%20%3D%20arguments%5Ba%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20if%20this%20is%20an%20array%20of%20points%2C%20convert%20it%20to%20a%20flat%20array%20of%20numbers%0A%20%20%20%20if%20%28points%5B0%5D%20instanceof%20Point%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20p%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20il%20%3D%20points%2Elength%3B%20i%20%3C%20il%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20p%2Epush%28points%5Bi%5D%2Ex%2C%20points%5Bi%5D%2Ey%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20points%20%3D%20p%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Eclosed%20%3D%20true%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20An%20array%20of%20the%20points%20of%20this%20polygon%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Epoints%20%3D%20points%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20type%20of%20the%20object%2C%20mainly%20used%20to%20avoid%20%60instanceof%60%20checks%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etype%20%3D%20CONST%2ESHAPES%2EPOLY%3B%0A%7D%0A%0APolygon%2Eprototype%2Econstructor%20%3D%20Polygon%3B%0Amodule%2Eexports%20%3D%20Polygon%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20clone%20of%20this%20polygon%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2EPolygon%7D%20a%20copy%20of%20the%20polygon%0A%20%2A%2F%0APolygon%2Eprototype%2Eclone%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20new%20Polygon%28this%2Epoints%2Eslice%28%29%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Checks%20whether%20the%20x%20and%20y%20coordinates%20passed%20to%20this%20function%20are%20contained%20within%20this%20polygon%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coordinate%20of%20the%20point%20to%20test%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coordinate%20of%20the%20point%20to%20test%0A%20%2A%20%40return%20%7Bboolean%7D%20Whether%20the%20x%2Fy%20coordinates%20are%20within%20this%20polygon%0A%20%2A%2F%0APolygon%2Eprototype%2Econtains%20%3D%20function%20%28x%2C%20y%29%0A%7B%0A%20%20%20%20var%20inside%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2F%20use%20some%20raycasting%20to%20test%20hits%0A%20%20%20%20%2F%2F%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fpoint%2Din%2Dpolygon%2Fblob%2Fmaster%2Findex%2Ejs%0A%20%20%20%20var%20length%20%3D%20this%2Epoints%2Elength%20%2F%202%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20j%20%3D%20length%20%2D%201%3B%20i%20%3C%20length%3B%20j%20%3D%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20xi%20%3D%20this%2Epoints%5Bi%20%2A%202%5D%2C%20yi%20%3D%20this%2Epoints%5Bi%20%2A%202%20%2B%201%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20xj%20%3D%20this%2Epoints%5Bj%20%2A%202%5D%2C%20yj%20%3D%20this%2Epoints%5Bj%20%2A%202%20%2B%201%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20intersect%20%3D%20%28%28yi%20%3E%20y%29%20%21%3D%3D%20%28yj%20%3E%20y%29%29%20%26%26%20%28x%20%3C%20%28xj%20%2D%20xi%29%20%2A%20%28y%20%2D%20yi%29%20%2F%20%28yj%20%2D%20yi%29%20%2B%20xi%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28intersect%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20inside%20%3D%20%21inside%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20inside%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2FPoint%22%3A25%7D%5D%2C30%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20the%20Rectangle%20object%20is%20an%20area%20defined%20by%20its%20position%2C%20as%20indicated%20by%20its%20top%2Dleft%20corner%20point%20%28x%2C%20y%29%20and%20by%20its%20width%20and%20its%20height%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coordinate%20of%20the%20upper%2Dleft%20corner%20of%20the%20rectangle%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coordinate%20of%20the%20upper%2Dleft%20corner%20of%20the%20rectangle%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20The%20overall%20width%20of%20this%20rectangle%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20The%20overall%20height%20of%20this%20rectangle%0A%20%2A%2F%0Afunction%20Rectangle%28x%2C%20y%2C%20width%2C%20height%29%0A%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ex%20%3D%20x%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ey%20%3D%20y%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ewidth%20%3D%20width%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eheight%20%3D%20height%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20type%20of%20the%20object%2C%20mainly%20used%20to%20avoid%20%60instanceof%60%20checks%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etype%20%3D%20CONST%2ESHAPES%2ERECT%3B%0A%7D%0A%0ARectangle%2Eprototype%2Econstructor%20%3D%20Rectangle%3B%0Amodule%2Eexports%20%3D%20Rectangle%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20constant%20empty%20rectangle%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40constant%0A%20%2A%2F%0ARectangle%2EEMPTY%20%3D%20new%20Rectangle%280%2C%200%2C%200%2C%200%29%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20clone%20of%20this%20Rectangle%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20a%20copy%20of%20the%20rectangle%0A%20%2A%2F%0ARectangle%2Eprototype%2Eclone%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20new%20Rectangle%28this%2Ex%2C%20this%2Ey%2C%20this%2Ewidth%2C%20this%2Eheight%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Checks%20whether%20the%20x%20and%20y%20coordinates%20given%20are%20contained%20within%20this%20Rectangle%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coordinate%20of%20the%20point%20to%20test%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coordinate%20of%20the%20point%20to%20test%0A%20%2A%20%40return%20%7Bboolean%7D%20Whether%20the%20x%2Fy%20coordinates%20are%20within%20this%20Rectangle%0A%20%2A%2F%0ARectangle%2Eprototype%2Econtains%20%3D%20function%20%28x%2C%20y%29%0A%7B%0A%20%20%20%20if%20%28this%2Ewidth%20%3C%3D%200%20%7C%7C%20this%2Eheight%20%3C%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28x%20%3E%3D%20this%2Ex%20%26%26%20x%20%3C%20this%2Ex%20%2B%20this%2Ewidth%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28y%20%3E%3D%20this%2Ey%20%26%26%20y%20%3C%20this%2Ey%20%2B%20this%2Eheight%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20false%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fconst%22%3A16%7D%5D%2C31%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20Rounded%20Rectangle%20object%20is%20an%20area%20that%20has%20nice%20rounded%20corners%2C%20as%20indicated%20by%20its%20top%2Dleft%20corner%20point%20%28x%2C%20y%29%20and%20by%20its%20width%20and%20its%20height%20and%20its%20radius%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coordinate%20of%20the%20upper%2Dleft%20corner%20of%20the%20rounded%20rectangle%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coordinate%20of%20the%20upper%2Dleft%20corner%20of%20the%20rounded%20rectangle%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20The%20overall%20width%20of%20this%20rounded%20rectangle%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20The%20overall%20height%20of%20this%20rounded%20rectangle%0A%20%2A%20%40param%20radius%20%7Bnumber%7D%20Controls%20the%20radius%20of%20the%20rounded%20corners%0A%20%2A%2F%0Afunction%20RoundedRectangle%28x%2C%20y%2C%20width%2C%20height%2C%20radius%29%0A%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ex%20%3D%20x%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ey%20%3D%20y%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ewidth%20%3D%20width%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eheight%20%3D%20height%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%2020%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eradius%20%3D%20radius%20%7C%7C%2020%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20type%20of%20the%20object%2C%20mainly%20used%20to%20avoid%20%60instanceof%60%20checks%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etype%20%3D%20CONST%2ESHAPES%2ERREC%3B%0A%7D%0A%0ARoundedRectangle%2Eprototype%2Econstructor%20%3D%20RoundedRectangle%3B%0Amodule%2Eexports%20%3D%20RoundedRectangle%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20clone%20of%20this%20Rounded%20Rectangle%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2ERoundedRectangle%7D%20a%20copy%20of%20the%20rounded%20rectangle%0A%20%2A%2F%0ARoundedRectangle%2Eprototype%2Eclone%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20new%20RoundedRectangle%28this%2Ex%2C%20this%2Ey%2C%20this%2Ewidth%2C%20this%2Eheight%2C%20this%2Eradius%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Checks%20whether%20the%20x%20and%20y%20coordinates%20given%20are%20contained%20within%20this%20Rounded%20Rectangle%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20X%20coordinate%20of%20the%20point%20to%20test%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20Y%20coordinate%20of%20the%20point%20to%20test%0A%20%2A%20%40return%20%7Bboolean%7D%20Whether%20the%20x%2Fy%20coordinates%20are%20within%20this%20Rounded%20Rectangle%0A%20%2A%2F%0ARoundedRectangle%2Eprototype%2Econtains%20%3D%20function%20%28x%2C%20y%29%0A%7B%0A%20%20%20%20if%20%28this%2Ewidth%20%3C%3D%200%20%7C%7C%20this%2Eheight%20%3C%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28x%20%3E%3D%20this%2Ex%20%26%26%20x%20%3C%3D%20this%2Ex%20%2B%20this%2Ewidth%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28y%20%3E%3D%20this%2Ey%20%26%26%20y%20%3C%3D%20this%2Ey%20%2B%20this%2Eheight%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20false%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fconst%22%3A16%7D%5D%2C32%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Container%20%3D%20require%28%27%2E%2E%2Fdisplay%2FContainer%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20ParticleContainer%20class%20is%20a%20really%20fast%20version%20of%20the%20Container%20built%20solely%20for%20speed%2C%0A%20%2A%20so%20use%20when%20you%20need%20a%20lot%20of%20sprites%20or%20particles%2E%20The%20tradeoff%20of%20the%20ParticleContainer%20is%20that%20advanced%0A%20%2A%20functionality%20will%20not%20work%2E%20ParticleContainer%20implements%20only%20the%20basic%20object%20transform%20%28position%2C%20scale%2C%20rotation%29%2E%0A%20%2A%20Any%20other%20functionality%20like%20tinting%2C%20masking%2C%20etc%20will%20not%20work%20on%20sprites%20in%20this%20batch%2E%0A%20%2A%0A%20%2A%20It%27s%20extremely%20easy%20to%20use%20%3A%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20var%20container%20%3D%20new%20ParticleContainer%28%29%3B%0A%20%2A%0A%20%2A%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20100%3B%20%2B%2Bi%29%0A%20%2A%20%7B%0A%20%2A%20%20%20%20%20var%20sprite%20%3D%20new%20PIXI%2ESprite%2EfromImage%28%22myImage%2Epng%22%29%3B%0A%20%2A%20%20%20%20%20container%2EaddChild%28sprite%29%3B%0A%20%2A%20%7D%0A%20%2A%20%60%60%60%0A%20%2A%0A%20%2A%20And%20here%20you%20have%20a%20hundred%20sprites%20that%20will%20be%20renderer%20at%20the%20speed%20of%20light%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EContainer%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20%5BmaxSize%3D15000%5D%20%7Bnumber%7D%20The%20maximum%20number%20of%20particles%20that%20can%20be%20renderer%20by%20the%20container%2E%0A%20%2A%20%40param%20%5Bproperties%5D%20%7Bobject%7D%20The%20properties%20of%20children%20that%20should%20be%20uploaded%20to%20the%20gpu%20and%20applied%2E%0A%20%2A%20%40param%20%5Bproperties%2Escale%3Dfalse%5D%20%7Bboolean%7D%20When%20true%2C%20scale%20be%20uploaded%20and%20applied%2E%0A%20%2A%20%40param%20%5Bproperties%2Eposition%3Dtrue%5D%20%7Bboolean%7D%20When%20true%2C%20position%20be%20uploaded%20and%20applied%2E%0A%20%2A%20%40param%20%5Bproperties%2Erotation%3Dfalse%5D%20%7Bboolean%7D%20When%20true%2C%20rotation%20be%20uploaded%20and%20applied%2E%0A%20%2A%20%40param%20%5Bproperties%2Euvs%3Dfalse%5D%20%7Bboolean%7D%20When%20true%2C%20uvs%20be%20uploaded%20and%20applied%2E%0A%20%2A%20%40param%20%5Bproperties%2Ealpha%3Dfalse%5D%20%7Bboolean%7D%20When%20true%2C%20alpha%20be%20uploaded%20and%20applied%2E%0A%20%2A%20%40param%20%5BbatchSize%3D15000%5D%20%7Bnumber%7D%20Number%20of%20particles%20per%20batch%2E%0A%20%2A%2F%0Afunction%20ParticleContainer%28maxSize%2C%20properties%2C%20batchSize%29%0A%7B%0A%20%20%20%20Container%2Ecall%28this%29%3B%0A%0A%20%20%20%20batchSize%20%3D%20batchSize%20%7C%7C%2015000%3B%20%2F%2FCONST%2ESPRITE%5FBATCH%5FSIZE%3B%20%2F%2F%202000%20is%20a%20nice%20balance%20between%20mobile%20%2F%20desktop%0A%20%20%20%20maxSize%20%3D%20maxSize%20%7C%7C%2015000%3B%0A%0A%20%20%20%20%2F%2F%20Making%20sure%20the%20batch%20size%20is%20valid%0A%20%20%20%20%2F%2F%2065535%20is%20max%20vertex%20index%20in%20the%20index%20buffer%20%28see%20ParticleRenderer%29%0A%20%20%20%20%2F%2F%20so%20max%20number%20of%20particles%20is%2065536%20%2F%204%20%3D%2016384%0A%20%20%20%20var%20maxBatchSize%20%3D%2016384%3B%0A%20%20%20%20if%20%28batchSize%20%3E%20maxBatchSize%29%20%7B%0A%20%20%20%20%20%20%20%20batchSize%20%3D%20maxBatchSize%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28batchSize%20%3E%20maxSize%29%20%7B%0A%20%20%20%20%20%20%20%20batchSize%20%3D%20maxSize%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Set%20properties%20to%20be%20dynamic%20%28true%29%20%2F%20static%20%28false%29%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%5B%5D%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fproperties%20%3D%20%5Bfalse%2C%20true%2C%20false%2C%20false%2C%20false%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FmaxSize%20%3D%20maxSize%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FbatchSize%20%3D%20batchSize%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLBuffer%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fbuffers%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FbufferToUpdate%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EinteractiveChildren%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20blend%20mode%20to%20be%20applied%20to%20the%20sprite%2E%20Apply%20a%20value%20of%20%60PIXI%2EBLEND%5FMODES%2ENORMAL%60%20to%20reset%20the%20blend%20mode%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%20PIXI%2EBLEND%5FMODES%2ENORMAL%0A%20%20%20%20%20%2A%20%40see%20PIXI%2EBLEND%5FMODES%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EblendMode%20%3D%20CONST%2EBLEND%5FMODES%2ENORMAL%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Used%20for%20canvas%20renderering%2E%20If%20true%20then%20the%20elements%20will%20be%20positioned%20at%20the%20nearest%20pixel%2E%20This%20provides%20a%20nice%20speed%20boost%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40default%20true%3B%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EroundPixels%20%3D%20true%3B%0A%0A%20%20%20%20this%2EsetProperties%28properties%29%3B%0A%7D%0A%0AParticleContainer%2Eprototype%20%3D%20Object%2Ecreate%28Container%2Eprototype%29%3B%0AParticleContainer%2Eprototype%2Econstructor%20%3D%20ParticleContainer%3B%0Amodule%2Eexports%20%3D%20ParticleContainer%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20the%20private%20properties%20array%20to%20dynamic%20%2F%20static%20based%20on%20the%20passed%20properties%20object%0A%20%2A%0A%20%2A%20%40param%20properties%20%7Bobject%7D%20The%20properties%20to%20be%20uploaded%0A%20%2A%2F%0AParticleContainer%2Eprototype%2EsetProperties%20%3D%20function%28properties%29%0A%7B%0A%20%20%20%20if%20%28%20properties%20%29%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5Fproperties%5B0%5D%20%3D%20%27scale%27%20in%20properties%20%3F%20%21%21properties%2Escale%20%3A%20this%2E%5Fproperties%5B0%5D%3B%0A%20%20%20%20%20%20%20%20this%2E%5Fproperties%5B1%5D%20%3D%20%27position%27%20in%20properties%20%3F%20%21%21properties%2Eposition%20%3A%20this%2E%5Fproperties%5B1%5D%3B%0A%20%20%20%20%20%20%20%20this%2E%5Fproperties%5B2%5D%20%3D%20%27rotation%27%20in%20properties%20%3F%20%21%21properties%2Erotation%20%3A%20this%2E%5Fproperties%5B2%5D%3B%0A%20%20%20%20%20%20%20%20this%2E%5Fproperties%5B3%5D%20%3D%20%27uvs%27%20in%20properties%20%3F%20%21%21properties%2Euvs%20%3A%20this%2E%5Fproperties%5B3%5D%3B%0A%20%20%20%20%20%20%20%20this%2E%5Fproperties%5B4%5D%20%3D%20%27alpha%27%20in%20properties%20%3F%20%21%21properties%2Ealpha%20%3A%20this%2E%5Fproperties%5B4%5D%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20object%20transform%20for%20rendering%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AParticleContainer%2Eprototype%2EupdateTransform%20%3D%20function%20%28%29%0A%7B%0A%0A%20%20%20%20%2F%2F%20TODO%20don%27t%20need%20to%21%0A%20%20%20%20this%2EdisplayObjectUpdateTransform%28%29%3B%0A%20%20%20%20%2F%2F%20%20PIXI%2EContainer%2Eprototype%2EupdateTransform%2Ecall%28%20this%20%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20container%20using%20the%20WebGL%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20webgl%20renderer%0A%20%2A%20%40private%0A%20%2A%2F%0AParticleContainer%2Eprototype%2ErenderWebGL%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20if%20%28%21this%2Evisible%20%7C%7C%20this%2EworldAlpha%20%3C%3D%200%20%7C%7C%20%21this%2Echildren%2Elength%20%7C%7C%20%21this%2Erenderable%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20renderer%2EsetObjectRenderer%28%20renderer%2Eplugins%2Eparticle%20%29%3B%0A%20%20%20%20renderer%2Eplugins%2Eparticle%2Erender%28%20this%20%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Set%20the%20flag%20that%20static%20data%20should%20be%20updated%20to%20true%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AParticleContainer%2Eprototype%2EonChildrenChange%20%3D%20function%20%28smallestChildIndex%29%0A%7B%0A%20%20%20%20var%20bufferIndex%20%3D%20Math%2Efloor%28smallestChildIndex%20%2F%20this%2E%5FbatchSize%29%3B%0A%20%20%20%20if%20%28bufferIndex%20%3C%20this%2E%5FbufferToUpdate%29%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FbufferToUpdate%20%3D%20bufferIndex%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20Canvas%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7D%20The%20canvas%20renderer%0A%20%2A%20%40private%0A%20%2A%2F%0AParticleContainer%2Eprototype%2ErenderCanvas%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20if%20%28%21this%2Evisible%20%7C%7C%20this%2EworldAlpha%20%3C%3D%200%20%7C%7C%20%21this%2Echildren%2Elength%20%7C%7C%20%21this%2Erenderable%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20context%20%3D%20renderer%2Econtext%3B%0A%20%20%20%20var%20transform%20%3D%20this%2EworldTransform%3B%0A%20%20%20%20var%20isRotated%20%3D%20true%3B%0A%0A%20%20%20%20var%20positionX%20%3D%200%3B%0A%20%20%20%20var%20positionY%20%3D%200%3B%0A%0A%20%20%20%20var%20finalWidth%20%3D%200%3B%0A%20%20%20%20var%20finalHeight%20%3D%200%3B%0A%0A%20%20%20%20var%20compositeOperation%20%3D%20renderer%2EblendModes%5Bthis%2EblendMode%5D%3B%0A%20%20%20%20if%20%28compositeOperation%20%21%3D%3D%20context%2EglobalCompositeOperation%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20context%2EglobalCompositeOperation%20%3D%20compositeOperation%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20context%2EglobalAlpha%20%3D%20this%2EworldAlpha%3B%0A%0A%20%20%20%20this%2EdisplayObjectUpdateTransform%28%29%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Echildren%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20child%20%3D%20this%2Echildren%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%21child%2Evisible%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20frame%20%3D%20child%2Etexture%2Eframe%3B%0A%0A%20%20%20%20%20%20%20%20context%2EglobalAlpha%20%3D%20this%2EworldAlpha%20%2A%20child%2Ealpha%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28child%2Erotation%20%25%20%28Math%2EPI%20%2A%202%29%20%3D%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20is%20the%20fastest%20%20way%20to%20optimise%21%20%2D%20if%20rotation%20is%200%20then%20we%20can%20avoid%20any%20kind%20of%20setTransform%20call%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28isRotated%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EsetTransform%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%2Ea%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%2Eb%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%2Ec%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%2Ed%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%2Etx%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%2Ety%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isRotated%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20positionX%20%3D%20%28%28child%2Eanchor%2Ex%29%20%2A%20%28%2Dframe%2Ewidth%20%2A%20child%2Escale%2Ex%29%20%2B%20child%2Eposition%2Ex%20%20%2B%200%2E5%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20positionY%20%3D%20%28%28child%2Eanchor%2Ey%29%20%2A%20%28%2Dframe%2Eheight%20%2A%20child%2Escale%2Ey%29%20%2B%20child%2Eposition%2Ey%20%20%2B%200%2E5%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20finalWidth%20%3D%20frame%2Ewidth%20%2A%20child%2Escale%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20finalHeight%20%3D%20frame%2Eheight%20%2A%20child%2Escale%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21isRotated%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isRotated%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20child%2EdisplayObjectUpdateTransform%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20childTransform%20%3D%20child%2EworldTransform%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28renderer%2EroundPixels%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EsetTransform%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Ea%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Eb%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Ec%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Ed%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Etx%20%7C%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Ety%20%7C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EsetTransform%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Ea%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Eb%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Ec%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Ed%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Etx%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20childTransform%2Ety%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20positionX%20%3D%20%28%28child%2Eanchor%2Ex%29%20%2A%20%28%2Dframe%2Ewidth%29%20%2B%200%2E5%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20positionY%20%3D%20%28%28child%2Eanchor%2Ey%29%20%2A%20%28%2Dframe%2Eheight%29%20%2B%200%2E5%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20finalWidth%20%3D%20frame%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20finalHeight%20%3D%20frame%2Eheight%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20context%2EdrawImage%28%0A%20%20%20%20%20%20%20%20%20%20%20%20child%2Etexture%2EbaseTexture%2Esource%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20frame%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20frame%2Ey%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20frame%2Ewidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20frame%2Eheight%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20positionX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20positionY%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20finalWidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20finalHeight%0A%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20container%0A%20%2A%0A%20%2A%20%40param%20%5BdestroyChildren%3Dfalse%5D%20%7Bboolean%7D%20if%20set%20to%20true%2C%20all%20the%20children%20will%20have%20their%20destroy%20method%20called%20as%20well%0A%20%2A%2F%0AParticleContainer%2Eprototype%2Edestroy%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20Container%2Eprototype%2Edestroy%2Eapply%28this%2C%20arguments%29%3B%0A%0A%20%20%20%20if%20%28this%2E%5Fbuffers%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2E%5Fbuffers%2Elength%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fbuffers%5Bi%5D%2Edestroy%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2E%5Fproperties%20%3D%20null%3B%0A%20%20%20%20this%2E%5Fbuffers%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2Fdisplay%2FContainer%22%3A17%7D%5D%2C33%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Mat%20Groves%0A%20%2A%0A%20%2A%20Big%20thanks%20to%20the%20very%20clever%20Matt%20DesLauriers%20%3Cmattdesl%3E%20https%3A%2F%2Fgithub%2Ecom%2Fmattdesl%2F%0A%20%2A%20for%20creating%20the%20original%20pixi%20version%21%0A%20%2A%20Also%20a%20thanks%20to%20https%3A%2F%2Fgithub%2Ecom%2Fbchevalier%20for%20tweaking%20the%20tint%20and%20alpha%20so%20that%20they%20now%20share%204%20bytes%20on%20the%20vertex%20buffer%0A%20%2A%0A%20%2A%20Heavily%20inspired%20by%20LibGDX%27s%20ParticleBuffer%3A%0A%20%2A%20https%3A%2F%2Fgithub%2Ecom%2Flibgdx%2Flibgdx%2Fblob%2Fmaster%2Fgdx%2Fsrc%2Fcom%2Fbadlogic%2Fgdx%2Fgraphics%2Fg2d%2FParticleBuffer%2Ejava%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20The%20particle%20buffer%20manages%20the%20static%20and%20dynamic%20buffers%20for%20a%20particle%20container%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40private%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%2F%0Afunction%20ParticleBuffer%28gl%2C%20properties%2C%20dynamicPropertyFlags%2C%20size%29%0A%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20current%20WebGL%20drawing%20context%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLRenderingContext%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Egl%20%3D%20gl%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Size%20of%20a%20single%20vertex%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EvertSize%20%3D%202%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Size%20of%20a%20single%20vertex%20in%20bytes%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EvertByteSize%20%3D%20this%2EvertSize%20%2A%204%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20number%20of%20particles%20the%20buffer%20can%20hold%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Esize%20%3D%20size%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20A%20list%20of%20the%20properties%20that%20are%20dynamic%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EdynamicProperties%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20A%20list%20of%20the%20properties%20that%20are%20static%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EstaticProperties%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20properties%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20property%20%3D%20properties%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%28dynamicPropertyFlags%5Bi%5D%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EdynamicProperties%2Epush%28property%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EstaticProperties%2Epush%28property%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EstaticStride%20%3D%200%3B%0A%20%20%20%20this%2EstaticBuffer%20%3D%20null%3B%0A%20%20%20%20this%2EstaticData%20%3D%20null%3B%0A%0A%20%20%20%20this%2EdynamicStride%20%3D%200%3B%0A%20%20%20%20this%2EdynamicBuffer%20%3D%20null%3B%0A%20%20%20%20this%2EdynamicData%20%3D%20null%3B%0A%0A%20%20%20%20this%2EinitBuffers%28%29%3B%0A%0A%7D%0A%0AParticleBuffer%2Eprototype%2Econstructor%20%3D%20ParticleBuffer%3B%0Amodule%2Eexports%20%3D%20ParticleBuffer%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20up%20the%20renderer%20context%20and%20necessary%20buffers%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AParticleBuffer%2Eprototype%2EinitBuffers%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%20%20%20%20var%20i%3B%0A%20%20%20%20var%20property%3B%0A%0A%20%20%20%20var%20dynamicOffset%20%3D%200%3B%0A%20%20%20%20this%2EdynamicStride%20%3D%200%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20this%2EdynamicProperties%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20property%20%3D%20this%2EdynamicProperties%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20property%2Eoffset%20%3D%20dynamicOffset%3B%0A%20%20%20%20%20%20%20%20dynamicOffset%20%2B%3D%20property%2Esize%3B%0A%20%20%20%20%20%20%20%20this%2EdynamicStride%20%2B%3D%20property%2Esize%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EdynamicData%20%3D%20new%20Float32Array%28%20this%2Esize%20%2A%20this%2EdynamicStride%20%2A%204%29%3B%0A%20%20%20%20this%2EdynamicBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20this%2EdynamicBuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EARRAY%5FBUFFER%2C%20this%2EdynamicData%2C%20gl%2EDYNAMIC%5FDRAW%29%3B%0A%0A%0A%20%20%20%20%2F%2F%20static%20%2F%2F%0A%20%20%20%20var%20staticOffset%20%3D%200%3B%0A%20%20%20%20this%2EstaticStride%20%3D%200%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20this%2EstaticProperties%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20property%20%3D%20this%2EstaticProperties%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20property%2Eoffset%20%3D%20staticOffset%3B%0A%20%20%20%20%20%20%20%20staticOffset%20%2B%3D%20property%2Esize%3B%0A%20%20%20%20%20%20%20%20this%2EstaticStride%20%2B%3D%20property%2Esize%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EstaticData%20%3D%20new%20Float32Array%28%20this%2Esize%20%2A%20this%2EstaticStride%20%2A%204%29%3B%0A%20%20%20%20this%2EstaticBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20this%2EstaticBuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EARRAY%5FBUFFER%2C%20this%2EstaticData%2C%20gl%2EDYNAMIC%5FDRAW%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Uploads%20the%20dynamic%20properties%2E%0A%20%2A%0A%20%2A%2F%0AParticleBuffer%2Eprototype%2EuploadDynamic%20%3D%20function%28children%2C%20startIndex%2C%20amount%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2EdynamicProperties%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20property%20%3D%20this%2EdynamicProperties%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20property%2EuploadFunction%28children%2C%20startIndex%2C%20amount%2C%20this%2EdynamicData%2C%20this%2EdynamicStride%2C%20property%2Eoffset%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20this%2EdynamicBuffer%29%3B%0A%20%20%20%20gl%2EbufferSubData%28gl%2EARRAY%5FBUFFER%2C%200%2C%20this%2EdynamicData%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Uploads%20the%20static%20properties%2E%0A%20%2A%0A%20%2A%2F%0AParticleBuffer%2Eprototype%2EuploadStatic%20%3D%20function%28children%2C%20startIndex%2C%20amount%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2EstaticProperties%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20property%20%3D%20this%2EstaticProperties%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20property%2EuploadFunction%28children%2C%20startIndex%2C%20amount%2C%20this%2EstaticData%2C%20this%2EstaticStride%2C%20property%2Eoffset%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20this%2EstaticBuffer%29%3B%0A%20%20%20%20gl%2EbufferSubData%28gl%2EARRAY%5FBUFFER%2C%200%2C%20this%2EstaticData%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Binds%20the%20buffers%20to%20the%20GPU%0A%20%2A%0A%20%2A%2F%0AParticleBuffer%2Eprototype%2Ebind%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%20%20%20%20var%20i%2C%20property%3B%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20this%2EdynamicBuffer%29%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20this%2EdynamicProperties%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20property%20%3D%20this%2EdynamicProperties%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20gl%2EvertexAttribPointer%28property%2Eattribute%2C%20property%2Esize%2C%20gl%2EFLOAT%2C%20false%2C%20this%2EdynamicStride%20%2A%204%2C%20property%2Eoffset%20%2A%204%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20this%2EstaticBuffer%29%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20this%2EstaticProperties%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20property%20%3D%20this%2EstaticProperties%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20gl%2EvertexAttribPointer%28property%2Eattribute%2C%20property%2Esize%2C%20gl%2EFLOAT%2C%20false%2C%20this%2EstaticStride%20%2A%204%2C%20property%2Eoffset%20%2A%204%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20ParticleBuffer%2E%0A%20%2A%0A%20%2A%2F%0AParticleBuffer%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2EdynamicProperties%20%3D%20null%3B%0A%20%20%20%20this%2EdynamicData%20%3D%20null%3B%0A%20%20%20%20this%2Egl%2EdeleteBuffer%28this%2EdynamicBuffer%29%3B%0A%0A%20%20%20%20this%2EstaticProperties%20%3D%20null%3B%0A%20%20%20%20this%2EstaticData%20%3D%20null%3B%0A%20%20%20%20this%2Egl%2EdeleteBuffer%28this%2EstaticBuffer%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C34%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20ObjectRenderer%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2Futils%2FObjectRenderer%27%29%2C%0A%20%20%20%20WebGLRenderer%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2FWebGLRenderer%27%29%2C%0A%20%20%20%20ParticleShader%20%3D%20require%28%27%2E%2FParticleShader%27%29%2C%0A%20%20%20%20ParticleBuffer%20%3D%20require%28%27%2E%2FParticleBuffer%27%29%2C%0A%20%20%20%20math%20%20%20%20%20%20%20%20%20%20%20%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fmath%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Mat%20Groves%0A%20%2A%0A%20%2A%20Big%20thanks%20to%20the%20very%20clever%20Matt%20DesLauriers%20%3Cmattdesl%3E%20https%3A%2F%2Fgithub%2Ecom%2Fmattdesl%2F%0A%20%2A%20for%20creating%20the%20original%20pixi%20version%21%0A%20%2A%20Also%20a%20thanks%20to%20https%3A%2F%2Fgithub%2Ecom%2Fbchevalier%20for%20tweaking%20the%20tint%20and%20alpha%20so%20that%20they%20now%20share%204%20bytes%20on%20the%20vertex%20buffer%0A%20%2A%0A%20%2A%20Heavily%20inspired%20by%20LibGDX%27s%20ParticleRenderer%3A%0A%20%2A%20https%3A%2F%2Fgithub%2Ecom%2Flibgdx%2Flibgdx%2Fblob%2Fmaster%2Fgdx%2Fsrc%2Fcom%2Fbadlogic%2Fgdx%2Fgraphics%2Fg2d%2FParticleRenderer%2Ejava%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40private%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20this%20sprite%20batch%20works%20for%2E%0A%20%2A%2F%0Afunction%20ParticleRenderer%28renderer%29%0A%7B%0A%20%20%20%20ObjectRenderer%2Ecall%28this%2C%20renderer%29%3B%0A%0A%20%20%20%20%2F%2F%2065535%20is%20max%20vertex%20index%20in%20the%20index%20buffer%20%28see%20ParticleRenderer%29%0A%20%20%20%20%2F%2F%20so%20max%20number%20of%20particles%20is%2065536%20%2F%204%20%3D%2016384%0A%20%20%20%20%2F%2F%20and%20max%20number%20of%20element%20in%20the%20index%20buffer%20is%2016384%20%2A%206%20%3D%2098304%0A%20%20%20%20%2F%2F%20Creating%20a%20full%20index%20buffer%2C%20overhead%20is%2098304%20%2A%202%20%3D%20196Ko%0A%20%20%20%20var%20numIndices%20%3D%2098304%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Holds%20the%20indices%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BUint16Array%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eindices%20%3D%20new%20Uint16Array%28numIndices%29%3B%0A%0A%20%20%20%20for%20%28var%20i%3D0%2C%20j%3D0%3B%20i%20%3C%20numIndices%3B%20i%20%2B%3D%206%2C%20j%20%2B%3D%204%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%200%5D%20%3D%20j%20%2B%200%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%201%5D%20%3D%20j%20%2B%201%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%202%5D%20%3D%20j%20%2B%202%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%203%5D%20%3D%20j%20%2B%200%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%204%5D%20%3D%20j%20%2B%202%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%205%5D%20%3D%20j%20%2B%203%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20default%20shader%20that%20is%20used%20if%20a%20sprite%20doesn%27t%20have%20a%20more%20specific%20one%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EShader%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eshader%20%3D%20null%3B%0A%0A%20%20%20%20this%2EindexBuffer%20%3D%20null%3B%0A%0A%20%20%20%20this%2Eproperties%20%3D%20null%3B%0A%0A%20%20%20%20this%2EtempMatrix%20%3D%20new%20math%2EMatrix%28%29%3B%0A%7D%0A%0AParticleRenderer%2Eprototype%20%3D%20Object%2Ecreate%28ObjectRenderer%2Eprototype%29%3B%0AParticleRenderer%2Eprototype%2Econstructor%20%3D%20ParticleRenderer%3B%0Amodule%2Eexports%20%3D%20ParticleRenderer%3B%0A%0AWebGLRenderer%2EregisterPlugin%28%27particle%27%2C%20ParticleRenderer%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20When%20there%20is%20a%20WebGL%20context%20change%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AParticleRenderer%2Eprototype%2EonContextChange%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20%2F%2F%20setup%20default%20shader%0A%20%20%20%20this%2Eshader%20%3D%20new%20ParticleShader%28this%2Erenderer%2EshaderManager%29%3B%0A%0A%20%20%20%20this%2EindexBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%0A%20%20%20%20%2F%2F%2065535%20is%20max%20index%2C%20so%2065535%20%2F%206%20%3D%2010922%2E%0A%0A%20%20%20%20%2F%2Fupload%20the%20index%20data%0A%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20this%2EindexBuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20this%2Eindices%2C%20gl%2ESTATIC%5FDRAW%29%3B%0A%0A%20%20%20%20this%2Eproperties%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%2F%2F%20verticesData%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attribute%3Athis%2Eshader%2Eattributes%2EaVertexPosition%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20size%3A2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20uploadFunction%3Athis%2EuploadVertices%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%3A0%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20positionData%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attribute%3Athis%2Eshader%2Eattributes%2EaPositionCoord%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20size%3A2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20uploadFunction%3Athis%2EuploadPosition%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%3A0%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20rotationData%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attribute%3Athis%2Eshader%2Eattributes%2EaRotation%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20size%3A1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20uploadFunction%3Athis%2EuploadRotation%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%3A0%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20uvsData%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attribute%3Athis%2Eshader%2Eattributes%2EaTextureCoord%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20size%3A2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20uploadFunction%3Athis%2EuploadUvs%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%3A0%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20alphaData%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attribute%3Athis%2Eshader%2Eattributes%2EaColor%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20size%3A1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20uploadFunction%3Athis%2EuploadAlpha%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%3A0%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Starts%20a%20new%20particle%20batch%2E%0A%20%2A%0A%20%2A%2F%0AParticleRenderer%2Eprototype%2Estart%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20%2F%2F%20bind%20the%20main%20texture%0A%20%20%20%20gl%2EactiveTexture%28gl%2ETEXTURE0%29%3B%0A%0A%20%20%20%20%2F%2F%20bind%20the%20buffers%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20this%2EindexBuffer%29%3B%0A%0A%20%20%20%20var%20shader%20%3D%20this%2Eshader%3B%0A%0A%20%20%20%20this%2Erenderer%2EshaderManager%2EsetShader%28shader%29%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20particle%20container%20object%2E%0A%20%2A%0A%20%2A%20%40param%20container%20%7BPIXI%2EParticleContainer%7D%20The%20container%20to%20render%20using%20this%20ParticleRenderer%0A%20%2A%2F%0AParticleRenderer%2Eprototype%2Erender%20%3D%20function%20%28container%29%0A%7B%0A%20%20%20%20var%20children%20%3D%20container%2Echildren%2C%0A%20%20%20%20%20%20%20%20totalChildren%20%3D%20children%2Elength%2C%0A%20%20%20%20%20%20%20%20maxSize%20%3D%20container%2E%5FmaxSize%2C%0A%20%20%20%20%20%20%20%20batchSize%20%3D%20container%2E%5FbatchSize%3B%0A%0A%20%20%20%20if%28totalChildren%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%28totalChildren%20%3E%20maxSize%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20totalChildren%20%3D%20maxSize%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%28%21container%2E%5Fbuffers%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20container%2E%5Fbuffers%20%3D%20this%2EgenerateBuffers%28%20container%20%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20if%20the%20uvs%20have%20not%20updated%20then%20no%20point%20rendering%20just%20yet%21%0A%20%20%20%20this%2Erenderer%2EblendModeManager%2EsetBlendMode%28container%2EblendMode%29%3B%0A%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20var%20m%20%3D%20%20container%2EworldTransform%2Ecopy%28%20this%2EtempMatrix%20%29%3B%0A%20%20%20%20m%2Eprepend%28%20this%2Erenderer%2EcurrentRenderTarget%2EprojectionMatrix%20%29%3B%0A%20%20%20%20gl%2EuniformMatrix3fv%28this%2Eshader%2Euniforms%2EprojectionMatrix%2E%5Flocation%2C%20false%2C%20m%2EtoArray%28true%29%29%3B%0A%20%20%20%20gl%2Euniform1f%28this%2Eshader%2Euniforms%2EuAlpha%2E%5Flocation%2C%20container%2EworldAlpha%29%3B%0A%0A%0A%20%20%20%20%2F%2F%20make%20sure%20the%20texture%20is%20bound%2E%2E%0A%20%20%20%20var%20baseTexture%20%3D%20children%5B0%5D%2E%5Ftexture%2EbaseTexture%3B%0A%0A%20%20%20%20if%20%28%21baseTexture%2E%5FglTextures%5Bgl%2Eid%5D%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20the%20texture%20has%20not%20updated%20then%20lets%20not%20upload%20any%20static%20properties%0A%20%20%20%20%20%20%20%20if%28%21this%2Erenderer%2EupdateTexture%28baseTexture%29%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%28%21container%2E%5Fproperties%5B0%5D%20%7C%7C%20%21container%2E%5Fproperties%5B3%5D%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20container%2E%5FbufferToUpdate%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20gl%2EbindTexture%28gl%2ETEXTURE%5F2D%2C%20baseTexture%2E%5FglTextures%5Bgl%2Eid%5D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20now%20lets%20upload%20and%20render%20the%20buffers%2E%2E%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20j%20%3D%200%3B%20i%20%3C%20totalChildren%3B%20i%20%2B%3D%20batchSize%2C%20j%20%2B%3D%201%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20amount%20%3D%20%28%20totalChildren%20%2D%20i%29%3B%0A%20%20%20%20%20%20%20%20if%28amount%20%3E%20batchSize%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20amount%20%3D%20batchSize%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20buffer%20%3D%20container%2E%5Fbuffers%5Bj%5D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20we%20always%20upload%20the%20dynamic%0A%20%20%20%20%20%20%20%20buffer%2EuploadDynamic%28children%2C%20i%2C%20amount%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20we%20only%20upload%20the%20static%20content%20when%20we%20have%20to%21%0A%20%20%20%20%20%20%20%20if%28container%2E%5FbufferToUpdate%20%3D%3D%3D%20j%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20buffer%2EuploadStatic%28children%2C%20i%2C%20amount%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20container%2E%5FbufferToUpdate%20%3D%20j%20%2B%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20bind%20the%20buffer%0A%20%20%20%20%20%20%20%20buffer%2Ebind%28%20this%2Eshader%20%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%2F%2F%20now%20draw%20those%20suckas%21%0A%20%20%20%20%20%20%20%20gl%2EdrawElements%28gl%2ETRIANGLES%2C%20amount%20%2A%206%2C%20gl%2EUNSIGNED%5FSHORT%2C%200%29%3B%0A%20%20%20%20%20%20%20%20this%2Erenderer%2EdrawCount%2B%2B%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20one%20particle%20buffer%20for%20each%20child%20in%20the%20container%20we%20want%20to%20render%20and%20updates%20internal%20properties%0A%20%2A%0A%20%2A%20%40param%20container%20%7BPIXI%2EParticleContainer%7D%20The%20container%20to%20render%20using%20this%20ParticleRenderer%0A%20%2A%2F%0AParticleRenderer%2Eprototype%2EgenerateBuffers%20%3D%20function%20%28container%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%2C%0A%20%20%20%20%20%20%20%20buffers%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20size%20%3D%20container%2E%5FmaxSize%2C%0A%20%20%20%20%20%20%20%20batchSize%20%3D%20container%2E%5FbatchSize%2C%0A%20%20%20%20%20%20%20%20dynamicPropertyFlags%20%3D%20container%2E%5Fproperties%2C%0A%20%20%20%20%20%20%20%20i%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20size%3B%20i%20%2B%3D%20batchSize%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20buffers%2Epush%28new%20ParticleBuffer%28gl%2C%20this%2Eproperties%2C%20dynamicPropertyFlags%2C%20batchSize%29%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20buffers%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Uploads%20the%20verticies%2E%0A%20%2A%0A%20%2A%20%40param%20children%20%7BPIXI%2EDisplayObject%5B%5D%7D%20the%20array%20of%20display%20objects%20to%20render%0A%20%2A%20%40param%20startIndex%20%7Bnumber%7D%20the%20index%20to%20start%20from%20in%20the%20children%20array%0A%20%2A%20%40param%20amount%20%7Bnumber%7D%20the%20amount%20of%20children%20that%20will%20have%20their%20vertices%20uploaded%0A%20%2A%20%40param%20array%20%7Bnumber%5B%5D%7D%0A%20%2A%20%40param%20stride%20%7Bnumber%7D%0A%20%2A%20%40param%20offset%20%7Bnumber%7D%0A%20%2A%2F%0AParticleRenderer%2Eprototype%2EuploadVertices%20%3D%20function%20%28children%2C%20startIndex%2C%20amount%2C%20array%2C%20stride%2C%20offset%29%0A%7B%0A%20%20%20%20var%20sprite%2C%0A%20%20%20%20%20%20%20%20texture%2C%0A%20%20%20%20%20%20%20%20trim%2C%0A%20%20%20%20%20%20%20%20sx%2C%0A%20%20%20%20%20%20%20%20sy%2C%0A%20%20%20%20%20%20%20%20w0%2C%20w1%2C%20h0%2C%20h1%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20amount%3B%20i%2B%2B%29%20%7B%0A%0A%20%20%20%20%20%20%20%20sprite%20%3D%20children%5BstartIndex%20%2B%20i%5D%3B%0A%20%20%20%20%20%20%20%20texture%20%3D%20sprite%2E%5Ftexture%3B%0A%20%20%20%20%20%20%20%20sx%20%3D%20sprite%2Escale%2Ex%3B%0A%20%20%20%20%20%20%20%20sy%20%3D%20sprite%2Escale%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28texture%2Etrim%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20the%20sprite%20is%20trimmed%20then%20we%20need%20to%20add%20the%20extra%20space%20before%20transforming%20the%20sprite%20coords%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20trim%20%3D%20texture%2Etrim%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20w1%20%3D%20trim%2Ex%20%2D%20sprite%2Eanchor%2Ex%20%2A%20trim%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20w0%20%3D%20w1%20%2B%20texture%2Ecrop%2Ewidth%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20h1%20%3D%20trim%2Ey%20%2D%20sprite%2Eanchor%2Ey%20%2A%20trim%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20h0%20%3D%20h1%20%2B%20texture%2Ecrop%2Eheight%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20w0%20%3D%20%28texture%2E%5Fframe%2Ewidth%20%29%20%2A%20%281%2Dsprite%2Eanchor%2Ex%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20w1%20%3D%20%28texture%2E%5Fframe%2Ewidth%20%29%20%2A%20%2Dsprite%2Eanchor%2Ex%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20h0%20%3D%20texture%2E%5Fframe%2Eheight%20%2A%20%281%2Dsprite%2Eanchor%2Ey%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20h1%20%3D%20texture%2E%5Fframe%2Eheight%20%2A%20%2Dsprite%2Eanchor%2Ey%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20array%5Boffset%5D%20%3D%20w1%20%2A%20sx%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%201%5D%20%3D%20h1%20%2A%20sy%3B%0A%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%5D%20%3D%20w0%20%2A%20sx%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2B%201%5D%20%3D%20h1%20%2A%20sy%3B%0A%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%202%5D%20%3D%20w0%20%2A%20sx%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%202%20%2B%201%5D%20%3D%20h0%20%2A%20sy%3B%0A%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%203%5D%20%3D%20w1%20%2A%20sx%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%203%20%2B%201%5D%20%3D%20h0%20%2A%20sy%3B%0A%0A%20%20%20%20%20%20%20%20offset%20%2B%3D%20stride%20%2A%204%3B%0A%20%20%20%20%7D%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%20%40param%20children%20%7BPIXI%2EDisplayObject%5B%5D%7D%20the%20array%20of%20display%20objects%20to%20render%0A%20%2A%20%40param%20startIndex%20%7Bnumber%7D%20the%20index%20to%20start%20from%20in%20the%20children%20array%0A%20%2A%20%40param%20amount%20%7Bnumber%7D%20the%20amount%20of%20children%20that%20will%20have%20their%20positions%20uploaded%0A%20%2A%20%40param%20array%20%7Bnumber%5B%5D%7D%0A%20%2A%20%40param%20stride%20%7Bnumber%7D%0A%20%2A%20%40param%20offset%20%7Bnumber%7D%0A%20%2A%2F%0AParticleRenderer%2Eprototype%2EuploadPosition%20%3D%20function%20%28children%2CstartIndex%2C%20amount%2C%20array%2C%20stride%2C%20offset%29%0A%7B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20amount%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20spritePosition%20%3D%20children%5BstartIndex%20%2B%20i%5D%2Eposition%3B%0A%0A%20%20%20%20%20%20%20%20array%5Boffset%5D%20%3D%20spritePosition%2Ex%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%201%5D%20%3D%20spritePosition%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%5D%20%3D%20spritePosition%2Ex%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2B%201%5D%20%3D%20spritePosition%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%202%5D%20%3D%20spritePosition%2Ex%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%202%20%2B%201%5D%20%3D%20spritePosition%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%203%5D%20%3D%20spritePosition%2Ex%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%203%20%2B%201%5D%20%3D%20spritePosition%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20offset%20%2B%3D%20stride%20%2A%204%3B%0A%20%20%20%20%7D%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%20%40param%20children%20%7BPIXI%2EDisplayObject%5B%5D%7D%20the%20array%20of%20display%20objects%20to%20render%0A%20%2A%20%40param%20startIndex%20%7Bnumber%7D%20the%20index%20to%20start%20from%20in%20the%20children%20array%0A%20%2A%20%40param%20amount%20%7Bnumber%7D%20the%20amount%20of%20children%20that%20will%20have%20their%20rotation%20uploaded%0A%20%2A%20%40param%20array%20%7Bnumber%5B%5D%7D%0A%20%2A%20%40param%20stride%20%7Bnumber%7D%0A%20%2A%20%40param%20offset%20%7Bnumber%7D%0A%20%2A%2F%0AParticleRenderer%2Eprototype%2EuploadRotation%20%3D%20function%20%28children%2CstartIndex%2C%20amount%2C%20array%2C%20stride%2C%20offset%29%0A%7B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20amount%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20spriteRotation%20%3D%20children%5BstartIndex%20%2B%20i%5D%2Erotation%3B%0A%0A%0A%20%20%20%20%20%20%20%20array%5Boffset%5D%20%3D%20spriteRotation%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%5D%20%3D%20spriteRotation%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%202%5D%20%3D%20spriteRotation%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%203%5D%20%3D%20spriteRotation%3B%0A%0A%20%20%20%20%20%20%20%20offset%20%2B%3D%20stride%20%2A%204%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%20%40param%20children%20%7BPIXI%2EDisplayObject%5B%5D%7D%20the%20array%20of%20display%20objects%20to%20render%0A%20%2A%20%40param%20startIndex%20%7Bnumber%7D%20the%20index%20to%20start%20from%20in%20the%20children%20array%0A%20%2A%20%40param%20amount%20%7Bnumber%7D%20the%20amount%20of%20children%20that%20will%20have%20their%20Uvs%20uploaded%0A%20%2A%20%40param%20array%20%7Bnumber%5B%5D%7D%0A%20%2A%20%40param%20stride%20%7Bnumber%7D%0A%20%2A%20%40param%20offset%20%7Bnumber%7D%0A%20%2A%2F%0AParticleRenderer%2Eprototype%2EuploadUvs%20%3D%20function%20%28children%2CstartIndex%2C%20amount%2C%20array%2C%20stride%2C%20offset%29%0A%7B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20amount%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20textureUvs%20%3D%20children%5BstartIndex%20%2B%20i%5D%2E%5Ftexture%2E%5Fuvs%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28textureUvs%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%5D%20%3D%20textureUvs%2Ex0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%201%5D%20%3D%20textureUvs%2Ey0%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%5D%20%3D%20textureUvs%2Ex1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2B%201%5D%20%3D%20textureUvs%2Ey1%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%202%5D%20%3D%20textureUvs%2Ex2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%202%20%2B%201%5D%20%3D%20textureUvs%2Ey2%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%203%5D%20%3D%20textureUvs%2Ex3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%203%20%2B%201%5D%20%3D%20textureUvs%2Ey3%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%20%2B%3D%20stride%20%2A%204%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FTODO%20you%20know%20this%20can%20be%20easier%21%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%201%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2B%201%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%202%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%202%20%2B%201%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%203%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%203%20%2B%201%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%20%2B%3D%20stride%20%2A%204%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%20%40param%20children%20%7BPIXI%2EDisplayObject%5B%5D%7D%20the%20array%20of%20display%20objects%20to%20render%0A%20%2A%20%40param%20startIndex%20%7Bnumber%7D%20the%20index%20to%20start%20from%20in%20the%20children%20array%0A%20%2A%20%40param%20amount%20%7Bnumber%7D%20the%20amount%20of%20children%20that%20will%20have%20their%20alpha%20uploaded%0A%20%2A%20%40param%20array%20%7Bnumber%5B%5D%7D%0A%20%2A%20%40param%20stride%20%7Bnumber%7D%0A%20%2A%20%40param%20offset%20%7Bnumber%7D%0A%20%2A%2F%0AParticleRenderer%2Eprototype%2EuploadAlpha%20%3D%20function%20%28children%2CstartIndex%2C%20amount%2C%20array%2C%20stride%2C%20offset%29%0A%7B%0A%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20amount%3B%20i%2B%2B%29%0A%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20spriteAlpha%20%3D%20children%5BstartIndex%20%2B%20i%5D%2Ealpha%3B%0A%0A%20%20%20%20%20%20%20%20array%5Boffset%5D%20%3D%20spriteAlpha%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%5D%20%3D%20spriteAlpha%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%202%5D%20%3D%20spriteAlpha%3B%0A%20%20%20%20%20%20%20%20array%5Boffset%20%2B%20stride%20%2A%203%5D%20%3D%20spriteAlpha%3B%0A%0A%20%20%20%20%20%20%20%20offset%20%2B%3D%20stride%20%2A%204%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20ParticleRenderer%2E%0A%20%2A%0A%20%2A%2F%0AParticleRenderer%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28this%2Erenderer%2Egl%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Erenderer%2Egl%2EdeleteBuffer%28this%2EindexBuffer%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20ObjectRenderer%2Eprototype%2Edestroy%2Eapply%28this%2C%20arguments%29%3B%0A%0A%20%20%20%20this%2Eshader%2Edestroy%28%29%3B%0A%0A%20%20%20%20this%2Eindices%20%3D%20null%3B%0A%20%20%20%20this%2EtempMatrix%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2FWebGLRenderer%22%3A42%2C%22%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2Futils%2FObjectRenderer%22%3A56%2C%22%2E%2FParticleBuffer%22%3A33%2C%22%2E%2FParticleShader%22%3A35%7D%5D%2C35%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20TextureShader%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2Fshaders%2FTextureShader%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2ETextureShader%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20shaderManager%20%7BShaderManager%7D%20The%20webgl%20shader%20manager%20this%20shader%20works%20for%2E%0A%20%2A%2F%0Afunction%20ParticleShader%28shaderManager%29%0A%7B%0A%20%20%20%20TextureShader%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20shaderManager%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%27attribute%20vec2%20aVertexPosition%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27attribute%20vec2%20aTextureCoord%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27attribute%20float%20aColor%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27attribute%20vec2%20aPositionCoord%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27attribute%20vec2%20aScale%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27attribute%20float%20aRotation%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20mat3%20projectionMatrix%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27varying%20vec2%20vTextureCoord%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27varying%20float%20vColor%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20vec2%20v%20%3D%20aVertexPosition%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20v%2Ex%20%3D%20%28aVertexPosition%2Ex%29%20%2A%20cos%28aRotation%29%20%2D%20%28aVertexPosition%2Ey%29%20%2A%20sin%28aRotation%29%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20v%2Ey%20%3D%20%28aVertexPosition%2Ex%29%20%2A%20sin%28aRotation%29%20%2B%20%28aVertexPosition%2Ey%29%20%2A%20cos%28aRotation%29%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20v%20%3D%20v%20%2B%20aPositionCoord%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20vec3%28v%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20vTextureCoord%20%3D%20aTextureCoord%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20vColor%20%3D%20aColor%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%7D%27%0A%20%20%20%20%20%20%20%20%5D%2Ejoin%28%27%5Cn%27%29%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20hello%0A%20%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%27precision%20lowp%20float%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27varying%20vec2%20vTextureCoord%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27varying%20float%20vColor%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20sampler2D%20uSampler%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20float%20uAlpha%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20vec4%20color%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%20%2A%20vColor%20%2A%20uAlpha%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20if%20%28color%2Ea%20%3D%3D%200%2E0%29%20discard%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20gl%5FFragColor%20%3D%20color%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%7D%27%0A%20%20%20%20%20%20%20%20%5D%2Ejoin%28%27%5Cn%27%29%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20uAlpha%3A%20%20%7B%20type%3A%20%271f%27%2C%20value%3A%201%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20attributes%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20aPositionCoord%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20aScale%3A%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20aRotation%3A%20%20%20%20%20%200%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20%2F%2F%20TEMP%20HACK%0A%0A%7D%0A%0AParticleShader%2Eprototype%20%3D%20Object%2Ecreate%28TextureShader%2Eprototype%29%3B%0AParticleShader%2Eprototype%2Econstructor%20%3D%20ParticleShader%3B%0A%0Amodule%2Eexports%20%3D%20ParticleShader%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2Fshaders%2FTextureShader%22%3A55%7D%5D%2C36%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20utils%20%3D%20require%28%27%2E%2E%2Futils%27%29%2C%0A%20%20%20%20math%20%3D%20require%28%27%2E%2E%2Fmath%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2Fconst%27%29%2C%0A%20%20%20%20EventEmitter%20%3D%20require%28%27eventemitter3%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20CanvasRenderer%20draws%20the%20scene%20and%20all%20its%20content%20onto%20a%202d%20canvas%2E%20This%20renderer%20should%20be%20used%20for%20browsers%20that%20do%20not%20support%20webGL%2E%0A%20%2A%20Don%27t%20forget%20to%20add%20the%20CanvasRenderer%2Eview%20to%20your%20DOM%20or%20you%20will%20not%20see%20anything%20%3A%29%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20system%20%7Bstring%7D%20The%20name%20of%20the%20system%20this%20renderer%20is%20for%2E%0A%20%2A%20%40param%20%5Bwidth%3D800%5D%20%7Bnumber%7D%20the%20width%20of%20the%20canvas%20view%0A%20%2A%20%40param%20%5Bheight%3D600%5D%20%7Bnumber%7D%20the%20height%20of%20the%20canvas%20view%0A%20%2A%20%40param%20%5Boptions%5D%20%7Bobject%7D%20The%20optional%20renderer%20parameters%0A%20%2A%20%40param%20%5Boptions%2Eview%5D%20%7BHTMLCanvasElement%7D%20the%20canvas%20to%20use%20as%20a%20view%2C%20optional%0A%20%2A%20%40param%20%5Boptions%2Etransparent%3Dfalse%5D%20%7Bboolean%7D%20If%20the%20render%20view%20is%20transparent%2C%20default%20false%0A%20%2A%20%40param%20%5Boptions%2EautoResize%3Dfalse%5D%20%7Bboolean%7D%20If%20the%20render%20view%20is%20automatically%20resized%2C%20default%20false%0A%20%2A%20%40param%20%5Boptions%2Eantialias%3Dfalse%5D%20%7Bboolean%7D%20sets%20antialias%20%28only%20applicable%20in%20chrome%20at%20the%20moment%29%0A%20%2A%20%40param%20%5Boptions%2Eresolution%3D1%5D%20%7Bnumber%7D%20the%20resolution%20of%20the%20renderer%20retina%20would%20be%202%0A%20%2A%20%40param%20%5Boptions%2EclearBeforeRender%3Dtrue%5D%20%7Bboolean%7D%20This%20sets%20if%20the%20CanvasRenderer%20will%20clear%20the%20canvas%20or%0A%20%2A%20%20%20%20%20%20not%20before%20the%20new%20render%20pass%2E%0A%20%2A%20%40param%20%5Boptions%2EbackgroundColor%3D0x000000%5D%20%7Bnumber%7D%20The%20background%20color%20of%20the%20rendered%20area%20%28shown%20if%20not%20transparent%29%2E%0A%20%2A%20%40param%20%5Boptions%2EroundPixels%3Dfalse%5D%20%7Bboolean%7D%20If%20true%20Pixi%20will%20Math%2Efloor%28%29%20x%2Fy%20values%20when%20rendering%2C%20stopping%20pixel%20interpolation%2E%0A%20%2A%2F%0Afunction%20SystemRenderer%28system%2C%20width%2C%20height%2C%20options%29%0A%7B%0A%20%20%20%20EventEmitter%2Ecall%28this%29%3B%0A%0A%20%20%20%20utils%2EsayHello%28system%29%3B%0A%0A%20%20%20%20%2F%2F%20prepare%20options%0A%20%20%20%20if%20%28options%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20in%20CONST%2EDEFAULT%5FRENDER%5FOPTIONS%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20options%5Bi%5D%20%3D%3D%3D%20%27undefined%27%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20options%5Bi%5D%20%3D%20CONST%2EDEFAULT%5FRENDER%5FOPTIONS%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20options%20%3D%20CONST%2EDEFAULT%5FRENDER%5FOPTIONS%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20type%20of%20the%20renderer%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%20PIXI%2ERENDERER%5FTYPE%2EUNKNOWN%0A%20%20%20%20%20%2A%20%40see%20PIXI%2ERENDERER%5FTYPE%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etype%20%3D%20CONST%2ERENDERER%5FTYPE%2EUNKNOWN%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20width%20of%20the%20canvas%20view%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%20800%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ewidth%20%3D%20width%20%7C%7C%20800%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20canvas%20view%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%20600%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eheight%20%3D%20height%20%7C%7C%20600%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20canvas%20element%20that%20everything%20is%20drawn%20to%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BHTMLCanvasElement%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eview%20%3D%20options%2Eview%20%7C%7C%20document%2EcreateElement%28%27canvas%27%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20resolution%20of%20the%20renderer%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%201%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eresolution%20%3D%20options%2Eresolution%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Whether%20the%20render%20view%20is%20transparent%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etransparent%20%3D%20options%2Etransparent%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Whether%20the%20render%20view%20should%20be%20resized%20automatically%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EautoResize%20%3D%20options%2EautoResize%20%7C%7C%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Tracks%20the%20blend%20modes%20useful%20for%20this%20renderer%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%3Cstring%2C%20mixed%3E%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EblendModes%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20value%20of%20the%20preserveDrawingBuffer%20flag%20affects%20whether%20or%20not%20the%20contents%20of%20the%20stencil%20buffer%20is%20retained%20after%20rendering%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EpreserveDrawingBuffer%20%3D%20options%2EpreserveDrawingBuffer%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20sets%20if%20the%20CanvasRenderer%20will%20clear%20the%20canvas%20or%20not%20before%20the%20new%20render%20pass%2E%0A%20%20%20%20%20%2A%20If%20the%20scene%20is%20NOT%20transparent%20Pixi%20will%20use%20a%20canvas%20sized%20fillRect%20operation%20every%20frame%20to%20set%20the%20canvas%20background%20color%2E%0A%20%20%20%20%20%2A%20If%20the%20scene%20is%20transparent%20Pixi%20will%20use%20clearRect%20to%20clear%20the%20canvas%20every%20frame%2E%0A%20%20%20%20%20%2A%20Disable%20this%20by%20setting%20this%20to%20false%2E%20For%20example%20if%20your%20game%20has%20a%20canvas%20filling%20background%20image%20you%20often%20don%27t%20need%20this%20set%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40default%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EclearBeforeRender%20%3D%20options%2EclearBeforeRender%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20If%20true%20Pixi%20will%20Math%2Efloor%28%29%20x%2Fy%20values%20when%20rendering%2C%20stopping%20pixel%20interpolation%2E%0A%20%20%20%20%20%2A%20Handy%20for%20crisp%20pixel%20art%20and%20speed%20on%20legacy%20devices%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EroundPixels%20%3D%20options%2EroundPixels%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20background%20color%20as%20a%20number%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FbackgroundColor%20%3D%200x000000%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20background%20color%20as%20an%20%5BR%2C%20G%2C%20B%5D%20array%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%5B%5D%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FbackgroundColorRgb%20%3D%20%5B0%2C%200%2C%200%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20background%20color%20as%20a%20string%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FbackgroundColorString%20%3D%20%27%23000000%27%3B%0A%0A%20%20%20%20this%2EbackgroundColor%20%3D%20options%2EbackgroundColor%20%7C%7C%20this%2E%5FbackgroundColor%3B%20%2F%2F%20run%20bg%20color%20setter%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20temporary%20display%20object%20used%20as%20the%20parent%20of%20the%20currently%20being%20rendered%20item%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EDisplayObject%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FtempDisplayObjectParent%20%3D%20%7BworldTransform%3Anew%20math%2EMatrix%28%29%2C%20worldAlpha%3A1%2C%20children%3A%5B%5D%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20last%20root%20object%20that%20the%20renderer%20tried%20to%20render%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EDisplayObject%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FlastObjectRendered%20%3D%20this%2E%5FtempDisplayObjectParent%3B%0A%7D%0A%0A%2F%2F%20constructor%0ASystemRenderer%2Eprototype%20%3D%20Object%2Ecreate%28EventEmitter%2Eprototype%29%3B%0ASystemRenderer%2Eprototype%2Econstructor%20%3D%20SystemRenderer%3B%0Amodule%2Eexports%20%3D%20SystemRenderer%3B%0A%0AObject%2EdefineProperties%28SystemRenderer%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20background%20color%20to%20fill%20if%20not%20transparent%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2ESystemRenderer%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20backgroundColor%3A%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5FbackgroundColor%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28val%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FbackgroundColor%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FbackgroundColorString%20%3D%20utils%2Ehex2string%28val%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20utils%2Ehex2rgb%28val%2C%20this%2E%5FbackgroundColorRgb%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Resizes%20the%20canvas%20view%20to%20the%20specified%20width%20and%20height%0A%20%2A%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20the%20new%20width%20of%20the%20canvas%20view%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20the%20new%20height%20of%20the%20canvas%20view%0A%20%2A%2F%0ASystemRenderer%2Eprototype%2Eresize%20%3D%20function%20%28width%2C%20height%29%20%7B%0A%20%20%20%20this%2Ewidth%20%3D%20width%20%2A%20this%2Eresolution%3B%0A%20%20%20%20this%2Eheight%20%3D%20height%20%2A%20this%2Eresolution%3B%0A%0A%20%20%20%20this%2Eview%2Ewidth%20%3D%20this%2Ewidth%3B%0A%20%20%20%20this%2Eview%2Eheight%20%3D%20this%2Eheight%3B%0A%0A%20%20%20%20if%20%28this%2EautoResize%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eview%2Estyle%2Ewidth%20%3D%20this%2Ewidth%20%2F%20this%2Eresolution%20%2B%20%27px%27%3B%0A%20%20%20%20%20%20%20%20this%2Eview%2Estyle%2Eheight%20%3D%20this%2Eheight%20%2F%20this%2Eresolution%20%2B%20%27px%27%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20everything%20from%20the%20renderer%20and%20optionally%20removes%20the%20Canvas%20DOM%20element%2E%0A%20%2A%0A%20%2A%20%40param%20%5BremoveView%3Dfalse%5D%20%7Bboolean%7D%20Removes%20the%20Canvas%20element%20from%20the%20DOM%2E%0A%20%2A%2F%0ASystemRenderer%2Eprototype%2Edestroy%20%3D%20function%20%28removeView%29%20%7B%0A%20%20%20%20if%20%28removeView%20%26%26%20this%2Eview%2EparentNode%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eview%2EparentNode%2EremoveChild%28this%2Eview%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Etype%20%3D%20CONST%2ERENDERER%5FTYPE%2EUNKNOWN%3B%0A%0A%20%20%20%20this%2Ewidth%20%3D%200%3B%0A%20%20%20%20this%2Eheight%20%3D%200%3B%0A%0A%20%20%20%20this%2Eview%20%3D%20null%3B%0A%0A%20%20%20%20this%2Eresolution%20%3D%200%3B%0A%0A%20%20%20%20this%2Etransparent%20%3D%20false%3B%0A%0A%20%20%20%20this%2EautoResize%20%3D%20false%3B%0A%0A%20%20%20%20this%2EblendModes%20%3D%20null%3B%0A%0A%20%20%20%20this%2EpreserveDrawingBuffer%20%3D%20false%3B%0A%20%20%20%20this%2EclearBeforeRender%20%3D%20false%3B%0A%0A%20%20%20%20this%2EroundPixels%20%3D%20false%3B%0A%0A%20%20%20%20this%2E%5FbackgroundColor%20%3D%200%3B%0A%20%20%20%20this%2E%5FbackgroundColorRgb%20%3D%20null%3B%0A%20%20%20%20this%2E%5FbackgroundColorString%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2Futils%22%3A70%2C%22eventemitter3%22%3A10%7D%5D%2C37%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20SystemRenderer%20%3D%20require%28%27%2E%2E%2FSystemRenderer%27%29%2C%0A%20%20%20%20CanvasMaskManager%20%3D%20require%28%27%2E%2Futils%2FCanvasMaskManager%27%29%2C%0A%20%20%20%20utils%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Futils%27%29%2C%0A%20%20%20%20math%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fmath%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20CanvasRenderer%20draws%20the%20scene%20and%20all%20its%20content%20onto%20a%202d%20canvas%2E%20This%20renderer%20should%20be%20used%20for%20browsers%20that%20do%20not%20support%20webGL%2E%0A%20%2A%20Don%27t%20forget%20to%20add%20the%20CanvasRenderer%2Eview%20to%20your%20DOM%20or%20you%20will%20not%20see%20anything%20%3A%29%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40extends%20PIXI%2ESystemRenderer%0A%20%2A%20%40param%20%5Bwidth%3D800%5D%20%7Bnumber%7D%20the%20width%20of%20the%20canvas%20view%0A%20%2A%20%40param%20%5Bheight%3D600%5D%20%7Bnumber%7D%20the%20height%20of%20the%20canvas%20view%0A%20%2A%20%40param%20%5Boptions%5D%20%7Bobject%7D%20The%20optional%20renderer%20parameters%0A%20%2A%20%40param%20%5Boptions%2Eview%5D%20%7BHTMLCanvasElement%7D%20the%20canvas%20to%20use%20as%20a%20view%2C%20optional%0A%20%2A%20%40param%20%5Boptions%2Etransparent%3Dfalse%5D%20%7Bboolean%7D%20If%20the%20render%20view%20is%20transparent%2C%20default%20false%0A%20%2A%20%40param%20%5Boptions%2EautoResize%3Dfalse%5D%20%7Bboolean%7D%20If%20the%20render%20view%20is%20automatically%20resized%2C%20default%20false%0A%20%2A%20%40param%20%5Boptions%2Eantialias%3Dfalse%5D%20%7Bboolean%7D%20sets%20antialias%20%28only%20applicable%20in%20chrome%20at%20the%20moment%29%0A%20%2A%20%40param%20%5Boptions%2Eresolution%3D1%5D%20%7Bnumber%7D%20the%20resolution%20of%20the%20renderer%20retina%20would%20be%202%0A%20%2A%20%40param%20%5Boptions%2EclearBeforeRender%3Dtrue%5D%20%7Bboolean%7D%20This%20sets%20if%20the%20CanvasRenderer%20will%20clear%20the%20canvas%20or%0A%20%2A%20%20%20%20%20%20not%20before%20the%20new%20render%20pass%2E%0A%20%2A%20%40param%20%5Boptions%2EroundPixels%3Dfalse%5D%20%7Bboolean%7D%20If%20true%20Pixi%20will%20Math%2Efloor%28%29%20x%2Fy%20values%20when%20rendering%2C%20stopping%20pixel%20interpolation%2E%0A%20%2A%2F%0Afunction%20CanvasRenderer%28width%2C%20height%2C%20options%29%0A%7B%0A%20%20%20%20options%20%3D%20options%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20SystemRenderer%2Ecall%28this%2C%20%27Canvas%27%2C%20width%2C%20height%2C%20options%29%3B%0A%0A%20%20%20%20this%2Etype%20%3D%20CONST%2ERENDERER%5FTYPE%2ECANVAS%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20canvas%202d%20context%20that%20everything%20is%20drawn%20with%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BCanvasRenderingContext2D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Econtext%20%3D%20this%2Eview%2EgetContext%28%272d%27%2C%20%7B%20alpha%3A%20this%2Etransparent%20%7D%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Boolean%20flag%20controlling%20canvas%20refresh%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Erefresh%20%3D%20true%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Instance%20of%20a%20CanvasMaskManager%2C%20handles%20masking%20when%20using%20the%20canvas%20renderer%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ECanvasMaskManager%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EmaskManager%20%3D%20new%20CanvasMaskManager%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20canvas%20property%20used%20to%20set%20the%20canvas%20smoothing%20property%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EsmoothProperty%20%3D%20%27imageSmoothingEnabled%27%3B%0A%0A%20%20%20%20if%20%28%21this%2Econtext%2EimageSmoothingEnabled%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2Econtext%2EwebkitImageSmoothingEnabled%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EsmoothProperty%20%3D%20%27webkitImageSmoothingEnabled%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28this%2Econtext%2EmozImageSmoothingEnabled%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EsmoothProperty%20%3D%20%27mozImageSmoothingEnabled%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28this%2Econtext%2EoImageSmoothingEnabled%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EsmoothProperty%20%3D%20%27oImageSmoothingEnabled%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28this%2Econtext%2EmsImageSmoothingEnabled%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EsmoothProperty%20%3D%20%27msImageSmoothingEnabled%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EinitPlugins%28%29%3B%0A%0A%20%20%20%20this%2E%5FmapBlendModes%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20temporary%20display%20object%20used%20as%20the%20parent%20of%20the%20currently%20being%20rendered%20item%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EDisplayObject%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FtempDisplayObjectParent%20%3D%20%7B%0A%20%20%20%20%20%20%20%20worldTransform%3A%20new%20math%2EMatrix%28%29%2C%0A%20%20%20%20%20%20%20%20worldAlpha%3A%201%0A%20%20%20%20%7D%3B%0A%0A%0A%20%20%20%20this%2Eresize%28width%2C%20height%29%3B%0A%7D%0A%0A%2F%2F%20constructor%0ACanvasRenderer%2Eprototype%20%3D%20Object%2Ecreate%28SystemRenderer%2Eprototype%29%3B%0ACanvasRenderer%2Eprototype%2Econstructor%20%3D%20CanvasRenderer%3B%0Amodule%2Eexports%20%3D%20CanvasRenderer%3B%0Autils%2EpluginTarget%2Emixin%28CanvasRenderer%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20to%20this%20canvas%20view%0A%20%2A%0A%20%2A%20%40param%20object%20%7BPIXI%2EDisplayObject%7D%20the%20object%20to%20be%20rendered%0A%20%2A%2F%0ACanvasRenderer%2Eprototype%2Erender%20%3D%20function%20%28object%29%0A%7B%0A%20%20%20%20this%2Eemit%28%27prerender%27%29%3B%0A%0A%20%20%20%20var%20cacheParent%20%3D%20object%2Eparent%3B%0A%0A%20%20%20%20this%2E%5FlastObjectRendered%20%3D%20object%3B%0A%0A%20%20%20%20object%2Eparent%20%3D%20this%2E%5FtempDisplayObjectParent%3B%0A%0A%20%20%20%20%2F%2F%20update%20the%20scene%20graph%0A%20%20%20%20object%2EupdateTransform%28%29%3B%0A%0A%20%20%20%20object%2Eparent%20%3D%20cacheParent%3B%0A%0A%20%20%20%20this%2Econtext%2EsetTransform%281%2C%200%2C%200%2C%201%2C%200%2C%200%29%3B%0A%0A%20%20%20%20this%2Econtext%2EglobalAlpha%20%3D%201%3B%0A%0A%20%20%20%20this%2Econtext%2EglobalCompositeOperation%20%3D%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ENORMAL%5D%3B%0A%0A%20%20%20%20if%20%28navigator%2EisCocoonJS%20%26%26%20this%2Eview%2Escreencanvas%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Econtext%2EfillStyle%20%3D%20%27black%27%3B%0A%20%20%20%20%20%20%20%20this%2Econtext%2Eclear%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28this%2EclearBeforeRender%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2Etransparent%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Econtext%2EclearRect%280%2C%200%2C%20this%2Ewidth%2C%20this%2Eheight%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Econtext%2EfillStyle%20%3D%20this%2E%5FbackgroundColorString%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Econtext%2EfillRect%280%2C%200%2C%20this%2Ewidth%20%2C%20this%2Eheight%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2ErenderDisplayObject%28object%2C%20this%2Econtext%29%3B%0A%0A%20%20%20%20this%2Eemit%28%27postrender%27%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20everything%20from%20the%20renderer%20and%20optionally%20removes%20the%20Canvas%20DOM%20element%2E%0A%20%2A%0A%20%2A%20%40param%20%5BremoveView%3Dfalse%5D%20%7Bboolean%7D%20Removes%20the%20Canvas%20element%20from%20the%20DOM%2E%0A%20%2A%2F%0ACanvasRenderer%2Eprototype%2Edestroy%20%3D%20function%20%28removeView%29%0A%7B%0A%20%20%20%20this%2EdestroyPlugins%28%29%3B%0A%0A%20%20%20%20%2F%2F%20call%20the%20base%20destroy%0A%20%20%20%20SystemRenderer%2Eprototype%2Edestroy%2Ecall%28this%2C%20removeView%29%3B%0A%0A%20%20%20%20this%2Econtext%20%3D%20null%3B%0A%0A%20%20%20%20this%2Erefresh%20%3D%20true%3B%0A%0A%20%20%20%20this%2EmaskManager%2Edestroy%28%29%3B%0A%20%20%20%20this%2EmaskManager%20%3D%20null%3B%0A%0A%20%20%20%20this%2EsmoothProperty%20%3D%20null%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20a%20display%20object%0A%20%2A%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EDisplayObject%7D%20The%20displayObject%20to%20render%0A%20%2A%20%40private%0A%20%2A%2F%0ACanvasRenderer%2Eprototype%2ErenderDisplayObject%20%3D%20function%20%28displayObject%2C%20context%29%0A%7B%0A%20%20%20%20var%20tempContext%20%3D%20this%2Econtext%3B%0A%0A%20%20%20%20this%2Econtext%20%3D%20context%3B%0A%20%20%20%20displayObject%2ErenderCanvas%28this%29%3B%0A%20%20%20%20this%2Econtext%20%3D%20tempContext%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40extends%20PIXI%2ESystemRenderer%23resize%0A%20%2A%0A%20%2A%20%40param%20%7Bnumber%7D%20w%0A%20%2A%20%40param%20%7Bnumber%7D%20h%0A%20%2A%2F%0ACanvasRenderer%2Eprototype%2Eresize%20%3D%20function%20%28w%2C%20h%29%0A%7B%0A%20%20%20%20SystemRenderer%2Eprototype%2Eresize%2Ecall%28this%2C%20w%2C%20h%29%3B%0A%0A%20%20%20%20%2F%2Freset%20the%20scale%20mode%2E%2E%20oddly%20this%20seems%20to%20be%20reset%20when%20the%20canvas%20is%20resized%2E%0A%20%20%20%20%2F%2Fsurely%20a%20browser%20bug%3F%3F%20Let%20pixi%20fix%20that%20for%20you%2E%2E%0A%20%20%20%20if%28this%2EsmoothProperty%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Econtext%5Bthis%2EsmoothProperty%5D%20%3D%20%28CONST%2ESCALE%5FMODES%2EDEFAULT%20%3D%3D%3D%20CONST%2ESCALE%5FMODES%2ELINEAR%29%3B%0A%20%20%20%20%7D%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Maps%20Pixi%20blend%20modes%20to%20canvas%20blend%20modes%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ACanvasRenderer%2Eprototype%2E%5FmapBlendModes%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28%21this%2EblendModes%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EblendModes%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28utils%2EcanUseNewCanvasBlendModes%28%29%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ENORMAL%5D%20%20%20%20%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EADD%5D%20%20%20%20%20%20%20%20%20%20%20%3D%20%27lighter%27%3B%20%2F%2FIS%20THIS%20OK%3F%3F%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EMULTIPLY%5D%20%20%20%20%20%20%3D%20%27multiply%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ESCREEN%5D%20%20%20%20%20%20%20%20%3D%20%27screen%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EOVERLAY%5D%20%20%20%20%20%20%20%3D%20%27overlay%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EDARKEN%5D%20%20%20%20%20%20%20%20%3D%20%27darken%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ELIGHTEN%5D%20%20%20%20%20%20%20%3D%20%27lighten%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ECOLOR%5FDODGE%5D%20%20%20%3D%20%27color%2Ddodge%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ECOLOR%5FBURN%5D%20%20%20%20%3D%20%27color%2Dburn%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EHARD%5FLIGHT%5D%20%20%20%20%3D%20%27hard%2Dlight%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ESOFT%5FLIGHT%5D%20%20%20%20%3D%20%27soft%2Dlight%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EDIFFERENCE%5D%20%20%20%20%3D%20%27difference%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EEXCLUSION%5D%20%20%20%20%20%3D%20%27exclusion%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EHUE%5D%20%20%20%20%20%20%20%20%20%20%20%3D%20%27hue%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ESATURATION%5D%20%20%20%20%3D%20%27saturate%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ECOLOR%5D%20%20%20%20%20%20%20%20%20%3D%20%27color%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ELUMINOSITY%5D%20%20%20%20%3D%20%27luminosity%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20means%20that%20the%20browser%20does%20not%20support%20the%20cool%20new%20blend%20modes%20in%20canvas%20%27cough%27%20ie%20%27cough%27%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ENORMAL%5D%20%20%20%20%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EADD%5D%20%20%20%20%20%20%20%20%20%20%20%3D%20%27lighter%27%3B%20%2F%2FIS%20THIS%20OK%3F%3F%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EMULTIPLY%5D%20%20%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ESCREEN%5D%20%20%20%20%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EOVERLAY%5D%20%20%20%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EDARKEN%5D%20%20%20%20%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ELIGHTEN%5D%20%20%20%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ECOLOR%5FDODGE%5D%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ECOLOR%5FBURN%5D%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EHARD%5FLIGHT%5D%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ESOFT%5FLIGHT%5D%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EDIFFERENCE%5D%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EEXCLUSION%5D%20%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EHUE%5D%20%20%20%20%20%20%20%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ESATURATION%5D%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ECOLOR%5D%20%20%20%20%20%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ELUMINOSITY%5D%20%20%20%20%3D%20%27source%2Dover%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2F%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2F%2E%2E%2Futils%22%3A70%2C%22%2E%2E%2FSystemRenderer%22%3A36%2C%22%2E%2Futils%2FCanvasMaskManager%22%3A40%7D%5D%2C38%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20Canvas%20element%20of%20the%20given%20size%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20the%20width%20for%20the%20newly%20created%20canvas%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20the%20height%20for%20the%20newly%20created%20canvas%0A%20%2A%2F%0Afunction%20CanvasBuffer%28width%2C%20height%29%0A%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20Canvas%20object%20that%20belongs%20to%20this%20CanvasBuffer%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BHTMLCanvasElement%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ecanvas%20%3D%20document%2EcreateElement%28%27canvas%27%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20A%20CanvasRenderingContext2D%20object%20representing%20a%20two%2Ddimensional%20rendering%20context%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BCanvasRenderingContext2D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Econtext%20%3D%20this%2Ecanvas%2EgetContext%28%272d%27%29%3B%0A%0A%20%20%20%20this%2Ecanvas%2Ewidth%20%3D%20width%3B%0A%20%20%20%20this%2Ecanvas%2Eheight%20%3D%20height%3B%0A%7D%0A%0ACanvasBuffer%2Eprototype%2Econstructor%20%3D%20CanvasBuffer%3B%0Amodule%2Eexports%20%3D%20CanvasBuffer%3B%0A%0AObject%2EdefineProperties%28CanvasBuffer%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20width%20of%20the%20canvas%20buffer%20in%20pixels%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2ECanvasBuffer%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20width%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Ecanvas%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28val%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ecanvas%2Ewidth%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20canvas%20buffer%20in%20pixels%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2ECanvasBuffer%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20height%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Ecanvas%2Eheight%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28val%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ecanvas%2Eheight%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Clears%20the%20canvas%20that%20was%20created%20by%20the%20CanvasBuffer%20class%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ACanvasBuffer%2Eprototype%2Eclear%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Econtext%2EsetTransform%281%2C%200%2C%200%2C%201%2C%200%2C%200%29%3B%0A%20%20%20%20this%2Econtext%2EclearRect%280%2C0%2C%20this%2Ecanvas%2Ewidth%2C%20this%2Ecanvas%2Eheight%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Resizes%20the%20canvas%20to%20the%20specified%20width%20and%20height%2E%0A%20%2A%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20the%20new%20width%20of%20the%20canvas%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20the%20new%20height%20of%20the%20canvas%0A%20%2A%2F%0ACanvasBuffer%2Eprototype%2Eresize%20%3D%20function%20%28width%2C%20height%29%0A%7B%0A%20%20%20%20this%2Ecanvas%2Ewidth%20%3D%20width%3B%0A%20%20%20%20this%2Ecanvas%2Eheight%20%3D%20height%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20this%20canvas%2E%0A%20%2A%0A%20%2A%2F%0ACanvasBuffer%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Econtext%20%3D%20null%3B%0A%20%20%20%20this%2Ecanvas%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C39%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2F%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20set%20of%20functions%20used%20by%20the%20canvas%20renderer%20to%20draw%20the%20primitive%20graphics%20data%2E%0A%20%2A%20%40static%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%2F%0Avar%20CanvasGraphics%20%3D%20%7B%7D%3B%0Amodule%2Eexports%20%3D%20CanvasGraphics%3B%0A%0A%2F%2A%0A%20%2A%20Renders%20a%20Graphics%20object%20to%20a%20canvas%2E%0A%20%2A%0A%20%2A%20%40param%20graphics%20%7BPIXI%2EGraphics%7D%20the%20actual%20graphics%20object%20to%20render%0A%20%2A%20%40param%20context%20%7BCanvasRenderingContext2D%7D%20the%202d%20drawing%20method%20of%20the%20canvas%0A%20%2A%2F%0ACanvasGraphics%2ErenderGraphics%20%3D%20function%20%28graphics%2C%20context%29%0A%7B%0A%20%20%20%20var%20worldAlpha%20%3D%20graphics%2EworldAlpha%3B%0A%0A%20%20%20%20if%20%28graphics%2Edirty%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EupdateGraphicsTint%28graphics%29%3B%0A%20%20%20%20%20%20%20%20graphics%2Edirty%20%3D%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20graphics%2EgraphicsData%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20data%20%3D%20graphics%2EgraphicsData%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20shape%20%3D%20data%2Eshape%3B%0A%0A%20%20%20%20%20%20%20%20var%20fillColor%20%3D%20data%2E%5FfillTint%3B%0A%20%20%20%20%20%20%20%20var%20lineColor%20%3D%20data%2E%5FlineTint%3B%0A%0A%20%20%20%20%20%20%20%20context%2ElineWidth%20%3D%20data%2ElineWidth%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2EPOLY%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbeginPath%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20points%20%3D%20shape%2Epoints%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EmoveTo%28points%5B0%5D%2C%20points%5B1%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%3D1%3B%20j%20%3C%20points%2Elength%2F2%3B%20j%2B%2B%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2ElineTo%28points%5Bj%20%2A%202%5D%2C%20points%5Bj%20%2A%202%20%2B%201%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28shape%2Eclosed%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2ElineTo%28points%5B0%5D%2C%20points%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20the%20first%20and%20last%20point%20are%20the%20same%20close%20the%20path%20%2D%20much%20neater%20%3A%29%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28points%5B0%5D%20%3D%3D%3D%20points%5Bpoints%2Elength%2D2%5D%20%26%26%20points%5B1%5D%20%3D%3D%3D%20points%5Bpoints%2Elength%2D1%5D%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EclosePath%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2Efill%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EglobalAlpha%20%3D%20data%2EfillAlpha%20%2A%20worldAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EfillStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20fillColor%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2Efill%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2ElineWidth%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EglobalAlpha%20%3D%20data%2ElineAlpha%20%2A%20worldAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EstrokeStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20lineColor%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2Estroke%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2ERECT%29%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2EfillColor%20%7C%7C%20data%2EfillColor%20%3D%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EglobalAlpha%20%3D%20data%2EfillAlpha%20%2A%20worldAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EfillStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20fillColor%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EfillRect%28shape%2Ex%2C%20shape%2Ey%2C%20shape%2Ewidth%2C%20shape%2Eheight%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2ElineWidth%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EglobalAlpha%20%3D%20data%2ElineAlpha%20%2A%20worldAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EstrokeStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20lineColor%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EstrokeRect%28shape%2Ex%2C%20shape%2Ey%2C%20shape%2Ewidth%2C%20shape%2Eheight%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2ECIRC%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%20%2D%20need%20to%20be%20Undefined%21%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbeginPath%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2Earc%28shape%2Ex%2C%20shape%2Ey%2C%20shape%2Eradius%2C0%2C2%2AMath%2EPI%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EclosePath%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2Efill%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EglobalAlpha%20%3D%20data%2EfillAlpha%20%2A%20worldAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EfillStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20fillColor%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2Efill%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2ElineWidth%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EglobalAlpha%20%3D%20data%2ElineAlpha%20%2A%20worldAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EstrokeStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20lineColor%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2Estroke%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2EELIP%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20ellipse%20code%20taken%20from%3A%20http%3A%2F%2Fstackoverflow%2Ecom%2Fquestions%2F2172798%2Fhow%2Dto%2Ddraw%2Dan%2Doval%2Din%2Dhtml5%2Dcanvas%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20w%20%3D%20shape%2Ewidth%20%2A%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20h%20%3D%20shape%2Eheight%20%2A%202%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20shape%2Ex%20%2D%20w%2F2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20y%20%3D%20shape%2Ey%20%2D%20h%2F2%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbeginPath%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20kappa%20%3D%200%2E5522848%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ox%20%3D%20%28w%20%2F%202%29%20%2A%20kappa%2C%20%2F%2F%20control%20point%20offset%20horizontal%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20oy%20%3D%20%28h%20%2F%202%29%20%2A%20kappa%2C%20%2F%2F%20control%20point%20offset%20vertical%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xe%20%3D%20x%20%2B%20w%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20x%2Dend%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ye%20%3D%20y%20%2B%20h%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20y%2Dend%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xm%20%3D%20x%20%2B%20w%20%2F%202%2C%20%20%20%20%20%20%20%2F%2F%20x%2Dmiddle%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ym%20%3D%20y%20%2B%20h%20%2F%202%3B%20%20%20%20%20%20%20%2F%2F%20y%2Dmiddle%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EmoveTo%28x%2C%20ym%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbezierCurveTo%28x%2C%20ym%20%2D%20oy%2C%20xm%20%2D%20ox%2C%20y%2C%20xm%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbezierCurveTo%28xm%20%2B%20ox%2C%20y%2C%20xe%2C%20ym%20%2D%20oy%2C%20xe%2C%20ym%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbezierCurveTo%28xe%2C%20ym%20%2B%20oy%2C%20xm%20%2B%20ox%2C%20ye%2C%20xm%2C%20ye%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbezierCurveTo%28xm%20%2D%20ox%2C%20ye%2C%20x%2C%20ym%20%2B%20oy%2C%20x%2C%20ym%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EclosePath%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2Efill%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EglobalAlpha%20%3D%20data%2EfillAlpha%20%2A%20worldAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EfillStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20fillColor%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2Efill%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2ElineWidth%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EglobalAlpha%20%3D%20data%2ElineAlpha%20%2A%20worldAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EstrokeStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20lineColor%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2Estroke%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2ERREC%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20rx%20%3D%20shape%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20ry%20%3D%20shape%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20width%20%3D%20shape%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20height%20%3D%20shape%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20radius%20%3D%20shape%2Eradius%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20maxRadius%20%3D%20Math%2Emin%28width%2C%20height%29%20%2F%202%20%7C%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20radius%20%3D%20radius%20%3E%20maxRadius%20%3F%20maxRadius%20%3A%20radius%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbeginPath%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EmoveTo%28rx%2C%20ry%20%2B%20radius%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2ElineTo%28rx%2C%20ry%20%2B%20height%20%2D%20radius%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EquadraticCurveTo%28rx%2C%20ry%20%2B%20height%2C%20rx%20%2B%20radius%2C%20ry%20%2B%20height%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2ElineTo%28rx%20%2B%20width%20%2D%20radius%2C%20ry%20%2B%20height%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EquadraticCurveTo%28rx%20%2B%20width%2C%20ry%20%2B%20height%2C%20rx%20%2B%20width%2C%20ry%20%2B%20height%20%2D%20radius%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2ElineTo%28rx%20%2B%20width%2C%20ry%20%2B%20radius%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EquadraticCurveTo%28rx%20%2B%20width%2C%20ry%2C%20rx%20%2B%20width%20%2D%20radius%2C%20ry%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2ElineTo%28rx%20%2B%20radius%2C%20ry%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EquadraticCurveTo%28rx%2C%20ry%2C%20rx%2C%20ry%20%2B%20radius%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EclosePath%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2EfillColor%20%7C%7C%20data%2EfillColor%20%3D%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EglobalAlpha%20%3D%20data%2EfillAlpha%20%2A%20worldAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EfillStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20fillColor%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2Efill%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2ElineWidth%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EglobalAlpha%20%3D%20data%2ElineAlpha%20%2A%20worldAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EstrokeStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20lineColor%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2Estroke%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Renders%20a%20graphics%20mask%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20graphics%20%7BPIXI%2EGraphics%7D%20the%20graphics%20which%20will%20be%20used%20as%20a%20mask%0A%20%2A%20%40param%20context%20%7BCanvasRenderingContext2D%7D%20the%20context%202d%20method%20of%20the%20canvas%0A%20%2A%2F%0ACanvasGraphics%2ErenderGraphicsMask%20%3D%20function%20%28graphics%2C%20context%29%0A%7B%0A%20%20%20%20var%20len%20%3D%20graphics%2EgraphicsData%2Elength%3B%0A%0A%20%20%20%20if%20%28len%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20context%2EbeginPath%28%29%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20len%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20data%20%3D%20graphics%2EgraphicsData%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20shape%20%3D%20data%2Eshape%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2EPOLY%29%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20points%20%3D%20shape%2Epoints%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EmoveTo%28points%5B0%5D%2C%20points%5B1%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%3D1%3B%20j%20%3C%20points%2Elength%2F2%3B%20j%2B%2B%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2ElineTo%28points%5Bj%20%2A%202%5D%2C%20points%5Bj%20%2A%202%20%2B%201%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20the%20first%20and%20last%20point%20are%20the%20same%20close%20the%20path%20%2D%20much%20neater%20%3A%29%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28points%5B0%5D%20%3D%3D%3D%20points%5Bpoints%2Elength%2D2%5D%20%26%26%20points%5B1%5D%20%3D%3D%3D%20points%5Bpoints%2Elength%2D1%5D%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20context%2EclosePath%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2ERECT%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2Erect%28shape%2Ex%2C%20shape%2Ey%2C%20shape%2Ewidth%2C%20shape%2Eheight%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EclosePath%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2ECIRC%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%20%2D%20need%20to%20be%20Undefined%21%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2Earc%28shape%2Ex%2C%20shape%2Ey%2C%20shape%2Eradius%2C%200%2C%202%20%2A%20Math%2EPI%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EclosePath%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2EELIP%29%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20ellipse%20code%20taken%20from%3A%20http%3A%2F%2Fstackoverflow%2Ecom%2Fquestions%2F2172798%2Fhow%2Dto%2Ddraw%2Dan%2Doval%2Din%2Dhtml5%2Dcanvas%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20w%20%3D%20shape%2Ewidth%20%2A%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20h%20%3D%20shape%2Eheight%20%2A%202%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20shape%2Ex%20%2D%20w%2F2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20y%20%3D%20shape%2Ey%20%2D%20h%2F2%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20kappa%20%3D%200%2E5522848%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ox%20%3D%20%28w%20%2F%202%29%20%2A%20kappa%2C%20%2F%2F%20control%20point%20offset%20horizontal%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20oy%20%3D%20%28h%20%2F%202%29%20%2A%20kappa%2C%20%2F%2F%20control%20point%20offset%20vertical%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xe%20%3D%20x%20%2B%20w%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20x%2Dend%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ye%20%3D%20y%20%2B%20h%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20y%2Dend%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xm%20%3D%20x%20%2B%20w%20%2F%202%2C%20%20%20%20%20%20%20%2F%2F%20x%2Dmiddle%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ym%20%3D%20y%20%2B%20h%20%2F%202%3B%20%20%20%20%20%20%20%2F%2F%20y%2Dmiddle%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EmoveTo%28x%2C%20ym%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbezierCurveTo%28x%2C%20ym%20%2D%20oy%2C%20xm%20%2D%20ox%2C%20y%2C%20xm%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbezierCurveTo%28xm%20%2B%20ox%2C%20y%2C%20xe%2C%20ym%20%2D%20oy%2C%20xe%2C%20ym%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbezierCurveTo%28xe%2C%20ym%20%2B%20oy%2C%20xm%20%2B%20ox%2C%20ye%2C%20xm%2C%20ye%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EbezierCurveTo%28xm%20%2D%20ox%2C%20ye%2C%20x%2C%20ym%20%2B%20oy%2C%20x%2C%20ym%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EclosePath%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28data%2Etype%20%3D%3D%3D%20CONST%2ESHAPES%2ERREC%29%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20rx%20%3D%20shape%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20ry%20%3D%20shape%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20width%20%3D%20shape%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20height%20%3D%20shape%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20radius%20%3D%20shape%2Eradius%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20maxRadius%20%3D%20Math%2Emin%28width%2C%20height%29%20%2F%202%20%7C%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20radius%20%3D%20radius%20%3E%20maxRadius%20%3F%20maxRadius%20%3A%20radius%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EmoveTo%28rx%2C%20ry%20%2B%20radius%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2ElineTo%28rx%2C%20ry%20%2B%20height%20%2D%20radius%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EquadraticCurveTo%28rx%2C%20ry%20%2B%20height%2C%20rx%20%2B%20radius%2C%20ry%20%2B%20height%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2ElineTo%28rx%20%2B%20width%20%2D%20radius%2C%20ry%20%2B%20height%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EquadraticCurveTo%28rx%20%2B%20width%2C%20ry%20%2B%20height%2C%20rx%20%2B%20width%2C%20ry%20%2B%20height%20%2D%20radius%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2ElineTo%28rx%20%2B%20width%2C%20ry%20%2B%20radius%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EquadraticCurveTo%28rx%20%2B%20width%2C%20ry%2C%20rx%20%2B%20width%20%2D%20radius%2C%20ry%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2ElineTo%28rx%20%2B%20radius%2C%20ry%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EquadraticCurveTo%28rx%2C%20ry%2C%20rx%2C%20ry%20%2B%20radius%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%2EclosePath%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Updates%20the%20tint%20of%20a%20graphics%20object%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20graphics%20%7BPIXI%2EGraphics%7D%20the%20graphics%20that%20will%20have%20its%20tint%20updated%0A%20%2A%0A%20%2A%2F%0ACanvasGraphics%2EupdateGraphicsTint%20%3D%20function%20%28graphics%29%0A%7B%0A%20%20%20%20if%20%28graphics%2Etint%20%3D%3D%3D%200xFFFFFF%20%26%26%20graphics%2E%5FprevTint%20%3D%3D%3D%20graphics%2Etint%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20graphics%2E%5FprevTint%20%3D%20graphics%2Etint%3B%0A%0A%20%20%20%20var%20tintR%20%3D%20%28graphics%2Etint%20%3E%3E%2016%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20var%20tintG%20%3D%20%28graphics%2Etint%20%3E%3E%208%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20var%20tintB%20%3D%20%28graphics%2Etint%20%26%200xFF%29%2F%20255%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20graphics%2EgraphicsData%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20data%20%3D%20graphics%2EgraphicsData%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20var%20fillColor%20%3D%20data%2EfillColor%20%7C%200%3B%0A%20%20%20%20%20%20%20%20var%20lineColor%20%3D%20data%2ElineColor%20%7C%200%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2A%0A%20%20%20%20%20%20%20%20var%20colorR%20%3D%20%28fillColor%20%3E%3E%2016%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20var%20colorG%20%3D%20%28fillColor%20%3E%3E%208%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20var%20colorB%20%3D%20%28fillColor%20%26%200xFF%29%20%2F%20255%3B%0A%0A%20%20%20%20%20%20%20%20colorR%20%2A%3D%20tintR%3B%0A%20%20%20%20%20%20%20%20colorG%20%2A%3D%20tintG%3B%0A%20%20%20%20%20%20%20%20colorB%20%2A%3D%20tintB%3B%0A%0A%20%20%20%20%20%20%20%20fillColor%20%3D%20%28%28colorR%2A255%20%3C%3C%2016%29%20%2B%20%28colorG%2A255%20%3C%3C%208%29%20%2B%20colorB%2A255%29%3B%0A%0A%20%20%20%20%20%20%20%20colorR%20%3D%20%28lineColor%20%3E%3E%2016%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20colorG%20%3D%20%28lineColor%20%3E%3E%208%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20colorB%20%3D%20%28lineColor%20%26%200xFF%29%20%2F%20255%3B%0A%0A%20%20%20%20%20%20%20%20colorR%20%2A%3D%20tintR%3B%0A%20%20%20%20%20%20%20%20colorG%20%2A%3D%20tintG%3B%0A%20%20%20%20%20%20%20%20colorB%20%2A%3D%20tintB%3B%0A%0A%20%20%20%20%20%20%20%20lineColor%20%3D%20%28%28colorR%2A255%20%3C%3C%2016%29%20%2B%20%28colorG%2A255%20%3C%3C%208%29%20%2B%20colorB%2A255%29%3B%0A%20%20%20%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20super%20inline%20cos%20im%20an%20optimization%20NAZI%20%3A%29%0A%20%20%20%20%20%20%20%20data%2E%5FfillTint%20%3D%20%28%28%28fillColor%20%3E%3E%2016%20%26%200xFF%29%20%2F%20255%20%2A%20tintR%2A255%20%3C%3C%2016%29%20%2B%20%28%28fillColor%20%3E%3E%208%20%26%200xFF%29%20%2F%20255%20%2A%20tintG%2A255%20%3C%3C%208%29%20%2B%20%20%28fillColor%20%26%200xFF%29%20%2F%20255%20%2A%20tintB%2A255%29%3B%0A%20%20%20%20%20%20%20%20data%2E%5FlineTint%20%3D%20%28%28%28lineColor%20%3E%3E%2016%20%26%200xFF%29%20%2F%20255%20%2A%20tintR%2A255%20%3C%3C%2016%29%20%2B%20%28%28lineColor%20%3E%3E%208%20%26%200xFF%29%20%2F%20255%20%2A%20tintG%2A255%20%3C%3C%208%29%20%2B%20%20%28lineColor%20%26%200xFF%29%20%2F%20255%20%2A%20tintB%2A255%29%3B%0A%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2F%2E%2E%2Fconst%22%3A16%7D%5D%2C40%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20CanvasGraphics%20%3D%20require%28%27%2E%2FCanvasGraphics%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20set%20of%20functions%20used%20to%20handle%20masking%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%2F%0Afunction%20CanvasMaskManager%28%29%0A%7B%7D%0A%0ACanvasMaskManager%2Eprototype%2Econstructor%20%3D%20CanvasMaskManager%3B%0Amodule%2Eexports%20%3D%20CanvasMaskManager%3B%0A%0A%2F%2A%2A%0A%20%2A%20This%20method%20adds%20it%20to%20the%20current%20stack%20of%20masks%2E%0A%20%2A%0A%20%2A%20%40param%20maskData%20%7Bobject%7D%20the%20maskData%20that%20will%20be%20pushed%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7CPIXI%2ECanvasRenderer%7D%20The%20renderer%20context%20to%20use%2E%0A%20%2A%2F%0ACanvasMaskManager%2Eprototype%2EpushMask%20%3D%20function%20%28maskData%2C%20renderer%29%0A%7B%0A%0A%20%20%20%20renderer%2Econtext%2Esave%28%29%3B%0A%0A%20%20%20%20var%20cacheAlpha%20%3D%20maskData%2Ealpha%3B%0A%20%20%20%20var%20transform%20%3D%20maskData%2EworldTransform%3B%0A%20%20%20%20var%20resolution%20%3D%20renderer%2Eresolution%3B%0A%0A%20%20%20%20renderer%2Econtext%2EsetTransform%28%0A%20%20%20%20%20%20%20%20transform%2Ea%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20transform%2Eb%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20transform%2Ec%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20transform%2Ed%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20transform%2Etx%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20transform%2Ety%20%2A%20resolution%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20%2F%2FTODO%20suport%20sprite%20alpha%20masks%3F%3F%0A%20%20%20%20%2F%2Flots%20of%20effort%20required%2E%20If%20demand%20is%20great%20enough%2E%2E%0A%20%20%20%20if%28%21maskData%2Etexture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20CanvasGraphics%2ErenderGraphicsMask%28maskData%2C%20renderer%2Econtext%29%3B%0A%20%20%20%20%20%20%20%20renderer%2Econtext%2Eclip%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20maskData%2EworldAlpha%20%3D%20cacheAlpha%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Restores%20the%20current%20drawing%20context%20to%20the%20state%20it%20was%20before%20the%20mask%20was%20applied%2E%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7CPIXI%2ECanvasRenderer%7D%20The%20renderer%20context%20to%20use%2E%0A%20%2A%2F%0ACanvasMaskManager%2Eprototype%2EpopMask%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20renderer%2Econtext%2Erestore%28%29%3B%0A%7D%3B%0A%0ACanvasMaskManager%2Eprototype%2Edestroy%20%3D%20function%20%28%29%20%7B%7D%3B%0A%0A%7D%2C%7B%22%2E%2FCanvasGraphics%22%3A39%7D%5D%2C41%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20utils%20%3D%20require%28%27%2E%2E%2F%2E%2E%2F%2E%2E%2Futils%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Utility%20methods%20for%20Sprite%2FTexture%20tinting%2E%0A%20%2A%20%40static%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%2F%0Avar%20CanvasTinter%20%3D%20%7B%7D%3B%0Amodule%2Eexports%20%3D%20CanvasTinter%3B%0A%0A%2F%2A%2A%0A%20%2A%20Basically%20this%20method%20just%20needs%20a%20sprite%20and%20a%20color%20and%20tints%20the%20sprite%20with%20the%20given%20color%2E%0A%20%2A%0A%20%2A%20%40param%20sprite%20%7BPIXI%2ESprite%7D%20the%20sprite%20to%20tint%0A%20%2A%20%40param%20color%20%7Bnumber%7D%20the%20color%20to%20use%20to%20tint%20the%20sprite%20with%0A%20%2A%20%40return%20%7BHTMLCanvasElement%7D%20The%20tinted%20canvas%0A%20%2A%2F%0ACanvasTinter%2EgetTintedTexture%20%3D%20function%20%28sprite%2C%20color%29%0A%7B%0A%20%20%20%20var%20texture%20%3D%20sprite%2Etexture%3B%0A%0A%20%20%20%20color%20%3D%20CanvasTinter%2EroundColor%28color%29%3B%0A%0A%20%20%20%20var%20stringColor%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20color%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%0A%20%20%20%20texture%2EtintCache%20%3D%20texture%2EtintCache%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20if%20%28texture%2EtintCache%5BstringColor%5D%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20texture%2EtintCache%5BstringColor%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%20%2F%2F%20clone%20texture%2E%2E%0A%20%20%20%20var%20canvas%20%3D%20CanvasTinter%2Ecanvas%20%7C%7C%20document%2EcreateElement%28%27canvas%27%29%3B%0A%0A%20%20%20%20%2F%2FCanvasTinter%2EtintWithPerPixel%28texture%2C%20stringColor%2C%20canvas%29%3B%0A%20%20%20%20CanvasTinter%2EtintMethod%28texture%2C%20color%2C%20canvas%29%3B%0A%0A%20%20%20%20if%20%28CanvasTinter%2EconvertTintToImage%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20is%20this%20better%3F%0A%20%20%20%20%20%20%20%20var%20tintImage%20%3D%20new%20Image%28%29%3B%0A%20%20%20%20%20%20%20%20tintImage%2Esrc%20%3D%20canvas%2EtoDataURL%28%29%3B%0A%0A%20%20%20%20%20%20%20%20texture%2EtintCache%5BstringColor%5D%20%3D%20tintImage%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20texture%2EtintCache%5BstringColor%5D%20%3D%20canvas%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20we%20are%20not%20converting%20the%20texture%20to%20an%20image%20then%20we%20need%20to%20lose%20the%20reference%20to%20the%20canvas%0A%20%20%20%20%20%20%20%20CanvasTinter%2Ecanvas%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20canvas%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Tint%20a%20texture%20using%20the%20%27multiply%27%20operation%2E%0A%20%2A%0A%20%2A%20%40param%20texture%20%7BPIXI%2ETexture%7D%20the%20texture%20to%20tint%0A%20%2A%20%40param%20color%20%7Bnumber%7D%20the%20color%20to%20use%20to%20tint%20the%20sprite%20with%0A%20%2A%20%40param%20canvas%20%7BHTMLCanvasElement%7D%20the%20current%20canvas%0A%20%2A%2F%0ACanvasTinter%2EtintWithMultiply%20%3D%20function%20%28texture%2C%20color%2C%20canvas%29%0A%7B%0A%20%20%20%20var%20context%20%3D%20canvas%2EgetContext%28%20%272d%27%20%29%3B%0A%0A%20%20%20%20var%20resolution%20%3D%20texture%2EbaseTexture%2Eresolution%3B%0A%0A%20%20%20%20var%20crop%20%3D%20texture%2Ecrop%2Eclone%28%29%3B%0A%20%20%20%20crop%2Ex%20%2A%3D%20resolution%3B%0A%20%20%20%20crop%2Ey%20%2A%3D%20resolution%3B%0A%20%20%20%20crop%2Ewidth%20%2A%3D%20resolution%3B%0A%20%20%20%20crop%2Eheight%20%2A%3D%20resolution%3B%0A%0A%20%20%20%20canvas%2Ewidth%20%3D%20crop%2Ewidth%3B%0A%20%20%20%20canvas%2Eheight%20%3D%20crop%2Eheight%3B%0A%0A%20%20%20%20context%2EfillStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20color%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%0A%20%20%20%20context%2EfillRect%280%2C%200%2C%20crop%2Ewidth%2C%20crop%2Eheight%29%3B%0A%0A%20%20%20%20context%2EglobalCompositeOperation%20%3D%20%27multiply%27%3B%0A%0A%20%20%20%20context%2EdrawImage%28%0A%20%20%20%20%20%20%20%20texture%2EbaseTexture%2Esource%2C%0A%20%20%20%20%20%20%20%20crop%2Ex%2C%0A%20%20%20%20%20%20%20%20crop%2Ey%2C%0A%20%20%20%20%20%20%20%20crop%2Ewidth%2C%0A%20%20%20%20%20%20%20%20crop%2Eheight%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20crop%2Ewidth%2C%0A%20%20%20%20%20%20%20%20crop%2Eheight%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20context%2EglobalCompositeOperation%20%3D%20%27destination%2Datop%27%3B%0A%0A%20%20%20%20context%2EdrawImage%28%0A%20%20%20%20%20%20%20%20texture%2EbaseTexture%2Esource%2C%0A%20%20%20%20%20%20%20%20crop%2Ex%2C%0A%20%20%20%20%20%20%20%20crop%2Ey%2C%0A%20%20%20%20%20%20%20%20crop%2Ewidth%2C%0A%20%20%20%20%20%20%20%20crop%2Eheight%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20crop%2Ewidth%2C%0A%20%20%20%20%20%20%20%20crop%2Eheight%0A%20%20%20%20%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Tint%20a%20texture%20using%20the%20%27overlay%27%20operation%2E%0A%20%2A%0A%20%2A%20%40param%20texture%20%7BPIXI%2ETexture%7D%20the%20texture%20to%20tint%0A%20%2A%20%40param%20color%20%7Bnumber%7D%20the%20color%20to%20use%20to%20tint%20the%20sprite%20with%0A%20%2A%20%40param%20canvas%20%7BHTMLCanvasElement%7D%20the%20current%20canvas%0A%20%2A%2F%0ACanvasTinter%2EtintWithOverlay%20%3D%20function%20%28texture%2C%20color%2C%20canvas%29%0A%7B%0A%20%20%20%20var%20context%20%3D%20canvas%2EgetContext%28%20%272d%27%20%29%3B%0A%0A%20%20%20%20var%20resolution%20%3D%20texture%2EbaseTexture%2Eresolution%3B%0A%0A%20%20%20%20var%20crop%20%3D%20texture%2Ecrop%2Eclone%28%29%3B%0A%20%20%20%20crop%2Ex%20%2A%3D%20resolution%3B%0A%20%20%20%20crop%2Ey%20%2A%3D%20resolution%3B%0A%20%20%20%20crop%2Ewidth%20%2A%3D%20resolution%3B%0A%20%20%20%20crop%2Eheight%20%2A%3D%20resolution%3B%0A%0A%20%20%20%20canvas%2Ewidth%20%3D%20crop%2Ewidth%3B%0A%20%20%20%20canvas%2Eheight%20%3D%20crop%2Eheight%3B%0A%0A%20%20%20%20context%2EglobalCompositeOperation%20%3D%20%27copy%27%3B%0A%20%20%20%20context%2EfillStyle%20%3D%20%27%23%27%20%2B%20%28%2700000%27%20%2B%20%28%20color%20%7C%200%29%2EtoString%2816%29%29%2Esubstr%28%2D6%29%3B%0A%20%20%20%20context%2EfillRect%280%2C%200%2C%20crop%2Ewidth%2C%20crop%2Eheight%29%3B%0A%0A%20%20%20%20context%2EglobalCompositeOperation%20%3D%20%27destination%2Datop%27%3B%0A%20%20%20%20context%2EdrawImage%28%0A%20%20%20%20%20%20%20%20texture%2EbaseTexture%2Esource%2C%0A%20%20%20%20%20%20%20%20crop%2Ex%2C%0A%20%20%20%20%20%20%20%20crop%2Ey%2C%0A%20%20%20%20%20%20%20%20crop%2Ewidth%2C%0A%20%20%20%20%20%20%20%20crop%2Eheight%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20crop%2Ewidth%2C%0A%20%20%20%20%20%20%20%20crop%2Eheight%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20%2F%2F%20context%2EglobalCompositeOperation%20%3D%20%27copy%27%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Tint%20a%20texture%20pixel%20per%20pixel%2E%0A%20%2A%0A%20%2A%20%40param%20texture%20%7BPIXI%2ETexture%7D%20the%20texture%20to%20tint%0A%20%2A%20%40param%20color%20%7Bnumber%7D%20the%20color%20to%20use%20to%20tint%20the%20sprite%20with%0A%20%2A%20%40param%20canvas%20%7BHTMLCanvasElement%7D%20the%20current%20canvas%0A%20%2A%2F%0ACanvasTinter%2EtintWithPerPixel%20%3D%20function%20%28texture%2C%20color%2C%20canvas%29%0A%7B%0A%20%20%20%20var%20context%20%3D%20canvas%2EgetContext%28%20%272d%27%20%29%3B%0A%0A%20%20%20%20var%20resolution%20%3D%20texture%2EbaseTexture%2Eresolution%3B%0A%0A%20%20%20%20var%20crop%20%3D%20texture%2Ecrop%2Eclone%28%29%3B%0A%20%20%20%20crop%2Ex%20%2A%3D%20resolution%3B%0A%20%20%20%20crop%2Ey%20%2A%3D%20resolution%3B%0A%20%20%20%20crop%2Ewidth%20%2A%3D%20resolution%3B%0A%20%20%20%20crop%2Eheight%20%2A%3D%20resolution%3B%0A%0A%20%20%20%20canvas%2Ewidth%20%3D%20crop%2Ewidth%3B%0A%20%20%20%20canvas%2Eheight%20%3D%20crop%2Eheight%3B%0A%0A%20%20%20%20context%2EglobalCompositeOperation%20%3D%20%27copy%27%3B%0A%20%20%20%20context%2EdrawImage%28%0A%20%20%20%20%20%20%20%20texture%2EbaseTexture%2Esource%2C%0A%20%20%20%20%20%20%20%20crop%2Ex%2C%0A%20%20%20%20%20%20%20%20crop%2Ey%2C%0A%20%20%20%20%20%20%20%20crop%2Ewidth%2C%0A%20%20%20%20%20%20%20%20crop%2Eheight%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20crop%2Ewidth%2C%0A%20%20%20%20%20%20%20%20crop%2Eheight%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20var%20rgbValues%20%3D%20utils%2Ehex2rgb%28color%29%3B%0A%20%20%20%20var%20r%20%3D%20rgbValues%5B0%5D%2C%20g%20%3D%20rgbValues%5B1%5D%2C%20b%20%3D%20rgbValues%5B2%5D%3B%0A%0A%20%20%20%20var%20pixelData%20%3D%20context%2EgetImageData%280%2C%200%2C%20crop%2Ewidth%2C%20crop%2Eheight%29%3B%0A%0A%20%20%20%20var%20pixels%20%3D%20pixelData%2Edata%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20pixels%2Elength%3B%20i%20%2B%3D%204%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20pixels%5Bi%2B0%5D%20%2A%3D%20r%3B%0A%20%20%20%20%20%20%20%20pixels%5Bi%2B1%5D%20%2A%3D%20g%3B%0A%20%20%20%20%20%20%20%20pixels%5Bi%2B2%5D%20%2A%3D%20b%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20context%2EputImageData%28pixelData%2C%200%2C%200%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Rounds%20the%20specified%20color%20according%20to%20the%20CanvasTinter%2EcacheStepsPerColorChannel%2E%0A%20%2A%0A%20%2A%20%40param%20color%20%7Bnumber%7D%20the%20color%20to%20round%2C%20should%20be%20a%20hex%20color%0A%20%2A%2F%0ACanvasTinter%2EroundColor%20%3D%20function%20%28color%29%0A%7B%0A%20%20%20%20var%20step%20%3D%20CanvasTinter%2EcacheStepsPerColorChannel%3B%0A%0A%20%20%20%20var%20rgbValues%20%3D%20utils%2Ehex2rgb%28color%29%3B%0A%0A%20%20%20%20rgbValues%5B0%5D%20%3D%20Math%2Emin%28255%2C%20%28rgbValues%5B0%5D%20%2F%20step%29%20%2A%20step%29%3B%0A%20%20%20%20rgbValues%5B1%5D%20%3D%20Math%2Emin%28255%2C%20%28rgbValues%5B1%5D%20%2F%20step%29%20%2A%20step%29%3B%0A%20%20%20%20rgbValues%5B2%5D%20%3D%20Math%2Emin%28255%2C%20%28rgbValues%5B2%5D%20%2F%20step%29%20%2A%20step%29%3B%0A%0A%20%20%20%20return%20utils%2Ergb2hex%28rgbValues%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Number%20of%20steps%20which%20will%20be%20used%20as%20a%20cap%20when%20rounding%20colors%2E%0A%20%2A%0A%20%2A%20%40member%0A%20%2A%2F%0ACanvasTinter%2EcacheStepsPerColorChannel%20%3D%208%3B%0A%0A%2F%2A%2A%0A%20%2A%20Tint%20cache%20boolean%20flag%2E%0A%20%2A%0A%20%2A%20%40member%0A%20%2A%2F%0ACanvasTinter%2EconvertTintToImage%20%3D%20false%3B%0A%0A%2F%2A%2A%0A%20%2A%20Whether%20or%20not%20the%20Canvas%20BlendModes%20are%20supported%2C%20consequently%20the%20ability%20to%20tint%20using%20the%20multiply%20method%2E%0A%20%2A%0A%20%2A%20%40member%0A%20%2A%2F%0ACanvasTinter%2EcanUseMultiply%20%3D%20utils%2EcanUseNewCanvasBlendModes%28%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20tinting%20method%20that%20will%20be%20used%2E%0A%20%2A%0A%20%2A%2F%0ACanvasTinter%2EtintMethod%20%3D%20CanvasTinter%2EcanUseMultiply%20%3F%20CanvasTinter%2EtintWithMultiply%20%3A%20%20CanvasTinter%2EtintWithPerPixel%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2F%2E%2E%2Futils%22%3A70%7D%5D%2C42%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20SystemRenderer%20%3D%20require%28%27%2E%2E%2FSystemRenderer%27%29%2C%0A%20%20%20%20ShaderManager%20%3D%20require%28%27%2E%2Fmanagers%2FShaderManager%27%29%2C%0A%20%20%20%20MaskManager%20%3D%20require%28%27%2E%2Fmanagers%2FMaskManager%27%29%2C%0A%20%20%20%20StencilManager%20%3D%20require%28%27%2E%2Fmanagers%2FStencilManager%27%29%2C%0A%20%20%20%20FilterManager%20%3D%20require%28%27%2E%2Fmanagers%2FFilterManager%27%29%2C%0A%20%20%20%20BlendModeManager%20%3D%20require%28%27%2E%2Fmanagers%2FBlendModeManager%27%29%2C%0A%20%20%20%20RenderTarget%20%3D%20require%28%27%2E%2Futils%2FRenderTarget%27%29%2C%0A%20%20%20%20ObjectRenderer%20%3D%20require%28%27%2E%2Futils%2FObjectRenderer%27%29%2C%0A%20%20%20%20FXAAFilter%20%3D%20require%28%27%2E%2Ffilters%2FFXAAFilter%27%29%2C%0A%20%20%20%20utils%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Futils%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20WebGLRenderer%20draws%20the%20scene%20and%20all%20its%20content%20onto%20a%20webGL%20enabled%20canvas%2E%20This%20renderer%0A%20%2A%20should%20be%20used%20for%20browsers%20that%20support%20webGL%2E%20This%20Render%20works%20by%20automatically%20managing%20webGLBatchs%2E%0A%20%2A%20So%20no%20need%20for%20Sprite%20Batches%20or%20Sprite%20Clouds%2E%0A%20%2A%20Don%27t%20forget%20to%20add%20the%20view%20to%20your%20DOM%20or%20you%20will%20not%20see%20anything%20%3A%29%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40extends%20PIXI%2ESystemRenderer%0A%20%2A%20%40param%20%5Bwidth%3D0%5D%20%7Bnumber%7D%20the%20width%20of%20the%20canvas%20view%0A%20%2A%20%40param%20%5Bheight%3D0%5D%20%7Bnumber%7D%20the%20height%20of%20the%20canvas%20view%0A%20%2A%20%40param%20%5Boptions%5D%20%7Bobject%7D%20The%20optional%20renderer%20parameters%0A%20%2A%20%40param%20%5Boptions%2Eview%5D%20%7BHTMLCanvasElement%7D%20the%20canvas%20to%20use%20as%20a%20view%2C%20optional%0A%20%2A%20%40param%20%5Boptions%2Etransparent%3Dfalse%5D%20%7Bboolean%7D%20If%20the%20render%20view%20is%20transparent%2C%20default%20false%0A%20%2A%20%40param%20%5Boptions%2EautoResize%3Dfalse%5D%20%7Bboolean%7D%20If%20the%20render%20view%20is%20automatically%20resized%2C%20default%20false%0A%20%2A%20%40param%20%5Boptions%2Eantialias%3Dfalse%5D%20%7Bboolean%7D%20sets%20antialias%2E%20If%20not%20available%20natively%20then%20FXAA%20antialiasing%20is%20used%0A%20%2A%20%40param%20%5Boptions%2EforceFXAA%3Dfalse%5D%20%7Bboolean%7D%20forces%20FXAA%20antialiasing%20to%20be%20used%20over%20native%2E%20FXAA%20is%20faster%2C%20but%20may%20not%20always%20look%20as%20great%0A%20%2A%20%40param%20%5Boptions%2Eresolution%3D1%5D%20%7Bnumber%7D%20the%20resolution%20of%20the%20renderer%20retina%20would%20be%202%0A%20%2A%20%40param%20%5Boptions%2EclearBeforeRender%3Dtrue%5D%20%7Bboolean%7D%20This%20sets%20if%20the%20CanvasRenderer%20will%20clear%20the%20canvas%20or%0A%20%2A%20%20%20%20%20%20not%20before%20the%20new%20render%20pass%2E%20If%20you%20wish%20to%20set%20this%20to%20false%2C%20you%20%2Amust%2A%20set%20preserveDrawingBuffer%20to%20%60true%60%2E%0A%20%2A%20%40param%20%5Boptions%2EpreserveDrawingBuffer%3Dfalse%5D%20%7Bboolean%7D%20enables%20drawing%20buffer%20preservation%2C%20enable%20this%20if%0A%20%2A%20%20%20%20%20%20you%20need%20to%20call%20toDataUrl%20on%20the%20webgl%20context%2E%0A%20%2A%20%40param%20%5Boptions%2EroundPixels%3Dfalse%5D%20%7Bboolean%7D%20If%20true%20Pixi%20will%20Math%2Efloor%28%29%20x%2Fy%20values%20when%20rendering%2C%20stopping%20pixel%20interpolation%2E%0A%20%2A%2F%0Afunction%20WebGLRenderer%28width%2C%20height%2C%20options%29%0A%7B%0A%20%20%20%20options%20%3D%20options%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20SystemRenderer%2Ecall%28this%2C%20%27WebGL%27%2C%20width%2C%20height%2C%20options%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20type%20of%20this%20renderer%20as%20a%20standardised%20const%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etype%20%3D%20CONST%2ERENDERER%5FTYPE%2EWEBGL%3B%0A%0A%20%20%20%20this%2EhandleContextLost%20%3D%20this%2EhandleContextLost%2Ebind%28this%29%3B%0A%20%20%20%20this%2EhandleContextRestored%20%3D%20this%2EhandleContextRestored%2Ebind%28this%29%3B%0A%0A%20%20%20%20this%2Eview%2EaddEventListener%28%27webglcontextlost%27%2C%20this%2EhandleContextLost%2C%20false%29%3B%0A%20%20%20%20this%2Eview%2EaddEventListener%28%27webglcontextrestored%27%2C%20this%2EhandleContextRestored%2C%20false%29%3B%0A%0A%20%20%20%20%2F%2FTODO%20possibility%20to%20force%20FXAA%20as%20it%20may%20offer%20better%20performance%3F%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Does%20it%20use%20FXAA%20%3F%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FuseFXAA%20%3D%20%21%21options%2EforceFXAA%20%26%26%20options%2Eantialias%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20fxaa%20filter%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EFXAAFilter%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FFXAAFilter%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20options%20passed%20in%20to%20create%20a%20new%20webgl%20context%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FcontextOptions%20%3D%20%7B%0A%20%20%20%20%20%20%20%20alpha%3A%20this%2Etransparent%2C%0A%20%20%20%20%20%20%20%20antialias%3A%20options%2Eantialias%2C%0A%20%20%20%20%20%20%20%20premultipliedAlpha%3A%20this%2Etransparent%20%26%26%20this%2Etransparent%20%21%3D%3D%20%27notMultiplied%27%2C%0A%20%20%20%20%20%20%20%20stencil%3A%20true%2C%0A%20%20%20%20%20%20%20%20preserveDrawingBuffer%3A%20options%2EpreserveDrawingBuffer%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Counter%20for%20the%20number%20of%20draws%20made%20each%20frame%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EdrawCount%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Deals%20with%20managing%20the%20shader%20programs%20and%20their%20attribs%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EShaderManager%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EshaderManager%20%3D%20new%20ShaderManager%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Manages%20the%20masks%20using%20the%20stencil%20buffer%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EMaskManager%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EmaskManager%20%3D%20new%20MaskManager%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Manages%20the%20stencil%20buffer%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EStencilManager%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EstencilManager%20%3D%20new%20StencilManager%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Manages%20the%20filters%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EFilterManager%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EfilterManager%20%3D%20new%20FilterManager%28this%29%3B%0A%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Manages%20the%20blendModes%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EBlendModeManager%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EblendModeManager%20%3D%20new%20BlendModeManager%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Holds%20the%20current%20render%20target%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERenderTarget%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcurrentRenderTarget%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20currently%20active%20ObjectRenderer%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EObjectRenderer%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcurrentRenderer%20%3D%20new%20ObjectRenderer%28this%29%3B%0A%0A%20%20%20%20this%2EinitPlugins%28%29%3B%0A%0A%20%20%20%20%2F%2F%20initialize%20the%20context%20so%20it%20is%20ready%20for%20the%20managers%2E%0A%20%20%20%20this%2E%5FcreateContext%28%29%3B%0A%20%20%20%20this%2E%5FinitContext%28%29%3B%0A%0A%20%20%20%20%2F%2F%20map%20some%20webGL%20blend%20modes%2E%2E%0A%20%20%20%20this%2E%5FmapGlModes%28%29%3B%0A%0A%20%20%20%20%2F%2F%20track%20textures%20in%20the%20renderer%20so%20we%20can%20no%20longer%20listen%20to%20them%20on%20destruction%2E%0A%20%20%20%20this%2E%5FmanagedTextures%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20An%20array%20of%20render%20targets%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERenderTarget%5B%5D%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FrenderTargetStack%20%3D%20%5B%5D%3B%0A%7D%0A%0A%2F%2F%20constructor%0AWebGLRenderer%2Eprototype%20%3D%20Object%2Ecreate%28SystemRenderer%2Eprototype%29%3B%0AWebGLRenderer%2Eprototype%2Econstructor%20%3D%20WebGLRenderer%3B%0Amodule%2Eexports%20%3D%20WebGLRenderer%3B%0Autils%2EpluginTarget%2Emixin%28WebGLRenderer%29%3B%0A%0AWebGLRenderer%2EglContextId%20%3D%200%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20the%20gl%20context%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2E%5FcreateContext%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Eview%2EgetContext%28%27webgl%27%2C%20this%2E%5FcontextOptions%29%20%7C%7C%20this%2Eview%2EgetContext%28%27experimental%2Dwebgl%27%2C%20this%2E%5FcontextOptions%29%3B%0A%20%20%20%20this%2Egl%20%3D%20gl%3B%0A%0A%20%20%20%20if%20%28%21gl%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20fail%2C%20not%20able%20to%20get%20a%20context%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27This%20browser%20does%20not%20support%20webGL%2E%20Try%20using%20the%20canvas%20renderer%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EglContextId%20%3D%20WebGLRenderer%2EglContextId%2B%2B%3B%0A%20%20%20%20gl%2Eid%20%3D%20this%2EglContextId%3B%0A%20%20%20%20gl%2Erenderer%20%3D%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20the%20WebGL%20context%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2E%5FinitContext%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20%2F%2F%20set%20up%20the%20default%20pixi%20settings%2E%2E%0A%20%20%20%20gl%2Edisable%28gl%2EDEPTH%5FTEST%29%3B%0A%20%20%20%20gl%2Edisable%28gl%2ECULL%5FFACE%29%3B%0A%20%20%20%20gl%2Eenable%28gl%2EBLEND%29%3B%0A%0A%20%20%20%20this%2ErenderTarget%20%3D%20new%20RenderTarget%28gl%2C%20this%2Ewidth%2C%20this%2Eheight%2C%20null%2C%20this%2Eresolution%2C%20true%29%3B%0A%0A%20%20%20%20this%2EsetRenderTarget%28this%2ErenderTarget%29%3B%0A%0A%20%20%20%20this%2Eemit%28%27context%27%2C%20gl%29%3B%0A%0A%20%20%20%20%2F%2F%20setup%20the%20width%2Fheight%20properties%20and%20gl%20viewport%0A%20%20%20%20this%2Eresize%28this%2Ewidth%2C%20this%2Eheight%29%3B%0A%0A%20%20%20%20if%28%21this%2E%5FuseFXAA%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FuseFXAA%20%3D%20%28this%2E%5FcontextOptions%2Eantialias%20%26%26%20%21%20gl%2EgetContextAttributes%28%29%2Eantialias%29%3B%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20if%28this%2E%5FuseFXAA%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20window%2Econsole%2Ewarn%28%27FXAA%20antialiasing%20being%20used%20instead%20of%20native%20antialiasing%27%29%3B%0A%20%20%20%20%20%20%20%20this%2E%5FFXAAFilter%20%3D%20%5Bnew%20FXAAFilter%28%29%5D%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20to%20its%20webGL%20view%0A%20%2A%0A%20%2A%20%40param%20object%20%7BPIXI%2EDisplayObject%7D%20the%20object%20to%20be%20rendered%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2Erender%20%3D%20function%20%28object%29%0A%7B%0A%0A%20%20%20%20this%2Eemit%28%27prerender%27%29%3B%0A%0A%20%20%20%20%2F%2F%20no%20point%20rendering%20if%20our%20context%20has%20been%20blown%20up%21%0A%20%20%20%20if%20%28this%2Egl%2EisContextLost%28%29%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EdrawCount%20%3D%200%3B%0A%0A%20%20%20%20this%2E%5FlastObjectRendered%20%3D%20object%3B%0A%0A%20%20%20%20if%28this%2E%5FuseFXAA%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FFXAAFilter%5B0%5D%2Euniforms%2Eresolution%2Evalue%2Ex%20%3D%20this%2Ewidth%3B%0A%20%20%20%20%20%20%20%20this%2E%5FFXAAFilter%5B0%5D%2Euniforms%2Eresolution%2Evalue%2Ey%20%3D%20this%2Eheight%3B%0A%20%20%20%20%20%20%20%20object%2EfilterArea%20%3D%20this%2ErenderTarget%2Esize%3B%0A%20%20%20%20%20%20%20%20object%2Efilters%20%3D%20this%2E%5FFXAAFilter%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20cacheParent%20%3D%20object%2Eparent%3B%0A%20%20%20%20object%2Eparent%20%3D%20this%2E%5FtempDisplayObjectParent%3B%0A%0A%20%20%20%20%2F%2F%20update%20the%20scene%20graph%0A%20%20%20%20object%2EupdateTransform%28%29%3B%0A%0A%20%20%20%20object%2Eparent%20%3D%20cacheParent%3B%0A%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20%2F%2F%20make%20sure%20we%20are%20bound%20to%20the%20main%20frame%20buffer%0A%20%20%20%20this%2EsetRenderTarget%28this%2ErenderTarget%29%3B%0A%0A%20%20%20%20if%20%28this%2EclearBeforeRender%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2Etransparent%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EclearColor%280%2C%200%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EclearColor%28this%2E%5FbackgroundColorRgb%5B0%5D%2C%20this%2E%5FbackgroundColorRgb%5B1%5D%2C%20this%2E%5FbackgroundColorRgb%5B2%5D%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20gl%2Eclear%28gl%2ECOLOR%5FBUFFER%5FBIT%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2ErenderDisplayObject%28object%2C%20this%2ErenderTarget%29%3B%2F%2Fthis%2Eprojection%29%3B%0A%0A%20%20%20%20this%2Eemit%28%27postrender%27%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20a%20Display%20Object%2E%0A%20%2A%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EDisplayObject%7D%20The%20DisplayObject%20to%20render%0A%20%2A%20%40param%20renderTarget%20%7BPIXI%2ERenderTarget%7D%20The%20render%20target%20to%20use%20to%20render%20this%20display%20object%0A%20%2A%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2ErenderDisplayObject%20%3D%20function%20%28displayObject%2C%20renderTarget%2C%20clear%29%2F%2Fprojection%2C%20buffer%29%0A%7B%0A%20%20%20%20%2F%2F%20TODO%20is%20this%20needed%2E%2E%2E%0A%20%20%20%20%2F%2Fthis%2EblendModeManager%2EsetBlendMode%28CONST%2EBLEND%5FMODES%2ENORMAL%29%3B%0A%20%20%20%20this%2EsetRenderTarget%28renderTarget%29%3B%0A%0A%20%20%20%20if%28clear%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20renderTarget%2Eclear%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20start%20the%20filter%20manager%0A%20%20%20%20this%2EfilterManager%2EsetFilterStack%28%20renderTarget%2EfilterStack%20%29%3B%0A%0A%20%20%20%20%2F%2F%20render%20the%20scene%21%0A%20%20%20%20displayObject%2ErenderWebGL%28this%29%3B%0A%0A%20%20%20%20%2F%2F%20finish%20the%20current%20renderer%2E%2E%0A%20%20%20%20this%2EcurrentRenderer%2Eflush%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Changes%20the%20current%20renderer%20to%20the%20one%20given%20in%20parameter%0A%20%2A%0A%20%2A%20%40param%20objectRenderer%20%7BPIXI%2EObjectRenderer%7D%20The%20object%20renderer%20to%20use%2E%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2EsetObjectRenderer%20%3D%20function%20%28objectRenderer%29%0A%7B%0A%20%20%20%20if%20%28this%2EcurrentRenderer%20%3D%3D%3D%20objectRenderer%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EcurrentRenderer%2Estop%28%29%3B%0A%20%20%20%20this%2EcurrentRenderer%20%3D%20objectRenderer%3B%0A%20%20%20%20this%2EcurrentRenderer%2Estart%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Changes%20the%20current%20render%20target%20to%20the%20one%20given%20in%20parameter%0A%20%2A%0A%20%2A%20%40param%20renderTarget%20%7BPIXI%2ERenderTarget%7D%20the%20new%20render%20target%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2EsetRenderTarget%20%3D%20function%20%28renderTarget%29%0A%7B%0A%20%20%20%20if%28%20this%2EcurrentRenderTarget%20%3D%3D%3D%20renderTarget%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20TODO%20%2D%20maybe%20down%20the%20line%20this%20should%20be%20a%20push%20pos%20thing%3F%20Leaving%20for%20now%20though%2E%0A%20%20%20%20this%2EcurrentRenderTarget%20%3D%20renderTarget%3B%0A%20%20%20%20this%2EcurrentRenderTarget%2Eactivate%28%29%3B%0A%20%20%20%20this%2EstencilManager%2EsetMaskStack%28%20renderTarget%2EstencilMaskStack%20%29%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Resizes%20the%20webGL%20view%20to%20the%20specified%20width%20and%20height%2E%0A%20%2A%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20the%20new%20width%20of%20the%20webGL%20view%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20the%20new%20height%20of%20the%20webGL%20view%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2Eresize%20%3D%20function%20%28width%2C%20height%29%0A%7B%0A%20%20%20%20SystemRenderer%2Eprototype%2Eresize%2Ecall%28this%2C%20width%2C%20height%29%3B%0A%0A%20%20%20%20this%2EfilterManager%2Eresize%28width%2C%20height%29%3B%0A%20%20%20%20this%2ErenderTarget%2Eresize%28width%2C%20height%29%3B%0A%0A%20%20%20%20if%28this%2EcurrentRenderTarget%20%3D%3D%3D%20this%2ErenderTarget%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2ErenderTarget%2Eactivate%28%29%3B%0A%20%20%20%20%20%20%20%20this%2Egl%2Eviewport%280%2C%200%2C%20this%2Ewidth%2C%20this%2Eheight%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20and%2For%20Creates%20a%20WebGL%20texture%20for%20the%20renderer%27s%20context%2E%0A%20%2A%0A%20%2A%20%40param%20texture%20%7BPIXI%2EBaseTexture%7CPIXI%2ETexture%7D%20the%20texture%20to%20update%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2EupdateTexture%20%3D%20function%20%28texture%29%0A%7B%0A%20%20%20%20texture%20%3D%20texture%2EbaseTexture%20%7C%7C%20texture%3B%0A%0A%20%20%20%20if%20%28%21texture%2EhasLoaded%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20if%20%28%21texture%2E%5FglTextures%5Bgl%2Eid%5D%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20texture%2E%5FglTextures%5Bgl%2Eid%5D%20%3D%20gl%2EcreateTexture%28%29%3B%0A%20%20%20%20%20%20%20%20texture%2Eon%28%27update%27%2C%20this%2EupdateTexture%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20texture%2Eon%28%27dispose%27%2C%20this%2EdestroyTexture%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20this%2E%5FmanagedTextures%2Epush%28texture%29%3B%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20gl%2EbindTexture%28gl%2ETEXTURE%5F2D%2C%20texture%2E%5FglTextures%5Bgl%2Eid%5D%29%3B%0A%0A%20%20%20%20gl%2EpixelStorei%28gl%2EUNPACK%5FPREMULTIPLY%5FALPHA%5FWEBGL%2C%20texture%2EpremultipliedAlpha%29%3B%0A%20%20%20%20gl%2EtexImage2D%28gl%2ETEXTURE%5F2D%2C%200%2C%20gl%2ERGBA%2C%20gl%2ERGBA%2C%20gl%2EUNSIGNED%5FBYTE%2C%20texture%2Esource%29%3B%0A%0A%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FMAG%5FFILTER%2C%20texture%2EscaleMode%20%3D%3D%3D%20CONST%2ESCALE%5FMODES%2ELINEAR%20%3F%20gl%2ELINEAR%20%3A%20gl%2ENEAREST%29%3B%0A%0A%0A%20%20%20%20if%20%28texture%2Emipmap%20%26%26%20texture%2EisPowerOfTwo%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FMIN%5FFILTER%2C%20texture%2EscaleMode%20%3D%3D%3D%20CONST%2ESCALE%5FMODES%2ELINEAR%20%3F%20gl%2ELINEAR%5FMIPMAP%5FLINEAR%20%3A%20gl%2ENEAREST%5FMIPMAP%5FNEAREST%29%3B%0A%20%20%20%20%20%20%20%20gl%2EgenerateMipmap%28gl%2ETEXTURE%5F2D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FMIN%5FFILTER%2C%20texture%2EscaleMode%20%3D%3D%3D%20CONST%2ESCALE%5FMODES%2ELINEAR%20%3F%20gl%2ELINEAR%20%3A%20gl%2ENEAREST%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%21texture%2EisPowerOfTwo%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FWRAP%5FS%2C%20gl%2ECLAMP%5FTO%5FEDGE%29%3B%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FWRAP%5FT%2C%20gl%2ECLAMP%5FTO%5FEDGE%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FWRAP%5FS%2C%20gl%2EREPEAT%29%3B%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FWRAP%5FT%2C%20gl%2EREPEAT%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%20texture%2E%5FglTextures%5Bgl%2Eid%5D%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Deletes%20the%20texture%20from%20WebGL%0A%20%2A%0A%20%2A%20%40param%20texture%20%7BPIXI%2EBaseTexture%7CPIXI%2ETexture%7D%20the%20texture%20to%20destroy%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2EdestroyTexture%20%3D%20function%20%28texture%2C%20%5FskipRemove%29%0A%7B%0A%20%20%20%20texture%20%3D%20texture%2EbaseTexture%20%7C%7C%20texture%3B%0A%0A%20%20%20%20if%20%28%21texture%2EhasLoaded%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28texture%2E%5FglTextures%5Bthis%2Egl%2Eid%5D%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Egl%2EdeleteTexture%28texture%2E%5FglTextures%5Bthis%2Egl%2Eid%5D%29%3B%0A%20%20%20%20%20%20%20%20delete%20texture%2E%5FglTextures%5Bthis%2Egl%2Eid%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%21%5FskipRemove%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20i%20%3D%20this%2E%5FmanagedTextures%2EindexOf%28texture%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28i%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20utils%2EremoveItems%28this%2E%5FmanagedTextures%2C%20i%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Handles%20a%20lost%20webgl%20context%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2EhandleContextLost%20%3D%20function%20%28event%29%0A%7B%0A%20%20%20%20event%2EpreventDefault%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Handles%20a%20restored%20webgl%20context%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2EhandleContextRestored%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2E%5FinitContext%28%29%3B%0A%0A%20%20%20%20%2F%2F%20empty%20all%20the%20old%20gl%20textures%20as%20they%20are%20useless%20now%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2E%5FmanagedTextures%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20texture%20%3D%20this%2E%5FmanagedTextures%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28texture%2E%5FglTextures%5Bthis%2Egl%2Eid%5D%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20texture%2E%5FglTextures%5Bthis%2Egl%2Eid%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20everything%20from%20the%20renderer%20%28event%20listeners%2C%20spritebatch%2C%20etc%2E%2E%2E%29%0A%20%2A%0A%20%2A%20%40param%20%5BremoveView%3Dfalse%5D%20%7Bboolean%7D%20Removes%20the%20Canvas%20element%20from%20the%20DOM%2E%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2Edestroy%20%3D%20function%20%28removeView%29%0A%7B%0A%20%20%20%20this%2EdestroyPlugins%28%29%3B%0A%0A%20%20%20%20%2F%2F%20remove%20listeners%0A%20%20%20%20this%2Eview%2EremoveEventListener%28%27webglcontextlost%27%2C%20this%2EhandleContextLost%29%3B%0A%20%20%20%20this%2Eview%2EremoveEventListener%28%27webglcontextrestored%27%2C%20this%2EhandleContextRestored%29%3B%0A%0A%20%20%20%20%2F%2F%20destroy%20managed%20textures%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2E%5FmanagedTextures%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20texture%20%3D%20this%2E%5FmanagedTextures%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20this%2EdestroyTexture%28texture%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20texture%2Eoff%28%27update%27%2C%20this%2EupdateTexture%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20texture%2Eoff%28%27dispose%27%2C%20this%2EdestroyTexture%2C%20this%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20call%20base%20destroy%0A%20%20%20%20SystemRenderer%2Eprototype%2Edestroy%2Ecall%28this%2C%20removeView%29%3B%0A%0A%20%20%20%20this%2Euid%20%3D%200%3B%0A%0A%20%20%20%20%2F%2F%20destroy%20the%20managers%0A%20%20%20%20this%2EshaderManager%2Edestroy%28%29%3B%0A%20%20%20%20this%2EmaskManager%2Edestroy%28%29%3B%0A%20%20%20%20this%2EstencilManager%2Edestroy%28%29%3B%0A%20%20%20%20this%2EfilterManager%2Edestroy%28%29%3B%0A%20%20%20%20this%2EblendModeManager%2Edestroy%28%29%3B%0A%0A%20%20%20%20this%2EshaderManager%20%3D%20null%3B%0A%20%20%20%20this%2EmaskManager%20%3D%20null%3B%0A%20%20%20%20this%2EfilterManager%20%3D%20null%3B%0A%20%20%20%20this%2EblendModeManager%20%3D%20null%3B%0A%20%20%20%20this%2EcurrentRenderer%20%3D%20null%3B%0A%0A%20%20%20%20this%2EhandleContextLost%20%3D%20null%3B%0A%20%20%20%20this%2EhandleContextRestored%20%3D%20null%3B%0A%0A%20%20%20%20this%2E%5FcontextOptions%20%3D%20null%3B%0A%0A%20%20%20%20this%2E%5FmanagedTextures%20%3D%20null%3B%0A%0A%20%20%20%20this%2EdrawCount%20%3D%200%3B%0A%0A%20%20%20%20this%2Egl%2EuseProgram%28null%29%3B%0A%0A%20%20%20%20this%2Egl%20%3D%20null%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Maps%20Pixi%20blend%20modes%20to%20WebGL%20blend%20modes%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AWebGLRenderer%2Eprototype%2E%5FmapGlModes%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20if%20%28%21this%2EblendModes%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EblendModes%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ENORMAL%5D%20%20%20%20%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EADD%5D%20%20%20%20%20%20%20%20%20%20%20%3D%20%5Bgl%2ESRC%5FALPHA%2C%20gl%2EDST%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EMULTIPLY%5D%20%20%20%20%20%20%3D%20%5Bgl%2EDST%5FCOLOR%2C%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ESCREEN%5D%20%20%20%20%20%20%20%20%3D%20%5Bgl%2ESRC%5FALPHA%2C%20gl%2EONE%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EOVERLAY%5D%20%20%20%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EDARKEN%5D%20%20%20%20%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ELIGHTEN%5D%20%20%20%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ECOLOR%5FDODGE%5D%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ECOLOR%5FBURN%5D%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EHARD%5FLIGHT%5D%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ESOFT%5FLIGHT%5D%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EDIFFERENCE%5D%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EEXCLUSION%5D%20%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2EHUE%5D%20%20%20%20%20%20%20%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ESATURATION%5D%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ECOLOR%5D%20%20%20%20%20%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%20%20%20%20this%2EblendModes%5BCONST%2EBLEND%5FMODES%2ELUMINOSITY%5D%20%20%20%20%3D%20%5Bgl%2EONE%2C%20%20%20%20%20%20%20gl%2EONE%5FMINUS%5FSRC%5FALPHA%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%21this%2EdrawModes%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EdrawModes%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20this%2EdrawModes%5BCONST%2EDRAW%5FMODES%2EPOINTS%5D%20%20%20%20%20%20%20%20%20%3D%20gl%2EPOINTS%3B%0A%20%20%20%20%20%20%20%20this%2EdrawModes%5BCONST%2EDRAW%5FMODES%2ELINES%5D%20%20%20%20%20%20%20%20%20%20%3D%20gl%2ELINES%3B%0A%20%20%20%20%20%20%20%20this%2EdrawModes%5BCONST%2EDRAW%5FMODES%2ELINE%5FLOOP%5D%20%20%20%20%20%20%3D%20gl%2ELINE%5FLOOP%3B%0A%20%20%20%20%20%20%20%20this%2EdrawModes%5BCONST%2EDRAW%5FMODES%2ELINE%5FSTRIP%5D%20%20%20%20%20%3D%20gl%2ELINE%5FSTRIP%3B%0A%20%20%20%20%20%20%20%20this%2EdrawModes%5BCONST%2EDRAW%5FMODES%2ETRIANGLES%5D%20%20%20%20%20%20%3D%20gl%2ETRIANGLES%3B%0A%20%20%20%20%20%20%20%20this%2EdrawModes%5BCONST%2EDRAW%5FMODES%2ETRIANGLE%5FSTRIP%5D%20%3D%20gl%2ETRIANGLE%5FSTRIP%3B%0A%20%20%20%20%20%20%20%20this%2EdrawModes%5BCONST%2EDRAW%5FMODES%2ETRIANGLE%5FFAN%5D%20%20%20%3D%20gl%2ETRIANGLE%5FFAN%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2F%2E%2E%2Futils%22%3A70%2C%22%2E%2E%2FSystemRenderer%22%3A36%2C%22%2E%2Ffilters%2FFXAAFilter%22%3A44%2C%22%2E%2Fmanagers%2FBlendModeManager%22%3A46%2C%22%2E%2Fmanagers%2FFilterManager%22%3A47%2C%22%2E%2Fmanagers%2FMaskManager%22%3A48%2C%22%2E%2Fmanagers%2FShaderManager%22%3A49%2C%22%2E%2Fmanagers%2FStencilManager%22%3A50%2C%22%2E%2Futils%2FObjectRenderer%22%3A56%2C%22%2E%2Futils%2FRenderTarget%22%3A58%7D%5D%2C43%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20DefaultShader%20%3D%20require%28%27%2E%2E%2Fshaders%2FTextureShader%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20This%20is%20the%20base%20class%20for%20creating%20a%20PIXI%20filter%2E%20Currently%20only%20WebGL%20supports%20filters%2E%0A%20%2A%20If%20you%20want%20to%20make%20a%20custom%20filter%20this%20should%20be%20your%20base%20class%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20vertexSrc%20%7Bstring%7Cstring%5B%5D%7D%20The%20vertex%20shader%20source%20as%20an%20array%20of%20strings%2E%0A%20%2A%20%40param%20fragmentSrc%20%7Bstring%7Cstring%5B%5D%7D%20The%20fragment%20shader%20source%20as%20an%20array%20of%20strings%2E%0A%20%2A%20%40param%20uniforms%20%7Bobject%7D%20An%20object%20containing%20the%20uniforms%20for%20this%20filter%2E%0A%20%2A%2F%0Afunction%20AbstractFilter%28vertexSrc%2C%20fragmentSrc%2C%20uniforms%29%0A%7B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20An%20array%20of%20shaders%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EShader%5B%5D%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eshaders%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20extra%20padding%20that%20the%20filter%20might%20need%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Epadding%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20uniforms%20as%20an%20object%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Euniforms%20%3D%20uniforms%20%7C%7C%20%7B%7D%3B%0A%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20code%20of%20the%20vertex%20shader%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%5B%5D%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EvertexSrc%20%3D%20vertexSrc%20%7C%7C%20DefaultShader%2EdefaultVertexSrc%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20code%20of%20the%20frament%20shader%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%5B%5D%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EfragmentSrc%20%3D%20fragmentSrc%20%7C%7C%20DefaultShader%2EdefaultFragmentSrc%3B%0A%0A%20%20%20%20%2F%2FTODO%20a%20reminder%20%2D%20would%20be%20cool%20to%20have%20lower%20res%20filters%20as%20this%20would%20give%20better%20performance%2E%0A%0A%20%20%20%20%2F%2Ftypeof%20fragmentSrc%20%3D%3D%3D%20%27string%27%20%3F%20fragmentSrc%2Esplit%28%27%27%29%20%3A%20%28fragmentSrc%20%7C%7C%20%5B%5D%29%3B%0A%0A%7D%0A%0AAbstractFilter%2Eprototype%2Econstructor%20%3D%20AbstractFilter%3B%0Amodule%2Eexports%20%3D%20AbstractFilter%3B%0A%0A%2F%2A%2A%0A%20%2A%20Grabs%20a%20shader%20from%20the%20current%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20to%20retrieve%20the%20shader%20from%0A%20%2A%2F%0AAbstractFilter%2Eprototype%2EgetShader%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20renderer%2Egl%3B%0A%0A%20%20%20%20var%20shader%20%3D%20this%2Eshaders%5Bgl%2Eid%5D%3B%0A%0A%20%20%20%20if%20%28%21shader%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20shader%20%3D%20new%20DefaultShader%28renderer%2EshaderManager%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EvertexSrc%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EfragmentSrc%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eattributes%0A%20%20%20%20%20%20%20%20%29%3B%0A%0A%20%20%20%20%20%20%20%20this%2Eshaders%5Bgl%2Eid%5D%20%3D%20shader%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20shader%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20the%20filter%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20to%20retrieve%20the%20filter%20from%0A%20%2A%20%40param%20input%20%7BPIXI%2ERenderTarget%7D%0A%20%2A%20%40param%20output%20%7BPIXI%2ERenderTarget%7D%0A%20%2A%20%40param%20clear%20%7Bboolean%7D%20Whether%20or%20not%20we%20want%20to%20clear%20the%20outputTarget%0A%20%2A%2F%0AAbstractFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%2C%20clear%29%0A%7B%0A%20%20%20%20var%20shader%20%3D%20this%2EgetShader%28renderer%29%3B%0A%0A%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20input%2C%20output%2C%20clear%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Syncs%20a%20uniform%20between%20the%20class%20object%20and%20the%20shaders%2E%0A%20%2A%0A%20%2A%2F%0AAbstractFilter%2Eprototype%2EsyncUniform%20%3D%20function%20%28uniform%29%0A%7B%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20j%20%3D%20this%2Eshaders%2Elength%3B%20i%20%3C%20j%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eshaders%5Bi%5D%2EsyncUniform%28uniform%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fshaders%2FTextureShader%22%3A55%7D%5D%2C44%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20AbstractFilter%20%3D%20require%28%27%2E%2FAbstractFilter%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%20Basic%20FXAA%20implementation%20based%20on%20the%20code%20on%20geeks3d%2Ecom%20with%20the%0A%20%2A%20modification%20that%20the%20texture2DLod%20stuff%20was%20removed%20since%20it%27s%0A%20%2A%20unsupported%20by%20WebGL%2E%0A%20%2A%0A%20%2A%20%2D%2D%0A%20%2A%20From%3A%0A%20%2A%20https%3A%2F%2Fgithub%2Ecom%2Fmitsuhiko%2Fwebgl%2Dmeincraft%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%0A%20%2A%2F%0Afunction%20FXAAFilter%28%29%0A%7B%0A%20%20%20%20AbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20%22%5Cnprecision%20mediump%20float%3B%5Cn%5Cnattribute%20vec2%20aVertexPosition%3B%5Cnattribute%20vec2%20aTextureCoord%3B%5Cnattribute%20vec4%20aColor%3B%5Cn%5Cnuniform%20mat3%20projectionMatrix%3B%5Cnuniform%20vec2%20resolution%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnvarying%20vec2%20vResolution%3B%5Cn%5Cn%2F%2Ftexcoords%20computed%20in%20vertex%20step%5Cn%2F%2Fto%20avoid%20dependent%20texture%20reads%5Cnvarying%20vec2%20v%5FrgbNW%3B%5Cnvarying%20vec2%20v%5FrgbNE%3B%5Cnvarying%20vec2%20v%5FrgbSW%3B%5Cnvarying%20vec2%20v%5FrgbSE%3B%5Cnvarying%20vec2%20v%5FrgbM%3B%5Cn%5Cn%5Cnvoid%20texcoords%28vec2%20fragCoord%2C%20vec2%20resolution%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20out%20vec2%20v%5FrgbNW%2C%20out%20vec2%20v%5FrgbNE%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20out%20vec2%20v%5FrgbSW%2C%20out%20vec2%20v%5FrgbSE%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20out%20vec2%20v%5FrgbM%29%20%7B%5Cn%20%20%20%20vec2%20inverseVP%20%3D%201%2E0%20%2F%20resolution%2Exy%3B%5Cn%20%20%20%20v%5FrgbNW%20%3D%20%28fragCoord%20%2B%20vec2%28%2D1%2E0%2C%20%2D1%2E0%29%29%20%2A%20inverseVP%3B%5Cn%20%20%20%20v%5FrgbNE%20%3D%20%28fragCoord%20%2B%20vec2%281%2E0%2C%20%2D1%2E0%29%29%20%2A%20inverseVP%3B%5Cn%20%20%20%20v%5FrgbSW%20%3D%20%28fragCoord%20%2B%20vec2%28%2D1%2E0%2C%201%2E0%29%29%20%2A%20inverseVP%3B%5Cn%20%20%20%20v%5FrgbSE%20%3D%20%28fragCoord%20%2B%20vec2%281%2E0%2C%201%2E0%29%29%20%2A%20inverseVP%3B%5Cn%20%20%20%20v%5FrgbM%20%3D%20vec2%28fragCoord%20%2A%20inverseVP%29%3B%5Cn%7D%5Cn%5Cnvoid%20main%28void%29%7B%5Cn%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20vec3%28aVertexPosition%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%5Cn%20%20%20vTextureCoord%20%3D%20aTextureCoord%3B%5Cn%20%20%20vColor%20%3D%20vec4%28aColor%2Ergb%20%2A%20aColor%2Ea%2C%20aColor%2Ea%29%3B%5Cn%20%20%20vResolution%20%3D%20resolution%3B%5Cn%5Cn%20%20%20%2F%2Fcompute%20the%20texture%20coords%20and%20send%20them%20to%20varyings%5Cn%20%20%20texcoords%28aTextureCoord%20%2A%20resolution%2C%20resolution%2C%20v%5FrgbNW%2C%20v%5FrgbNE%2C%20v%5FrgbSW%2C%20v%5FrgbSE%2C%20v%5FrgbM%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20lowp%20float%3B%5Cn%5Cn%5Cn%2F%2A%2A%5CnBasic%20FXAA%20implementation%20based%20on%20the%20code%20on%20geeks3d%2Ecom%20with%20the%5Cnmodification%20that%20the%20texture2DLod%20stuff%20was%20removed%20since%20it%27s%5Cnunsupported%20by%20WebGL%2E%5Cn%5Cn%2D%2D%5Cn%5CnFrom%3A%5Cnhttps%3A%2F%2Fgithub%2Ecom%2Fmitsuhiko%2Fwebgl%2Dmeincraft%5Cn%5CnCopyright%20%28c%29%202011%20by%20Armin%20Ronacher%2E%5Cn%5CnSome%20rights%20reserved%2E%5Cn%5CnRedistribution%20and%20use%20in%20source%20and%20binary%20forms%2C%20with%20or%20without%5Cnmodification%2C%20are%20permitted%20provided%20that%20the%20following%20conditions%20are%5Cnmet%3A%5Cn%5Cn%20%20%20%20%2A%20Redistributions%20of%20source%20code%20must%20retain%20the%20above%20copyright%5Cn%20%20%20%20%20%20notice%2C%20this%20list%20of%20conditions%20and%20the%20following%20disclaimer%2E%5Cn%5Cn%20%20%20%20%2A%20Redistributions%20in%20binary%20form%20must%20reproduce%20the%20above%5Cn%20%20%20%20%20%20copyright%20notice%2C%20this%20list%20of%20conditions%20and%20the%20following%5Cn%20%20%20%20%20%20disclaimer%20in%20the%20documentation%20and%2For%20other%20materials%20provided%5Cn%20%20%20%20%20%20with%20the%20distribution%2E%5Cn%5Cn%20%20%20%20%2A%20The%20names%20of%20the%20contributors%20may%20not%20be%20used%20to%20endorse%20or%5Cn%20%20%20%20%20%20promote%20products%20derived%20from%20this%20software%20without%20specific%5Cn%20%20%20%20%20%20prior%20written%20permission%2E%5Cn%5CnTHIS%20SOFTWARE%20IS%20PROVIDED%20BY%20THE%20COPYRIGHT%20HOLDERS%20AND%20CONTRIBUTORS%5Cn%5C%22AS%20IS%5C%22%20AND%20ANY%20EXPRESS%20OR%20IMPLIED%20WARRANTIES%2C%20INCLUDING%2C%20BUT%20NOT%5CnLIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%20MERCHANTABILITY%20AND%20FITNESS%20FOR%5CnA%20PARTICULAR%20PURPOSE%20ARE%20DISCLAIMED%2E%20IN%20NO%20EVENT%20SHALL%20THE%20COPYRIGHT%5CnOWNER%20OR%20CONTRIBUTORS%20BE%20LIABLE%20FOR%20ANY%20DIRECT%2C%20INDIRECT%2C%20INCIDENTAL%2C%5CnSPECIAL%2C%20EXEMPLARY%2C%20OR%20CONSEQUENTIAL%20DAMAGES%20%28INCLUDING%2C%20BUT%20NOT%5CnLIMITED%20TO%2C%20PROCUREMENT%20OF%20SUBSTITUTE%20GOODS%20OR%20SERVICES%3B%20LOSS%20OF%20USE%2C%5CnDATA%2C%20OR%20PROFITS%3B%20OR%20BUSINESS%20INTERRUPTION%29%20HOWEVER%20CAUSED%20AND%20ON%20ANY%5CnTHEORY%20OF%20LIABILITY%2C%20WHETHER%20IN%20CONTRACT%2C%20STRICT%20LIABILITY%2C%20OR%20TORT%5Cn%28INCLUDING%20NEGLIGENCE%20OR%20OTHERWISE%29%20ARISING%20IN%20ANY%20WAY%20OUT%20OF%20THE%20USE%5CnOF%20THIS%20SOFTWARE%2C%20EVEN%20IF%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%20SUCH%20DAMAGE%2E%5Cn%2A%2F%5Cn%5Cn%23ifndef%20FXAA%5FREDUCE%5FMIN%5Cn%20%20%20%20%23define%20FXAA%5FREDUCE%5FMIN%20%20%20%281%2E0%2F%20128%2E0%29%5Cn%23endif%5Cn%23ifndef%20FXAA%5FREDUCE%5FMUL%5Cn%20%20%20%20%23define%20FXAA%5FREDUCE%5FMUL%20%20%20%281%2E0%20%2F%208%2E0%29%5Cn%23endif%5Cn%23ifndef%20FXAA%5FSPAN%5FMAX%5Cn%20%20%20%20%23define%20FXAA%5FSPAN%5FMAX%20%20%20%20%208%2E0%5Cn%23endif%5Cn%5Cn%2F%2Foptimized%20version%20for%20mobile%2C%20where%20dependent%5Cn%2F%2Ftexture%20reads%20can%20be%20a%20bottleneck%5Cnvec4%20fxaa%28sampler2D%20tex%2C%20vec2%20fragCoord%2C%20vec2%20resolution%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20vec2%20v%5FrgbNW%2C%20vec2%20v%5FrgbNE%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20vec2%20v%5FrgbSW%2C%20vec2%20v%5FrgbSE%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20vec2%20v%5FrgbM%29%20%7B%5Cn%20%20%20%20vec4%20color%3B%5Cn%20%20%20%20mediump%20vec2%20inverseVP%20%3D%20vec2%281%2E0%20%2F%20resolution%2Ex%2C%201%2E0%20%2F%20resolution%2Ey%29%3B%5Cn%20%20%20%20vec3%20rgbNW%20%3D%20texture2D%28tex%2C%20v%5FrgbNW%29%2Exyz%3B%5Cn%20%20%20%20vec3%20rgbNE%20%3D%20texture2D%28tex%2C%20v%5FrgbNE%29%2Exyz%3B%5Cn%20%20%20%20vec3%20rgbSW%20%3D%20texture2D%28tex%2C%20v%5FrgbSW%29%2Exyz%3B%5Cn%20%20%20%20vec3%20rgbSE%20%3D%20texture2D%28tex%2C%20v%5FrgbSE%29%2Exyz%3B%5Cn%20%20%20%20vec4%20texColor%20%3D%20texture2D%28tex%2C%20v%5FrgbM%29%3B%5Cn%20%20%20%20vec3%20rgbM%20%20%3D%20texColor%2Exyz%3B%5Cn%20%20%20%20vec3%20luma%20%3D%20vec3%280%2E299%2C%200%2E587%2C%200%2E114%29%3B%5Cn%20%20%20%20float%20lumaNW%20%3D%20dot%28rgbNW%2C%20luma%29%3B%5Cn%20%20%20%20float%20lumaNE%20%3D%20dot%28rgbNE%2C%20luma%29%3B%5Cn%20%20%20%20float%20lumaSW%20%3D%20dot%28rgbSW%2C%20luma%29%3B%5Cn%20%20%20%20float%20lumaSE%20%3D%20dot%28rgbSE%2C%20luma%29%3B%5Cn%20%20%20%20float%20lumaM%20%20%3D%20dot%28rgbM%2C%20%20luma%29%3B%5Cn%20%20%20%20float%20lumaMin%20%3D%20min%28lumaM%2C%20min%28min%28lumaNW%2C%20lumaNE%29%2C%20min%28lumaSW%2C%20lumaSE%29%29%29%3B%5Cn%20%20%20%20float%20lumaMax%20%3D%20max%28lumaM%2C%20max%28max%28lumaNW%2C%20lumaNE%29%2C%20max%28lumaSW%2C%20lumaSE%29%29%29%3B%5Cn%5Cn%20%20%20%20mediump%20vec2%20dir%3B%5Cn%20%20%20%20dir%2Ex%20%3D%20%2D%28%28lumaNW%20%2B%20lumaNE%29%20%2D%20%28lumaSW%20%2B%20lumaSE%29%29%3B%5Cn%20%20%20%20dir%2Ey%20%3D%20%20%28%28lumaNW%20%2B%20lumaSW%29%20%2D%20%28lumaNE%20%2B%20lumaSE%29%29%3B%5Cn%5Cn%20%20%20%20float%20dirReduce%20%3D%20max%28%28lumaNW%20%2B%20lumaNE%20%2B%20lumaSW%20%2B%20lumaSE%29%20%2A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%280%2E25%20%2A%20FXAA%5FREDUCE%5FMUL%29%2C%20FXAA%5FREDUCE%5FMIN%29%3B%5Cn%5Cn%20%20%20%20float%20rcpDirMin%20%3D%201%2E0%20%2F%20%28min%28abs%28dir%2Ex%29%2C%20abs%28dir%2Ey%29%29%20%2B%20dirReduce%29%3B%5Cn%20%20%20%20dir%20%3D%20min%28vec2%28FXAA%5FSPAN%5FMAX%2C%20FXAA%5FSPAN%5FMAX%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20max%28vec2%28%2DFXAA%5FSPAN%5FMAX%2C%20%2DFXAA%5FSPAN%5FMAX%29%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20dir%20%2A%20rcpDirMin%29%29%20%2A%20inverseVP%3B%5Cn%5Cn%20%20%20%20vec3%20rgbA%20%3D%200%2E5%20%2A%20%28%5Cn%20%20%20%20%20%20%20%20texture2D%28tex%2C%20fragCoord%20%2A%20inverseVP%20%2B%20dir%20%2A%20%281%2E0%20%2F%203%2E0%20%2D%200%2E5%29%29%2Exyz%20%2B%5Cn%20%20%20%20%20%20%20%20texture2D%28tex%2C%20fragCoord%20%2A%20inverseVP%20%2B%20dir%20%2A%20%282%2E0%20%2F%203%2E0%20%2D%200%2E5%29%29%2Exyz%29%3B%5Cn%20%20%20%20vec3%20rgbB%20%3D%20rgbA%20%2A%200%2E5%20%2B%200%2E25%20%2A%20%28%5Cn%20%20%20%20%20%20%20%20texture2D%28tex%2C%20fragCoord%20%2A%20inverseVP%20%2B%20dir%20%2A%20%2D0%2E5%29%2Exyz%20%2B%5Cn%20%20%20%20%20%20%20%20texture2D%28tex%2C%20fragCoord%20%2A%20inverseVP%20%2B%20dir%20%2A%200%2E5%29%2Exyz%29%3B%5Cn%5Cn%20%20%20%20float%20lumaB%20%3D%20dot%28rgbB%2C%20luma%29%3B%5Cn%20%20%20%20if%20%28%28lumaB%20%3C%20lumaMin%29%20%7C%7C%20%28lumaB%20%3E%20lumaMax%29%29%5Cn%20%20%20%20%20%20%20%20color%20%3D%20vec4%28rgbA%2C%20texColor%2Ea%29%3B%5Cn%20%20%20%20else%5Cn%20%20%20%20%20%20%20%20color%20%3D%20vec4%28rgbB%2C%20texColor%2Ea%29%3B%5Cn%20%20%20%20return%20color%3B%5Cn%7D%5Cn%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cnvarying%20vec2%20vResolution%3B%5Cn%5Cn%2F%2Ftexcoords%20computed%20in%20vertex%20step%5Cn%2F%2Fto%20avoid%20dependent%20texture%20reads%5Cnvarying%20vec2%20v%5FrgbNW%3B%5Cnvarying%20vec2%20v%5FrgbNE%3B%5Cnvarying%20vec2%20v%5FrgbSW%3B%5Cnvarying%20vec2%20v%5FrgbSE%3B%5Cnvarying%20vec2%20v%5FrgbM%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cn%5Cnvoid%20main%28void%29%7B%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%3D%20fxaa%28uSampler%2C%20vTextureCoord%20%2A%20vResolution%2C%20vResolution%2C%20v%5FrgbNW%2C%20v%5FrgbNE%2C%20v%5FrgbSW%2C%20v%5FrgbSE%2C%20v%5FrgbM%29%3B%5Cn%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resolution%3A%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%201%2C%20y%3A%201%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%0A%7D%0A%0AFXAAFilter%2Eprototype%20%3D%20Object%2Ecreate%28AbstractFilter%2Eprototype%29%3B%0AFXAAFilter%2Eprototype%2Econstructor%20%3D%20FXAAFilter%3B%0Amodule%2Eexports%20%3D%20FXAAFilter%3B%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20the%20filter%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20to%20retrieve%20the%20filter%20from%0A%20%2A%20%40param%20input%20%7BPIXI%2ERenderTarget%7D%0A%20%2A%20%40param%20output%20%7BPIXI%2ERenderTarget%7D%0A%20%2A%2F%0AFXAAFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%29%0A%7B%0A%20%20%20%20var%20filterManager%20%3D%20renderer%2EfilterManager%3B%0A%0A%20%20%20%20var%20shader%20%3D%20this%2EgetShader%28%20renderer%20%29%3B%0A%20%20%20%20%20%2F%2F%20draw%20the%20filter%2E%2E%2E%0A%20%20%20%20filterManager%2EapplyFilter%28shader%2C%20input%2C%20output%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FAbstractFilter%22%3A43%7D%5D%2C45%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20AbstractFilter%20%3D%20require%28%27%2E%2FAbstractFilter%27%29%2C%0A%20%20%20%20math%20%3D%20%20require%28%27%2E%2E%2F%2E%2E%2F%2E%2E%2Fmath%27%29%3B%0A%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20The%20SpriteMaskFilter%20class%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20sprite%20%7BPIXI%2ESprite%7D%20the%20target%20sprite%0A%20%2A%2F%0Afunction%20SpriteMaskFilter%28sprite%29%0A%7B%0A%20%20%20%20var%20maskMatrix%20%3D%20new%20math%2EMatrix%28%29%3B%0A%0A%20%20%20%20AbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%22attribute%20vec2%20aVertexPosition%3B%5Cnattribute%20vec2%20aTextureCoord%3B%5Cnattribute%20vec4%20aColor%3B%5Cn%5Cnuniform%20mat3%20projectionMatrix%3B%5Cnuniform%20mat3%20otherMatrix%3B%5Cn%5Cnvarying%20vec2%20vMaskCoord%3B%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20vec3%28aVertexPosition%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%5Cn%20%20%20%20vTextureCoord%20%3D%20aTextureCoord%3B%5Cn%20%20%20%20vMaskCoord%20%3D%20%28%20otherMatrix%20%2A%20vec3%28%20aTextureCoord%2C%201%2E0%29%20%20%29%2Exy%3B%5Cn%20%20%20%20vColor%20%3D%20vec4%28aColor%2Ergb%20%2A%20aColor%2Ea%2C%20aColor%2Ea%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%22precision%20lowp%20float%3B%5Cn%5Cnvarying%20vec2%20vMaskCoord%3B%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cnuniform%20float%20alpha%3B%5Cnuniform%20sampler2D%20mask%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20%2F%2F%20check%20clip%21%20this%20will%20stop%20the%20mask%20bleeding%20out%20from%20the%20edges%5Cn%20%20%20%20vec2%20text%20%3D%20abs%28%20vMaskCoord%20%2D%200%2E5%20%29%3B%5Cn%20%20%20%20text%20%3D%20step%280%2E5%2C%20text%29%3B%5Cn%20%20%20%20float%20clip%20%3D%201%2E0%20%2D%20max%28text%2Ey%2C%20text%2Ex%29%3B%5Cn%20%20%20%20vec4%20original%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%3B%5Cn%20%20%20%20vec4%20masky%20%3D%20texture2D%28mask%2C%20vMaskCoord%29%3B%5Cn%20%20%20%20original%20%2A%3D%20%28masky%2Er%20%2A%20masky%2Ea%20%2A%20alpha%20%2A%20clip%29%3B%5Cn%20%20%20%20gl%5FFragColor%20%3D%20original%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mask%3A%20%20%20%20%20%20%20%20%20%20%20%7B%20type%3A%20%27sampler2D%27%2C%20value%3A%20sprite%2E%5Ftexture%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20alpha%3A%20%20%20%20%20%20%20%20%20%20%7B%20type%3A%20%27f%27%2C%20value%3A%201%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20otherMatrix%3A%20%20%20%20%7B%20type%3A%20%27mat3%27%2C%20value%3A%20maskMatrix%2EtoArray%28true%29%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20this%2EmaskSprite%20%3D%20sprite%3B%0A%20%20%20%20this%2EmaskMatrix%20%3D%20maskMatrix%3B%0A%7D%0A%0ASpriteMaskFilter%2Eprototype%20%3D%20Object%2Ecreate%28AbstractFilter%2Eprototype%29%3B%0ASpriteMaskFilter%2Eprototype%2Econstructor%20%3D%20SpriteMaskFilter%3B%0Amodule%2Eexports%20%3D%20SpriteMaskFilter%3B%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20the%20filter%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20to%20retrieve%20the%20filter%20from%0A%20%2A%20%40param%20input%20%7BPIXI%2ERenderTarget%7D%0A%20%2A%20%40param%20output%20%7BPIXI%2ERenderTarget%7D%0A%20%2A%2F%0ASpriteMaskFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%29%0A%7B%0A%20%20%20%20var%20filterManager%20%3D%20renderer%2EfilterManager%3B%0A%0A%20%20%20%20this%2Euniforms%2Emask%2Evalue%20%3D%20this%2EmaskSprite%2E%5Ftexture%3B%0A%0A%20%20%20%20filterManager%2EcalculateMappedMatrix%28input%2Eframe%2C%20this%2EmaskSprite%2C%20this%2EmaskMatrix%29%3B%0A%0A%20%20%20%20this%2Euniforms%2EotherMatrix%2Evalue%20%3D%20this%2EmaskMatrix%2EtoArray%28true%29%3B%0A%20%20%20%20this%2Euniforms%2Ealpha%2Evalue%20%3D%20this%2EmaskSprite%2EworldAlpha%3B%0A%0A%20%20%20%20var%20shader%20%3D%20this%2EgetShader%28renderer%29%3B%0A%20%20%20%20%20%2F%2F%20draw%20the%20filter%2E%2E%2E%0A%20%20%20%20filterManager%2EapplyFilter%28shader%2C%20input%2C%20output%29%3B%0A%7D%3B%0A%0A%0AObject%2EdefineProperties%28SpriteMaskFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20texture%20used%20for%20the%20displacement%20map%2E%20Must%20be%20power%20of%202%20sized%20texture%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ETexture%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2ESpriteMaskFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20map%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Emask%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Emask%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20offset%20used%20to%20move%20the%20displacement%20map%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2ESpriteMaskFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20offset%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Eoffset%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Eoffset%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2F%2E%2E%2Fmath%22%3A26%2C%22%2E%2FAbstractFilter%22%3A43%7D%5D%2C46%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20WebGLManager%20%3D%20require%28%27%2E%2FWebGLManager%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40extends%20PIXI%2EWebGlManager%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20this%20manager%20works%20for%2E%0A%20%2A%2F%0Afunction%20BlendModeManager%28renderer%29%0A%7B%0A%20%20%20%20WebGLManager%2Ecall%28this%2C%20renderer%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcurrentBlendMode%20%3D%2099999%3B%0A%7D%0A%0ABlendModeManager%2Eprototype%20%3D%20Object%2Ecreate%28WebGLManager%2Eprototype%29%3B%0ABlendModeManager%2Eprototype%2Econstructor%20%3D%20BlendModeManager%3B%0Amodule%2Eexports%20%3D%20BlendModeManager%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%2Dup%20the%20given%20blendMode%20from%20WebGL%27s%20point%20of%20view%2E%0A%20%2A%0A%20%2A%20%40param%20blendMode%20%7Bnumber%7D%20the%20blendMode%2C%20should%20be%20a%20Pixi%20const%2C%20such%20as%20%60PIXI%2EBLEND%5FMODES%2EADD%60%2E%20See%0A%20%2A%20%20%7B%40link%20PIXI%2EBLEND%5FMODES%7D%20for%20possible%20values%2E%0A%20%2A%2F%0ABlendModeManager%2Eprototype%2EsetBlendMode%20%3D%20function%20%28blendMode%29%0A%7B%0A%20%20%20%20if%20%28this%2EcurrentBlendMode%20%3D%3D%3D%20blendMode%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EcurrentBlendMode%20%3D%20blendMode%3B%0A%0A%20%20%20%20var%20mode%20%3D%20this%2Erenderer%2EblendModes%5Bthis%2EcurrentBlendMode%5D%3B%0A%20%20%20%20this%2Erenderer%2Egl%2EblendFunc%28mode%5B0%5D%2C%20mode%5B1%5D%29%3B%0A%0A%20%20%20%20return%20true%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FWebGLManager%22%3A51%7D%5D%2C47%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20WebGLManager%20%3D%20require%28%27%2E%2FWebGLManager%27%29%2C%0A%20%20%20%20RenderTarget%20%3D%20require%28%27%2E%2E%2Futils%2FRenderTarget%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2F%2E%2E%2Fconst%27%29%2C%0A%20%20%20%20Quad%20%3D%20require%28%27%2E%2E%2Futils%2FQuad%27%29%2C%0A%20%20%20%20math%20%3D%20%20require%28%27%2E%2E%2F%2E%2E%2F%2E%2E%2Fmath%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40extends%20PIXI%2EWebGLManager%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20this%20manager%20works%20for%2E%0A%20%2A%2F%0Afunction%20FilterManager%28renderer%29%0A%7B%0A%20%20%20%20WebGLManager%2Ecall%28this%2C%20renderer%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EfilterStack%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20this%2EfilterStack%2Epush%28%7B%0A%20%20%20%20%20%20%20%20renderTarget%3Arenderer%2EcurrentRenderTarget%2C%0A%20%20%20%20%20%20%20%20filter%3A%5B%5D%2C%0A%20%20%20%20%20%20%20%20bounds%3Anull%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERenderTarget%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EtexturePool%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20size%20of%20the%20texture%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%2F%2F%20listen%20for%20context%20and%20update%20necessary%20buffers%0A%20%20%20%20%2F%2FTODO%20make%20this%20dynamic%21%0A%20%20%20%20%2F%2FTODO%20test%20this%20out%20by%20forces%20power%20of%20two%3F%0A%20%20%20%20this%2EtextureSize%20%3D%20new%20math%2ERectangle%280%2C%200%2C%20renderer%2Ewidth%2C%20renderer%2Eheight%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20current%20frame%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcurrentFrame%20%3D%20null%3B%0A%7D%0A%0AFilterManager%2Eprototype%20%3D%20Object%2Ecreate%28WebGLManager%2Eprototype%29%3B%0AFilterManager%2Eprototype%2Econstructor%20%3D%20FilterManager%3B%0Amodule%2Eexports%20%3D%20FilterManager%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Called%20when%20there%20is%20a%20WebGL%20context%20change%2E%0A%20%2A%0A%20%2A%2F%0AFilterManager%2Eprototype%2EonContextChange%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2EtexturePool%2Elength%20%3D%200%3B%0A%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%20%20%20%20this%2Equad%20%3D%20new%20Quad%28gl%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%0A%20%2A%20%40param%20buffer%20%7BArrayBuffer%7D%0A%20%2A%2F%0AFilterManager%2Eprototype%2EsetFilterStack%20%3D%20function%20%28%20filterStack%20%29%0A%7B%0A%20%20%20%20this%2EfilterStack%20%3D%20filterStack%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20the%20filter%20and%20adds%20it%20to%20the%20current%20filter%20stack%2E%0A%20%2A%0A%20%2A%20%40param%20target%20%7BPIXI%2EDisplayObject%7D%0A%20%2A%20%40param%20filters%20%7BPIXI%2EAbstractFiler%5B%5D%7D%20the%20filters%20that%20will%20be%20pushed%20to%20the%20current%20filter%20stack%0A%20%2A%2F%0AFilterManager%2Eprototype%2EpushFilter%20%3D%20function%20%28target%2C%20filters%29%0A%7B%0A%20%20%20%20%2F%2F%20get%20the%20bounds%20of%20the%20object%2E%2E%0A%20%20%20%20%2F%2F%20TODO%20replace%20clone%20with%20a%20copy%20to%20save%20object%20creation%0A%20%20%20%20var%20bounds%20%3D%20target%2EfilterArea%20%3F%20target%2EfilterArea%2Eclone%28%29%20%3A%20target%2EgetBounds%28%29%3B%0A%0A%20%20%20%20%2F%2Fbounds%20%3D%20bounds%2Eclone%28%29%3B%0A%0A%20%20%20%20%2F%2F%20round%20off%20the%20rectangle%20to%20get%20a%20nice%20smoooooooth%20filter%20%3A%29%0A%20%20%20%20bounds%2Ex%20%3D%20bounds%2Ex%20%7C%200%3B%0A%20%20%20%20bounds%2Ey%20%3D%20bounds%2Ey%20%7C%200%3B%0A%20%20%20%20bounds%2Ewidth%20%3D%20bounds%2Ewidth%20%7C%200%3B%0A%20%20%20%20bounds%2Eheight%20%3D%20bounds%2Eheight%20%7C%200%3B%0A%0A%0A%20%20%20%20%2F%2F%20padding%21%0A%20%20%20%20var%20padding%20%3D%20filters%5B0%5D%2Epadding%20%7C%200%3B%0A%20%20%20%20bounds%2Ex%20%2D%3D%20padding%3B%0A%20%20%20%20bounds%2Ey%20%2D%3D%20padding%3B%0A%20%20%20%20bounds%2Ewidth%20%2B%3D%20padding%20%2A%202%3B%0A%20%20%20%20bounds%2Eheight%20%2B%3D%20padding%20%2A%202%3B%0A%0A%0A%20%20%20%20if%28this%2Erenderer%2EcurrentRenderTarget%2Etransform%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FTODO%20this%20will%20break%20if%20the%20renderTexture%20transform%20is%20anything%20other%20than%20a%20translation%2E%0A%20%20%20%20%20%20%20%20%2F%2FWill%20need%20to%20take%20the%20full%20matrix%20transform%20into%20acount%2E%2E%0A%20%20%20%20%20%20%20%20var%20transform%20%3D%20this%2Erenderer%2EcurrentRenderTarget%2Etransform%3B%0A%0A%20%20%20%20%20%20%20%20bounds%2Ex%20%2B%3D%20transform%2Etx%3B%0A%20%20%20%20%20%20%20%20bounds%2Ey%20%2B%3D%20transform%2Ety%3B%0A%0A%20%20%20%20%20%20%20%20this%2EcapFilterArea%28%20bounds%20%29%3B%0A%0A%20%20%20%20%20%20%20%20bounds%2Ex%20%2D%3D%20transform%2Etx%3B%0A%20%20%20%20%20%20%20%20bounds%2Ey%20%2D%3D%20transform%2Ety%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20this%2EcapFilterArea%28%20bounds%20%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%28bounds%2Ewidth%20%3E%200%20%26%26%20bounds%2Eheight%20%3E%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EcurrentFrame%20%3D%20bounds%3B%0A%0A%20%20%20%20%20%20%20%20var%20texture%20%3D%20this%2EgetRenderTarget%28%29%3B%0A%0A%20%20%20%20%20%20%20%20this%2Erenderer%2EsetRenderTarget%28texture%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20clear%20the%20texture%2E%2E%0A%20%20%20%20%20%20%20%20texture%2Eclear%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%20get%20rid%20of%20object%20creation%21%0A%20%20%20%20%20%20%20%20this%2EfilterStack%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderTarget%3A%20texture%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20filters%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20push%20somthing%20on%20to%20the%20stack%20that%20is%20empty%0A%20%20%20%20%20%20%20%20this%2EfilterStack%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderTarget%3A%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20filters%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20the%20last%20filter%20from%20the%20filter%20stack%20and%20returns%20it%2E%0A%20%2A%0A%20%2A%2F%0AFilterManager%2Eprototype%2EpopFilter%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20filterData%20%3D%20this%2EfilterStack%2Epop%28%29%3B%0A%20%20%20%20var%20previousFilterData%20%3D%20this%2EfilterStack%5Bthis%2EfilterStack%2Elength%2D1%5D%3B%0A%0A%20%20%20%20var%20input%20%3D%20filterData%2ErenderTarget%3B%0A%0A%20%20%20%20%2F%2F%20if%20the%20renderTarget%20is%20null%20then%20we%20don%27t%20apply%20the%20filter%20as%20its%20offscreen%0A%20%20%20%20if%28%21filterData%2ErenderTarget%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20output%20%3D%20previousFilterData%2ErenderTarget%3B%0A%0A%20%20%20%20%2F%2F%20use%20program%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%0A%20%20%20%20this%2EcurrentFrame%20%3D%20input%2Eframe%3B%0A%0A%20%20%20%20this%2Equad%2Emap%28this%2EtextureSize%2C%20input%2Eframe%29%3B%0A%0A%0A%20%20%20%20%2F%2F%20TODO%2E%2E%20this%20probably%20only%20needs%20to%20be%20done%20once%21%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20this%2Equad%2EvertexBuffer%29%3B%0A%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20this%2Equad%2EindexBuffer%29%3B%0A%0A%20%20%20%20var%20filters%20%3D%20filterData%2Efilter%3B%0A%0A%20%20%20%20%2F%2F%20assuming%20all%20filters%20follow%20the%20correct%20format%3F%3F%0A%20%20%20%20gl%2EvertexAttribPointer%28this%2Erenderer%2EshaderManager%2EdefaultShader%2Eattributes%2EaVertexPosition%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%200%2C%200%29%3B%0A%20%20%20%20gl%2EvertexAttribPointer%28this%2Erenderer%2EshaderManager%2EdefaultShader%2Eattributes%2EaTextureCoord%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%200%2C%202%20%2A%204%20%2A%204%29%3B%0A%20%20%20%20gl%2EvertexAttribPointer%28this%2Erenderer%2EshaderManager%2EdefaultShader%2Eattributes%2EaColor%2C%204%2C%20gl%2EFLOAT%2C%20false%2C%200%2C%204%20%2A%204%20%2A%204%29%3B%0A%0A%20%20%20%20%2F%2F%20restore%20the%20normal%20blendmode%21%0A%20%20%20%20this%2Erenderer%2EblendModeManager%2EsetBlendMode%28CONST%2EBLEND%5FMODES%2ENORMAL%29%3B%0A%0A%20%20%20%20if%20%28filters%2Elength%20%3D%3D%3D%201%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%20%28cengler%29%20%2D%20There%20has%20to%20be%20a%20better%20way%20then%20setting%20this%20each%20time%3F%0A%20%20%20%20%20%20%20%20if%20%28filters%5B0%5D%2Euniforms%2Edimensions%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filters%5B0%5D%2Euniforms%2Edimensions%2Evalue%5B0%5D%20%3D%20this%2Erenderer%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20filters%5B0%5D%2Euniforms%2Edimensions%2Evalue%5B1%5D%20%3D%20this%2Erenderer%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20filters%5B0%5D%2Euniforms%2Edimensions%2Evalue%5B2%5D%20%3D%20this%2Equad%2Evertices%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20filters%5B0%5D%2Euniforms%2Edimensions%2Evalue%5B3%5D%20%3D%20this%2Equad%2Evertices%5B5%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20filters%5B0%5D%2EapplyFilter%28%20this%2Erenderer%2C%20input%2C%20output%20%29%3B%0A%20%20%20%20%20%20%20%20this%2EreturnRenderTarget%28%20input%20%29%3B%0A%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20flipTexture%20%3D%20input%3B%0A%20%20%20%20%20%20%20%20var%20flopTexture%20%3D%20this%2EgetRenderTarget%28true%29%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20filters%2Elength%2D1%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20filter%20%3D%20filters%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%20%28cengler%29%20%2D%20There%20has%20to%20be%20a%20better%20way%20then%20setting%20this%20each%20time%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28filter%2Euniforms%2Edimensions%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filter%2Euniforms%2Edimensions%2Evalue%5B0%5D%20%3D%20this%2Erenderer%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filter%2Euniforms%2Edimensions%2Evalue%5B1%5D%20%3D%20this%2Erenderer%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filter%2Euniforms%2Edimensions%2Evalue%5B2%5D%20%3D%20this%2Equad%2Evertices%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filter%2Euniforms%2Edimensions%2Evalue%5B3%5D%20%3D%20this%2Equad%2Evertices%5B5%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%2EapplyFilter%28%20this%2Erenderer%2C%20flipTexture%2C%20flopTexture%20%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20temp%20%3D%20flipTexture%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20flipTexture%20%3D%20flopTexture%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20flopTexture%20%3D%20temp%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20filters%5Bfilters%2Elength%2D1%5D%2EapplyFilter%28%20this%2Erenderer%2C%20flipTexture%2C%20output%20%29%3B%0A%0A%20%20%20%20%20%20%20%20this%2EreturnRenderTarget%28%20flipTexture%20%29%3B%0A%20%20%20%20%20%20%20%20this%2EreturnRenderTarget%28%20flopTexture%20%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20filterData%2Efilter%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Grabs%20an%20render%20target%20from%20the%20internal%20pool%0A%20%2A%0A%20%2A%20%40param%20clear%20%7Bboolean%7D%20Whether%20or%20not%20we%20need%20to%20clear%20the%20RenderTarget%0A%20%2A%20%40return%20%7BRenderTarget%7D%0A%20%2A%2F%0AFilterManager%2Eprototype%2EgetRenderTarget%20%3D%20function%20%28%20clear%20%29%0A%7B%0A%20%20%20%20var%20renderTarget%20%3D%20this%2EtexturePool%2Epop%28%29%20%7C%7C%20new%20RenderTarget%28this%2Erenderer%2Egl%2C%20this%2EtextureSize%2Ewidth%2C%20this%2EtextureSize%2Eheight%2C%20CONST%2ESCALE%5FMODES%2ELINEAR%2C%20this%2Erenderer%2Eresolution%20%2A%20CONST%2EFILTER%5FRESOLUTION%29%3B%0A%20%20%20%20renderTarget%2Eframe%20%3D%20this%2EcurrentFrame%3B%0A%0A%20%20%20%20if%20%28clear%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20renderTarget%2Eclear%28true%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20renderTarget%3B%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Returns%20a%20RenderTarget%20to%20the%20internal%20pool%0A%20%2A%20%40param%20renderTarget%20%7BRenderTarget%7D%20The%20RenderTarget%20we%20want%20to%20return%20to%20the%20pool%0A%20%2A%2F%0AFilterManager%2Eprototype%2EreturnRenderTarget%20%3D%20function%20%28renderTarget%29%0A%7B%0A%20%20%20%20this%2EtexturePool%2Epush%28%20renderTarget%20%29%3B%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Applies%20the%20filter%0A%20%2A%20%40param%20shader%20%7BShader%7D%20The%20shader%20to%20upload%0A%20%2A%20%40param%20inputTarget%20%7BRenderTarget%7D%0A%20%2A%20%40param%20outputTarget%20%7BRenderTarget%7D%0A%20%2A%20%40param%20clear%20%7Bboolean%7D%20Whether%20or%20not%20we%20want%20to%20clear%20the%20outputTarget%0A%20%2A%2F%0AFilterManager%2Eprototype%2EapplyFilter%20%3D%20function%20%28shader%2C%20inputTarget%2C%20outputTarget%2C%20clear%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20this%2Erenderer%2EsetRenderTarget%28outputTarget%29%3B%0A%0A%20%20%20%20if%20%28clear%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20outputTarget%2Eclear%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20set%20the%20shader%0A%20%20%20%20this%2Erenderer%2EshaderManager%2EsetShader%28shader%29%3B%0A%0A%20%20%20%20%2F%2F%20TODO%20%28cengler%29%20%2D%20Can%20this%20be%20cached%20and%20not%20%60toArray%60ed%20each%20frame%3F%0A%20%20%20%20shader%2Euniforms%2EprojectionMatrix%2Evalue%20%3D%20this%2Erenderer%2EcurrentRenderTarget%2EprojectionMatrix%2EtoArray%28true%29%3B%0A%0A%20%20%20%20%2F%2FTODO%20can%20this%20be%20optimised%3F%0A%20%20%20%20shader%2EsyncUniforms%28%29%3B%0A%2F%2A%0A%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaVertexPosition%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%200%2C%200%29%3B%0A%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaTextureCoord%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%200%2C%202%20%2A%204%20%2A%204%29%3B%0A%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaColor%2C%204%2C%20gl%2EFLOAT%2C%20false%2C%200%2C%204%20%2A%204%20%2A%204%29%3B%0A%2A%2F%0A%0A%20%20%20%20gl%2EactiveTexture%28gl%2ETEXTURE0%29%3B%0A%20%20%20%20gl%2EbindTexture%28gl%2ETEXTURE%5F2D%2C%20inputTarget%2Etexture%29%3B%0A%0A%20%20%20%20gl%2EdrawElements%28gl%2ETRIANGLES%2C%206%2C%20gl%2EUNSIGNED%5FSHORT%2C%200%20%29%3B%0A%20%20%20%20this%2Erenderer%2EdrawCount%2B%2B%3B%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Calculates%20the%20mapped%20matrix%0A%20%2A%20%40param%20filterArea%20%7BRectangle%7D%20The%20filter%20area%0A%20%2A%20%40param%20sprite%20%7BSprite%7D%20the%20target%20sprite%0A%20%2A%20%40param%20outputMatrix%20%7BMatrix%7D%20%40alvin%0A%20%2A%2F%0A%2F%2F%20TODO%20playing%20around%20here%2E%2E%20this%20is%20temporary%20%2D%20%28will%20end%20up%20in%20the%20shader%29%0AFilterManager%2Eprototype%2EcalculateMappedMatrix%20%3D%20function%20%28filterArea%2C%20sprite%2C%20outputMatrix%29%0A%7B%0A%20%20%20%20var%20worldTransform%20%3D%20sprite%2EworldTransform%2Ecopy%28math%2EMatrix%2ETEMP%5FMATRIX%29%2C%0A%20%20%20%20texture%20%3D%20sprite%2E%5Ftexture%2EbaseTexture%3B%0A%0A%20%20%20%20var%20mappedMatrix%20%3D%20outputMatrix%2Eidentity%28%29%3B%0A%0A%20%20%20%20%2F%2F%20scale%2E%2E%0A%20%20%20%20var%20ratio%20%3D%20this%2EtextureSize%2Eheight%20%2F%20this%2EtextureSize%2Ewidth%3B%0A%0A%20%20%20%20mappedMatrix%2Etranslate%28filterArea%2Ex%20%2F%20this%2EtextureSize%2Ewidth%2C%20filterArea%2Ey%20%2F%20this%2EtextureSize%2Eheight%20%29%3B%0A%0A%20%20%20%20mappedMatrix%2Escale%281%20%2C%20ratio%29%3B%0A%0A%20%20%20%20var%20translateScaleX%20%3D%20%28this%2EtextureSize%2Ewidth%20%2F%20texture%2Ewidth%29%3B%0A%20%20%20%20var%20translateScaleY%20%3D%20%28this%2EtextureSize%2Eheight%20%2F%20texture%2Eheight%29%3B%0A%0A%20%20%20%20worldTransform%2Etx%20%2F%3D%20texture%2Ewidth%20%2A%20translateScaleX%3B%0A%20%20%20%20worldTransform%2Ety%20%2F%3D%20texture%2Ewidth%20%2A%20translateScaleX%3B%0A%0A%20%20%20%20worldTransform%2Einvert%28%29%3B%0A%0A%20%20%20%20mappedMatrix%2Eprepend%28worldTransform%29%3B%0A%0A%20%20%20%20%2F%2F%20apply%20inverse%20scale%2E%2E%0A%20%20%20%20mappedMatrix%2Escale%281%20%2C%201%2Fratio%29%3B%0A%0A%20%20%20%20mappedMatrix%2Escale%28%20translateScaleX%20%2C%20translateScaleY%20%29%3B%0A%0A%20%20%20%20mappedMatrix%2Etranslate%28sprite%2Eanchor%2Ex%2C%20sprite%2Eanchor%2Ey%29%3B%0A%0A%20%20%20%20return%20mappedMatrix%3B%0A%0A%20%20%20%20%2F%2F%20Keeping%20the%20orginal%20as%20a%20reminder%20to%20me%20on%20how%20this%20works%21%0A%20%20%20%20%2F%2F%0A%20%20%20%20%2F%2F%20var%20m%20%3D%20new%20math%2EMatrix%28%29%3B%0A%0A%20%20%20%20%2F%2F%20%2F%2F%20scale%2E%2E%0A%20%20%20%20%2F%2F%20var%20ratio%20%3D%20this%2EtextureSize%2Eheight%20%2F%20this%2EtextureSize%2Ewidth%3B%0A%0A%20%20%20%20%2F%2F%20m%2Etranslate%28filterArea%2Ex%20%2F%20this%2EtextureSize%2Ewidth%2C%20filterArea%2Ey%20%2F%20this%2EtextureSize%2Eheight%29%3B%0A%0A%0A%20%20%20%20%2F%2F%20m%2Escale%281%20%2C%20ratio%29%3B%0A%0A%0A%20%20%20%20%2F%2F%20var%20transform%20%3D%20wt%2Eclone%28%29%3B%0A%0A%20%20%20%20%2F%2F%20var%20translateScaleX%20%3D%20%28this%2EtextureSize%2Ewidth%20%2F%20620%29%3B%0A%20%20%20%20%2F%2F%20var%20translateScaleY%20%3D%20%28this%2EtextureSize%2Eheight%20%2F%20380%29%3B%0A%0A%20%20%20%20%2F%2F%20transform%2Etx%20%2F%3D%20620%20%2A%20translateScaleX%3B%0A%20%20%20%20%2F%2F%20transform%2Ety%20%2F%3D%20620%20%2A%20translateScaleX%3B%0A%0A%20%20%20%20%2F%2F%20transform%2Einvert%28%29%3B%0A%0A%20%20%20%20%2F%2F%20transform%2Eappend%28m%29%3B%0A%0A%20%20%20%20%2F%2F%20%2F%2F%20apply%20inverse%20scale%2E%2E%0A%20%20%20%20%2F%2F%20transform%2Escale%281%20%2C%201%2Fratio%29%3B%0A%0A%20%20%20%20%2F%2F%20transform%2Escale%28%20translateScaleX%20%2C%20translateScaleY%20%29%3B%0A%0A%20%20%20%20%2F%2F%20return%20transform%3B%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Constrains%20the%20filter%20area%20to%20the%20texture%20size%0A%20%2A%20%40param%20filterArea%20%7BRectangle%7D%20The%20filter%20area%20we%20want%20to%20cap%0A%20%2A%2F%0AFilterManager%2Eprototype%2EcapFilterArea%20%3D%20function%20%28filterArea%29%0A%7B%0A%20%20%20%20if%20%28filterArea%2Ex%20%3C%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20filterArea%2Ewidth%20%2B%3D%20filterArea%2Ex%3B%0A%20%20%20%20%20%20%20%20filterArea%2Ex%20%3D%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28filterArea%2Ey%20%3C%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20filterArea%2Eheight%20%2B%3D%20filterArea%2Ey%3B%0A%20%20%20%20%20%20%20%20filterArea%2Ey%20%3D%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%20filterArea%2Ex%20%2B%20filterArea%2Ewidth%20%3E%20this%2EtextureSize%2Ewidth%20%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20filterArea%2Ewidth%20%3D%20this%2EtextureSize%2Ewidth%20%2D%20filterArea%2Ex%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%20filterArea%2Ey%20%2B%20filterArea%2Eheight%20%3E%20this%2EtextureSize%2Eheight%20%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20filterArea%2Eheight%20%3D%20this%2EtextureSize%2Eheight%20%2D%20filterArea%2Ey%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Resizes%20all%20the%20render%20targets%20in%20the%20pool%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20the%20new%20width%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20the%20new%20height%0A%20%2A%2F%0AFilterManager%2Eprototype%2Eresize%20%3D%20function%20%28%20width%2C%20height%20%29%0A%7B%0A%20%20%20%20this%2EtextureSize%2Ewidth%20%3D%20width%3B%0A%20%20%20%20this%2EtextureSize%2Eheight%20%3D%20height%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2EtexturePool%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EtexturePool%5Bi%5D%2Eresize%28%20width%2C%20height%20%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20filter%20and%20removes%20it%20from%20the%20filter%20stack%2E%0A%20%2A%0A%20%2A%2F%0AFilterManager%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Equad%2Edestroy%28%29%3B%0A%20%20%20%20%0A%20%20%20%20WebGLManager%2Eprototype%2Edestroy%2Ecall%28this%29%3B%0A%20%20%20%20%0A%20%20%20%20this%2EfilterStack%20%3D%20null%3B%0A%20%20%20%20this%2EoffsetY%20%3D%200%3B%0A%0A%20%20%20%20%2F%2F%20destroy%20textures%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2EtexturePool%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EtexturePool%5Bi%5D%2Edestroy%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EtexturePool%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2F%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2F%2E%2E%2F%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2Futils%2FQuad%22%3A57%2C%22%2E%2E%2Futils%2FRenderTarget%22%3A58%2C%22%2E%2FWebGLManager%22%3A51%7D%5D%2C48%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20WebGLManager%20%3D%20require%28%27%2E%2FWebGLManager%27%29%2C%0A%20%20%20%20AlphaMaskFilter%20%3D%20require%28%27%2E%2E%2Ffilters%2FSpriteMaskFilter%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20this%20manager%20works%20for%2E%0A%20%2A%2F%0Afunction%20MaskManager%28renderer%29%0A%7B%0A%20%20%20%20WebGLManager%2Ecall%28this%2C%20renderer%29%3B%0A%0A%20%20%20%20this%2EstencilStack%20%3D%20%5B%5D%3B%0A%20%20%20%20this%2Ereverse%20%3D%20true%3B%0A%20%20%20%20this%2Ecount%20%3D%200%3B%0A%0A%20%20%20%20this%2EalphaMaskPool%20%3D%20%5B%5D%3B%0A%7D%0A%0AMaskManager%2Eprototype%20%3D%20Object%2Ecreate%28WebGLManager%2Eprototype%29%3B%0AMaskManager%2Eprototype%2Econstructor%20%3D%20MaskManager%3B%0Amodule%2Eexports%20%3D%20MaskManager%3B%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20the%20Mask%20and%20adds%20it%20to%20the%20current%20filter%20stack%2E%0A%20%2A%0A%20%2A%20%40param%20graphics%20%7BPIXI%2EGraphics%7D%0A%20%2A%20%40param%20webGLData%20%7Bany%5B%5D%7D%0A%20%2A%2F%0AMaskManager%2Eprototype%2EpushMask%20%3D%20function%20%28target%2C%20maskData%29%0A%7B%0A%20%20%20%20if%20%28maskData%2Etexture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EpushSpriteMask%28target%2C%20maskData%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EpushStencilMask%28target%2C%20maskData%29%3B%0A%20%20%20%20%7D%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20the%20last%20mask%20from%20the%20mask%20stack%20and%20doesn%27t%20return%20it%2E%0A%20%2A%0A%20%2A%20%40param%20target%20%7BPIXI%2ERenderTarget%7D%0A%20%2A%20%40param%20maskData%20%7Bany%5B%5D%7D%0A%20%2A%2F%0AMaskManager%2Eprototype%2EpopMask%20%3D%20function%20%28target%2C%20maskData%29%0A%7B%0A%20%20%20%20if%20%28maskData%2Etexture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EpopSpriteMask%28target%2C%20maskData%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EpopStencilMask%28target%2C%20maskData%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20the%20Mask%20and%20adds%20it%20to%20the%20current%20filter%20stack%2E%0A%20%2A%0A%20%2A%20%40param%20target%20%7BPIXI%2ERenderTarget%7D%0A%20%2A%20%40param%20maskData%20%7Bany%5B%5D%7D%0A%20%2A%2F%0AMaskManager%2Eprototype%2EpushSpriteMask%20%3D%20function%20%28target%2C%20maskData%29%0A%7B%0A%20%20%20%20var%20alphaMaskFilter%20%3D%20this%2EalphaMaskPool%2Epop%28%29%3B%0A%0A%20%20%20%20if%20%28%21alphaMaskFilter%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20alphaMaskFilter%20%3D%20%5Bnew%20AlphaMaskFilter%28maskData%29%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20alphaMaskFilter%5B0%5D%2EmaskSprite%20%3D%20maskData%3B%0A%20%20%20%20this%2Erenderer%2EfilterManager%2EpushFilter%28target%2C%20alphaMaskFilter%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20the%20last%20filter%20from%20the%20filter%20stack%20and%20doesn%27t%20return%20it%2E%0A%20%2A%0A%20%2A%2F%0AMaskManager%2Eprototype%2EpopSpriteMask%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20filters%20%3D%20this%2Erenderer%2EfilterManager%2EpopFilter%28%29%3B%0A%0A%20%20%20%20this%2EalphaMaskPool%2Epush%28filters%29%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20the%20Mask%20and%20adds%20it%20to%20the%20current%20filter%20stack%2E%0A%20%2A%0A%20%2A%20%40param%20target%20%7BPIXI%2ERenderTarget%7D%0A%20%2A%20%40param%20maskData%20%7Bany%5B%5D%7D%0A%20%2A%2F%0AMaskManager%2Eprototype%2EpushStencilMask%20%3D%20function%20%28target%2C%20maskData%29%0A%7B%0A%20%20%20%20this%2Erenderer%2EstencilManager%2EpushMask%28maskData%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20the%20last%20filter%20from%20the%20filter%20stack%20and%20doesn%27t%20return%20it%2E%0A%20%2A%0A%20%2A%20%40param%20target%20%7BPIXI%2ERenderTarget%7D%0A%20%2A%20%40param%20maskData%20%7Bany%5B%5D%7D%0A%20%2A%2F%0AMaskManager%2Eprototype%2EpopStencilMask%20%3D%20function%20%28target%2C%20maskData%29%0A%7B%0A%20%20%20%20this%2Erenderer%2EstencilManager%2EpopMask%28maskData%29%3B%0A%7D%3B%0A%0A%0A%7D%2C%7B%22%2E%2E%2Ffilters%2FSpriteMaskFilter%22%3A45%2C%22%2E%2FWebGLManager%22%3A51%7D%5D%2C49%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20WebGLManager%20%3D%20require%28%27%2E%2FWebGLManager%27%29%2C%0A%20%20%20%20TextureShader%20%3D%20require%28%27%2E%2E%2Fshaders%2FTextureShader%27%29%2C%0A%20%20%20%20ComplexPrimitiveShader%20%3D%20require%28%27%2E%2E%2Fshaders%2FComplexPrimitiveShader%27%29%2C%0A%20%20%20%20PrimitiveShader%20%3D%20require%28%27%2E%2E%2Fshaders%2FPrimitiveShader%27%29%2C%0A%20%20%20%20utils%20%3D%20require%28%27%2E%2E%2F%2E%2E%2F%2E%2E%2Futils%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40extends%20PIXI%2EWebGLManager%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20this%20manager%20works%20for%2E%0A%20%2A%2F%0Afunction%20ShaderManager%28renderer%29%0A%7B%0A%20%20%20%20WebGLManager%2Ecall%28this%2C%20renderer%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EmaxAttibs%20%3D%2010%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bany%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EattribState%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bany%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EtempAttribState%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2EmaxAttibs%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EattribState%5Bi%5D%20%3D%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bany%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Estack%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FcurrentId%20%3D%20%2D1%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EShader%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcurrentShader%20%3D%20null%3B%0A%0A%2F%2F%20%20%20%20this%2EinitPlugins%28%29%3B%0A%7D%0A%0AShaderManager%2Eprototype%20%3D%20Object%2Ecreate%28WebGLManager%2Eprototype%29%3B%0AShaderManager%2Eprototype%2Econstructor%20%3D%20ShaderManager%3B%0Autils%2EpluginTarget%2Emixin%28ShaderManager%29%3B%0A%0Amodule%2Eexports%20%3D%20ShaderManager%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20when%20there%20is%20a%20WebGL%20context%20change%2E%0A%20%2A%0A%20%2A%2F%0AShaderManager%2Eprototype%2EonContextChange%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2EinitPlugins%28%29%3B%0A%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20%2F%2F%20get%20the%20maximum%20number%20of%20attribute%20correctly%20as%20this%20tends%20to%20vary%0A%20%20%20%20this%2EmaxAttibs%20%3D%20gl%2EgetParameter%28gl%2EMAX%5FVERTEX%5FATTRIBS%29%3B%0A%0A%20%20%20%20this%2EattribState%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2EmaxAttibs%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EattribState%5Bi%5D%20%3D%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20TODO%20%2D%20Why%20are%20these%20not%20plugins%3F%20We%20can%27t%20decouple%20primitives%20unless%20they%20are%2E%2E%2E%2E%0A%20%20%20%20this%2EdefaultShader%20%3D%20new%20TextureShader%28this%29%3B%0A%20%20%20%20this%2EprimitiveShader%20%3D%20new%20PrimitiveShader%28this%29%3B%0A%20%20%20%20this%2EcomplexPrimitiveShader%20%3D%20new%20ComplexPrimitiveShader%28this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Takes%20the%20attributes%20given%20in%20parameters%20and%20uploads%20them%2E%0A%20%2A%0A%20%2A%20%40param%20attribs%20%7Bany%5B%5D%7D%20attribs%0A%20%2A%2F%0AShaderManager%2Eprototype%2EsetAttribs%20%3D%20function%20%28attribs%29%0A%7B%0A%20%20%20%20%2F%2F%20reset%20temp%20state%0A%20%20%20%20var%20i%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20this%2EtempAttribState%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EtempAttribState%5Bi%5D%20%3D%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20set%20the%20new%20attribs%0A%20%20%20%20for%20%28var%20a%20in%20attribs%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EtempAttribState%5Battribs%5Ba%5D%5D%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20this%2EattribState%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2EattribState%5Bi%5D%20%21%3D%3D%20this%2EtempAttribState%5Bi%5D%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EattribState%5Bi%5D%20%3D%20this%2EtempAttribState%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2EattribState%5Bi%5D%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EenableVertexAttribArray%28i%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EdisableVertexAttribArray%28i%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20the%20current%20shader%2E%0A%20%2A%0A%20%2A%20%40param%20shader%20%7BPIXI%2EShader%7D%20the%20shader%20to%20upload%0A%20%2A%2F%0AShaderManager%2Eprototype%2EsetShader%20%3D%20function%20%28shader%29%0A%7B%0A%20%20%20%20if%20%28this%2E%5FcurrentId%20%3D%3D%3D%20shader%2Euid%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2E%5FcurrentId%20%3D%20shader%2Euid%3B%0A%0A%20%20%20%20this%2EcurrentShader%20%3D%20shader%3B%0A%0A%20%20%20%20this%2Erenderer%2Egl%2EuseProgram%28shader%2Eprogram%29%3B%0A%20%20%20%20this%2EsetAttribs%28shader%2Eattributes%29%3B%0A%0A%20%20%20%20return%20true%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20this%20object%2E%0A%20%2A%0A%20%2A%2F%0AShaderManager%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2EprimitiveShader%2Edestroy%28%29%3B%0A%20%20%20%20this%2EcomplexPrimitiveShader%2Edestroy%28%29%3B%0A%20%20%20%20WebGLManager%2Eprototype%2Edestroy%2Ecall%28this%29%3B%0A%0A%20%20%20%20this%2EdestroyPlugins%28%29%3B%0A%0A%20%20%20%20this%2EattribState%20%3D%20null%3B%0A%0A%20%20%20%20this%2EtempAttribState%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2F%2E%2E%2Futils%22%3A70%2C%22%2E%2E%2Fshaders%2FComplexPrimitiveShader%22%3A52%2C%22%2E%2E%2Fshaders%2FPrimitiveShader%22%3A53%2C%22%2E%2E%2Fshaders%2FTextureShader%22%3A55%2C%22%2E%2FWebGLManager%22%3A51%7D%5D%2C50%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20WebGLManager%20%3D%20require%28%27%2E%2FWebGLManager%27%29%2C%0A%20%20%20%20utils%20%3D%20require%28%27%2E%2E%2F%2E%2E%2F%2E%2E%2Futils%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20this%20manager%20works%20for%2E%0A%20%2A%2F%0Afunction%20WebGLMaskManager%28renderer%29%0A%7B%0A%20%20%20%20WebGLManager%2Ecall%28this%2C%20renderer%29%3B%0A%20%20%20%20this%2EstencilMaskStack%20%3D%20null%3B%0A%7D%0A%0AWebGLMaskManager%2Eprototype%20%3D%20Object%2Ecreate%28WebGLManager%2Eprototype%29%3B%0AWebGLMaskManager%2Eprototype%2Econstructor%20%3D%20WebGLMaskManager%3B%0Amodule%2Eexports%20%3D%20WebGLMaskManager%3B%0A%0A%2F%2A%2A%0A%20%2A%20Changes%20the%20mask%20stack%20that%20is%20used%20by%20this%20manager%2E%0A%20%2A%0A%20%2A%20%40param%20stencilMaskStack%20%7BPIXI%2EStencilMaskStack%7D%20The%20mask%20stack%0A%20%2A%2F%0AWebGLMaskManager%2Eprototype%2EsetMaskStack%20%3D%20function%20%28%20stencilMaskStack%20%29%0A%7B%0A%20%20%20%20this%2EstencilMaskStack%20%3D%20stencilMaskStack%3B%0A%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20if%20%28stencilMaskStack%2EstencilStack%2Elength%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20gl%2Edisable%28gl%2ESTENCIL%5FTEST%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20gl%2Eenable%28gl%2ESTENCIL%5FTEST%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20the%20Mask%20and%20adds%20it%20to%20the%20current%20filter%20stack%2E%20%40alvin%0A%20%2A%0A%20%2A%20%40param%20graphics%20%7BPIXI%2EGraphics%7D%0A%20%2A%20%40param%20webGLData%20%7Bany%5B%5D%7D%0A%20%2A%2F%0AWebGLMaskManager%2Eprototype%2EpushStencil%20%3D%20function%20%28graphics%2C%20webGLData%29%0A%7B%0A%20%20%20%20this%2Erenderer%2EcurrentRenderTarget%2EattachStencilBuffer%28%29%3B%0A%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%2C%0A%20%20%20%20%20%20%20%20sms%20%3D%20this%2EstencilMaskStack%3B%0A%0A%20%20%20%20this%2EbindGraphics%28graphics%2C%20webGLData%29%3B%0A%0A%20%20%20%20if%20%28sms%2EstencilStack%2Elength%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20gl%2Eenable%28gl%2ESTENCIL%5FTEST%29%3B%0A%20%20%20%20%20%20%20%20gl%2Eclear%28gl%2ESTENCIL%5FBUFFER%5FBIT%29%3B%0A%20%20%20%20%20%20%20%20sms%2Ereverse%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20sms%2Ecount%20%3D%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20sms%2EstencilStack%2Epush%28webGLData%29%3B%0A%0A%20%20%20%20var%20level%20%3D%20sms%2Ecount%3B%0A%0A%20%20%20%20gl%2EcolorMask%28false%2C%20false%2C%20false%2C%20false%29%3B%0A%0A%20%20%20%20gl%2EstencilFunc%28gl%2EALWAYS%2C0%2C0xFF%29%3B%0A%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EINVERT%29%3B%0A%0A%20%20%20%20%2F%2F%20draw%20the%20triangle%20strip%21%0A%0A%20%20%20%20if%20%28webGLData%2Emode%20%3D%3D%3D%201%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20gl%2EdrawElements%28gl%2ETRIANGLE%5FFAN%2C%20%20webGLData%2Eindices%2Elength%20%2D%204%2C%20gl%2EUNSIGNED%5FSHORT%2C%200%20%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28sms%2Ereverse%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2C%200xFF%20%2D%20level%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EDECR%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2Clevel%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EINCR%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20draw%20a%20quad%20to%20increment%2E%2E%0A%20%20%20%20%20%20%20%20gl%2EdrawElements%28gl%2ETRIANGLE%5FFAN%2C%204%2C%20gl%2EUNSIGNED%5FSHORT%2C%20%28%20webGLData%2Eindices%2Elength%20%2D%204%20%29%20%2A%202%20%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28sms%2Ereverse%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2C0xFF%2D%28level%2B1%29%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2Clevel%2B1%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20sms%2Ereverse%20%3D%20%21sms%2Ereverse%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21sms%2Ereverse%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2C%200xFF%20%2D%20level%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EDECR%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2Clevel%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EINCR%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20gl%2EdrawElements%28gl%2ETRIANGLE%5FSTRIP%2C%20%20webGLData%2Eindices%2Elength%2C%20gl%2EUNSIGNED%5FSHORT%2C%200%20%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%21sms%2Ereverse%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2C0xFF%2D%28level%2B1%29%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2Clevel%2B1%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20gl%2EcolorMask%28true%2C%20true%2C%20true%2C%20true%29%3B%0A%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EKEEP%29%3B%0A%0A%20%20%20%20sms%2Ecount%2B%2B%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20TODO%20this%20does%20not%20belong%20here%21%0A%20%2A%0A%20%2A%20%40param%20graphics%20%7BPIXI%2EGraphics%7D%0A%20%2A%20%40param%20webGLData%20%7Bany%5B%5D%7D%0A%20%2A%2F%0AWebGLMaskManager%2Eprototype%2EbindGraphics%20%3D%20function%20%28graphics%2C%20webGLData%29%0A%7B%0A%20%20%20%20%2F%2Fif%20%28this%2E%5FcurrentGraphics%20%3D%3D%3D%20graphics%29return%3B%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20%20%2F%2F%20bind%20the%20graphics%20object%2E%2E%0A%20%20%20%20var%20shader%3B%2F%2F%20%3D%20this%2Erenderer%2EshaderManager%2Eplugins%2EprimitiveShader%3B%0A%0A%20%20%20%20if%20%28webGLData%2Emode%20%3D%3D%3D%201%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20shader%20%3D%20this%2Erenderer%2EshaderManager%2EcomplexPrimitiveShader%3B%0A%0A%20%20%20%20%20%20%20%20this%2Erenderer%2EshaderManager%2EsetShader%28shader%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EuniformMatrix3fv%28shader%2Euniforms%2EtranslationMatrix%2E%5Flocation%2C%20false%2C%20graphics%2EworldTransform%2EtoArray%28true%29%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EuniformMatrix3fv%28shader%2Euniforms%2EprojectionMatrix%2E%5Flocation%2C%20false%2C%20this%2Erenderer%2EcurrentRenderTarget%2EprojectionMatrix%2EtoArray%28true%29%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2Euniform3fv%28shader%2Euniforms%2Etint%2E%5Flocation%2C%20utils%2Ehex2rgb%28graphics%2Etint%29%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2Euniform3fv%28shader%2Euniforms%2Ecolor%2E%5Flocation%2C%20webGLData%2Ecolor%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2Euniform1f%28shader%2Euniforms%2Ealpha%2E%5Flocation%2C%20graphics%2EworldAlpha%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20webGLData%2Ebuffer%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaVertexPosition%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%204%20%2A%202%2C%200%29%3B%0A%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20now%20do%20the%20rest%2E%2E%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20index%20buffer%21%0A%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20webGLData%2EindexBuffer%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2Fthis%2Erenderer%2EshaderManager%2EactivatePrimitiveShader%28%29%3B%0A%20%20%20%20%20%20%20%20shader%20%3D%20this%2Erenderer%2EshaderManager%2EprimitiveShader%3B%0A%0A%20%20%20%20%20%20%20%20this%2Erenderer%2EshaderManager%2EsetShader%28shader%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EuniformMatrix3fv%28shader%2Euniforms%2EtranslationMatrix%2E%5Flocation%2C%20false%2C%20graphics%2EworldTransform%2EtoArray%28true%29%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EuniformMatrix3fv%28shader%2Euniforms%2EprojectionMatrix%2E%5Flocation%2C%20false%2C%20this%2Erenderer%2EcurrentRenderTarget%2EprojectionMatrix%2EtoArray%28true%29%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2Euniform3fv%28shader%2Euniforms%2Etint%2E%5Flocation%2C%20utils%2Ehex2rgb%28graphics%2Etint%29%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2Euniform1f%28shader%2Euniforms%2Ealpha%2E%5Flocation%2C%20graphics%2EworldAlpha%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20webGLData%2Ebuffer%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaVertexPosition%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%204%20%2A%206%2C%200%29%3B%0A%20%20%20%20%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaColor%2C%204%2C%20gl%2EFLOAT%2C%20false%2C4%20%2A%206%2C%202%20%2A%204%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20index%20buffer%21%0A%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20webGLData%2EindexBuffer%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20TODO%20%40alvin%0A%20%2A%20%40param%20graphics%20%7BPIXI%2EGraphics%7D%0A%20%2A%20%40param%20webGLData%20%7Bany%5B%5D%7D%0A%20%2A%2F%0AWebGLMaskManager%2Eprototype%2EpopStencil%20%3D%20function%20%28graphics%2C%20webGLData%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%2C%0A%20%20%20%20%20%20%20%20sms%20%3D%20this%2EstencilMaskStack%3B%0A%0A%20%20%20%20sms%2EstencilStack%2Epop%28%29%3B%0A%0A%20%20%20%20sms%2Ecount%2D%2D%3B%0A%0A%20%20%20%20if%20%28sms%2EstencilStack%2Elength%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20the%20stack%20is%20empty%21%0A%20%20%20%20%20%20%20%20gl%2Edisable%28gl%2ESTENCIL%5FTEST%29%3B%0A%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20var%20level%20%3D%20sms%2Ecount%3B%0A%0A%20%20%20%20%20%20%20%20this%2EbindGraphics%28graphics%2C%20webGLData%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EcolorMask%28false%2C%20false%2C%20false%2C%20false%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28webGLData%2Emode%20%3D%3D%3D%201%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sms%2Ereverse%20%3D%20%21sms%2Ereverse%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sms%2Ereverse%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2C%200xFF%20%2D%20%28level%2B1%29%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EINCR%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2Clevel%2B1%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EDECR%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20draw%20a%20quad%20to%20increment%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EdrawElements%28gl%2ETRIANGLE%5FFAN%2C%204%2C%20gl%2EUNSIGNED%5FSHORT%2C%20%28%20webGLData%2Eindices%2Elength%20%2D%204%20%29%20%2A%202%20%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EALWAYS%2C0%2C0xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EINVERT%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20draw%20the%20triangle%20strip%21%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EdrawElements%28gl%2ETRIANGLE%5FFAN%2C%20%20webGLData%2Eindices%2Elength%20%2D%204%2C%20gl%2EUNSIGNED%5FSHORT%2C%200%20%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Erenderer%2EdrawCount%20%2B%3D%202%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21sms%2Ereverse%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2C0xFF%2D%28level%29%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2Clevel%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20console%2Elog%28%22%3C%3C%3E%3E%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21sms%2Ereverse%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2C%200xFF%20%2D%20%28level%2B1%29%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EINCR%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2Clevel%2B1%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EDECR%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EdrawElements%28gl%2ETRIANGLE%5FSTRIP%2C%20%20webGLData%2Eindices%2Elength%2C%20gl%2EUNSIGNED%5FSHORT%2C%200%20%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Erenderer%2EdrawCount%2B%2B%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21sms%2Ereverse%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2C0xFF%2D%28level%29%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EstencilFunc%28gl%2EEQUAL%2Clevel%2C%200xFF%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20gl%2EcolorMask%28true%2C%20true%2C%20true%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20gl%2EstencilOp%28gl%2EKEEP%2Cgl%2EKEEP%2Cgl%2EKEEP%29%3B%0A%0A%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20mask%20stack%2E%0A%20%2A%0A%20%2A%2F%0AWebGLMaskManager%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20WebGLManager%2Eprototype%2Edestroy%2Ecall%28this%29%3B%0A%0A%20%20%20%20this%2EstencilMaskStack%2EstencilStack%20%3D%20null%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20the%20Mask%20and%20adds%20it%20to%20the%20current%20filter%20stack%2E%0A%20%2A%0A%20%2A%20%40param%20maskData%20%7Bany%5B%5D%7D%20The%20mask%20data%20structure%20to%20use%0A%20%2A%2F%0AWebGLMaskManager%2Eprototype%2EpushMask%20%3D%20function%20%28maskData%29%0A%7B%0A%0A%0A%20%20%20%20this%2Erenderer%2EsetObjectRenderer%28this%2Erenderer%2Eplugins%2Egraphics%29%3B%0A%0A%20%20%20%20if%20%28maskData%2Edirty%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Erenderer%2Eplugins%2Egraphics%2EupdateGraphics%28maskData%2C%20this%2Erenderer%2Egl%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%21maskData%2E%5FwebGL%5Bthis%2Erenderer%2Egl%2Eid%5D%2Edata%2Elength%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EpushStencil%28maskData%2C%20maskData%2E%5FwebGL%5Bthis%2Erenderer%2Egl%2Eid%5D%2Edata%5B0%5D%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20the%20last%20filter%20from%20the%20filter%20stack%20and%20doesn%27t%20return%20it%2E%0A%20%2A%0A%20%2A%20%40param%20maskData%20%7Bany%5B%5D%7D%0A%20%2A%2F%0AWebGLMaskManager%2Eprototype%2EpopMask%20%3D%20function%20%28maskData%29%0A%7B%0A%20%20%20%20this%2Erenderer%2EsetObjectRenderer%28this%2Erenderer%2Eplugins%2Egraphics%29%3B%0A%0A%20%20%20%20this%2EpopStencil%28maskData%2C%20maskData%2E%5FwebGL%5Bthis%2Erenderer%2Egl%2Eid%5D%2Edata%5B0%5D%29%3B%0A%7D%3B%0A%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2F%2E%2E%2Futils%22%3A70%2C%22%2E%2FWebGLManager%22%3A51%7D%5D%2C51%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20this%20manager%20works%20for%2E%0A%20%2A%2F%0Afunction%20WebGLManager%28renderer%29%0A%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20renderer%20this%20manager%20works%20for%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EWebGLRenderer%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Erenderer%20%3D%20renderer%3B%0A%0A%20%20%20%20this%2Erenderer%2Eon%28%27context%27%2C%20this%2EonContextChange%2C%20this%29%3B%0A%7D%0A%0AWebGLManager%2Eprototype%2Econstructor%20%3D%20WebGLManager%3B%0Amodule%2Eexports%20%3D%20WebGLManager%3B%0A%0A%2F%2A%2A%0A%20%2A%20Generic%20method%20called%20when%20there%20is%20a%20WebGL%20context%20change%2E%0A%20%2A%0A%20%2A%2F%0AWebGLManager%2Eprototype%2EonContextChange%20%3D%20function%20%28%29%0A%7B%0A%09%2F%2F%20do%20some%20codes%20init%21%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Generic%20destroy%20methods%20to%20be%20overridden%20by%20the%20subclass%0A%20%2A%0A%20%2A%2F%0AWebGLManager%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Erenderer%2Eoff%28%27context%27%2C%20this%2EonContextChange%2C%20this%29%3B%0A%0A%20%20%20%20this%2Erenderer%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C52%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Shader%20%3D%20require%28%27%2E%2FShader%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20This%20shader%20is%20used%20to%20draw%20complex%20primitive%20shapes%20for%20%7B%40link%20PIXI%2EGraphics%7D%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40extends%20PIXI%2EShader%0A%20%2A%20%40param%20shaderManager%20%7BPIXI%2EShaderManager%7D%20The%20webgl%20shader%20manager%20this%20shader%20works%20for%2E%0A%20%2A%2F%0Afunction%20ComplexPrimitiveShader%28shaderManager%29%0A%7B%0A%20%20%20%20Shader%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20shaderManager%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%27attribute%20vec2%20aVertexPosition%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20mat3%20translationMatrix%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20mat3%20projectionMatrix%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20vec3%20tint%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20float%20alpha%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20vec3%20color%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27varying%20vec4%20vColor%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20translationMatrix%20%2A%20vec3%28aVertexPosition%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20vColor%20%3D%20vec4%28color%20%2A%20alpha%20%2A%20tint%2C%20alpha%29%3B%27%2C%2F%2F%22%20%2A%20vec4%28tint%20%2A%20alpha%2C%20alpha%29%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%7D%27%0A%20%20%20%20%20%20%20%20%5D%2Ejoin%28%27%5Cn%27%29%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%27precision%20mediump%20float%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27varying%20vec4%20vColor%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20gl%5FFragColor%20%3D%20vColor%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%7D%27%0A%20%20%20%20%20%20%20%20%5D%2Ejoin%28%27%5Cn%27%29%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tint%3A%20%20%20%7B%20type%3A%20%273f%27%2C%20value%3A%20%5B0%2C%200%2C%200%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20alpha%3A%20%20%7B%20type%3A%20%271f%27%2C%20value%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20color%3A%20%20%7B%20type%3A%20%273f%27%2C%20value%3A%20%5B0%2C0%2C0%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20translationMatrix%3A%20%7B%20type%3A%20%27mat3%27%2C%20value%3A%20new%20Float32Array%289%29%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20projectionMatrix%3A%20%7B%20type%3A%20%27mat3%27%2C%20value%3A%20new%20Float32Array%289%29%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20attributes%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20aVertexPosition%3A0%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0AComplexPrimitiveShader%2Eprototype%20%3D%20Object%2Ecreate%28Shader%2Eprototype%29%3B%0AComplexPrimitiveShader%2Eprototype%2Econstructor%20%3D%20ComplexPrimitiveShader%3B%0Amodule%2Eexports%20%3D%20ComplexPrimitiveShader%3B%0A%0A%7D%2C%7B%22%2E%2FShader%22%3A54%7D%5D%2C53%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Shader%20%3D%20require%28%27%2E%2FShader%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20This%20shader%20is%20used%20to%20draw%20simple%20primitive%20shapes%20for%20%7B%40link%20PIXI%2EGraphics%7D%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40extends%20PIXI%2EShader%0A%20%2A%20%40param%20shaderManager%20%7BShaderManager%7D%20The%20webgl%20shader%20manager%20this%20shader%20works%20for%2E%0A%20%2A%2F%0Afunction%20PrimitiveShader%28shaderManager%29%0A%7B%0A%20%20%20%20Shader%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20shaderManager%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%27attribute%20vec2%20aVertexPosition%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27attribute%20vec4%20aColor%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20mat3%20translationMatrix%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20mat3%20projectionMatrix%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20float%20alpha%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20float%20flipY%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20vec3%20tint%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27varying%20vec4%20vColor%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20translationMatrix%20%2A%20vec3%28aVertexPosition%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20vColor%20%3D%20aColor%20%2A%20vec4%28tint%20%2A%20alpha%2C%20alpha%29%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%7D%27%0A%20%20%20%20%20%20%20%20%5D%2Ejoin%28%27%5Cn%27%29%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%27precision%20mediump%20float%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27varying%20vec4%20vColor%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20gl%5FFragColor%20%3D%20vColor%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%7D%27%0A%20%20%20%20%20%20%20%20%5D%2Ejoin%28%27%5Cn%27%29%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tint%3A%20%20%20%7B%20type%3A%20%273f%27%2C%20value%3A%20%5B0%2C%200%2C%200%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20alpha%3A%20%20%7B%20type%3A%20%271f%27%2C%20value%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20translationMatrix%3A%20%7B%20type%3A%20%27mat3%27%2C%20value%3A%20new%20Float32Array%289%29%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20projectionMatrix%3A%20%7B%20type%3A%20%27mat3%27%2C%20value%3A%20new%20Float32Array%289%29%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20attributes%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20aVertexPosition%3A0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20aColor%3A0%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0APrimitiveShader%2Eprototype%20%3D%20Object%2Ecreate%28Shader%2Eprototype%29%3B%0APrimitiveShader%2Eprototype%2Econstructor%20%3D%20PrimitiveShader%3B%0Amodule%2Eexports%20%3D%20PrimitiveShader%3B%0A%0A%7D%2C%7B%22%2E%2FShader%22%3A54%7D%5D%2C54%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2Aglobal%20console%20%2A%2F%0Avar%20utils%20%3D%20require%28%27%2E%2E%2F%2E%2E%2F%2E%2E%2Futils%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Base%20shader%20class%20for%20PIXI%20managed%20shaders%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20shaderManager%20%7BPIXI%2EShaderManager%7D%20The%20webgl%20shader%20manager%20this%20shader%20works%20for%2E%0A%20%2A%20%40param%20%5BvertexSrc%5D%20%7Bstring%7D%20The%20source%20of%20the%20vertex%20shader%2E%0A%20%2A%20%40param%20%5BfragmentSrc%5D%20%7Bstring%7D%20The%20source%20of%20the%20fragment%20shader%2E%0A%20%2A%20%40param%20%5Buniforms%5D%20%7Bobject%7D%20Uniforms%20for%20this%20shader%2E%0A%20%2A%20%40param%20%5Battributes%5D%20%7Bobject%7D%20Attributes%20for%20this%20shader%2E%0A%20%2A%2F%0Afunction%20Shader%28shaderManager%2C%20vertexSrc%2C%20fragmentSrc%2C%20uniforms%2C%20attributes%29%0A%7B%0A%20%20%20%20if%20%28%21vertexSrc%20%7C%7C%20%21fragmentSrc%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%27Pixi%2Ejs%20Error%2E%20Shader%20requires%20vertexSrc%20and%20fragmentSrc%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20A%20unique%20id%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Euid%20%3D%20utils%2Euid%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20current%20WebGL%20drawing%20context%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLRenderingContext%7D%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Egl%20%3D%20shaderManager%2Erenderer%2Egl%3B%0A%0A%20%20%20%20%2F%2FTODO%20maybe%20we%20should%20pass%20renderer%20rather%20than%20shader%20manger%3F%3F%20food%20for%20thought%2E%2E%0A%20%20%20%20this%2EshaderManager%20%3D%20shaderManager%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20WebGL%20program%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLProgram%7D%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eprogram%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20uniforms%20as%20an%20object%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Euniforms%20%3D%20uniforms%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20attributes%20as%20an%20object%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eattributes%20%3D%20attributes%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Internal%20texture%20counter%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EtextureCount%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20vertex%20shader%20as%20an%20array%20of%20strings%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EvertexSrc%20%3D%20vertexSrc%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20fragment%20shader%20as%20an%20array%20of%20strings%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EfragmentSrc%20%3D%20fragmentSrc%3B%0A%0A%20%20%20%20this%2Einit%28%29%3B%0A%7D%0A%0AShader%2Eprototype%2Econstructor%20%3D%20Shader%3B%0Amodule%2Eexports%20%3D%20Shader%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20the%20shader%20and%20uses%20it%0A%20%2A%0A%20%2A%2F%0AShader%2Eprototype%2Einit%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Ecompile%28%29%3B%0A%0A%20%20%20%20this%2Egl%2EuseProgram%28this%2Eprogram%29%3B%0A%0A%20%20%20%20this%2EcacheUniformLocations%28Object%2Ekeys%28this%2Euniforms%29%29%3B%0A%20%20%20%20this%2EcacheAttributeLocations%28Object%2Ekeys%28this%2Eattributes%29%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Caches%20the%20locations%20of%20the%20uniform%20for%20reuse%2E%0A%20%2A%0A%20%2A%20%40param%20keys%20%7Bstring%7D%20the%20uniforms%20to%20cache%0A%20%2A%2F%0AShader%2Eprototype%2EcacheUniformLocations%20%3D%20function%20%28keys%29%0A%7B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20keys%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Euniforms%5Bkeys%5Bi%5D%5D%2E%5Flocation%20%3D%20this%2Egl%2EgetUniformLocation%28this%2Eprogram%2C%20keys%5Bi%5D%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Caches%20the%20locations%20of%20the%20attribute%20for%20reuse%2E%0A%20%2A%0A%20%2A%20%40param%20keys%20%7Bstring%7D%20the%20attributes%20to%20cache%0A%20%2A%2F%0AShader%2Eprototype%2EcacheAttributeLocations%20%3D%20function%20%28keys%29%0A%7B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20keys%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eattributes%5Bkeys%5Bi%5D%5D%20%3D%20this%2Egl%2EgetAttribLocation%28this%2Eprogram%2C%20keys%5Bi%5D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20TODO%3A%20Check%20if%20this%20is%20needed%20anymore%2E%2E%2E%0A%0A%20%20%20%20%2F%2F%20Begin%20worst%20hack%20eva%20%2F%2F%0A%0A%20%20%20%20%2F%2F%20WHY%3F%3F%3F%20ONLY%20on%20my%20chrome%20pixel%20the%20line%20above%20returns%20%2D1%20when%20using%20filters%3F%0A%20%20%20%20%2F%2F%20maybe%20its%20something%20to%20do%20with%20the%20current%20state%20of%20the%20gl%20context%2E%0A%20%20%20%20%2F%2F%20I%27m%20convinced%20this%20is%20a%20bug%20in%20the%20chrome%20browser%20as%20there%20is%20NO%20reason%20why%20this%20should%20be%20returning%20%2D1%20especially%20as%20it%20only%20manifests%20on%20my%20chrome%20pixel%0A%20%20%20%20%2F%2F%20If%20theres%20any%20webGL%20people%20that%20know%20why%20could%20happen%20please%20help%20%3A%29%0A%20%20%20%20%2F%2F%20if%20%28this%2Eattributes%2EaColor%20%3D%3D%3D%20%2D1%29%7B%0A%20%20%20%20%2F%2F%20%20%20%20%20this%2Eattributes%2EaColor%20%3D%202%3B%0A%20%20%20%20%2F%2F%20%7D%0A%0A%20%20%20%20%2F%2F%20End%20worst%20hack%20eva%20%2F%2F%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Attaches%20the%20shaders%20and%20creates%20the%20program%2E%0A%20%2A%0A%20%2A%20%40return%20%7BWebGLProgram%7D%0A%20%2A%2F%0AShader%2Eprototype%2Ecompile%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20var%20glVertShader%20%3D%20this%2E%5FglCompile%28gl%2EVERTEX%5FSHADER%2C%20this%2EvertexSrc%29%3B%0A%20%20%20%20var%20glFragShader%20%3D%20this%2E%5FglCompile%28gl%2EFRAGMENT%5FSHADER%2C%20this%2EfragmentSrc%29%3B%0A%0A%20%20%20%20var%20program%20%3D%20gl%2EcreateProgram%28%29%3B%0A%0A%20%20%20%20gl%2EattachShader%28program%2C%20glVertShader%29%3B%0A%20%20%20%20gl%2EattachShader%28program%2C%20glFragShader%29%3B%0A%20%20%20%20gl%2ElinkProgram%28program%29%3B%0A%0A%20%20%20%20%2F%2F%20if%20linking%20fails%2C%20then%20log%20and%20cleanup%0A%20%20%20%20if%20%28%21gl%2EgetProgramParameter%28program%2C%20gl%2ELINK%5FSTATUS%29%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20console%2Eerror%28%27Pixi%2Ejs%20Error%3A%20Could%20not%20initialize%20shader%2E%27%29%3B%0A%20%20%20%20%20%20%20%20console%2Eerror%28%27gl%2EVALIDATE%5FSTATUS%27%2C%20gl%2EgetProgramParameter%28program%2C%20gl%2EVALIDATE%5FSTATUS%29%29%3B%0A%20%20%20%20%20%20%20%20console%2Eerror%28%27gl%2EgetError%28%29%27%2C%20gl%2EgetError%28%29%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20there%20is%20a%20program%20info%20log%2C%20log%20it%0A%20%20%20%20%20%20%20%20if%20%28gl%2EgetProgramInfoLog%28program%29%20%21%3D%3D%20%27%27%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27Pixi%2Ejs%20Warning%3A%20gl%2EgetProgramInfoLog%28%29%27%2C%20gl%2EgetProgramInfoLog%28program%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20gl%2EdeleteProgram%28program%29%3B%0A%20%20%20%20%20%20%20%20program%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20clean%20up%20some%20shaders%0A%20%20%20%20gl%2EdeleteShader%28glVertShader%29%3B%0A%20%20%20%20gl%2EdeleteShader%28glFragShader%29%3B%0A%0A%20%20%20%20return%20%28this%2Eprogram%20%3D%20program%29%3B%0A%7D%3B%0A%0A%2F%2A%0AShader%2Eprototype%2EbuildSync%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%2F%2F%20var%20str%20%3D%20%22%22%0A%0A%20%20%20%2F%2F%20str%20%3D%20%20%22Shader%2Eprototype%2EsyncUniforms%20%3D%20function%28%29%22%3B%0A%20%20%20%2F%2F%20str%20%2B%3D%20%22%7B%5Cn%22%3B%0A%0A%20%20%20%20for%20%28var%20key%20in%20this%2Euniforms%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20uniform%20%3D%20this%2Euniforms%5Bkey%5D%3B%0A%0A%20%20%20%20%20%20%20%20Object%2EdefineProperty%28this%2C%20key%2C%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20uniform%2Evalue%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EsetUniform%28uniform%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20console%2Elog%28%20makePropSetter%28%20key%2C%20%22%20bloop%22%2C%20uniform%2Etype%20%29%20%20%29%0A%20%20%2F%2F%20%20%20%20%20%20Object%2Edef%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20location%20%3D%20uniform%2E%5Flocation%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20value%20%3D%20uniform%2Evalue%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fi%2C%20il%3B%0A%0A%20%20%20%20%2F%2F%20%20%20%20str%20%2B%3D%20%22gl%2Euniform1i%28this%2Euniforms%2E%22%2B%20key%20%2B%22%2E%5Flocation%2C%20this%2Euniforms%2E%22%20%2B%20key%20%2B%20%22%2Evalue%20%29%3B%5Cn%22%0A%0A%20%20%20%20%7D%0A%0A%7D%2A%2F%0A%0A%2F%2A%2A%0A%2A%20Adds%20a%20new%20uniform%0A%2A%0A%2A%20%40param%20uniform%20%7Bobject%7D%20the%20new%20uniform%20to%20attach%0A%2A%2F%0AShader%2Eprototype%2EsyncUniform%20%3D%20function%20%28uniform%29%0A%7B%0A%20%20%20%20var%20location%20%3D%20uniform%2E%5Flocation%2C%0A%20%20%20%20%20%20%20%20value%20%3D%20uniform%2Evalue%2C%0A%20%20%20%20%20%20%20%20gl%20%3D%20this%2Egl%2C%0A%20%20%20%20%20%20%20%20i%2C%20il%3B%0A%0A%20%20%20%20switch%20%28uniform%2Etype%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20case%20%27b%27%3A%0A%20%20%20%20%20%20%20%20case%20%27bool%27%3A%0A%20%20%20%20%20%20%20%20case%20%27boolean%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform1i%28location%2C%20value%20%3F%201%20%3A%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20single%20int%20value%0A%20%20%20%20%20%20%20%20case%20%27i%27%3A%0A%20%20%20%20%20%20%20%20case%20%271i%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform1i%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20single%20float%20value%0A%20%20%20%20%20%20%20%20case%20%27f%27%3A%0A%20%20%20%20%20%20%20%20case%20%271f%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform1f%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Float32Array%282%29%20or%20JS%20Arrray%0A%20%20%20%20%20%20%20%20case%20%272f%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform2f%28location%2C%20value%5B0%5D%2C%20value%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Float32Array%283%29%20or%20JS%20Arrray%0A%20%20%20%20%20%20%20%20case%20%273f%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform3f%28location%2C%20value%5B0%5D%2C%20value%5B1%5D%2C%20value%5B2%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Float32Array%284%29%20or%20JS%20Arrray%0A%20%20%20%20%20%20%20%20case%20%274f%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform4f%28location%2C%20value%5B0%5D%2C%20value%5B1%5D%2C%20value%5B2%5D%2C%20value%5B3%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20a%202D%20Point%20object%0A%20%20%20%20%20%20%20%20case%20%27v2%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform2f%28location%2C%20value%2Ex%2C%20value%2Ey%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20a%203D%20Point%20object%0A%20%20%20%20%20%20%20%20case%20%27v3%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform3f%28location%2C%20value%2Ex%2C%20value%2Ey%2C%20value%2Ez%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20a%204D%20Point%20object%0A%20%20%20%20%20%20%20%20case%20%27v4%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform4f%28location%2C%20value%2Ex%2C%20value%2Ey%2C%20value%2Ez%2C%20value%2Ew%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Int32Array%20or%20JS%20Array%0A%20%20%20%20%20%20%20%20case%20%271iv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform1iv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Int32Array%20or%20JS%20Array%0A%20%20%20%20%20%20%20%20case%20%272iv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform2iv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Int32Array%20or%20JS%20Array%0A%20%20%20%20%20%20%20%20case%20%273iv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform3iv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Int32Array%20or%20JS%20Array%0A%20%20%20%20%20%20%20%20case%20%274iv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform4iv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Float32Array%20or%20JS%20Array%0A%20%20%20%20%20%20%20%20case%20%271fv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform1fv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Float32Array%20or%20JS%20Array%0A%20%20%20%20%20%20%20%20case%20%272fv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform2fv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Float32Array%20or%20JS%20Array%0A%20%20%20%20%20%20%20%20case%20%273fv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform3fv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Float32Array%20or%20JS%20Array%0A%20%20%20%20%20%20%20%20case%20%274fv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform4fv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Float32Array%20or%20JS%20Array%0A%20%20%20%20%20%20%20%20case%20%27m2%27%3A%0A%20%20%20%20%20%20%20%20case%20%27mat2%27%3A%0A%20%20%20%20%20%20%20%20case%20%27Matrix2fv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EuniformMatrix2fv%28location%2C%20uniform%2Etranspose%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Float32Array%20or%20JS%20Array%0A%20%20%20%20%20%20%20%20case%20%27m3%27%3A%0A%20%20%20%20%20%20%20%20case%20%27mat3%27%3A%0A%20%20%20%20%20%20%20%20case%20%27Matrix3fv%27%3A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EuniformMatrix3fv%28location%2C%20uniform%2Etranspose%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Float32Array%20or%20JS%20Array%0A%20%20%20%20%20%20%20%20case%20%27m4%27%3A%0A%20%20%20%20%20%20%20%20case%20%27mat4%27%3A%0A%20%20%20%20%20%20%20%20case%20%27Matrix4fv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EuniformMatrix4fv%28location%2C%20uniform%2Etranspose%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20a%20Color%20Value%0A%20%20%20%20%20%20%20%20case%20%27c%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27number%27%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20utils%2Ehex2rgb%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform3f%28location%2C%20value%5B0%5D%2C%20value%5B1%5D%2C%20value%5B2%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20flat%20array%20of%20integers%20%28JS%20or%20typed%20array%29%0A%20%20%20%20%20%20%20%20case%20%27iv1%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform1iv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20flat%20array%20of%20integers%20with%203%20x%20N%20size%20%28JS%20or%20typed%20array%29%0A%20%20%20%20%20%20%20%20case%20%27iv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform3iv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20flat%20array%20of%20floats%20%28JS%20or%20typed%20array%29%0A%20%20%20%20%20%20%20%20case%20%27fv1%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform1fv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20flat%20array%20of%20floats%20with%203%20x%20N%20size%20%28JS%20or%20typed%20array%29%0A%20%20%20%20%20%20%20%20case%20%27fv%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform3fv%28location%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20array%20of%202D%20Point%20objects%0A%20%20%20%20%20%20%20%20case%20%27v2v%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21uniform%2E%5Farray%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%20%3D%20new%20Float32Array%282%20%2A%20value%2Elength%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20il%20%3D%20value%2Elength%3B%20i%20%3C%20il%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%5Bi%20%2A%202%5D%20%20%20%20%20%20%20%3D%20value%5Bi%5D%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%5Bi%20%2A%202%20%2B%201%5D%20%20%20%3D%20value%5Bi%5D%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform2fv%28location%2C%20uniform%2E%5Farray%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20array%20of%203D%20Point%20objects%0A%20%20%20%20%20%20%20%20case%20%27v3v%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21uniform%2E%5Farray%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%20%3D%20new%20Float32Array%283%20%2A%20value%2Elength%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20il%20%3D%20value%2Elength%3B%20i%20%3C%20il%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%5Bi%20%2A%203%5D%20%20%20%20%20%20%20%3D%20value%5Bi%5D%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%5Bi%20%2A%203%20%2B%201%5D%20%20%20%3D%20value%5Bi%5D%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%5Bi%20%2A%203%20%2B%202%5D%20%20%20%3D%20value%5Bi%5D%2Ez%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform3fv%28location%2C%20uniform%2E%5Farray%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20array%20of%204D%20Point%20objects%0A%20%20%20%20%20%20%20%20case%20%27v4v%27%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21uniform%2E%5Farray%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%20%3D%20new%20Float32Array%284%20%2A%20value%2Elength%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20il%20%3D%20value%2Elength%3B%20i%20%3C%20il%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%5Bi%20%2A%204%5D%20%20%20%20%20%20%20%3D%20value%5Bi%5D%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%5Bi%20%2A%204%20%2B%201%5D%20%20%20%3D%20value%5Bi%5D%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%5Bi%20%2A%204%20%2B%202%5D%20%20%20%3D%20value%5Bi%5D%2Ez%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%2E%5Farray%5Bi%20%2A%204%20%2B%203%5D%20%20%20%3D%20value%5Bi%5D%2Ew%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform4fv%28location%2C%20uniform%2E%5Farray%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20PIXI%2ETexture%0A%20%20%20%20%20%20%20%20case%20%27t%27%3A%0A%20%20%20%20%20%20%20%20case%20%27sampler2D%27%3A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21uniform%2Evalue%20%7C%7C%20%21uniform%2Evalue%2EbaseTexture%2EhasLoaded%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20activate%20this%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EactiveTexture%28gl%5B%27TEXTURE%27%20%2B%20this%2EtextureCount%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20texture%20%3D%20uniform%2Evalue%2EbaseTexture%2E%5FglTextures%5Bgl%2Eid%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21texture%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EinitSampler2D%28uniform%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20textur%20to%20the%20newly%20created%20one%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20texture%20%3D%20uniform%2Evalue%2EbaseTexture%2E%5FglTextures%5Bgl%2Eid%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20bind%20the%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EbindTexture%28gl%2ETEXTURE%5F2D%2C%20texture%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20set%20uniform%20to%20texture%20index%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2Euniform1i%28uniform%2E%5Flocation%2C%20this%2EtextureCount%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20increment%20next%20texture%20id%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EtextureCount%2B%2B%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27Pixi%2Ejs%20Shader%20Warning%3A%20Unknown%20uniform%20type%3A%20%27%20%2B%20uniform%2Etype%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20shader%20uniform%20values%2E%0A%20%2A%0A%20%2A%2F%0AShader%2Eprototype%2EsyncUniforms%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2EtextureCount%20%3D%201%3B%0A%0A%20%20%20%20for%20%28var%20key%20in%20this%2Euniforms%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EsyncUniform%28this%2Euniforms%5Bkey%5D%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Initialises%20a%20Sampler2D%20uniform%20%28which%20may%20only%20be%20available%20later%20on%20after%20initUniforms%20once%20the%20texture%20has%20loaded%29%0A%20%2A%0A%20%2A%2F%0AShader%2Eprototype%2EinitSampler2D%20%3D%20function%20%28uniform%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20var%20texture%20%3D%20uniform%2Evalue%2EbaseTexture%3B%0A%0A%20%20%20%20if%28%21texture%2EhasLoaded%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%0A%0A%20%20%20%20if%20%28uniform%2EtextureData%29%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FTODO%20move%20this%2E%2E%2E%0A%20%20%20%20%20%20%20%20var%20data%20%3D%20uniform%2EtextureData%3B%0A%0A%20%20%20%20%20%20%20%20texture%2E%5FglTextures%5Bgl%2Eid%5D%20%3D%20gl%2EcreateTexture%28%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EbindTexture%28gl%2ETEXTURE%5F2D%2C%20texture%2E%5FglTextures%5Bgl%2Eid%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EpixelStorei%28gl%2EUNPACK%5FPREMULTIPLY%5FALPHA%5FWEBGL%2C%20texture%2EpremultipliedAlpha%29%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20GLTexture%20%3D%20mag%20linear%2C%20min%20linear%5Fmipmap%5Flinear%2C%20wrap%20repeat%20%2B%20gl%2EgenerateMipmap%28gl%2ETEXTURE%5F2D%29%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20GLTextureLinear%20%3D%20mag%2Fmin%20linear%2C%20wrap%20clamp%0A%20%20%20%20%20%20%20%20%2F%2F%20GLTextureNearestRepeat%20%3D%20mag%2Fmin%20NEAREST%2C%20wrap%20repeat%0A%20%20%20%20%20%20%20%20%2F%2F%20GLTextureNearest%20%3D%20mag%2Fmin%20nearest%2C%20wrap%20clamp%0A%20%20%20%20%20%20%20%20%2F%2F%20AudioTexture%20%3D%20whatever%20%2B%20luminance%20%2B%20width%20512%2C%20height%202%2C%20border%200%0A%20%20%20%20%20%20%20%20%2F%2F%20KeyTexture%20%3D%20whatever%20%2B%20luminance%20%2B%20width%20256%2C%20height%202%2C%20border%200%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%20magFilter%20can%20be%3A%20gl%2ELINEAR%2C%20gl%2ELINEAR%5FMIPMAP%5FLINEAR%20or%20gl%2ENEAREST%0A%20%20%20%20%20%20%20%20%2F%2F%20%20wrapS%2FT%20can%20be%3A%20gl%2ECLAMP%5FTO%5FEDGE%20or%20gl%2EREPEAT%0A%0A%20%20%20%20%20%20%20%20gl%2EtexImage2D%28gl%2ETEXTURE%5F2D%2C%200%2C%20data%2Eluminance%20%3F%20gl%2ELUMINANCE%20%3A%20gl%2ERGBA%2C%20gl%2ERGBA%2C%20gl%2EUNSIGNED%5FBYTE%2C%20texture%2Esource%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FMAG%5FFILTER%2C%20data%2EmagFilter%20%3F%20data%2EmagFilter%20%3A%20gl%2ELINEAR%20%29%3B%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FMIN%5FFILTER%2C%20data%2EwrapS%20%3F%20data%2EwrapS%20%3A%20gl%2ECLAMP%5FTO%5FEDGE%20%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FWRAP%5FT%2C%20data%2EwrapS%20%3F%20data%2EwrapS%20%3A%20gl%2ECLAMP%5FTO%5FEDGE%29%3B%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FWRAP%5FS%2C%20data%2EwrapT%20%3F%20data%2EwrapT%20%3A%20gl%2ECLAMP%5FTO%5FEDGE%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EshaderManager%2Erenderer%2EupdateTexture%28texture%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20shader%2E%0A%20%2A%0A%20%2A%2F%0AShader%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Egl%2EdeleteProgram%28this%2Eprogram%29%3B%0A%0A%20%20%20%20this%2Egl%20%3D%20null%3B%0A%20%20%20%20this%2Euniforms%20%3D%20null%3B%0A%20%20%20%20this%2Eattributes%20%3D%20null%3B%0A%0A%20%20%20%20this%2EvertexSrc%20%3D%20null%3B%0A%20%20%20%20this%2EfragmentSrc%20%3D%20null%3B%0A%7D%3B%0A%0AShader%2Eprototype%2E%5FglCompile%20%3D%20function%20%28type%2C%20src%29%0A%7B%0A%20%20%20%20var%20shader%20%3D%20this%2Egl%2EcreateShader%28type%29%3B%0A%0A%20%20%20%20this%2Egl%2EshaderSource%28shader%2C%20src%29%3B%0A%20%20%20%20this%2Egl%2EcompileShader%28shader%29%3B%0A%0A%20%20%20%20if%20%28%21this%2Egl%2EgetShaderParameter%28shader%2C%20this%2Egl%2ECOMPILE%5FSTATUS%29%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20console%2Elog%28this%2Egl%2EgetShaderInfoLog%28shader%29%29%3B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20shader%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2F%2E%2E%2Futils%22%3A70%7D%5D%2C55%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Shader%20%3D%20require%28%27%2E%2FShader%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40extends%20PIXI%2EShader%0A%20%2A%20%40param%20shaderManager%20%7BPIXI%2EShaderManager%7D%20The%20webgl%20shader%20manager%20this%20shader%20works%20for%2E%0A%20%2A%20%40param%20%5BvertexSrc%5D%20%7Bstring%7D%20The%20source%20of%20the%20vertex%20shader%2E%0A%20%2A%20%40param%20%5BfragmentSrc%5D%20%7Bstring%7D%20The%20source%20of%20the%20fragment%20shader%2E%0A%20%2A%20%40param%20%5BcustomUniforms%5D%20%7Bobject%7D%20Custom%20uniforms%20to%20use%20to%20augment%20the%20built%2Din%20ones%2E%0A%20%2A%20%40param%20%5BfragmentSrc%5D%20%7Bstring%7D%20The%20source%20of%20the%20fragment%20shader%2E%0A%20%2A%2F%0Afunction%20TextureShader%28shaderManager%2C%20vertexSrc%2C%20fragmentSrc%2C%20customUniforms%2C%20customAttributes%29%0A%7B%0A%20%20%20%20var%20uniforms%20%3D%20%7B%0A%0A%20%20%20%20%20%20%20%20uSampler%3A%20%20%20%20%20%20%20%20%20%20%20%7B%20type%3A%20%27sampler2D%27%2C%20value%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20projectionMatrix%3A%20%20%20%7B%20type%3A%20%27mat3%27%2C%20value%3A%20new%20Float32Array%28%5B1%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%201%2C%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%200%2C%201%5D%29%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20if%20%28customUniforms%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20u%20in%20customUniforms%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20uniforms%5Bu%5D%20%3D%20customUniforms%5Bu%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20var%20attributes%20%3D%20%7B%0A%20%20%20%20%20%20%20%20aVertexPosition%3A%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20aTextureCoord%3A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20aColor%3A%20%20%20%20%20%20%20%20%20%20%20%20%200%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20if%20%28customAttributes%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20a%20in%20customAttributes%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attributes%5Ba%5D%20%3D%20customAttributes%5Ba%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20vertex%20shader%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20vertexSrc%20%3D%20vertexSrc%20%7C%7C%20TextureShader%2EdefaultVertexSrc%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20fragment%20shader%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20fragmentSrc%20%3D%20fragmentSrc%20%7C%7C%20TextureShader%2EdefaultFragmentSrc%3B%0A%0A%20%20%20%20Shader%2Ecall%28this%2C%20shaderManager%2C%20vertexSrc%2C%20fragmentSrc%2C%20uniforms%2C%20attributes%29%3B%0A%7D%0A%0A%2F%2F%20constructor%0ATextureShader%2Eprototype%20%3D%20Object%2Ecreate%28Shader%2Eprototype%29%3B%0ATextureShader%2Eprototype%2Econstructor%20%3D%20TextureShader%3B%0Amodule%2Eexports%20%3D%20TextureShader%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20default%20vertex%20shader%20source%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40constant%0A%20%2A%2F%0ATextureShader%2EdefaultVertexSrc%20%3D%20%5B%0A%20%20%20%20%27precision%20lowp%20float%3B%27%2C%0A%20%20%20%20%27attribute%20vec2%20aVertexPosition%3B%27%2C%0A%20%20%20%20%27attribute%20vec2%20aTextureCoord%3B%27%2C%0A%20%20%20%20%27attribute%20vec4%20aColor%3B%27%2C%0A%0A%20%20%20%20%27uniform%20mat3%20projectionMatrix%3B%27%2C%0A%0A%20%20%20%20%27varying%20vec2%20vTextureCoord%3B%27%2C%0A%20%20%20%20%27varying%20vec4%20vColor%3B%27%2C%0A%0A%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%20%20%20%20%27%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20vec3%28aVertexPosition%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%27%2C%0A%20%20%20%20%27%20%20%20vTextureCoord%20%3D%20aTextureCoord%3B%27%2C%0A%20%20%20%20%27%20%20%20vColor%20%3D%20vec4%28aColor%2Ergb%20%2A%20aColor%2Ea%2C%20aColor%2Ea%29%3B%27%2C%0A%20%20%20%20%27%7D%27%0A%5D%2Ejoin%28%27%5Cn%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20default%20fragment%20shader%20source%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40constant%0A%20%2A%2F%0ATextureShader%2EdefaultFragmentSrc%20%3D%20%5B%0A%20%20%20%20%27precision%20lowp%20float%3B%27%2C%0A%0A%20%20%20%20%27varying%20vec2%20vTextureCoord%3B%27%2C%0A%20%20%20%20%27varying%20vec4%20vColor%3B%27%2C%0A%0A%20%20%20%20%27uniform%20sampler2D%20uSampler%3B%27%2C%0A%0A%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%20%20%20%20%27%20%20%20gl%5FFragColor%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%20%2A%20vColor%20%3B%27%2C%0A%20%20%20%20%27%7D%27%0A%5D%2Ejoin%28%27%5Cn%27%29%3B%0A%0A%7D%2C%7B%22%2E%2FShader%22%3A54%7D%5D%2C56%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20WebGLManager%20%3D%20require%28%27%2E%2E%2Fmanagers%2FWebGLManager%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Base%20for%20a%20common%20object%20renderer%20that%20can%20be%20used%20as%20a%20system%20renderer%20plugin%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EWebGLManager%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20this%20object%20renderer%20works%20for%2E%0A%20%2A%2F%0Afunction%20ObjectRenderer%28renderer%29%0A%7B%0A%20%20%20%20WebGLManager%2Ecall%28this%2C%20renderer%29%3B%0A%7D%0A%0A%0AObjectRenderer%2Eprototype%20%3D%20Object%2Ecreate%28WebGLManager%2Eprototype%29%3B%0AObjectRenderer%2Eprototype%2Econstructor%20%3D%20ObjectRenderer%3B%0Amodule%2Eexports%20%3D%20ObjectRenderer%3B%0A%0A%2F%2A%2A%0A%20%2A%20Starts%20the%20renderer%20and%20sets%20the%20shader%0A%20%2A%0A%20%2A%2F%0AObjectRenderer%2Eprototype%2Estart%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20%2F%2F%20set%20the%20shader%2E%2E%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Stops%20the%20renderer%0A%20%2A%0A%20%2A%2F%0AObjectRenderer%2Eprototype%2Estop%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Eflush%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20flushes%0A%20%2A%0A%20%2A%2F%0AObjectRenderer%2Eprototype%2Eflush%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20%2F%2F%20flush%21%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20an%20object%0A%20%2A%0A%20%2A%20%40param%20object%20%7BPIXI%2EDisplayObject%7D%20The%20object%20to%20render%2E%0A%20%2A%2F%0AObjectRenderer%2Eprototype%2Erender%20%3D%20function%20%28object%29%20%2F%2F%20jshint%20unused%3Afalse%0A%7B%0A%20%20%20%20%2F%2F%20render%20the%20object%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fmanagers%2FWebGLManager%22%3A51%7D%5D%2C57%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20Helper%20class%20to%20create%20a%20quad%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20gl%20%7BWebGLRenderingContext%7D%20The%20gl%20context%20for%20this%20quad%20to%20use%2E%0A%20%2A%2F%0Afunction%20Quad%28gl%29%0A%7B%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20the%20current%20WebGL%20drawing%20context%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLRenderingContext%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Egl%20%3D%20gl%3B%0A%0A%2F%2F%20%20%20%20this%2Etextures%20%3D%20new%20TextureUvs%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20An%20array%20of%20vertices%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFloat32Array%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Evertices%20%3D%20new%20Float32Array%28%5B%0A%20%20%20%20%20%20%20%200%2C0%2C%0A%20%20%20%20%20%20%20%20200%2C0%2C%0A%20%20%20%20%20%20%20%20200%2C200%2C%0A%20%20%20%20%20%20%20%200%2C200%0A%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20Uvs%20of%20the%20quad%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFloat32Array%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Euvs%20%3D%20new%20Float32Array%28%5B%0A%20%20%20%20%20%20%20%200%2C0%2C%0A%20%20%20%20%20%20%20%201%2C0%2C%0A%20%20%20%20%20%20%20%201%2C1%2C%0A%20%20%20%20%20%20%20%200%2C1%0A%20%20%20%20%5D%29%3B%0A%0A%2F%2F%20%20%20%20var%20white%20%3D%20%280xFFFFFF%20%3E%3E%2016%29%20%2B%20%280xFFFFFF%20%26%200xff00%29%20%2B%20%28%280xFFFFFF%20%26%200xff%29%20%3C%3C%2016%29%20%2B%20%281%20%2A%20255%20%3C%3C%2024%29%3B%0A%20%20%20%20%2F%2FTODO%20convert%20this%20to%20a%2032%20unsigned%20int%20array%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20color%20components%20of%20the%20triangles%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFloat32Array%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ecolors%20%3D%20new%20Float32Array%28%5B%0A%20%20%20%20%20%20%20%201%2C1%2C1%2C1%2C%0A%20%20%20%20%20%20%20%201%2C1%2C1%2C1%2C%0A%20%20%20%20%20%20%20%201%2C1%2C1%2C1%2C%0A%20%20%20%20%20%20%20%201%2C1%2C1%2C1%0A%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7BUint16Array%7D%20An%20array%20containing%20the%20indices%20of%20the%20vertices%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eindices%20%3D%20new%20Uint16Array%28%5B%0A%20%20%20%20%20%20%20%200%2C%201%2C%202%2C%200%2C%203%2C%202%0A%20%20%20%20%5D%29%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLBuffer%7D%20The%20vertex%20buffer%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EvertexBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLBuffer%7D%20The%20index%20buffer%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EindexBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20this%2EvertexBuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EARRAY%5FBUFFER%2C%20%288%20%2B%208%20%2B%2016%29%20%2A%204%2C%20gl%2EDYNAMIC%5FDRAW%29%3B%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20this%2EindexBuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20this%2Eindices%2C%20gl%2ESTATIC%5FDRAW%29%3B%0A%0A%20%20%20%20this%2Eupload%28%29%3B%0A%7D%0A%0AQuad%2Eprototype%2Econstructor%20%3D%20Quad%3B%0A%0A%2F%2A%2A%0A%20%2A%20Maps%20two%20Rectangle%20to%20the%20quad%0A%20%2A%20%40param%20rect%20%7BPIXI%2ERectangle%7D%20the%20first%20rectangle%0A%20%2A%20%40param%20rect2%20%7BPIXI%2ERectangle%7D%20the%20second%20rectangle%0A%20%2A%2F%0AQuad%2Eprototype%2Emap%20%3D%20function%28rect%2C%20rect2%29%0A%7B%0A%20%20%20%20var%20x%20%3D%200%3B%20%2F%2Frect2%2Ex%20%2F%20rect%2Ewidth%3B%0A%20%20%20%20var%20y%20%3D%200%3B%20%2F%2Frect2%2Ey%20%2F%20rect%2Eheight%3B%0A%0A%20%20%20%20this%2Euvs%5B0%5D%20%3D%20x%3B%0A%20%20%20%20this%2Euvs%5B1%5D%20%3D%20y%3B%0A%0A%20%20%20%20this%2Euvs%5B2%5D%20%3D%20x%20%2B%20rect2%2Ewidth%20%2F%20rect%2Ewidth%3B%0A%20%20%20%20this%2Euvs%5B3%5D%20%3D%20y%3B%0A%0A%20%20%20%20this%2Euvs%5B4%5D%20%3D%20x%20%2B%20rect2%2Ewidth%20%2F%20rect%2Ewidth%3B%0A%20%20%20%20this%2Euvs%5B5%5D%20%3D%20y%20%2B%20rect2%2Eheight%20%2F%20rect%2Eheight%3B%0A%0A%20%20%20%20this%2Euvs%5B6%5D%20%3D%20x%3B%0A%20%20%20%20this%2Euvs%5B7%5D%20%3D%20y%20%2B%20rect2%2Eheight%20%2F%20rect%2Eheight%3B%0A%0A%20%20%20%20%2F%2F%2F%20%2D%2D%2D%2D%2D%0A%20%20%20%20x%20%3D%20rect2%2Ex%3B%0A%20%20%20%20y%20%3D%20rect2%2Ey%3B%0A%0A%20%20%20%20this%2Evertices%5B0%5D%20%3D%20x%3B%0A%20%20%20%20this%2Evertices%5B1%5D%20%3D%20y%3B%0A%0A%20%20%20%20this%2Evertices%5B2%5D%20%3D%20x%20%2B%20rect2%2Ewidth%3B%0A%20%20%20%20this%2Evertices%5B3%5D%20%3D%20y%3B%0A%0A%20%20%20%20this%2Evertices%5B4%5D%20%3D%20x%20%2B%20rect2%2Ewidth%3B%0A%20%20%20%20this%2Evertices%5B5%5D%20%3D%20y%20%2B%20rect2%2Eheight%3B%0A%0A%20%20%20%20this%2Evertices%5B6%5D%20%3D%20x%3B%0A%20%20%20%20this%2Evertices%5B7%5D%20%3D%20y%20%2B%20rect2%2Eheight%3B%0A%0A%20%20%20%20this%2Eupload%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Binds%20the%20buffer%20and%20uploads%20the%20data%0A%20%2A%2F%0AQuad%2Eprototype%2Eupload%20%3D%20function%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20%2F%2F%20TODO%20could%20probably%20be%20pushed%20into%20one%20upload%21%0A%20%20%20%20gl%2EbindBuffer%28%20gl%2EARRAY%5FBUFFER%2C%20this%2EvertexBuffer%20%29%3B%0A%0A%20%20%20%20gl%2EbufferSubData%28gl%2EARRAY%5FBUFFER%2C%200%2C%20this%2Evertices%29%3B%0A%0A%20%20%20%20gl%2EbufferSubData%28gl%2EARRAY%5FBUFFER%2C%208%20%2A%204%2C%20this%2Euvs%29%3B%0A%0A%20%20%20%20gl%2EbufferSubData%28gl%2EARRAY%5FBUFFER%2C%20%288%20%2B%208%29%20%2A%204%2C%20this%2Ecolors%29%3B%0A%7D%3B%0A%0AQuad%2Eprototype%2Edestroy%20%3D%20function%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%20%20%20%20%0A%20%20%20%20%20gl%2EdeleteBuffer%28this%2EvertexBuffer%29%3B%0A%20%20%20%20%20gl%2EdeleteBuffer%28this%2EindexBuffer%29%3B%0A%7D%3B%0A%0Amodule%2Eexports%20%3D%20Quad%3B%0A%0A%0A%0A%7D%2C%7B%7D%5D%2C58%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20math%20%3D%20require%28%27%2E%2E%2F%2E%2E%2F%2E%2E%2Fmath%27%29%2C%0A%20%20%20%20utils%20%3D%20require%28%27%2E%2E%2F%2E%2E%2F%2E%2E%2Futils%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2F%2E%2E%2Fconst%27%29%2C%0A%20%20%20%20%2F%2FStencilManager%20%3D%20require%28%27%2E%2E%2Fmanagers%2FStencilManager%27%29%2C%0A%20%20%20%20StencilMaskStack%20%3D%20require%28%27%2E%2FStencilMaskStack%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Mat%20Groves%20http%3A%2F%2Fmatgroves%2Ecom%2F%20%40Doormat23%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20gl%20%7BWebGLRenderingContext%7D%20the%20current%20WebGL%20drawing%20context%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20the%20horizontal%20range%20of%20the%20filter%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20the%20vertical%20range%20of%20the%20filter%0A%20%2A%20%40param%20scaleMode%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40param%20resolution%20%7Bnumber%7D%20the%20current%20resolution%0A%20%2A%20%40param%20root%20%7Bboolean%7D%20Whether%20this%20object%20is%20the%20root%20element%20or%20not%0A%20%2A%2F%0Avar%20RenderTarget%20%3D%20function%28gl%2C%20width%2C%20height%2C%20scaleMode%2C%20resolution%2C%20root%29%0A%7B%0A%20%20%20%20%2F%2FTODO%20Resolution%20could%20go%20here%20%28%20eg%20low%20res%20blurs%20%29%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20current%20WebGL%20drawing%20context%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLRenderingContext%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Egl%20%3D%20gl%3B%0A%0A%20%20%20%20%2F%2F%20next%20time%20to%20create%20a%20frame%20buffer%20and%20texture%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20A%20frame%20buffer%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLFrameBuffer%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EframeBuffer%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20texture%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ETexture%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etexture%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20size%20of%20the%20object%20as%20a%20rectangle%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Esize%20%3D%20new%20math%2ERectangle%280%2C%200%2C%201%2C%201%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20current%20resolution%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eresolution%20%3D%20resolution%20%7C%7C%20CONST%2ERESOLUTION%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20projection%20matrix%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EMatrix%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EprojectionMatrix%20%3D%20new%20math%2EMatrix%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20object%27s%20transform%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EMatrix%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etransform%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20frame%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eframe%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20stencil%20buffer%20stores%20masking%20data%20for%20the%20render%20target%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BWebGLRenderBuffer%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EstencilBuffer%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20data%20structure%20for%20the%20stencil%20masks%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EStencilMaskStack%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EstencilMaskStack%20%3D%20new%20StencilMaskStack%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Stores%20filter%20data%20for%20the%20render%20target%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EfilterStack%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderTarget%3Athis%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20bounds%3Athis%2Esize%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%3B%0A%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20scale%20mode%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%20PIXI%2ESCALE%5FMODES%2EDEFAULT%0A%20%20%20%20%20%2A%20%40see%20PIXI%2ESCALE%5FMODES%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EscaleMode%20%3D%20scaleMode%20%7C%7C%20CONST%2ESCALE%5FMODES%2EDEFAULT%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Whether%20this%20object%20is%20the%20root%20element%20or%20not%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eroot%20%3D%20root%3B%0A%0A%20%20%20%20if%20%28%21this%2Eroot%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%2F%2F%20this%2EflipY%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this%2EframeBuffer%20%3D%20gl%2EcreateFramebuffer%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2A%0A%20%20%20%20%20%20%20%20%20%20%20%20A%20frame%20buffer%20needs%20a%20target%20to%20render%20to%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20create%20a%20texture%20and%20bind%20it%20attach%20it%20to%20the%20framebuffer%2E%2E%0A%20%20%20%20%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%20%20%20%20this%2Etexture%20%3D%20gl%2EcreateTexture%28%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EbindTexture%28gl%2ETEXTURE%5F2D%2C%20%20this%2Etexture%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20scale%20properties%20of%20the%20texture%2E%2E%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FMAG%5FFILTER%2C%20scaleMode%20%3D%3D%3D%20CONST%2ESCALE%5FMODES%2ELINEAR%20%3F%20gl%2ELINEAR%20%3A%20gl%2ENEAREST%29%3B%0A%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FMIN%5FFILTER%2C%20scaleMode%20%3D%3D%3D%20CONST%2ESCALE%5FMODES%2ELINEAR%20%3F%20gl%2ELINEAR%20%3A%20gl%2ENEAREST%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20check%20to%20see%20if%20the%20texture%20is%20a%20power%20of%20two%21%0A%20%20%20%20%20%20%20%20var%20isPowerOfTwo%20%3D%20utils%2EisPowerOfTwo%28width%2C%20height%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FTODO%20for%2099%25%20of%20use%20cases%20if%20a%20texture%20is%20power%20of%20two%20we%20should%20tile%20the%20texture%2E%2E%2E%0A%20%20%20%20%20%20%20%20%20if%20%28%21isPowerOfTwo%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FWRAP%5FS%2C%20gl%2ECLAMP%5FTO%5FEDGE%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FWRAP%5FT%2C%20gl%2ECLAMP%5FTO%5FEDGE%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FWRAP%5FS%2C%20gl%2EREPEAT%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EtexParameteri%28gl%2ETEXTURE%5F2D%2C%20gl%2ETEXTURE%5FWRAP%5FT%2C%20gl%2EREPEAT%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20gl%2EbindFramebuffer%28gl%2EFRAMEBUFFER%2C%20this%2EframeBuffer%20%29%3B%0A%20%20%20%20%20%20%20%20gl%2EframebufferTexture2D%28gl%2EFRAMEBUFFER%2C%20gl%2ECOLOR%5FATTACHMENT0%2C%20gl%2ETEXTURE%5F2D%2C%20this%2Etexture%2C%200%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Eresize%28width%2C%20height%29%3B%0A%7D%3B%0A%0ARenderTarget%2Eprototype%2Econstructor%20%3D%20RenderTarget%3B%0Amodule%2Eexports%20%3D%20RenderTarget%3B%0A%0A%2F%2A%2A%0A%20%2A%20Clears%20the%20filter%20texture%2E%0A%20%2A%0A%20%2A%20%40param%20%5Bbind%3Dfalse%5D%20%7Bboolean%7D%20Should%20we%20bind%20our%20framebuffer%20before%20clearing%3F%0A%20%2A%2F%0ARenderTarget%2Eprototype%2Eclear%20%3D%20function%28bind%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%20%20%20%20if%28bind%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20gl%2EbindFramebuffer%28gl%2EFRAMEBUFFER%2C%20this%2EframeBuffer%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gl%2EclearColor%280%2C0%2C0%2C0%29%3B%0A%20%20%20%20gl%2Eclear%28gl%2ECOLOR%5FBUFFER%5FBIT%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Binds%20the%20stencil%20buffer%2E%0A%20%2A%0A%20%2A%2F%0ARenderTarget%2Eprototype%2EattachStencilBuffer%20%3D%20function%28%29%0A%7B%0A%0A%20%20%20%20if%20%28this%2EstencilBuffer%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20stencil%20buffer%20is%20used%20for%20masking%20in%20pixi%0A%20%20%20%20%20%2A%20lets%20create%20one%20and%20then%20add%20attach%20it%20to%20the%20framebuffer%2E%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20if%20%28%21this%2Eroot%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20%20%20%20%20this%2EstencilBuffer%20%3D%20gl%2EcreateRenderbuffer%28%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbindRenderbuffer%28gl%2ERENDERBUFFER%2C%20this%2EstencilBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2EframebufferRenderbuffer%28gl%2EFRAMEBUFFER%2C%20gl%2EDEPTH%5FSTENCIL%5FATTACHMENT%2C%20gl%2ERENDERBUFFER%2C%20this%2EstencilBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2ErenderbufferStorage%28gl%2ERENDERBUFFER%2C%20gl%2EDEPTH%5FSTENCIL%2C%20%20this%2Esize%2Ewidth%20%2A%20this%2Eresolution%20%20%2C%20this%2Esize%2Eheight%20%2A%20this%2Eresolution%20%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Binds%20the%20buffers%20and%20initialises%20the%20viewport%2E%0A%20%2A%0A%20%2A%2F%0ARenderTarget%2Eprototype%2Eactivate%20%3D%20function%28%29%0A%7B%0A%20%20%20%20%2F%2FTOOD%20refactor%20usage%20of%20frame%2E%2E%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20gl%2EbindFramebuffer%28gl%2EFRAMEBUFFER%2C%20this%2EframeBuffer%29%3B%0A%0A%20%20%20%20var%20projectionFrame%20%3D%20this%2Eframe%20%7C%7C%20this%2Esize%3B%0A%0A%20%20%20%20%2F%2F%20TODO%20add%20a%20dirty%20flag%20to%20this%20of%20a%20setter%20for%20the%20frame%3F%0A%20%20%20%20this%2EcalculateProjection%28%20projectionFrame%20%29%3B%0A%0A%20%20%20%20if%28this%2Etransform%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EprojectionMatrix%2Eappend%28this%2Etransform%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gl%2Eviewport%280%2C0%2C%20projectionFrame%2Ewidth%20%2A%20this%2Eresolution%2C%20projectionFrame%2Eheight%20%2A%20this%2Eresolution%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20projection%20matrix%20based%20on%20a%20projection%20frame%20%28which%20is%20a%20rectangle%29%0A%20%2A%0A%20%2A%2F%0ARenderTarget%2Eprototype%2EcalculateProjection%20%3D%20function%20%28projectionFrame%29%0A%7B%0A%20%20%20%20var%20pm%20%3D%20this%2EprojectionMatrix%3B%0A%0A%20%20%20%20pm%2Eidentity%28%29%3B%0A%0A%20%20%20%20if%20%28%21this%2Eroot%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20pm%2Ea%20%3D%201%20%2F%20projectionFrame%2Ewidth%2A2%3B%0A%20%20%20%20%20%20%20%20pm%2Ed%20%3D%201%20%2F%20projectionFrame%2Eheight%2A2%3B%0A%0A%20%20%20%20%20%20%20%20pm%2Etx%20%3D%20%2D1%20%2D%20projectionFrame%2Ex%20%2A%20pm%2Ea%3B%0A%20%20%20%20%20%20%20%20pm%2Ety%20%3D%20%2D1%20%2D%20projectionFrame%2Ey%20%2A%20pm%2Ed%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20pm%2Ea%20%3D%201%20%2F%20projectionFrame%2Ewidth%2A2%3B%0A%20%20%20%20%20%20%20%20pm%2Ed%20%3D%20%2D1%20%2F%20projectionFrame%2Eheight%2A2%3B%0A%0A%20%20%20%20%20%20%20%20pm%2Etx%20%3D%20%2D1%20%2D%20projectionFrame%2Ex%20%2A%20pm%2Ea%3B%0A%20%20%20%20%20%20%20%20pm%2Ety%20%3D%201%20%2D%20projectionFrame%2Ey%20%2A%20pm%2Ed%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Resizes%20the%20texture%20to%20the%20specified%20width%20and%20height%0A%20%2A%0A%20%2A%20%40param%20width%20%7BNumber%7D%20the%20new%20width%20of%20the%20texture%0A%20%2A%20%40param%20height%20%7BNumber%7D%20the%20new%20height%20of%20the%20texture%0A%20%2A%2F%0ARenderTarget%2Eprototype%2Eresize%20%3D%20function%20%28width%2C%20height%29%0A%7B%0A%20%20%20%20width%20%3D%20width%20%7C%200%3B%0A%20%20%20%20height%20%3D%20height%20%7C%200%3B%0A%0A%20%20%20%20if%20%28this%2Esize%2Ewidth%20%3D%3D%3D%20width%20%26%26%20this%2Esize%2Eheight%20%3D%3D%3D%20height%29%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Esize%2Ewidth%20%3D%20width%3B%0A%20%20%20%20this%2Esize%2Eheight%20%3D%20height%3B%0A%0A%20%20%20%20if%20%28%21this%2Eroot%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EbindTexture%28gl%2ETEXTURE%5F2D%2C%20%20this%2Etexture%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EtexImage2D%28gl%2ETEXTURE%5F2D%2C%200%2C%20gl%2ERGBA%2C%20%20width%20%2A%20this%2Eresolution%2C%20height%20%2A%20this%2Eresolution%20%2C%200%2C%20gl%2ERGBA%2C%20gl%2EUNSIGNED%5FBYTE%2C%20null%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28this%2EstencilBuffer%20%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20update%20the%20stencil%20buffer%20width%20and%20height%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EbindRenderbuffer%28gl%2ERENDERBUFFER%2C%20this%2EstencilBuffer%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2ErenderbufferStorage%28gl%2ERENDERBUFFER%2C%20gl%2EDEPTH%5FSTENCIL%2C%20%20width%20%2A%20this%2Eresolution%2C%20height%20%2A%20this%2Eresolution%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20projectionFrame%20%3D%20this%2Eframe%20%7C%7C%20this%2Esize%3B%0A%0A%20%20%20%20this%2EcalculateProjection%28%20projectionFrame%20%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20render%20target%2E%0A%20%2A%0A%20%2A%2F%0ARenderTarget%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Egl%3B%0A%20%20%20%20gl%2EdeleteRenderbuffer%28%20this%2EstencilBuffer%20%29%3B%0A%20%20%20%20gl%2EdeleteFramebuffer%28%20this%2EframeBuffer%20%29%3B%0A%20%20%20%20gl%2EdeleteTexture%28%20this%2Etexture%20%29%3B%0A%0A%20%20%20%20this%2EframeBuffer%20%3D%20null%3B%0A%20%20%20%20this%2Etexture%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2F%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2F%2E%2E%2F%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2F%2E%2E%2F%2E%2E%2Futils%22%3A70%2C%22%2E%2FStencilMaskStack%22%3A59%7D%5D%2C59%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20Generic%20Mask%20Stack%20data%20structure%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%2F%0Afunction%20StencilMaskStack%28%29%0A%7B%0A%09%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20actual%20stack%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bany%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EstencilStack%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20TODO%20%40alvin%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ereverse%20%3D%20true%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Internal%20count%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ecount%20%3D%200%3B%0A%7D%0A%0AStencilMaskStack%2Eprototype%2Econstructor%20%3D%20StencilMaskStack%3B%0Amodule%2Eexports%20%3D%20StencilMaskStack%3B%0A%0A%7D%2C%7B%7D%5D%2C60%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20math%20%3D%20require%28%27%2E%2E%2Fmath%27%29%2C%0A%20%20%20%20Texture%20%3D%20require%28%27%2E%2E%2Ftextures%2FTexture%27%29%2C%0A%20%20%20%20Container%20%3D%20require%28%27%2E%2E%2Fdisplay%2FContainer%27%29%2C%0A%20%20%20%20CanvasTinter%20%3D%20require%28%27%2E%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasTinter%27%29%2C%0A%20%20%20%20utils%20%3D%20require%28%27%2E%2E%2Futils%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2Fconst%27%29%2C%0A%20%20%20%20tempPoint%20%3D%20new%20math%2EPoint%28%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20Sprite%20object%20is%20the%20base%20for%20all%20textured%20objects%20that%20are%20rendered%20to%20the%20screen%0A%20%2A%0A%20%2A%20A%20sprite%20can%20be%20created%20directly%20from%20an%20image%20like%20this%3A%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20var%20sprite%20%3D%20new%20PIXI%2ESprite%2EfromImage%28%27assets%2Fimage%2Epng%27%29%3B%0A%20%2A%20%60%60%60%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EContainer%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20texture%20%7BPIXI%2ETexture%7D%20The%20texture%20for%20this%20sprite%0A%20%2A%2F%0Afunction%20Sprite%28texture%29%0A%7B%0A%20%20%20%20Container%2Ecall%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20anchor%20sets%20the%20origin%20point%20of%20the%20texture%2E%0A%20%20%20%20%20%2A%20The%20default%20is%200%2C0%20this%20means%20the%20texture%27s%20origin%20is%20the%20top%20left%0A%20%20%20%20%20%2A%20Setting%20the%20anchor%20to%200%2E5%2C0%2E5%20means%20the%20texture%27s%20origin%20is%20centered%0A%20%20%20%20%20%2A%20Setting%20the%20anchor%20to%201%2C1%20would%20mean%20the%20texture%27s%20origin%20point%20will%20be%20the%20bottom%20right%20corner%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eanchor%20%3D%20new%20math%2EPoint%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20texture%20that%20the%20sprite%20is%20using%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ETexture%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Ftexture%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20width%20of%20the%20sprite%20%28this%20is%20initially%20set%20by%20the%20texture%29%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fwidth%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20sprite%20%28this%20is%20initially%20set%20by%20the%20texture%29%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fheight%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20tint%20applied%20to%20the%20sprite%2E%20This%20is%20a%20hex%20value%2E%20A%20value%20of%200xFFFFFF%20will%20remove%20any%20tint%20effect%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200xFFFFFF%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etint%20%3D%200xFFFFFF%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20blend%20mode%20to%20be%20applied%20to%20the%20sprite%2E%20Apply%20a%20value%20of%20%60PIXI%2EBLEND%5FMODES%2ENORMAL%60%20to%20reset%20the%20blend%20mode%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%20PIXI%2EBLEND%5FMODES%2ENORMAL%0A%20%20%20%20%20%2A%20%40see%20PIXI%2EBLEND%5FMODES%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EblendMode%20%3D%20CONST%2EBLEND%5FMODES%2ENORMAL%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20shader%20that%20will%20be%20used%20to%20render%20the%20sprite%2E%20Set%20to%20null%20to%20remove%20a%20current%20shader%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EAbstractFilter%7CPIXI%2EShader%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eshader%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20An%20internal%20cached%20value%20of%20the%20tint%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200xFFFFFF%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcachedTint%20%3D%200xFFFFFF%3B%0A%0A%20%20%20%20%2F%2F%20call%20texture%20setter%0A%20%20%20%20this%2Etexture%20%3D%20texture%20%7C%7C%20Texture%2EEMPTY%3B%0A%7D%0A%0A%2F%2F%20constructor%0ASprite%2Eprototype%20%3D%20Object%2Ecreate%28Container%2Eprototype%29%3B%0ASprite%2Eprototype%2Econstructor%20%3D%20Sprite%3B%0Amodule%2Eexports%20%3D%20Sprite%3B%0A%0AObject%2EdefineProperties%28Sprite%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20width%20of%20the%20sprite%2C%20setting%20this%20will%20actually%20modify%20the%20scale%20to%20achieve%20the%20value%20set%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2ESprite%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20width%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20Math%2Eabs%28this%2Escale%2Ex%29%20%2A%20this%2Etexture%2E%5Fframe%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20sign%20%3D%20utils%2Esign%28this%2Escale%2Ex%29%20%7C%7C%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Escale%2Ex%20%3D%20sign%20%2A%20value%20%2F%20this%2Etexture%2E%5Fframe%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fwidth%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20sprite%2C%20setting%20this%20will%20actually%20modify%20the%20scale%20to%20achieve%20the%20value%20set%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2ESprite%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20height%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20Math%2Eabs%28this%2Escale%2Ey%29%20%2A%20this%2Etexture%2E%5Fframe%2Eheight%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20sign%20%3D%20utils%2Esign%28this%2Escale%2Ey%29%20%7C%7C%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Escale%2Ey%20%3D%20sign%20%2A%20value%20%2F%20this%2Etexture%2E%5Fframe%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fheight%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20texture%20that%20the%20sprite%20is%20using%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ETexture%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2ESprite%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20texture%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20this%2E%5Ftexture%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2E%5Ftexture%20%3D%3D%3D%20value%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ftexture%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EcachedTint%20%3D%200xFFFFFF%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20wait%20for%20the%20texture%20to%20load%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%2EbaseTexture%2EhasLoaded%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FonTextureUpdate%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%2Eonce%28%27update%27%2C%20this%2E%5FonTextureUpdate%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20When%20the%20texture%20is%20updated%2C%20this%20event%20will%20fire%20to%20update%20the%20scale%20and%20frame%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ASprite%2Eprototype%2E%5FonTextureUpdate%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20%2F%2F%20so%20if%20%5Fwidth%20is%200%20then%20width%20was%20not%20set%2E%2E%0A%20%20%20%20if%20%28this%2E%5Fwidth%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Escale%2Ex%20%3D%20utils%2Esign%28this%2Escale%2Ex%29%20%2A%20this%2E%5Fwidth%20%2F%20this%2Etexture%2Eframe%2Ewidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28this%2E%5Fheight%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Escale%2Ey%20%3D%20utils%2Esign%28this%2Escale%2Ey%29%20%2A%20this%2E%5Fheight%20%2F%20this%2Etexture%2Eframe%2Eheight%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%2A%0A%2A%20Renders%20the%20object%20using%20the%20WebGL%20renderer%0A%2A%0A%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%0A%2A%20%40private%0A%2A%2F%0ASprite%2Eprototype%2E%5FrenderWebGL%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20renderer%2EsetObjectRenderer%28renderer%2Eplugins%2Esprite%29%3B%0A%20%20%20%20renderer%2Eplugins%2Esprite%2Erender%28this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Returns%20the%20bounds%20of%20the%20Sprite%20as%20a%20rectangle%2E%20The%20bounds%20calculation%20takes%20the%20worldTransform%20into%20account%2E%0A%20%2A%0A%20%2A%20%40param%20matrix%20%7BPIXI%2EMatrix%7D%20the%20transformation%20matrix%20of%20the%20sprite%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20the%20framing%20rectangle%0A%20%2A%2F%0ASprite%2Eprototype%2EgetBounds%20%3D%20function%20%28matrix%29%0A%7B%0A%20%20%20%20if%28%21this%2E%5FcurrentBounds%29%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20var%20width%20%3D%20this%2E%5Ftexture%2E%5Fframe%2Ewidth%3B%0A%20%20%20%20%20%20%20%20var%20height%20%3D%20this%2E%5Ftexture%2E%5Fframe%2Eheight%3B%0A%0A%20%20%20%20%20%20%20%20var%20w0%20%3D%20width%20%2A%20%281%2Dthis%2Eanchor%2Ex%29%3B%0A%20%20%20%20%20%20%20%20var%20w1%20%3D%20width%20%2A%20%2Dthis%2Eanchor%2Ex%3B%0A%0A%20%20%20%20%20%20%20%20var%20h0%20%3D%20height%20%2A%20%281%2Dthis%2Eanchor%2Ey%29%3B%0A%20%20%20%20%20%20%20%20var%20h1%20%3D%20height%20%2A%20%2Dthis%2Eanchor%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20var%20worldTransform%20%3D%20matrix%20%7C%7C%20this%2EworldTransform%20%3B%0A%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20worldTransform%2Ea%3B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20worldTransform%2Eb%3B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20worldTransform%2Ec%3B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%20worldTransform%2Ed%3B%0A%20%20%20%20%20%20%20%20var%20tx%20%3D%20worldTransform%2Etx%3B%0A%20%20%20%20%20%20%20%20var%20ty%20%3D%20worldTransform%2Ety%3B%0A%0A%20%20%20%20%20%20%20%20var%20minX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20maxX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20minY%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20maxY%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FTODO%20%2D%20I%20am%20SURE%20this%20can%20be%20optimised%2C%20but%20the%20below%20is%20not%20accurate%20enough%2E%2E%0A%20%20%20%20%20%20%20%20%2F%2A%0A%20%20%20%20%20%20%20%20if%20%28b%20%3D%3D%3D%200%20%26%26%20c%20%3D%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20scale%20may%20be%20negative%21%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28a%20%3C%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28d%20%3C%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20d%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20means%20there%20is%20no%20rotation%20going%20on%20right%3F%20RIGHT%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20thats%20the%20case%20then%20we%20can%20avoid%20checking%20the%20bound%20values%21%20yay%0A%20%20%20%20%20%20%20%20%20%20%20%20minX%20%3D%20a%20%2A%20w1%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20maxX%20%3D%20a%20%2A%20w0%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minY%20%3D%20d%20%2A%20h1%20%2B%20ty%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20maxY%20%3D%20d%20%2A%20h0%20%2B%20ty%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2A%2F%0A%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20x1%20%3D%20a%20%2A%20w1%20%2B%20c%20%2A%20h1%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20var%20y1%20%3D%20d%20%2A%20h1%20%2B%20b%20%2A%20w1%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20var%20x2%20%3D%20a%20%2A%20w0%20%2B%20c%20%2A%20h1%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20var%20y2%20%3D%20d%20%2A%20h1%20%2B%20b%20%2A%20w0%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20var%20x3%20%3D%20a%20%2A%20w0%20%2B%20c%20%2A%20h0%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20var%20y3%20%3D%20d%20%2A%20h0%20%2B%20b%20%2A%20w0%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20var%20x4%20%3D%20%20a%20%2A%20w1%20%2B%20c%20%2A%20h0%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20var%20y4%20%3D%20%20d%20%2A%20h0%20%2B%20b%20%2A%20w1%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20minX%20%3D%20x1%3B%0A%20%20%20%20%20%20%20%20minX%20%3D%20x2%20%3C%20minX%20%3F%20x2%20%3A%20minX%3B%0A%20%20%20%20%20%20%20%20minX%20%3D%20x3%20%3C%20minX%20%3F%20x3%20%3A%20minX%3B%0A%20%20%20%20%20%20%20%20minX%20%3D%20x4%20%3C%20minX%20%3F%20x4%20%3A%20minX%3B%0A%0A%20%20%20%20%20%20%20%20minY%20%3D%20y1%3B%0A%20%20%20%20%20%20%20%20minY%20%3D%20y2%20%3C%20minY%20%3F%20y2%20%3A%20minY%3B%0A%20%20%20%20%20%20%20%20minY%20%3D%20y3%20%3C%20minY%20%3F%20y3%20%3A%20minY%3B%0A%20%20%20%20%20%20%20%20minY%20%3D%20y4%20%3C%20minY%20%3F%20y4%20%3A%20minY%3B%0A%0A%20%20%20%20%20%20%20%20maxX%20%3D%20x1%3B%0A%20%20%20%20%20%20%20%20maxX%20%3D%20x2%20%3E%20maxX%20%3F%20x2%20%3A%20maxX%3B%0A%20%20%20%20%20%20%20%20maxX%20%3D%20x3%20%3E%20maxX%20%3F%20x3%20%3A%20maxX%3B%0A%20%20%20%20%20%20%20%20maxX%20%3D%20x4%20%3E%20maxX%20%3F%20x4%20%3A%20maxX%3B%0A%0A%20%20%20%20%20%20%20%20maxY%20%3D%20y1%3B%0A%20%20%20%20%20%20%20%20maxY%20%3D%20y2%20%3E%20maxY%20%3F%20y2%20%3A%20maxY%3B%0A%20%20%20%20%20%20%20%20maxY%20%3D%20y3%20%3E%20maxY%20%3F%20y3%20%3A%20maxY%3B%0A%20%20%20%20%20%20%20%20maxY%20%3D%20y4%20%3E%20maxY%20%3F%20y4%20%3A%20maxY%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20check%20for%20children%0A%20%20%20%20%20%20%20%20if%28this%2Echildren%2Elength%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20childBounds%20%3D%20this%2EcontainerGetBounds%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20w0%20%3D%20childBounds%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20w1%20%3D%20childBounds%2Ex%20%2B%20childBounds%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20h0%20%3D%20childBounds%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20h1%20%3D%20childBounds%2Ey%20%2B%20childBounds%2Eheight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20minX%20%3D%20%28minX%20%3C%20w0%29%20%3F%20minX%20%3A%20w0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minY%20%3D%20%28minY%20%3C%20h0%29%20%3F%20minY%20%3A%20h0%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20maxX%20%3D%20%28maxX%20%3E%20w1%29%20%3F%20maxX%20%3A%20w1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20maxY%20%3D%20%28maxY%20%3E%20h1%29%20%3F%20maxY%20%3A%20h1%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20bounds%20%3D%20this%2E%5Fbounds%3B%0A%0A%20%20%20%20%20%20%20%20bounds%2Ex%20%3D%20minX%3B%0A%20%20%20%20%20%20%20%20bounds%2Ewidth%20%3D%20maxX%20%2D%20minX%3B%0A%0A%20%20%20%20%20%20%20%20bounds%2Ey%20%3D%20minY%3B%0A%20%20%20%20%20%20%20%20bounds%2Eheight%20%3D%20maxY%20%2D%20minY%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20store%20a%20reference%20so%20that%20if%20this%20function%20gets%20called%20again%20in%20the%20render%20cycle%20we%20do%20not%20have%20to%20recalculate%0A%20%20%20%20%20%20%20%20this%2E%5FcurrentBounds%20%3D%20bounds%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20this%2E%5FcurrentBounds%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Gets%20the%20local%20bounds%20of%20the%20sprite%20object%2E%0A%20%2A%0A%20%2A%2F%0ASprite%2Eprototype%2EgetLocalBounds%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2E%5Fbounds%2Ex%20%3D%20%2Dthis%2E%5Ftexture%2E%5Fframe%2Ewidth%20%2A%20this%2Eanchor%2Ex%3B%0A%20%20%20%20this%2E%5Fbounds%2Ey%20%3D%20%2Dthis%2E%5Ftexture%2E%5Fframe%2Eheight%20%2A%20this%2Eanchor%2Ey%3B%0A%20%20%20%20this%2E%5Fbounds%2Ewidth%20%3D%20this%2E%5Ftexture%2E%5Fframe%2Ewidth%3B%0A%20%20%20%20this%2E%5Fbounds%2Eheight%20%3D%20this%2E%5Ftexture%2E%5Fframe%2Eheight%3B%0A%20%20%20%20return%20this%2E%5Fbounds%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%2A%20Tests%20if%20a%20point%20is%20inside%20this%20sprite%0A%2A%0A%2A%20%40param%20point%20%7BPIXI%2EPoint%7D%20the%20point%20to%20test%0A%2A%20%40return%20%7Bboolean%7D%20the%20result%20of%20the%20test%0A%2A%2F%0ASprite%2Eprototype%2EcontainsPoint%20%3D%20function%28%20point%20%29%0A%7B%0A%20%20%20%20this%2EworldTransform%2EapplyInverse%28point%2C%20%20tempPoint%29%3B%0A%0A%20%20%20%20var%20width%20%3D%20this%2E%5Ftexture%2E%5Fframe%2Ewidth%3B%0A%20%20%20%20var%20height%20%3D%20this%2E%5Ftexture%2E%5Fframe%2Eheight%3B%0A%20%20%20%20var%20x1%20%3D%20%2Dwidth%20%2A%20this%2Eanchor%2Ex%3B%0A%20%20%20%20var%20y1%3B%0A%0A%20%20%20%20if%20%28%20tempPoint%2Ex%20%3E%20x1%20%26%26%20tempPoint%2Ex%20%3C%20x1%20%2B%20width%20%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20y1%20%3D%20%2Dheight%20%2A%20this%2Eanchor%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%20tempPoint%2Ey%20%3E%20y1%20%26%26%20tempPoint%2Ey%20%3C%20y1%20%2B%20height%20%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20false%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%2A%20Renders%20the%20object%20using%20the%20Canvas%20renderer%0A%2A%0A%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7D%20The%20renderer%0A%2A%20%40private%0A%2A%2F%0ASprite%2Eprototype%2E%5FrenderCanvas%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20if%20%28this%2Etexture%2Ecrop%2Ewidth%20%3C%3D%200%20%7C%7C%20this%2Etexture%2Ecrop%2Eheight%20%3C%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20compositeOperation%20%3D%20renderer%2EblendModes%5Bthis%2EblendMode%5D%3B%0A%20%20%20%20if%20%28compositeOperation%20%21%3D%3D%20renderer%2Econtext%2EglobalCompositeOperation%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20renderer%2Econtext%2EglobalCompositeOperation%20%3D%20compositeOperation%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20%20Ignore%20null%20sources%0A%20%20%20%20if%20%28this%2Etexture%2Evalid%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20texture%20%3D%20this%2E%5Ftexture%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%20%3D%20this%2EworldTransform%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dx%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dy%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20width%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20height%3B%0A%0A%20%20%20%20%20%20%20%20renderer%2Econtext%2EglobalAlpha%20%3D%20this%2EworldAlpha%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20smoothingEnabled%20is%20supported%20and%20we%20need%20to%20change%20the%20smoothing%20property%20for%20this%20texture%0A%20%20%20%20%20%20%20%20var%20smoothingEnabled%20%3D%20texture%2EbaseTexture%2EscaleMode%20%3D%3D%3D%20CONST%2ESCALE%5FMODES%2ELINEAR%3B%0A%20%20%20%20%20%20%20%20if%20%28renderer%2EsmoothProperty%20%26%26%20renderer%2Econtext%5Brenderer%2EsmoothProperty%5D%20%21%3D%3D%20smoothingEnabled%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2Econtext%5Brenderer%2EsmoothProperty%5D%20%3D%20smoothingEnabled%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20texture%20is%20trimmed%20we%20offset%20by%20the%20trim%20x%2Fy%2C%20otherwise%20we%20use%20the%20frame%20dimensions%0A%0A%20%20%20%20%20%20%20%20if%28texture%2Erotate%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20width%20%3D%20texture%2Ecrop%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20height%20%3D%20texture%2Ecrop%2Ewidth%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20dx%20%3D%20%28texture%2Etrim%29%20%3F%20texture%2Etrim%2Ey%20%2D%20this%2Eanchor%2Ey%20%2A%20texture%2Etrim%2Eheight%20%3A%20this%2Eanchor%2Ey%20%2A%20%2Dtexture%2E%5Fframe%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dy%20%3D%20%28texture%2Etrim%29%20%3F%20texture%2Etrim%2Ex%20%2D%20this%2Eanchor%2Ex%20%2A%20texture%2Etrim%2Ewidth%20%3A%20this%2Eanchor%2Ex%20%2A%20%2Dtexture%2E%5Fframe%2Ewidth%3B%0A%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20dx%20%2B%3D%20width%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Etx%20%3D%20dy%20%2A%20wt%2Ea%20%2B%20dx%20%2A%20wt%2Ec%20%2B%20wt%2Etx%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ety%20%3D%20dy%20%2A%20wt%2Eb%20%2B%20dx%20%2A%20wt%2Ed%20%2B%20wt%2Ety%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20temp%20%3D%20wt%2Ea%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ea%20%20%3D%20%2Dwt%2Ec%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ec%20%20%3D%20%20temp%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3D%20wt%2Eb%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Eb%20%20%3D%20%2Dwt%2Ed%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ed%20%20%3D%20%20temp%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20anchor%20has%20already%20been%20applied%20above%2C%20so%20lets%20set%20it%20to%20zero%0A%20%20%20%20%20%20%20%20%20%20%20%20dx%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dy%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20width%20%3D%20texture%2Ecrop%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20height%20%3D%20texture%2Ecrop%2Eheight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20dx%20%3D%20%28texture%2Etrim%29%20%3F%20texture%2Etrim%2Ex%20%2D%20this%2Eanchor%2Ex%20%2A%20texture%2Etrim%2Ewidth%20%3A%20this%2Eanchor%2Ex%20%2A%20%2Dtexture%2E%5Fframe%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dy%20%3D%20%28texture%2Etrim%29%20%3F%20texture%2Etrim%2Ey%20%2D%20this%2Eanchor%2Ey%20%2A%20texture%2Etrim%2Eheight%20%3A%20this%2Eanchor%2Ey%20%2A%20%2Dtexture%2E%5Fframe%2Eheight%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Allow%20for%20pixel%20rounding%0A%20%20%20%20%20%20%20%20if%20%28renderer%2EroundPixels%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2Econtext%2EsetTransform%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ea%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wt%2Eb%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ec%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ed%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28wt%2Etx%20%2A%20renderer%2Eresolution%29%20%7C%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28wt%2Ety%20%2A%20renderer%2Eresolution%29%20%7C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20dx%20%3D%20dx%20%7C%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dy%20%3D%20dy%20%7C%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2Econtext%2EsetTransform%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ea%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wt%2Eb%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ec%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ed%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wt%2Etx%20%2A%20renderer%2Eresolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wt%2Ety%20%2A%20renderer%2Eresolution%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%0A%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20resolution%20%3D%20texture%2EbaseTexture%2Eresolution%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28this%2Etint%20%21%3D%3D%200xFFFFFF%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2EcachedTint%20%21%3D%3D%20this%2Etint%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EcachedTint%20%3D%20this%2Etint%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%20clean%20up%20caching%20%2D%20how%20to%20clean%20up%20the%20caches%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EtintedTexture%20%3D%20CanvasTinter%2EgetTintedTexture%28this%2C%20this%2Etint%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2Econtext%2EdrawImage%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EtintedTexture%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20height%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dx%20%2A%20renderer%2Eresolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dy%20%2A%20renderer%2Eresolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%20%2A%20renderer%2Eresolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20height%20%2A%20renderer%2Eresolution%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2Econtext%2EdrawImage%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20texture%2EbaseTexture%2Esource%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20texture%2Ecrop%2Ex%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20texture%2Ecrop%2Ey%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20height%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dx%20%20%2A%20renderer%2Eresolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dy%20%20%2A%20renderer%2Eresolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%20%2A%20renderer%2Eresolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20height%20%2A%20renderer%2Eresolution%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20this%20sprite%20and%20optionally%20its%20texture%0A%20%2A%0A%20%2A%20%40param%20%5BdestroyTexture%3Dfalse%5D%20%7Bboolean%7D%20Should%20it%20destroy%20the%20current%20texture%20of%20the%20sprite%20as%20well%0A%20%2A%20%40param%20%5BdestroyBaseTexture%3Dfalse%5D%20%7Bboolean%7D%20Should%20it%20destroy%20the%20base%20texture%20of%20the%20sprite%20as%20well%0A%20%2A%2F%0ASprite%2Eprototype%2Edestroy%20%3D%20function%20%28destroyTexture%2C%20destroyBaseTexture%29%0A%7B%0A%20%20%20%20Container%2Eprototype%2Edestroy%2Ecall%28this%29%3B%0A%0A%20%20%20%20this%2Eanchor%20%3D%20null%3B%0A%0A%20%20%20%20if%20%28destroyTexture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5Ftexture%2Edestroy%28destroyBaseTexture%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2E%5Ftexture%20%3D%20null%3B%0A%20%20%20%20this%2Eshader%20%3D%20null%3B%0A%7D%3B%0A%0A%2F%2F%20some%20helper%20functions%2E%2E%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20sprite%20that%20will%20contain%20a%20texture%20from%20the%20TextureCache%20based%20on%20the%20frameId%0A%20%2A%20The%20frame%20ids%20are%20created%20when%20a%20Texture%20packer%20file%20has%20been%20loaded%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20frameId%20%7Bstring%7D%20The%20frame%20Id%20of%20the%20texture%20in%20the%20cache%0A%20%2A%20%40param%20%5Bcrossorigin%3D%28auto%29%5D%20%7Bboolean%7D%20if%20you%20want%20to%20specify%20the%20cross%2Dorigin%20parameter%0A%20%2A%20%40param%20%5BscaleMode%3DPIXI%2ESCALE%5FMODES%2EDEFAULT%5D%20%7Bnumber%7D%20if%20you%20want%20to%20specify%20the%20scale%20mode%2C%20see%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40return%20%7BPIXI%2ESprite%7D%20A%20new%20Sprite%20using%20a%20texture%20from%20the%20texture%20cache%20matching%20the%20frameId%0A%20%2A%2F%0ASprite%2EfromFrame%20%3D%20function%20%28frameId%29%0A%7B%0A%20%20%20%20var%20texture%20%3D%20utils%2ETextureCache%5BframeId%5D%3B%0A%0A%20%20%20%20if%20%28%21texture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27The%20frameId%20%22%27%20%2B%20frameId%20%2B%20%27%22%20does%20not%20exist%20in%20the%20texture%20cache%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20new%20Sprite%28texture%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20sprite%20that%20will%20contain%20a%20texture%20based%20on%20an%20image%20url%0A%20%2A%20If%20the%20image%20is%20not%20in%20the%20texture%20cache%20it%20will%20be%20loaded%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20imageId%20%7Bstring%7D%20The%20image%20url%20of%20the%20texture%0A%20%2A%20%40return%20%7BPIXI%2ESprite%7D%20A%20new%20Sprite%20using%20a%20texture%20from%20the%20texture%20cache%20matching%20the%20image%20id%0A%20%2A%2F%0ASprite%2EfromImage%20%3D%20function%20%28imageId%2C%20crossorigin%2C%20scaleMode%29%0A%7B%0A%20%20%20%20return%20new%20Sprite%28Texture%2EfromImage%28imageId%2C%20crossorigin%2C%20scaleMode%29%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2Fdisplay%2FContainer%22%3A17%2C%22%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasTinter%22%3A41%2C%22%2E%2E%2Ftextures%2FTexture%22%3A65%2C%22%2E%2E%2Futils%22%3A70%7D%5D%2C61%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20ObjectRenderer%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2Futils%2FObjectRenderer%27%29%2C%0A%20%20%20%20WebGLRenderer%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2FWebGLRenderer%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Mat%20Groves%0A%20%2A%0A%20%2A%20Big%20thanks%20to%20the%20very%20clever%20Matt%20DesLauriers%20%3Cmattdesl%3E%20https%3A%2F%2Fgithub%2Ecom%2Fmattdesl%2F%0A%20%2A%20for%20creating%20the%20original%20pixi%20version%21%0A%20%2A%20Also%20a%20thanks%20to%20https%3A%2F%2Fgithub%2Ecom%2Fbchevalier%20for%20tweaking%20the%20tint%20and%20alpha%20so%20that%20they%20now%20share%204%20bytes%20on%20the%20vertex%20buffer%0A%20%2A%0A%20%2A%20Heavily%20inspired%20by%20LibGDX%27s%20SpriteRenderer%3A%0A%20%2A%20https%3A%2F%2Fgithub%2Ecom%2Flibgdx%2Flibgdx%2Fblob%2Fmaster%2Fgdx%2Fsrc%2Fcom%2Fbadlogic%2Fgdx%2Fgraphics%2Fg2d%2FSpriteRenderer%2Ejava%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20Renderer%20dedicated%20to%20drawing%20and%20batching%20sprites%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40private%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40extends%20PIXI%2EObjectRenderer%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20this%20sprite%20batch%20works%20for%2E%0A%20%2A%2F%0Afunction%20SpriteRenderer%28renderer%29%0A%7B%0A%20%20%20%20ObjectRenderer%2Ecall%28this%2C%20renderer%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Number%20of%20values%20sent%20in%20the%20vertex%20buffer%2E%0A%20%20%20%20%20%2A%20positionX%2C%20positionY%2C%20colorR%2C%20colorG%2C%20colorB%20%3D%205%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EvertSize%20%3D%205%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20size%20of%20the%20vertex%20information%20in%20bytes%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EvertByteSize%20%3D%20this%2EvertSize%20%2A%204%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20number%20of%20images%20in%20the%20SpriteBatch%20before%20it%20flushes%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Esize%20%3D%20CONST%2ESPRITE%5FBATCH%5FSIZE%3B%20%2F%2F%202000%20is%20a%20nice%20balance%20between%20mobile%20%2F%20desktop%0A%0A%20%20%20%20%2F%2F%20the%20total%20number%20of%20bytes%20in%20our%20batch%0A%20%20%20%20var%20numVerts%20%3D%20%28this%2Esize%20%2A%204%29%20%2A%20this%2EvertByteSize%3B%0A%0A%20%20%20%20%2F%2F%20the%20total%20number%20of%20indices%20in%20our%20batch%2C%20there%20are%206%20points%20per%20quad%2E%0A%20%20%20%20var%20numIndices%20%3D%20this%2Esize%20%2A%206%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Holds%20the%20vertex%20data%20that%20will%20be%20sent%20to%20the%20vertex%20shader%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BArrayBuffer%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Evertices%20%3D%20new%20ArrayBuffer%28numVerts%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20View%20on%20the%20vertices%20as%20a%20Float32Array%20for%20positions%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFloat32Array%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Epositions%20%3D%20new%20Float32Array%28this%2Evertices%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20View%20on%20the%20vertices%20as%20a%20Uint32Array%20for%20colors%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BUint32Array%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ecolors%20%3D%20new%20Uint32Array%28this%2Evertices%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Holds%20the%20indices%20of%20the%20geometry%20%28quads%29%20to%20draw%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BUint16Array%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eindices%20%3D%20new%20Uint16Array%28numIndices%29%3B%0A%0A%20%20%20%20%2F%2F%20fill%20the%20indices%20with%20the%20quads%20to%20draw%0A%20%20%20%20for%20%28var%20i%3D0%2C%20j%3D0%3B%20i%20%3C%20numIndices%3B%20i%20%2B%3D%206%2C%20j%20%2B%3D%204%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%200%5D%20%3D%20j%20%2B%200%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%201%5D%20%3D%20j%20%2B%201%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%202%5D%20%3D%20j%20%2B%202%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%203%5D%20%3D%20j%20%2B%200%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%204%5D%20%3D%20j%20%2B%202%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%205%5D%20%3D%20j%20%2B%203%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20current%20size%20of%20the%20batch%2C%20each%20render%28%29%20call%20adds%20to%20this%20number%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcurrentBatchSize%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20current%20sprites%20in%20the%20batch%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ESprite%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Esprites%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20default%20shader%20that%20is%20used%20if%20a%20sprite%20doesn%27t%20have%20a%20more%20specific%20one%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EShader%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eshader%20%3D%20null%3B%0A%7D%0A%0ASpriteRenderer%2Eprototype%20%3D%20Object%2Ecreate%28ObjectRenderer%2Eprototype%29%3B%0ASpriteRenderer%2Eprototype%2Econstructor%20%3D%20SpriteRenderer%3B%0Amodule%2Eexports%20%3D%20SpriteRenderer%3B%0A%0AWebGLRenderer%2EregisterPlugin%28%27sprite%27%2C%20SpriteRenderer%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20up%20the%20renderer%20context%20and%20necessary%20buffers%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20gl%20%7BWebGLRenderingContext%7D%20the%20current%20WebGL%20drawing%20context%0A%20%2A%2F%0ASpriteRenderer%2Eprototype%2EonContextChange%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20%2F%2F%20setup%20default%20shader%0A%20%20%20%20this%2Eshader%20%3D%20this%2Erenderer%2EshaderManager%2EdefaultShader%3B%0A%0A%20%20%20%20%2F%2F%20create%20a%20couple%20of%20buffers%0A%20%20%20%20this%2EvertexBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%20%20%20%20this%2EindexBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%0A%20%20%20%20%2F%2Fupload%20the%20index%20data%0A%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20this%2EindexBuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20this%2Eindices%2C%20gl%2ESTATIC%5FDRAW%29%3B%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20this%2EvertexBuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EARRAY%5FBUFFER%2C%20this%2Evertices%2C%20gl%2EDYNAMIC%5FDRAW%29%3B%0A%0A%20%20%20%20this%2EcurrentBlendMode%20%3D%2099999%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20sprite%20object%2E%0A%20%2A%0A%20%2A%20%40param%20sprite%20%7BPIXI%2ESprite%7D%20the%20sprite%20to%20render%20when%20using%20this%20spritebatch%0A%20%2A%2F%0ASpriteRenderer%2Eprototype%2Erender%20%3D%20function%20%28sprite%29%0A%7B%0A%20%20%20%20var%20texture%20%3D%20sprite%2E%5Ftexture%3B%0A%0A%20%20%20%20%2F%2FTODO%20set%20blend%20modes%2E%2E%0A%20%20%20%20%2F%2F%20check%20texture%2E%2E%0A%20%20%20%20if%20%28this%2EcurrentBatchSize%20%3E%3D%20this%2Esize%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eflush%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20get%20the%20uvs%20for%20the%20texture%0A%20%20%20%20var%20uvs%20%3D%20texture%2E%5Fuvs%3B%0A%0A%20%20%20%20%2F%2F%20if%20the%20uvs%20have%20not%20updated%20then%20no%20point%20rendering%20just%20yet%21%0A%20%20%20%20if%20%28%21uvs%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20TODO%20trim%3F%3F%0A%20%20%20%20var%20aX%20%3D%20sprite%2Eanchor%2Ex%3B%0A%20%20%20%20var%20aY%20%3D%20sprite%2Eanchor%2Ey%3B%0A%0A%20%20%20%20var%20w0%2C%20w1%2C%20h0%2C%20h1%3B%0A%0A%20%20%20%20if%20%28texture%2Etrim%20%26%26%20sprite%2EtileScale%20%3D%3D%3D%20undefined%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20the%20sprite%20is%20trimmed%20and%20is%20not%20a%20tilingsprite%20then%20we%20need%20to%20add%20the%20extra%20space%20before%20transforming%20the%20sprite%20coords%2E%2E%0A%20%20%20%20%20%20%20%20var%20trim%20%3D%20texture%2Etrim%3B%0A%0A%20%20%20%20%20%20%20%20w1%20%3D%20trim%2Ex%20%2D%20aX%20%2A%20trim%2Ewidth%3B%0A%20%20%20%20%20%20%20%20w0%20%3D%20w1%20%2B%20texture%2Ecrop%2Ewidth%3B%0A%0A%20%20%20%20%20%20%20%20h1%20%3D%20trim%2Ey%20%2D%20aY%20%2A%20trim%2Eheight%3B%0A%20%20%20%20%20%20%20%20h0%20%3D%20h1%20%2B%20texture%2Ecrop%2Eheight%3B%0A%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20w0%20%3D%20%28texture%2E%5Fframe%2Ewidth%20%29%20%2A%20%281%2DaX%29%3B%0A%20%20%20%20%20%20%20%20w1%20%3D%20%28texture%2E%5Fframe%2Ewidth%20%29%20%2A%20%2DaX%3B%0A%0A%20%20%20%20%20%20%20%20h0%20%3D%20texture%2E%5Fframe%2Eheight%20%2A%20%281%2DaY%29%3B%0A%20%20%20%20%20%20%20%20h1%20%3D%20texture%2E%5Fframe%2Eheight%20%2A%20%2DaY%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20index%20%3D%20this%2EcurrentBatchSize%20%2A%20this%2EvertByteSize%3B%0A%0A%20%20%20%20var%20worldTransform%20%3D%20sprite%2EworldTransform%3B%0A%0A%20%20%20%20var%20a%20%3D%20worldTransform%2Ea%3B%0A%20%20%20%20var%20b%20%3D%20worldTransform%2Eb%3B%0A%20%20%20%20var%20c%20%3D%20worldTransform%2Ec%3B%0A%20%20%20%20var%20d%20%3D%20worldTransform%2Ed%3B%0A%20%20%20%20var%20tx%20%3D%20worldTransform%2Etx%3B%0A%20%20%20%20var%20ty%20%3D%20worldTransform%2Ety%3B%0A%0A%20%20%20%20var%20colors%20%3D%20this%2Ecolors%3B%0A%20%20%20%20var%20positions%20%3D%20this%2Epositions%3B%0A%0A%20%20%20%20if%20%28this%2Erenderer%2EroundPixels%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20resolution%20%3D%20this%2Erenderer%2Eresolution%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20xy%0A%20%20%20%20%20%20%20%20positions%5Bindex%5D%20%3D%20%28%28%28a%20%2A%20w1%20%2B%20c%20%2A%20h1%20%2B%20tx%29%20%2A%20resolution%29%20%7C%200%29%20%2F%20resolution%3B%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B1%5D%20%3D%20%28%28%28d%20%2A%20h1%20%2B%20b%20%2A%20w1%20%2B%20ty%29%20%2A%20resolution%29%20%7C%200%29%20%2F%20resolution%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20xy%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B5%5D%20%3D%20%28%28%28a%20%2A%20w0%20%2B%20c%20%2A%20h1%20%2B%20tx%29%20%2A%20resolution%29%20%7C%200%29%20%2F%20resolution%3B%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B6%5D%20%3D%20%28%28%28d%20%2A%20h1%20%2B%20b%20%2A%20w0%20%2B%20ty%29%20%2A%20resolution%29%20%7C%200%29%20%2F%20resolution%3B%0A%0A%20%20%20%20%20%20%20%20%20%2F%2F%20xy%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B10%5D%20%3D%20%28%28%28a%20%2A%20w0%20%2B%20c%20%2A%20h0%20%2B%20tx%29%20%2A%20resolution%29%20%7C%200%29%20%2F%20resolution%3B%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B11%5D%20%3D%20%28%28%28d%20%2A%20h0%20%2B%20b%20%2A%20w0%20%2B%20ty%29%20%2A%20resolution%29%20%7C%200%29%20%2F%20resolution%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20xy%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B15%5D%20%3D%20%28%28%28a%20%2A%20w1%20%2B%20c%20%2A%20h0%20%2B%20tx%29%20%2A%20resolution%29%20%7C%200%29%20%2F%20resolution%3B%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B16%5D%20%3D%20%28%28%28d%20%2A%20h0%20%2B%20b%20%2A%20w1%20%2B%20ty%29%20%2A%20resolution%29%20%7C%200%29%20%2F%20resolution%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20xy%0A%20%20%20%20%20%20%20%20positions%5Bindex%5D%20%3D%20a%20%2A%20w1%20%2B%20c%20%2A%20h1%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B1%5D%20%3D%20d%20%2A%20h1%20%2B%20b%20%2A%20w1%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20xy%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B5%5D%20%3D%20a%20%2A%20w0%20%2B%20c%20%2A%20h1%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B6%5D%20%3D%20d%20%2A%20h1%20%2B%20b%20%2A%20w0%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20%20%2F%2F%20xy%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B10%5D%20%3D%20a%20%2A%20w0%20%2B%20c%20%2A%20h0%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B11%5D%20%3D%20d%20%2A%20h0%20%2B%20b%20%2A%20w0%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20xy%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B15%5D%20%3D%20a%20%2A%20w1%20%2B%20c%20%2A%20h0%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20positions%5Bindex%2B16%5D%20%3D%20d%20%2A%20h0%20%2B%20b%20%2A%20w1%20%2B%20ty%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20uv%0A%20%20%20%20positions%5Bindex%2B2%5D%20%3D%20uvs%2Ex0%3B%0A%20%20%20%20positions%5Bindex%2B3%5D%20%3D%20uvs%2Ey0%3B%0A%0A%20%20%20%20%2F%2F%20uv%0A%20%20%20%20positions%5Bindex%2B7%5D%20%3D%20uvs%2Ex1%3B%0A%20%20%20%20positions%5Bindex%2B8%5D%20%3D%20uvs%2Ey1%3B%0A%0A%20%20%20%20%20%2F%2F%20uv%0A%20%20%20%20positions%5Bindex%2B12%5D%20%3D%20uvs%2Ex2%3B%0A%20%20%20%20positions%5Bindex%2B13%5D%20%3D%20uvs%2Ey2%3B%0A%0A%20%20%20%20%2F%2F%20uv%0A%20%20%20%20positions%5Bindex%2B17%5D%20%3D%20uvs%2Ex3%3B%0A%20%20%20%20positions%5Bindex%2B18%5D%20%3D%20uvs%2Ey3%3B%0A%0A%20%20%20%20%2F%2F%20color%20and%20alpha%0A%20%20%20%20var%20tint%20%3D%20sprite%2Etint%3B%0A%20%20%20%20colors%5Bindex%2B4%5D%20%3D%20colors%5Bindex%2B9%5D%20%3D%20colors%5Bindex%2B14%5D%20%3D%20colors%5Bindex%2B19%5D%20%3D%20%28tint%20%3E%3E%2016%29%20%2B%20%28tint%20%26%200xff00%29%20%2B%20%28%28tint%20%26%200xff%29%20%3C%3C%2016%29%20%2B%20%28sprite%2EworldAlpha%20%2A%20255%20%3C%3C%2024%29%3B%0A%0A%20%20%20%20%2F%2F%20increment%20the%20batchsize%0A%20%20%20%20this%2Esprites%5Bthis%2EcurrentBatchSize%2B%2B%5D%20%3D%20sprite%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20content%20and%20empties%20the%20current%20batch%2E%0A%20%2A%0A%20%2A%2F%0ASpriteRenderer%2Eprototype%2Eflush%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20%2F%2F%20If%20the%20batch%20is%20length%200%20then%20return%20as%20there%20is%20nothing%20to%20draw%0A%20%20%20%20if%20%28this%2EcurrentBatchSize%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%20%20%20%20var%20shader%3B%0A%0A%20%20%20%20%2F%2F%20upload%20the%20verts%20to%20the%20buffer%0A%20%20%20%20if%20%28this%2EcurrentBatchSize%20%3E%20%28%20this%2Esize%20%2A%200%2E5%20%29%20%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20gl%2EbufferSubData%28gl%2EARRAY%5FBUFFER%2C%200%2C%20this%2Evertices%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20view%20%3D%20this%2Epositions%2Esubarray%280%2C%20this%2EcurrentBatchSize%20%2A%20this%2EvertByteSize%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbufferSubData%28gl%2EARRAY%5FBUFFER%2C%200%2C%20view%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20nextTexture%2C%20nextBlendMode%2C%20nextShader%3B%0A%20%20%20%20var%20batchSize%20%3D%200%3B%0A%20%20%20%20var%20start%20%3D%200%3B%0A%0A%20%20%20%20var%20currentBaseTexture%20%3D%20null%3B%0A%20%20%20%20var%20currentBlendMode%20%3D%20this%2Erenderer%2EblendModeManager%2EcurrentBlendMode%3B%0A%20%20%20%20var%20currentShader%20%3D%20null%3B%0A%0A%20%20%20%20var%20blendSwap%20%3D%20false%3B%0A%20%20%20%20var%20shaderSwap%20%3D%20false%3B%0A%20%20%20%20var%20sprite%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20j%20%3D%20this%2EcurrentBatchSize%3B%20i%20%3C%20j%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20sprite%20%3D%20this%2Esprites%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20nextTexture%20%3D%20sprite%2E%5Ftexture%2EbaseTexture%3B%0A%20%20%20%20%20%20%20%20nextBlendMode%20%3D%20sprite%2EblendMode%3B%0A%20%20%20%20%20%20%20%20nextShader%20%3D%20sprite%2Eshader%20%7C%7C%20this%2Eshader%3B%0A%0A%20%20%20%20%20%20%20%20blendSwap%20%3D%20currentBlendMode%20%21%3D%3D%20nextBlendMode%3B%0A%20%20%20%20%20%20%20%20shaderSwap%20%3D%20currentShader%20%21%3D%3D%20nextShader%3B%20%2F%2F%20should%20I%20use%20uidS%3F%3F%3F%0A%0A%20%20%20%20%20%20%20%20if%20%28currentBaseTexture%20%21%3D%3D%20nextTexture%20%7C%7C%20blendSwap%20%7C%7C%20shaderSwap%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2ErenderBatch%28currentBaseTexture%2C%20batchSize%2C%20start%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20start%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20batchSize%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20currentBaseTexture%20%3D%20nextTexture%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28blendSwap%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20currentBlendMode%20%3D%20nextBlendMode%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Erenderer%2EblendModeManager%2EsetBlendMode%28%20currentBlendMode%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28shaderSwap%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20currentShader%20%3D%20nextShader%3B%0A%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shader%20%3D%20currentShader%2Eshaders%20%3F%20currentShader%2Eshaders%5Bgl%2Eid%5D%20%3A%20currentShader%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21shader%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shader%20%3D%20currentShader%2EgetShader%28this%2Erenderer%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20set%20shader%20function%3F%3F%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Erenderer%2EshaderManager%2EsetShader%28shader%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FTODO%20%2D%20i%20KNOW%20this%20can%20be%20optimised%21%20Once%20v3%20is%20stable%20il%20look%20at%20this%20next%2E%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shader%2Euniforms%2EprojectionMatrix%2Evalue%20%3D%20this%2Erenderer%2EcurrentRenderTarget%2EprojectionMatrix%2EtoArray%28true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMake%20this%20a%20little%20more%20dynamic%20%2F%20intelligent%21%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shader%2EsyncUniforms%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FTODO%20investigate%20some%20kind%20of%20texture%20state%20managment%3F%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20need%20to%20make%20sure%20this%20texture%20is%20the%20active%20one%20for%20all%20the%20batch%20swaps%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%2EactiveTexture%28gl%2ETEXTURE0%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20both%20thease%20only%20need%20to%20be%20set%20if%20they%20are%20changing%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20projection%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fgl%2EuniformMatrix3fv%28shader%2Euniforms%2EprojectionMatrix%2E%5Flocation%2C%20false%2C%20this%2Erenderer%2EcurrentRenderTarget%2EprojectionMatrix%2EtoArray%28true%29%29%3B%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20batchSize%2B%2B%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2ErenderBatch%28currentBaseTexture%2C%20batchSize%2C%20start%29%3B%0A%0A%20%20%20%20%2F%2F%20then%20reset%20the%20batch%21%0A%20%20%20%20this%2EcurrentBatchSize%20%3D%200%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Draws%20the%20currently%20batches%20sprites%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20texture%20%7BPIXI%2ETexture%7D%0A%20%2A%20%40param%20size%20%7Bnumber%7D%0A%20%2A%20%40param%20startIndex%20%7Bnumber%7D%0A%20%2A%2F%0ASpriteRenderer%2Eprototype%2ErenderBatch%20%3D%20function%20%28texture%2C%20size%2C%20startIndex%29%0A%7B%0A%20%20%20%20if%20%28size%20%3D%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20if%20%28%21texture%2E%5FglTextures%5Bgl%2Eid%5D%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Erenderer%2EupdateTexture%28texture%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20bind%20the%20current%20texture%0A%20%20%20%20%20%20%20%20gl%2EbindTexture%28gl%2ETEXTURE%5F2D%2C%20texture%2E%5FglTextures%5Bgl%2Eid%5D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20now%20draw%20those%20suckas%21%0A%20%20%20%20gl%2EdrawElements%28gl%2ETRIANGLES%2C%20size%20%2A%206%2C%20gl%2EUNSIGNED%5FSHORT%2C%20startIndex%20%2A%206%20%2A%202%29%3B%0A%0A%20%20%20%20%2F%2F%20increment%20the%20draw%20count%0A%20%20%20%20this%2Erenderer%2EdrawCount%2B%2B%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Starts%20a%20new%20sprite%20batch%2E%0A%20%2A%0A%20%2A%2F%0ASpriteRenderer%2Eprototype%2Estart%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20%2F%2F%20bind%20the%20main%20texture%0A%0A%0A%20%20%20%20%2F%2F%20bind%20the%20buffers%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20this%2EvertexBuffer%29%3B%0A%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20this%2EindexBuffer%29%3B%0A%0A%20%20%20%20%2F%2F%20this%20is%20the%20same%20for%20each%20shader%3F%0A%20%20%20%20var%20stride%20%3D%20%20this%2EvertByteSize%3B%0A%20%20%20%20gl%2EvertexAttribPointer%28this%2Eshader%2Eattributes%2EaVertexPosition%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%20stride%2C%200%29%3B%0A%20%20%20%20gl%2EvertexAttribPointer%28this%2Eshader%2Eattributes%2EaTextureCoord%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%20stride%2C%202%20%2A%204%29%3B%0A%0A%20%20%20%20%2F%2F%20color%20attributes%20will%20be%20interpreted%20as%20unsigned%20bytes%20and%20normalized%0A%20%20%20%20gl%2EvertexAttribPointer%28this%2Eshader%2Eattributes%2EaColor%2C%204%2C%20gl%2EUNSIGNED%5FBYTE%2C%20true%2C%20stride%2C%204%20%2A%204%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20SpriteBatch%2E%0A%20%2A%0A%20%2A%2F%0ASpriteRenderer%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Erenderer%2Egl%2EdeleteBuffer%28this%2EvertexBuffer%29%3B%0A%20%20%20%20this%2Erenderer%2Egl%2EdeleteBuffer%28this%2EindexBuffer%29%3B%0A%0A%20%20%20%20ObjectRenderer%2Eprototype%2Edestroy%2Ecall%28this%29%3B%0A%0A%20%20%20%20this%2Eshader%2Edestroy%28%29%3B%0A%0A%20%20%20%20this%2Erenderer%20%3D%20null%3B%0A%0A%20%20%20%20this%2Evertices%20%3D%20null%3B%0A%20%20%20%20this%2Epositions%20%3D%20null%3B%0A%20%20%20%20this%2Ecolors%20%3D%20null%3B%0A%20%20%20%20this%2Eindices%20%3D%20null%3B%0A%0A%20%20%20%20this%2EvertexBuffer%20%3D%20null%3B%0A%20%20%20%20this%2EindexBuffer%20%3D%20null%3B%0A%0A%20%20%20%20this%2Esprites%20%3D%20null%3B%0A%20%20%20%20this%2Eshader%20%3D%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2FWebGLRenderer%22%3A42%2C%22%2E%2E%2F%2E%2E%2Frenderers%2Fwebgl%2Futils%2FObjectRenderer%22%3A56%7D%5D%2C62%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Sprite%20%3D%20require%28%27%2E%2E%2Fsprites%2FSprite%27%29%2C%0A%20%20%20%20Texture%20%3D%20require%28%27%2E%2E%2Ftextures%2FTexture%27%29%2C%0A%20%20%20%20math%20%3D%20require%28%27%2E%2E%2Fmath%27%29%2C%0A%20%20%20%20utils%20%3D%20require%28%27%2E%2E%2Futils%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20Text%20Object%20will%20create%20a%20line%20or%20multiple%20lines%20of%20text%2E%20To%20split%20a%20line%20you%20can%20use%20%27%5Cn%27%20in%20your%20text%20string%2C%0A%20%2A%20or%20add%20a%20wordWrap%20property%20set%20to%20true%20and%20and%20wordWrapWidth%20property%20with%20a%20value%20in%20the%20style%20object%2E%0A%20%2A%0A%20%2A%20A%20Text%20can%20be%20created%20directly%20from%20a%20string%20and%20a%20style%20object%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20var%20text%20%3D%20new%20PIXI%2EText%28%27This%20is%20a%20pixi%20text%27%2C%7Bfont%20%3A%20%2724px%20Arial%27%2C%20fill%20%3A%200xff1010%2C%20align%20%3A%20%27center%27%7D%29%3B%0A%20%2A%20%60%60%60%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2ESprite%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20text%20%7Bstring%7D%20The%20copy%20that%20you%20would%20like%20the%20text%20to%20display%0A%20%2A%20%40param%20%5Bstyle%5D%20%7Bobject%7D%20The%20style%20parameters%0A%20%2A%20%40param%20%5Bstyle%2Efont%5D%20%7Bstring%7D%20default%20%27bold%2020px%20Arial%27%20The%20style%20and%20size%20of%20the%20font%0A%20%2A%20%40param%20%5Bstyle%2Efill%3D%27black%27%5D%20%7BString%7CNumber%7D%20A%20canvas%20fillstyle%20that%20will%20be%20used%20on%20the%20text%20e%2Eg%20%27red%27%2C%20%27%2300FF00%27%0A%20%2A%20%40param%20%5Bstyle%2Ealign%3D%27left%27%5D%20%7Bstring%7D%20Alignment%20for%20multiline%20text%20%28%27left%27%2C%20%27center%27%20or%20%27right%27%29%2C%20does%20not%20affect%20single%20line%20text%0A%20%2A%20%40param%20%5Bstyle%2Estroke%5D%20%7BString%7CNumber%7D%20A%20canvas%20fillstyle%20that%20will%20be%20used%20on%20the%20text%20stroke%20e%2Eg%20%27blue%27%2C%20%27%23FCFF00%27%0A%20%2A%20%40param%20%5Bstyle%2EstrokeThickness%3D0%5D%20%7Bnumber%7D%20A%20number%20that%20represents%20the%20thickness%20of%20the%20stroke%2E%20Default%20is%200%20%28no%20stroke%29%0A%20%2A%20%40param%20%5Bstyle%2EwordWrap%3Dfalse%5D%20%7Bboolean%7D%20Indicates%20if%20word%20wrap%20should%20be%20used%0A%20%2A%20%40param%20%5Bstyle%2EwordWrapWidth%3D100%5D%20%7Bnumber%7D%20The%20width%20at%20which%20text%20will%20wrap%2C%20it%20needs%20wordWrap%20to%20be%20set%20to%20true%0A%20%2A%20%40param%20%5Bstyle%2ElineHeight%5D%20%7Bnumber%7D%20The%20line%20height%2C%20a%20number%20that%20represents%20the%20vertical%20space%20that%20a%20letter%20uses%0A%20%2A%20%40param%20%5Bstyle%2EdropShadow%3Dfalse%5D%20%7Bboolean%7D%20Set%20a%20drop%20shadow%20for%20the%20text%0A%20%2A%20%40param%20%5Bstyle%2EdropShadowColor%3D%27%23000000%27%5D%20%7Bstring%7D%20A%20fill%20style%20to%20be%20used%20on%20the%20dropshadow%20e%2Eg%20%27red%27%2C%20%27%2300FF00%27%0A%20%2A%20%40param%20%5Bstyle%2EdropShadowAngle%3DMath%2EPI%2F4%5D%20%7Bnumber%7D%20Set%20a%20angle%20of%20the%20drop%20shadow%0A%20%2A%20%40param%20%5Bstyle%2EdropShadowDistance%3D5%5D%20%7Bnumber%7D%20Set%20a%20distance%20of%20the%20drop%20shadow%0A%20%2A%20%40param%20%5Bstyle%2EdropShadowBlur%3D0%5D%20%7Bnumber%7D%20Set%20a%20shadow%20blur%20radius%0A%20%2A%20%40param%20%5Bstyle%2Epadding%3D0%5D%20%7Bnumber%7D%20Occasionally%20some%20fonts%20are%20cropped%20on%20top%20or%20bottom%2E%20Adding%20some%20padding%20will%0A%20%2A%20%20%20%20%20%20prevent%20this%20from%20happening%20by%20adding%20padding%20to%20the%20top%20and%20bottom%20of%20text%20height%2E%0A%20%2A%20%40param%20%5Bstyle%2EtextBaseline%3D%27alphabetic%27%5D%20%7Bstring%7D%20The%20baseline%20of%20the%20text%20that%20is%20rendered%2E%0A%20%2A%20%40param%20%5Bstyle%2ElineJoin%3D%27miter%27%5D%20%7Bstring%7D%20The%20lineJoin%20property%20sets%20the%20type%20of%20corner%20created%2C%20it%20can%20resolve%0A%20%2A%20%20%20%20%20%20spiked%20text%20issues%2E%20Default%20is%20%27miter%27%20%28creates%20a%20sharp%20corner%29%2E%0A%20%2A%20%40param%20%5Bstyle%2EmiterLimit%3D10%5D%20%7Bnumber%7D%20The%20miter%20limit%20to%20use%20when%20using%20the%20%27miter%27%20lineJoin%20mode%2E%20This%20can%20reduce%0A%20%2A%20%20%20%20%20%20or%20increase%20the%20spikiness%20of%20rendered%20text%2E%0A%20%2A%2F%0Afunction%20Text%28text%2C%20style%2C%20resolution%29%0A%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20canvas%20element%20that%20everything%20is%20drawn%20to%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BHTMLCanvasElement%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ecanvas%20%3D%20document%2EcreateElement%28%27canvas%27%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20canvas%202d%20context%20that%20everything%20is%20drawn%20with%0A%20%20%20%20%20%2A%20%40member%20%7BHTMLCanvasElement%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Econtext%20%3D%20this%2Ecanvas%2EgetContext%28%272d%27%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20resolution%20of%20the%20canvas%2E%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eresolution%20%3D%20resolution%20%7C%7C%20CONST%2ERESOLUTION%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Private%20tracker%20for%20the%20current%20text%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Ftext%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Private%20tracker%20for%20the%20current%20style%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fstyle%20%3D%20null%3B%0A%0A%20%20%20%20var%20texture%20%3D%20Texture%2EfromCanvas%28this%2Ecanvas%29%3B%0A%20%20%20%20texture%2Etrim%20%3D%20new%20math%2ERectangle%28%29%3B%0A%20%20%20%20Sprite%2Ecall%28this%2C%20texture%29%3B%0A%0A%20%20%20%20this%2Etext%20%3D%20text%3B%0A%20%20%20%20this%2Estyle%20%3D%20style%3B%0A%7D%0A%0A%2F%2F%20constructor%0AText%2Eprototype%20%3D%20Object%2Ecreate%28Sprite%2Eprototype%29%3B%0AText%2Eprototype%2Econstructor%20%3D%20Text%3B%0Amodule%2Eexports%20%3D%20Text%3B%0A%0AText%2EfontPropertiesCache%20%3D%20%7B%7D%3B%0AText%2EfontPropertiesCanvas%20%3D%20document%2EcreateElement%28%27canvas%27%29%3B%0AText%2EfontPropertiesContext%20%3D%20Text%2EfontPropertiesCanvas%2EgetContext%28%272d%27%29%3B%0A%0AObject%2EdefineProperties%28Text%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20width%20of%20the%20Text%2C%20setting%20this%20will%20actually%20modify%20the%20scale%20to%20achieve%20the%20value%20set%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EText%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20width%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2Edirty%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EupdateText%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Escale%2Ex%20%2A%20this%2E%5Ftexture%2E%5Fframe%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Escale%2Ex%20%3D%20value%20%2F%20this%2E%5Ftexture%2E%5Fframe%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fwidth%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20Text%2C%20setting%20this%20will%20actually%20modify%20the%20scale%20to%20achieve%20the%20value%20set%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EText%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20height%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2Edirty%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EupdateText%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20this%2Escale%2Ey%20%2A%20this%2E%5Ftexture%2E%5Fframe%2Eheight%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Escale%2Ey%20%3D%20value%20%2F%20this%2E%5Ftexture%2E%5Fframe%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fheight%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Set%20the%20style%20of%20the%20text%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%5D%20%7Bobject%7D%20The%20style%20parameters%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2Efont%3D%27bold%2020pt%20Arial%27%5D%20%7Bstring%7D%20The%20style%20and%20size%20of%20the%20font%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2Efill%3D%27black%27%5D%20%7Bstring%7Cnumber%7D%20A%20canvas%20fillstyle%20that%20will%20be%20used%20on%20the%20text%20eg%20%27red%27%2C%20%27%2300FF00%27%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2Ealign%3D%27left%27%5D%20%7Bstring%7D%20Alignment%20for%20multiline%20text%20%28%27left%27%2C%20%27center%27%20or%20%27right%27%29%2C%20does%20not%20affect%20single%20line%20text%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2Estroke%3D%27black%27%5D%20%7Bstring%7Cnumber%7D%20A%20canvas%20fillstyle%20that%20will%20be%20used%20on%20the%20text%20stroke%20eg%20%27blue%27%2C%20%27%23FCFF00%27%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2EstrokeThickness%3D0%5D%20%7Bnumber%7D%20A%20number%20that%20represents%20the%20thickness%20of%20the%20stroke%2E%20Default%20is%200%20%28no%20stroke%29%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2EwordWrap%3Dfalse%5D%20%7Bboolean%7D%20Indicates%20if%20word%20wrap%20should%20be%20used%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2EwordWrapWidth%3D100%5D%20%7Bnumber%7D%20The%20width%20at%20which%20text%20will%20wrap%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2ElineHeight%5D%20%7Bnumber%7D%20The%20line%20height%2C%20a%20number%20that%20represents%20the%20vertical%20space%20that%20a%20letter%20uses%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2EdropShadow%3Dfalse%5D%20%7Bboolean%7D%20Set%20a%20drop%20shadow%20for%20the%20text%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2EdropShadowColor%3D%27%23000000%27%5D%20%7Bstring%7Cnumber%7D%20A%20fill%20style%20to%20be%20used%20on%20the%20dropshadow%20e%2Eg%20%27red%27%2C%20%27%2300FF00%27%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2EdropShadowAngle%3DMath%2EPI%2F6%5D%20%7Bnumber%7D%20Set%20a%20angle%20of%20the%20drop%20shadow%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2EdropShadowDistance%3D5%5D%20%7Bnumber%7D%20Set%20a%20distance%20of%20the%20drop%20shadow%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2EdropShadowBlur%3D0%5D%20%7Bnumber%7D%20Set%20a%20shadow%20blur%20radius%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2Epadding%3D0%5D%20%7Bnumber%7D%20Occasionally%20some%20fonts%20are%20cropped%20on%20top%20or%20bottom%2E%20Adding%20some%20padding%20will%0A%20%20%20%20%20%2A%20%20%20%20%20%20prevent%20this%20from%20happening%20by%20adding%20padding%20to%20the%20top%20and%20bottom%20of%20text%20height%2E%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2EtextBaseline%3D%27alphabetic%27%5D%20%7Bstring%7D%20The%20baseline%20of%20the%20text%20that%20is%20rendered%2E%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2ElineJoin%3D%27miter%27%5D%20%7Bstring%7D%20The%20lineJoin%20property%20sets%20the%20type%20of%20corner%20created%2C%20it%20can%20resolve%0A%20%20%20%20%20%2A%20%20%20%20%20%20spiked%20text%20issues%2E%20Default%20is%20%27miter%27%20%28creates%20a%20sharp%20corner%29%2E%0A%20%20%20%20%20%2A%20%40param%20%5Bstyle%2EmiterLimit%3D10%5D%20%7Bnumber%7D%20The%20miter%20limit%20to%20use%20when%20using%20the%20%27miter%27%20lineJoin%20mode%2E%20This%20can%20reduce%0A%20%20%20%20%20%2A%20%20%20%20%20%20or%20increase%20the%20spikiness%20of%20rendered%20text%2E%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EText%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20style%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fstyle%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28style%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%20%3D%20style%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20style%2Efill%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20style%2Efill%20%3D%20utils%2Ehex2string%28style%2Efill%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20style%2Estroke%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20style%2Estroke%20%3D%20utils%2Ehex2string%28style%2Estroke%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20style%2EdropShadowColor%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20style%2EdropShadowColor%20%3D%20utils%2Ehex2string%28style%2EdropShadowColor%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2Efont%20%3D%20style%2Efont%20%7C%7C%20%27bold%2020pt%20Arial%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2Efill%20%3D%20style%2Efill%20%7C%7C%20%27black%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2Ealign%20%3D%20style%2Ealign%20%7C%7C%20%27left%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2Estroke%20%3D%20style%2Estroke%20%7C%7C%20%27black%27%3B%20%2F%2Fprovide%20a%20default%2C%20see%3A%20https%3A%2F%2Fgithub%2Ecom%2Fpixijs%2Fpixi%2Ejs%2Fissues%2F136%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2EstrokeThickness%20%3D%20style%2EstrokeThickness%20%7C%7C%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2EwordWrap%20%3D%20style%2EwordWrap%20%7C%7C%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2EwordWrapWidth%20%3D%20style%2EwordWrapWidth%20%7C%7C%20100%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2EdropShadow%20%3D%20style%2EdropShadow%20%7C%7C%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2EdropShadowColor%20%3D%20style%2EdropShadowColor%20%7C%7C%20%27%23000000%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2EdropShadowAngle%20%3D%20style%2EdropShadowAngle%20%21%3D%3D%20undefined%20%3F%20style%2EdropShadowAngle%20%3A%20Math%2EPI%20%2F%206%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2EdropShadowDistance%20%3D%20style%2EdropShadowDistance%20%21%3D%3D%20undefined%20%3F%20style%2EdropShadowDistance%20%3A%205%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2EdropShadowBlur%20%3D%20style%2EdropShadowBlur%20%21%3D%3D%20undefined%20%3F%20style%2EdropShadowBlur%20%3A%200%3B%20%2F%2FshadowBlur%20is%20%270%27%20by%20default%20according%20to%20HTML%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2Epadding%20%3D%20style%2Epadding%20%7C%7C%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2EtextBaseline%20%3D%20style%2EtextBaseline%20%7C%7C%20%27alphabetic%27%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2ElineJoin%20%3D%20style%2ElineJoin%20%7C%7C%20%27miter%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%2EmiterLimit%20%3D%20style%2EmiterLimit%20%7C%7C%2010%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fstyle%20%3D%20style%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Set%20the%20copy%20for%20the%20text%20object%2E%20To%20split%20a%20line%20you%20can%20use%20%27%5Cn%27%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20text%20%7Bstring%7D%20The%20copy%20that%20you%20would%20like%20the%20text%20to%20display%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EText%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20text%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Ftext%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28text%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%20%3D%20text%2EtoString%28%29%20%7C%7C%20%27%20%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2E%5Ftext%20%3D%3D%3D%20text%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ftext%20%3D%20text%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20text%20and%20updates%20it%20when%20needed%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AText%2Eprototype%2EupdateText%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20style%20%3D%20this%2E%5Fstyle%3B%0A%20%20%20%20this%2Econtext%2Efont%20%3D%20style%2Efont%3B%0A%0A%20%20%20%20%2F%2F%20word%20wrap%0A%20%20%20%20%2F%2F%20preserve%20original%20text%0A%20%20%20%20var%20outputText%20%3D%20style%2EwordWrap%20%3F%20this%2EwordWrap%28this%2E%5Ftext%29%20%3A%20this%2E%5Ftext%3B%0A%0A%20%20%20%20%2F%2F%20split%20text%20into%20lines%0A%20%20%20%20var%20lines%20%3D%20outputText%2Esplit%28%2F%28%3F%3A%5Cr%5Cn%7C%5Cr%7C%5Cn%29%2F%29%3B%0A%0A%20%20%20%20%2F%2F%20calculate%20text%20width%0A%20%20%20%20var%20lineWidths%20%3D%20new%20Array%28lines%2Elength%29%3B%0A%20%20%20%20var%20maxLineWidth%20%3D%200%3B%0A%20%20%20%20var%20fontProperties%20%3D%20this%2EdetermineFontProperties%28style%2Efont%29%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20lines%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20lineWidth%20%3D%20this%2Econtext%2EmeasureText%28lines%5Bi%5D%29%2Ewidth%3B%0A%20%20%20%20%20%20%20%20lineWidths%5Bi%5D%20%3D%20lineWidth%3B%0A%20%20%20%20%20%20%20%20maxLineWidth%20%3D%20Math%2Emax%28maxLineWidth%2C%20lineWidth%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20width%20%3D%20maxLineWidth%20%2B%20style%2EstrokeThickness%3B%0A%20%20%20%20if%20%28style%2EdropShadow%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20width%20%2B%3D%20style%2EdropShadowDistance%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Ecanvas%2Ewidth%20%3D%20%28%20width%20%2B%20this%2Econtext%2ElineWidth%20%29%20%2A%20this%2Eresolution%3B%0A%0A%20%20%20%20%2F%2F%20calculate%20text%20height%0A%20%20%20%20var%20lineHeight%20%3D%20this%2Estyle%2ElineHeight%20%7C%7C%20fontProperties%2EfontSize%20%2B%20style%2EstrokeThickness%3B%0A%0A%20%20%20%20var%20height%20%3D%20lineHeight%20%2A%20lines%2Elength%3B%0A%20%20%20%20if%20%28style%2EdropShadow%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20height%20%2B%3D%20style%2EdropShadowDistance%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Ecanvas%2Eheight%20%3D%20%28%20height%20%2B%20this%2E%5Fstyle%2Epadding%20%2A%202%20%29%20%2A%20this%2Eresolution%3B%0A%0A%20%20%20%20this%2Econtext%2Escale%28%20this%2Eresolution%2C%20this%2Eresolution%29%3B%0A%0A%20%20%20%20if%20%28navigator%2EisCocoonJS%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Econtext%2EclearRect%280%2C%200%2C%20this%2Ecanvas%2Ewidth%2C%20this%2Ecanvas%2Eheight%29%3B%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2Fthis%2Econtext%2EfillStyle%3D%22%23FF0000%22%3B%0A%20%20%20%20%2F%2Fthis%2Econtext%2EfillRect%280%2C%200%2C%20this%2Ecanvas%2Ewidth%2C%20this%2Ecanvas%2Eheight%29%3B%0A%0A%20%20%20%20this%2Econtext%2Efont%20%3D%20style%2Efont%3B%0A%20%20%20%20this%2Econtext%2EstrokeStyle%20%3D%20style%2Estroke%3B%0A%20%20%20%20this%2Econtext%2ElineWidth%20%3D%20style%2EstrokeThickness%3B%0A%20%20%20%20this%2Econtext%2EtextBaseline%20%3D%20style%2EtextBaseline%3B%0A%20%20%20%20this%2Econtext%2ElineJoin%20%3D%20style%2ElineJoin%3B%0A%20%20%20%20this%2Econtext%2EmiterLimit%20%3D%20style%2EmiterLimit%3B%0A%0A%20%20%20%20var%20linePositionX%3B%0A%20%20%20%20var%20linePositionY%3B%0A%0A%20%20%20%20if%20%28style%2EdropShadow%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28style%2EdropShadowBlur%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Econtext%2EshadowColor%20%3D%20style%2EdropShadowColor%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Econtext%2EshadowBlur%20%3D%20style%2EdropShadowBlur%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Econtext%2EfillStyle%20%3D%20style%2EdropShadowColor%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20xShadowOffset%20%3D%20Math%2Ecos%28style%2EdropShadowAngle%29%20%2A%20style%2EdropShadowDistance%3B%0A%20%20%20%20%20%20%20%20var%20yShadowOffset%20%3D%20Math%2Esin%28style%2EdropShadowAngle%29%20%2A%20style%2EdropShadowDistance%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20lines%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20linePositionX%20%3D%20style%2EstrokeThickness%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20linePositionY%20%3D%20%28style%2EstrokeThickness%20%2F%202%20%2B%20i%20%2A%20lineHeight%29%20%2B%20fontProperties%2Eascent%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28style%2Ealign%20%3D%3D%3D%20%27right%27%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20linePositionX%20%2B%3D%20maxLineWidth%20%2D%20lineWidths%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28style%2Ealign%20%3D%3D%3D%20%27center%27%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20linePositionX%20%2B%3D%20%28maxLineWidth%20%2D%20lineWidths%5Bi%5D%29%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28style%2Efill%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Econtext%2EfillText%28lines%5Bi%5D%2C%20linePositionX%20%2B%20xShadowOffset%2C%20linePositionY%20%2B%20yShadowOffset%20%2B%20this%2E%5Fstyle%2Epadding%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2Fset%20canvas%20text%20styles%0A%20%20%20%20this%2Econtext%2EfillStyle%20%3D%20style%2Efill%3B%0A%0A%20%20%20%20%2F%2Fdraw%20lines%20line%20by%20line%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20lines%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20linePositionX%20%3D%20style%2EstrokeThickness%20%2F%202%3B%0A%20%20%20%20%20%20%20%20linePositionY%20%3D%20%28style%2EstrokeThickness%20%2F%202%20%2B%20i%20%2A%20lineHeight%29%20%2B%20fontProperties%2Eascent%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28style%2Ealign%20%3D%3D%3D%20%27right%27%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20linePositionX%20%2B%3D%20maxLineWidth%20%2D%20lineWidths%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28style%2Ealign%20%3D%3D%3D%20%27center%27%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20linePositionX%20%2B%3D%20%28maxLineWidth%20%2D%20lineWidths%5Bi%5D%29%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28style%2Estroke%20%26%26%20style%2EstrokeThickness%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Econtext%2EstrokeText%28lines%5Bi%5D%2C%20linePositionX%2C%20linePositionY%20%2B%20this%2E%5Fstyle%2Epadding%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28style%2Efill%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Econtext%2EfillText%28lines%5Bi%5D%2C%20linePositionX%2C%20linePositionY%20%2B%20this%2E%5Fstyle%2Epadding%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EupdateTexture%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20texture%20size%20based%20on%20canvas%20size%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AText%2Eprototype%2EupdateTexture%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20texture%20%3D%20this%2E%5Ftexture%3B%0A%0A%20%20%20%20texture%2EbaseTexture%2EhasLoaded%20%3D%20true%3B%0A%20%20%20%20texture%2EbaseTexture%2Eresolution%20%3D%20this%2Eresolution%3B%0A%0A%20%20%20%20texture%2EbaseTexture%2Ewidth%20%3D%20this%2Ecanvas%2Ewidth%20%2F%20this%2Eresolution%3B%0A%20%20%20%20texture%2EbaseTexture%2Eheight%20%3D%20this%2Ecanvas%2Eheight%20%2F%20this%2Eresolution%3B%0A%20%20%20%20texture%2Ecrop%2Ewidth%20%3D%20texture%2E%5Fframe%2Ewidth%20%3D%20this%2Ecanvas%2Ewidth%20%2F%20this%2Eresolution%3B%0A%20%20%20%20texture%2Ecrop%2Eheight%20%3D%20texture%2E%5Fframe%2Eheight%20%3D%20this%2Ecanvas%2Eheight%20%2F%20this%2Eresolution%3B%0A%0A%20%20%20%20texture%2Etrim%2Ex%20%3D%200%3B%0A%20%20%20%20texture%2Etrim%2Ey%20%3D%20%2Dthis%2E%5Fstyle%2Epadding%3B%0A%0A%20%20%20%20texture%2Etrim%2Ewidth%20%3D%20texture%2E%5Fframe%2Ewidth%3B%0A%20%20%20%20texture%2Etrim%2Eheight%20%3D%20texture%2E%5Fframe%2Eheight%20%2D%20this%2E%5Fstyle%2Epadding%2A2%3B%0A%0A%20%20%20%20this%2E%5Fwidth%20%3D%20this%2Ecanvas%2Ewidth%20%2F%20this%2Eresolution%3B%0A%20%20%20%20this%2E%5Fheight%20%3D%20this%2Ecanvas%2Eheight%20%2F%20this%2Eresolution%3B%0A%0A%20%20%20%20texture%2EbaseTexture%2Eemit%28%27update%27%2C%20%20texture%2EbaseTexture%29%3B%0A%0A%20%20%20%20this%2Edirty%20%3D%20false%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20WebGL%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%0A%20%2A%2F%0AText%2Eprototype%2ErenderWebGL%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20if%20%28this%2Edirty%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2Fthis%2Eresolution%20%3D%201%2F%2Frenderer%2Eresolution%3B%0A%0A%20%20%20%20%20%20%20%20this%2EupdateText%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20Sprite%2Eprototype%2ErenderWebGL%2Ecall%28this%2C%20renderer%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20Canvas%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AText%2Eprototype%2E%5FrenderCanvas%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20if%20%28this%2Edirty%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%2F%2F%20%20%20this%2Eresolution%20%3D%201%2F%2Frenderer%2Eresolution%3B%0A%0A%20%20%20%20%20%20%20%20this%2EupdateText%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20Sprite%2Eprototype%2E%5FrenderCanvas%2Ecall%28this%2C%20renderer%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Calculates%20the%20ascent%2C%20descent%20and%20fontSize%20of%20a%20given%20fontStyle%0A%20%2A%0A%20%2A%20%40param%20fontStyle%20%7Bobject%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AText%2Eprototype%2EdetermineFontProperties%20%3D%20function%20%28fontStyle%29%0A%7B%0A%20%20%20%20var%20properties%20%3D%20Text%2EfontPropertiesCache%5BfontStyle%5D%3B%0A%0A%20%20%20%20if%20%28%21properties%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20properties%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20var%20canvas%20%3D%20Text%2EfontPropertiesCanvas%3B%0A%20%20%20%20%20%20%20%20var%20context%20%3D%20Text%2EfontPropertiesContext%3B%0A%0A%20%20%20%20%20%20%20%20context%2Efont%20%3D%20fontStyle%3B%0A%0A%20%20%20%20%20%20%20%20var%20width%20%3D%20Math%2Eceil%28context%2EmeasureText%28%27%7CM%C3%89q%27%29%2Ewidth%29%3B%0A%20%20%20%20%20%20%20%20var%20baseline%20%3D%20Math%2Eceil%28context%2EmeasureText%28%27M%27%29%2Ewidth%29%3B%0A%20%20%20%20%20%20%20%20var%20height%20%3D%202%20%2A%20baseline%3B%0A%0A%20%20%20%20%20%20%20%20baseline%20%3D%20baseline%20%2A%201%2E4%20%7C%200%3B%0A%0A%20%20%20%20%20%20%20%20canvas%2Ewidth%20%3D%20width%3B%0A%20%20%20%20%20%20%20%20canvas%2Eheight%20%3D%20height%3B%0A%0A%20%20%20%20%20%20%20%20context%2EfillStyle%20%3D%20%27%23f00%27%3B%0A%20%20%20%20%20%20%20%20context%2EfillRect%280%2C%200%2C%20width%2C%20height%29%3B%0A%0A%20%20%20%20%20%20%20%20context%2Efont%20%3D%20fontStyle%3B%0A%0A%20%20%20%20%20%20%20%20context%2EtextBaseline%20%3D%20%27alphabetic%27%3B%0A%20%20%20%20%20%20%20%20context%2EfillStyle%20%3D%20%27%23000%27%3B%0A%20%20%20%20%20%20%20%20context%2EfillText%28%27%7CM%C3%89q%27%2C%200%2C%20baseline%29%3B%0A%0A%20%20%20%20%20%20%20%20var%20imagedata%20%3D%20context%2EgetImageData%280%2C%200%2C%20width%2C%20height%29%2Edata%3B%0A%20%20%20%20%20%20%20%20var%20pixels%20%3D%20imagedata%2Elength%3B%0A%20%20%20%20%20%20%20%20var%20line%20%3D%20width%20%2A%204%3B%0A%0A%20%20%20%20%20%20%20%20var%20i%2C%20j%3B%0A%0A%20%20%20%20%20%20%20%20var%20idx%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20stop%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20ascent%2E%20scan%20from%20top%20to%20bottom%20until%20we%20find%20a%20non%20red%20pixel%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20baseline%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20line%3B%20j%20%2B%3D%204%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28imagedata%5Bidx%20%2B%20j%5D%20%21%3D%3D%20255%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stop%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21stop%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20idx%20%2B%3D%20line%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20properties%2Eascent%20%3D%20baseline%20%2D%20i%3B%0A%0A%20%20%20%20%20%20%20%20idx%20%3D%20pixels%20%2D%20line%3B%0A%20%20%20%20%20%20%20%20stop%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20descent%2E%20scan%20from%20bottom%20to%20top%20until%20we%20find%20a%20non%20red%20pixel%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%20height%3B%20i%20%3E%20baseline%3B%20i%2D%2D%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20line%3B%20j%20%2B%3D%204%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28imagedata%5Bidx%20%2B%20j%5D%20%21%3D%3D%20255%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stop%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21stop%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20idx%20%2D%3D%20line%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20properties%2Edescent%20%3D%20i%20%2D%20baseline%3B%0A%20%20%20%20%20%20%20%20properties%2EfontSize%20%3D%20properties%2Eascent%20%2B%20properties%2Edescent%3B%0A%0A%20%20%20%20%20%20%20%20Text%2EfontPropertiesCache%5BfontStyle%5D%20%3D%20properties%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20properties%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Applies%20newlines%20to%20a%20string%20to%20have%20it%20optimally%20fit%20into%20the%20horizontal%0A%20%2A%20bounds%20set%20by%20the%20Text%20object%27s%20wordWrapWidth%20property%2E%0A%20%2A%0A%20%2A%20%40param%20text%20%7Bstring%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AText%2Eprototype%2EwordWrap%20%3D%20function%20%28text%29%0A%7B%0A%20%20%20%20%2F%2F%20Greedy%20wrapping%20algorithm%20that%20will%20wrap%20words%20as%20the%20line%20grows%20longer%0A%20%20%20%20%2F%2F%20than%20its%20horizontal%20bounds%2E%0A%20%20%20%20var%20result%20%3D%20%27%27%3B%0A%20%20%20%20var%20lines%20%3D%20text%2Esplit%28%27%5Cn%27%29%3B%0A%20%20%20%20var%20wordWrapWidth%20%3D%20this%2E%5Fstyle%2EwordWrapWidth%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20lines%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20spaceLeft%20%3D%20wordWrapWidth%3B%0A%20%20%20%20%20%20%20%20var%20words%20%3D%20lines%5Bi%5D%2Esplit%28%27%20%27%29%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%3B%20j%20%3C%20words%2Elength%3B%20j%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20wordWidth%20%3D%20this%2Econtext%2EmeasureText%28words%5Bj%5D%29%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20wordWidthWithSpace%20%3D%20wordWidth%20%2B%20this%2Econtext%2EmeasureText%28%27%20%27%29%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28j%20%3D%3D%3D%200%20%7C%7C%20wordWidthWithSpace%20%3E%20spaceLeft%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Skip%20printing%20the%20newline%20if%20it%27s%20the%20first%20word%20of%20the%20line%20that%20is%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20greater%20than%20the%20word%20wrap%20width%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28j%20%3E%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20%27%5Cn%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20words%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20spaceLeft%20%3D%20wordWrapWidth%20%2D%20wordWidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20spaceLeft%20%2D%3D%20wordWidthWithSpace%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20%27%20%27%20%2B%20words%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28i%20%3C%20lines%2Elength%2D1%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20%27%5Cn%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Returns%20the%20bounds%20of%20the%20Text%20as%20a%20rectangle%2E%20The%20bounds%20calculation%20takes%20the%20worldTransform%20into%20account%2E%0A%20%2A%0A%20%2A%20%40param%20matrix%20%7BPIXI%2EMatrix%7D%20the%20transformation%20matrix%20of%20the%20Text%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20the%20framing%20rectangle%0A%20%2A%2F%0AText%2Eprototype%2EgetBounds%20%3D%20function%20%28matrix%29%0A%7B%0A%20%20%20%20if%20%28this%2Edirty%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EupdateText%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20Sprite%2Eprototype%2EgetBounds%2Ecall%28this%2C%20matrix%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20this%20text%20object%2E%0A%20%2A%0A%20%2A%20%40param%20%5BdestroyBaseTexture%3Dtrue%5D%20%7Bboolean%7D%20whether%20to%20destroy%20the%20base%20texture%20as%20well%0A%20%2A%2F%0AText%2Eprototype%2Edestroy%20%3D%20function%20%28destroyBaseTexture%29%0A%7B%0A%20%20%20%20%2F%2F%20make%20sure%20to%20reset%20the%20the%20context%20and%20canvas%2E%2E%20dont%20want%20this%20hanging%20around%20in%20memory%21%0A%20%20%20%20this%2Econtext%20%3D%20null%3B%0A%20%20%20%20this%2Ecanvas%20%3D%20null%3B%0A%0A%20%20%20%20this%2E%5Fstyle%20%3D%20null%3B%0A%0A%20%20%20%20this%2E%5Ftexture%2Edestroy%28destroyBaseTexture%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20destroyBaseTexture%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2Fsprites%2FSprite%22%3A60%2C%22%2E%2E%2Ftextures%2FTexture%22%3A65%2C%22%2E%2E%2Futils%22%3A70%7D%5D%2C63%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20utils%20%3D%20require%28%27%2E%2E%2Futils%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2Fconst%27%29%2C%0A%20%20%20%20EventEmitter%20%3D%20require%28%27eventemitter3%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20texture%20stores%20the%20information%20that%20represents%20an%20image%2E%20All%20textures%20have%20a%20base%20texture%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20source%20%7BImage%7CCanvas%7D%20the%20source%20object%20of%20the%20texture%2E%0A%20%2A%20%40param%20%5BscaleMode%3DPIXI%2ESCALE%5FMODES%2EDEFAULT%5D%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40param%20resolution%20%7Bnumber%7D%20the%20resolution%20of%20the%20texture%20for%20devices%20with%20different%20pixel%20ratios%0A%20%2A%2F%0Afunction%20BaseTexture%28source%2C%20scaleMode%2C%20resolution%29%0A%7B%0A%20%20%20%20EventEmitter%2Ecall%28this%29%3B%0A%0A%20%20%20%20this%2Euid%20%3D%20utils%2Euid%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20Resolution%20of%20the%20texture%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eresolution%20%3D%20resolution%20%7C%7C%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20width%20of%20the%20base%20texture%20set%20when%20the%20image%20has%20loaded%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40readOnly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ewidth%20%3D%20100%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20base%20texture%20set%20when%20the%20image%20has%20loaded%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40readOnly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eheight%20%3D%20100%3B%0A%0A%20%20%20%20%2F%2F%20TODO%20docs%0A%20%20%20%20%2F%2F%20used%20to%20store%20the%20actual%20dimensions%20of%20the%20source%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Used%20to%20store%20the%20actual%20width%20of%20the%20source%20of%20this%20texture%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40readOnly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2ErealWidth%20%3D%20100%3B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Used%20to%20store%20the%20actual%20height%20of%20the%20source%20of%20this%20texture%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40readOnly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2ErealHeight%20%3D%20100%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20scale%20mode%20to%20apply%20when%20scaling%20this%20texture%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%20PIXI%2ESCALE%5FMODES%2ELINEAR%0A%20%20%20%20%20%2A%20%40see%20PIXI%2ESCALE%5FMODES%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EscaleMode%20%3D%20scaleMode%20%7C%7C%20CONST%2ESCALE%5FMODES%2EDEFAULT%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Set%20to%20true%20once%20the%20base%20texture%20has%20successfully%20loaded%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20This%20is%20never%20true%20if%20the%20underlying%20source%20fails%20to%20load%20or%20has%20no%20texture%20data%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40readOnly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EhasLoaded%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Set%20to%20true%20if%20the%20source%20is%20currently%20loading%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20If%20an%20Image%20source%20is%20loading%20the%20%27loaded%27%20or%20%27error%27%20event%20will%20be%0A%20%20%20%20%20%2A%20dispatched%20when%20the%20operation%20ends%2E%20An%20underyling%20source%20that%20is%0A%20%20%20%20%20%2A%20immediately%2Davailable%20bypasses%20loading%20entirely%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EisLoading%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20image%20source%20that%20is%20used%20to%20create%20the%20texture%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20TODO%3A%20Make%20this%20a%20setter%20that%20calls%20loadSource%28%29%3B%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BImage%7CCanvas%7D%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Esource%20%3D%20null%3B%20%2F%2F%20set%20in%20loadSource%2C%20if%20at%20all%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Controls%20if%20RGB%20channels%20should%20be%20pre%2Dmultiplied%20by%20Alpha%20%20%28WebGL%20only%29%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40default%20true%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EpremultipliedAlpha%20%3D%20true%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EimageUrl%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Wether%20or%20not%20the%20texture%20is%20a%20power%20of%20two%2C%20try%20to%20use%20power%20of%20two%20textures%20as%20much%20as%20you%20can%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EisPowerOfTwo%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2F%20used%20for%20webGL%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20Set%20this%20to%20true%20if%20a%20mipmap%20of%20this%20texture%20needs%20to%20be%20generated%2E%20This%20value%20needs%20to%20be%20set%20before%20the%20texture%20is%20used%0A%20%20%20%20%20%2A%20Also%20the%20texture%20must%20be%20a%20power%20of%20two%20size%20to%20work%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Emipmap%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20A%20map%20of%20renderer%20IDs%20to%20webgl%20textures%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%3Cnumber%2C%20WebGLTexture%3E%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FglTextures%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2F%20if%20no%20source%20passed%20don%27t%20try%20to%20load%0A%20%20%20%20if%20%28source%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EloadSource%28source%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Fired%20when%20a%20not%2Dimmediately%2Davailable%20source%20finishes%20loading%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40event%20loaded%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EBaseTexture%23%0A%20%20%20%20%20%2A%20%40protected%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Fired%20when%20a%20not%2Dimmediately%2Davailable%20source%20fails%20to%20load%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40event%20error%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EBaseTexture%23%0A%20%20%20%20%20%2A%20%40protected%0A%20%20%20%20%20%2A%2F%0A%7D%0A%0ABaseTexture%2Eprototype%20%3D%20Object%2Ecreate%28EventEmitter%2Eprototype%29%3B%0ABaseTexture%2Eprototype%2Econstructor%20%3D%20BaseTexture%3B%0Amodule%2Eexports%20%3D%20BaseTexture%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20texture%20on%20all%20the%20webgl%20renderers%2C%20this%20also%20assumes%20the%20src%20has%20changed%2E%0A%20%2A%0A%20%2A%20%40fires%20update%0A%20%2A%2F%0ABaseTexture%2Eprototype%2Eupdate%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2ErealWidth%20%3D%20this%2Esource%2EnaturalWidth%20%7C%7C%20this%2Esource%2Ewidth%3B%0A%20%20%20%20this%2ErealHeight%20%3D%20this%2Esource%2EnaturalHeight%20%7C%7C%20this%2Esource%2Eheight%3B%0A%0A%20%20%20%20this%2Ewidth%20%3D%20this%2ErealWidth%20%2F%20this%2Eresolution%3B%0A%20%20%20%20this%2Eheight%20%3D%20this%2ErealHeight%20%2F%20this%2Eresolution%3B%0A%0A%20%20%20%20this%2EisPowerOfTwo%20%3D%20utils%2EisPowerOfTwo%28this%2ErealWidth%2C%20this%2ErealHeight%29%3B%0A%0A%20%20%20%20this%2Eemit%28%27update%27%2C%20this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Load%20a%20source%2E%0A%20%2A%0A%20%2A%20If%20the%20source%20is%20not%2Dimmediately%2Davailable%2C%20such%20as%20an%20image%20that%20needs%20to%20be%0A%20%2A%20downloaded%2C%20then%20the%20%27loaded%27%20or%20%27error%27%20event%20will%20be%20dispatched%20in%20the%20future%0A%20%2A%20and%20%60hasLoaded%60%20will%20remain%20false%20after%20this%20call%2E%0A%20%2A%0A%20%2A%20The%20logic%20state%20after%20calling%20%60loadSource%60%20directly%20or%20indirectly%20%28eg%2E%20%60fromImage%60%2C%20%60new%20BaseTexture%60%29%20is%3A%0A%20%2A%0A%20%2A%20%20%20%20%20if%20%28texture%2EhasLoaded%29%0A%20%7B%0A%20%2A%20%20%20%20%20%20%20%20%2F%2F%20texture%20ready%20for%20use%0A%20%2A%20%20%20%20%20%7D%20else%20if%20%28texture%2EisLoading%29%0A%20%7B%0A%20%2A%20%20%20%20%20%20%20%20%2F%2F%20listen%20to%20%27loaded%27%20and%2For%20%27error%27%20events%20on%20texture%0A%20%2A%20%20%20%20%20%7D%20else%20%7B%0A%20%2A%20%20%20%20%20%20%20%20%2F%2F%20not%20loading%2C%20not%20going%20to%20load%20UNLESS%20the%20source%20is%20reloaded%0A%20%2A%20%20%20%20%20%20%20%20%2F%2F%20%28it%20may%20still%20make%20sense%20to%20listen%20to%20the%20events%29%0A%20%2A%20%20%20%20%20%7D%0A%20%2A%0A%20%2A%20%40protected%0A%20%2A%20%40param%20source%20%7BImage%7CCanvas%7D%20the%20source%20object%20of%20the%20texture%2E%0A%20%2A%2F%0ABaseTexture%2Eprototype%2EloadSource%20%3D%20function%20%28source%29%0A%7B%0A%20%20%20%20var%20wasLoading%20%3D%20this%2EisLoading%3B%0A%20%20%20%20this%2EhasLoaded%20%3D%20false%3B%0A%20%20%20%20this%2EisLoading%20%3D%20false%3B%0A%0A%20%20%20%20if%20%28wasLoading%20%26%26%20this%2Esource%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Esource%2Eonload%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this%2Esource%2Eonerror%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Esource%20%3D%20source%3B%0A%0A%20%20%20%20%2F%2F%20Apply%20source%20if%20loaded%2E%20Otherwise%20setup%20appropriate%20loading%20monitors%2E%0A%20%20%20%20if%20%28%28this%2Esource%2Ecomplete%20%7C%7C%20this%2Esource%2EgetContext%29%20%26%26%20this%2Esource%2Ewidth%20%26%26%20this%2Esource%2Eheight%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FsourceLoaded%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20%28%21source%2EgetContext%29%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Image%20fail%20%2F%20not%20ready%0A%20%20%20%20%20%20%20%20this%2EisLoading%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20var%20scope%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%20%20source%2Eonload%20%3D%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20source%2Eonload%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20source%2Eonerror%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21scope%2EisLoading%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20scope%2EisLoading%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20scope%2E%5FsourceLoaded%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20scope%2Eemit%28%27loaded%27%2C%20scope%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20source%2Eonerror%20%3D%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20source%2Eonload%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20source%2Eonerror%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21scope%2EisLoading%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20scope%2EisLoading%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20scope%2Eemit%28%27error%27%2C%20scope%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Per%20http%3A%2F%2Fwww%2Ew3%2Eorg%2FTR%2Fhtml5%2Fembedded%2Dcontent%2D0%2Ehtml%23the%2Dimg%2Delement%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%22The%20value%20of%20%60complete%60%20can%20thus%20change%20while%20a%20script%20is%20executing%2E%22%0A%20%20%20%20%20%20%20%20%2F%2F%20So%20complete%20needs%20to%20be%20re%2Dchecked%20after%20the%20callbacks%20have%20been%20added%2E%2E%0A%20%20%20%20%20%20%20%20%2F%2F%20NOTE%3A%20complete%20will%20be%20true%20if%20the%20image%20has%20no%20src%20so%20best%20to%20check%20if%20the%20src%20is%20set%2E%0A%20%20%20%20%20%20%20%20if%20%28source%2Ecomplete%20%26%26%20source%2Esrc%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EisLoading%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%2E%2Eand%20if%20we%27re%20complete%20now%2C%20no%20need%20for%20callbacks%0A%20%20%20%20%20%20%20%20%20%20%20%20source%2Eonload%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20source%2Eonerror%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28source%2Ewidth%20%26%26%20source%2Eheight%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FsourceLoaded%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20any%20previous%20subscribers%20possible%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28wasLoading%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Eemit%28%27loaded%27%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20any%20previous%20subscribers%20possible%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28wasLoading%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Eemit%28%27error%27%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Used%20internally%20to%20update%20the%20width%2C%20height%2C%20and%20some%20other%20tracking%20vars%20once%0A%20%2A%20a%20source%20has%20successfully%20loaded%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ABaseTexture%2Eprototype%2E%5FsourceLoaded%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2EhasLoaded%20%3D%20true%3B%0A%20%20%20%20this%2Eupdate%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20this%20base%20texture%0A%20%2A%0A%20%2A%2F%0ABaseTexture%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28this%2EimageUrl%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20delete%20utils%2EBaseTextureCache%5Bthis%2EimageUrl%5D%3B%0A%20%20%20%20%20%20%20%20delete%20utils%2ETextureCache%5Bthis%2EimageUrl%5D%3B%0A%0A%20%20%20%20%20%20%20%20this%2EimageUrl%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%21navigator%2EisCocoonJS%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Esource%2Esrc%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20%28this%2Esource%20%26%26%20this%2Esource%2E%5FpixiId%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20delete%20utils%2EBaseTextureCache%5Bthis%2Esource%2E%5FpixiId%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Esource%20%3D%20null%3B%0A%0A%20%20%20%20this%2Edispose%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Frees%20the%20texture%20from%20WebGL%20memory%20without%20destroying%20this%20texture%20object%2E%0A%20%2A%20This%20means%20you%20can%20still%20use%20the%20texture%20later%20which%20will%20upload%20it%20to%20GPU%0A%20%2A%20memory%20again%2E%0A%20%2A%0A%20%2A%2F%0ABaseTexture%2Eprototype%2Edispose%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Eemit%28%27dispose%27%2C%20this%29%3B%0A%0A%20%20%20%20%2F%2F%20this%20should%20no%20longer%20be%20needed%2C%20the%20renderers%20should%20cleanup%20all%20the%20gl%20textures%2E%0A%20%20%20%20%2F%2F%20this%2E%5FglTextures%20%3D%20%7B%7D%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Changes%20the%20source%20image%20of%20the%20texture%2E%0A%20%2A%20The%20original%20source%20must%20be%20an%20Image%20element%2E%0A%20%2A%0A%20%2A%20%40param%20newSrc%20%7Bstring%7D%20the%20path%20of%20the%20image%0A%20%2A%2F%0ABaseTexture%2Eprototype%2EupdateSourceImage%20%3D%20function%20%28newSrc%29%0A%7B%0A%20%20%20%20this%2Esource%2Esrc%20%3D%20newSrc%3B%0A%0A%20%20%20%20this%2EloadSource%28this%2Esource%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20base%20texture%20from%20the%20given%20image%20url%2E%0A%20%2A%20If%20the%20image%20is%20not%20in%20the%20base%20texture%20cache%20it%20will%20be%20created%20and%20loaded%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20imageUrl%20%7Bstring%7D%20The%20image%20url%20of%20the%20texture%0A%20%2A%20%40param%20%5Bcrossorigin%3D%28auto%29%5D%20%7Bboolean%7D%20Should%20use%20anonymous%20CORS%3F%20Defaults%20to%20true%20if%20the%20URL%20is%20not%20a%20data%2DURI%2E%0A%20%2A%20%40param%20%5BscaleMode%3DPIXI%2ESCALE%5FMODES%2EDEFAULT%5D%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40return%20PIXI%2EBaseTexture%0A%20%2A%2F%0ABaseTexture%2EfromImage%20%3D%20function%20%28imageUrl%2C%20crossorigin%2C%20scaleMode%29%0A%7B%0A%20%20%20%20var%20baseTexture%20%3D%20utils%2EBaseTextureCache%5BimageUrl%5D%3B%0A%0A%20%20%20%20if%20%28crossorigin%20%3D%3D%3D%20undefined%20%26%26%20imageUrl%2EindexOf%28%27data%3A%27%29%20%21%3D%3D%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20crossorigin%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%21baseTexture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20new%20Image%28%29%20breaks%20tex%20loading%20in%20some%20versions%20of%20Chrome%2E%0A%20%20%20%20%20%20%20%20%2F%2F%20See%20https%3A%2F%2Fcode%2Egoogle%2Ecom%2Fp%2Fchromium%2Fissues%2Fdetail%3Fid%3D238071%0A%20%20%20%20%20%20%20%20var%20image%20%3D%20new%20Image%28%29%3B%2F%2Fdocument%2EcreateElement%28%27img%27%29%3B%0A%20%20%20%20%20%20%20%20if%20%28crossorigin%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20image%2EcrossOrigin%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20baseTexture%20%3D%20new%20BaseTexture%28image%2C%20scaleMode%29%3B%0A%20%20%20%20%20%20%20%20baseTexture%2EimageUrl%20%3D%20imageUrl%3B%0A%0A%20%20%20%20%20%20%20%20image%2Esrc%20%3D%20imageUrl%3B%0A%0A%20%20%20%20%20%20%20%20utils%2EBaseTextureCache%5BimageUrl%5D%20%3D%20baseTexture%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20there%20is%20an%20%402x%20at%20the%20end%20of%20the%20url%20we%20are%20going%20to%20assume%20its%20a%20highres%20image%0A%20%20%20%20%20%20%20%20baseTexture%2Eresolution%20%3D%20utils%2EgetResolutionOfUrl%28imageUrl%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20baseTexture%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20base%20texture%20from%20the%20given%20canvas%20element%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20canvas%20%7BCanvas%7D%20The%20canvas%20element%20source%20of%20the%20texture%0A%20%2A%20%40param%20scaleMode%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40return%20PIXI%2EBaseTexture%0A%20%2A%2F%0ABaseTexture%2EfromCanvas%20%3D%20function%20%28canvas%2C%20scaleMode%29%0A%7B%0A%20%20%20%20if%20%28%21canvas%2E%5FpixiId%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20canvas%2E%5FpixiId%20%3D%20%27canvas%5F%27%20%2B%20utils%2Euid%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20baseTexture%20%3D%20utils%2EBaseTextureCache%5Bcanvas%2E%5FpixiId%5D%3B%0A%0A%20%20%20%20if%20%28%21baseTexture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20baseTexture%20%3D%20new%20BaseTexture%28canvas%2C%20scaleMode%29%3B%0A%20%20%20%20%20%20%20%20utils%2EBaseTextureCache%5Bcanvas%2E%5FpixiId%5D%20%3D%20baseTexture%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20baseTexture%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2Futils%22%3A70%2C%22eventemitter3%22%3A10%7D%5D%2C64%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20BaseTexture%20%3D%20require%28%27%2E%2FBaseTexture%27%29%2C%0A%20%20%20%20Texture%20%3D%20require%28%27%2E%2FTexture%27%29%2C%0A%20%20%20%20RenderTarget%20%3D%20require%28%27%2E%2E%2Frenderers%2Fwebgl%2Futils%2FRenderTarget%27%29%2C%0A%20%20%20%20FilterManager%20%3D%20require%28%27%2E%2E%2Frenderers%2Fwebgl%2Fmanagers%2FFilterManager%27%29%2C%0A%20%20%20%20CanvasBuffer%20%3D%20require%28%27%2E%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasBuffer%27%29%2C%0A%20%20%20%20math%20%3D%20require%28%27%2E%2E%2Fmath%27%29%2C%0A%20%20%20%20CONST%20%3D%20require%28%27%2E%2E%2Fconst%27%29%2C%0A%20%20%20%20tempMatrix%20%3D%20new%20math%2EMatrix%28%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20RenderTexture%20is%20a%20special%20texture%20that%20allows%20any%20Pixi%20display%20object%20to%20be%20rendered%20to%20it%2E%0A%20%2A%0A%20%2A%20%5F%5FHint%5F%5F%3A%20All%20DisplayObjects%20%28i%2Ee%2E%20Sprites%29%20that%20render%20to%20a%20RenderTexture%20should%20be%20preloaded%0A%20%2A%20otherwise%20black%20rectangles%20will%20be%20drawn%20instead%2E%0A%20%2A%0A%20%2A%20A%20RenderTexture%20takes%20a%20snapshot%20of%20any%20Display%20Object%20given%20to%20its%20render%20method%2E%20The%20position%0A%20%2A%20and%20rotation%20of%20the%20given%20Display%20Objects%20is%20ignored%2E%20For%20example%3A%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20var%20renderer%20%3D%20PIXI%2EautoDetectRenderer%281024%2C%201024%2C%20%7B%20view%3A%20canvas%2C%20ratio%3A%201%20%7D%29%3B%0A%20%2A%20var%20renderTexture%20%3D%20new%20PIXI%2ERenderTexture%28renderer%2C%20800%2C%20600%29%3B%0A%20%2A%20var%20sprite%20%3D%20PIXI%2ESprite%2EfromImage%28%22spinObj%5F01%2Epng%22%29%3B%0A%20%2A%0A%20%2A%20sprite%2Eposition%2Ex%20%3D%20800%2F2%3B%0A%20%2A%20sprite%2Eposition%2Ey%20%3D%20600%2F2%3B%0A%20%2A%20sprite%2Eanchor%2Ex%20%3D%200%2E5%3B%0A%20%2A%20sprite%2Eanchor%2Ey%20%3D%200%2E5%3B%0A%20%2A%0A%20%2A%20renderTexture%2Erender%28sprite%29%3B%0A%20%2A%20%60%60%60%0A%20%2A%0A%20%2A%20The%20Sprite%20in%20this%20case%20will%20be%20rendered%20to%20a%20position%20of%200%2C0%2E%20To%20render%20this%20sprite%20at%20its%20actual%0A%20%2A%20position%20a%20Container%20should%20be%20used%3A%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20var%20doc%20%3D%20new%20PIXI%2EContainer%28%29%3B%0A%20%2A%0A%20%2A%20doc%2EaddChild%28sprite%29%3B%0A%20%2A%0A%20%2A%20renderTexture%2Erender%28doc%29%3B%20%20%2F%2F%20Renders%20to%20center%20of%20renderTexture%0A%20%2A%20%60%60%60%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2ETexture%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7CPIXI%2EWebGLRenderer%7D%20The%20renderer%20used%20for%20this%20RenderTexture%0A%20%2A%20%40param%20%5Bwidth%3D100%5D%20%7Bnumber%7D%20The%20width%20of%20the%20render%20texture%0A%20%2A%20%40param%20%5Bheight%3D100%5D%20%7Bnumber%7D%20The%20height%20of%20the%20render%20texture%0A%20%2A%20%40param%20%5BscaleMode%5D%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40param%20%5Bresolution%3D1%5D%20%7Bnumber%7D%20The%20resolution%20of%20the%20texture%20being%20generated%0A%20%2A%2F%0Afunction%20RenderTexture%28renderer%2C%20width%2C%20height%2C%20scaleMode%2C%20resolution%29%0A%7B%0A%20%20%20%20if%20%28%21renderer%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27Unable%20to%20create%20RenderTexture%2C%20you%20must%20pass%20a%20renderer%20into%20the%20constructor%2E%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20width%20%3D%20width%20%7C%7C%20100%3B%0A%20%20%20%20height%20%3D%20height%20%7C%7C%20100%3B%0A%20%20%20%20resolution%20%3D%20resolution%20%7C%7C%20CONST%2ERESOLUTION%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20base%20texture%20object%20that%20this%20texture%20uses%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BBaseTexture%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20var%20baseTexture%20%3D%20new%20BaseTexture%28%29%3B%0A%20%20%20%20baseTexture%2Ewidth%20%3D%20width%3B%0A%20%20%20%20baseTexture%2Eheight%20%3D%20height%3B%0A%20%20%20%20baseTexture%2Eresolution%20%3D%20resolution%3B%0A%20%20%20%20baseTexture%2EscaleMode%20%3D%20scaleMode%20%7C%7C%20CONST%2ESCALE%5FMODES%2EDEFAULT%3B%0A%20%20%20%20baseTexture%2EhasLoaded%20%3D%20true%3B%0A%0A%0A%20%20%20%20Texture%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20baseTexture%2C%0A%20%20%20%20%20%20%20%20new%20math%2ERectangle%280%2C%200%2C%20width%2C%20height%29%0A%20%20%20%20%29%3B%0A%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20with%20of%20the%20render%20texture%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ewidth%20%3D%20width%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20render%20texture%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eheight%20%3D%20height%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20Resolution%20of%20the%20texture%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eresolution%20%3D%20resolution%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Draw%2Frender%20the%20given%20DisplayObject%20onto%20the%20texture%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20The%20displayObject%20and%20descendents%20are%20transformed%20during%20this%20operation%2E%0A%20%20%20%20%20%2A%20If%20%60updateTransform%60%20is%20true%20then%20the%20transformations%20will%20be%20restored%20before%20the%0A%20%20%20%20%20%2A%20method%20returns%2E%20Otherwise%20it%20is%20up%20to%20the%20calling%20code%20to%20correctly%20use%20or%20reset%0A%20%20%20%20%20%2A%20the%20transformed%20display%20objects%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20The%20display%20object%20is%20always%20rendered%20with%20a%20worldAlpha%20value%20of%201%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40method%0A%20%20%20%20%20%2A%20%40param%20displayObject%20%7BPIXI%2EDisplayObject%7D%20The%20display%20object%20to%20render%20this%20texture%20on%0A%20%20%20%20%20%2A%20%40param%20%5Bmatrix%5D%20%7BPIXI%2EMatrix%7D%20Optional%20matrix%20to%20apply%20to%20the%20display%20object%20before%20rendering%2E%0A%20%20%20%20%20%2A%20%40param%20%5Bclear%3Dfalse%5D%20%7Bboolean%7D%20If%20true%20the%20texture%20will%20be%20cleared%20before%20the%20displayObject%20is%20drawn%0A%20%20%20%20%20%2A%20%40param%20%5BupdateTransform%3Dtrue%5D%20%7Bboolean%7D%20If%20true%20the%20displayObject%27s%20worldTransform%2FworldAlpha%20and%20all%20children%0A%20%20%20%20%20%2A%20%20transformations%20will%20be%20restored%2E%20Not%20restoring%20this%20information%20will%20be%20a%20little%20faster%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Erender%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20renderer%20this%20RenderTexture%20uses%2E%20A%20RenderTexture%20can%20only%20belong%20to%20one%20renderer%20at%20the%20moment%20if%20its%20webGL%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ECanvasRenderer%7CPIXI%2EWebGLRenderer%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Erenderer%20%3D%20renderer%3B%0A%0A%20%20%20%20if%20%28this%2Erenderer%2Etype%20%3D%3D%3D%20CONST%2ERENDERER%5FTYPE%2EWEBGL%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20%20%20%20%20this%2EtextureBuffer%20%3D%20new%20RenderTarget%28gl%2C%20this%2Ewidth%2C%20this%2Eheight%2C%20baseTexture%2EscaleMode%2C%20this%2Eresolution%29%3B%2F%2F%2C%20this%2EbaseTexture%2EscaleMode%29%3B%0A%20%20%20%20%20%20%20%20this%2EbaseTexture%2E%5FglTextures%5Bgl%2Eid%5D%20%3D%20this%2EtextureBuffer%2Etexture%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FTODO%20refactor%20filter%20manager%2E%2E%20as%20really%20its%20no%20longer%20a%20manager%20if%20we%20use%20it%20here%2E%2E%0A%20%20%20%20%20%20%20%20this%2EfilterManager%20%3D%20new%20FilterManager%28this%2Erenderer%29%3B%0A%20%20%20%20%20%20%20%20this%2EfilterManager%2EonContextChange%28%29%3B%0A%20%20%20%20%20%20%20%20this%2EfilterManager%2Eresize%28width%2C%20height%29%3B%0A%20%20%20%20%20%20%20%20this%2Erender%20%3D%20this%2ErenderWebGL%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20the%20creation%20of%20a%20filter%20manager%20unbinds%20the%20buffers%2E%2E%0A%20%20%20%20%20%20%20%20this%2Erenderer%2EcurrentRenderer%2Estart%28%29%3B%0A%20%20%20%20%20%20%20%20this%2Erenderer%2EcurrentRenderTarget%2Eactivate%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20this%2Erender%20%3D%20this%2ErenderCanvas%3B%0A%20%20%20%20%20%20%20%20this%2EtextureBuffer%20%3D%20new%20CanvasBuffer%28this%2Ewidth%2A%20this%2Eresolution%2C%20this%2Eheight%2A%20this%2Eresolution%29%3B%0A%20%20%20%20%20%20%20%20this%2EbaseTexture%2Esource%20%3D%20this%2EtextureBuffer%2Ecanvas%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Evalid%20%3D%20true%3B%0A%0A%20%20%20%20this%2E%5FupdateUvs%28%29%3B%0A%7D%0A%0ARenderTexture%2Eprototype%20%3D%20Object%2Ecreate%28Texture%2Eprototype%29%3B%0ARenderTexture%2Eprototype%2Econstructor%20%3D%20RenderTexture%3B%0Amodule%2Eexports%20%3D%20RenderTexture%3B%0A%0A%2F%2A%2A%0A%20%2A%20Resizes%20the%20RenderTexture%2E%0A%20%2A%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20The%20width%20to%20resize%20to%2E%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20The%20height%20to%20resize%20to%2E%0A%20%2A%20%40param%20updateBase%20%7Bboolean%7D%20Should%20the%20baseTexture%2Ewidth%20and%20height%20values%20be%20resized%20as%20well%3F%0A%20%2A%2F%0ARenderTexture%2Eprototype%2Eresize%20%3D%20function%20%28width%2C%20height%2C%20updateBase%29%0A%7B%0A%20%20%20%20if%20%28width%20%3D%3D%3D%20this%2Ewidth%20%26%26%20height%20%3D%3D%3D%20this%2Eheight%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Evalid%20%3D%20%28width%20%3E%200%20%26%26%20height%20%3E%200%29%3B%0A%0A%20%20%20%20this%2Ewidth%20%3D%20this%2E%5Fframe%2Ewidth%20%3D%20this%2Ecrop%2Ewidth%20%3D%20width%3B%0A%20%20%20%20this%2Eheight%20%3D%20%20this%2E%5Fframe%2Eheight%20%3D%20this%2Ecrop%2Eheight%20%3D%20height%3B%0A%0A%20%20%20%20if%20%28updateBase%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EbaseTexture%2Ewidth%20%3D%20this%2Ewidth%3B%0A%20%20%20%20%20%20%20%20this%2EbaseTexture%2Eheight%20%3D%20this%2Eheight%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%21this%2Evalid%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EtextureBuffer%2Eresize%28this%2Ewidth%2C%20this%2Eheight%29%3B%0A%0A%20%20%20%20if%28this%2EfilterManager%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EfilterManager%2Eresize%28this%2Ewidth%2C%20this%2Eheight%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Clears%20the%20RenderTexture%2E%0A%20%2A%0A%20%2A%2F%0ARenderTexture%2Eprototype%2Eclear%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28%21this%2Evalid%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28this%2Erenderer%2Etype%20%3D%3D%3D%20CONST%2ERENDERER%5FTYPE%2EWEBGL%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Erenderer%2Egl%2EbindFramebuffer%28this%2Erenderer%2Egl%2EFRAMEBUFFER%2C%20this%2EtextureBuffer%2EframeBuffer%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EtextureBuffer%2Eclear%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Internal%20method%20assigned%20to%20the%20%60render%60%20property%20if%20using%20a%20CanvasRenderer%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EDisplayObject%7D%20The%20display%20object%20to%20render%20this%20texture%20on%0A%20%2A%20%40param%20%5Bmatrix%5D%20%7BPIXI%2EMatrix%7D%20Optional%20matrix%20to%20apply%20to%20the%20display%20object%20before%20rendering%2E%0A%20%2A%20%40param%20%5Bclear%3Dfalse%5D%20%7Bboolean%7D%20If%20true%20the%20texture%20will%20be%20cleared%20before%20the%20displayObject%20is%20drawn%0A%20%2A%20%40param%20%5BupdateTransform%3Dtrue%5D%20%7Bboolean%7D%20If%20true%20the%20displayObject%27s%20worldTransform%2FworldAlpha%20and%20all%20children%0A%20%2A%20%20transformations%20will%20be%20restored%2E%20Not%20restoring%20this%20information%20will%20be%20a%20little%20faster%2E%0A%20%2A%2F%0ARenderTexture%2Eprototype%2ErenderWebGL%20%3D%20function%20%28displayObject%2C%20matrix%2C%20clear%2C%20updateTransform%29%0A%7B%0A%20%20%20%20if%20%28%21this%2Evalid%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20updateTransform%20%3D%20%28updateTransform%20%21%3D%3D%20undefined%29%20%3F%20updateTransform%20%3A%20true%3B%2F%2F%21updateTransform%3B%0A%0A%20%20%20%20this%2EtextureBuffer%2Etransform%20%3D%20matrix%3B%0A%0A%20%20%20%20%2F%2FTODO%20not%20a%20fan%20that%20this%20is%20here%2E%2E%2E%20it%20will%20move%21%0A%20%20%20%20this%2EtextureBuffer%2Eactivate%28%29%3B%0A%0A%20%20%20%20%2F%2F%20setWorld%20Alpha%20to%20ensure%20that%20the%20object%20is%20renderer%20at%20full%20opacity%0A%20%20%20%20displayObject%2EworldAlpha%20%3D%201%3B%0A%0A%20%20%20%20if%20%28updateTransform%29%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20reset%20the%20matrix%20of%20the%20displatyObject%2E%2E%0A%20%20%20%20%20%20%20%20displayObject%2EworldTransform%2Eidentity%28%29%3B%0A%0A%20%20%20%20%20%20%20%20displayObject%2EcurrentBounds%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Time%20to%20update%20all%20the%20children%20of%20the%20displayObject%20with%20the%20new%20matrix%2E%2E%0A%20%20%20%20%20%20%20%20var%20children%20%3D%20displayObject%2Echildren%3B%0A%20%20%20%20%20%20%20%20var%20i%2C%20j%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20j%20%3D%20children%2Elength%3B%20i%20%3C%20j%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20children%5Bi%5D%2EupdateTransform%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FTODO%20rename%20textureBuffer%20to%20renderTarget%2E%2E%0A%20%20%20%20var%20temp%20%3D%20%20this%2Erenderer%2EfilterManager%3B%0A%0A%20%20%20%20this%2Erenderer%2EfilterManager%20%3D%20this%2EfilterManager%3B%0A%20%20%20%20this%2Erenderer%2ErenderDisplayObject%28displayObject%2C%20this%2EtextureBuffer%2C%20clear%29%3B%0A%0A%20%20%20%20this%2Erenderer%2EfilterManager%20%3D%20temp%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Internal%20method%20assigned%20to%20the%20%60render%60%20property%20if%20using%20a%20CanvasRenderer%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EDisplayObject%7D%20The%20display%20object%20to%20render%20this%20texture%20on%0A%20%2A%20%40param%20%5Bmatrix%5D%20%7BPIXI%2EMatrix%7D%20Optional%20matrix%20to%20apply%20to%20the%20display%20object%20before%20rendering%2E%0A%20%2A%20%40param%20%5Bclear%5D%20%7Bboolean%7D%20If%20true%20the%20texture%20will%20be%20cleared%20before%20the%20displayObject%20is%20drawn%0A%20%2A%2F%0ARenderTexture%2Eprototype%2ErenderCanvas%20%3D%20function%20%28displayObject%2C%20matrix%2C%20clear%2C%20updateTransform%29%0A%7B%0A%20%20%20%20if%20%28%21this%2Evalid%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20updateTransform%20%3D%20%21%21updateTransform%3B%0A%0A%20%20%20%20var%20wt%20%3D%20tempMatrix%3B%0A%0A%20%20%20%20wt%2Eidentity%28%29%3B%0A%0A%20%20%20%20if%20%28matrix%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20wt%2Eappend%28matrix%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20cachedWt%20%3D%20displayObject%2EworldTransform%3B%0A%20%20%20%20displayObject%2EworldTransform%20%3D%20wt%3B%0A%0A%20%20%20%20%2F%2F%20setWorld%20Alpha%20to%20ensure%20that%20the%20object%20is%20renderer%20at%20full%20opacity%0A%20%20%20%20displayObject%2EworldAlpha%20%3D%201%3B%0A%0A%20%20%20%20%2F%2F%20Time%20to%20update%20all%20the%20children%20of%20the%20displayObject%20with%20the%20new%20matrix%2E%2E%0A%20%20%20%20var%20children%20%3D%20displayObject%2Echildren%3B%0A%20%20%20%20var%20i%2C%20j%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%2C%20j%20%3D%20children%2Elength%3B%20i%20%3C%20j%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20children%5Bi%5D%2EupdateTransform%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28clear%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EtextureBuffer%2Eclear%28%29%3B%0A%20%20%20%20%7D%0A%0A%0A%2F%2F%20%20%20%20this%2EtextureBuffer%2E%0A%20%20%20%20var%20context%20%3D%20this%2EtextureBuffer%2Econtext%3B%0A%0A%20%20%20%20var%20realResolution%20%3D%20this%2Erenderer%2Eresolution%3B%0A%0A%20%20%20%20this%2Erenderer%2Eresolution%20%3D%20this%2Eresolution%3B%0A%0A%20%20%20%20this%2Erenderer%2ErenderDisplayObject%28displayObject%2C%20context%29%3B%0A%0A%20%20%20%20this%2Erenderer%2Eresolution%20%3D%20realResolution%3B%0A%0A%20%20%20%20if%28displayObject%2EworldTransform%20%3D%3D%3D%20wt%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20fixes%20cacheAsBitmap%20Happening%20during%20the%20above%2E%2E%0A%20%20%20%20%20%20%20%20displayObject%2EworldTransform%20%3D%20cachedWt%3B%0A%20%20%20%20%7D%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20this%20texture%0A%20%2A%0A%20%2A%20%40param%20destroyBase%20%7Bboolean%7D%20Whether%20to%20destroy%20the%20base%20texture%20as%20well%0A%20%2A%2F%0ARenderTexture%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20Texture%2Eprototype%2Edestroy%2Ecall%28this%2C%20true%29%3B%0A%0A%20%20%20%20this%2EtextureBuffer%2Edestroy%28%29%3B%0A%0A%20%20%20%20%2F%2F%20destroy%20the%20filtermanager%2E%2E%0A%20%20%20%20if%28this%2EfilterManager%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EfilterManager%2Edestroy%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Erenderer%20%3D%20null%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Will%20return%20a%20HTML%20Image%20of%20the%20texture%0A%20%2A%0A%20%2A%20%40return%20%7BImage%7D%0A%20%2A%2F%0ARenderTexture%2Eprototype%2EgetImage%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20image%20%3D%20new%20Image%28%29%3B%0A%20%20%20%20image%2Esrc%20%3D%20this%2EgetBase64%28%29%3B%0A%20%20%20%20return%20image%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Will%20return%20a%20a%20base64%20encoded%20string%20of%20this%20texture%2E%20It%20works%20by%20calling%20RenderTexture%2EgetCanvas%20and%20then%20running%20toDataURL%20on%20that%2E%0A%20%2A%0A%20%2A%20%40return%20%7Bstring%7D%20A%20base64%20encoded%20string%20of%20the%20texture%2E%0A%20%2A%2F%0ARenderTexture%2Eprototype%2EgetBase64%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20this%2EgetCanvas%28%29%2EtoDataURL%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20Canvas%20element%2C%20renders%20this%20RenderTexture%20to%20it%20and%20then%20returns%20it%2E%0A%20%2A%0A%20%2A%20%40return%20%7BHTMLCanvasElement%7D%20A%20Canvas%20element%20with%20the%20texture%20rendered%20on%2E%0A%20%2A%2F%0ARenderTexture%2Eprototype%2EgetCanvas%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28this%2Erenderer%2Etype%20%3D%3D%3D%20CONST%2ERENDERER%5FTYPE%2EWEBGL%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%20%20%20%20%20%20%20%20var%20width%20%3D%20this%2EtextureBuffer%2Esize%2Ewidth%3B%0A%20%20%20%20%20%20%20%20var%20height%20%3D%20this%2EtextureBuffer%2Esize%2Eheight%3B%0A%0A%20%20%20%20%20%20%20%20var%20webGLPixels%20%3D%20new%20Uint8Array%284%20%2A%20width%20%2A%20height%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EbindFramebuffer%28gl%2EFRAMEBUFFER%2C%20this%2EtextureBuffer%2EframeBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2EreadPixels%280%2C%200%2C%20width%2C%20height%2C%20gl%2ERGBA%2C%20gl%2EUNSIGNED%5FBYTE%2C%20webGLPixels%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbindFramebuffer%28gl%2EFRAMEBUFFER%2C%20null%29%3B%0A%0A%20%20%20%20%20%20%20%20var%20tempCanvas%20%3D%20new%20CanvasBuffer%28width%2C%20height%29%3B%0A%20%20%20%20%20%20%20%20var%20canvasData%20%3D%20tempCanvas%2Econtext%2EgetImageData%280%2C%200%2C%20width%2C%20height%29%3B%0A%20%20%20%20%20%20%20%20canvasData%2Edata%2Eset%28webGLPixels%29%3B%0A%0A%20%20%20%20%20%20%20%20tempCanvas%2Econtext%2EputImageData%28canvasData%2C%200%2C%200%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20tempCanvas%2Ecanvas%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20this%2EtextureBuffer%2Ecanvas%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Will%20return%20a%20one%2Ddimensional%20array%20containing%20the%20pixel%20data%20of%20the%20entire%20texture%20in%20RGBA%20order%2C%20with%20integer%20values%20between%200%20and%20255%20%28included%29%2E%0A%20%2A%0A%20%2A%20%40return%20%7BUint8ClampedArray%7D%0A%20%2A%2F%0ARenderTexture%2Eprototype%2EgetPixels%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20width%2C%20height%3B%0A%0A%20%20%20%20if%20%28this%2Erenderer%2Etype%20%3D%3D%3D%20CONST%2ERENDERER%5FTYPE%2EWEBGL%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%20%20%20%20%20%20%20%20width%20%3D%20this%2EtextureBuffer%2Esize%2Ewidth%3B%0A%20%20%20%20%20%20%20%20height%20%3D%20this%2EtextureBuffer%2Esize%2Eheight%3B%0A%0A%20%20%20%20%20%20%20%20var%20webGLPixels%20%3D%20new%20Uint8Array%284%20%2A%20width%20%2A%20height%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EbindFramebuffer%28gl%2EFRAMEBUFFER%2C%20this%2EtextureBuffer%2EframeBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2EreadPixels%280%2C%200%2C%20width%2C%20height%2C%20gl%2ERGBA%2C%20gl%2EUNSIGNED%5FBYTE%2C%20webGLPixels%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbindFramebuffer%28gl%2EFRAMEBUFFER%2C%20null%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20webGLPixels%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20width%20%3D%20this%2EtextureBuffer%2Ecanvas%2Ewidth%3B%0A%20%20%20%20%20%20%20%20height%20%3D%20this%2EtextureBuffer%2Ecanvas%2Eheight%3B%0A%0A%20%20%20%20%20%20%20%20return%20this%2EtextureBuffer%2Ecanvas%2EgetContext%28%272d%27%29%2EgetImageData%280%2C%200%2C%20width%2C%20height%29%2Edata%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Will%20return%20a%20one%2Ddimensional%20array%20containing%20the%20pixel%20data%20of%20a%20pixel%20within%20the%20texture%20in%20RGBA%20order%2C%20with%20integer%20values%20between%200%20and%20255%20%28included%29%2E%0A%20%2A%0A%20%2A%20%40param%20x%20%7Bnumber%7D%20The%20x%20coordinate%20of%20the%20pixel%20to%20retrieve%2E%0A%20%2A%20%40param%20y%20%7Bnumber%7D%20The%20y%20coordinate%20of%20the%20pixel%20to%20retrieve%2E%0A%20%2A%20%40return%20%7BUint8ClampedArray%7D%0A%20%2A%2F%0ARenderTexture%2Eprototype%2EgetPixel%20%3D%20function%20%28x%2C%20y%29%0A%7B%0A%20%20%20%20if%20%28this%2Erenderer%2Etype%20%3D%3D%3D%20CONST%2ERENDERER%5FTYPE%2EWEBGL%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20%20%20%20%20var%20webGLPixels%20%3D%20new%20Uint8Array%284%29%3B%0A%0A%20%20%20%20%20%20%20%20gl%2EbindFramebuffer%28gl%2EFRAMEBUFFER%2C%20this%2EtextureBuffer%2EframeBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2EreadPixels%28x%2C%20y%2C%201%2C%201%2C%20gl%2ERGBA%2C%20gl%2EUNSIGNED%5FBYTE%2C%20webGLPixels%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbindFramebuffer%28gl%2EFRAMEBUFFER%2C%20null%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20webGLPixels%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20this%2EtextureBuffer%2Ecanvas%2EgetContext%28%272d%27%29%2EgetImageData%28x%2C%20y%2C%201%2C%201%29%2Edata%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fconst%22%3A16%2C%22%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2Frenderers%2Fcanvas%2Futils%2FCanvasBuffer%22%3A38%2C%22%2E%2E%2Frenderers%2Fwebgl%2Fmanagers%2FFilterManager%22%3A47%2C%22%2E%2E%2Frenderers%2Fwebgl%2Futils%2FRenderTarget%22%3A58%2C%22%2E%2FBaseTexture%22%3A63%2C%22%2E%2FTexture%22%3A65%7D%5D%2C65%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20BaseTexture%20%3D%20require%28%27%2E%2FBaseTexture%27%29%2C%0A%20%20%20%20VideoBaseTexture%20%3D%20require%28%27%2E%2FVideoBaseTexture%27%29%2C%0A%20%20%20%20TextureUvs%20%3D%20require%28%27%2E%2FTextureUvs%27%29%2C%0A%20%20%20%20EventEmitter%20%3D%20require%28%27eventemitter3%27%29%2C%0A%20%20%20%20math%20%3D%20require%28%27%2E%2E%2Fmath%27%29%2C%0A%20%20%20%20utils%20%3D%20require%28%27%2E%2E%2Futils%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20texture%20stores%20the%20information%20that%20represents%20an%20image%20or%20part%20of%20an%20image%2E%20It%20cannot%20be%20added%0A%20%2A%20to%20the%20display%20list%20directly%2E%20Instead%20use%20it%20as%20the%20texture%20for%20a%20Sprite%2E%20If%20no%20frame%20is%20provided%20then%20the%20whole%20image%20is%20used%2E%0A%20%2A%0A%20%2A%20You%20can%20directly%20create%20a%20texture%20from%20an%20image%20and%20then%20reuse%20it%20multiple%20times%20like%20this%20%3A%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20var%20texture%20%3D%20PIXI%2ETexture%2EfromImage%28%27assets%2Fimage%2Epng%27%29%3B%0A%20%2A%20var%20sprite1%20%3D%20new%20PIXI%2ESprite%28texture%29%3B%0A%20%2A%20var%20sprite2%20%3D%20new%20PIXI%2ESprite%28texture%29%3B%0A%20%2A%20%60%60%60%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20baseTexture%20%7BPIXI%2EBaseTexture%7D%20The%20base%20texture%20source%20to%20create%20the%20texture%20from%0A%20%2A%20%40param%20%5Bframe%5D%20%7BPIXI%2ERectangle%7D%20The%20rectangle%20frame%20of%20the%20texture%20to%20show%0A%20%2A%20%40param%20%5Bcrop%5D%20%7BPIXI%2ERectangle%7D%20The%20area%20of%20original%20texture%0A%20%2A%20%40param%20%5Btrim%5D%20%7BPIXI%2ERectangle%7D%20Trimmed%20texture%20rectangle%0A%20%2A%20%40param%20%5Brotate%5D%20%7Bboolean%7D%20indicates%20whether%20the%20texture%20should%20be%20rotated%20by%2090%20degrees%20%28%20used%20by%20texture%20packer%20%29%0A%20%2A%2F%0Afunction%20Texture%28baseTexture%2C%20frame%2C%20crop%2C%20trim%2C%20rotate%29%0A%7B%0A%20%20%20%20EventEmitter%2Ecall%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Does%20this%20Texture%20have%20any%20frame%20data%20assigned%20to%20it%3F%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EnoFrame%20%3D%20false%3B%0A%0A%20%20%20%20if%20%28%21frame%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EnoFrame%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20frame%20%3D%20new%20math%2ERectangle%280%2C%200%2C%201%2C%201%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28baseTexture%20instanceof%20Texture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20baseTexture%20%3D%20baseTexture%2EbaseTexture%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20base%20texture%20that%20this%20texture%20uses%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EBaseTexture%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EbaseTexture%20%3D%20baseTexture%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20frame%20specifies%20the%20region%20of%20the%20base%20texture%20that%20this%20texture%20uses%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fframe%20%3D%20frame%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20texture%20trim%20data%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etrim%20%3D%20trim%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20will%20let%20the%20renderer%20know%20if%20the%20texture%20is%20valid%2E%20If%20it%27s%20not%20then%20it%20cannot%20be%20rendered%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Evalid%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20will%20let%20a%20renderer%20know%20that%20a%20texture%20has%20been%20updated%20%28used%20mainly%20for%20webGL%20uv%20updates%29%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2ErequiresUpdate%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20WebGL%20UV%20data%20cache%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ETextureUvs%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fuvs%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20width%20of%20the%20Texture%20in%20pixels%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ewidth%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20Texture%20in%20pixels%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eheight%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20is%20the%20area%20of%20the%20BaseTexture%20image%20to%20actually%20copy%20to%20the%20Canvas%20%2F%20WebGL%20when%20rendering%2C%0A%20%20%20%20%20%2A%20irrespective%20of%20the%20actual%20frame%20size%20or%20placement%20%28which%20can%20be%20influenced%20by%20trimmed%20texture%20atlases%29%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ecrop%20%3D%20crop%20%7C%7C%20frame%3B%2F%2Fnew%20math%2ERectangle%280%2C%200%2C%201%2C%201%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Indicates%20whether%20the%20texture%20should%20be%20rotated%20by%2090%20degrees%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Erotate%20%3D%20%21%21rotate%3B%0A%0A%20%20%20%20if%20%28baseTexture%2EhasLoaded%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2EnoFrame%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20frame%20%3D%20new%20math%2ERectangle%280%2C%200%2C%20baseTexture%2Ewidth%2C%20baseTexture%2Eheight%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20there%20is%20no%20frame%20we%20should%20monitor%20for%20any%20base%20texture%20changes%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20baseTexture%2Eon%28%27update%27%2C%20this%2EonBaseTextureUpdated%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this%2Eframe%20%3D%20frame%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20baseTexture%2Eonce%28%27loaded%27%2C%20this%2EonBaseTextureLoaded%2C%20this%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Fired%20when%20the%20texture%20is%20updated%2E%20This%20happens%20if%20the%20frame%20or%20the%20baseTexture%20is%20updated%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40event%20update%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2ETexture%23%0A%20%20%20%20%20%2A%20%40protected%0A%20%20%20%20%20%2A%2F%0A%7D%0A%0ATexture%2Eprototype%20%3D%20Object%2Ecreate%28EventEmitter%2Eprototype%29%3B%0ATexture%2Eprototype%2Econstructor%20%3D%20Texture%3B%0Amodule%2Eexports%20%3D%20Texture%3B%0A%0AObject%2EdefineProperties%28Texture%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20frame%20specifies%20the%20region%20of%20the%20base%20texture%20that%20this%20texture%20uses%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ERectangle%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2ETexture%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20frame%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fframe%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28frame%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fframe%20%3D%20frame%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EnoFrame%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ewidth%20%3D%20frame%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eheight%20%3D%20frame%2Eheight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21this%2Etrim%20%26%26%20%21this%2Erotate%20%26%26%20%28frame%2Ex%20%2B%20frame%2Ewidth%20%3E%20this%2EbaseTexture%2Ewidth%20%7C%7C%20frame%2Ey%20%2B%20frame%2Eheight%20%3E%20this%2EbaseTexture%2Eheight%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%27Texture%20Error%3A%20frame%20does%20not%20fit%20inside%20the%20base%20Texture%20dimensions%20%27%20%2B%20this%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthis%2Evalid%20%3D%20frame%20%26%26%20frame%2Ewidth%20%26%26%20frame%2Eheight%20%26%26%20this%2EbaseTexture%2Esource%20%26%26%20this%2EbaseTexture%2EhasLoaded%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Evalid%20%3D%20frame%20%26%26%20frame%2Ewidth%20%26%26%20frame%2Eheight%20%26%26%20this%2EbaseTexture%2EhasLoaded%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2Etrim%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Ewidth%20%3D%20this%2Etrim%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Eheight%20%3D%20this%2Etrim%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fframe%2Ewidth%20%3D%20this%2Etrim%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fframe%2Eheight%20%3D%20this%2Etrim%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Ecrop%20%3D%20frame%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2Evalid%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FupdateUvs%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20this%20texture%20on%20the%20gpu%2E%0A%20%2A%0A%20%2A%2F%0ATexture%2Eprototype%2Eupdate%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2EbaseTexture%2Eupdate%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20when%20the%20base%20texture%20is%20loaded%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ATexture%2Eprototype%2EonBaseTextureLoaded%20%3D%20function%20%28baseTexture%29%0A%7B%0A%20%20%20%20%2F%2F%20TODO%20this%20code%20looks%20confusing%2E%2E%20boo%20to%20abusing%20getters%20and%20setterss%21%0A%20%20%20%20if%20%28this%2EnoFrame%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eframe%20%3D%20new%20math%2ERectangle%280%2C%200%2C%20baseTexture%2Ewidth%2C%20baseTexture%2Eheight%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eframe%20%3D%20this%2E%5Fframe%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Eemit%28%27update%27%2C%20this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20when%20the%20base%20texture%20is%20updated%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ATexture%2Eprototype%2EonBaseTextureUpdated%20%3D%20function%20%28baseTexture%29%0A%7B%0A%20%20%20%20this%2E%5Fframe%2Ewidth%20%3D%20baseTexture%2Ewidth%3B%0A%20%20%20%20this%2E%5Fframe%2Eheight%20%3D%20baseTexture%2Eheight%3B%0A%0A%20%20%20%20this%2Eemit%28%27update%27%2C%20this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20this%20texture%0A%20%2A%0A%20%2A%20%40param%20%5BdestroyBase%3Dfalse%5D%20%7Bboolean%7D%20Whether%20to%20destroy%20the%20base%20texture%20as%20well%0A%20%2A%2F%0ATexture%2Eprototype%2Edestroy%20%3D%20function%20%28destroyBase%29%0A%7B%0A%20%20%20%20if%20%28this%2EbaseTexture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28destroyBase%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EbaseTexture%2Edestroy%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this%2EbaseTexture%2Eoff%28%27update%27%2C%20this%2EonBaseTextureUpdated%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20this%2EbaseTexture%2Eoff%28%27loaded%27%2C%20this%2EonBaseTextureLoaded%2C%20this%29%3B%0A%0A%20%20%20%20%20%20%20%20this%2EbaseTexture%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2E%5Fframe%20%3D%20null%3B%0A%20%20%20%20this%2E%5Fuvs%20%3D%20null%3B%0A%20%20%20%20this%2Etrim%20%3D%20null%3B%0A%20%20%20%20this%2Ecrop%20%3D%20null%3B%0A%0A%20%20%20%20this%2Evalid%20%3D%20false%3B%0A%0A%20%20%20%20this%2Eoff%28%27dispose%27%2C%20this%2Edispose%2C%20this%29%3B%0A%20%20%20%20this%2Eoff%28%27update%27%2C%20this%2Eupdate%2C%20this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20new%20texture%20object%20that%20acts%20the%20same%20as%20this%20one%2E%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2ETexture%7D%0A%20%2A%2F%0ATexture%2Eprototype%2Eclone%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20new%20Texture%28this%2EbaseTexture%2C%20this%2Eframe%2C%20this%2Ecrop%2C%20this%2Etrim%2C%20this%2Erotate%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20internal%20WebGL%20UV%20cache%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ATexture%2Eprototype%2E%5FupdateUvs%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28%21this%2E%5Fuvs%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5Fuvs%20%3D%20new%20TextureUvs%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2E%5Fuvs%2Eset%28this%2Ecrop%2C%20this%2EbaseTexture%2C%20this%2Erotate%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20Texture%20object%20from%20the%20given%20image%20url%2E%0A%20%2A%20If%20the%20image%20is%20not%20in%20the%20texture%20cache%20it%20will%20be%20%20created%20and%20loaded%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20imageUrl%20%7Bstring%7D%20The%20image%20url%20of%20the%20texture%0A%20%2A%20%40param%20crossorigin%20%7Bboolean%7D%20Whether%20requests%20should%20be%20treated%20as%20crossorigin%0A%20%2A%20%40param%20scaleMode%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40return%20%7BPIXI%2ETexture%7D%20The%20newly%20created%20texture%0A%20%2A%2F%0ATexture%2EfromImage%20%3D%20function%20%28imageUrl%2C%20crossorigin%2C%20scaleMode%29%0A%7B%0A%20%20%20%20var%20texture%20%3D%20utils%2ETextureCache%5BimageUrl%5D%3B%0A%0A%20%20%20%20if%20%28%21texture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20texture%20%3D%20new%20Texture%28BaseTexture%2EfromImage%28imageUrl%2C%20crossorigin%2C%20scaleMode%29%29%3B%0A%20%20%20%20%20%20%20%20utils%2ETextureCache%5BimageUrl%5D%20%3D%20texture%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20texture%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20sprite%20that%20will%20contain%20a%20texture%20from%20the%20TextureCache%20based%20on%20the%20frameId%0A%20%2A%20The%20frame%20ids%20are%20created%20when%20a%20Texture%20packer%20file%20has%20been%20loaded%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20frameId%20%7Bstring%7D%20The%20frame%20Id%20of%20the%20texture%20in%20the%20cache%0A%20%2A%20%40return%20%7BPIXI%2ETexture%7D%20The%20newly%20created%20texture%0A%20%2A%2F%0ATexture%2EfromFrame%20%3D%20function%20%28frameId%29%0A%7B%0A%20%20%20%20var%20texture%20%3D%20utils%2ETextureCache%5BframeId%5D%3B%0A%0A%20%20%20%20if%20%28%21texture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27The%20frameId%20%22%27%20%2B%20frameId%20%2B%20%27%22%20does%20not%20exist%20in%20the%20texture%20cache%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20texture%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20new%20Texture%20based%20on%20the%20given%20canvas%20element%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20canvas%20%7BCanvas%7D%20The%20canvas%20element%20source%20of%20the%20texture%0A%20%2A%20%40param%20scaleMode%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40return%20%7BPIXI%2ETexture%7D%0A%20%2A%2F%0ATexture%2EfromCanvas%20%3D%20function%20%28canvas%2C%20scaleMode%29%0A%7B%0A%20%20%20%20return%20new%20Texture%28BaseTexture%2EfromCanvas%28canvas%2C%20scaleMode%29%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20new%20Texture%20based%20on%20the%20given%20video%20element%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20video%20%7BHTMLVideoElement%7D%0A%20%2A%20%40param%20scaleMode%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40return%20%7BPIXI%2ETexture%7D%20A%20Texture%0A%20%2A%2F%0ATexture%2EfromVideo%20%3D%20function%20%28video%2C%20scaleMode%29%0A%7B%0A%20%20%20%20if%20%28typeof%20video%20%3D%3D%3D%20%27string%27%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20Texture%2EfromVideoUrl%28video%2C%20scaleMode%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20Texture%28VideoBaseTexture%2EfromVideo%28video%2C%20scaleMode%29%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20new%20Texture%20based%20on%20the%20video%20url%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20videoUrl%20%7Bstring%7D%0A%20%2A%20%40param%20scaleMode%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40return%20%7BPIXI%2ETexture%7D%20A%20Texture%0A%20%2A%2F%0ATexture%2EfromVideoUrl%20%3D%20function%20%28videoUrl%2C%20scaleMode%29%0A%7B%0A%20%20%20%20return%20new%20Texture%28VideoBaseTexture%2EfromUrl%28videoUrl%2C%20scaleMode%29%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Adds%20a%20texture%20to%20the%20global%20utils%2ETextureCache%2E%20This%20cache%20is%20shared%20across%20the%20whole%20PIXI%20object%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20texture%20%7BPIXI%2ETexture%7D%20The%20Texture%20to%20add%20to%20the%20cache%2E%0A%20%2A%20%40param%20id%20%7Bstring%7D%20The%20id%20that%20the%20texture%20will%20be%20stored%20against%2E%0A%20%2A%2F%0ATexture%2EaddTextureToCache%20%3D%20function%20%28texture%2C%20id%29%0A%7B%0A%20%20%20%20utils%2ETextureCache%5Bid%5D%20%3D%20texture%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Remove%20a%20texture%20from%20the%20global%20utils%2ETextureCache%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20id%20%7Bstring%7D%20The%20id%20of%20the%20texture%20to%20be%20removed%0A%20%2A%20%40return%20%7BPIXI%2ETexture%7D%20The%20texture%20that%20was%20removed%0A%20%2A%2F%0ATexture%2EremoveTextureFromCache%20%3D%20function%20%28id%29%0A%7B%0A%20%20%20%20var%20texture%20%3D%20utils%2ETextureCache%5Bid%5D%3B%0A%0A%20%20%20%20delete%20utils%2ETextureCache%5Bid%5D%3B%0A%20%20%20%20delete%20utils%2EBaseTextureCache%5Bid%5D%3B%0A%0A%20%20%20%20return%20texture%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20An%20empty%20texture%2C%20used%20often%20to%20not%20have%20to%20create%20multiple%20empty%20textures%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40constant%0A%20%2A%2F%0ATexture%2EEMPTY%20%3D%20new%20Texture%28new%20BaseTexture%28%29%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fmath%22%3A26%2C%22%2E%2E%2Futils%22%3A70%2C%22%2E%2FBaseTexture%22%3A63%2C%22%2E%2FTextureUvs%22%3A66%2C%22%2E%2FVideoBaseTexture%22%3A67%2C%22eventemitter3%22%3A10%7D%5D%2C66%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%0A%2F%2A%2A%0A%20%2A%20A%20standard%20object%20to%20store%20the%20Uvs%20of%20a%20texture%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40private%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%2F%0Afunction%20TextureUvs%28%29%0A%7B%0A%20%20%20%20this%2Ex0%20%3D%200%3B%0A%20%20%20%20this%2Ey0%20%3D%200%3B%0A%0A%20%20%20%20this%2Ex1%20%3D%201%3B%0A%20%20%20%20this%2Ey1%20%3D%200%3B%0A%0A%20%20%20%20this%2Ex2%20%3D%201%3B%0A%20%20%20%20this%2Ey2%20%3D%201%3B%0A%0A%20%20%20%20this%2Ex3%20%3D%200%3B%0A%20%20%20%20this%2Ey3%20%3D%201%3B%0A%7D%0A%0Amodule%2Eexports%20%3D%20TextureUvs%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20the%20texture%20Uvs%20based%20on%20the%20given%20frame%20information%0A%20%2A%20%40param%20frame%20%7BPIXI%2ERectangle%7D%0A%20%2A%20%40param%20baseFrame%20%7BPIXI%2ERectangle%7D%0A%20%2A%20%40param%20rotate%20%7Bboolean%7D%20Whether%20or%20not%20the%20frame%20is%20rotated%0A%20%2A%20%40private%0A%20%2A%2F%0ATextureUvs%2Eprototype%2Eset%20%3D%20function%20%28frame%2C%20baseFrame%2C%20rotate%29%0A%7B%0A%20%20%20%20var%20tw%20%3D%20baseFrame%2Ewidth%3B%0A%20%20%20%20var%20th%20%3D%20baseFrame%2Eheight%3B%0A%0A%20%20%20%20if%28rotate%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Ex0%20%3D%20%28frame%2Ex%20%2B%20frame%2Eheight%29%20%2F%20tw%3B%0A%20%20%20%20%20%20%20%20this%2Ey0%20%3D%20frame%2Ey%20%2F%20th%3B%0A%0A%20%20%20%20%20%20%20%20this%2Ex1%20%3D%20%28frame%2Ex%20%2B%20frame%2Eheight%29%20%2F%20tw%3B%0A%20%20%20%20%20%20%20%20this%2Ey1%20%3D%20%28frame%2Ey%20%2B%20frame%2Ewidth%29%20%2F%20th%3B%0A%0A%20%20%20%20%20%20%20%20this%2Ex2%20%3D%20frame%2Ex%20%2F%20tw%3B%0A%20%20%20%20%20%20%20%20this%2Ey2%20%3D%20%28frame%2Ey%20%2B%20frame%2Ewidth%29%20%2F%20th%3B%0A%0A%20%20%20%20%20%20%20%20this%2Ex3%20%3D%20frame%2Ex%20%2F%20tw%3B%0A%20%20%20%20%20%20%20%20this%2Ey3%20%3D%20frame%2Ey%20%2F%20th%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20this%2Ex0%20%3D%20frame%2Ex%20%2F%20tw%3B%0A%20%20%20%20%20%20%20%20this%2Ey0%20%3D%20frame%2Ey%20%2F%20th%3B%0A%0A%20%20%20%20%20%20%20%20this%2Ex1%20%3D%20%28frame%2Ex%20%2B%20frame%2Ewidth%29%20%2F%20tw%3B%0A%20%20%20%20%20%20%20%20this%2Ey1%20%3D%20frame%2Ey%20%2F%20th%3B%0A%0A%20%20%20%20%20%20%20%20this%2Ex2%20%3D%20%28frame%2Ex%20%2B%20frame%2Ewidth%29%20%2F%20tw%3B%0A%20%20%20%20%20%20%20%20this%2Ey2%20%3D%20%28frame%2Ey%20%2B%20frame%2Eheight%29%20%2F%20th%3B%0A%0A%20%20%20%20%20%20%20%20this%2Ex3%20%3D%20frame%2Ex%20%2F%20tw%3B%0A%20%20%20%20%20%20%20%20this%2Ey3%20%3D%20%28frame%2Ey%20%2B%20frame%2Eheight%29%20%2F%20th%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C67%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20BaseTexture%20%3D%20require%28%27%2E%2FBaseTexture%27%29%2C%0A%20%20%20%20utils%20%3D%20require%28%27%2E%2E%2Futils%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20texture%20of%20a%20%5Bplaying%5D%20Video%2E%0A%20%2A%0A%20%2A%20Video%20base%20textures%20mimic%20Pixi%20BaseTexture%2Efrom%2E%2E%2E%2E%20method%20in%20their%20creation%20process%2E%0A%20%2A%0A%20%2A%20This%20can%20be%20used%20in%20several%20ways%2C%20such%20as%3A%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20var%20texture%20%3D%20PIXI%2EVideoBaseTexture%2EfromUrl%28%27http%3A%2F%2Fmydomain%2Ecom%2Fvideo%2Emp4%27%29%3B%0A%20%2A%0A%20%2A%20var%20texture%20%3D%20PIXI%2EVideoBaseTexture%2EfromUrl%28%7B%20src%3A%20%27http%3A%2F%2Fmydomain%2Ecom%2Fvideo%2Emp4%27%2C%20mime%3A%20%27video%2Fmp4%27%20%7D%29%3B%0A%20%2A%0A%20%2A%20var%20texture%20%3D%20PIXI%2EVideoBaseTexture%2EfromUrls%28%5B%27%2Fvideo%2Ewebm%27%2C%20%27%2Fvideo%2Emp4%27%5D%29%3B%0A%20%2A%0A%20%2A%20var%20texture%20%3D%20PIXI%2EVideoBaseTexture%2EfromUrls%28%5B%0A%20%2A%20%20%20%20%20%7B%20src%3A%20%27%2Fvideo%2Ewebm%27%2C%20mime%3A%20%27video%2Fwebm%27%20%7D%2C%0A%20%2A%20%20%20%20%20%7B%20src%3A%20%27%2Fvideo%2Emp4%27%2C%20mime%3A%20%27video%2Fmp4%27%20%7D%0A%20%2A%20%5D%29%3B%0A%20%2A%20%60%60%60%0A%20%2A%0A%20%2A%20See%20the%20%5B%22deus%22%20demo%5D%28http%3A%2F%2Fwww%2Egoodboydigital%2Ecom%2Fpixijs%2Fexamples%2Fdeus%2F%29%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EBaseTexture%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40param%20source%20%7BHTMLVideoElement%7D%0A%20%2A%20%40param%20%5BscaleMode%5D%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%2F%0Afunction%20VideoBaseTexture%28source%2C%20scaleMode%29%0A%7B%0A%20%20%20%20if%20%28%21source%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27No%20video%20source%20element%20specified%2E%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20hook%20in%20here%20to%20check%20if%20video%20is%20already%20available%2E%0A%20%20%20%20%2F%2F%20BaseTexture%20looks%20for%20a%20source%2Ecomplete%20boolean%2C%20plus%20width%20%26%20height%2E%0A%0A%20%20%20%20if%20%28%28source%2EreadyState%20%3D%3D%3D%20source%2EHAVE%5FENOUGH%5FDATA%20%7C%7C%20source%2EreadyState%20%3D%3D%3D%20source%2EHAVE%5FFUTURE%5FDATA%29%20%26%26%20source%2Ewidth%20%26%26%20source%2Eheight%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20source%2Ecomplete%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20BaseTexture%2Ecall%28this%2C%20source%2C%20scaleMode%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Should%20the%20base%20texture%20automatically%20update%20itself%2C%20set%20to%20true%20by%20default%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40default%20true%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EautoUpdate%20%3D%20false%3B%0A%0A%20%20%20%20this%2E%5FonUpdate%20%3D%20this%2E%5FonUpdate%2Ebind%28this%29%3B%0A%20%20%20%20this%2E%5FonCanPlay%20%3D%20this%2E%5FonCanPlay%2Ebind%28this%29%3B%0A%0A%20%20%20%20if%20%28%21source%2Ecomplete%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20source%2EaddEventListener%28%27canplay%27%2C%20this%2E%5FonCanPlay%29%3B%0A%20%20%20%20%20%20%20%20source%2EaddEventListener%28%27canplaythrough%27%2C%20this%2E%5FonCanPlay%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20started%20playing%2E%2E%0A%20%20%20%20%20%20%20%20source%2EaddEventListener%28%27play%27%2C%20this%2E%5FonPlayStart%2Ebind%28this%29%29%3B%0A%20%20%20%20%20%20%20%20source%2EaddEventListener%28%27pause%27%2C%20this%2E%5FonPlayStop%2Ebind%28this%29%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2E%5F%5Floaded%20%3D%20false%3B%0A%7D%0A%0AVideoBaseTexture%2Eprototype%20%3D%20Object%2Ecreate%28BaseTexture%2Eprototype%29%3B%0AVideoBaseTexture%2Eprototype%2Econstructor%20%3D%20VideoBaseTexture%3B%0Amodule%2Eexports%20%3D%20VideoBaseTexture%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20internal%20update%20loop%20of%20the%20video%20base%20texture%2C%20only%20runs%20when%20autoUpdate%20is%20set%20to%20true%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AVideoBaseTexture%2Eprototype%2E%5FonUpdate%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28this%2EautoUpdate%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20window%2ErequestAnimationFrame%28this%2E%5FonUpdate%29%3B%0A%20%20%20%20%20%20%20%20this%2Eupdate%28%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Runs%20the%20update%20loop%20when%20the%20video%20is%20ready%20to%20play%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AVideoBaseTexture%2Eprototype%2E%5FonPlayStart%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28%21this%2EautoUpdate%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20window%2ErequestAnimationFrame%28this%2E%5FonUpdate%29%3B%0A%20%20%20%20%20%20%20%20this%2EautoUpdate%20%3D%20true%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Fired%20when%20a%20pause%20event%20is%20triggered%2C%20stops%20the%20update%20loop%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AVideoBaseTexture%2Eprototype%2E%5FonPlayStop%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2EautoUpdate%20%3D%20false%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Fired%20when%20the%20video%20is%20loaded%20and%20ready%20to%20play%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AVideoBaseTexture%2Eprototype%2E%5FonCanPlay%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2EhasLoaded%20%3D%20true%3B%0A%0A%20%20%20%20if%20%28this%2Esource%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Esource%2EremoveEventListener%28%27canplay%27%2C%20this%2E%5FonCanPlay%29%3B%0A%20%20%20%20%20%20%20%20this%2Esource%2EremoveEventListener%28%27canplaythrough%27%2C%20this%2E%5FonCanPlay%29%3B%0A%0A%20%20%20%20%20%20%20%20this%2Ewidth%20%3D%20this%2Esource%2EvideoWidth%3B%0A%20%20%20%20%20%20%20%20this%2Eheight%20%3D%20this%2Esource%2EvideoHeight%3B%0A%0A%20%20%20%20%20%20%20%20this%2Esource%2Eplay%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20prevent%20multiple%20loaded%20dispatches%2E%2E%0A%20%20%20%20%20%20%20%20if%20%28%21this%2E%5F%5Floaded%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5F%5Floaded%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eemit%28%27loaded%27%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20this%20texture%0A%20%2A%0A%20%2A%2F%0AVideoBaseTexture%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28this%2Esource%20%26%26%20this%2Esource%2E%5FpixiId%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20delete%20utils%2EBaseTextureCache%5B%20this%2Esource%2E%5FpixiId%20%5D%3B%0A%20%20%20%20%20%20%20%20delete%20this%2Esource%2E%5FpixiId%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20BaseTexture%2Eprototype%2Edestroy%2Ecall%28this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Mimic%20Pixi%20BaseTexture%2Efrom%2E%2E%2E%2E%20method%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20video%20%7BHTMLVideoElement%7D%0A%20%2A%20%40param%20scaleMode%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40return%20%7BPIXI%2EVideoBaseTexture%7D%0A%20%2A%2F%0AVideoBaseTexture%2EfromVideo%20%3D%20function%20%28video%2C%20scaleMode%29%0A%7B%0A%20%20%20%20if%20%28%21video%2E%5FpixiId%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20video%2E%5FpixiId%20%3D%20%27video%5F%27%20%2B%20utils%2Euid%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20baseTexture%20%3D%20utils%2EBaseTextureCache%5Bvideo%2E%5FpixiId%5D%3B%0A%0A%20%20%20%20if%20%28%21baseTexture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20baseTexture%20%3D%20new%20VideoBaseTexture%28video%2C%20scaleMode%29%3B%0A%20%20%20%20%20%20%20%20utils%2EBaseTextureCache%5B%20video%2E%5FpixiId%20%5D%20%3D%20baseTexture%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20baseTexture%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20new%20BaseTexture%20based%20on%20the%20given%20video%20element%2E%0A%20%2A%20This%20BaseTexture%20can%20then%20be%20used%20to%20create%20a%20texture%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20videoSrc%20%7Bstring%7Cobject%7Cstring%5B%5D%7Cobject%5B%5D%7D%20The%20URL%28s%29%20for%20the%20video%2E%0A%20%2A%20%40param%20%5BvideoSrc%2Esrc%5D%20%7Bstring%7D%20One%20of%20the%20source%20urls%20for%20the%20video%0A%20%2A%20%40param%20%5BvideoSrc%2Emime%5D%20%7Bstring%7D%20The%20mimetype%20of%20the%20video%20%28e%2Eg%2E%20%27video%2Fmp4%27%29%2E%20If%20not%20specified%0A%20%2A%20%20the%20url%27s%20extension%20will%20be%20used%20as%20the%20second%20part%20of%20the%20mime%20type%2E%0A%20%2A%20%40param%20scaleMode%20%7Bnumber%7D%20See%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40return%20%7BPIXI%2EVideoBaseTexture%7D%0A%20%2A%2F%0AVideoBaseTexture%2EfromUrl%20%3D%20function%20%28videoSrc%2C%20scaleMode%29%0A%7B%0A%20%20%20%20var%20video%20%3D%20document%2EcreateElement%28%27video%27%29%3B%0A%0A%20%20%20%20%2F%2F%20array%20of%20objects%20or%20strings%0A%20%20%20%20if%20%28Array%2EisArray%28videoSrc%29%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20videoSrc%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20video%2EappendChild%28createSource%28videoSrc%5Bi%5D%2Esrc%20%7C%7C%20videoSrc%5Bi%5D%2C%20videoSrc%5Bi%5D%2Emime%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20single%20object%20or%20string%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20video%2EappendChild%28createSource%28videoSrc%2Esrc%20%7C%7C%20videoSrc%2C%20videoSrc%2Emime%29%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20video%2Eload%28%29%3B%0A%20%20%20%20video%2Eplay%28%29%3B%0A%0A%20%20%20%20return%20VideoBaseTexture%2EfromVideo%28video%2C%20scaleMode%29%3B%0A%7D%3B%0A%0AVideoBaseTexture%2EfromUrls%20%3D%20VideoBaseTexture%2EfromUrl%3B%0A%0Afunction%20createSource%28path%2C%20type%29%0A%7B%0A%20%20%20%20if%20%28%21type%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20type%20%3D%20%27video%2F%27%20%2B%20path%2Esubstr%28path%2ElastIndexOf%28%27%2E%27%29%20%2B%201%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20source%20%3D%20document%2EcreateElement%28%27source%27%29%3B%0A%0A%20%20%20%20source%2Esrc%20%3D%20path%3B%0A%20%20%20%20source%2Etype%20%3D%20type%3B%0A%0A%20%20%20%20return%20source%3B%0A%7D%0A%0A%7D%2C%7B%22%2E%2E%2Futils%22%3A70%2C%22%2E%2FBaseTexture%22%3A63%7D%5D%2C68%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20CONST%20%3D%20require%28%27%2E%2E%2Fconst%27%29%2C%0A%20%20%20%20EventEmitter%20%3D%20require%28%27eventemitter3%27%29%2C%0A%20%20%20%20%2F%2F%20Internal%20event%20used%20by%20composed%20emitter%0A%20%20%20%20TICK%20%3D%20%27tick%27%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20Ticker%20class%20that%20runs%20an%20update%20loop%20that%20other%20objects%20listen%20to%2E%0A%20%2A%20This%20class%20is%20composed%20around%20an%20EventEmitter%20object%20to%20add%20listeners%0A%20%2A%20meant%20for%20execution%20on%20the%20next%20requested%20animation%20frame%2E%0A%20%2A%20Animation%20frames%20are%20requested%20only%20when%20necessary%2C%0A%20%2A%20e%2Eg%2E%20When%20the%20ticker%20is%20started%20and%20the%20emitter%20has%20listeners%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%2Eticker%0A%20%2A%2F%0Afunction%20Ticker%28%29%0A%7B%0A%20%20%20%20var%20%5Fthis%20%3D%20this%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Internal%20tick%20method%20bound%20to%20ticker%20instance%2E%0A%20%20%20%20%20%2A%20This%20is%20because%20in%20early%202015%2C%20Function%2Ebind%0A%20%20%20%20%20%2A%20is%20still%2060%25%20slower%20in%20high%20performance%20scenarios%2E%0A%20%20%20%20%20%2A%20Also%20separating%20frame%20requests%20from%20update%20method%0A%20%20%20%20%20%2A%20so%20listeners%20may%20be%20called%20at%20any%20time%20and%20with%0A%20%20%20%20%20%2A%20any%20animation%20API%2C%20just%20invoke%20ticker%2Eupdate%28time%29%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Ftick%20%3D%20function%20%5Ftick%28time%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%5Fthis%2E%5FrequestId%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%5Fthis%2Estarted%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Invoke%20listeners%20now%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis%2Eupdate%28time%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Listener%20side%20effects%20may%20have%20modified%20ticker%20state%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis%2Estarted%20%26%26%20%5Fthis%2E%5FrequestId%20%3D%3D%3D%20null%20%26%26%20%5Fthis%2E%5Femitter%2Elisteners%28TICK%2C%20true%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis%2E%5FrequestId%20%3D%20requestAnimationFrame%28%5Fthis%2E%5Ftick%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Internal%20emitter%20used%20to%20fire%20%27tick%27%20event%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Femitter%20%3D%20new%20EventEmitter%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Internal%20current%20frame%20request%20ID%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FrequestId%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Internal%20value%20managed%20by%20minFPS%20property%20setter%20and%20getter%2E%0A%20%20%20%20%20%2A%20This%20is%20the%20maximum%20allowed%20milliseconds%20between%20updates%2E%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FmaxElapsedMS%20%3D%20100%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Whether%20or%20not%20this%20ticker%20should%20invoke%20the%20method%0A%20%20%20%20%20%2A%20%7B%40link%20PIXI%2Eticker%2ETicker%23start%7D%20automatically%0A%20%20%20%20%20%2A%20when%20a%20listener%20is%20added%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40default%20false%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EautoStart%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Scalar%20time%20value%20from%20last%20frame%20to%20this%20frame%2E%0A%20%20%20%20%20%2A%20This%20value%20is%20capped%20by%20setting%20%7B%40link%20PIXI%2Eticker%2ETicker%23minFPS%7D%0A%20%20%20%20%20%2A%20and%20is%20scaled%20with%20%7B%40link%20PIXI%2Eticker%2ETicker%23speed%7D%2E%0A%20%20%20%20%20%2A%20%2A%2ANote%3A%2A%2A%20The%20cap%20may%20be%20exceeded%20by%20scaling%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%201%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EdeltaTime%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Time%20elapsed%20in%20milliseconds%20from%20last%20frame%20to%20this%20frame%2E%0A%20%20%20%20%20%2A%20Opposed%20to%20what%20the%20scalar%20%7B%40link%20PIXI%2Eticker%2ETicker%23deltaTime%7D%0A%20%20%20%20%20%2A%20is%20based%2C%20this%20value%20is%20neither%20capped%20nor%20scaled%2E%0A%20%20%20%20%20%2A%20If%20the%20platform%20supports%20DOMHighResTimeStamp%2C%0A%20%20%20%20%20%2A%20this%20value%20will%20have%20a%20precision%20of%201%20%C2%B5s%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BDOMHighResTimeStamp%7Cnumber%7D%0A%20%20%20%20%20%2A%20%40default%201%20%2F%20TARGET%5FFPMS%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EelapsedMS%20%3D%201%20%2F%20CONST%2ETARGET%5FFPMS%3B%20%2F%2F%20default%20to%20target%20frame%20time%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20last%20time%20%7B%40link%20PIXI%2Eticker%2ETicker%23update%7D%20was%20invoked%2E%0A%20%20%20%20%20%2A%20This%20value%20is%20also%20reset%20internally%20outside%20of%20invoking%0A%20%20%20%20%20%2A%20update%2C%20but%20only%20when%20a%20new%20animation%20frame%20is%20requested%2E%0A%20%20%20%20%20%2A%20If%20the%20platform%20supports%20DOMHighResTimeStamp%2C%0A%20%20%20%20%20%2A%20this%20value%20will%20have%20a%20precision%20of%201%20%C2%B5s%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BDOMHighResTimeStamp%7Cnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2ElastTime%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Factor%20of%20current%20%7B%40link%20PIXI%2Eticker%2ETicker%23deltaTime%7D%2E%0A%20%20%20%20%20%2A%20%40example%0A%20%20%20%20%20%2A%20%2F%2F%20Scales%20ticker%2EdeltaTime%20to%20what%20would%20be%0A%20%20%20%20%20%2A%20%2F%2F%20the%20equivalent%20of%20approximately%20120%20FPS%0A%20%20%20%20%20%2A%20ticker%2Espeed%20%3D%202%3B%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%201%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Espeed%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Whether%20or%20not%20this%20ticker%20has%20been%20started%2E%0A%20%20%20%20%20%2A%20%60true%60%20if%20%7B%40link%20PIXI%2Eticker%2ETicker%23start%7D%20has%20been%20called%2E%0A%20%20%20%20%20%2A%20%60false%60%20if%20%7B%40link%20PIXI%2Eticker%2ETicker%23stop%7D%20has%20been%20called%2E%0A%20%20%20%20%20%2A%20While%20%60false%60%2C%20this%20value%20may%20change%20to%20%60true%60%20in%20the%0A%20%20%20%20%20%2A%20event%20of%20%7B%40link%20PIXI%2Eticker%2ETicker%23autoStart%7D%20being%20%60true%60%0A%20%20%20%20%20%2A%20and%20a%20listener%20is%20added%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40default%20false%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Estarted%20%3D%20false%3B%0A%7D%0A%0AObject%2EdefineProperties%28Ticker%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20frames%20per%20second%20at%20which%20this%20ticker%20is%20running%2E%0A%20%20%20%20%20%2A%20The%20default%20is%20approximately%2060%20in%20most%20modern%20browsers%2E%0A%20%20%20%20%20%2A%20%2A%2ANote%3A%2A%2A%20This%20does%20not%20factor%20in%20the%20value%20of%0A%20%20%20%20%20%2A%20%7B%40link%20PIXI%2Eticker%2ETicker%23speed%7D%2C%20which%20is%20specific%0A%20%20%20%20%20%2A%20to%20scaling%20%7B%40link%20PIXI%2Eticker%2ETicker%23deltaTime%7D%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Eticker%2ETicker%23%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20FPS%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%201000%20%2F%20this%2EelapsedMS%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Manages%20the%20maximum%20amount%20of%20milliseconds%20allowed%20to%0A%20%20%20%20%20%2A%20elapse%20between%20invoking%20%7B%40link%20PIXI%2Eticker%2ETicker%23update%7D%2E%0A%20%20%20%20%20%2A%20This%20value%20is%20used%20to%20cap%20%7B%40link%20PIXI%2Eticker%2ETicker%23deltaTime%7D%2C%0A%20%20%20%20%20%2A%20but%20does%20not%20effect%20the%20measured%20value%20of%20%7B%40link%20PIXI%2Eticker%2ETicker%23FPS%7D%2E%0A%20%20%20%20%20%2A%20When%20setting%20this%20property%20it%20is%20clamped%20to%20a%20value%20between%0A%20%20%20%20%20%2A%20%600%60%20and%20%60PIXI%2ETARGET%5FFPMS%20%2A%201000%60%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Eticker%2ETicker%23%0A%20%20%20%20%20%2A%20%40default%2010%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20minFPS%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%201000%20%2F%20this%2E%5FmaxElapsedMS%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%28fps%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Clamp%3A%200%20to%20TARGET%5FFPMS%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20minFPMS%20%3D%20Math%2Emin%28Math%2Emax%280%2C%20fps%29%20%2F%201000%2C%20CONST%2ETARGET%5FFPMS%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FmaxElapsedMS%20%3D%201%20%2F%20minFPMS%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Conditionally%20requests%20a%20new%20animation%20frame%2E%0A%20%2A%20If%20a%20frame%20has%20not%20already%20been%20requested%2C%20and%20if%20the%20internal%0A%20%2A%20emitter%20has%20listeners%2C%20a%20new%20frame%20is%20requested%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ATicker%2Eprototype%2E%5FrequestIfNeeded%20%3D%20function%20%5FrequestIfNeeded%28%29%0A%7B%0A%20%20%20%20if%20%28this%2E%5FrequestId%20%3D%3D%3D%20null%20%26%26%20this%2E%5Femitter%2Elisteners%28TICK%2C%20true%29%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20ensure%20callbacks%20get%20correct%20delta%0A%20%20%20%20%20%20%20%20this%2ElastTime%20%3D%20performance%2Enow%28%29%3B%0A%20%20%20%20%20%20%20%20this%2E%5FrequestId%20%3D%20requestAnimationFrame%28this%2E%5Ftick%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Conditionally%20cancels%20a%20pending%20animation%20frame%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ATicker%2Eprototype%2E%5FcancelIfNeeded%20%3D%20function%20%5FcancelIfNeeded%28%29%0A%7B%0A%20%20%20%20if%20%28this%2E%5FrequestId%20%21%3D%3D%20null%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20cancelAnimationFrame%28this%2E%5FrequestId%29%3B%0A%20%20%20%20%20%20%20%20this%2E%5FrequestId%20%3D%20null%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Conditionally%20requests%20a%20new%20animation%20frame%2E%0A%20%2A%20If%20the%20ticker%20has%20been%20started%20it%20checks%20if%20a%20frame%20has%20not%20already%0A%20%2A%20been%20requested%2C%20and%20if%20the%20internal%20emitter%20has%20listeners%2E%20If%20these%0A%20%2A%20conditions%20are%20met%2C%20a%20new%20frame%20is%20requested%2E%20If%20the%20ticker%20has%20not%0A%20%2A%20been%20started%2C%20but%20autoStart%20is%20%60true%60%2C%20then%20the%20ticker%20starts%20now%2C%0A%20%2A%20and%20continues%20with%20the%20previous%20conditions%20to%20request%20a%20new%20frame%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ATicker%2Eprototype%2E%5FstartIfPossible%20%3D%20function%20%5FstartIfPossible%28%29%0A%7B%0A%20%20%20%20if%20%28this%2Estarted%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FrequestIfNeeded%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20%28this%2EautoStart%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Estart%28%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Calls%20%7B%40link%20module%3Aeventemitter3%2EEventEmitter%23on%7D%20internally%20for%20the%0A%20%2A%20internal%20%27tick%27%20event%2E%20It%20checks%20if%20the%20emitter%20has%20listeners%2C%0A%20%2A%20and%20if%20so%20it%20requests%20a%20new%20animation%20frame%20at%20this%20point%2E%0A%20%2A%0A%20%2A%20%40param%20fn%20%7BFunction%7D%20The%20listener%20function%20to%20be%20added%20for%20updates%0A%20%2A%20%40param%20%5Bcontext%5D%20%7BFunction%7D%20The%20listener%20context%0A%20%2A%20%40returns%20%7BPIXI%2Eticker%2ETicker%7D%20this%0A%20%2A%2F%0ATicker%2Eprototype%2Eadd%20%3D%20function%20add%28fn%2C%20context%29%0A%7B%0A%20%20%20%20this%2E%5Femitter%2Eon%28TICK%2C%20fn%2C%20context%29%3B%0A%0A%20%20%20%20this%2E%5FstartIfPossible%28%29%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Calls%20%7B%40link%20module%3Aeventemitter3%2EEventEmitter%23once%7D%20internally%20for%20the%0A%20%2A%20internal%20%27tick%27%20event%2E%20It%20checks%20if%20the%20emitter%20has%20listeners%2C%0A%20%2A%20and%20if%20so%20it%20requests%20a%20new%20animation%20frame%20at%20this%20point%2E%0A%20%2A%0A%20%2A%20%40param%20fn%20%7BFunction%7D%20The%20listener%20function%20to%20be%20added%20for%20one%20update%0A%20%2A%20%40param%20%5Bcontext%5D%20%7BFunction%7D%20The%20listener%20context%0A%20%2A%20%40returns%20%7BPIXI%2Eticker%2ETicker%7D%20this%0A%20%2A%2F%0ATicker%2Eprototype%2EaddOnce%20%3D%20function%20addOnce%28fn%2C%20context%29%0A%7B%0A%20%20%20%20this%2E%5Femitter%2Eonce%28TICK%2C%20fn%2C%20context%29%3B%0A%0A%20%20%20%20this%2E%5FstartIfPossible%28%29%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Calls%20%7B%40link%20module%3Aeventemitter3%2EEventEmitter%23off%7D%20internally%20for%20%27tick%27%20event%2E%0A%20%2A%20It%20checks%20if%20the%20emitter%20has%20listeners%20for%20%27tick%27%20event%2E%0A%20%2A%20If%20it%20does%2C%20then%20it%20cancels%20the%20animation%20frame%2E%0A%20%2A%0A%20%2A%20%40param%20%5Bfn%5D%20%7BFunction%7D%20The%20listener%20function%20to%20be%20removed%0A%20%2A%20%40param%20%5Bcontext%5D%20%7BFunction%7D%20The%20listener%20context%20to%20be%20removed%0A%20%2A%20%40returns%20%7BPIXI%2Eticker%2ETicker%7D%20this%0A%20%2A%2F%0ATicker%2Eprototype%2Eremove%20%3D%20function%20remove%28fn%2C%20context%29%0A%7B%0A%20%20%20%20this%2E%5Femitter%2Eoff%28TICK%2C%20fn%2C%20context%29%3B%0A%0A%20%20%20%20if%20%28%21this%2E%5Femitter%2Elisteners%28TICK%2C%20true%29%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FcancelIfNeeded%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Starts%20the%20ticker%2E%20If%20the%20ticker%20has%20listeners%0A%20%2A%20a%20new%20animation%20frame%20is%20requested%20at%20this%20point%2E%0A%20%2A%2F%0ATicker%2Eprototype%2Estart%20%3D%20function%20start%28%29%0A%7B%0A%20%20%20%20if%20%28%21this%2Estarted%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Estarted%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this%2E%5FrequestIfNeeded%28%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Stops%20the%20ticker%2E%20If%20the%20ticker%20has%20requested%0A%20%2A%20an%20animation%20frame%20it%20is%20canceled%20at%20this%20point%2E%0A%20%2A%2F%0ATicker%2Eprototype%2Estop%20%3D%20function%20stop%28%29%0A%7B%0A%20%20%20%20if%20%28this%2Estarted%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Estarted%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this%2E%5FcancelIfNeeded%28%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Triggers%20an%20update%2E%20An%20update%20entails%20setting%20the%0A%20%2A%20current%20%7B%40link%20PIXI%2Eticker%2ETicker%23elapsedMS%7D%2C%0A%20%2A%20the%20current%20%7B%40link%20PIXI%2Eticker%2ETicker%23deltaTime%7D%2C%0A%20%2A%20invoking%20all%20listeners%20with%20current%20deltaTime%2C%0A%20%2A%20and%20then%20finally%20setting%20%7B%40link%20PIXI%2Eticker%2ETicker%23lastTime%7D%0A%20%2A%20with%20the%20value%20of%20currentTime%20that%20was%20provided%2E%0A%20%2A%20This%20method%20will%20be%20called%20automatically%20by%20animation%0A%20%2A%20frame%20callbacks%20if%20the%20ticker%20instance%20has%20been%20started%0A%20%2A%20and%20listeners%20are%20added%2E%0A%20%2A%0A%20%2A%20%40param%20%5BcurrentTime%3Dperformance%2Enow%28%29%5D%20%7BDOMHighResTimeStamp%7Cnumber%7D%20the%20current%20time%20of%20execution%0A%20%2A%2F%0ATicker%2Eprototype%2Eupdate%20%3D%20function%20update%28currentTime%29%0A%7B%0A%20%20%20%20var%20elapsedMS%3B%0A%0A%20%20%20%20%2F%2F%20Allow%20calling%20update%20directly%20with%20default%20currentTime%2E%0A%20%20%20%20currentTime%20%3D%20currentTime%20%7C%7C%20performance%2Enow%28%29%3B%0A%20%20%20%20%2F%2F%20Save%20uncapped%20elapsedMS%20for%20measurement%0A%20%20%20%20elapsedMS%20%3D%20this%2EelapsedMS%20%3D%20currentTime%20%2D%20this%2ElastTime%3B%0A%0A%20%20%20%20%2F%2F%20cap%20the%20milliseconds%20elapsed%20used%20for%20deltaTime%0A%20%20%20%20if%20%28elapsedMS%20%3E%20this%2E%5FmaxElapsedMS%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20elapsedMS%20%3D%20this%2E%5FmaxElapsedMS%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EdeltaTime%20%3D%20elapsedMS%20%2A%20CONST%2ETARGET%5FFPMS%20%2A%20this%2Espeed%3B%0A%0A%20%20%20%20%2F%2F%20Invoke%20listeners%20added%20to%20internal%20emitter%0A%20%20%20%20this%2E%5Femitter%2Eemit%28TICK%2C%20this%2EdeltaTime%29%3B%0A%0A%20%20%20%20this%2ElastTime%20%3D%20currentTime%3B%0A%7D%3B%0A%0Amodule%2Eexports%20%3D%20Ticker%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fconst%22%3A16%2C%22eventemitter3%22%3A10%7D%5D%2C69%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Ticker%20%3D%20require%28%27%2E%2FTicker%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20shared%20ticker%20instance%20used%20by%20%7B%40link%20PIXI%2Eextras%2EMovieClip%7D%2E%0A%20%2A%20and%20by%20%7B%40link%20PIXI%2Einteraction%2EInteractionManager%7D%2E%0A%20%2A%20The%20property%20%7B%40link%20PIXI%2Eticker%2ETicker%23autoStart%7D%20is%20set%20to%20%60true%60%0A%20%2A%20for%20this%20instance%2E%20Please%20follow%20the%20examples%20for%20usage%2C%20including%0A%20%2A%20how%20to%20opt%2Dout%20of%20auto%2Dstarting%20the%20shared%20ticker%2E%0A%20%2A%0A%20%2A%20%40example%0A%20%2A%20var%20ticker%20%3D%20PIXI%2Eticker%2Eshared%3B%0A%20%2A%20%2F%2F%20Set%20this%20to%20prevent%20starting%20this%20ticker%20when%20listeners%20are%20added%2E%0A%20%2A%20%2F%2F%20By%20default%20this%20is%20true%20only%20for%20the%20PIXI%2Eticker%2Eshared%20instance%2E%0A%20%2A%20ticker%2EautoStart%20%3D%20false%3B%0A%20%2A%20%2F%2F%20FYI%2C%20call%20this%20to%20ensure%20the%20ticker%20is%20stopped%2E%20It%20should%20be%20stopped%0A%20%2A%20%2F%2F%20if%20you%20have%20not%20attempted%20to%20render%20anything%20yet%2E%0A%20%2A%20ticker%2Estop%28%29%3B%0A%20%2A%20%2F%2F%20Call%20this%20when%20you%20are%20ready%20for%20a%20running%20shared%20ticker%2E%0A%20%2A%20ticker%2Estart%28%29%3B%0A%20%2A%0A%20%2A%20%40example%0A%20%2A%20%2F%2F%20You%20may%20use%20the%20shared%20ticker%20to%20render%2E%2E%2E%0A%20%2A%20var%20renderer%20%3D%20PIXI%2EautoDetectRenderer%28800%2C%20600%29%3B%0A%20%2A%20var%20stage%20%3D%20new%20PIXI%2EContainer%28%29%3B%0A%20%2A%20var%20interactionManager%20%3D%20PIXI%2Einteraction%2EInteractionManager%28renderer%29%3B%0A%20%2A%20document%2Ebody%2EappendChild%28renderer%2Eview%29%3B%0A%20%2A%20ticker%2Eadd%28function%20%28time%29%20%7B%0A%20%2A%20%20%20%20%20renderer%2Erender%28stage%29%3B%0A%20%2A%20%7D%29%3B%0A%20%2A%0A%20%2A%20%40example%0A%20%2A%20%2F%2F%20Or%20you%20can%20just%20update%20it%20manually%2E%0A%20%2A%20ticker%2EautoStart%20%3D%20false%3B%0A%20%2A%20ticker%2Estop%28%29%3B%0A%20%2A%20function%20animate%28time%29%20%7B%0A%20%2A%20%20%20%20%20ticker%2Eupdate%28time%29%3B%0A%20%2A%20%20%20%20%20renderer%2Erender%28stage%29%3B%0A%20%2A%20%20%20%20%20requestAnimationFrame%28animate%29%3B%0A%20%2A%20%7D%0A%20%2A%20animate%28performance%2Enow%28%29%29%3B%0A%20%2A%0A%20%2A%20%40type%20%7BPIXI%2Eticker%2ETicker%7D%0A%20%2A%20%40memberof%20PIXI%2Eticker%0A%20%2A%2F%0Avar%20shared%20%3D%20new%20Ticker%28%29%3B%0Ashared%2EautoStart%20%3D%20true%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40namespace%20PIXI%2Eticker%0A%20%2A%2F%0Amodule%2Eexports%20%3D%20%7B%0A%20%20%20%20shared%3A%20shared%2C%0A%20%20%20%20Ticker%3A%20Ticker%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FTicker%22%3A68%7D%5D%2C70%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20CONST%20%3D%20require%28%27%2E%2E%2Fconst%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40namespace%20PIXI%2Eutils%0A%20%2A%2F%0Avar%20utils%20%3D%20module%2Eexports%20%3D%20%7B%0A%20%20%20%20%5Fuid%3A%200%2C%0A%20%20%20%20%5FsaidHello%3A%20false%2C%0A%0A%20%20%20%20EventEmitter%3A%20%20%20require%28%27eventemitter3%27%29%2C%0A%20%20%20%20pluginTarget%3A%20%20%20require%28%27%2E%2FpluginTarget%27%29%2C%0A%20%20%20%20async%3A%20%20%20%20%20%20%20%20%20%20require%28%27async%27%29%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Gets%20the%20next%20unique%20identifier%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40return%20%7Bnumber%7D%20The%20next%20unique%20identifier%20to%20use%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20uid%3A%20function%20%28%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20%2B%2Butils%2E%5Fuid%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Converts%20a%20hex%20color%20number%20to%20an%20%5BR%2C%20G%2C%20B%5D%20array%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20hex%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40param%20%20%7Bnumber%5B%5D%7D%20%5Bout%3D%5B%5D%5D%0A%20%20%20%20%20%2A%20%40return%20%7Bnumber%5B%5D%7D%20An%20array%20representing%20the%20%5BR%2C%20G%2C%20B%5D%20of%20the%20color%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20hex2rgb%3A%20function%20%28hex%2C%20out%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20out%20%3D%20out%20%7C%7C%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20out%5B0%5D%20%3D%20%28hex%20%3E%3E%2016%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20out%5B1%5D%20%3D%20%28hex%20%3E%3E%208%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20out%5B2%5D%20%3D%20%28hex%20%26%200xFF%29%20%2F%20255%3B%0A%0A%20%20%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Converts%20a%20hex%20color%20number%20to%20a%20string%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20hex%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40return%20%7Bstring%7D%20The%20string%20color%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20hex2string%3A%20function%20%28hex%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20hex%20%3D%20hex%2EtoString%2816%29%3B%0A%20%20%20%20%20%20%20%20hex%20%3D%20%27000000%27%2Esubstr%280%2C%206%20%2D%20hex%2Elength%29%20%2B%20hex%3B%0A%0A%20%20%20%20%20%20%20%20return%20%27%23%27%20%2B%20hex%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Converts%20a%20color%20as%20an%20%5BR%2C%20G%2C%20B%5D%20array%20to%20a%20hex%20number%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20rgb%20%7Bnumber%5B%5D%7D%0A%20%20%20%20%20%2A%20%40return%20%7Bnumber%7D%20The%20color%20number%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20rgb2hex%3A%20function%20%28rgb%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20%28%28rgb%5B0%5D%2A255%20%3C%3C%2016%29%20%2B%20%28rgb%5B1%5D%2A255%20%3C%3C%208%29%20%2B%20rgb%5B2%5D%2A255%29%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Checks%20whether%20the%20Canvas%20BlendModes%20are%20supported%20by%20the%20current%20browser%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40return%20%7Bboolean%7D%20whether%20they%20are%20supported%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20canUseNewCanvasBlendModes%3A%20function%20%28%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20document%20%3D%3D%3D%20%27undefined%27%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20pngHead%20%3D%20%27data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX%2F%27%3B%0A%20%20%20%20%20%20%20%20var%20pngEnd%20%3D%20%27AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg%3D%3D%27%3B%0A%0A%20%20%20%20%20%20%20%20var%20magenta%20%3D%20new%20Image%28%29%3B%0A%20%20%20%20%20%20%20%20magenta%2Esrc%20%3D%20pngHead%20%2B%20%27AP804Oa6%27%20%2B%20pngEnd%3B%0A%0A%20%20%20%20%20%20%20%20var%20yellow%20%3D%20new%20Image%28%29%3B%0A%20%20%20%20%20%20%20%20yellow%2Esrc%20%3D%20pngHead%20%2B%20%27%2FwCKxvRF%27%20%2B%20pngEnd%3B%0A%0A%20%20%20%20%20%20%20%20var%20canvas%20%3D%20document%2EcreateElement%28%27canvas%27%29%3B%0A%20%20%20%20%20%20%20%20canvas%2Ewidth%20%3D%206%3B%0A%20%20%20%20%20%20%20%20canvas%2Eheight%20%3D%201%3B%0A%0A%20%20%20%20%20%20%20%20var%20context%20%3D%20canvas%2EgetContext%28%272d%27%29%3B%0A%20%20%20%20%20%20%20%20context%2EglobalCompositeOperation%20%3D%20%27multiply%27%3B%0A%20%20%20%20%20%20%20%20context%2EdrawImage%28magenta%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20context%2EdrawImage%28yellow%2C%202%2C%200%29%3B%0A%0A%20%20%20%20%20%20%20%20var%20data%20%3D%20context%2EgetImageData%282%2C0%2C1%2C1%29%2Edata%3B%0A%0A%20%20%20%20%20%20%20%20return%20%28data%5B0%5D%20%3D%3D%3D%20255%20%26%26%20data%5B1%5D%20%3D%3D%3D%200%20%26%26%20data%5B2%5D%20%3D%3D%3D%200%29%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Given%20a%20number%2C%20this%20function%20returns%20the%20closest%20number%20that%20is%20a%20power%20of%20two%0A%20%20%20%20%20%2A%20this%20function%20is%20taken%20from%20Starling%20Framework%20as%20its%20pretty%20neat%20%3B%29%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20number%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40return%20%7Bnumber%7D%20the%20closest%20number%20that%20is%20a%20power%20of%20two%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20getNextPowerOfTwo%3A%20function%20%28number%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20see%3A%20http%3A%2F%2Fen%2Ewikipedia%2Eorg%2Fwiki%2FPower%5Fof%5Ftwo%23Fast%5Falgorithm%5Fto%5Fcheck%5Fif%5Fa%5Fpositive%5Fnumber%5Fis%5Fa%5Fpower%5Fof%5Ftwo%0A%20%20%20%20%20%20%20%20if%20%28number%20%3E%200%20%26%26%20%28number%20%26%20%28number%20%2D%201%29%29%20%3D%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20number%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20result%20%3D%201%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20%28result%20%3C%20number%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%3C%3C%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20checks%20if%20the%20given%20width%20and%20height%20make%20a%20power%20of%20two%20rectangle%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20width%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40param%20height%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40return%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20isPowerOfTwo%3A%20function%20%28width%2C%20height%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20%28width%20%3E%200%20%26%26%20%28width%20%26%20%28width%20%2D%201%29%29%20%3D%3D%3D%200%20%26%26%20height%20%3E%200%20%26%26%20%28height%20%26%20%28height%20%2D%201%29%29%20%3D%3D%3D%200%29%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20get%20the%20resolution%20of%20an%20asset%20by%20looking%20for%20the%20prefix%0A%20%20%20%20%20%2A%20used%20by%20spritesheets%20and%20image%20urls%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20url%20%7Bstring%7D%20the%20image%20path%0A%20%20%20%20%20%2A%20%40return%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20getResolutionOfUrl%3A%20function%20%28url%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20resolution%20%3D%20CONST%2ERETINA%5FPREFIX%2Eexec%28url%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28resolution%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20return%20parseFloat%28resolution%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Logs%20out%20the%20version%20and%20renderer%20information%20for%20this%20running%20instance%20of%20PIXI%2E%0A%20%20%20%20%20%2A%20If%20you%20don%27t%20want%20to%20see%20this%20message%20you%20can%20set%20%60PIXI%2Eutils%2E%5FsaidHello%20%3D%20true%3B%60%0A%20%20%20%20%20%2A%20so%20the%20library%20thinks%20it%20already%20said%20it%2E%20Keep%20in%20mind%20that%20doing%20that%20will%20forever%0A%20%20%20%20%20%2A%20makes%20you%20a%20jerk%20face%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20%7Bstring%7D%20type%20%2D%20The%20string%20renderer%20type%20to%20log%2E%0A%20%20%20%20%20%2A%20%40constant%0A%20%20%20%20%20%2A%20%40static%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20sayHello%3A%20function%20%28type%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28utils%2E%5FsaidHello%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28navigator%2EuserAgent%2EtoLowerCase%28%29%2EindexOf%28%27chrome%27%29%20%3E%20%2D1%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27%5Cn%20%25c%20%25c%20%25c%20Pixi%2Ejs%20%27%20%2B%20CONST%2EVERSION%20%2B%20%27%20%2D%20%E2%9C%B0%20%27%20%2B%20type%20%2B%20%27%20%E2%9C%B0%20%20%25c%20%27%20%2B%20%27%20%25c%20%27%20%2B%20%27%20http%3A%2F%2Fwww%2Epixijs%2Ecom%2F%20%20%25c%20%25c%20%E2%99%A5%25c%E2%99%A5%25c%E2%99%A5%20%5Cn%5Cn%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27background%3A%20%23ff66a5%3B%20padding%3A5px%200%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27background%3A%20%23ff66a5%3B%20padding%3A5px%200%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27color%3A%20%23ff66a5%3B%20background%3A%20%23030307%3B%20padding%3A5px%200%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27background%3A%20%23ff66a5%3B%20padding%3A5px%200%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27background%3A%20%23ffc3dc%3B%20padding%3A5px%200%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27background%3A%20%23ff66a5%3B%20padding%3A5px%200%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27color%3A%20%23ff2424%3B%20background%3A%20%23fff%3B%20padding%3A5px%200%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27color%3A%20%23ff2424%3B%20background%3A%20%23fff%3B%20padding%3A5px%200%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27color%3A%20%23ff2424%3B%20background%3A%20%23fff%3B%20padding%3A5px%200%3B%27%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20window%2Econsole%2Elog%2Eapply%28console%2C%20args%29%3B%20%2F%2Fjshint%20ignore%3Aline%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28window%2Econsole%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20window%2Econsole%2Elog%28%27Pixi%2Ejs%20%27%20%2B%20CONST%2EVERSION%20%2B%20%27%20%2D%20%27%20%2B%20type%20%2B%20%27%20%2D%20http%3A%2F%2Fwww%2Epixijs%2Ecom%2F%27%29%3B%20%2F%2Fjshint%20ignore%3Aline%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20utils%2E%5FsaidHello%20%3D%20true%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Helper%20for%20checking%20for%20webgl%20support%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40return%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20isWebGLSupported%3A%20function%20%28%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20contextOptions%20%3D%20%7B%20stencil%3A%20true%20%7D%3B%0A%20%20%20%20%20%20%20%20try%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21window%2EWebGLRenderingContext%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20canvas%20%3D%20document%2EcreateElement%28%27canvas%27%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl%20%3D%20canvas%2EgetContext%28%27webgl%27%2C%20contextOptions%29%20%7C%7C%20canvas%2EgetContext%28%27experimental%2Dwebgl%27%2C%20contextOptions%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%21%21%28gl%20%26%26%20gl%2EgetContextAttributes%28%29%2Estencil%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20catch%20%28e%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Returns%20sign%20of%20number%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20n%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40returns%20%7Bnumber%7D%200%20if%20n%20is%200%2C%20%2D1%20if%20n%20is%20negative%2C%201%20if%20n%20i%20positive%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20sign%3A%20function%20%28n%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20n%20%3F%20%28n%20%3C%200%20%3F%20%2D1%20%3A%201%29%20%3A%200%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20removeItems%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20%7Barray%7D%20arr%20The%20target%20array%0A%20%20%20%20%20%2A%20%40param%20%7Bnumber%7D%20startIdx%20The%20index%20to%20begin%20removing%20from%20%28inclusive%29%0A%20%20%20%20%20%2A%20%40param%20%7Bnumber%7D%20removeCount%20How%20many%20items%20to%20remove%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20removeItems%3A%20function%20%28arr%2C%20startIdx%2C%20removeCount%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20length%20%3D%20arr%2Elength%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28startIdx%20%3E%3D%20length%20%7C%7C%20removeCount%20%3D%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20removeCount%20%3D%20%28startIdx%2BremoveCount%20%3E%20length%20%3F%20length%2DstartIdx%20%3A%20removeCount%29%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20startIdx%2C%20len%20%3D%20length%2DremoveCount%3B%20i%20%3C%20len%3B%20%2B%2Bi%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20arr%5Bi%5D%20%3D%20arr%5Bi%20%2B%20removeCount%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20arr%2Elength%20%3D%20len%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Describe%20property%20usage%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20TextureCache%3A%20%7B%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Describe%20property%20usage%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20BaseTextureCache%3A%20%7B%7D%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fconst%22%3A16%2C%22%2E%2FpluginTarget%22%3A71%2C%22async%22%3A1%2C%22eventemitter3%22%3A10%7D%5D%2C71%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20Mixins%20functionality%20to%20make%20an%20object%20have%20%22plugins%22%2E%0A%20%2A%0A%20%2A%20%40mixin%0A%20%2A%20%40memberof%20PIXI%2Eutils%0A%20%2A%20%40param%20obj%20%7Bobject%7D%20The%20object%20to%20mix%20into%2E%0A%20%2A%20%40example%0A%20%2A%20%20%20%20%20%20function%20MyObject%28%29%20%7B%7D%0A%20%2A%0A%20%2A%20%20%20%20%20%20pluginTarget%2Emixin%28MyObject%29%3B%0A%20%2A%2F%0Afunction%20pluginTarget%28obj%29%0A%7B%0A%20%20%20%20obj%2E%5F%5Fplugins%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Adds%20a%20plugin%20to%20an%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20pluginName%20%7Bstring%7D%20The%20events%20that%20should%20be%20listed%2E%0A%20%20%20%20%20%2A%20%40param%20ctor%20%7BFunction%7D%20The%20constructor%20function%20for%20the%20plugin%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20obj%2EregisterPlugin%20%3D%20function%20%28pluginName%2C%20ctor%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20obj%2E%5F%5Fplugins%5BpluginName%5D%20%3D%20ctor%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Instantiates%20all%20the%20plugins%20of%20this%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20obj%2Eprototype%2EinitPlugins%20%3D%20function%20%28%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eplugins%20%3D%20this%2Eplugins%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28var%20o%20in%20obj%2E%5F%5Fplugins%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eplugins%5Bo%5D%20%3D%20new%20%28obj%2E%5F%5Fplugins%5Bo%5D%29%28this%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Removes%20all%20the%20plugins%20of%20this%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20obj%2Eprototype%2EdestroyPlugins%20%3D%20function%20%28%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20o%20in%20this%2Eplugins%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eplugins%5Bo%5D%2Edestroy%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eplugins%5Bo%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this%2Eplugins%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%7D%0A%0A%0Amodule%2Eexports%20%3D%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Mixes%20in%20the%20properties%20of%20the%20pluginTarget%20into%20another%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40param%20object%20%7Bobject%7D%20The%20obj%20to%20mix%20into%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20mixin%3A%20function%20mixin%28obj%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20pluginTarget%28obj%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C72%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2Aglobal%20console%20%2A%2F%0Avar%20core%20%3D%20require%28%27%2E%2Fcore%27%29%2C%0A%20%20%20%20mesh%20%3D%20require%28%27%2E%2Fmesh%27%29%2C%0A%20%20%20%20extras%20%3D%20require%28%27%2E%2Fextras%27%29%2C%0A%20%20%20%20filters%20%3D%20require%28%27%2E%2Ffilters%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40private%0A%20%2A%20%40name%20SpriteBatch%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40see%20PIXI%2EParticleContainer%0A%20%2A%20%40throws%20%7BReferenceError%7D%20SpriteBatch%20does%20not%20exist%20any%20more%2C%20please%20use%20the%20new%20ParticleContainer%20instead%2E%0A%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%2A%2F%0Acore%2ESpriteBatch%20%3D%20function%28%29%0A%7B%0A%20%20%20%20throw%20new%20ReferenceError%28%27SpriteBatch%20does%20not%20exist%20any%20more%2C%20please%20use%20the%20new%20ParticleContainer%20instead%2E%27%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40private%0A%20%2A%20%40name%20AssetLoader%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40see%20PIXI%2Eloaders%2ELoader%0A%20%2A%20%40throws%20%7BReferenceError%7D%20The%20loader%20system%20was%20overhauled%20in%20pixi%20v3%2C%20please%20see%20the%20new%20PIXI%2Eloaders%2ELoader%20class%2E%0A%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%2A%2F%0Acore%2EAssetLoader%20%3D%20function%28%29%0A%7B%0A%20%20%20%20throw%20new%20ReferenceError%28%27The%20loader%20system%20was%20overhauled%20in%20pixi%20v3%2C%20please%20see%20the%20new%20PIXI%2Eloaders%2ELoader%20class%2E%27%29%3B%0A%7D%3B%0A%0AObject%2EdefineProperties%28core%2C%20%7B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20Stage%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%2EContainer%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20Stage%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27You%20do%20not%20need%20to%20use%20a%20PIXI%20Stage%20any%20more%2C%20you%20can%20simply%20render%20any%20container%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20core%2EContainer%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20DisplayObjectContainer%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%2EContainer%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20DisplayObjectContainer%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27DisplayObjectContainer%20has%20been%20shortened%20to%20Container%2C%20please%20use%20Container%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20core%2EContainer%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20Strip%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%2Emesh%2EMesh%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20Strip%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27The%20Strip%20class%20has%20been%20renamed%20to%20Mesh%20and%20moved%20to%20mesh%2EMesh%2C%20please%20use%20mesh%2EMesh%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mesh%2EMesh%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20Rope%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%2Emesh%2ERope%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20Rope%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27The%20Rope%20class%20has%20been%20moved%20to%20mesh%2ERope%2C%20please%20use%20mesh%2ERope%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mesh%2ERope%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20MovieClip%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%2Eextras%2EMovieClip%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20MovieClip%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27The%20MovieClip%20class%20has%20been%20moved%20to%20extras%2EMovieClip%2C%20please%20use%20extras%2EMovieClip%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20extras%2EMovieClip%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20TilingSprite%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%2Eextras%2ETilingSprite%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20TilingSprite%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27The%20TilingSprite%20class%20has%20been%20moved%20to%20extras%2ETilingSprite%2C%20please%20use%20extras%2ETilingSprite%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20extras%2ETilingSprite%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20BitmapText%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%2Eextras%2EBitmapText%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20BitmapText%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27The%20BitmapText%20class%20has%20been%20moved%20to%20extras%2EBitmapText%2C%20please%20use%20extras%2EBitmapText%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20extras%2EBitmapText%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20blendModes%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%2EBLEND%5FMODES%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blendModes%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27The%20blendModes%20has%20been%20moved%20to%20BLEND%5FMODES%2C%20please%20use%20BLEND%5FMODES%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20core%2EBLEND%5FMODES%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20scaleModes%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%2ESCALE%5FMODES%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20scaleModes%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27The%20scaleModes%20has%20been%20moved%20to%20SCALE%5FMODES%2C%20please%20use%20SCALE%5FMODES%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20core%2ESCALE%5FMODES%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20BaseTextureCache%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%2Eutils%2EBaseTextureCache%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20BaseTextureCache%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27The%20BaseTextureCache%20class%20has%20been%20moved%20to%20utils%2EBaseTextureCache%2C%20please%20use%20utils%2EBaseTextureCache%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20core%2Eutils%2EBaseTextureCache%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20TextureCache%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%2Eutils%2ETextureCache%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20TextureCache%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27The%20TextureCache%20class%20has%20been%20moved%20to%20utils%2ETextureCache%2C%20please%20use%20utils%2ETextureCache%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20core%2Eutils%2ETextureCache%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40namespace%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20math%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%0A%20%20%20%20%20%2A%20%40see%20PIXI%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E6%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20math%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27The%20math%20namespace%20is%20deprecated%2C%20please%20access%20members%20already%20accessible%20on%20PIXI%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20core%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40method%0A%20%2A%20%40private%0A%20%2A%20%40name%20PIXI%2ESprite%23setTexture%0A%20%2A%20%40see%20PIXI%2ESprite%23texture%0A%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%2A%2F%0Acore%2ESprite%2Eprototype%2EsetTexture%20%3D%20function%28texture%29%0A%7B%0A%20%20%20%20this%2Etexture%20%3D%20texture%3B%0A%20%20%20%20console%2Ewarn%28%27setTexture%20is%20now%20deprecated%2C%20please%20use%20the%20texture%20property%2C%20e%2Eg%20%3A%20sprite%2Etexture%20%3D%20texture%3B%27%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40method%0A%20%2A%20%40name%20PIXI%2Eextras%2EBitmapText%23setText%0A%20%2A%20%40see%20PIXI%2Eextras%2EBitmapText%23text%0A%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%2A%2F%0Aextras%2EBitmapText%2Eprototype%2EsetText%20%3D%20function%28text%29%0A%7B%0A%20%20%20%20this%2Etext%20%3D%20text%3B%0A%20%20%20%20console%2Ewarn%28%27setText%20is%20now%20deprecated%2C%20please%20use%20the%20text%20property%2C%20e%2Eg%20%3A%20myBitmapText%2Etext%20%3D%20%5C%27my%20text%5C%27%3B%27%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40method%0A%20%2A%20%40name%20PIXI%2EText%23setText%0A%20%2A%20%40see%20PIXI%2EText%23text%0A%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%2A%2F%0Acore%2EText%2Eprototype%2EsetText%20%3D%20function%28text%29%0A%7B%0A%20%20%20%20this%2Etext%20%3D%20text%3B%0A%20%20%20%20console%2Ewarn%28%27setText%20is%20now%20deprecated%2C%20please%20use%20the%20text%20property%2C%20e%2Eg%20%3A%20myText%2Etext%20%3D%20%5C%27my%20text%5C%27%3B%27%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40method%0A%20%2A%20%40name%20PIXI%2EText%23setStyle%0A%20%2A%20%40see%20PIXI%2EText%23style%0A%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%2A%2F%0Acore%2EText%2Eprototype%2EsetStyle%20%3D%20function%28style%29%0A%7B%0A%20%20%20%20this%2Estyle%20%3D%20style%3B%0A%20%20%20%20console%2Ewarn%28%27setStyle%20is%20now%20deprecated%2C%20please%20use%20the%20style%20property%2C%20e%2Eg%20%3A%20myText%2Estyle%20%3D%20style%3B%27%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40method%0A%20%2A%20%40name%20PIXI%2ETexture%23setFrame%0A%20%2A%20%40see%20PIXI%2ETexture%23setFrame%0A%20%2A%20%40deprecated%20since%20version%203%2E0%2E0%0A%20%2A%2F%0Acore%2ETexture%2Eprototype%2EsetFrame%20%3D%20function%28frame%29%0A%7B%0A%20%20%20%20this%2Eframe%20%3D%20frame%3B%0A%20%20%20%20console%2Ewarn%28%27setFrame%20is%20now%20deprecated%2C%20please%20use%20the%20frame%20property%2C%20e%2Eg%20%3A%20myTexture%2Eframe%20%3D%20frame%3B%27%29%3B%0A%7D%3B%0A%0AObject%2EdefineProperties%28filters%2C%20%7B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20PIXI%2Efilters%2EAbstractFilter%0A%20%20%20%20%20%2A%20%40see%20PIXI%2EAbstractFilter%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E6%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20AbstractFilter%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27filters%2EAbstractFilter%20is%20an%20undocumented%20alias%2C%20please%20use%20AbstractFilter%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20core%2EAbstractFilter%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20PIXI%2Efilters%2EFXAAFilter%0A%20%20%20%20%20%2A%20%40see%20PIXI%2EFXAAFilter%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E6%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20FXAAFilter%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27filters%2EFXAAFilter%20is%20an%20undocumented%20alias%2C%20please%20use%20FXAAFilter%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20core%2EFXAAFilter%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40class%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40name%20PIXI%2Efilters%2ESpriteMaskFilter%0A%20%20%20%20%20%2A%20%40see%20PIXI%2ESpriteMaskFilter%0A%20%20%20%20%20%2A%20%40deprecated%20since%20version%203%2E0%2E6%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20SpriteMaskFilter%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Ewarn%28%27filters%2ESpriteMaskFilter%20is%20an%20undocumented%20alias%2C%20please%20use%20SpriteMaskFilter%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20core%2ESpriteMaskFilter%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40method%0A%20%2A%20%40name%20PIXI%2Eutils%2Euuid%0A%20%2A%20%40see%20PIXI%2Eutils%2Euid%0A%20%2A%20%40deprecated%20since%20version%203%2E0%2E6%0A%20%2A%2F%0Acore%2Eutils%2Euuid%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20console%2Ewarn%28%27utils%2Euuid%28%29%20is%20deprecated%2C%20please%20use%20utils%2Euid%28%29%20from%20now%20on%2E%27%29%3B%0A%20%20%20%20return%20core%2Eutils%2Euid%28%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2Fcore%22%3A23%2C%22%2E%2Fextras%22%3A79%2C%22%2E%2Ffilters%22%3A96%2C%22%2E%2Fmesh%22%3A121%7D%5D%2C73%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20BitmapText%20object%20will%20create%20a%20line%20or%20multiple%20lines%20of%20text%20using%20bitmap%20font%2E%20To%0A%20%2A%20split%20a%20line%20you%20can%20use%20%27%5Cn%27%2C%20%27%5Cr%27%20or%20%27%5Cr%5Cn%27%20in%20your%20string%2E%20You%20can%20generate%20the%20fnt%20files%20using%3A%0A%20%2A%0A%20%2A%20A%20BitmapText%20can%20only%20be%20created%20when%20the%20font%20is%20loaded%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20%2F%2F%20in%20this%20case%20the%20font%20is%20in%20a%20file%20called%20%27desyrel%2Efnt%27%0A%20%2A%20var%20bitmapText%20%3D%20new%20PIXI%2Eextras%2EBitmapText%28%22text%20using%20a%20fancy%20font%21%22%2C%20%7Bfont%3A%20%2235px%20Desyrel%22%2C%20align%3A%20%22right%22%7D%29%3B%0A%20%2A%20%60%60%60%0A%20%2A%0A%20%2A%0A%20%2A%20http%3A%2F%2Fwww%2Eangelcode%2Ecom%2Fproducts%2Fbmfont%2F%20for%20windows%20or%0A%20%2A%20http%3A%2F%2Fwww%2Ebmglyph%2Ecom%2F%20for%20mac%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EContainer%0A%20%2A%20%40memberof%20PIXI%2Eextras%0A%20%2A%20%40param%20text%20%7Bstring%7D%20The%20copy%20that%20you%20would%20like%20the%20text%20to%20display%0A%20%2A%20%40param%20style%20%7Bobject%7D%20The%20style%20parameters%0A%20%2A%20%40param%20style%2Efont%20%7Bstring%7Cobject%7D%20The%20font%20descriptor%20for%20the%20object%2C%20can%20be%20passed%20as%20a%20string%20of%20form%0A%20%2A%20%20%20%20%20%20%2224px%20FontName%22%20or%20%22FontName%22%20or%20as%20an%20object%20with%20explicit%20name%2Fsize%20properties%2E%0A%20%2A%20%40param%20%5Bstyle%2Efont%2Ename%5D%20%7Bstring%7D%20The%20bitmap%20font%20id%0A%20%2A%20%40param%20%5Bstyle%2Efont%2Esize%5D%20%7Bnumber%7D%20The%20size%20of%20the%20font%20in%20pixels%2C%20e%2Eg%2E%2024%0A%20%2A%20%40param%20%5Bstyle%2Ealign%3D%27left%27%5D%20%7Bstring%7D%20Alignment%20for%20multiline%20text%20%28%27left%27%2C%20%27center%27%20or%20%27right%27%29%2C%20does%20not%20affect%0A%20%2A%20%20%20%20%20%20single%20line%20text%0A%20%2A%20%40param%20%5Bstyle%2Etint%3D0xFFFFFF%5D%20%7Bnumber%7D%20The%20tint%20color%0A%20%2A%2F%0Afunction%20BitmapText%28text%2C%20style%29%0A%7B%0A%20%20%20%20core%2EContainer%2Ecall%28this%29%3B%0A%0A%20%20%20%20style%20%3D%20style%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20width%20of%20the%20overall%20text%2C%20different%20from%20fontSize%2C%0A%20%20%20%20%20%2A%20which%20is%20defined%20in%20the%20style%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40readOnly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EtextWidth%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20overall%20text%2C%20different%20from%20fontSize%2C%0A%20%20%20%20%20%2A%20which%20is%20defined%20in%20the%20style%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40readOnly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EtextHeight%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Private%20tracker%20for%20the%20letter%20sprite%20pool%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ESprite%5B%5D%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fglyphs%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Private%20tracker%20for%20the%20current%20style%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Ffont%20%3D%20%7B%0A%20%20%20%20%20%20%20%20tint%3A%20style%2Etint%20%21%3D%3D%20undefined%20%3F%20style%2Etint%20%3A%200xFFFFFF%2C%0A%20%20%20%20%20%20%20%20align%3A%20style%2Ealign%20%7C%7C%20%27left%27%2C%0A%20%20%20%20%20%20%20%20name%3A%20null%2C%0A%20%20%20%20%20%20%20%20size%3A%200%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Private%20tracker%20for%20the%20current%20font%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Efont%20%3D%20style%2Efont%3B%20%2F%2F%20run%20font%20setter%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Private%20tracker%20for%20the%20current%20text%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Ftext%20%3D%20text%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20max%20width%20of%20this%20bitmap%20text%20in%20pixels%2E%20If%20the%20text%20provided%20is%20longer%20than%20the%20value%20provided%2C%20line%20breaks%20will%20be%20automatically%20inserted%20in%20the%20last%20whitespace%2E%0A%20%20%20%20%20%2A%20Disable%20by%20setting%20value%20to%200%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EmaxWidth%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20max%20line%20height%2E%20This%20is%20useful%20when%20trying%20to%20use%20the%20total%20height%20of%20the%20Text%2C%20ie%3A%20when%20trying%20to%20vertically%20align%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EmaxLineHeight%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20dirty%20state%20of%20this%20object%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Edirty%20%3D%20false%3B%0A%0A%20%20%20%20this%2EupdateText%28%29%3B%0A%7D%0A%0A%2F%2F%20constructor%0ABitmapText%2Eprototype%20%3D%20Object%2Ecreate%28core%2EContainer%2Eprototype%29%3B%0ABitmapText%2Eprototype%2Econstructor%20%3D%20BitmapText%3B%0Amodule%2Eexports%20%3D%20BitmapText%3B%0A%0AObject%2EdefineProperties%28BitmapText%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20tint%20of%20the%20BitmapText%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Eextras%2EBitmapText%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20tint%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Ffont%2Etint%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ffont%2Etint%20%3D%20%28typeof%20value%20%3D%3D%3D%20%27number%27%20%26%26%20value%20%3E%3D%200%29%20%3F%20value%20%3A%200xFFFFFF%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20alignment%20of%20the%20BitmapText%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%20%40default%20%27left%27%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Eextras%2EBitmapText%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20align%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Ffont%2Ealign%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ffont%2Ealign%20%3D%20value%20%7C%7C%20%27left%27%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20font%20descriptor%20of%20the%20BitmapText%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFont%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Eextras%2EBitmapText%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20font%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Ffont%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20value%2Esplit%28%27%20%27%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ffont%2Ename%20%3D%20value%2Elength%20%3D%3D%3D%201%20%3F%20value%5B0%5D%20%3A%20value%2Eslice%281%29%2Ejoin%28%27%20%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ffont%2Esize%20%3D%20value%2Elength%20%3E%3D%202%20%3F%20parseInt%28value%5B0%5D%2C%2010%29%20%3A%20BitmapText%2Efonts%5Bthis%2E%5Ffont%2Ename%5D%2Esize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ffont%2Ename%20%3D%20value%2Ename%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ffont%2Esize%20%3D%20typeof%20value%2Esize%20%3D%3D%3D%20%27number%27%20%3F%20value%2Esize%20%3A%20parseInt%28value%2Esize%2C%2010%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20text%20of%20the%20BitmapText%20object%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Eextras%2EBitmapText%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20text%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Ftext%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20value%2EtoString%28%29%20%7C%7C%20%27%20%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2E%5Ftext%20%3D%3D%3D%20value%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ftext%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20text%20and%20updates%20it%20when%20needed%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ABitmapText%2Eprototype%2EupdateText%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20data%20%3D%20BitmapText%2Efonts%5Bthis%2E%5Ffont%2Ename%5D%3B%0A%20%20%20%20var%20pos%20%3D%20new%20core%2EPoint%28%29%3B%0A%20%20%20%20var%20prevCharCode%20%3D%20null%3B%0A%20%20%20%20var%20chars%20%3D%20%5B%5D%3B%0A%20%20%20%20var%20lastLineWidth%20%3D%200%3B%0A%20%20%20%20var%20maxLineWidth%20%3D%200%3B%0A%20%20%20%20var%20lineWidths%20%3D%20%5B%5D%3B%0A%20%20%20%20var%20line%20%3D%200%3B%0A%20%20%20%20var%20scale%20%3D%20this%2E%5Ffont%2Esize%20%2F%20data%2Esize%3B%0A%20%20%20%20var%20lastSpace%20%3D%20%2D1%3B%0A%20%20%20%20var%20maxLineHeight%20%3D%200%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Etext%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20charCode%20%3D%20this%2Etext%2EcharCodeAt%28i%29%3B%0A%20%20%20%20%20%20%20%20lastSpace%20%3D%20%2F%28%5Cs%29%2F%2Etest%28this%2Etext%2EcharAt%28i%29%29%20%3F%20i%20%3A%20lastSpace%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%2F%28%3F%3A%5Cr%5Cn%7C%5Cr%7C%5Cn%29%2F%2Etest%28this%2Etext%2EcharAt%28i%29%29%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lineWidths%2Epush%28lastLineWidth%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20maxLineWidth%20%3D%20Math%2Emax%28maxLineWidth%2C%20lastLineWidth%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20line%2B%2B%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%2Ex%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%2Ey%20%2B%3D%20data%2ElineHeight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevCharCode%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28lastSpace%20%21%3D%3D%20%2D1%20%26%26%20this%2EmaxWidth%20%3E%200%20%26%26%20pos%2Ex%20%2A%20scale%20%3E%20this%2EmaxWidth%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20core%2Eutils%2EremoveItems%28chars%2C%20lastSpace%2C%20i%20%2D%20lastSpace%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20i%20%3D%20lastSpace%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastSpace%20%3D%20%2D1%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20lineWidths%2Epush%28lastLineWidth%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20maxLineWidth%20%3D%20Math%2Emax%28maxLineWidth%2C%20lastLineWidth%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20line%2B%2B%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%2Ex%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%2Ey%20%2B%3D%20data%2ElineHeight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20prevCharCode%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20charData%20%3D%20data%2Echars%5BcharCode%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%21charData%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28prevCharCode%20%26%26%20charData%2Ekerning%5BprevCharCode%5D%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%2Ex%20%2B%3D%20charData%2Ekerning%5BprevCharCode%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20chars%2Epush%28%7Btexture%3AcharData%2Etexture%2C%20line%3A%20line%2C%20charCode%3A%20charCode%2C%20position%3A%20new%20core%2EPoint%28pos%2Ex%20%2B%20charData%2ExOffset%2C%20pos%2Ey%20%2B%20charData%2EyOffset%29%7D%29%3B%0A%20%20%20%20%20%20%20%20lastLineWidth%20%3D%20pos%2Ex%20%2B%20%28charData%2Etexture%2Ewidth%20%2B%20charData%2ExOffset%29%3B%0A%20%20%20%20%20%20%20%20pos%2Ex%20%2B%3D%20charData%2ExAdvance%3B%0A%20%20%20%20%20%20%20%20maxLineHeight%20%3D%20Math%2Emax%28maxLineHeight%2C%20%28charData%2EyOffset%20%2B%20charData%2Etexture%2Eheight%29%29%3B%0A%20%20%20%20%20%20%20%20prevCharCode%20%3D%20charCode%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20lineWidths%2Epush%28lastLineWidth%29%3B%0A%20%20%20%20maxLineWidth%20%3D%20Math%2Emax%28maxLineWidth%2C%20lastLineWidth%29%3B%0A%0A%20%20%20%20var%20lineAlignOffsets%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%3D%20line%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20alignOffset%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28this%2E%5Ffont%2Ealign%20%3D%3D%3D%20%27right%27%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alignOffset%20%3D%20maxLineWidth%20%2D%20lineWidths%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20%28this%2E%5Ffont%2Ealign%20%3D%3D%3D%20%27center%27%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alignOffset%20%3D%20%28maxLineWidth%20%2D%20lineWidths%5Bi%5D%29%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20lineAlignOffsets%2Epush%28alignOffset%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20lenChars%20%3D%20chars%2Elength%3B%0A%20%20%20%20var%20tint%20%3D%20this%2Etint%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20lenChars%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20this%2E%5Fglyphs%5Bi%5D%3B%20%2F%2F%20get%20the%20next%20glyph%20sprite%0A%0A%20%20%20%20%20%20%20%20if%20%28c%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%2Etexture%20%3D%20chars%5Bi%5D%2Etexture%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20new%20core%2ESprite%28chars%5Bi%5D%2Etexture%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fglyphs%2Epush%28c%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20c%2Eposition%2Ex%20%3D%20%28chars%5Bi%5D%2Eposition%2Ex%20%2B%20lineAlignOffsets%5Bchars%5Bi%5D%2Eline%5D%29%20%2A%20scale%3B%0A%20%20%20%20%20%20%20%20c%2Eposition%2Ey%20%3D%20chars%5Bi%5D%2Eposition%2Ey%20%2A%20scale%3B%0A%20%20%20%20%20%20%20%20c%2Escale%2Ex%20%3D%20c%2Escale%2Ey%20%3D%20scale%3B%0A%20%20%20%20%20%20%20%20c%2Etint%20%3D%20tint%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%21c%2Eparent%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EaddChild%28c%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20remove%20unnecessary%20children%2E%0A%20%20%20%20for%20%28i%20%3D%20lenChars%3B%20i%20%3C%20this%2E%5Fglyphs%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EremoveChild%28this%2E%5Fglyphs%5Bi%5D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EtextWidth%20%3D%20maxLineWidth%20%2A%20scale%3B%0A%20%20%20%20this%2EtextHeight%20%3D%20%28pos%2Ey%20%2B%20data%2ElineHeight%29%20%2A%20scale%3B%0A%20%20%20%20this%2EmaxLineHeight%20%3D%20maxLineHeight%20%2A%20scale%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20transform%20of%20this%20object%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ABitmapText%2Eprototype%2EupdateTransform%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Evalidate%28%29%3B%0A%20%20%20%20this%2EcontainerUpdateTransform%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Validates%20text%20before%20calling%20parent%27s%20getLocalBounds%0A%20%2A%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20The%20rectangular%20bounding%20area%0A%20%2A%2F%0A%0ABitmapText%2Eprototype%2EgetLocalBounds%20%3D%20function%28%29%0A%7B%0A%20%20%20%20this%2Evalidate%28%29%3B%0A%20%20%20%20return%20core%2EContainer%2Eprototype%2EgetLocalBounds%2Ecall%28this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20text%20when%20needed%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ABitmapText%2Eprototype%2Evalidate%20%3D%20function%28%29%0A%7B%0A%20%20%20%20if%20%28this%2Edirty%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EupdateText%28%29%3B%0A%20%20%20%20%20%20%20%20this%2Edirty%20%3D%20false%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0ABitmapText%2Efonts%20%3D%20%7B%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%7D%5D%2C74%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20MovieClip%20is%20a%20simple%20way%20to%20display%20an%20animation%20depicted%20by%20a%20list%20of%20textures%2E%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20var%20alienImages%20%3D%20%5B%22image%5Fsequence%5F01%2Epng%22%2C%22image%5Fsequence%5F02%2Epng%22%2C%22image%5Fsequence%5F03%2Epng%22%2C%22image%5Fsequence%5F04%2Epng%22%5D%3B%0A%20%2A%20var%20textureArray%20%3D%20%5B%5D%3B%0A%20%2A%0A%20%2A%20for%20%28var%20i%3D0%3B%20i%20%3C%204%3B%20i%2B%2B%29%0A%20%2A%20%7B%0A%20%2A%20%20%20%20%20%20var%20texture%20%3D%20PIXI%2ETexture%2EfromImage%28alienImages%5Bi%5D%29%3B%0A%20%2A%20%20%20%20%20%20textureArray%2Epush%28texture%29%3B%0A%20%2A%20%7D%3B%0A%20%2A%0A%20%2A%20var%20mc%20%3D%20new%20PIXI%2EMovieClip%28textureArray%29%3B%0A%20%2A%20%60%60%60%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2ESprite%0A%20%2A%20%40memberof%20PIXI%2Eextras%0A%20%2A%20%40param%20textures%20%7BPIXI%2ETexture%5B%5D%7CObject%5B%5D%7D%20an%20array%20of%20%7B%40link%20PIXI%2ETexture%7D%20or%20frame%20objects%20that%20make%20up%20the%20animation%0A%20%2A%20%40param%20textures%5B%5D%2Etexture%20%7BPIXI%2ETexture%7D%20the%20%7B%40link%20PIXI%2ETexture%7D%20of%20the%20frame%0A%20%2A%20%40param%20textures%5B%5D%2Etime%20%7Bnumber%7D%20the%20duration%20of%20the%20frame%20in%20ms%0A%20%2A%2F%0Afunction%20MovieClip%28textures%29%0A%7B%0A%20%20%20%20core%2ESprite%2Ecall%28this%2C%20textures%5B0%5D%20instanceof%20core%2ETexture%20%3F%20textures%5B0%5D%20%3A%20textures%5B0%5D%2Etexture%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Ftextures%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fdurations%20%3D%20null%3B%0A%0A%20%20%20%20this%2Etextures%20%3D%20textures%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20speed%20that%20the%20MovieClip%20will%20play%20at%2E%20Higher%20is%20faster%2C%20lower%20is%20slower%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%201%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EanimationSpeed%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Whether%20or%20not%20the%20movie%20clip%20repeats%20after%20playing%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40default%20true%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eloop%20%3D%20true%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Function%20to%20call%20when%20a%20MovieClip%20finishes%20playing%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40method%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Eextras%2EMovieClip%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EonComplete%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Elapsed%20time%20since%20animation%20has%20been%20started%2C%20used%20internally%20to%20display%20current%20texture%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FcurrentTime%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Indicates%20if%20the%20MovieClip%20is%20currently%20playing%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eplaying%20%3D%20false%3B%0A%7D%0A%0A%2F%2F%20constructor%0AMovieClip%2Eprototype%20%3D%20Object%2Ecreate%28core%2ESprite%2Eprototype%29%3B%0AMovieClip%2Eprototype%2Econstructor%20%3D%20MovieClip%3B%0Amodule%2Eexports%20%3D%20MovieClip%3B%0A%0AObject%2EdefineProperties%28MovieClip%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20totalFrames%20is%20the%20total%20number%20of%20frames%20in%20the%20MovieClip%2E%20This%20is%20the%20same%20as%20number%20of%20textures%0A%20%20%20%20%20%2A%20assigned%20to%20the%20MovieClip%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Eextras%2EMovieClip%23%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20totalFrames%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Ftextures%2Elength%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20array%20of%20textures%20used%20for%20this%20MovieClip%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ETexture%5B%5D%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Eextras%2EMovieClip%23%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20textures%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Ftextures%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28value%5B0%5D%20instanceof%20core%2ETexture%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ftextures%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fdurations%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ftextures%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fdurations%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%28var%20i%20%3D%200%3B%20i%20%3C%20value%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ftextures%2Epush%28value%5Bi%5D%2Etexture%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fdurations%2Epush%28value%5Bi%5D%2Etime%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%2A%20The%20MovieClips%20current%20frame%20index%0A%20%20%20%20%2A%0A%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%2A%20%40memberof%20PIXI%2Eextras%2EMovieClip%23%0A%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%2A%2F%0A%20%20%20%20currentFrame%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20currentFrame%20%3D%20Math%2Efloor%28this%2E%5FcurrentTime%29%20%25%20this%2E%5Ftextures%2Elength%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28currentFrame%20%3C%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20currentFrame%20%2B%3D%20this%2E%5Ftextures%2Elength%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20currentFrame%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Stops%20the%20MovieClip%0A%20%2A%0A%20%2A%2F%0AMovieClip%2Eprototype%2Estop%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%28%21this%2Eplaying%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Eplaying%20%3D%20false%3B%0A%20%20%20%20core%2Eticker%2Eshared%2Eremove%28this%2Eupdate%2C%20this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Plays%20the%20MovieClip%0A%20%2A%0A%20%2A%2F%0AMovieClip%2Eprototype%2Eplay%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%28this%2Eplaying%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Eplaying%20%3D%20true%3B%0A%20%20%20%20core%2Eticker%2Eshared%2Eadd%28this%2Eupdate%2C%20this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Stops%20the%20MovieClip%20and%20goes%20to%20a%20specific%20frame%0A%20%2A%0A%20%2A%20%40param%20frameNumber%20%7Bnumber%7D%20frame%20index%20to%20stop%20at%0A%20%2A%2F%0AMovieClip%2Eprototype%2EgotoAndStop%20%3D%20function%20%28frameNumber%29%0A%7B%0A%20%20%20%20this%2Estop%28%29%3B%0A%0A%20%20%20%20this%2E%5FcurrentTime%20%3D%20frameNumber%3B%0A%0A%20%20%20%20this%2E%5Ftexture%20%3D%20this%2E%5Ftextures%5Bthis%2EcurrentFrame%5D%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Goes%20to%20a%20specific%20frame%20and%20begins%20playing%20the%20MovieClip%0A%20%2A%0A%20%2A%20%40param%20frameNumber%20%7Bnumber%7D%20frame%20index%20to%20start%20at%0A%20%2A%2F%0AMovieClip%2Eprototype%2EgotoAndPlay%20%3D%20function%20%28frameNumber%29%0A%7B%0A%20%20%20%20this%2E%5FcurrentTime%20%3D%20frameNumber%3B%0A%0A%20%20%20%20this%2Eplay%28%29%3B%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Updates%20the%20object%20transform%20for%20rendering%0A%20%2A%20%40private%0A%20%2A%2F%0AMovieClip%2Eprototype%2Eupdate%20%3D%20function%20%28deltaTime%29%0A%7B%0A%20%20%20%20var%20elapsed%20%3D%20this%2EanimationSpeed%20%2A%20deltaTime%3B%0A%0A%20%20%20%20if%20%28this%2E%5Fdurations%20%21%3D%3D%20null%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20lag%20%3D%20this%2E%5FcurrentTime%20%25%201%20%2A%20this%2E%5Fdurations%5Bthis%2EcurrentFrame%5D%3B%0A%0A%20%20%20%20%20%20%20%20lag%20%2B%3D%20elapsed%20%2F%2060%20%2A%201000%3B%0A%0A%20%20%20%20%20%20%20%20while%20%28lag%20%3C%200%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FcurrentTime%2D%2D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20lag%20%2B%3D%20this%2E%5Fdurations%5Bthis%2EcurrentFrame%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20sign%20%3D%20Math%2Esign%28this%2EanimationSpeed%20%2A%20deltaTime%29%3B%0A%20%20%20%20%20%20%20%20this%2E%5FcurrentTime%20%3D%20Math%2Efloor%28this%2E%5FcurrentTime%29%3B%0A%0A%20%20%20%20%20%20%20%20while%20%28lag%20%3E%3D%20this%2E%5Fdurations%5Bthis%2EcurrentFrame%5D%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lag%20%2D%3D%20this%2E%5Fdurations%5Bthis%2EcurrentFrame%5D%20%2A%20sign%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FcurrentTime%20%2B%3D%20sign%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this%2E%5FcurrentTime%20%2B%3D%20lag%20%2F%20this%2E%5Fdurations%5Bthis%2EcurrentFrame%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FcurrentTime%20%2B%3D%20elapsed%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28this%2E%5FcurrentTime%20%3C%200%20%26%26%20%21this%2Eloop%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EgotoAndStop%280%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28this%2EonComplete%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EonComplete%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20%28this%2E%5FcurrentTime%20%3E%3D%20this%2E%5Ftextures%2Elength%20%26%26%20%21this%2Eloop%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EgotoAndStop%28this%2E%5Ftextures%2Elength%20%2D%201%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28this%2EonComplete%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EonComplete%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5Ftexture%20%3D%20this%2E%5Ftextures%5Bthis%2EcurrentFrame%5D%3B%0A%20%20%20%20%7D%0A%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Stops%20the%20MovieClip%20and%20destroys%20it%0A%20%2A%0A%20%2A%2F%0AMovieClip%2Eprototype%2Edestroy%20%3D%20function%20%28%20%29%0A%7B%0A%20%20%20%20this%2Estop%28%29%3B%0A%20%20%20%20core%2ESprite%2Eprototype%2Edestroy%2Ecall%28this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20short%20hand%20way%20of%20creating%20a%20movieclip%20from%20an%20array%20of%20frame%20ids%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20frames%20%7Bstring%5B%5D%7D%20the%20array%20of%20frames%20ids%20the%20movieclip%20will%20use%20as%20its%20texture%20frames%0A%20%2A%2F%0AMovieClip%2EfromFrames%20%3D%20function%20%28frames%29%0A%7B%0A%20%20%20%20var%20textures%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20frames%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20textures%2Epush%28new%20core%2ETexture%2EfromFrame%28frames%5Bi%5D%29%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20new%20MovieClip%28textures%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20short%20hand%20way%20of%20creating%20a%20movieclip%20from%20an%20array%20of%20image%20ids%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20images%20%7Bstring%5B%5D%7D%20the%20array%20of%20image%20urls%20the%20movieclip%20will%20use%20as%20its%20texture%20frames%0A%20%2A%2F%0AMovieClip%2EfromImages%20%3D%20function%20%28images%29%0A%7B%0A%20%20%20%20var%20textures%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20images%2Elength%3B%20%2B%2Bi%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20textures%2Epush%28new%20core%2ETexture%2EfromImage%28images%5Bi%5D%29%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20new%20MovieClip%28textures%29%3B%0A%7D%3B%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%7D%5D%2C75%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%2C%0A%20%20%20%20%2F%2F%20a%20sprite%20use%20dfor%20rendering%20textures%2E%2E%0A%20%20%20%20tempPoint%20%3D%20new%20core%2EPoint%28%29%2C%0A%20%20%20%20CanvasTinter%20%3D%20require%28%27%2E%2E%2Fcore%2Frenderers%2Fcanvas%2Futils%2FCanvasTinter%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20A%20tiling%20sprite%20is%20a%20fast%20way%20of%20rendering%20a%20tiling%20image%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2ESprite%0A%20%2A%20%40memberof%20PIXI%2Eextras%0A%20%2A%20%40param%20texture%20%7BTexture%7D%20the%20texture%20of%20the%20tiling%20sprite%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20%20the%20width%20of%20the%20tiling%20sprite%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20the%20height%20of%20the%20tiling%20sprite%0A%20%2A%2F%0Afunction%20TilingSprite%28texture%2C%20width%2C%20height%29%0A%7B%0A%20%20%20%20core%2ESprite%2Ecall%28this%2C%20texture%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20scaling%20of%20the%20image%20that%20is%20being%20tiled%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EtileScale%20%3D%20new%20core%2EPoint%281%2C1%29%3B%0A%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20offset%20position%20of%20the%20image%20that%20is%20being%20tiled%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EtilePosition%20%3D%20new%20core%2EPoint%280%2C0%29%3B%0A%0A%20%20%20%20%2F%2F%2F%2F%2F%20private%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20with%20of%20the%20tiling%20sprite%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fwidth%20%3D%20width%20%7C%7C%20100%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20tiling%20sprite%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fheight%20%3D%20height%20%7C%7C%20100%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20An%20internal%20WebGL%20UV%20cache%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ETextureUvs%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fuvs%20%3D%20new%20core%2ETextureUvs%28%29%3B%0A%0A%20%20%20%20this%2E%5FcanvasPattern%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2FTODO%20move%2E%2E%0A%20%20%20%20this%2Eshader%20%3D%20new%20core%2EAbstractFilter%28%0A%0A%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%27precision%20lowp%20float%3B%27%2C%0A%20%20%20%20%20%20%20%20%27attribute%20vec2%20aVertexPosition%3B%27%2C%0A%20%20%20%20%20%20%20%20%27attribute%20vec2%20aTextureCoord%3B%27%2C%0A%20%20%20%20%20%20%20%20%27attribute%20vec4%20aColor%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%27uniform%20mat3%20projectionMatrix%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%27uniform%20vec4%20uFrame%3B%27%2C%0A%20%20%20%20%20%20%20%20%27uniform%20vec4%20uTransform%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%27varying%20vec2%20vTextureCoord%3B%27%2C%0A%20%20%20%20%20%20%20%20%27varying%20vec4%20vColor%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%20%20%20%20%20%20%20%20%27%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20vec3%28aVertexPosition%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%27%20%20%20vec2%20coord%20%3D%20aTextureCoord%3B%27%2C%0A%20%20%20%20%20%20%20%20%27%20%20%20coord%20%2D%3D%20uTransform%2Exy%3B%27%2C%0A%20%20%20%20%20%20%20%20%27%20%20%20coord%20%2F%3D%20uTransform%2Ezw%3B%27%2C%0A%20%20%20%20%20%20%20%20%27%20%20%20vTextureCoord%20%3D%20coord%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%27%20%20%20vColor%20%3D%20vec4%28aColor%2Ergb%20%2A%20aColor%2Ea%2C%20aColor%2Ea%29%3B%27%2C%0A%20%20%20%20%20%20%20%20%27%7D%27%0A%20%20%20%20%20%20%5D%2Ejoin%28%27%5Cn%27%29%2C%0A%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%27precision%20lowp%20float%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%27varying%20vec2%20vTextureCoord%3B%27%2C%0A%20%20%20%20%20%20%20%20%27varying%20vec4%20vColor%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%27uniform%20sampler2D%20uSampler%3B%27%2C%0A%20%20%20%20%20%20%20%20%27uniform%20vec4%20uFrame%3B%27%2C%0A%20%20%20%20%20%20%20%20%27uniform%20vec2%20uPixelSize%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%0A%20%20%20%20%20%20%20%20%27%20%20%20vec2%20coord%20%3D%20mod%28vTextureCoord%2C%20uFrame%2Ezw%29%3B%27%2C%0A%20%20%20%20%20%20%20%20%27%20%20%20coord%20%3D%20clamp%28coord%2C%20uPixelSize%2C%20uFrame%2Ezw%20%2D%20uPixelSize%29%3B%27%2C%0A%20%20%20%20%20%20%20%20%27%20%20%20coord%20%2B%3D%20uFrame%2Exy%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%27%20%20%20gl%5FFragColor%20%3D%20%20texture2D%28uSampler%2C%20coord%29%20%2A%20vColor%20%3B%27%2C%0A%20%20%20%20%20%20%20%20%27%7D%27%0A%20%20%20%20%20%20%5D%2Ejoin%28%27%5Cn%27%29%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20uniforms%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uFrame%3A%20%7B%20type%3A%20%274fv%27%2C%20value%3A%20%5B0%2C0%2C1%2C1%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uTransform%3A%20%7B%20type%3A%20%274fv%27%2C%20value%3A%20%5B0%2C0%2C1%2C1%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uPixelSize%20%3A%20%7B%20type%20%3A%20%272fv%27%2C%20value%3A%20%5B1%2C%201%5D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%29%3B%0A%7D%0A%0ATilingSprite%2Eprototype%20%3D%20Object%2Ecreate%28core%2ESprite%2Eprototype%29%3B%0ATilingSprite%2Eprototype%2Econstructor%20%3D%20TilingSprite%3B%0Amodule%2Eexports%20%3D%20TilingSprite%3B%0A%0A%0AObject%2EdefineProperties%28TilingSprite%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20width%20of%20the%20sprite%2C%20setting%20this%20will%20actually%20modify%20the%20scale%20to%20achieve%20the%20value%20set%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Eextras%2ETilingSprite%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20width%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fwidth%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fwidth%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20height%20of%20the%20TilingSprite%2C%20setting%20this%20will%20actually%20modify%20the%20scale%20to%20achieve%20the%20value%20set%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Eextras%2ETilingSprite%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20height%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fheight%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fheight%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0ATilingSprite%2Eprototype%2E%5FonTextureUpdate%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20WebGL%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%0A%20%2A%20%40private%0A%20%2A%2F%0ATilingSprite%2Eprototype%2E%5FrenderWebGL%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20%2F%2F%20tweak%20our%20texture%20temporarily%2E%2E%0A%20%20%20%20var%20texture%20%3D%20this%2E%5Ftexture%3B%0A%0A%20%20%20%20if%28%21texture%20%7C%7C%20%21texture%2E%5Fuvs%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20tempUvs%20%3D%20texture%2E%5Fuvs%2C%0A%20%20%20%20%20%20%20%20tempWidth%20%3D%20texture%2E%5Fframe%2Ewidth%2C%0A%20%20%20%20%20%20%20%20tempHeight%20%3D%20texture%2E%5Fframe%2Eheight%2C%0A%20%20%20%20%20%20%20%20tw%20%3D%20texture%2EbaseTexture%2Ewidth%2C%0A%20%20%20%20%20%20%20%20th%20%3D%20texture%2EbaseTexture%2Eheight%3B%0A%0A%20%20%20%20texture%2E%5Fuvs%20%3D%20this%2E%5Fuvs%3B%0A%20%20%20%20texture%2E%5Fframe%2Ewidth%20%3D%20this%2Ewidth%3B%0A%20%20%20%20texture%2E%5Fframe%2Eheight%20%3D%20this%2Eheight%3B%0A%0A%20%20%20%20this%2Eshader%2Euniforms%2EuPixelSize%2Evalue%5B0%5D%20%3D%201%2E0%2Ftw%3B%0A%20%20%20%20this%2Eshader%2Euniforms%2EuPixelSize%2Evalue%5B1%5D%20%3D%201%2E0%2Fth%3B%0A%0A%20%20%20%20this%2Eshader%2Euniforms%2EuFrame%2Evalue%5B0%5D%20%3D%20tempUvs%2Ex0%3B%0A%20%20%20%20this%2Eshader%2Euniforms%2EuFrame%2Evalue%5B1%5D%20%3D%20tempUvs%2Ey0%3B%0A%20%20%20%20this%2Eshader%2Euniforms%2EuFrame%2Evalue%5B2%5D%20%3D%20tempUvs%2Ex1%20%2D%20tempUvs%2Ex0%3B%0A%20%20%20%20this%2Eshader%2Euniforms%2EuFrame%2Evalue%5B3%5D%20%3D%20tempUvs%2Ey2%20%2D%20tempUvs%2Ey0%3B%0A%0A%20%20%20%20this%2Eshader%2Euniforms%2EuTransform%2Evalue%5B0%5D%20%3D%20%28this%2EtilePosition%2Ex%20%25%20%28tempWidth%20%2A%20this%2EtileScale%2Ex%29%29%20%2F%20this%2E%5Fwidth%3B%0A%20%20%20%20this%2Eshader%2Euniforms%2EuTransform%2Evalue%5B1%5D%20%3D%20%28this%2EtilePosition%2Ey%20%25%20%28tempHeight%20%2A%20this%2EtileScale%2Ey%29%29%20%2F%20this%2E%5Fheight%3B%0A%20%20%20%20this%2Eshader%2Euniforms%2EuTransform%2Evalue%5B2%5D%20%3D%20%28%20tw%20%2F%20this%2E%5Fwidth%20%29%20%2A%20this%2EtileScale%2Ex%3B%0A%20%20%20%20this%2Eshader%2Euniforms%2EuTransform%2Evalue%5B3%5D%20%3D%20%28%20th%20%2F%20this%2E%5Fheight%20%29%20%2A%20this%2EtileScale%2Ey%3B%0A%0A%20%20%20%20renderer%2EsetObjectRenderer%28renderer%2Eplugins%2Esprite%29%3B%0A%20%20%20%20renderer%2Eplugins%2Esprite%2Erender%28this%29%3B%0A%0A%20%20%20%20texture%2E%5Fuvs%20%3D%20tempUvs%3B%0A%20%20%20%20texture%2E%5Fframe%2Ewidth%20%3D%20tempWidth%3B%0A%20%20%20%20texture%2E%5Fframe%2Eheight%20%3D%20tempHeight%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20Canvas%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7D%20a%20reference%20to%20the%20canvas%20renderer%0A%20%2A%20%40private%0A%20%2A%2F%0ATilingSprite%2Eprototype%2E%5FrenderCanvas%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20var%20texture%20%3D%20this%2E%5Ftexture%3B%0A%0A%20%20%20%20if%20%28%21texture%2EbaseTexture%2EhasLoaded%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20context%20%3D%20renderer%2Econtext%2C%0A%20%20%20%20%20%20%20%20transform%20%3D%20this%2EworldTransform%2C%0A%20%20%20%20%20%20%20%20resolution%20%3D%20renderer%2Eresolution%2C%0A%20%20%20%20%20%20%20%20baseTexture%20%3D%20texture%2EbaseTexture%2C%0A%20%20%20%20%20%20%20%20modX%20%3D%20%28this%2EtilePosition%2Ex%20%2F%20this%2EtileScale%2Ex%29%20%25%20texture%2E%5Fframe%2Ewidth%2C%0A%20%20%20%20%20%20%20%20modY%20%3D%20%28this%2EtilePosition%2Ey%20%2F%20this%2EtileScale%2Ey%29%20%25%20texture%2E%5Fframe%2Eheight%3B%0A%0A%20%20%20%20%2F%2F%20create%20a%20nice%20shiny%20pattern%21%0A%20%20%20%20%2F%2F%20TODO%20this%20needs%20to%20be%20refreshed%20if%20texture%20changes%2E%2E%0A%20%20%20%20if%28%21this%2E%5FcanvasPattern%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20cut%20an%20object%20from%20a%20spritesheet%2E%2E%0A%20%20%20%20%20%20%20%20var%20tempCanvas%20%3D%20new%20core%2ECanvasBuffer%28texture%2E%5Fframe%2Ewidth%2C%20texture%2E%5Fframe%2Eheight%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Tint%20the%20tiling%20sprite%0A%20%20%20%20%20%20%20%20if%20%28this%2Etint%20%21%3D%3D%200xFFFFFF%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2EcachedTint%20%21%3D%3D%20this%2Etint%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EcachedTint%20%3D%20this%2Etint%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EtintedTexture%20%3D%20CanvasTinter%2EgetTintedTexture%28this%2C%20this%2Etint%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20tempCanvas%2Econtext%2EdrawImage%28this%2EtintedTexture%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tempCanvas%2Econtext%2EdrawImage%28baseTexture%2Esource%2C%20%2Dtexture%2E%5Fframe%2Ex%2C%20%2Dtexture%2E%5Fframe%2Ey%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this%2E%5FcanvasPattern%20%3D%20tempCanvas%2Econtext%2EcreatePattern%28%20tempCanvas%2Ecanvas%2C%20%27repeat%27%20%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20set%20context%20state%2E%2E%0A%20%20%20%20context%2EglobalAlpha%20%3D%20this%2EworldAlpha%3B%0A%20%20%20%20context%2EsetTransform%28transform%2Ea%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%2Eb%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%2Ec%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%2Ed%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%2Etx%20%2A%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%2Ety%20%2A%20resolution%29%3B%0A%0A%20%20%20%20%2F%2F%20TODO%20%2D%20this%20should%20be%20rolled%20into%20the%20setTransform%20above%2E%2E%0A%20%20%20%20context%2Escale%28this%2EtileScale%2Ex%2Cthis%2EtileScale%2Ey%29%3B%0A%0A%20%20%20%20context%2Etranslate%28modX%20%2B%20%28this%2Eanchor%2Ex%20%2A%20%2Dthis%2E%5Fwidth%20%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20modY%20%2B%20%28this%2Eanchor%2Ey%20%2A%20%2Dthis%2E%5Fheight%29%29%3B%0A%0A%20%20%20%20%2F%2F%20check%20blend%20mode%0A%20%20%20%20var%20compositeOperation%20%3D%20renderer%2EblendModes%5Bthis%2EblendMode%5D%3B%0A%20%20%20%20if%20%28compositeOperation%20%21%3D%3D%20renderer%2Econtext%2EglobalCompositeOperation%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20context%2EglobalCompositeOperation%20%3D%20compositeOperation%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20fill%20the%20pattern%21%0A%20%20%20%20context%2EfillStyle%20%3D%20this%2E%5FcanvasPattern%3B%0A%20%20%20%20context%2EfillRect%28%2DmodX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2DmodY%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fwidth%20%2F%20this%2EtileScale%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fheight%20%2F%20this%2EtileScale%2Ey%29%3B%0A%0A%0A%20%20%20%20%2F%2FTODO%20%2D%20pretty%20sure%20this%20can%20be%20deleted%2E%2E%2E%0A%20%20%20%20%2F%2Fcontext%2Etranslate%28%2Dthis%2EtilePosition%2Ex%20%2B%20%28this%2Eanchor%2Ex%20%2A%20this%2E%5Fwidth%29%2C%20%2Dthis%2EtilePosition%2Ey%20%2B%20%28this%2Eanchor%2Ey%20%2A%20this%2E%5Fheight%29%29%3B%0A%20%20%20%20%2F%2Fcontext%2Escale%281%20%2F%20this%2EtileScale%2Ex%2C%201%20%2F%20this%2EtileScale%2Ey%29%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Returns%20the%20framing%20rectangle%20of%20the%20sprite%20as%20a%20Rectangle%20object%0A%2A%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20the%20framing%20rectangle%0A%20%2A%2F%0ATilingSprite%2Eprototype%2EgetBounds%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20width%20%3D%20this%2E%5Fwidth%3B%0A%20%20%20%20var%20height%20%3D%20this%2E%5Fheight%3B%0A%0A%20%20%20%20var%20w0%20%3D%20width%20%2A%20%281%2Dthis%2Eanchor%2Ex%29%3B%0A%20%20%20%20var%20w1%20%3D%20width%20%2A%20%2Dthis%2Eanchor%2Ex%3B%0A%0A%20%20%20%20var%20h0%20%3D%20height%20%2A%20%281%2Dthis%2Eanchor%2Ey%29%3B%0A%20%20%20%20var%20h1%20%3D%20height%20%2A%20%2Dthis%2Eanchor%2Ey%3B%0A%0A%20%20%20%20var%20worldTransform%20%3D%20this%2EworldTransform%3B%0A%0A%20%20%20%20var%20a%20%3D%20worldTransform%2Ea%3B%0A%20%20%20%20var%20b%20%3D%20worldTransform%2Eb%3B%0A%20%20%20%20var%20c%20%3D%20worldTransform%2Ec%3B%0A%20%20%20%20var%20d%20%3D%20worldTransform%2Ed%3B%0A%20%20%20%20var%20tx%20%3D%20worldTransform%2Etx%3B%0A%20%20%20%20var%20ty%20%3D%20worldTransform%2Ety%3B%0A%0A%20%20%20%20var%20x1%20%3D%20a%20%2A%20w1%20%2B%20c%20%2A%20h1%20%2B%20tx%3B%0A%20%20%20%20var%20y1%20%3D%20d%20%2A%20h1%20%2B%20b%20%2A%20w1%20%2B%20ty%3B%0A%0A%20%20%20%20var%20x2%20%3D%20a%20%2A%20w0%20%2B%20c%20%2A%20h1%20%2B%20tx%3B%0A%20%20%20%20var%20y2%20%3D%20d%20%2A%20h1%20%2B%20b%20%2A%20w0%20%2B%20ty%3B%0A%0A%20%20%20%20var%20x3%20%3D%20a%20%2A%20w0%20%2B%20c%20%2A%20h0%20%2B%20tx%3B%0A%20%20%20%20var%20y3%20%3D%20d%20%2A%20h0%20%2B%20b%20%2A%20w0%20%2B%20ty%3B%0A%0A%20%20%20%20var%20x4%20%3D%20%20a%20%2A%20w1%20%2B%20c%20%2A%20h0%20%2B%20tx%3B%0A%20%20%20%20var%20y4%20%3D%20%20d%20%2A%20h0%20%2B%20b%20%2A%20w1%20%2B%20ty%3B%0A%0A%20%20%20%20var%20minX%2C%0A%20%20%20%20%20%20%20%20maxX%2C%0A%20%20%20%20%20%20%20%20minY%2C%0A%20%20%20%20%20%20%20%20maxY%3B%0A%0A%20%20%20%20minX%20%3D%20x1%3B%0A%20%20%20%20minX%20%3D%20x2%20%3C%20minX%20%3F%20x2%20%3A%20minX%3B%0A%20%20%20%20minX%20%3D%20x3%20%3C%20minX%20%3F%20x3%20%3A%20minX%3B%0A%20%20%20%20minX%20%3D%20x4%20%3C%20minX%20%3F%20x4%20%3A%20minX%3B%0A%0A%20%20%20%20minY%20%3D%20y1%3B%0A%20%20%20%20minY%20%3D%20y2%20%3C%20minY%20%3F%20y2%20%3A%20minY%3B%0A%20%20%20%20minY%20%3D%20y3%20%3C%20minY%20%3F%20y3%20%3A%20minY%3B%0A%20%20%20%20minY%20%3D%20y4%20%3C%20minY%20%3F%20y4%20%3A%20minY%3B%0A%0A%20%20%20%20maxX%20%3D%20x1%3B%0A%20%20%20%20maxX%20%3D%20x2%20%3E%20maxX%20%3F%20x2%20%3A%20maxX%3B%0A%20%20%20%20maxX%20%3D%20x3%20%3E%20maxX%20%3F%20x3%20%3A%20maxX%3B%0A%20%20%20%20maxX%20%3D%20x4%20%3E%20maxX%20%3F%20x4%20%3A%20maxX%3B%0A%0A%20%20%20%20maxY%20%3D%20y1%3B%0A%20%20%20%20maxY%20%3D%20y2%20%3E%20maxY%20%3F%20y2%20%3A%20maxY%3B%0A%20%20%20%20maxY%20%3D%20y3%20%3E%20maxY%20%3F%20y3%20%3A%20maxY%3B%0A%20%20%20%20maxY%20%3D%20y4%20%3E%20maxY%20%3F%20y4%20%3A%20maxY%3B%0A%0A%20%20%20%20var%20bounds%20%3D%20this%2E%5Fbounds%3B%0A%0A%20%20%20%20bounds%2Ex%20%3D%20minX%3B%0A%20%20%20%20bounds%2Ewidth%20%3D%20maxX%20%2D%20minX%3B%0A%0A%20%20%20%20bounds%2Ey%20%3D%20minY%3B%0A%20%20%20%20bounds%2Eheight%20%3D%20maxY%20%2D%20minY%3B%0A%0A%20%20%20%20%2F%2F%20store%20a%20reference%20so%20that%20if%20this%20function%20gets%20called%20again%20in%20the%20render%20cycle%20we%20do%20not%20have%20to%20recalculate%0A%20%20%20%20this%2E%5FcurrentBounds%20%3D%20bounds%3B%0A%0A%20%20%20%20return%20bounds%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Checks%20if%20a%20point%20is%20inside%20this%20tiling%20sprite%0A%20%2A%20%40param%20point%20%7BPIXI%2EPoint%7D%20the%20point%20to%20check%0A%20%2A%2F%0ATilingSprite%2Eprototype%2EcontainsPoint%20%3D%20function%28%20point%20%29%0A%7B%0A%20%20%20%20this%2EworldTransform%2EapplyInverse%28point%2C%20%20tempPoint%29%3B%0A%0A%20%20%20%20var%20width%20%3D%20this%2E%5Fwidth%3B%0A%20%20%20%20var%20height%20%3D%20this%2E%5Fheight%3B%0A%20%20%20%20var%20x1%20%3D%20%2Dwidth%20%2A%20this%2Eanchor%2Ex%3B%0A%20%20%20%20var%20y1%3B%0A%0A%20%20%20%20if%20%28%20tempPoint%2Ex%20%3E%20x1%20%26%26%20tempPoint%2Ex%20%3C%20x1%20%2B%20width%20%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20y1%20%3D%20%2Dheight%20%2A%20this%2Eanchor%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%20tempPoint%2Ey%20%3E%20y1%20%26%26%20tempPoint%2Ey%20%3C%20y1%20%2B%20height%20%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20false%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20this%20tiling%20sprite%0A%20%2A%0A%20%2A%2F%0ATilingSprite%2Eprototype%2Edestroy%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20core%2ESprite%2Eprototype%2Edestroy%2Ecall%28this%29%3B%0A%0A%20%20%20%20this%2EtileScale%20%3D%20null%3B%0A%20%20%20%20this%2E%5FtileScaleOffset%20%3D%20null%3B%0A%20%20%20%20this%2EtilePosition%20%3D%20null%3B%0A%0A%20%20%20%20this%2E%5Fuvs%20%3D%20null%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20tiling%20sprite%20that%20will%20use%20a%20texture%20from%20the%20TextureCache%20based%20on%20the%20frameId%0A%20%2A%20The%20frame%20ids%20are%20created%20when%20a%20Texture%20packer%20file%20has%20been%20loaded%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20frameId%20%7Bstring%7D%20The%20frame%20Id%20of%20the%20texture%20in%20the%20cache%0A%20%2A%20%40return%20%7BPIXI%2Eextras%2ETilingSprite%7D%20A%20new%20TilingSprite%20using%20a%20texture%20from%20the%20texture%20cache%20matching%20the%20frameId%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20%20the%20width%20of%20the%20tiling%20sprite%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20the%20height%20of%20the%20tiling%20sprite%0A%20%2A%2F%0ATilingSprite%2EfromFrame%20%3D%20function%20%28frameId%2Cwidth%2Cheight%29%0A%7B%0A%20%20%20%20var%20texture%20%3D%20core%2Eutils%2ETextureCache%5BframeId%5D%3B%0A%0A%20%20%20%20if%20%28%21texture%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27The%20frameId%20%22%27%20%2B%20frameId%20%2B%20%27%22%20does%20not%20exist%20in%20the%20texture%20cache%20%27%20%2B%20this%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20new%20TilingSprite%28texture%2Cwidth%2Cheight%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Helper%20function%20that%20creates%20a%20sprite%20that%20will%20contain%20a%20texture%20based%20on%20an%20image%20url%0A%20%2A%20If%20the%20image%20is%20not%20in%20the%20texture%20cache%20it%20will%20be%20loaded%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20imageId%20%7Bstring%7D%20The%20image%20url%20of%20the%20texture%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20%20the%20width%20of%20the%20tiling%20sprite%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20the%20height%20of%20the%20tiling%20sprite%0A%20%2A%20%40param%20%5Bcrossorigin%3D%28auto%29%5D%20%7Bboolean%7D%20if%20you%20want%20to%20specify%20the%20cross%2Dorigin%20parameter%0A%20%2A%20%40param%20%5BscaleMode%3DPIXI%2ESCALE%5FMODES%2EDEFAULT%5D%20%7Bnumber%7D%20if%20you%20want%20to%20specify%20the%20scale%20mode%2C%20see%20%7B%40link%20PIXI%2ESCALE%5FMODES%7D%20for%20possible%20values%0A%20%2A%20%40return%20%7BPIXI%2Eextras%2ETilingSprite%7D%20A%20new%20TilingSprite%20using%20a%20texture%20from%20the%20texture%20cache%20matching%20the%20image%20id%0A%20%2A%2F%0ATilingSprite%2EfromImage%20%3D%20function%20%28imageId%2C%20width%2C%20height%2C%20crossorigin%2C%20scaleMode%29%0A%7B%0A%20%20%20%20return%20new%20TilingSprite%28core%2ETexture%2EfromImage%28imageId%2C%20crossorigin%2C%20scaleMode%29%2Cwidth%2Cheight%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%2C%22%2E%2E%2Fcore%2Frenderers%2Fcanvas%2Futils%2FCanvasTinter%22%3A41%7D%5D%2C76%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%2C%0A%20%20%20%20DisplayObject%20%3D%20core%2EDisplayObject%2C%0A%20%20%20%20%5FtempMatrix%20%3D%20new%20core%2EMatrix%28%29%3B%0A%0ADisplayObject%2Eprototype%2E%5FcacheAsBitmap%20%3D%20false%3B%0ADisplayObject%2Eprototype%2E%5ForiginalRenderWebGL%20%3D%20null%3B%0ADisplayObject%2Eprototype%2E%5ForiginalRenderCanvas%20%3D%20null%3B%0A%0ADisplayObject%2Eprototype%2E%5ForiginalUpdateTransform%20%3D%20null%3B%0ADisplayObject%2Eprototype%2E%5ForiginalHitTest%20%3D%20null%3B%0ADisplayObject%2Eprototype%2E%5ForiginalDestroy%20%3D%20null%3B%0ADisplayObject%2Eprototype%2E%5FcachedSprite%20%3D%20null%3B%0A%0AObject%2EdefineProperties%28DisplayObject%2Eprototype%2C%20%7B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Set%20this%20to%20true%20if%20you%20want%20this%20display%20object%20to%20be%20cached%20as%20a%20bitmap%2E%0A%20%20%20%20%20%2A%20This%20basically%20takes%20a%20snap%20shot%20of%20the%20display%20object%20as%20it%20is%20at%20that%20moment%2E%20It%20can%20provide%20a%20performance%20benefit%20for%20complex%20static%20displayObjects%2E%0A%20%20%20%20%20%2A%20To%20remove%20simply%20set%20this%20property%20to%20%27false%27%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2EDisplayObject%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20cacheAsBitmap%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2E%5FcacheAsBitmap%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2E%5FcacheAsBitmap%20%3D%3D%3D%20value%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FcacheAsBitmap%20%3D%20value%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5ForiginalRenderWebGL%20%3D%20this%2ErenderWebGL%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5ForiginalRenderCanvas%20%3D%20this%2ErenderCanvas%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5ForiginalUpdateTransform%20%3D%20this%2EupdateTransform%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5ForiginalGetBounds%20%3D%20this%2EgetBounds%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5ForiginalDestroy%20%3D%20this%2Edestroy%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5ForiginalContainsPoint%20%3D%20this%2EcontainsPoint%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2ErenderWebGL%20%3D%20this%2E%5FrenderCachedWebGL%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2ErenderCanvas%20%3D%20this%2E%5FrenderCachedCanvas%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Edestroy%20%3D%20this%2E%5FcacheAsBitmapDestroy%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2E%5FcachedSprite%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FdestroyCachedDisplayObject%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2ErenderWebGL%20%3D%20this%2E%5ForiginalRenderWebGL%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2ErenderCanvas%20%3D%20this%2E%5ForiginalRenderCanvas%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EgetBounds%20%3D%20this%2E%5ForiginalGetBounds%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Edestroy%20%3D%20this%2E%5ForiginalDestroy%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EupdateTransform%20%3D%20this%2E%5ForiginalUpdateTransform%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EcontainsPoint%20%3D%20this%2E%5ForiginalContainsPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%2F%2A%2A%0A%2A%20Renders%20a%20cached%20version%20of%20the%20sprite%20with%20WebGL%0A%2A%0A%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20the%20WebGL%20renderer%0A%2A%20%40private%0A%2A%2F%0ADisplayObject%2Eprototype%2E%5FrenderCachedWebGL%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20if%20%28%21this%2Evisible%20%7C%7C%20this%2EworldAlpha%20%3C%3D%200%20%7C%7C%20%21this%2Erenderable%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2E%5FinitCachedDisplayObject%28%20renderer%20%29%3B%0A%0A%20%20%20%20this%2E%5FcachedSprite%2EworldAlpha%20%3D%20this%2EworldAlpha%3B%0A%0A%20%20%20%20renderer%2EsetObjectRenderer%28renderer%2Eplugins%2Esprite%29%3B%0A%20%20%20%20renderer%2Eplugins%2Esprite%2Erender%28%20this%2E%5FcachedSprite%20%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%2A%20Prepares%20the%20WebGL%20renderer%20to%20cache%20the%20sprite%0A%2A%0A%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20the%20WebGL%20renderer%0A%2A%20%40private%0A%2A%2F%0ADisplayObject%2Eprototype%2E%5FinitCachedDisplayObject%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20if%28this%2E%5FcachedSprite%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20first%20we%20flush%20anything%20left%20in%20the%20renderer%20%28otherwise%20it%20would%20get%20rendered%20to%20the%20cached%20texture%29%0A%20%20%20%20renderer%2EcurrentRenderer%2Eflush%28%29%3B%0A%20%20%20%20%2F%2Fthis%2Efilters%3D%20%5B%5D%3B%0A%20%20%20%20%2F%2F%20next%20we%20find%20the%20dimensions%20of%20the%20untransformed%20object%0A%20%20%20%20%2F%2F%20this%20function%20also%20calls%20updatetransform%20on%20all%20its%20children%20as%20part%20of%20the%20measuring%2E%20This%20means%20we%20don%27t%20need%20to%20update%20the%20transform%20again%20in%20this%20function%0A%20%20%20%20%2F%2F%20TODO%20pass%20an%20object%20to%20clone%20too%3F%20saves%20having%20to%20create%20a%20new%20one%20each%20time%21%0A%20%20%20%20var%20bounds%20%3D%20this%2EgetLocalBounds%28%29%2Eclone%28%29%3B%0A%0A%20%20%20%20%2F%2F%20add%20some%20padding%21%0A%20%20%20%20if%28this%2E%5Ffilters%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20padding%20%3D%20this%2E%5Ffilters%5B0%5D%2Epadding%3B%0A%20%20%20%20%20%20%20%20bounds%2Ex%20%2D%3D%20padding%3B%0A%20%20%20%20%20%20%20%20bounds%2Ey%20%2D%3D%20padding%3B%0A%0A%20%20%20%20%20%20%20%20bounds%2Ewidth%20%2B%3D%20padding%20%2A%202%3B%0A%20%20%20%20%20%20%20%20bounds%2Eheight%20%2B%3D%20padding%20%2A%202%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20for%20now%20we%20cache%20the%20current%20renderTarget%20that%20the%20webGL%20renderer%20is%20currently%20using%2E%0A%20%20%20%20%2F%2F%20this%20could%20be%20more%20elegent%2E%2E%0A%20%20%20%20var%20cachedRenderTarget%20%3D%20renderer%2EcurrentRenderTarget%3B%0A%20%20%20%20%2F%2F%20We%20also%20store%20the%20filter%20stack%20%2D%20I%20will%20definitely%20look%20to%20change%20how%20this%20works%20a%20little%20later%20down%20the%20line%2E%0A%20%20%20%20var%20stack%20%3D%20renderer%2EfilterManager%2EfilterStack%3B%0A%0A%20%20%20%20%2F%2F%20this%20renderTexture%20will%20be%20used%20to%20store%20the%20cached%20DisplayObject%0A%20%20%20%20var%20renderTexture%20%3D%20new%20core%2ERenderTexture%28renderer%2C%20bounds%2Ewidth%20%7C%200%2C%20bounds%2Eheight%20%7C%200%29%3B%0A%0A%20%20%20%20%2F%2F%20need%20to%20set%20%2F%2F%0A%20%20%20%20var%20m%20%3D%20%5FtempMatrix%3B%0A%0A%20%20%20%20m%2Etx%20%3D%20%2Dbounds%2Ex%3B%0A%20%20%20%20m%2Ety%20%3D%20%2Dbounds%2Ey%3B%0A%0A%0A%0A%20%20%20%20%2F%2F%20set%20all%20properties%20to%20there%20original%20so%20we%20can%20render%20to%20a%20texture%0A%20%20%20%20this%2ErenderWebGL%20%3D%20this%2E%5ForiginalRenderWebGL%3B%0A%0A%20%20%20%20renderTexture%2Erender%28this%2C%20m%2C%20true%2C%20true%29%3B%0A%0A%20%20%20%20%2F%2F%20now%20restore%20the%20state%20be%20setting%20the%20new%20properties%0A%20%20%20%20renderer%2EsetRenderTarget%28cachedRenderTarget%29%3B%0A%20%20%20%20renderer%2EfilterManager%2EfilterStack%20%3D%20stack%3B%0A%0A%20%20%20%20this%2ErenderWebGL%20%20%20%20%20%3D%20this%2E%5FrenderCachedWebGL%3B%0A%20%20%20%20this%2EupdateTransform%20%3D%20this%2EdisplayObjectUpdateTransform%3B%0A%20%20%20%20this%2EgetBounds%20%20%20%20%20%20%20%3D%20this%2E%5FgetCachedBounds%3B%0A%0A%0A%20%20%20%20%2F%2F%20create%20our%20cached%20sprite%0A%20%20%20%20this%2E%5FcachedSprite%20%3D%20new%20core%2ESprite%28renderTexture%29%3B%0A%20%20%20%20this%2E%5FcachedSprite%2EworldTransform%20%3D%20this%2EworldTransform%3B%0A%20%20%20%20this%2E%5FcachedSprite%2Eanchor%2Ex%20%3D%20%2D%28%20bounds%2Ex%20%2F%20bounds%2Ewidth%20%29%3B%0A%20%20%20%20this%2E%5FcachedSprite%2Eanchor%2Ey%20%3D%20%2D%28%20bounds%2Ey%20%2F%20bounds%2Eheight%20%29%3B%0A%0A%20%20%20%20%2F%2F%20restore%20the%20transform%20of%20the%20cached%20sprite%20to%20avoid%20the%20nasty%20flicker%2E%2E%0A%20%20%20%20this%2EupdateTransform%28%29%3B%0A%0A%20%20%20%20%2F%2F%20map%20the%20hit%20test%2E%2E%0A%20%20%20%20this%2EcontainsPoint%20%3D%20this%2E%5FcachedSprite%2EcontainsPoint%2Ebind%28this%2E%5FcachedSprite%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%2A%20Renders%20a%20cached%20version%20of%20the%20sprite%20with%20canvas%0A%2A%0A%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7D%20the%20Canvas%20renderer%0A%2A%20%40private%0A%2A%2F%0ADisplayObject%2Eprototype%2E%5FrenderCachedCanvas%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20if%20%28%21this%2Evisible%20%7C%7C%20this%2EworldAlpha%20%3C%3D%200%20%7C%7C%20%21this%2Erenderable%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2E%5FinitCachedDisplayObjectCanvas%28%20renderer%20%29%3B%0A%0A%20%20%20%20this%2E%5FcachedSprite%2EworldAlpha%20%3D%20this%2EworldAlpha%3B%0A%0A%20%20%20%20this%2E%5FcachedSprite%2ErenderCanvas%28renderer%29%3B%0A%7D%3B%0A%0A%2F%2FTODO%20this%20can%20be%20the%20same%20as%20the%20webGL%20verison%2E%2E%20will%20need%20to%20do%20a%20little%20tweaking%20first%20though%2E%2E%0A%2F%2A%2A%0A%2A%20Prepares%20the%20Canvas%20renderer%20to%20cache%20the%20sprite%0A%2A%0A%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7D%20the%20Canvas%20renderer%0A%2A%20%40private%0A%2A%2F%0ADisplayObject%2Eprototype%2E%5FinitCachedDisplayObjectCanvas%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20if%28this%2E%5FcachedSprite%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2Fget%20bounds%20actually%20transforms%20the%20object%20for%20us%20already%21%0A%20%20%20%20var%20bounds%20%3D%20this%2EgetLocalBounds%28%29%3B%0A%0A%20%20%20%20var%20cachedRenderTarget%20%3D%20renderer%2Econtext%3B%0A%0A%20%20%20%20var%20renderTexture%20%3D%20new%20core%2ERenderTexture%28renderer%2C%20bounds%2Ewidth%20%7C%200%2C%20bounds%2Eheight%20%7C%200%29%3B%0A%0A%20%20%20%20%2F%2F%20need%20to%20set%20%2F%2F%0A%20%20%20%20var%20m%20%3D%20%5FtempMatrix%3B%0A%0A%20%20%20%20m%2Etx%20%3D%20%2Dbounds%2Ex%3B%0A%20%20%20%20m%2Ety%20%3D%20%2Dbounds%2Ey%3B%0A%0A%20%20%20%20%2F%2F%20set%20all%20properties%20to%20there%20original%20so%20we%20can%20render%20to%20a%20texture%0A%20%20%20%20this%2ErenderCanvas%20%3D%20this%2E%5ForiginalRenderCanvas%3B%0A%0A%20%20%20%20renderTexture%2Erender%28this%2C%20m%2C%20true%29%3B%0A%0A%20%20%20%20%2F%2F%20now%20restore%20the%20state%20be%20setting%20the%20new%20properties%0A%20%20%20%20renderer%2Econtext%20%3D%20cachedRenderTarget%3B%0A%0A%20%20%20%20this%2ErenderCanvas%20%3D%20this%2E%5FrenderCachedCanvas%3B%0A%20%20%20%20this%2EupdateTransform%20%3D%20this%2EdisplayObjectUpdateTransform%3B%0A%20%20%20%20this%2EgetBounds%20%20%3D%20this%2E%5FgetCachedBounds%3B%0A%0A%0A%20%20%20%20%2F%2F%20create%20our%20cached%20sprite%0A%20%20%20%20this%2E%5FcachedSprite%20%3D%20new%20core%2ESprite%28renderTexture%29%3B%0A%20%20%20%20this%2E%5FcachedSprite%2EworldTransform%20%3D%20this%2EworldTransform%3B%0A%20%20%20%20this%2E%5FcachedSprite%2Eanchor%2Ex%20%3D%20%2D%28%20bounds%2Ex%20%2F%20bounds%2Ewidth%20%29%3B%0A%20%20%20%20this%2E%5FcachedSprite%2Eanchor%2Ey%20%3D%20%2D%28%20bounds%2Ey%20%2F%20bounds%2Eheight%20%29%3B%0A%0A%20%20%20%20this%2EupdateTransform%28%29%3B%0A%0A%20%20%20%20this%2EcontainsPoint%20%3D%20this%2E%5FcachedSprite%2EcontainsPoint%2Ebind%28this%2E%5FcachedSprite%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%2A%20Calculates%20the%20bounds%20of%20the%20cached%20sprite%0A%2A%0A%2A%20%40private%0A%2A%2F%0ADisplayObject%2Eprototype%2E%5FgetCachedBounds%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2E%5FcachedSprite%2E%5FcurrentBounds%20%3D%20null%3B%0A%0A%20%20%20%20return%20this%2E%5FcachedSprite%2EgetBounds%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%2A%20Destroys%20the%20cached%20sprite%2E%0A%2A%0A%2A%20%40private%0A%2A%2F%0ADisplayObject%2Eprototype%2E%5FdestroyCachedDisplayObject%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2E%5FcachedSprite%2E%5Ftexture%2Edestroy%28%29%3B%0A%20%20%20%20this%2E%5FcachedSprite%20%3D%20null%3B%0A%7D%3B%0A%0ADisplayObject%2Eprototype%2E%5FcacheAsBitmapDestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2EcacheAsBitmap%20%3D%20false%3B%0A%20%20%20%20this%2E%5ForiginalDestroy%28%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%7D%5D%2C77%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20instance%20name%20of%20the%20object%2E%0A%20%2A%0A%20%2A%20%40memberof%20PIXI%2EDisplayObject%23%0A%20%2A%20%40member%20%7Bstring%7D%0A%20%2A%2F%0Acore%2EDisplayObject%2Eprototype%2Ename%20%3D%20null%3B%0A%0A%2F%2A%2A%0A%2A%20Returns%20the%20display%20object%20in%20the%20container%0A%2A%0A%2A%20%40memberof%20PIXI%2EContainer%23%0A%2A%20%40param%20name%20%7Bstring%7D%20instance%20name%0A%2A%20%40return%20%7BPIXI%2EDisplayObject%7D%0A%2A%2F%0Acore%2EContainer%2Eprototype%2EgetChildByName%20%3D%20function%20%28name%29%0A%7B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Echildren%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2Echildren%5Bi%5D%2Ename%20%3D%3D%3D%20name%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Echildren%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20null%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%7D%5D%2C78%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%3B%0A%0A%2F%2A%2A%0A%2A%20Returns%20the%20global%20position%20of%20the%20displayObject%0A%2A%0A%2A%20%40memberof%20PIXI%2EDisplayObject%23%0A%2A%20%40param%20point%20%7BPoint%7D%20the%20point%20to%20write%20the%20global%20value%20to%2E%20If%20null%20a%20new%20point%20will%20be%20returned%0A%2A%20%40return%20%7BPoint%7D%0A%2A%2F%0Acore%2EDisplayObject%2Eprototype%2EgetGlobalPosition%20%3D%20function%20%28point%29%0A%7B%0A%20%20%20%20point%20%3D%20point%20%7C%7C%20new%20core%2EPoint%28%29%3B%0A%0A%20%20%20%20if%28this%2Eparent%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EdisplayObjectUpdateTransform%28%29%3B%0A%0A%20%20%20%20%20%20%20%20point%2Ex%20%3D%20this%2EworldTransform%2Etx%3B%0A%20%20%20%20%20%20%20%20point%2Ey%20%3D%20this%2EworldTransform%2Ety%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20point%2Ex%20%3D%20this%2Eposition%2Ex%3B%0A%20%20%20%20%20%20%20%20point%2Ey%20%3D%20this%2Eposition%2Ey%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20point%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%7D%5D%2C79%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20%40file%20%20%20%20%20%20%20%20Main%20export%20of%20the%20PIXI%20extras%20library%0A%20%2A%20%40author%20%20%20%20%20%20Mat%20Groves%20%3Cmat%40goodboydigital%2Ecom%3E%0A%20%2A%20%40copyright%20%20%202013%2D2015%20GoodBoyDigital%0A%20%2A%20%40license%20%20%20%20%20%7B%40link%20https%3A%2F%2Fgithub%2Ecom%2Fpixijs%2Fpixi%2Ejs%2Fblob%2Fmaster%2FLICENSE%7CMIT%20License%7D%0A%20%2A%2F%0A%0Arequire%28%27%2E%2FcacheAsBitmap%27%29%3B%0Arequire%28%27%2E%2FgetChildByName%27%29%3B%0Arequire%28%27%2E%2FgetGlobalPosition%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40namespace%20PIXI%2Eextras%0A%20%2A%2F%0Amodule%2Eexports%20%3D%20%7B%0A%20%20%20%20MovieClip%3A%20%20%20%20%20%20require%28%27%2E%2FMovieClip%27%29%2C%0A%20%20%20%20TilingSprite%3A%20%20%20require%28%27%2E%2FTilingSprite%27%29%2C%0A%20%20%20%20BitmapText%3A%20%20%20%20%20require%28%27%2E%2FBitmapText%27%29%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FBitmapText%22%3A73%2C%22%2E%2FMovieClip%22%3A74%2C%22%2E%2FTilingSprite%22%3A75%2C%22%2E%2FcacheAsBitmap%22%3A76%2C%22%2E%2FgetChildByName%22%3A77%2C%22%2E%2FgetGlobalPosition%22%3A78%7D%5D%2C80%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2F%20TODO%20%28cengler%29%20%2D%20The%20Y%20is%20flipped%20in%20this%20shader%20for%20some%20reason%2E%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Vico%20%40vicocotea%0A%20%2A%20original%20shader%20%3A%20https%3A%2F%2Fwww%2Eshadertoy%2Ecom%2Fview%2FlssGDj%20by%20%40movAX13h%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20An%20ASCII%20filter%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20AsciiFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnuniform%20vec4%20dimensions%3B%5Cnuniform%20float%20pixelSize%3B%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cnfloat%20character%28float%20n%2C%20vec2%20p%29%5Cn%7B%5Cn%20%20%20%20p%20%3D%20floor%28p%2Avec2%284%2E0%2C%20%2D4%2E0%29%20%2B%202%2E5%29%3B%5Cn%20%20%20%20if%20%28clamp%28p%2Ex%2C%200%2E0%2C%204%2E0%29%20%3D%3D%20p%2Ex%20%26%26%20clamp%28p%2Ey%2C%200%2E0%2C%204%2E0%29%20%3D%3D%20p%2Ey%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28int%28mod%28n%2Fexp2%28p%2Ex%20%2B%205%2E0%2Ap%2Ey%29%2C%202%2E0%29%29%20%3D%3D%201%29%20return%201%2E0%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%200%2E0%3B%5Cn%7D%5Cn%5Cnvoid%20main%28%29%5Cn%7B%5Cn%20%20%20%20vec2%20uv%20%3D%20gl%5FFragCoord%2Exy%3B%5Cn%5Cn%20%20%20%20vec3%20col%20%3D%20texture2D%28uSampler%2C%20floor%28%20uv%20%2F%20pixelSize%20%29%20%2A%20pixelSize%20%2F%20dimensions%2Exy%29%2Ergb%3B%5Cn%5Cn%20%20%20%20float%20gray%20%3D%20%28col%2Er%20%2B%20col%2Eg%20%2B%20col%2Eb%29%20%2F%203%2E0%3B%5Cn%5Cn%20%20%20%20float%20n%20%3D%20%2065536%2E0%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%2E%5Cn%20%20%20%20if%20%28gray%20%3E%200%2E2%29%20n%20%3D%2065600%2E0%3B%20%20%20%20%2F%2F%20%3A%5Cn%20%20%20%20if%20%28gray%20%3E%200%2E3%29%20n%20%3D%20332772%2E0%3B%20%20%20%2F%2F%20%2A%5Cn%20%20%20%20if%20%28gray%20%3E%200%2E4%29%20n%20%3D%2015255086%2E0%3B%20%2F%2F%20o%5Cn%20%20%20%20if%20%28gray%20%3E%200%2E5%29%20n%20%3D%2023385164%2E0%3B%20%2F%2F%20%26%5Cn%20%20%20%20if%20%28gray%20%3E%200%2E6%29%20n%20%3D%2015252014%2E0%3B%20%2F%2F%208%5Cn%20%20%20%20if%20%28gray%20%3E%200%2E7%29%20n%20%3D%2013199452%2E0%3B%20%2F%2F%20%40%5Cn%20%20%20%20if%20%28gray%20%3E%200%2E8%29%20n%20%3D%2011512810%2E0%3B%20%2F%2F%20%23%5Cn%5Cn%20%20%20%20vec2%20p%20%3D%20mod%28%20uv%20%2F%20%28%20pixelSize%20%2A%200%2E5%20%29%2C%202%2E0%29%20%2D%20vec2%281%2E0%29%3B%5Cn%20%20%20%20col%20%3D%20col%20%2A%20character%28n%2C%20p%29%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%3D%20vec4%28col%2C%201%2E0%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20dimensions%3A%20%7B%20type%3A%20%274fv%27%2C%20value%3A%20new%20Float32Array%28%5B0%2C%200%2C%200%2C%200%5D%29%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20pixelSize%3A%20%20%7B%20type%3A%20%271f%27%2C%20value%3A%208%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0AAsciiFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0AAsciiFilter%2Eprototype%2Econstructor%20%3D%20AsciiFilter%3B%0Amodule%2Eexports%20%3D%20AsciiFilter%3B%0A%0AObject%2EdefineProperties%28AsciiFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20pixel%20size%20used%20by%20the%20filter%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EAsciiFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20size%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2EpixelSize%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2EpixelSize%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C81%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%2C%0A%20%20%20%20BlurXFilter%20%3D%20require%28%27%2E%2E%2Fblur%2FBlurXFilter%27%29%2C%0A%20%20%20%20BlurYFilter%20%3D%20require%28%27%2E%2E%2Fblur%2FBlurYFilter%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20BloomFilter%20applies%20a%20Gaussian%20blur%20to%20an%20object%2E%0A%20%2A%20The%20strength%20of%20the%20blur%20can%20be%20set%20for%20x%2D%20and%20y%2Daxis%20separately%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20BloomFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%29%3B%0A%0A%20%20%20%20this%2EblurXFilter%20%3D%20new%20BlurXFilter%28%29%3B%0A%20%20%20%20this%2EblurYFilter%20%3D%20new%20BlurYFilter%28%29%3B%0A%0A%20%20%20%20this%2EdefaultFilter%20%3D%20new%20core%2EAbstractFilter%28%29%3B%0A%7D%0A%0ABloomFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ABloomFilter%2Eprototype%2Econstructor%20%3D%20BloomFilter%3B%0Amodule%2Eexports%20%3D%20BloomFilter%3B%0A%0ABloomFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%29%0A%7B%0A%20%20%20%20var%20renderTarget%20%3D%20renderer%2EfilterManager%2EgetRenderTarget%28true%29%3B%0A%0A%20%20%20%20%2F%2FTODO%20%2D%20copyTexSubImage2D%20could%20be%20used%20here%3F%0A%20%20%20%20this%2EdefaultFilter%2EapplyFilter%28renderer%2C%20input%2C%20output%29%3B%0A%0A%20%20%20%20this%2EblurXFilter%2EapplyFilter%28renderer%2C%20input%2C%20renderTarget%29%3B%0A%0A%20%20%20%20renderer%2EblendModeManager%2EsetBlendMode%28core%2EBLEND%5FMODES%2ESCREEN%29%3B%0A%0A%20%20%20%20this%2EblurYFilter%2EapplyFilter%28renderer%2C%20renderTarget%2C%20output%29%3B%0A%0A%20%20%20%20renderer%2EblendModeManager%2EsetBlendMode%28core%2EBLEND%5FMODES%2ENORMAL%29%3B%0A%0A%20%20%20%20renderer%2EfilterManager%2EreturnRenderTarget%28renderTarget%29%3B%0A%7D%3B%0A%0AObject%2EdefineProperties%28BloomFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20both%20the%20blurX%20and%20blurY%20properties%20simultaneously%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EBloomFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blur%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EblurXFilter%2Eblur%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurXFilter%2Eblur%20%3D%20this%2EblurYFilter%2Eblur%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20the%20blurX%20property%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EBloomFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blurX%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EblurXFilter%2Eblur%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurXFilter%2Eblur%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20the%20blurY%20property%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EBloomFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blurY%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EblurYFilter%2Eblur%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurYFilter%2Eblur%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%2C%22%2E%2E%2Fblur%2FBlurXFilter%22%3A84%2C%22%2E%2E%2Fblur%2FBlurYFilter%22%3A85%7D%5D%2C82%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20The%20BlurDirFilter%20applies%20a%20Gaussian%20blur%20toward%20a%20direction%20to%20an%20object%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40param%20%7Bnumber%7D%20dirX%0A%20%2A%20%40param%20%7Bnumber%7D%20dirY%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20BlurDirFilter%28dirX%2C%20dirY%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20%22attribute%20vec2%20aVertexPosition%3B%5Cnattribute%20vec2%20aTextureCoord%3B%5Cnattribute%20vec4%20aColor%3B%5Cn%5Cnuniform%20float%20strength%3B%5Cnuniform%20float%20dirX%3B%5Cnuniform%20float%20dirY%3B%5Cnuniform%20mat3%20projectionMatrix%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cnvarying%20vec2%20vBlurTexCoords%5B3%5D%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20vec3%28%28aVertexPosition%29%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%5Cn%20%20%20%20vTextureCoord%20%3D%20aTextureCoord%3B%5Cn%5Cn%20%20%20%20vBlurTexCoords%5B0%5D%20%3D%20aTextureCoord%20%2B%20vec2%28%20%280%2E004%20%2A%20strength%29%20%2A%20dirX%2C%20%280%2E004%20%2A%20strength%29%20%2A%20dirY%20%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B1%5D%20%3D%20aTextureCoord%20%2B%20vec2%28%20%280%2E008%20%2A%20strength%29%20%2A%20dirX%2C%20%280%2E008%20%2A%20strength%29%20%2A%20dirY%20%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B2%5D%20%3D%20aTextureCoord%20%2B%20vec2%28%20%280%2E012%20%2A%20strength%29%20%2A%20dirX%2C%20%280%2E012%20%2A%20strength%29%20%2A%20dirY%20%29%3B%5Cn%5Cn%20%20%20%20vColor%20%3D%20vec4%28aColor%2Ergb%20%2A%20aColor%2Ea%2C%20aColor%2Ea%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20lowp%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec2%20vBlurTexCoords%5B3%5D%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20gl%5FFragColor%20%3D%20vec4%280%2E0%29%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vTextureCoord%20%20%20%20%20%29%20%2A%200%2E3989422804014327%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%200%5D%29%20%2A%200%2E2419707245191454%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%201%5D%29%20%2A%200%2E05399096651318985%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%202%5D%29%20%2A%200%2E004431848411938341%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20strength%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%201%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dirX%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%20dirX%20%7C%7C%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dirY%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%20dirY%20%7C%7C%200%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20this%2EdefaultFilter%20%3D%20new%20core%2EAbstractFilter%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20number%20of%20passes%20for%20blur%2E%20More%20passes%20means%20higher%20quaility%20bluring%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%201%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Epasses%20%3D%201%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20X%20direction%20of%20the%20blur%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EdirX%20%3D%20dirX%20%7C%7C%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20Y%20direction%20of%20the%20blur%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EdirY%20%3D%20dirY%20%7C%7C%200%3B%0A%0A%20%20%20%20this%2Estrength%20%3D%204%3B%0A%7D%0A%0ABlurDirFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ABlurDirFilter%2Eprototype%2Econstructor%20%3D%20BlurDirFilter%3B%0Amodule%2Eexports%20%3D%20BlurDirFilter%3B%0A%0ABlurDirFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%2C%20clear%29%20%7B%0A%0A%20%20%20%20var%20shader%20%3D%20this%2EgetShader%28renderer%29%3B%0A%0A%20%20%20%20this%2Euniforms%2Estrength%2Evalue%20%3D%20this%2Estrength%20%2F%204%20%2F%20this%2Epasses%20%2A%20%28input%2Eframe%2Ewidth%20%2F%20input%2Esize%2Ewidth%29%3B%0A%0A%20%20%20%20if%20%28this%2Epasses%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20input%2C%20output%2C%20clear%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20renderTarget%20%3D%20renderer%2EfilterManager%2EgetRenderTarget%28true%29%3B%0A%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20input%2C%20renderTarget%2C%20clear%29%3B%0A%0A%20%20%20%20%20%20%20%20for%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Epasses%2D2%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthis%2Euniforms%2Estrength%2Evalue%20%3D%20this%2Estrength%20%2F%204%20%2F%20%28this%2Epasses%2B%28i%2A2%29%29%20%2A%20%28input%2Eframe%2Ewidth%20%2F%20input%2Esize%2Ewidth%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20renderTarget%2C%20renderTarget%2C%20clear%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20renderTarget%2C%20output%2C%20clear%29%3B%0A%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EreturnRenderTarget%28renderTarget%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0AObject%2EdefineProperties%28BlurDirFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20both%20the%20blur%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EBlurDirFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blur%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Estrength%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Epadding%20%3D%20value%20%2A%200%2E5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Estrength%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20X%20direction%20of%20the%20blur%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EBlurYFilter%23%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20dirX%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EdirX%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2EdirX%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20Y%20direction%20of%20the%20blur%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EBlurDirFilter%23%0A%20%20%20%20%20%2A%20%40default%200%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20dirY%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EdirY%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2EdirY%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C83%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%2C%0A%20%20%20%20BlurXFilter%20%3D%20require%28%27%2E%2FBlurXFilter%27%29%2C%0A%20%20%20%20BlurYFilter%20%3D%20require%28%27%2E%2FBlurYFilter%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20BlurFilter%20applies%20a%20Gaussian%20blur%20to%20an%20object%2E%0A%20%2A%20The%20strength%20of%20the%20blur%20can%20be%20set%20for%20x%2D%20and%20y%2Daxis%20separately%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20BlurFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%29%3B%0A%0A%20%20%20%20this%2EblurXFilter%20%3D%20new%20BlurXFilter%28%29%3B%0A%20%20%20%20this%2EblurYFilter%20%3D%20new%20BlurYFilter%28%29%3B%0A%7D%0A%0ABlurFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ABlurFilter%2Eprototype%2Econstructor%20%3D%20BlurFilter%3B%0Amodule%2Eexports%20%3D%20BlurFilter%3B%0A%0ABlurFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%29%0A%7B%0A%20%20%20%20var%20renderTarget%20%3D%20renderer%2EfilterManager%2EgetRenderTarget%28true%29%3B%0A%0A%20%20%20%20this%2EblurXFilter%2EapplyFilter%28renderer%2C%20input%2C%20renderTarget%29%3B%0A%20%20%20%20this%2EblurYFilter%2EapplyFilter%28renderer%2C%20renderTarget%2C%20output%29%3B%0A%0A%20%20%20%20renderer%2EfilterManager%2EreturnRenderTarget%28renderTarget%29%3B%0A%7D%3B%0A%0AObject%2EdefineProperties%28BlurFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20both%20the%20blurX%20and%20blurY%20properties%20simultaneously%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EBlurFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blur%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EblurXFilter%2Eblur%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Epadding%20%3D%20Math%2Eabs%28value%29%20%2A%200%2E5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurXFilter%2Eblur%20%3D%20this%2EblurYFilter%2Eblur%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20number%20of%20passes%20for%20blur%2E%20More%20passes%20means%20higher%20quaility%20bluring%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EBlurYFilter%23%0A%20%20%20%20%20%2A%20%40default%201%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20passes%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20this%2EblurXFilter%2Epasses%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurXFilter%2Epasses%20%3D%20this%2EblurYFilter%2Epasses%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20the%20blurX%20property%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EBlurFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blurX%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EblurXFilter%2Eblur%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurXFilter%2Eblur%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20the%20blurY%20property%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EBlurFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blurY%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EblurYFilter%2Eblur%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurYFilter%2Eblur%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%2C%22%2E%2FBlurXFilter%22%3A84%2C%22%2E%2FBlurYFilter%22%3A85%7D%5D%2C84%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20The%20BlurXFilter%20applies%20a%20horizontal%20Gaussian%20blur%20to%20an%20object%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20BlurXFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20%22attribute%20vec2%20aVertexPosition%3B%5Cnattribute%20vec2%20aTextureCoord%3B%5Cnattribute%20vec4%20aColor%3B%5Cn%5Cnuniform%20float%20strength%3B%5Cnuniform%20mat3%20projectionMatrix%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cnvarying%20vec2%20vBlurTexCoords%5B6%5D%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20vec3%28%28aVertexPosition%29%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%5Cn%20%20%20%20vTextureCoord%20%3D%20aTextureCoord%3B%5Cn%5Cn%20%20%20%20vBlurTexCoords%5B%200%5D%20%3D%20aTextureCoord%20%2B%20vec2%28%2D0%2E012%20%2A%20strength%2C%200%2E0%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%201%5D%20%3D%20aTextureCoord%20%2B%20vec2%28%2D0%2E008%20%2A%20strength%2C%200%2E0%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%202%5D%20%3D%20aTextureCoord%20%2B%20vec2%28%2D0%2E004%20%2A%20strength%2C%200%2E0%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%203%5D%20%3D%20aTextureCoord%20%2B%20vec2%28%200%2E004%20%2A%20strength%2C%200%2E0%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%204%5D%20%3D%20aTextureCoord%20%2B%20vec2%28%200%2E008%20%2A%20strength%2C%200%2E0%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%205%5D%20%3D%20aTextureCoord%20%2B%20vec2%28%200%2E012%20%2A%20strength%2C%200%2E0%29%3B%5Cn%5Cn%20%20%20%20vColor%20%3D%20vec4%28aColor%2Ergb%20%2A%20aColor%2Ea%2C%20aColor%2Ea%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20lowp%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec2%20vBlurTexCoords%5B6%5D%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20gl%5FFragColor%20%3D%20vec4%280%2E0%29%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%200%5D%29%2A0%2E004431848411938341%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%201%5D%29%2A0%2E05399096651318985%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%202%5D%29%2A0%2E2419707245191454%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vTextureCoord%20%20%20%20%20%29%2A0%2E3989422804014327%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%203%5D%29%2A0%2E2419707245191454%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%204%5D%29%2A0%2E05399096651318985%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%205%5D%29%2A0%2E004431848411938341%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20strength%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%201%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20number%20of%20passes%20for%20blur%2E%20More%20passes%20means%20higher%20quaility%20bluring%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%201%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Epasses%20%3D%201%3B%0A%0A%20%20%20%20this%2Estrength%20%3D%204%3B%0A%7D%0A%0ABlurXFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ABlurXFilter%2Eprototype%2Econstructor%20%3D%20BlurXFilter%3B%0Amodule%2Eexports%20%3D%20BlurXFilter%3B%0A%0ABlurXFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%2C%20clear%29%0A%7B%0A%20%20%20%20var%20shader%20%3D%20this%2EgetShader%28renderer%29%3B%0A%0A%20%20%20%20this%2Euniforms%2Estrength%2Evalue%20%3D%20this%2Estrength%20%2F%204%20%2F%20this%2Epasses%20%2A%20%28input%2Eframe%2Ewidth%20%2F%20input%2Esize%2Ewidth%29%3B%0A%0A%20%20%20%20if%28this%2Epasses%20%3D%3D%3D%201%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20input%2C%20output%2C%20clear%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20renderTarget%20%3D%20renderer%2EfilterManager%2EgetRenderTarget%28true%29%3B%0A%20%20%20%20%20%20%20%20var%20flip%20%3D%20input%3B%0A%20%20%20%20%20%20%20%20var%20flop%20%3D%20renderTarget%3B%0A%0A%20%20%20%20%20%20%20%20for%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Epasses%2D1%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20flip%2C%20flop%2C%20true%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20var%20temp%20%3D%20flop%3B%0A%20%20%20%20%20%20%20%20%20%20%20flop%20%3D%20flip%3B%0A%20%20%20%20%20%20%20%20%20%20%20flip%20%3D%20temp%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20flip%2C%20output%2C%20clear%29%3B%0A%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EreturnRenderTarget%28renderTarget%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0AObject%2EdefineProperties%28BlurXFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20both%20the%20blur%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EBlurXFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blur%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20this%2Estrength%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Epadding%20%3D%20%20Math%2Eabs%28value%29%20%2A%200%2E5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Estrength%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C85%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20The%20BlurYFilter%20applies%20a%20horizontal%20Gaussian%20blur%20to%20an%20object%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20BlurYFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20%22attribute%20vec2%20aVertexPosition%3B%5Cnattribute%20vec2%20aTextureCoord%3B%5Cnattribute%20vec4%20aColor%3B%5Cn%5Cnuniform%20float%20strength%3B%5Cnuniform%20mat3%20projectionMatrix%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cnvarying%20vec2%20vBlurTexCoords%5B6%5D%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20vec3%28%28aVertexPosition%29%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%5Cn%20%20%20%20vTextureCoord%20%3D%20aTextureCoord%3B%5Cn%5Cn%20%20%20%20vBlurTexCoords%5B%200%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%2D0%2E012%20%2A%20strength%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%201%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%2D0%2E008%20%2A%20strength%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%202%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%2D0%2E004%20%2A%20strength%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%203%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%200%2E004%20%2A%20strength%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%204%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%200%2E008%20%2A%20strength%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%205%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%200%2E012%20%2A%20strength%29%3B%5Cn%5Cn%20%20%20vColor%20%3D%20vec4%28aColor%2Ergb%20%2A%20aColor%2Ea%2C%20aColor%2Ea%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20lowp%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec2%20vBlurTexCoords%5B6%5D%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20gl%5FFragColor%20%3D%20vec4%280%2E0%29%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%200%5D%29%2A0%2E004431848411938341%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%201%5D%29%2A0%2E05399096651318985%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%202%5D%29%2A0%2E2419707245191454%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vTextureCoord%20%20%20%20%20%29%2A0%2E3989422804014327%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%203%5D%29%2A0%2E2419707245191454%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%204%5D%29%2A0%2E05399096651318985%3B%5Cn%20%20%20%20gl%5FFragColor%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%205%5D%29%2A0%2E004431848411938341%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20strength%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%201%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20this%2Epasses%20%3D%201%3B%0A%20%20%20%20this%2Estrength%20%3D%204%3B%0A%7D%0A%0ABlurYFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ABlurYFilter%2Eprototype%2Econstructor%20%3D%20BlurYFilter%3B%0Amodule%2Eexports%20%3D%20BlurYFilter%3B%0A%0ABlurYFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%2C%20clear%29%0A%7B%0A%20%20%20%20var%20shader%20%3D%20this%2EgetShader%28renderer%29%3B%0A%0A%20%20%20%20this%2Euniforms%2Estrength%2Evalue%20%3D%20Math%2Eabs%28this%2Estrength%29%20%2F%204%20%2F%20this%2Epasses%20%2A%20%28input%2Eframe%2Eheight%20%2F%20input%2Esize%2Eheight%29%3B%0A%0A%20%20%20%20if%28this%2Epasses%20%3D%3D%3D%201%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20input%2C%20output%2C%20clear%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20renderTarget%20%3D%20renderer%2EfilterManager%2EgetRenderTarget%28true%29%3B%0A%20%20%20%20%20%20%20%20var%20flip%20%3D%20input%3B%0A%20%20%20%20%20%20%20%20var%20flop%20%3D%20renderTarget%3B%0A%0A%20%20%20%20%20%20%20%20for%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Epasses%2D1%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20flip%2C%20flop%2C%20true%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20var%20temp%20%3D%20flop%3B%0A%20%20%20%20%20%20%20%20%20%20%20flop%20%3D%20flip%3B%0A%20%20%20%20%20%20%20%20%20%20%20flip%20%3D%20temp%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20flip%2C%20output%2C%20clear%29%3B%0A%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EreturnRenderTarget%28renderTarget%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0AObject%2EdefineProperties%28BlurYFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20both%20the%20blur%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EBlurYFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blur%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20this%2Estrength%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Epadding%20%3D%20Math%2Eabs%28value%29%20%2A%200%2E5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Estrength%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C86%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20A%20Smart%20Blur%20Filter%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20SmartBlurFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cnuniform%20vec2%20delta%3B%5Cn%5Cnfloat%20random%28vec3%20scale%2C%20float%20seed%29%5Cn%7B%5Cn%20%20%20%20return%20fract%28sin%28dot%28gl%5FFragCoord%2Exyz%20%2B%20seed%2C%20scale%29%29%20%2A%2043758%2E5453%20%2B%20seed%29%3B%5Cn%7D%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20vec4%20color%20%3D%20vec4%280%2E0%29%3B%5Cn%20%20%20%20float%20total%20%3D%200%2E0%3B%5Cn%5Cn%20%20%20%20float%20offset%20%3D%20random%28vec3%2812%2E9898%2C%2078%2E233%2C%20151%2E7182%29%2C%200%2E0%29%3B%5Cn%5Cn%20%20%20%20for%20%28float%20t%20%3D%20%2D30%2E0%3B%20t%20%3C%3D%2030%2E0%3B%20t%2B%2B%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20float%20percent%20%3D%20%28t%20%2B%20offset%20%2D%200%2E5%29%20%2F%2030%2E0%3B%5Cn%20%20%20%20%20%20%20%20float%20weight%20%3D%201%2E0%20%2D%20abs%28percent%29%3B%5Cn%20%20%20%20%20%20%20%20vec4%20sample%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%20%2B%20delta%20%2A%20percent%29%3B%5Cn%20%20%20%20%20%20%20%20sample%2Ergb%20%2A%3D%20sample%2Ea%3B%5Cn%20%20%20%20%20%20%20%20color%20%2B%3D%20sample%20%2A%20weight%3B%5Cn%20%20%20%20%20%20%20%20total%20%2B%3D%20weight%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%3D%20color%20%2F%20total%3B%5Cn%20%20%20%20gl%5FFragColor%2Ergb%20%2F%3D%20gl%5FFragColor%2Ea%20%2B%200%2E00001%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20delta%3A%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%200%2E1%2C%20y%3A%200%2E0%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0ASmartBlurFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ASmartBlurFilter%2Eprototype%2Econstructor%20%3D%20SmartBlurFilter%3B%0Amodule%2Eexports%20%3D%20SmartBlurFilter%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C87%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20The%20ColorMatrixFilter%20class%20lets%20you%20apply%20a%205x4%20matrix%20transformation%20on%20the%20RGBA%0A%20%2A%20color%20and%20alpha%20values%20of%20every%20pixel%20on%20your%20displayObject%20to%20produce%20a%20result%0A%20%2A%20with%20a%20new%20set%20of%20RGBA%20color%20and%20alpha%20values%2E%20It%27s%20pretty%20powerful%21%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20%20var%20colorMatrix%20%3D%20new%20PIXI%2EColorMatrixFilter%28%29%3B%0A%20%2A%20%20container%2Efilters%20%3D%20%5BcolorMatrix%5D%3B%0A%20%2A%20%20colorMatrix%2Econtrast%282%29%3B%0A%20%2A%20%60%60%60%0A%20%2A%20%40author%20Cl%C3%A9ment%20Chenebault%20%3Cclement%40goodboydigital%2Ecom%3E%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20ColorMatrixFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnuniform%20sampler2D%20uSampler%3B%5Cnuniform%20float%20m%5B25%5D%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%5Cn%20%20%20%20vec4%20c%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%2Er%20%3D%20%28m%5B0%5D%20%2A%20c%2Er%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Er%20%2B%3D%20%28m%5B1%5D%20%2A%20c%2Eg%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Er%20%2B%3D%20%28m%5B2%5D%20%2A%20c%2Eb%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Er%20%2B%3D%20%28m%5B3%5D%20%2A%20c%2Ea%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Er%20%2B%3D%20m%5B4%5D%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%2Eg%20%3D%20%28m%5B5%5D%20%2A%20c%2Er%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Eg%20%2B%3D%20%28m%5B6%5D%20%2A%20c%2Eg%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Eg%20%2B%3D%20%28m%5B7%5D%20%2A%20c%2Eb%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Eg%20%2B%3D%20%28m%5B8%5D%20%2A%20c%2Ea%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Eg%20%2B%3D%20m%5B9%5D%3B%5Cn%5Cn%20%20%20%20%20gl%5FFragColor%2Eb%20%3D%20%28m%5B10%5D%20%2A%20c%2Er%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Eb%20%2B%3D%20%28m%5B11%5D%20%2A%20c%2Eg%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Eb%20%2B%3D%20%28m%5B12%5D%20%2A%20c%2Eb%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Eb%20%2B%3D%20%28m%5B13%5D%20%2A%20c%2Ea%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Eb%20%2B%3D%20m%5B14%5D%3B%5Cn%5Cn%20%20%20%20%20gl%5FFragColor%2Ea%20%3D%20%28m%5B15%5D%20%2A%20c%2Er%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Ea%20%2B%3D%20%28m%5B16%5D%20%2A%20c%2Eg%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Ea%20%2B%3D%20%28m%5B17%5D%20%2A%20c%2Eb%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Ea%20%2B%3D%20%28m%5B18%5D%20%2A%20c%2Ea%29%3B%5Cn%20%20%20%20%20%20%20%20gl%5FFragColor%2Ea%20%2B%3D%20m%5B19%5D%3B%5Cn%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%271fv%27%2C%20value%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201%2C%200%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%201%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%200%2C%201%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0AColorMatrixFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0AColorMatrixFilter%2Eprototype%2Econstructor%20%3D%20ColorMatrixFilter%3B%0Amodule%2Eexports%20%3D%20ColorMatrixFilter%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Transforms%20current%20matrix%20and%20set%20the%20new%20one%0A%20%2A%0A%20%2A%20%40param%20matrix%20%7Bnumber%5B%5D%7D%20%28mat%205x4%29%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20if%20true%2C%20current%20matrix%20and%20matrix%20are%20multiplied%2E%20If%20false%2C%20just%20set%20the%20current%20matrix%20with%20%40param%20matrix%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2E%5FloadMatrix%20%3D%20function%20%28matrix%2C%20multiply%29%0A%7B%0A%20%20%20%20multiply%20%3D%20%21%21multiply%3B%0A%0A%20%20%20%20var%20newMatrix%20%3D%20matrix%3B%0A%0A%20%20%20%20if%20%28multiply%29%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5Fmultiply%28newMatrix%2C%20this%2Euniforms%2Em%2Evalue%2C%20matrix%29%3B%0A%20%20%20%20%20%20%20%20newMatrix%20%3D%20this%2E%5FcolorMatrix%28newMatrix%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20set%20the%20new%20matrix%0A%20%20%20%20this%2Euniforms%2Em%2Evalue%20%3D%20newMatrix%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Multiplies%20two%20mat5%27s%0A%20%2A%0A%20%2A%20%40param%20out%20%7Bnumber%5B%5D%7D%20%28mat%205x4%29%20the%20receiving%20matrix%0A%20%2A%20%40param%20a%20%7Bnumber%5B%5D%7D%20%28mat%205x4%29%20the%20first%20operand%0A%20%2A%20%40param%20b%20%7Bnumber%5B%5D%7D%20%28mat%205x4%29%20the%20second%20operand%0A%20%2A%20%40returns%20out%20%7Bnumber%5B%5D%7D%20%28mat%205x4%29%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2E%5Fmultiply%20%3D%20function%20%28out%2C%20a%2C%20b%29%0A%7B%0A%0A%20%20%20%20%2F%2F%20Red%20Channel%0A%20%20%20%20out%5B0%5D%20%3D%20%28a%5B0%5D%20%2A%20b%5B0%5D%29%20%2B%20%28a%5B1%5D%20%2A%20b%5B5%5D%29%20%2B%20%28a%5B2%5D%20%2A%20b%5B10%5D%29%20%2B%20%28a%5B3%5D%20%2A%20b%5B15%5D%29%3B%0A%20%20%20%20out%5B1%5D%20%3D%20%28a%5B0%5D%20%2A%20b%5B1%5D%29%20%2B%20%28a%5B1%5D%20%2A%20b%5B6%5D%29%20%2B%20%28a%5B2%5D%20%2A%20b%5B11%5D%29%20%2B%20%28a%5B3%5D%20%2A%20b%5B16%5D%29%3B%0A%20%20%20%20out%5B2%5D%20%3D%20%28a%5B0%5D%20%2A%20b%5B2%5D%29%20%2B%20%28a%5B1%5D%20%2A%20b%5B7%5D%29%20%2B%20%28a%5B2%5D%20%2A%20b%5B12%5D%29%20%2B%20%28a%5B3%5D%20%2A%20b%5B17%5D%29%3B%0A%20%20%20%20out%5B3%5D%20%3D%20%28a%5B0%5D%20%2A%20b%5B3%5D%29%20%2B%20%28a%5B1%5D%20%2A%20b%5B8%5D%29%20%2B%20%28a%5B2%5D%20%2A%20b%5B13%5D%29%20%2B%20%28a%5B3%5D%20%2A%20b%5B18%5D%29%3B%0A%20%20%20%20out%5B4%5D%20%3D%20%28a%5B0%5D%20%2A%20b%5B4%5D%29%20%2B%20%28a%5B1%5D%20%2A%20b%5B9%5D%29%20%2B%20%28a%5B2%5D%20%2A%20b%5B14%5D%29%20%2B%20%28a%5B3%5D%20%2A%20b%5B19%5D%29%3B%0A%0A%20%20%20%20%2F%2F%20Green%20Channel%0A%20%20%20%20out%5B5%5D%20%3D%20%28a%5B5%5D%20%2A%20b%5B0%5D%29%20%2B%20%28a%5B6%5D%20%2A%20b%5B5%5D%29%20%2B%20%28a%5B7%5D%20%2A%20b%5B10%5D%29%20%2B%20%28a%5B8%5D%20%2A%20b%5B15%5D%29%3B%0A%20%20%20%20out%5B6%5D%20%3D%20%28a%5B5%5D%20%2A%20b%5B1%5D%29%20%2B%20%28a%5B6%5D%20%2A%20b%5B6%5D%29%20%2B%20%28a%5B7%5D%20%2A%20b%5B11%5D%29%20%2B%20%28a%5B8%5D%20%2A%20b%5B16%5D%29%3B%0A%20%20%20%20out%5B7%5D%20%3D%20%28a%5B5%5D%20%2A%20b%5B2%5D%29%20%2B%20%28a%5B6%5D%20%2A%20b%5B7%5D%29%20%2B%20%28a%5B7%5D%20%2A%20b%5B12%5D%29%20%2B%20%28a%5B8%5D%20%2A%20b%5B17%5D%29%3B%0A%20%20%20%20out%5B8%5D%20%3D%20%28a%5B5%5D%20%2A%20b%5B3%5D%29%20%2B%20%28a%5B6%5D%20%2A%20b%5B8%5D%29%20%2B%20%28a%5B7%5D%20%2A%20b%5B13%5D%29%20%2B%20%28a%5B8%5D%20%2A%20b%5B18%5D%29%3B%0A%20%20%20%20out%5B9%5D%20%3D%20%28a%5B5%5D%20%2A%20b%5B4%5D%29%20%2B%20%28a%5B6%5D%20%2A%20b%5B9%5D%29%20%2B%20%28a%5B7%5D%20%2A%20b%5B14%5D%29%20%2B%20%28a%5B8%5D%20%2A%20b%5B19%5D%29%3B%0A%0A%20%20%20%20%2F%2F%20Blue%20Channel%0A%20%20%20%20out%5B10%5D%20%3D%20%28a%5B10%5D%20%2A%20b%5B0%5D%29%20%2B%20%28a%5B11%5D%20%2A%20b%5B5%5D%29%20%2B%20%28a%5B12%5D%20%2A%20b%5B10%5D%29%20%2B%20%28a%5B13%5D%20%2A%20b%5B15%5D%29%3B%0A%20%20%20%20out%5B11%5D%20%3D%20%28a%5B10%5D%20%2A%20b%5B1%5D%29%20%2B%20%28a%5B11%5D%20%2A%20b%5B6%5D%29%20%2B%20%28a%5B12%5D%20%2A%20b%5B11%5D%29%20%2B%20%28a%5B13%5D%20%2A%20b%5B16%5D%29%3B%0A%20%20%20%20out%5B12%5D%20%3D%20%28a%5B10%5D%20%2A%20b%5B2%5D%29%20%2B%20%28a%5B11%5D%20%2A%20b%5B7%5D%29%20%2B%20%28a%5B12%5D%20%2A%20b%5B12%5D%29%20%2B%20%28a%5B13%5D%20%2A%20b%5B17%5D%29%3B%0A%20%20%20%20out%5B13%5D%20%3D%20%28a%5B10%5D%20%2A%20b%5B3%5D%29%20%2B%20%28a%5B11%5D%20%2A%20b%5B8%5D%29%20%2B%20%28a%5B12%5D%20%2A%20b%5B13%5D%29%20%2B%20%28a%5B13%5D%20%2A%20b%5B18%5D%29%3B%0A%20%20%20%20out%5B14%5D%20%3D%20%28a%5B10%5D%20%2A%20b%5B4%5D%29%20%2B%20%28a%5B11%5D%20%2A%20b%5B9%5D%29%20%2B%20%28a%5B12%5D%20%2A%20b%5B14%5D%29%20%2B%20%28a%5B13%5D%20%2A%20b%5B19%5D%29%3B%0A%0A%20%20%20%20%2F%2F%20Alpha%20Channel%0A%20%20%20%20out%5B15%5D%20%3D%20%28a%5B15%5D%20%2A%20b%5B0%5D%29%20%2B%20%28a%5B16%5D%20%2A%20b%5B5%5D%29%20%2B%20%28a%5B17%5D%20%2A%20b%5B10%5D%29%20%2B%20%28a%5B18%5D%20%2A%20b%5B15%5D%29%3B%0A%20%20%20%20out%5B16%5D%20%3D%20%28a%5B15%5D%20%2A%20b%5B1%5D%29%20%2B%20%28a%5B16%5D%20%2A%20b%5B6%5D%29%20%2B%20%28a%5B17%5D%20%2A%20b%5B11%5D%29%20%2B%20%28a%5B18%5D%20%2A%20b%5B16%5D%29%3B%0A%20%20%20%20out%5B17%5D%20%3D%20%28a%5B15%5D%20%2A%20b%5B2%5D%29%20%2B%20%28a%5B16%5D%20%2A%20b%5B7%5D%29%20%2B%20%28a%5B17%5D%20%2A%20b%5B12%5D%29%20%2B%20%28a%5B18%5D%20%2A%20b%5B17%5D%29%3B%0A%20%20%20%20out%5B18%5D%20%3D%20%28a%5B15%5D%20%2A%20b%5B3%5D%29%20%2B%20%28a%5B16%5D%20%2A%20b%5B8%5D%29%20%2B%20%28a%5B17%5D%20%2A%20b%5B13%5D%29%20%2B%20%28a%5B18%5D%20%2A%20b%5B18%5D%29%3B%0A%20%20%20%20out%5B19%5D%20%3D%20%28a%5B15%5D%20%2A%20b%5B4%5D%29%20%2B%20%28a%5B16%5D%20%2A%20b%5B9%5D%29%20%2B%20%28a%5B17%5D%20%2A%20b%5B14%5D%29%20%2B%20%28a%5B18%5D%20%2A%20b%5B19%5D%29%3B%0A%0A%20%20%20%20return%20out%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Create%20a%20Float32%20Array%20and%20normalize%20the%20offset%20component%20to%200%2D1%0A%20%2A%0A%20%2A%20%40param%20matrix%20%7Bnumber%5B%5D%7D%20%28mat%205x4%29%0A%20%2A%20%40return%20m%20%7Bnumber%5B%5D%7D%20%28mat%205x4%29%20with%20all%20values%20between%200%2D1%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2E%5FcolorMatrix%20%3D%20function%20%28matrix%29%0A%7B%0A%20%20%20%20%2F%2F%20Create%20a%20Float32%20Array%20and%20normalize%20the%20offset%20component%20to%200%2D1%0A%20%20%20%20var%20m%20%3D%20new%20Float32Array%28matrix%29%3B%0A%20%20%20%20m%5B4%5D%20%2F%3D%20255%3B%0A%20%20%20%20m%5B9%5D%20%2F%3D%20255%3B%0A%20%20%20%20m%5B14%5D%20%2F%3D%20255%3B%0A%20%20%20%20m%5B19%5D%20%2F%3D%20255%3B%0A%0A%20%20%20%20return%20m%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Adjusts%20brightness%0A%20%2A%0A%20%2A%20%40param%20b%20%7Bnumber%7D%20value%20of%20the%20brigthness%20%280%20is%20black%29%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Ebrightness%20%3D%20function%20%28b%2C%20multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%20b%2C%200%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%20b%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%20b%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Set%20the%20matrices%20in%20grey%20scales%0A%20%2A%0A%20%2A%20%40param%20scale%20%7Bnumber%7D%20value%20of%20the%20grey%20%280%20is%20black%29%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Egreyscale%20%3D%20function%20%28scale%2C%20multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%20scale%2C%20scale%2C%20scale%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20scale%2C%20scale%2C%20scale%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20scale%2C%20scale%2C%20scale%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%2F%2FAmericanized%20alias%0AColorMatrixFilter%2Eprototype%2Egrayscale%20%3D%20ColorMatrixFilter%2Eprototype%2Egreyscale%3B%0A%0A%2F%2A%2A%0A%20%2A%20Set%20the%20black%20and%20white%20matrice%0A%20%2A%20Multiply%20the%20current%20matrix%0A%20%2A%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2EblackAndWhite%20%3D%20function%20%28multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%200%2E3%2C%200%2E6%2C%200%2E1%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2E3%2C%200%2E6%2C%200%2E1%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2E3%2C%200%2E6%2C%200%2E1%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Set%20the%20hue%20property%20of%20the%20color%0A%20%2A%0A%20%2A%20%40param%20rotation%20%7Bnumber%7D%20in%20degrees%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Ehue%20%3D%20function%20%28rotation%2C%20multiply%29%0A%7B%0A%20%20%20%20rotation%20%3D%20%28rotation%20%7C%7C%200%29%20%2F%20180%20%2A%20Math%2EPI%3B%0A%20%20%20%20var%20cos%20%3D%20Math%2Ecos%28rotation%29%2C%0A%20%20%20%20%20%20%20%20sin%20%3D%20Math%2Esin%28rotation%29%3B%0A%0A%20%20%20%20%2F%2F%20luminanceRed%2C%20luminanceGreen%2C%20luminanceBlue%0A%20%20%20%20var%20lumR%20%3D%200%2E213%2C%20%2F%2F%20or%200%2E3086%0A%20%20%20%20%20%20%20%20lumG%20%3D%200%2E715%2C%20%2F%2F%20or%200%2E6094%0A%20%20%20%20%20%20%20%20lumB%20%3D%200%2E072%3B%20%2F%2F%20or%200%2E0820%0A%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%20lumR%20%2B%20cos%20%2A%20%281%20%2D%20lumR%29%20%2B%20sin%20%2A%20%28%2DlumR%29%2C%20lumG%20%2B%20cos%20%2A%20%28%2DlumG%29%20%2B%20sin%20%2A%20%28%2DlumG%29%2C%20lumB%20%2B%20cos%20%2A%20%28%2DlumB%29%20%2B%20sin%20%2A%20%281%20%2D%20lumB%29%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20lumR%20%2B%20cos%20%2A%20%28%2DlumR%29%20%2B%20sin%20%2A%20%280%2E143%29%2C%20lumG%20%2B%20cos%20%2A%20%281%20%2D%20lumG%29%20%2B%20sin%20%2A%20%280%2E140%29%2C%20lumB%20%2B%20cos%20%2A%20%28%2DlumB%29%20%2B%20sin%20%2A%20%28%2D0%2E283%29%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20lumR%20%2B%20cos%20%2A%20%28%2DlumR%29%20%2B%20sin%20%2A%20%28%2D%281%20%2D%20lumR%29%29%2C%20lumG%20%2B%20cos%20%2A%20%28%2DlumG%29%20%2B%20sin%20%2A%20%28lumG%29%2C%20lumB%20%2B%20cos%20%2A%20%281%20%2D%20lumB%29%20%2B%20sin%20%2A%20%28lumB%29%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Set%20the%20contrast%20matrix%2C%20increase%20the%20separation%20between%20dark%20and%20bright%0A%20%2A%20Increase%20contrast%20%3A%20shadows%20darker%20and%20highlights%20brighter%0A%20%2A%20Decrease%20contrast%20%3A%20bring%20the%20shadows%20up%20and%20the%20highlights%20down%0A%20%2A%0A%20%2A%20%40param%20amount%20%7Bnumber%7D%20value%20of%20the%20contrast%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Econtrast%20%3D%20function%20%28amount%2C%20multiply%29%0A%7B%0A%20%20%20%20var%20v%20%3D%20%28amount%20%7C%7C%200%29%20%2B%201%3B%0A%20%20%20%20var%20o%20%3D%20%2D128%20%2A%20%28v%20%2D%201%29%3B%0A%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%20v%2C%200%2C%200%2C%200%2C%20o%2C%0A%20%20%20%20%20%20%20%200%2C%20v%2C%200%2C%200%2C%20o%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%20v%2C%200%2C%20o%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Set%20the%20saturation%20matrix%2C%20increase%20the%20separation%20between%20colors%0A%20%2A%20Increase%20saturation%20%3A%20increase%20contrast%2C%20brightness%2C%20and%20sharpness%0A%20%2A%0A%20%2A%20%40param%20amount%20%7Bnumber%7D%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Esaturate%20%3D%20function%20%28amount%2C%20multiply%29%0A%7B%0A%20%20%20%20var%20x%20%3D%20%28amount%20%7C%7C%200%29%20%2A%202%20%2F%203%20%2B%201%3B%0A%20%20%20%20var%20y%20%3D%20%28%28x%20%2D%201%29%20%2A%20%2D0%2E5%29%3B%0A%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%20x%2C%20y%2C%20y%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20y%2C%20x%2C%20y%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20y%2C%20y%2C%20x%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Desaturate%20image%20%28remove%20color%29%0A%20%2A%0A%20%2A%20Call%20the%20saturate%20function%0A%20%2A%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Edesaturate%20%3D%20function%20%28multiply%29%20%2F%2F%20jshint%20unused%3Afalse%0A%7B%0A%20%20%20%20this%2Esaturate%28%2D1%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Negative%20image%20%28inverse%20of%20classic%20rgb%20matrix%29%0A%20%2A%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Enegative%20%3D%20function%20%28multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%200%2C%201%2C%201%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%201%2C%200%2C%201%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%201%2C%201%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sepia%20image%0A%20%2A%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Esepia%20%3D%20function%20%28multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%200%2E393%2C%200%2E7689999%2C%200%2E18899999%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2E349%2C%200%2E6859999%2C%200%2E16799999%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2E272%2C%200%2E5339999%2C%200%2E13099999%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Color%20motion%20picture%20process%20invented%20in%201916%20%28thanks%20Dominic%20Szablewski%29%0A%20%2A%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Etechnicolor%20%3D%20function%20%28multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%201%2E9125277891456083%2C%20%2D0%2E8545344976951645%2C%20%2D0%2E09155508482755585%2C%200%2C%2011%2E793603434377337%2C%0A%20%20%20%20%20%20%20%20%2D0%2E3087833385928097%2C%201%2E7658908555458428%2C%20%2D0%2E10601743074722245%2C%200%2C%20%2D70%2E35205161461398%2C%0A%20%20%20%20%20%20%20%20%2D0%2E231103377548616%2C%20%2D0%2E7501899197440212%2C%201%2E847597816108189%2C%200%2C%2030%2E950940869491138%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Polaroid%20filter%0A%20%2A%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Epolaroid%20%3D%20function%20%28multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%201%2E438%2C%20%2D0%2E062%2C%20%2D0%2E062%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20%2D0%2E122%2C%201%2E378%2C%20%2D0%2E122%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20%2D0%2E016%2C%20%2D0%2E016%2C%201%2E483%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Filter%20who%20transforms%20%3A%20Red%20%2D%3E%20Blue%20and%20Blue%20%2D%3E%20Red%0A%20%2A%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2EtoBGR%20%3D%20function%20%28multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%200%2C%200%2C%201%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%201%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%201%2C%200%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Color%20reversal%20film%20introduced%20by%20Eastman%20Kodak%20in%201935%2E%20%28thanks%20Dominic%20Szablewski%29%0A%20%2A%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Ekodachrome%20%3D%20function%20%28multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%201%2E1285582396593525%2C%20%2D0%2E3967382283601348%2C%20%2D0%2E03992559172921793%2C%200%2C%2063%2E72958762196502%2C%0A%20%20%20%20%20%20%20%20%2D0%2E16404339962244616%2C%201%2E0835251566291304%2C%20%2D0%2E05498805115633132%2C%200%2C%2024%2E732407896706203%2C%0A%20%20%20%20%20%20%20%20%2D0%2E16786010706155763%2C%20%2D0%2E5603416277695248%2C%201%2E6014850761964943%2C%200%2C%2035%2E62982807460946%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Brown%20delicious%20browni%20filter%20%28thanks%20Dominic%20Szablewski%29%0A%20%2A%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Ebrowni%20%3D%20function%20%28multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%200%2E5997023498159715%2C%200%2E34553243048391263%2C%20%2D0%2E2708298674538042%2C%200%2C%2047%2E43192855600873%2C%0A%20%20%20%20%20%20%20%20%2D0%2E037703249837783157%2C%200%2E8609577587992641%2C%200%2E15059552388459913%2C%200%2C%20%2D36%2E96841498319127%2C%0A%20%20%20%20%20%20%20%200%2E24113635128153335%2C%20%2D0%2E07441037908422492%2C%200%2E44972182064877153%2C%200%2C%20%2D7%2E562075277591283%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Vintage%20filter%20%28thanks%20Dominic%20Szablewski%29%0A%20%2A%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Evintage%20%3D%20function%20%28multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%200%2E6279345635605994%2C%200%2E3202183420819367%2C%20%2D0%2E03965408211312453%2C%200%2C%209%2E651285835294123%2C%0A%20%20%20%20%20%20%20%200%2E02578397704808868%2C%200%2E6441188644374771%2C%200%2E03259127616149294%2C%200%2C%207%2E462829176470591%2C%0A%20%20%20%20%20%20%20%200%2E0466055556782719%2C%20%2D0%2E0851232987247891%2C%200%2E5241648018700465%2C%200%2C%205%2E159190588235296%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20We%20don%27t%20know%20exactly%20what%20it%20does%2C%20kind%20of%20gradient%20map%2C%20but%20funny%20to%20play%20with%21%0A%20%2A%0A%20%2A%20%40param%20desaturation%20%7Bnumber%7D%0A%20%2A%20%40param%20toned%20%7Bnumber%7D%0A%20%2A%20%40param%20lightColor%20%7Bstring%7D%20%28example%20%3A%20%220xFFE580%22%29%0A%20%2A%20%40param%20darkColor%20%7Bstring%7D%20%20%28example%20%3A%20%220xFFE580%22%29%0A%20%2A%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2EcolorTone%20%3D%20function%20%28desaturation%2C%20toned%2C%20lightColor%2C%20darkColor%2C%20multiply%29%0A%7B%0A%20%20%20%20desaturation%20%3D%20desaturation%20%7C%7C%200%2E2%3B%0A%20%20%20%20toned%20%3D%20toned%20%7C%7C%200%2E15%3B%0A%20%20%20%20lightColor%20%3D%20lightColor%20%7C%7C%200xFFE580%3B%0A%20%20%20%20darkColor%20%3D%20darkColor%20%7C%7C%200x338000%3B%0A%0A%20%20%20%20var%20lR%20%3D%20%28%28lightColor%20%3E%3E%2016%29%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20var%20lG%20%3D%20%28%28lightColor%20%3E%3E%208%29%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20var%20lB%20%3D%20%28lightColor%20%26%200xFF%29%20%2F%20255%3B%0A%0A%20%20%20%20var%20dR%20%3D%20%28%28darkColor%20%3E%3E%2016%29%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20var%20dG%20%3D%20%28%28darkColor%20%3E%3E%208%29%20%26%200xFF%29%20%2F%20255%3B%0A%20%20%20%20var%20dB%20%3D%20%28darkColor%20%26%200xFF%29%20%2F%20255%3B%0A%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%200%2E3%2C%200%2E59%2C%200%2E11%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20lR%2C%20lG%2C%20lB%2C%20desaturation%2C%200%2C%0A%20%20%20%20%20%20%20%20dR%2C%20dG%2C%20dB%2C%20toned%2C%200%2C%0A%20%20%20%20%20%20%20%20lR%20%2D%20dR%2C%20lG%20%2D%20dG%2C%20lB%20%2D%20dB%2C%200%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Night%20effect%0A%20%2A%0A%20%2A%20%40param%20intensity%20%7Bnumber%7D%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Enight%20%3D%20function%20%28intensity%2C%20multiply%29%0A%7B%0A%20%20%20%20intensity%20%3D%20intensity%20%7C%7C%200%2E1%3B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%20intensity%20%2A%20%28%20%2D2%2E0%29%2C%20%2Dintensity%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20%2Dintensity%2C%200%2C%20intensity%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%20intensity%2C%20intensity%20%2A%202%2E0%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%0A%2F%2A%0A%20%2A%20Predator%20effect%0A%20%2A%0A%20%2A%20Erase%20the%20current%20matrix%20by%20setting%20a%20new%20indepent%20one%0A%20%2A%0A%20%2A%20%40param%20amount%20%7Bnumber%7D%20how%20much%20the%20predator%20feels%20his%20future%20victim%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Epredator%20%3D%20function%20%28amount%2C%20multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%2011%2E224130630493164%20%2A%20amount%2C%20%2D4%2E794486999511719%20%2A%20amount%2C%20%2D2%2E8746118545532227%20%2A%20amount%2C%200%20%2A%20amount%2C%200%2E40342438220977783%20%2A%20amount%2C%0A%20%20%20%20%20%20%20%20%2D3%2E6330697536468506%20%2A%20amount%2C%209%2E193157196044922%20%2A%20amount%2C%20%2D2%2E951810836791992%20%2A%20amount%2C%200%20%2A%20amount%2C%20%2D1%2E316135048866272%20%2A%20amount%2C%0A%20%20%20%20%20%20%20%20%2D3%2E2184197902679443%20%2A%20amount%2C%20%2D4%2E2375030517578125%20%2A%20amount%2C%207%2E476448059082031%20%2A%20amount%2C%200%20%2A%20amount%2C%200%2E8044459223747253%20%2A%20amount%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20LSD%20effect%0A%20%2A%0A%20%2A%20Multiply%20the%20current%20matrix%0A%20%2A%0A%20%2A%20%40param%20amount%20%7Bnumber%7D%20How%20crazy%20is%20your%20effect%0A%20%2A%20%40param%20multiply%20%7Bboolean%7D%20refer%20to%20%2E%5FloadMatrix%28%29%20method%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Elsd%20%3D%20function%20%28multiply%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%202%2C%20%2D0%2E4%2C%200%2E5%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20%2D0%2E5%2C%202%2C%20%2D0%2E4%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%20%2D0%2E4%2C%20%2D0%2E5%2C%203%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20multiply%29%3B%0A%7D%3B%0A%0A%2F%2A%0A%20%2A%20Erase%20the%20current%20matrix%20by%20setting%20the%20default%20one%0A%20%2A%0A%20%2A%2F%0AColorMatrixFilter%2Eprototype%2Ereset%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20matrix%20%3D%20%5B%0A%20%20%20%20%20%20%20%201%2C%200%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%201%2C%200%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%201%2C%200%2C%200%2C%0A%20%20%20%20%20%20%20%200%2C%200%2C%200%2C%201%2C%200%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20this%2E%5FloadMatrix%28matrix%2C%20false%29%3B%0A%7D%3B%0A%0A%0AObject%2EdefineProperties%28ColorMatrixFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20matrix%20of%20the%20color%20matrix%20filter%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%5B%5D%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EColorMatrixFilter%23%0A%20%20%20%20%20%2A%20%40default%20%5B1%2C%200%2C%200%2C%200%2C%200%2C%200%2C%201%2C%200%2C%200%2C%200%2C%200%2C%200%2C%201%2C%200%2C%200%2C%200%2C%200%2C%200%2C%201%2C%200%5D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20matrix%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Em%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Em%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C88%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20This%20lowers%20the%20color%20depth%20of%20your%20image%20by%20the%20given%20amount%2C%20producing%20an%20image%20with%20a%20smaller%20palette%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20ColorStepFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cnuniform%20float%20step%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20vec4%20color%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%3B%5Cn%5Cn%20%20%20%20color%20%3D%20floor%28color%20%2A%20step%29%20%2F%20step%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%3D%20color%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20step%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%205%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0AColorStepFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0AColorStepFilter%2Eprototype%2Econstructor%20%3D%20ColorStepFilter%3B%0Amodule%2Eexports%20%3D%20ColorStepFilter%3B%0A%0AObject%2EdefineProperties%28ColorStepFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20number%20of%20steps%20to%20reduce%20the%20palette%20by%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EColorStepFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20step%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Estep%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Estep%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C89%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20The%20ConvolutionFilter%20class%20applies%20a%20matrix%20convolution%20filter%20effect%2E%0A%20%2A%20A%20convolution%20combines%20pixels%20in%20the%20input%20image%20with%20neighboring%20pixels%20to%20produce%20a%20new%20image%2E%0A%20%2A%20A%20wide%20variety%20of%20image%20effects%20can%20be%20achieved%20through%20convolutions%2C%20including%20blurring%2C%20edge%0A%20%2A%20detection%2C%20sharpening%2C%20embossing%2C%20and%20beveling%2E%20The%20matrix%20should%20be%20specified%20as%20a%209%20point%20Array%2E%0A%20%2A%20See%20http%3A%2F%2Fdocs%2Egimp%2Eorg%2Fen%2Fplug%2Din%2Dconvmatrix%2Ehtml%20for%20more%20info%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%20%40param%20matrix%20%7Bnumber%5B%5D%7D%20An%20array%20of%20values%20used%20for%20matrix%20transformation%2E%20Specified%20as%20a%209%20point%20Array%2E%0A%20%2A%20%40param%20width%20%7Bnumber%7D%20Width%20of%20the%20object%20you%20are%20transforming%0A%20%2A%20%40param%20height%20%7Bnumber%7D%20Height%20of%20the%20object%20you%20are%20transforming%0A%20%2A%2F%0Afunction%20ConvolutionFilter%28matrix%2C%20width%2C%20height%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20mediump%20vec2%20vTextureCoord%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cnuniform%20vec2%20texelSize%3B%5Cnuniform%20float%20matrix%5B9%5D%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20vec4%20c11%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%20%2D%20texelSize%29%3B%20%2F%2F%20top%20left%5Cn%20%20%20vec4%20c12%20%3D%20texture2D%28uSampler%2C%20vec2%28vTextureCoord%2Ex%2C%20vTextureCoord%2Ey%20%2D%20texelSize%2Ey%29%29%3B%20%2F%2F%20top%20center%5Cn%20%20%20vec4%20c13%20%3D%20texture2D%28uSampler%2C%20vec2%28vTextureCoord%2Ex%20%2B%20texelSize%2Ex%2C%20vTextureCoord%2Ey%20%2D%20texelSize%2Ey%29%29%3B%20%2F%2F%20top%20right%5Cn%5Cn%20%20%20vec4%20c21%20%3D%20texture2D%28uSampler%2C%20vec2%28vTextureCoord%2Ex%20%2D%20texelSize%2Ex%2C%20vTextureCoord%2Ey%29%29%3B%20%2F%2F%20mid%20left%5Cn%20%20%20vec4%20c22%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%3B%20%2F%2F%20mid%20center%5Cn%20%20%20vec4%20c23%20%3D%20texture2D%28uSampler%2C%20vec2%28vTextureCoord%2Ex%20%2B%20texelSize%2Ex%2C%20vTextureCoord%2Ey%29%29%3B%20%2F%2F%20mid%20right%5Cn%5Cn%20%20%20vec4%20c31%20%3D%20texture2D%28uSampler%2C%20vec2%28vTextureCoord%2Ex%20%2D%20texelSize%2Ex%2C%20vTextureCoord%2Ey%20%2B%20texelSize%2Ey%29%29%3B%20%2F%2F%20bottom%20left%5Cn%20%20%20vec4%20c32%20%3D%20texture2D%28uSampler%2C%20vec2%28vTextureCoord%2Ex%2C%20vTextureCoord%2Ey%20%2B%20texelSize%2Ey%29%29%3B%20%2F%2F%20bottom%20center%5Cn%20%20%20vec4%20c33%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%20%2B%20texelSize%29%3B%20%2F%2F%20bottom%20right%5Cn%5Cn%20%20%20gl%5FFragColor%20%3D%5Cn%20%20%20%20%20%20%20c11%20%2A%20matrix%5B0%5D%20%2B%20c12%20%2A%20matrix%5B1%5D%20%2B%20c13%20%2A%20matrix%5B2%5D%20%2B%5Cn%20%20%20%20%20%20%20c21%20%2A%20matrix%5B3%5D%20%2B%20c22%20%2A%20matrix%5B4%5D%20%2B%20c23%20%2A%20matrix%5B5%5D%20%2B%5Cn%20%20%20%20%20%20%20c31%20%2A%20matrix%5B6%5D%20%2B%20c32%20%2A%20matrix%5B7%5D%20%2B%20c33%20%2A%20matrix%5B8%5D%3B%5Cn%5Cn%20%20%20gl%5FFragColor%2Ea%20%3D%20c22%2Ea%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20matrix%3A%20%20%20%20%20%7B%20type%3A%20%271fv%27%2C%20value%3A%20new%20Float32Array%28matrix%29%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20texelSize%3A%20%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%201%20%2F%20width%2C%20y%3A%201%20%2F%20height%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0AConvolutionFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0AConvolutionFilter%2Eprototype%2Econstructor%20%3D%20ConvolutionFilter%3B%0Amodule%2Eexports%20%3D%20ConvolutionFilter%3B%0A%0AObject%2EdefineProperties%28ConvolutionFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20An%20array%20of%20values%20used%20for%20matrix%20transformation%2E%20Specified%20as%20a%209%20point%20Array%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%5B%5D%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EConvolutionFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20matrix%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Ematrix%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Ematrix%2Evalue%20%3D%20new%20Float32Array%28value%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Width%20of%20the%20object%20you%20are%20transforming%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EConvolutionFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20width%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%201%2Fthis%2Euniforms%2EtexelSize%2Evalue%2Ex%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2EtexelSize%2Evalue%2Ex%20%3D%201%2Fvalue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Height%20of%20the%20object%20you%20are%20transforming%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EConvolutionFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20height%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%201%2Fthis%2Euniforms%2EtexelSize%2Evalue%2Ey%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2EtexelSize%2Evalue%2Ey%20%3D%201%2Fvalue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C90%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20A%20Cross%20Hatch%20effect%20filter%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20CrossHatchFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20float%20lum%20%3D%20length%28texture2D%28uSampler%2C%20vTextureCoord%2Exy%29%2Ergb%29%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%3D%20vec4%281%2E0%2C%201%2E0%2C%201%2E0%2C%201%2E0%29%3B%5Cn%5Cn%20%20%20%20if%20%28lum%20%3C%201%2E00%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28mod%28gl%5FFragCoord%2Ex%20%2B%20gl%5FFragCoord%2Ey%2C%2010%2E0%29%20%3D%3D%200%2E0%29%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gl%5FFragColor%20%3D%20vec4%280%2E0%2C%200%2E0%2C%200%2E0%2C%201%2E0%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20if%20%28lum%20%3C%200%2E75%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28mod%28gl%5FFragCoord%2Ex%20%2D%20gl%5FFragCoord%2Ey%2C%2010%2E0%29%20%3D%3D%200%2E0%29%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gl%5FFragColor%20%3D%20vec4%280%2E0%2C%200%2E0%2C%200%2E0%2C%201%2E0%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20if%20%28lum%20%3C%200%2E50%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28mod%28gl%5FFragCoord%2Ex%20%2B%20gl%5FFragCoord%2Ey%20%2D%205%2E0%2C%2010%2E0%29%20%3D%3D%200%2E0%29%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gl%5FFragColor%20%3D%20vec4%280%2E0%2C%200%2E0%2C%200%2E0%2C%201%2E0%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20if%20%28lum%20%3C%200%2E3%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20%28mod%28gl%5FFragCoord%2Ex%20%2D%20gl%5FFragCoord%2Ey%20%2D%205%2E0%2C%2010%2E0%29%20%3D%3D%200%2E0%29%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20gl%5FFragColor%20%3D%20vec4%280%2E0%2C%200%2E0%2C%200%2E0%2C%201%2E0%29%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%0A%20%20%20%20%29%3B%0A%7D%0A%0ACrossHatchFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ACrossHatchFilter%2Eprototype%2Econstructor%20%3D%20CrossHatchFilter%3B%0Amodule%2Eexports%20%3D%20CrossHatchFilter%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C91%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20The%20DisplacementFilter%20class%20uses%20the%20pixel%20values%20from%20the%20specified%20texture%20%28called%20the%20displacement%20map%29%20to%20perform%20a%20displacement%20of%20an%20object%2E%0A%20%2A%20You%20can%20use%20this%20filter%20to%20apply%20all%20manor%20of%20crazy%20warping%20effects%0A%20%2A%20Currently%20the%20r%20property%20of%20the%20texture%20is%20used%20to%20offset%20the%20x%20and%20the%20g%20property%20of%20the%20texture%20is%20used%20to%20offset%20the%20y%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%20%40param%20sprite%20%7BPIXI%2ESprite%7D%20the%20sprite%20used%20for%20the%20displacement%20map%2E%20%28make%20sure%20its%20added%20to%20the%20scene%21%29%0A%20%2A%2F%0Afunction%20DisplacementFilter%28sprite%2C%20scale%29%0A%7B%0A%20%20%20%20var%20maskMatrix%20%3D%20new%20core%2EMatrix%28%29%3B%0A%20%20%20%20sprite%2Erenderable%20%3D%20false%3B%0A%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20%22attribute%20vec2%20aVertexPosition%3B%5Cnattribute%20vec2%20aTextureCoord%3B%5Cnattribute%20vec4%20aColor%3B%5Cn%5Cnuniform%20mat3%20projectionMatrix%3B%5Cnuniform%20mat3%20otherMatrix%3B%5Cn%5Cnvarying%20vec2%20vMapCoord%3B%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20vec3%28aVertexPosition%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%5Cn%20%20%20vTextureCoord%20%3D%20aTextureCoord%3B%5Cn%20%20%20vMapCoord%20%3D%20%28%20otherMatrix%20%2A%20vec3%28%20aTextureCoord%2C%201%2E0%29%20%20%29%2Exy%3B%5Cn%20%20%20vColor%20%3D%20vec4%28aColor%2Ergb%20%2A%20aColor%2Ea%2C%20aColor%2Ea%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vMapCoord%3B%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnuniform%20vec2%20scale%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cnuniform%20sampler2D%20mapSampler%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20vec4%20map%20%3D%20%20texture2D%28mapSampler%2C%20vMapCoord%29%3B%5Cn%5Cn%20%20%20map%20%2D%3D%200%2E5%3B%5Cn%20%20%20map%2Exy%20%2A%3D%20scale%3B%5Cn%5Cn%20%20%20gl%5FFragColor%20%3D%20texture2D%28uSampler%2C%20vec2%28vTextureCoord%2Ex%20%2B%20map%2Ex%2C%20vTextureCoord%2Ey%20%2B%20map%2Ey%29%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mapSampler%3A%20%20%20%20%20%7B%20type%3A%20%27sampler2D%27%2C%20value%3A%20sprite%2Etexture%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20otherMatrix%3A%20%20%20%20%7B%20type%3A%20%27mat3%27%2C%20value%3A%20maskMatrix%2EtoArray%28true%29%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20scale%3A%20%20%20%20%20%20%20%20%20%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%201%2C%20y%3A%201%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20this%2EmaskSprite%20%3D%20sprite%3B%0A%20%20%20%20this%2EmaskMatrix%20%3D%20maskMatrix%3B%0A%0A%20%20%20%20if%20%28scale%20%3D%3D%3D%20null%20%7C%7C%20scale%20%3D%3D%3D%20undefined%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20scale%20%3D%2020%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Escale%20%3D%20new%20core%2EPoint%28scale%2C%20scale%29%3B%0A%7D%0A%0ADisplacementFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ADisplacementFilter%2Eprototype%2Econstructor%20%3D%20DisplacementFilter%3B%0Amodule%2Eexports%20%3D%20DisplacementFilter%3B%0A%0ADisplacementFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%29%0A%7B%0A%20%20%20%20var%20filterManager%20%3D%20renderer%2EfilterManager%3B%0A%0A%20%20%20%20filterManager%2EcalculateMappedMatrix%28input%2Eframe%2C%20this%2EmaskSprite%2C%20this%2EmaskMatrix%29%3B%0A%0A%20%20%20%20this%2Euniforms%2EotherMatrix%2Evalue%20%3D%20this%2EmaskMatrix%2EtoArray%28true%29%3B%0A%20%20%20%20this%2Euniforms%2Escale%2Evalue%2Ex%20%3D%20this%2Escale%2Ex%20%2A%20%281%2Finput%2Eframe%2Ewidth%29%3B%0A%20%20%20%20this%2Euniforms%2Escale%2Evalue%2Ey%20%3D%20this%2Escale%2Ey%20%2A%20%281%2Finput%2Eframe%2Eheight%29%3B%0A%0A%20%20%20%20var%20shader%20%3D%20this%2EgetShader%28renderer%29%3B%0A%20%20%20%20%20%2F%2F%20draw%20the%20filter%2E%2E%2E%0A%20%20%20%20filterManager%2EapplyFilter%28shader%2C%20input%2C%20output%29%3B%0A%7D%3B%0A%0A%0AObject%2EdefineProperties%28DisplacementFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20texture%20used%20for%20the%20displacement%20map%2E%20Must%20be%20power%20of%202%20sized%20texture%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ETexture%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EDisplacementFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20map%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2EmapSampler%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2EmapSampler%2Evalue%20%3D%20value%3B%0A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C92%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Mat%20Groves%20http%3A%2F%2Fmatgroves%2Ecom%2F%20%40Doormat23%0A%20%2A%20original%20filter%3A%20https%3A%2F%2Fgithub%2Ecom%2Fevanw%2Fglfx%2Ejs%2Fblob%2Fmaster%2Fsrc%2Ffilters%2Ffun%2Fdotscreen%2Ejs%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20This%20filter%20applies%20a%20dotscreen%20effect%20making%20display%20objects%20appear%20to%20be%20made%20out%20of%0A%20%2A%20black%20and%20white%20halftone%20dots%20like%20an%20old%20printer%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20DotScreenFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnuniform%20vec4%20dimensions%3B%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cnuniform%20float%20angle%3B%5Cnuniform%20float%20scale%3B%5Cn%5Cnfloat%20pattern%28%29%5Cn%7B%5Cn%20%20%20float%20s%20%3D%20sin%28angle%29%2C%20c%20%3D%20cos%28angle%29%3B%5Cn%20%20%20vec2%20tex%20%3D%20vTextureCoord%20%2A%20dimensions%2Exy%3B%5Cn%20%20%20vec2%20point%20%3D%20vec2%28%5Cn%20%20%20%20%20%20%20c%20%2A%20tex%2Ex%20%2D%20s%20%2A%20tex%2Ey%2C%5Cn%20%20%20%20%20%20%20s%20%2A%20tex%2Ex%20%2B%20c%20%2A%20tex%2Ey%5Cn%20%20%20%29%20%2A%20scale%3B%5Cn%20%20%20return%20%28sin%28point%2Ex%29%20%2A%20sin%28point%2Ey%29%29%20%2A%204%2E0%3B%5Cn%7D%5Cn%5Cnvoid%20main%28%29%5Cn%7B%5Cn%20%20%20vec4%20color%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%3B%5Cn%20%20%20float%20average%20%3D%20%28color%2Er%20%2B%20color%2Eg%20%2B%20color%2Eb%29%20%2F%203%2E0%3B%5Cn%20%20%20gl%5FFragColor%20%3D%20vec4%28vec3%28average%20%2A%2010%2E0%20%2D%205%2E0%20%2B%20pattern%28%29%29%2C%20color%2Ea%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20scale%3A%20%20%20%20%20%20%7B%20type%3A%20%271f%27%2C%20value%3A%201%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20angle%3A%20%20%20%20%20%20%7B%20type%3A%20%271f%27%2C%20value%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dimensions%3A%20%7B%20type%3A%20%274fv%27%2C%20value%3A%20%5B0%2C%200%2C%200%2C%200%5D%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0ADotScreenFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ADotScreenFilter%2Eprototype%2Econstructor%20%3D%20DotScreenFilter%3B%0Amodule%2Eexports%20%3D%20DotScreenFilter%3B%0A%0AObject%2EdefineProperties%28DotScreenFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20scale%20of%20the%20effect%2E%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EDotScreenFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20scale%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Escale%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Escale%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20radius%20of%20the%20effect%2E%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EDotScreenFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20angle%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Eangle%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Eangle%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C93%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20The%20BlurYTintFilter%20applies%20a%20vertical%20Gaussian%20blur%20to%20an%20object%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20BlurYTintFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20%22attribute%20vec2%20aVertexPosition%3B%5Cnattribute%20vec2%20aTextureCoord%3B%5Cnattribute%20vec4%20aColor%3B%5Cn%5Cnuniform%20float%20strength%3B%5Cnuniform%20vec2%20offset%3B%5Cn%5Cnuniform%20mat3%20projectionMatrix%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cnvarying%20vec2%20vBlurTexCoords%5B6%5D%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20vec3%28%28aVertexPosition%2Boffset%29%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%5Cn%20%20%20%20vTextureCoord%20%3D%20aTextureCoord%3B%5Cn%5Cn%20%20%20%20vBlurTexCoords%5B%200%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%2D0%2E012%20%2A%20strength%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%201%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%2D0%2E008%20%2A%20strength%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%202%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%2D0%2E004%20%2A%20strength%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%203%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%200%2E004%20%2A%20strength%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%204%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%200%2E008%20%2A%20strength%29%3B%5Cn%20%20%20%20vBlurTexCoords%5B%205%5D%20%3D%20aTextureCoord%20%2B%20vec2%280%2E0%2C%20%200%2E012%20%2A%20strength%29%3B%5Cn%5Cn%20%20%20vColor%20%3D%20vec4%28aColor%2Ergb%20%2A%20aColor%2Ea%2C%20aColor%2Ea%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20lowp%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec2%20vBlurTexCoords%5B6%5D%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnuniform%20vec3%20color%3B%5Cnuniform%20float%20alpha%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20vec4%20sum%20%3D%20vec4%280%2E0%29%3B%5Cn%5Cn%20%20%20%20sum%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%200%5D%29%2A0%2E004431848411938341%3B%5Cn%20%20%20%20sum%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%201%5D%29%2A0%2E05399096651318985%3B%5Cn%20%20%20%20sum%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%202%5D%29%2A0%2E2419707245191454%3B%5Cn%20%20%20%20sum%20%2B%3D%20texture2D%28uSampler%2C%20vTextureCoord%20%20%20%20%20%29%2A0%2E3989422804014327%3B%5Cn%20%20%20%20sum%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%203%5D%29%2A0%2E2419707245191454%3B%5Cn%20%20%20%20sum%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%204%5D%29%2A0%2E05399096651318985%3B%5Cn%20%20%20%20sum%20%2B%3D%20texture2D%28uSampler%2C%20vBlurTexCoords%5B%205%5D%29%2A0%2E004431848411938341%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%3D%20vec4%28%20color%2Ergb%20%2A%20sum%2Ea%20%2A%20alpha%2C%20sum%2Ea%20%2A%20alpha%20%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blur%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%201%20%2F%20512%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20color%3A%20%7B%20type%3A%20%27c%27%2C%20value%3A%20%5B0%2C0%2C0%5D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20alpha%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%200%2E7%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%3A%20%7B%20type%3A%20%272f%27%2C%20value%3A%5B5%2C%205%5D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20strength%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A1%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20this%2Epasses%20%3D%201%3B%0A%20%20%20%20this%2Estrength%20%3D%204%3B%0A%7D%0A%0ABlurYTintFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ABlurYTintFilter%2Eprototype%2Econstructor%20%3D%20BlurYTintFilter%3B%0Amodule%2Eexports%20%3D%20BlurYTintFilter%3B%0A%0ABlurYTintFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%2C%20clear%29%0A%7B%0A%20%20%20%20var%20shader%20%3D%20this%2EgetShader%28renderer%29%3B%0A%0A%20%20%20%20this%2Euniforms%2Estrength%2Evalue%20%3D%20this%2Estrength%20%2F%204%20%2F%20this%2Epasses%20%2A%20%28input%2Eframe%2Eheight%20%2F%20input%2Esize%2Eheight%29%3B%0A%0A%20%20%20%20if%28this%2Epasses%20%3D%3D%3D%201%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20input%2C%20output%2C%20clear%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20renderTarget%20%3D%20renderer%2EfilterManager%2EgetRenderTarget%28true%29%3B%0A%20%20%20%20%20%20%20%20var%20flip%20%3D%20input%3B%0A%20%20%20%20%20%20%20%20var%20flop%20%3D%20renderTarget%3B%0A%0A%20%20%20%20%20%20%20%20for%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Epasses%2D1%3B%20i%2B%2B%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20flip%2C%20flop%2C%20clear%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20var%20temp%20%3D%20flop%3B%0A%20%20%20%20%20%20%20%20%20%20%20flop%20%3D%20flip%3B%0A%20%20%20%20%20%20%20%20%20%20%20flip%20%3D%20temp%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EapplyFilter%28shader%2C%20flip%2C%20output%2C%20clear%29%3B%0A%0A%20%20%20%20%20%20%20%20renderer%2EfilterManager%2EreturnRenderTarget%28renderTarget%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0AObject%2EdefineProperties%28BlurYTintFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20both%20the%20blur%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EBlurYTintFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blur%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20this%2Estrength%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Epadding%20%3D%20value%20%2A%200%2E5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Estrength%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C94%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%2C%0A%20%20%20%20BlurXFilter%20%3D%20require%28%27%2E%2E%2Fblur%2FBlurXFilter%27%29%2C%0A%20%20%20%20BlurYTintFilter%20%3D%20require%28%27%2E%2FBlurYTintFilter%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20DropShadowFilter%20applies%20a%20Gaussian%20blur%20to%20an%20object%2E%0A%20%2A%20The%20strength%20of%20the%20blur%20can%20be%20set%20for%20x%2D%20and%20y%2Daxis%20separately%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20DropShadowFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%29%3B%0A%0A%20%20%20%20this%2EblurXFilter%20%3D%20new%20BlurXFilter%28%29%3B%0A%20%20%20%20this%2EblurYTintFilter%20%3D%20new%20BlurYTintFilter%28%29%3B%0A%0A%20%20%20%20this%2EdefaultFilter%20%3D%20new%20core%2EAbstractFilter%28%29%3B%0A%0A%20%20%20%20this%2Epadding%20%3D%2030%3B%0A%0A%20%20%20%20this%2E%5FdirtyPosition%20%3D%20true%3B%0A%20%20%20%20this%2E%5Fangle%20%3D%2045%20%2A%20Math%2EPI%20%2F%20180%3B%0A%20%20%20%20this%2E%5Fdistance%20%3D%2010%3B%0A%20%20%20%20this%2Ealpha%20%3D%200%2E75%3B%0A%20%20%20%20this%2EhideObject%20%3D%20false%3B%0A%20%20%20%20this%2EblendMode%20%3D%20core%2EBLEND%5FMODES%2EMULTIPLY%3B%0A%7D%0A%0ADropShadowFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ADropShadowFilter%2Eprototype%2Econstructor%20%3D%20DropShadowFilter%3B%0Amodule%2Eexports%20%3D%20DropShadowFilter%3B%0A%0ADropShadowFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%29%0A%7B%0A%20%20%20%20var%20renderTarget%20%3D%20renderer%2EfilterManager%2EgetRenderTarget%28true%29%3B%0A%0A%20%20%20%20%2F%2FTODO%20%2D%20copyTexSubImage2D%20could%20be%20used%20here%3F%0A%20%20%20%20if%28this%2E%5FdirtyPosition%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FdirtyPosition%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20this%2EblurYTintFilter%2Euniforms%2Eoffset%2Evalue%5B0%5D%20%3D%20Math%2Esin%28this%2E%5Fangle%29%20%2A%20this%2E%5Fdistance%3B%0A%20%20%20%20%20%20%20%20this%2EblurYTintFilter%2Euniforms%2Eoffset%2Evalue%5B1%5D%20%3D%20Math%2Ecos%28this%2E%5Fangle%29%20%2A%20this%2E%5Fdistance%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EblurXFilter%2EapplyFilter%28renderer%2C%20input%2C%20renderTarget%29%3B%0A%0A%20%20%20%20renderer%2EblendModeManager%2EsetBlendMode%28this%2EblendMode%29%3B%0A%0A%20%20%20%20this%2EblurYTintFilter%2EapplyFilter%28renderer%2C%20renderTarget%2C%20output%29%3B%0A%0A%20%20%20%20renderer%2EblendModeManager%2EsetBlendMode%28core%2EBLEND%5FMODES%2ENORMAL%29%3B%0A%0A%20%20%20%20if%28%21this%2EhideObject%29%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20this%2EdefaultFilter%2EapplyFilter%28renderer%2C%20input%2C%20output%29%3B%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20renderer%2EfilterManager%2EreturnRenderTarget%28renderTarget%29%3B%0A%7D%3B%0A%0AObject%2EdefineProperties%28DropShadowFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20both%20the%20blurX%20and%20blurY%20properties%20simultaneously%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EDropShadowFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blur%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EblurXFilter%2Eblur%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurXFilter%2Eblur%20%3D%20this%2EblurYTintFilter%2Eblur%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20the%20blurX%20property%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EDropShadowFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blurX%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EblurXFilter%2Eblur%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurXFilter%2Eblur%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20strength%20of%20the%20blurY%20property%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EDropShadowFilter%23%0A%20%20%20%20%20%2A%20%40default%202%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blurY%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EblurYTintFilter%2Eblur%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurYTintFilter%2Eblur%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20color%20of%20the%20shadow%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EDropShadowFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20color%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20core%2Eutils%2Ergb2hex%28%20this%2EblurYTintFilter%2Euniforms%2Ecolor%2Evalue%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurYTintFilter%2Euniforms%2Ecolor%2Evalue%20%3D%20core%2Eutils%2Ehex2rgb%28value%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20alpha%20of%20the%20shadow%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EDropShadowFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20alpha%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20this%2EblurYTintFilter%2Euniforms%2Ealpha%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EblurYTintFilter%2Euniforms%2Ealpha%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20distance%20of%20the%20shadow%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EDropShadowFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20distance%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20this%2E%5Fdistance%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FdirtyPosition%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fdistance%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20angle%20of%20the%20shadow%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberOf%20PIXI%2Efilters%2EDropShadowFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20angle%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20this%2E%5Fangle%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FdirtyPosition%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Fangle%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%2C%22%2E%2E%2Fblur%2FBlurXFilter%22%3A84%2C%22%2E%2FBlurYTintFilter%22%3A93%7D%5D%2C95%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20This%20greyscales%20the%20palette%20of%20your%20Display%20Objects%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20GrayFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cnuniform%20float%20gray%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20gl%5FFragColor%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%3B%5Cn%20%20%20gl%5FFragColor%2Ergb%20%3D%20mix%28gl%5FFragColor%2Ergb%2C%20vec3%280%2E2126%2Agl%5FFragColor%2Er%20%2B%200%2E7152%2Agl%5FFragColor%2Eg%20%2B%200%2E0722%2Agl%5FFragColor%2Eb%29%2C%20gray%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gray%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%201%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0AGrayFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0AGrayFilter%2Eprototype%2Econstructor%20%3D%20GrayFilter%3B%0Amodule%2Eexports%20%3D%20GrayFilter%3B%0A%0AObject%2EdefineProperties%28GrayFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20strength%20of%20the%20gray%2E%201%20will%20make%20the%20object%20black%20and%20white%2C%200%20will%20make%20the%20object%20its%20normal%20color%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EGrayFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20gray%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Egray%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Egray%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C96%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20%40file%20%20%20%20%20%20%20%20Main%20export%20of%20the%20PIXI%20filters%20library%0A%20%2A%20%40author%20%20%20%20%20%20Mat%20Groves%20%3Cmat%40goodboydigital%2Ecom%3E%0A%20%2A%20%40copyright%20%20%202013%2D2015%20GoodBoyDigital%0A%20%2A%20%40license%20%20%20%20%20%7B%40link%20https%3A%2F%2Fgithub%2Ecom%2Fpixijs%2Fpixi%2Ejs%2Fblob%2Fmaster%2FLICENSE%7CMIT%20License%7D%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20%40namespace%20PIXI%2Efilters%0A%20%2A%2F%0Amodule%2Eexports%20%3D%20%7B%0A%20%20%20%20AsciiFilter%3A%20%20%20%20%20%20%20%20require%28%27%2E%2Fascii%2FAsciiFilter%27%29%2C%0A%20%20%20%20BloomFilter%3A%20%20%20%20%20%20%20%20require%28%27%2E%2Fbloom%2FBloomFilter%27%29%2C%0A%20%20%20%20BlurFilter%3A%20%20%20%20%20%20%20%20%20require%28%27%2E%2Fblur%2FBlurFilter%27%29%2C%0A%20%20%20%20BlurXFilter%3A%20%20%20%20%20%20%20%20require%28%27%2E%2Fblur%2FBlurXFilter%27%29%2C%0A%20%20%20%20BlurYFilter%3A%20%20%20%20%20%20%20%20require%28%27%2E%2Fblur%2FBlurYFilter%27%29%2C%0A%20%20%20%20BlurDirFilter%3A%20%20%20%20%20%20require%28%27%2E%2Fblur%2FBlurDirFilter%27%29%2C%0A%20%20%20%20ColorMatrixFilter%3A%20%20require%28%27%2E%2Fcolor%2FColorMatrixFilter%27%29%2C%0A%20%20%20%20ColorStepFilter%3A%20%20%20%20require%28%27%2E%2Fcolor%2FColorStepFilter%27%29%2C%0A%20%20%20%20ConvolutionFilter%3A%20%20require%28%27%2E%2Fconvolution%2FConvolutionFilter%27%29%2C%0A%20%20%20%20CrossHatchFilter%3A%20%20%20require%28%27%2E%2Fcrosshatch%2FCrossHatchFilter%27%29%2C%0A%20%20%20%20DisplacementFilter%3A%20require%28%27%2E%2Fdisplacement%2FDisplacementFilter%27%29%2C%0A%20%20%20%20DotScreenFilter%3A%20%20%20%20require%28%27%2E%2Fdot%2FDotScreenFilter%27%29%2C%0A%20%20%20%20GrayFilter%3A%20%20%20%20%20%20%20%20%20require%28%27%2E%2Fgray%2FGrayFilter%27%29%2C%0A%20%20%20%20DropShadowFilter%3A%20%20%20require%28%27%2E%2Fdropshadow%2FDropShadowFilter%27%29%2C%0A%20%20%20%20InvertFilter%3A%20%20%20%20%20%20%20require%28%27%2E%2Finvert%2FInvertFilter%27%29%2C%0A%20%20%20%20NoiseFilter%3A%20%20%20%20%20%20%20%20require%28%27%2E%2Fnoise%2FNoiseFilter%27%29%2C%0A%20%20%20%20PixelateFilter%3A%20%20%20%20%20require%28%27%2E%2Fpixelate%2FPixelateFilter%27%29%2C%0A%20%20%20%20RGBSplitFilter%3A%20%20%20%20%20require%28%27%2E%2Frgb%2FRGBSplitFilter%27%29%2C%0A%20%20%20%20ShockwaveFilter%3A%20%20%20%20require%28%27%2E%2Fshockwave%2FShockwaveFilter%27%29%2C%0A%20%20%20%20SepiaFilter%3A%20%20%20%20%20%20%20%20require%28%27%2E%2Fsepia%2FSepiaFilter%27%29%2C%0A%20%20%20%20SmartBlurFilter%3A%20%20%20%20require%28%27%2E%2Fblur%2FSmartBlurFilter%27%29%2C%0A%20%20%20%20TiltShiftFilter%3A%20%20%20%20require%28%27%2E%2Ftiltshift%2FTiltShiftFilter%27%29%2C%0A%20%20%20%20TiltShiftXFilter%3A%20%20%20require%28%27%2E%2Ftiltshift%2FTiltShiftXFilter%27%29%2C%0A%20%20%20%20TiltShiftYFilter%3A%20%20%20require%28%27%2E%2Ftiltshift%2FTiltShiftYFilter%27%29%2C%0A%20%20%20%20TwistFilter%3A%20%20%20%20%20%20%20%20require%28%27%2E%2Ftwist%2FTwistFilter%27%29%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2Fascii%2FAsciiFilter%22%3A80%2C%22%2E%2Fbloom%2FBloomFilter%22%3A81%2C%22%2E%2Fblur%2FBlurDirFilter%22%3A82%2C%22%2E%2Fblur%2FBlurFilter%22%3A83%2C%22%2E%2Fblur%2FBlurXFilter%22%3A84%2C%22%2E%2Fblur%2FBlurYFilter%22%3A85%2C%22%2E%2Fblur%2FSmartBlurFilter%22%3A86%2C%22%2E%2Fcolor%2FColorMatrixFilter%22%3A87%2C%22%2E%2Fcolor%2FColorStepFilter%22%3A88%2C%22%2E%2Fconvolution%2FConvolutionFilter%22%3A89%2C%22%2E%2Fcrosshatch%2FCrossHatchFilter%22%3A90%2C%22%2E%2Fdisplacement%2FDisplacementFilter%22%3A91%2C%22%2E%2Fdot%2FDotScreenFilter%22%3A92%2C%22%2E%2Fdropshadow%2FDropShadowFilter%22%3A94%2C%22%2E%2Fgray%2FGrayFilter%22%3A95%2C%22%2E%2Finvert%2FInvertFilter%22%3A97%2C%22%2E%2Fnoise%2FNoiseFilter%22%3A98%2C%22%2E%2Fpixelate%2FPixelateFilter%22%3A99%2C%22%2E%2Frgb%2FRGBSplitFilter%22%3A100%2C%22%2E%2Fsepia%2FSepiaFilter%22%3A101%2C%22%2E%2Fshockwave%2FShockwaveFilter%22%3A102%2C%22%2E%2Ftiltshift%2FTiltShiftFilter%22%3A104%2C%22%2E%2Ftiltshift%2FTiltShiftXFilter%22%3A105%2C%22%2E%2Ftiltshift%2FTiltShiftYFilter%22%3A106%2C%22%2E%2Ftwist%2FTwistFilter%22%3A107%7D%5D%2C97%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20This%20inverts%20your%20Display%20Objects%20colors%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20InvertFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cn%5Cnuniform%20float%20invert%3B%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20gl%5FFragColor%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%2Ergb%20%3D%20mix%28%20%28vec3%281%29%2Dgl%5FFragColor%2Ergb%29%20%2A%20gl%5FFragColor%2Ea%2C%20gl%5FFragColor%2Ergb%2C%201%2E0%20%2D%20invert%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20invert%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%201%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0AInvertFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0AInvertFilter%2Eprototype%2Econstructor%20%3D%20InvertFilter%3B%0Amodule%2Eexports%20%3D%20InvertFilter%3B%0A%0AObject%2EdefineProperties%28InvertFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20strength%20of%20the%20invert%2E%20%601%60%20will%20fully%20invert%20the%20colors%2C%20and%0A%20%20%20%20%20%2A%20%600%60%20will%20make%20the%20object%20its%20normal%20color%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EInvertFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20invert%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Einvert%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Einvert%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C98%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Vico%20%40vicocotea%0A%20%2A%20original%20filter%3A%20https%3A%2F%2Fgithub%2Ecom%2Fevanw%2Fglfx%2Ejs%2Fblob%2Fmaster%2Fsrc%2Ffilters%2Fadjust%2Fnoise%2Ejs%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20A%20Noise%20effect%20filter%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20NoiseFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20highp%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cnvarying%20vec4%20vColor%3B%5Cn%5Cnuniform%20float%20noise%3B%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cnfloat%20rand%28vec2%20co%29%5Cn%7B%5Cn%20%20%20%20return%20fract%28sin%28dot%28co%2Exy%2C%20vec2%2812%2E9898%2C%2078%2E233%29%29%29%20%2A%2043758%2E5453%29%3B%5Cn%7D%5Cn%5Cnvoid%20main%28%29%5Cn%7B%5Cn%20%20%20%20vec4%20color%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%3B%5Cn%5Cn%20%20%20%20float%20diff%20%3D%20%28rand%28vTextureCoord%29%20%2D%200%2E5%29%20%2A%20noise%3B%5Cn%5Cn%20%20%20%20color%2Er%20%2B%3D%20diff%3B%5Cn%20%20%20%20color%2Eg%20%2B%3D%20diff%3B%5Cn%20%20%20%20color%2Eb%20%2B%3D%20diff%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%3D%20color%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20noise%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%200%2E5%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0ANoiseFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ANoiseFilter%2Eprototype%2Econstructor%20%3D%20NoiseFilter%3B%0Amodule%2Eexports%20%3D%20NoiseFilter%3B%0A%0AObject%2EdefineProperties%28NoiseFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20amount%20of%20noise%20to%20apply%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ENoiseFilter%23%0A%20%20%20%20%20%2A%20%40default%200%2E5%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20noise%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Enoise%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Enoise%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C99%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20This%20filter%20applies%20a%20pixelate%20effect%20making%20display%20objects%20appear%20%27blocky%27%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20PixelateFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cn%5Cnuniform%20vec4%20dimensions%3B%5Cnuniform%20vec2%20pixelSize%3B%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20vec2%20coord%20%3D%20vTextureCoord%3B%5Cn%5Cn%20%20%20%20vec2%20size%20%3D%20dimensions%2Exy%20%2F%20pixelSize%3B%5Cn%5Cn%20%20%20%20vec2%20color%20%3D%20floor%28%20%28%20vTextureCoord%20%2A%20size%20%29%20%29%20%2F%20size%20%2B%20pixelSize%2Fdimensions%2Exy%20%2A%200%2E5%3B%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%3D%20texture2D%28uSampler%2C%20color%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20dimensions%3A%20%7B%20type%3A%20%274fv%27%2C%20%20value%3A%20new%20Float32Array%28%5B0%2C%200%2C%200%2C%200%5D%29%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20pixelSize%3A%20%20%7B%20type%3A%20%27v2%27%2C%20%20%20value%3A%20%7B%20x%3A%2010%2C%20y%3A%2010%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0APixelateFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0APixelateFilter%2Eprototype%2Econstructor%20%3D%20PixelateFilter%3B%0Amodule%2Eexports%20%3D%20PixelateFilter%3B%0A%0AObject%2EdefineProperties%28PixelateFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20a%20point%20that%20describes%20the%20size%20of%20the%20blocks%2E%0A%20%20%20%20%20%2A%20x%20is%20the%20width%20of%20the%20block%20and%20y%20is%20the%20height%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EPixelateFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20size%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2EpixelSize%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2EpixelSize%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C100%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20An%20RGB%20Split%20Filter%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20RGBSplitFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cnuniform%20vec4%20dimensions%3B%5Cnuniform%20vec2%20red%3B%5Cnuniform%20vec2%20green%3B%5Cnuniform%20vec2%20blue%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20gl%5FFragColor%2Er%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%20%2B%20red%2Fdimensions%2Exy%29%2Er%3B%5Cn%20%20%20gl%5FFragColor%2Eg%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%20%2B%20green%2Fdimensions%2Exy%29%2Eg%3B%5Cn%20%20%20gl%5FFragColor%2Eb%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%20%2B%20blue%2Fdimensions%2Exy%29%2Eb%3B%5Cn%20%20%20gl%5FFragColor%2Ea%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%2Ea%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20red%3A%20%20%20%20%20%20%20%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%2020%2C%20y%3A%2020%20%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20green%3A%20%20%20%20%20%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%20%2D20%2C%20y%3A%2020%20%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blue%3A%20%20%20%20%20%20%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%2020%2C%20y%3A%20%2D20%20%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dimensions%3A%20%7B%20type%3A%20%274fv%27%2C%20value%3A%20%5B0%2C%200%2C%200%2C%200%5D%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0ARGBSplitFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ARGBSplitFilter%2Eprototype%2Econstructor%20%3D%20RGBSplitFilter%3B%0Amodule%2Eexports%20%3D%20RGBSplitFilter%3B%0A%0AObject%2EdefineProperties%28RGBSplitFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Red%20channel%20offset%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ERGBSplitFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20red%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Ered%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Ered%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Green%20channel%20offset%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ERGBSplitFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20green%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Egreen%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Egreen%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Blue%20offset%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ERGBSplitFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blue%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Eblue%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Eblue%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C101%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20This%20applies%20a%20sepia%20effect%20to%20your%20Display%20Objects%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20SepiaFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cnuniform%20float%20sepia%3B%5Cn%5Cnconst%20mat3%20sepiaMatrix%20%3D%20mat3%280%2E3588%2C%200%2E7044%2C%200%2E1368%2C%200%2E2990%2C%200%2E5870%2C%200%2E1140%2C%200%2E2392%2C%200%2E4696%2C%200%2E0912%29%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20gl%5FFragColor%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%3B%5Cn%20%20%20gl%5FFragColor%2Ergb%20%3D%20mix%28%20gl%5FFragColor%2Ergb%2C%20gl%5FFragColor%2Ergb%20%2A%20sepiaMatrix%2C%20sepia%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sepia%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%201%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0ASepiaFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ASepiaFilter%2Eprototype%2Econstructor%20%3D%20SepiaFilter%3B%0Amodule%2Eexports%20%3D%20SepiaFilter%3B%0A%0AObject%2EdefineProperties%28SepiaFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20strength%20of%20the%20sepia%2E%20%601%60%20will%20apply%20the%20full%20sepia%20effect%2C%20and%0A%20%20%20%20%20%2A%20%600%60%20will%20make%20the%20object%20its%20normal%20color%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ESepiaFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20sepia%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Esepia%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Esepia%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C102%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20The%20ColorMatrixFilter%20class%20lets%20you%20apply%20a%204x4%20matrix%20transformation%20on%20the%20RGBA%0A%20%2A%20color%20and%20alpha%20values%20of%20every%20pixel%20on%20your%20displayObject%20to%20produce%20a%20result%0A%20%2A%20with%20a%20new%20set%20of%20RGBA%20color%20and%20alpha%20values%2E%20It%27s%20pretty%20powerful%21%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20ShockwaveFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20lowp%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cn%5Cnuniform%20vec2%20center%3B%5Cnuniform%20vec3%20params%3B%20%2F%2F%2010%2E0%2C%200%2E8%2C%200%2E1%5Cnuniform%20float%20time%3B%5Cn%5Cnvoid%20main%28%29%5Cn%7B%5Cn%20%20%20%20vec2%20uv%20%3D%20vTextureCoord%3B%5Cn%20%20%20%20vec2%20texCoord%20%3D%20uv%3B%5Cn%5Cn%20%20%20%20float%20dist%20%3D%20distance%28uv%2C%20center%29%3B%5Cn%5Cn%20%20%20%20if%20%28%20%28dist%20%3C%3D%20%28time%20%2B%20params%2Ez%29%29%20%26%26%20%28dist%20%3E%3D%20%28time%20%2D%20params%2Ez%29%29%20%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20float%20diff%20%3D%20%28dist%20%2D%20time%29%3B%5Cn%20%20%20%20%20%20%20%20float%20powDiff%20%3D%201%2E0%20%2D%20pow%28abs%28diff%2Aparams%2Ex%29%2C%20params%2Ey%29%3B%5Cn%5Cn%20%20%20%20%20%20%20%20float%20diffTime%20%3D%20diff%20%20%2A%20powDiff%3B%5Cn%20%20%20%20%20%20%20%20vec2%20diffUV%20%3D%20normalize%28uv%20%2D%20center%29%3B%5Cn%20%20%20%20%20%20%20%20texCoord%20%3D%20uv%20%2B%20%28diffUV%20%2A%20diffTime%29%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%3D%20texture2D%28uSampler%2C%20texCoord%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20center%3A%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%200%2E5%2C%20y%3A%200%2E5%20%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20params%3A%20%7B%20type%3A%20%27v3%27%2C%20value%3A%20%7B%20x%3A%2010%2C%20y%3A%200%2E8%2C%20z%3A%200%2E1%20%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20time%3A%20%7B%20type%3A%20%271f%27%2C%20value%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0AShockwaveFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0AShockwaveFilter%2Eprototype%2Econstructor%20%3D%20ShockwaveFilter%3B%0Amodule%2Eexports%20%3D%20ShockwaveFilter%3B%0A%0AObject%2EdefineProperties%28ShockwaveFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20center%20of%20the%20shockwave%20in%20normalized%20screen%20coords%2E%20That%20is%0A%20%20%20%20%20%2A%20%280%2C0%29%20is%20the%20top%2Dleft%20and%20%281%2C1%29%20is%20the%20bottom%20right%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%3Cstring%2C%20number%3E%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EShockwaveFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20center%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Ecenter%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Ecenter%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20params%20of%20the%20shockwave%2E%20These%20modify%20the%20look%20and%20behavior%20of%0A%20%20%20%20%20%2A%20the%20shockwave%20as%20it%20ripples%20out%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%3Cstring%2C%20number%3E%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EShockwaveFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20params%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Eparams%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Eparams%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Sets%20the%20elapsed%20time%20of%20the%20shockwave%2E%20This%20controls%20the%20speed%20at%20which%0A%20%20%20%20%20%2A%20the%20shockwave%20ripples%20out%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2EShockwaveFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20time%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Etime%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Etime%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C103%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Vico%20%40vicocotea%0A%20%2A%20original%20filter%20https%3A%2F%2Fgithub%2Ecom%2Fevanw%2Fglfx%2Ejs%2Fblob%2Fmaster%2Fsrc%2Ffilters%2Fblur%2Ftiltshift%2Ejs%20by%20Evan%20Wallace%20%3A%20http%3A%2F%2Fmadebyevan%2Ecom%2F%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20A%20TiltShiftAxisFilter%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20TiltShiftAxisFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cnuniform%20float%20blur%3B%5Cnuniform%20float%20gradientBlur%3B%5Cnuniform%20vec2%20start%3B%5Cnuniform%20vec2%20end%3B%5Cnuniform%20vec2%20delta%3B%5Cnuniform%20vec2%20texSize%3B%5Cn%5Cnfloat%20random%28vec3%20scale%2C%20float%20seed%29%5Cn%7B%5Cn%20%20%20%20return%20fract%28sin%28dot%28gl%5FFragCoord%2Exyz%20%2B%20seed%2C%20scale%29%29%20%2A%2043758%2E5453%20%2B%20seed%29%3B%5Cn%7D%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20%20vec4%20color%20%3D%20vec4%280%2E0%29%3B%5Cn%20%20%20%20float%20total%20%3D%200%2E0%3B%5Cn%5Cn%20%20%20%20float%20offset%20%3D%20random%28vec3%2812%2E9898%2C%2078%2E233%2C%20151%2E7182%29%2C%200%2E0%29%3B%5Cn%20%20%20%20vec2%20normal%20%3D%20normalize%28vec2%28start%2Ey%20%2D%20end%2Ey%2C%20end%2Ex%20%2D%20start%2Ex%29%29%3B%5Cn%20%20%20%20float%20radius%20%3D%20smoothstep%280%2E0%2C%201%2E0%2C%20abs%28dot%28vTextureCoord%20%2A%20texSize%20%2D%20start%2C%20normal%29%29%20%2F%20gradientBlur%29%20%2A%20blur%3B%5Cn%5Cn%20%20%20%20for%20%28float%20t%20%3D%20%2D30%2E0%3B%20t%20%3C%3D%2030%2E0%3B%20t%2B%2B%29%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20float%20percent%20%3D%20%28t%20%2B%20offset%20%2D%200%2E5%29%20%2F%2030%2E0%3B%5Cn%20%20%20%20%20%20%20%20float%20weight%20%3D%201%2E0%20%2D%20abs%28percent%29%3B%5Cn%20%20%20%20%20%20%20%20vec4%20sample%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%20%2B%20delta%20%2F%20texSize%20%2A%20percent%20%2A%20radius%29%3B%5Cn%20%20%20%20%20%20%20%20sample%2Ergb%20%2A%3D%20sample%2Ea%3B%5Cn%20%20%20%20%20%20%20%20color%20%2B%3D%20sample%20%2A%20weight%3B%5Cn%20%20%20%20%20%20%20%20total%20%2B%3D%20weight%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20gl%5FFragColor%20%3D%20color%20%2F%20total%3B%5Cn%20%20%20%20gl%5FFragColor%2Ergb%20%2F%3D%20gl%5FFragColor%2Ea%20%2B%200%2E00001%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blur%3A%20%20%20%20%20%20%20%20%20%20%20%7B%20type%3A%20%271f%27%2C%20value%3A%20100%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20gradientBlur%3A%20%20%20%7B%20type%3A%20%271f%27%2C%20value%3A%20600%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20start%3A%20%20%20%20%20%20%20%20%20%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%200%2C%20%20%20%20y%3A%20window%2EinnerHeight%20%2F%202%20%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20end%3A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%20600%2C%20%20y%3A%20window%2EinnerHeight%20%2F%202%20%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20delta%3A%20%20%20%20%20%20%20%20%20%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%2030%2C%20%20%20y%3A%2030%20%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20texSize%3A%20%20%20%20%20%20%20%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%20window%2EinnerWidth%2C%20y%3A%20window%2EinnerHeight%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20this%2EupdateDelta%28%29%3B%0A%7D%0A%0ATiltShiftAxisFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ATiltShiftAxisFilter%2Eprototype%2Econstructor%20%3D%20TiltShiftAxisFilter%3B%0Amodule%2Eexports%20%3D%20TiltShiftAxisFilter%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20filter%20delta%20values%2E%0A%20%2A%20This%20is%20overridden%20in%20the%20X%20and%20Y%20filters%2C%20does%20nothing%20for%20this%20class%2E%0A%20%2A%0A%20%2A%2F%0ATiltShiftAxisFilter%2Eprototype%2EupdateDelta%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2Euniforms%2Edelta%2Evalue%2Ex%20%3D%200%3B%0A%20%20%20%20this%2Euniforms%2Edelta%2Evalue%2Ey%20%3D%200%3B%0A%7D%3B%0A%0AObject%2EdefineProperties%28TiltShiftAxisFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20strength%20of%20the%20blur%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ETiltShiftAxisFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blur%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Eblur%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Eblur%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20strength%20of%20the%20gradient%20blur%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ETiltShiftAxisFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20gradientBlur%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2EgradientBlur%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2EgradientBlur%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20X%20value%20to%20start%20the%20effect%20at%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ETiltShiftAxisFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20start%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Estart%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Estart%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EupdateDelta%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20X%20value%20to%20end%20the%20effect%20at%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ETiltShiftAxisFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20end%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Eend%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Eend%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EupdateDelta%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C104%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%2C%0A%20%20%20%20TiltShiftXFilter%20%3D%20require%28%27%2E%2FTiltShiftXFilter%27%29%2C%0A%20%20%20%20TiltShiftYFilter%20%3D%20require%28%27%2E%2FTiltShiftYFilter%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Vico%20%40vicocotea%0A%20%2A%20original%20filter%20https%3A%2F%2Fgithub%2Ecom%2Fevanw%2Fglfx%2Ejs%2Fblob%2Fmaster%2Fsrc%2Ffilters%2Fblur%2Ftiltshift%2Ejs%20by%20Evan%20Wallace%20%3A%20http%3A%2F%2Fmadebyevan%2Ecom%2F%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20A%20TiltShift%20Filter%2E%20Manages%20the%20pass%20of%20both%20a%20TiltShiftXFilter%20and%20TiltShiftYFilter%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20TiltShiftFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%29%3B%0A%0A%20%20%20%20this%2EtiltShiftXFilter%20%3D%20new%20TiltShiftXFilter%28%29%3B%0A%20%20%20%20this%2EtiltShiftYFilter%20%3D%20new%20TiltShiftYFilter%28%29%3B%0A%7D%0A%0ATiltShiftFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ATiltShiftFilter%2Eprototype%2Econstructor%20%3D%20TiltShiftFilter%3B%0Amodule%2Eexports%20%3D%20TiltShiftFilter%3B%0A%0ATiltShiftFilter%2Eprototype%2EapplyFilter%20%3D%20function%20%28renderer%2C%20input%2C%20output%29%0A%7B%0A%20%20%20%20var%20renderTarget%20%3D%20renderer%2EfilterManager%2EgetRenderTarget%28true%29%3B%0A%0A%20%20%20%20this%2EtiltShiftXFilter%2EapplyFilter%28renderer%2C%20input%2C%20renderTarget%29%3B%0A%0A%20%20%20%20this%2EtiltShiftYFilter%2EapplyFilter%28renderer%2C%20renderTarget%2C%20output%29%3B%0A%0A%20%20%20%20renderer%2EfilterManager%2EreturnRenderTarget%28renderTarget%29%3B%0A%7D%3B%0A%0AObject%2EdefineProperties%28TiltShiftFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20strength%20of%20the%20blur%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ETiltShiftFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20blur%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EtiltShiftXFilter%2Eblur%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EtiltShiftXFilter%2Eblur%20%3D%20this%2EtiltShiftYFilter%2Eblur%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20strength%20of%20the%20gradient%20blur%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ETiltShiftFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20gradientBlur%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EtiltShiftXFilter%2EgradientBlur%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EtiltShiftXFilter%2EgradientBlur%20%3D%20this%2EtiltShiftYFilter%2EgradientBlur%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20Y%20value%20to%20start%20the%20effect%20at%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ETiltShiftFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20start%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EtiltShiftXFilter%2Estart%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EtiltShiftXFilter%2Estart%20%3D%20this%2EtiltShiftYFilter%2Estart%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20Y%20value%20to%20end%20the%20effect%20at%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ETiltShiftFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20end%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EtiltShiftXFilter%2Eend%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EtiltShiftXFilter%2Eend%20%3D%20this%2EtiltShiftYFilter%2Eend%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%2C%22%2E%2FTiltShiftXFilter%22%3A105%2C%22%2E%2FTiltShiftYFilter%22%3A106%7D%5D%2C105%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20TiltShiftAxisFilter%20%3D%20require%28%27%2E%2FTiltShiftAxisFilter%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Vico%20%40vicocotea%0A%20%2A%20original%20filter%20https%3A%2F%2Fgithub%2Ecom%2Fevanw%2Fglfx%2Ejs%2Fblob%2Fmaster%2Fsrc%2Ffilters%2Fblur%2Ftiltshift%2Ejs%20by%20Evan%20Wallace%20%3A%20http%3A%2F%2Fmadebyevan%2Ecom%2F%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20A%20TiltShiftXFilter%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2ETiltShiftAxisFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20TiltShiftXFilter%28%29%0A%7B%0A%20%20%20%20TiltShiftAxisFilter%2Ecall%28this%29%3B%0A%7D%0A%0ATiltShiftXFilter%2Eprototype%20%3D%20Object%2Ecreate%28TiltShiftAxisFilter%2Eprototype%29%3B%0ATiltShiftXFilter%2Eprototype%2Econstructor%20%3D%20TiltShiftXFilter%3B%0Amodule%2Eexports%20%3D%20TiltShiftXFilter%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20filter%20delta%20values%2E%0A%20%2A%0A%20%2A%2F%0ATiltShiftXFilter%2Eprototype%2EupdateDelta%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20dx%20%3D%20this%2Euniforms%2Eend%2Evalue%2Ex%20%2D%20this%2Euniforms%2Estart%2Evalue%2Ex%3B%0A%20%20%20%20var%20dy%20%3D%20this%2Euniforms%2Eend%2Evalue%2Ey%20%2D%20this%2Euniforms%2Estart%2Evalue%2Ey%3B%0A%20%20%20%20var%20d%20%3D%20Math%2Esqrt%28dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%29%3B%0A%0A%20%20%20%20this%2Euniforms%2Edelta%2Evalue%2Ex%20%3D%20dx%20%2F%20d%3B%0A%20%20%20%20this%2Euniforms%2Edelta%2Evalue%2Ey%20%3D%20dy%20%2F%20d%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FTiltShiftAxisFilter%22%3A103%7D%5D%2C106%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20TiltShiftAxisFilter%20%3D%20require%28%27%2E%2FTiltShiftAxisFilter%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Vico%20%40vicocotea%0A%20%2A%20original%20filter%20https%3A%2F%2Fgithub%2Ecom%2Fevanw%2Fglfx%2Ejs%2Fblob%2Fmaster%2Fsrc%2Ffilters%2Fblur%2Ftiltshift%2Ejs%20by%20Evan%20Wallace%20%3A%20http%3A%2F%2Fmadebyevan%2Ecom%2F%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20A%20TiltShiftYFilter%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2ETiltShiftAxisFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20TiltShiftYFilter%28%29%0A%7B%0A%20%20%20%20TiltShiftAxisFilter%2Ecall%28this%29%3B%0A%7D%0A%0ATiltShiftYFilter%2Eprototype%20%3D%20Object%2Ecreate%28TiltShiftAxisFilter%2Eprototype%29%3B%0ATiltShiftYFilter%2Eprototype%2Econstructor%20%3D%20TiltShiftYFilter%3B%0Amodule%2Eexports%20%3D%20TiltShiftYFilter%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20filter%20delta%20values%2E%0A%20%2A%0A%20%2A%2F%0ATiltShiftYFilter%2Eprototype%2EupdateDelta%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20dx%20%3D%20this%2Euniforms%2Eend%2Evalue%2Ex%20%2D%20this%2Euniforms%2Estart%2Evalue%2Ex%3B%0A%20%20%20%20var%20dy%20%3D%20this%2Euniforms%2Eend%2Evalue%2Ey%20%2D%20this%2Euniforms%2Estart%2Evalue%2Ey%3B%0A%20%20%20%20var%20d%20%3D%20Math%2Esqrt%28dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%29%3B%0A%0A%20%20%20%20this%2Euniforms%2Edelta%2Evalue%2Ex%20%3D%20%2Ddy%20%2F%20d%3B%0A%20%20%20%20this%2Euniforms%2Edelta%2Evalue%2Ey%20%3D%20dx%20%2F%20d%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FTiltShiftAxisFilter%22%3A103%7D%5D%2C107%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%2F%2F%20%40see%20https%3A%2F%2Fgithub%2Ecom%2Fsubstack%2Fbrfs%2Fissues%2F25%0A%0A%0A%2F%2A%2A%0A%20%2A%20This%20filter%20applies%20a%20twist%20effect%20making%20display%20objects%20appear%20twisted%20in%20the%20given%20direction%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EAbstractFilter%0A%20%2A%20%40memberof%20PIXI%2Efilters%0A%20%2A%2F%0Afunction%20TwistFilter%28%29%0A%7B%0A%20%20%20%20core%2EAbstractFilter%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20fragment%20shader%0A%20%20%20%20%20%20%20%20%22precision%20mediump%20float%3B%5Cn%5Cnvarying%20vec2%20vTextureCoord%3B%5Cn%5Cnuniform%20sampler2D%20uSampler%3B%5Cnuniform%20float%20radius%3B%5Cnuniform%20float%20angle%3B%5Cnuniform%20vec2%20offset%3B%5Cn%5Cnvoid%20main%28void%29%5Cn%7B%5Cn%20%20%20vec2%20coord%20%3D%20vTextureCoord%20%2D%20offset%3B%5Cn%20%20%20float%20dist%20%3D%20length%28coord%29%3B%5Cn%5Cn%20%20%20if%20%28dist%20%3C%20radius%29%5Cn%20%20%20%7B%5Cn%20%20%20%20%20%20%20float%20ratio%20%3D%20%28radius%20%2D%20dist%29%20%2F%20radius%3B%5Cn%20%20%20%20%20%20%20float%20angleMod%20%3D%20ratio%20%2A%20ratio%20%2A%20angle%3B%5Cn%20%20%20%20%20%20%20float%20s%20%3D%20sin%28angleMod%29%3B%5Cn%20%20%20%20%20%20%20float%20c%20%3D%20cos%28angleMod%29%3B%5Cn%20%20%20%20%20%20%20coord%20%3D%20vec2%28coord%2Ex%20%2A%20c%20%2D%20coord%2Ey%20%2A%20s%2C%20coord%2Ex%20%2A%20s%20%2B%20coord%2Ey%20%2A%20c%29%3B%5Cn%20%20%20%7D%5Cn%5Cn%20%20%20gl%5FFragColor%20%3D%20texture2D%28uSampler%2C%20coord%2Boffset%29%3B%5Cn%7D%5Cn%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20radius%3A%20%20%20%20%20%7B%20type%3A%20%271f%27%2C%20value%3A%200%2E5%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20angle%3A%20%20%20%20%20%20%7B%20type%3A%20%271f%27%2C%20value%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%3A%20%20%20%20%20%7B%20type%3A%20%27v2%27%2C%20value%3A%20%7B%20x%3A%200%2E5%2C%20y%3A%200%2E5%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0ATwistFilter%2Eprototype%20%3D%20Object%2Ecreate%28core%2EAbstractFilter%2Eprototype%29%3B%0ATwistFilter%2Eprototype%2Econstructor%20%3D%20TwistFilter%3B%0Amodule%2Eexports%20%3D%20TwistFilter%3B%0A%0AObject%2EdefineProperties%28TwistFilter%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20point%20describes%20the%20the%20offset%20of%20the%20twist%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ETwistFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20offset%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Eoffset%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Eoffset%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20radius%20of%20the%20twist%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ETwistFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20radius%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Eradius%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Eradius%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20angle%20of%20the%20twist%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Efilters%2ETwistFilter%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20angle%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2Euniforms%2Eangle%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Euniforms%2Eangle%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C108%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%28function%20%28global%29%7B%0A%2F%2F%20run%20the%20polyfills%0Arequire%28%27%2E%2Fpolyfill%27%29%3B%0A%0Avar%20core%20%3D%20module%2Eexports%20%3D%20require%28%27%2E%2Fcore%27%29%3B%0A%0A%2F%2F%20add%20core%20plugins%2E%0Acore%2Eextras%20%20%20%20%20%20%20%20%20%3D%20require%28%27%2E%2Fextras%27%29%3B%0Acore%2Efilters%20%20%20%20%20%20%20%20%3D%20require%28%27%2E%2Ffilters%27%29%3B%0Acore%2Einteraction%20%20%20%20%3D%20require%28%27%2E%2Finteraction%27%29%3B%0Acore%2Eloaders%20%20%20%20%20%20%20%20%3D%20require%28%27%2E%2Floaders%27%29%3B%0Acore%2Emesh%20%20%20%20%20%20%20%20%20%20%20%3D%20require%28%27%2E%2Fmesh%27%29%3B%0Acore%2Eaccessibility%20%20%3D%20require%28%27%2E%2Faccessibility%27%29%3B%0A%0A%2F%2F%20export%20a%20premade%20loader%20instance%0A%2F%2A%2A%0A%20%2A%20A%20premade%20instance%20of%20the%20loader%20that%20can%20be%20used%20to%20loader%20resources%2E%0A%20%2A%0A%20%2A%20%40name%20loader%0A%20%2A%20%40memberof%20PIXI%0A%20%2A%20%40property%20%7BPIXI%2Eloaders%2ELoader%7D%0A%20%2A%2F%0Acore%2Eloader%20%3D%20new%20core%2Eloaders%2ELoader%28%29%3B%0A%0A%2F%2F%20mixin%20the%20deprecation%20features%2E%0AObject%2Eassign%28core%2C%20require%28%27%2E%2Fdeprecation%27%29%29%3B%0A%0A%2F%2F%20Always%20export%20pixi%20globally%2E%0Aglobal%2EPIXI%20%3D%20core%3B%0A%0A%7D%29%2Ecall%28this%2Ctypeof%20global%20%21%3D%3D%20%22undefined%22%20%3F%20global%20%3A%20typeof%20self%20%21%3D%3D%20%22undefined%22%20%3F%20self%20%3A%20typeof%20window%20%21%3D%3D%20%22undefined%22%20%3F%20window%20%3A%20%7B%7D%29%0A%0A%7D%2C%7B%22%2E%2Faccessibility%22%3A15%2C%22%2E%2Fcore%22%3A23%2C%22%2E%2Fdeprecation%22%3A72%2C%22%2E%2Fextras%22%3A79%2C%22%2E%2Ffilters%22%3A96%2C%22%2E%2Finteraction%22%3A111%2C%22%2E%2Floaders%22%3A114%2C%22%2E%2Fmesh%22%3A121%2C%22%2E%2Fpolyfill%22%3A126%7D%5D%2C109%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Holds%20all%20information%20related%20to%20an%20Interaction%20event%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%2Einteraction%0A%20%2A%2F%0Afunction%20InteractionData%28%29%0A%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20This%20point%20stores%20the%20global%20coords%20of%20where%20the%20touch%2Fmouse%20event%20happened%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eglobal%20%3D%20new%20core%2EPoint%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20target%20Sprite%20that%20was%20interacted%20with%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ESprite%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Etarget%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20When%20passed%20to%20an%20event%20handler%2C%20this%20will%20be%20the%20original%20DOM%20Event%20that%20was%20captured%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BEvent%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EoriginalEvent%20%3D%20null%3B%0A%7D%0A%0AInteractionData%2Eprototype%2Econstructor%20%3D%20InteractionData%3B%0Amodule%2Eexports%20%3D%20InteractionData%3B%0A%0A%2F%2A%2A%0A%20%2A%20This%20will%20return%20the%20local%20coordinates%20of%20the%20specified%20displayObject%20for%20this%20InteractionData%0A%20%2A%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EDisplayObject%7D%20The%20DisplayObject%20that%20you%20would%20like%20the%20local%20coords%20off%0A%20%2A%20%40param%20%5Bpoint%5D%20%7BPIXI%2EPoint%7D%20A%20Point%20object%20in%20which%20to%20store%20the%20value%2C%20optional%20%28otherwise%20will%20create%20a%20new%20point%29%0A%20%2A%20%40param%20%5BglobalPos%5D%20%7BPIXI%2EPoint%7D%20A%20Point%20object%20containing%20your%20custom%20global%20coords%2C%20optional%20%28otherwise%20will%20use%20the%20current%20global%20coords%29%0A%20%2A%20%40return%20%7BPIXI%2EPoint%7D%20A%20point%20containing%20the%20coordinates%20of%20the%20InteractionData%20position%20relative%20to%20the%20DisplayObject%0A%20%2A%2F%0AInteractionData%2Eprototype%2EgetLocalPosition%20%3D%20function%20%28displayObject%2C%20point%2C%20globalPos%29%0A%7B%0A%20%20%20%20return%20displayObject%2EworldTransform%2EapplyInverse%28globalPos%20%7C%7C%20this%2Eglobal%2C%20point%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%7D%5D%2C110%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%2C%0A%20%20%20%20InteractionData%20%3D%20require%28%27%2E%2FInteractionData%27%29%3B%0A%0A%2F%2F%20Mix%20interactiveTarget%20into%20core%2EDisplayObject%2Eprototype%0AObject%2Eassign%28%0A%20%20%20%20core%2EDisplayObject%2Eprototype%2C%0A%20%20%20%20require%28%27%2E%2FinteractiveTarget%27%29%0A%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20interaction%20manager%20deals%20with%20mouse%20and%20touch%20events%2E%20Any%20DisplayObject%20can%20be%20interactive%0A%20%2A%20if%20its%20interactive%20parameter%20is%20set%20to%20true%0A%20%2A%20This%20manager%20also%20supports%20multitouch%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40memberof%20PIXI%2Einteraction%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7CPIXI%2EWebGLRenderer%7D%20A%20reference%20to%20the%20current%20renderer%0A%20%2A%20%40param%20%5Boptions%5D%20%7Bobject%7D%0A%20%2A%20%40param%20%5Boptions%2EautoPreventDefault%3Dtrue%5D%20%7Bboolean%7D%20Should%20the%20manager%20automatically%20prevent%20default%20browser%20actions%2E%0A%20%2A%20%40param%20%5Boptions%2EinteractionFrequency%3D10%5D%20%7Bnumber%7D%20Frequency%20increases%20the%20interaction%20events%20will%20be%20checked%2E%0A%20%2A%2F%0Afunction%20InteractionManager%28renderer%2C%20options%29%0A%7B%0A%20%20%20%20options%20%3D%20options%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20renderer%20this%20interaction%20manager%20works%20for%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ESystemRenderer%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Erenderer%20%3D%20renderer%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Should%20default%20browser%20actions%20automatically%20be%20prevented%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40default%20true%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EautoPreventDefault%20%3D%20options%2EautoPreventDefault%20%21%3D%3D%20undefined%20%3F%20options%2EautoPreventDefault%20%3A%20true%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20As%20this%20frequency%20increases%20the%20interaction%20events%20will%20be%20checked%20more%20often%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%2010%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EinteractionFrequency%20%3D%20options%2EinteractionFrequency%20%7C%7C%2010%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20mouse%20data%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2Einteraction%2EInteractionData%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Emouse%20%3D%20new%20InteractionData%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20An%20event%20data%20object%20to%20handle%20all%20the%20event%20tracking%2Fdispatching%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EeventData%20%3D%20%7B%0A%20%20%20%20%20%20%20%20stopped%3A%20false%2C%0A%20%20%20%20%20%20%20%20target%3A%20null%2C%0A%20%20%20%20%20%20%20%20type%3A%20null%2C%0A%20%20%20%20%20%20%20%20data%3A%20this%2Emouse%2C%0A%20%20%20%20%20%20%20%20stopPropagation%3Afunction%28%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Estopped%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Tiny%20little%20interactiveData%20pool%20%21%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2Einteraction%2EInteractionData%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EinteractiveDataPool%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20DOM%20element%20to%20bind%20to%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BHTMLElement%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EinteractionDOMElement%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Have%20events%20been%20attached%20to%20the%20dom%20element%3F%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EeventsAdded%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2Fthis%20will%20make%20it%20so%20that%20you%20don%27t%20have%20to%20call%20bind%20all%20the%20time%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFunction%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EonMouseUp%20%3D%20this%2EonMouseUp%2Ebind%28this%29%3B%0A%20%20%20%20this%2EprocessMouseUp%20%3D%20this%2EprocessMouseUp%2Ebind%28%20this%20%29%3B%0A%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFunction%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EonMouseDown%20%3D%20this%2EonMouseDown%2Ebind%28this%29%3B%0A%20%20%20%20this%2EprocessMouseDown%20%3D%20this%2EprocessMouseDown%2Ebind%28%20this%20%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFunction%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EonMouseMove%20%3D%20this%2EonMouseMove%2Ebind%28%20this%20%29%3B%0A%20%20%20%20this%2EprocessMouseMove%20%3D%20this%2EprocessMouseMove%2Ebind%28%20this%20%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFunction%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EonMouseOut%20%3D%20this%2EonMouseOut%2Ebind%28this%29%3B%0A%20%20%20%20this%2EprocessMouseOverOut%20%3D%20this%2EprocessMouseOverOut%2Ebind%28%20this%20%29%3B%0A%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFunction%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EonTouchStart%20%3D%20this%2EonTouchStart%2Ebind%28this%29%3B%0A%20%20%20%20this%2EprocessTouchStart%20%3D%20this%2EprocessTouchStart%2Ebind%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFunction%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EonTouchEnd%20%3D%20this%2EonTouchEnd%2Ebind%28this%29%3B%0A%20%20%20%20this%2EprocessTouchEnd%20%3D%20this%2EprocessTouchEnd%2Ebind%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFunction%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EonTouchMove%20%3D%20this%2EonTouchMove%2Ebind%28this%29%3B%0A%20%20%20%20this%2EprocessTouchMove%20%3D%20this%2EprocessTouchMove%2Ebind%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Elast%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20css%20style%20of%20the%20cursor%20that%20is%20being%20used%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcurrentCursorStyle%20%3D%20%27inherit%27%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Internal%20cached%20var%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FtempPoint%20%3D%20new%20core%2EPoint%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20current%20resolution%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eresolution%20%3D%201%3B%0A%0A%20%20%20%20this%2EsetTargetElement%28this%2Erenderer%2Eview%2C%20this%2Erenderer%2Eresolution%29%3B%0A%7D%0A%0AInteractionManager%2Eprototype%2Econstructor%20%3D%20InteractionManager%3B%0Amodule%2Eexports%20%3D%20InteractionManager%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20the%20DOM%20element%20which%20will%20receive%20mouse%2Ftouch%20events%2E%20This%20is%20useful%20for%20when%20you%20have%0A%20%2A%20other%20DOM%20elements%20on%20top%20of%20the%20renderers%20Canvas%20element%2E%20With%20this%20you%27ll%20be%20bale%20to%20deletegate%0A%20%2A%20another%20DOM%20element%20to%20receive%20those%20events%2E%0A%20%2A%0A%20%2A%20%40param%20element%20%7BHTMLElement%7D%20the%20DOM%20element%20which%20will%20receive%20mouse%20and%20touch%20events%2E%0A%20%2A%20%40param%20%5Bresolution%3D1%5D%20%7Bnumber%7D%20THe%20resolution%20of%20the%20new%20element%20%28relative%20to%20the%20canvas%29%2E%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EsetTargetElement%20%3D%20function%20%28element%2C%20resolution%29%0A%7B%0A%20%20%20%20this%2EremoveEvents%28%29%3B%0A%0A%20%20%20%20this%2EinteractionDOMElement%20%3D%20element%3B%0A%0A%20%20%20%20this%2Eresolution%20%3D%20resolution%20%7C%7C%201%3B%0A%0A%20%20%20%20this%2EaddEvents%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Registers%20all%20the%20DOM%20events%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EaddEvents%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28%21this%2EinteractionDOMElement%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20core%2Eticker%2Eshared%2Eadd%28this%2Eupdate%2C%20this%29%3B%0A%0A%20%20%20%20if%20%28window%2Enavigator%2EmsPointerEnabled%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EinteractionDOMElement%2Estyle%5B%27%2Dms%2Dcontent%2Dzooming%27%5D%20%3D%20%27none%27%3B%0A%20%20%20%20%20%20%20%20this%2EinteractionDOMElement%2Estyle%5B%27%2Dms%2Dtouch%2Daction%27%5D%20%3D%20%27none%27%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20window%2Edocument%2EaddEventListener%28%27mousemove%27%2C%20%20%20%20this%2EonMouseMove%2C%20true%29%3B%0A%20%20%20%20this%2EinteractionDOMElement%2EaddEventListener%28%27mousedown%27%2C%20%20%20%20this%2EonMouseDown%2C%20true%29%3B%0A%20%20%20%20this%2EinteractionDOMElement%2EaddEventListener%28%27mouseout%27%2C%20%20%20%20%20this%2EonMouseOut%2C%20true%29%3B%0A%0A%20%20%20%20this%2EinteractionDOMElement%2EaddEventListener%28%27touchstart%27%2C%20%20%20this%2EonTouchStart%2C%20true%29%3B%0A%20%20%20%20this%2EinteractionDOMElement%2EaddEventListener%28%27touchend%27%2C%20%20%20%20%20this%2EonTouchEnd%2C%20true%29%3B%0A%20%20%20%20this%2EinteractionDOMElement%2EaddEventListener%28%27touchmove%27%2C%20%20%20%20this%2EonTouchMove%2C%20true%29%3B%0A%0A%20%20%20%20window%2EaddEventListener%28%27mouseup%27%2C%20%20this%2EonMouseUp%2C%20true%29%3B%0A%0A%20%20%20%20this%2EeventsAdded%20%3D%20true%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Removes%20all%20the%20DOM%20events%20that%20were%20previously%20registered%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EremoveEvents%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20if%20%28%21this%2EinteractionDOMElement%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20core%2Eticker%2Eshared%2Eremove%28this%2Eupdate%29%3B%0A%0A%20%20%20%20if%20%28window%2Enavigator%2EmsPointerEnabled%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EinteractionDOMElement%2Estyle%5B%27%2Dms%2Dcontent%2Dzooming%27%5D%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20this%2EinteractionDOMElement%2Estyle%5B%27%2Dms%2Dtouch%2Daction%27%5D%20%3D%20%27%27%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20window%2Edocument%2EremoveEventListener%28%27mousemove%27%2C%20this%2EonMouseMove%2C%20true%29%3B%0A%20%20%20%20this%2EinteractionDOMElement%2EremoveEventListener%28%27mousedown%27%2C%20this%2EonMouseDown%2C%20true%29%3B%0A%20%20%20%20this%2EinteractionDOMElement%2EremoveEventListener%28%27mouseout%27%2C%20%20this%2EonMouseOut%2C%20true%29%3B%0A%0A%20%20%20%20this%2EinteractionDOMElement%2EremoveEventListener%28%27touchstart%27%2C%20this%2EonTouchStart%2C%20true%29%3B%0A%20%20%20%20this%2EinteractionDOMElement%2EremoveEventListener%28%27touchend%27%2C%20%20this%2EonTouchEnd%2C%20true%29%3B%0A%20%20%20%20this%2EinteractionDOMElement%2EremoveEventListener%28%27touchmove%27%2C%20this%2EonTouchMove%2C%20true%29%3B%0A%0A%20%20%20%20this%2EinteractionDOMElement%20%3D%20null%3B%0A%0A%20%20%20%20window%2EremoveEventListener%28%27mouseup%27%2C%20%20this%2EonMouseUp%2C%20true%29%3B%0A%0A%20%20%20%20this%2EeventsAdded%20%3D%20false%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20state%20of%20interactive%20objects%2E%0A%20%2A%20Invoked%20by%20a%20throttled%20ticker%20update%20from%0A%20%2A%20%7B%40link%20PIXI%2Eticker%2Eshared%7D%2E%0A%20%2A%0A%20%2A%20%40param%20deltaTime%20%7Bnumber%7D%0A%20%2A%2F%0AInteractionManager%2Eprototype%2Eupdate%20%3D%20function%20%28deltaTime%29%0A%7B%0A%20%20%20%20this%2E%5FdeltaTime%20%2B%3D%20deltaTime%3B%0A%0A%20%20%20%20if%20%28this%2E%5FdeltaTime%20%3C%20this%2EinteractionFrequency%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2E%5FdeltaTime%20%3D%200%3B%0A%0A%20%20%20%20if%20%28%21this%2EinteractionDOMElement%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20if%20the%20user%20move%20the%20mouse%20this%20check%20has%20already%20been%20dfone%20using%20the%20mouse%20move%21%0A%20%20%20%20if%28this%2EdidMove%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EdidMove%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Ecursor%20%3D%20%27inherit%27%3B%0A%0A%20%20%20%20this%2EprocessInteractive%28this%2Emouse%2Eglobal%2C%20this%2Erenderer%2E%5FlastObjectRendered%2C%20this%2EprocessMouseOverOut%2C%20true%20%29%3B%0A%0A%20%20%20%20if%20%28this%2EcurrentCursorStyle%20%21%3D%3D%20this%2Ecursor%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EcurrentCursorStyle%20%3D%20this%2Ecursor%3B%0A%20%20%20%20%20%20%20%20this%2EinteractionDOMElement%2Estyle%2Ecursor%20%3D%20this%2Ecursor%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FTODO%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Dispatches%20an%20event%20on%20the%20display%20object%20that%20was%20interacted%20with%0A%20%2A%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EContainer%7CPIXI%2ESprite%7CPIXI%2Eextras%2ETilingSprite%7D%20the%20display%20object%20in%20question%0A%20%2A%20%40param%20eventString%20%7Bstring%7D%20the%20name%20of%20the%20event%20%28e%2Eg%2C%20mousedown%29%0A%20%2A%20%40param%20eventData%20%7Bobject%7D%20the%20event%20data%20object%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EdispatchEvent%20%3D%20function%20%28%20displayObject%2C%20eventString%2C%20eventData%20%29%0A%7B%0A%20%20%20%20if%28%21eventData%2Estopped%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20eventData%2Etarget%20%3D%20displayObject%3B%0A%20%20%20%20%20%20%20%20eventData%2Etype%20%3D%20eventString%3B%0A%0A%20%20%20%20%20%20%20%20displayObject%2Eemit%28%20eventString%2C%20eventData%20%29%3B%0A%0A%20%20%20%20%20%20%20%20if%28%20displayObject%5BeventString%5D%20%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayObject%5BeventString%5D%28%20eventData%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Maps%20x%20and%20y%20coords%20from%20a%20DOM%20object%20and%20maps%20them%20correctly%20to%20the%20pixi%20view%2E%20The%20resulting%20value%20is%20stored%20in%20the%20point%2E%0A%20%2A%20This%20takes%20into%20account%20the%20fact%20that%20the%20DOM%20element%20could%20be%20scaled%20and%20positioned%20anywhere%20on%20the%20screen%2E%0A%20%2A%0A%20%2A%20%40param%20%20%7BPIXI%2EPoint%7D%20point%20the%20point%20that%20the%20result%20will%20be%20stored%20in%0A%20%2A%20%40param%20%20%7Bnumber%7D%20x%20%20%20%20%20the%20x%20coord%20of%20the%20position%20to%20map%0A%20%2A%20%40param%20%20%7Bnumber%7D%20y%20%20%20%20%20the%20y%20coord%20of%20the%20position%20to%20map%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EmapPositionToPoint%20%3D%20function%20%28%20point%2C%20x%2C%20y%20%29%0A%7B%0A%20%20%20%20var%20rect%20%3D%20this%2EinteractionDOMElement%2EgetBoundingClientRect%28%29%3B%0A%20%20%20%20point%2Ex%20%3D%20%28%20%28%20x%20%2D%20rect%2Eleft%20%29%20%2A%20%28this%2EinteractionDOMElement%2Ewidth%20%20%2F%20rect%2Ewidth%20%20%29%20%29%20%2F%20this%2Eresolution%3B%0A%20%20%20%20point%2Ey%20%3D%20%28%20%28%20y%20%2D%20rect%2Etop%20%20%29%20%2A%20%28this%2EinteractionDOMElement%2Eheight%20%2F%20rect%2Eheight%20%29%20%29%20%2F%20this%2Eresolution%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20This%20function%20is%20provides%20a%20neat%20way%20of%20crawling%20through%20the%20scene%20graph%20and%20running%20a%20specified%20function%20on%20all%20interactive%20objects%20it%20finds%2E%0A%20%2A%20It%20will%20also%20take%20care%20of%20hit%20testing%20the%20interactive%20objects%20and%20passes%20the%20hit%20across%20in%20the%20function%2E%0A%20%2A%0A%20%2A%20%40param%20%20%7BPIXI%2EPoint%7D%20point%20the%20point%20that%20is%20tested%20for%20collision%0A%20%2A%20%40param%20%20%7BPIXI%2EContainer%7CPIXI%2ESprite%7CPIXI%2Eextras%2ETilingSprite%7D%20displayObject%20the%20displayObject%20that%20will%20be%20hit%20test%20%28recurcsivly%20crawls%20its%20children%29%0A%20%2A%20%40param%20%20%7BFunction%7D%20func%20the%20function%20that%20will%20be%20called%20on%20each%20interactive%20object%2E%20The%20displayObject%20and%20hit%20will%20be%20passed%20to%20the%20function%0A%20%2A%20%40param%20%20%7Bboolean%7D%20hitTest%20this%20indicates%20if%20the%20objects%20inside%20should%20be%20hit%20test%20against%20the%20point%0A%20%2A%20%40return%20%7Bboolean%7D%20returns%20true%20if%20the%20displayObject%20hit%20the%20point%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EprocessInteractive%20%3D%20function%20%28point%2C%20displayObject%2C%20func%2C%20hitTest%2C%20interactive%29%0A%7B%0A%20%20%20%20if%28%21displayObject%20%7C%7C%20%21displayObject%2Evisible%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Took%20a%20little%20while%20to%20rework%20this%20function%20correctly%21%20But%20now%20it%20is%20done%20and%20nice%20and%20optimised%2E%20%5E%5F%5E%0A%20%20%20%20%2F%2F%20%0A%20%20%20%20%2F%2F%20This%20function%20will%20now%20loop%20through%20all%20objects%20and%20then%20only%20hit%20test%20the%20objects%20it%20HAS%20to%2C%20not%20all%20of%20them%2E%20MUCH%20faster%2E%2E%0A%20%20%20%20%2F%2F%20An%20object%20will%20be%20hit%20test%20if%20the%20following%20is%20true%3A%0A%20%20%20%20%2F%2F%20%0A%20%20%20%20%2F%2F%201%3A%20It%20is%20interactive%2E%0A%20%20%20%20%2F%2F%202%3A%20It%20belongs%20to%20a%20parent%20that%20is%20interactive%20AND%20one%20of%20the%20parents%20children%20have%20not%20already%20been%20hit%2E%0A%20%20%20%20%2F%2F%20%0A%20%20%20%20%2F%2F%20As%20another%20little%20optimisation%20once%20an%20interactive%20object%20has%20been%20hit%20we%20can%20carry%20on%20through%20the%20scenegraph%2C%20but%20we%20know%20that%20there%20will%20be%20no%20more%20hits%21%20So%20we%20can%20avoid%20extra%20hit%20tests%0A%20%20%20%20%2F%2F%20A%20final%20optimisation%20is%20that%20an%20object%20is%20not%20hit%20test%20directly%20if%20a%20child%20has%20already%20been%20hit%2E%0A%20%20%20%20%0A%20%20%20%20var%20hit%20%3D%20false%2C%0A%20%20%20%20%20%20%20%20interactiveParent%20%3D%20interactive%20%3D%20displayObject%2Einteractive%20%7C%7C%20interactive%3B%0A%0A%20%20%20%20%2F%2F%20if%20the%20displayobject%20has%20a%20hitArea%2C%20then%20it%20does%20not%20need%20to%20hitTest%20children%2E%0A%20%20%20%20if%28displayObject%2EhitArea%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20interactiveParent%20%3D%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20%2A%2A%20FREE%20TIP%20%2A%2A%21%20If%20an%20object%20is%20not%20interacttive%20or%20has%20no%20buttons%20in%20it%20%28such%20as%20a%20game%20scene%21%29%20set%20interactiveChildren%20to%20false%20for%20that%20displayObject%2E%0A%20%20%20%20%2F%2F%20This%20will%20allow%20pixi%20to%20completly%20ignore%20and%20bypass%20checking%20the%20displayObjects%20children%2E%0A%20%20%20%20if%28displayObject%2EinteractiveChildren%29%0A%20%20%20%20%7B%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20children%20%3D%20displayObject%2Echildren%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20children%2Elength%2D1%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20time%20to%20get%20recursive%2E%2E%20if%20this%20function%20will%20return%20if%20somthing%20is%20hit%2E%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28%20this%2EprocessInteractive%28point%2C%20children%5Bi%5D%2C%20func%2C%20hitTest%2C%20interactiveParent%29%20%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hit%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20we%20no%20longer%20need%20to%20hit%20test%20any%20more%20objects%20in%20this%20container%20as%20we%20we%20now%20know%20the%20parent%20has%20been%20hit%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20interactiveParent%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20child%20is%20interactive%20%2C%20that%20means%20that%20the%20object%20hit%20was%20actually%20interactive%20and%20not%20just%20the%20child%20of%20an%20interactive%20object%2E%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20means%20we%20no%20longer%20need%20to%20hit%20test%20anything%20else%2E%20We%20still%20need%20to%20run%20through%20all%20objects%2C%20but%20we%20don%27t%20need%20to%20perform%20any%20hit%20tests%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%28children%5Bi%5D%2Einteractive%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hitTest%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20no%20point%20running%20this%20if%20the%20item%20is%20not%20interactive%20or%20does%20not%20have%20an%20interactive%20parent%2E%0A%20%20%20%20if%28interactive%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20we%20are%20hit%20testing%20%28as%20in%20we%20have%20no%20hit%20any%20objects%20yet%29%0A%20%20%20%20%20%20%20%20%2F%2F%20We%20also%20don%27t%20need%20to%20worry%20about%20hit%20testing%20if%20once%20of%20the%20displayObjects%20children%20has%20already%20been%20hit%21%0A%20%20%20%20%20%20%20%20if%28hitTest%20%26%26%20%21hit%29%0A%20%20%20%20%20%20%20%20%7B%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28displayObject%2EhitArea%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayObject%2EworldTransform%2EapplyInverse%28point%2C%20%20this%2E%5FtempPoint%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hit%20%3D%20displayObject%2EhitArea%2Econtains%28%20this%2E%5FtempPoint%2Ex%2C%20this%2E%5FtempPoint%2Ey%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%28displayObject%2EcontainsPoint%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hit%20%3D%20displayObject%2EcontainsPoint%28point%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%28displayObject%2Einteractive%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%28displayObject%2C%20hit%29%3B%20%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20hit%3B%0A%20%20%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Is%20called%20when%20the%20mouse%20button%20is%20pressed%20down%20on%20the%20renderer%20element%0A%20%2A%0A%20%2A%20%40param%20event%20%7BEvent%7D%20The%20DOM%20event%20of%20a%20mouse%20button%20being%20pressed%20down%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EonMouseDown%20%3D%20function%20%28event%29%0A%7B%0A%20%20%20%20this%2Emouse%2EoriginalEvent%20%3D%20event%3B%0A%20%20%20%20this%2EeventData%2Edata%20%3D%20this%2Emouse%3B%0A%20%20%20%20this%2EeventData%2Estopped%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2F%20Update%20internal%20mouse%20reference%0A%20%20%20%20this%2EmapPositionToPoint%28%20this%2Emouse%2Eglobal%2C%20event%2EclientX%2C%20event%2EclientY%29%3B%0A%0A%20%20%20%20if%20%28this%2EautoPreventDefault%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Emouse%2EoriginalEvent%2EpreventDefault%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EprocessInteractive%28this%2Emouse%2Eglobal%2C%20this%2Erenderer%2E%5FlastObjectRendered%2C%20this%2EprocessMouseDown%2C%20true%20%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Processes%20the%20result%20of%20the%20mouse%20down%20check%20and%20dispatches%20the%20event%20if%20need%20be%0A%20%2A%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EContainer%7CPIXI%2ESprite%7CPIXI%2Eextras%2ETilingSprite%7D%20The%20display%20object%20that%20was%20tested%0A%20%2A%20%40param%20hit%20%7Bboolean%7D%20the%20result%20of%20the%20hit%20test%20on%20the%20dispay%20object%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EprocessMouseDown%20%3D%20function%20%28%20displayObject%2C%20hit%20%29%0A%7B%0A%20%20%20%20var%20e%20%3D%20this%2Emouse%2EoriginalEvent%3B%0A%20%20%20%20%0A%20%20%20%20var%20isRightButton%20%3D%20e%2Ebutton%20%3D%3D%3D%202%20%7C%7C%20e%2Ewhich%20%3D%3D%3D%203%3B%0A%0A%20%20%20%20if%28hit%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20displayObject%5B%20isRightButton%20%3F%20%27%5FisRightDown%27%20%3A%20%27%5FisLeftDown%27%20%5D%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20isRightButton%20%3F%20%27rightdown%27%20%3A%20%27mousedown%27%2C%20this%2EeventData%20%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0A%0A%2F%2A%2A%0A%20%2A%20Is%20called%20when%20the%20mouse%20button%20is%20released%20on%20the%20renderer%20element%0A%20%2A%0A%20%2A%20%40param%20event%20%7BEvent%7D%20The%20DOM%20event%20of%20a%20mouse%20button%20being%20released%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EonMouseUp%20%3D%20function%20%28event%29%0A%7B%0A%20%20%20%20this%2Emouse%2EoriginalEvent%20%3D%20event%3B%0A%20%20%20%20this%2EeventData%2Edata%20%3D%20this%2Emouse%3B%0A%20%20%20%20this%2EeventData%2Estopped%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2F%20Update%20internal%20mouse%20reference%0A%20%20%20%20this%2EmapPositionToPoint%28%20this%2Emouse%2Eglobal%2C%20event%2EclientX%2C%20event%2EclientY%29%3B%0A%0A%20%20%20%20this%2EprocessInteractive%28this%2Emouse%2Eglobal%2C%20this%2Erenderer%2E%5FlastObjectRendered%2C%20this%2EprocessMouseUp%2C%20true%20%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Processes%20the%20result%20of%20the%20mouse%20up%20check%20and%20dispatches%20the%20event%20if%20need%20be%0A%20%2A%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EContainer%7CPIXI%2ESprite%7CPIXI%2Eextras%2ETilingSprite%7D%20The%20display%20object%20that%20was%20tested%0A%20%2A%20%40param%20hit%20%7Bboolean%7D%20the%20result%20of%20the%20hit%20test%20on%20the%20display%20object%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EprocessMouseUp%20%3D%20function%20%28%20displayObject%2C%20hit%20%29%0A%7B%0A%20%20%20%20var%20e%20%3D%20this%2Emouse%2EoriginalEvent%3B%0A%0A%20%20%20%20var%20isRightButton%20%3D%20e%2Ebutton%20%3D%3D%3D%202%20%7C%7C%20e%2Ewhich%20%3D%3D%3D%203%3B%0A%20%20%20%20var%20isDown%20%3D%20%20isRightButton%20%3F%20%27%5FisRightDown%27%20%3A%20%27%5FisLeftDown%27%3B%0A%0A%20%20%20%20if%28hit%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20isRightButton%20%3F%20%27rightup%27%20%3A%20%27mouseup%27%2C%20this%2EeventData%20%29%3B%0A%0A%20%20%20%20%20%20%20%20if%28%20displayObject%5B%20isDown%20%5D%20%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayObject%5B%20isDown%20%5D%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20isRightButton%20%3F%20%27rightclick%27%20%3A%20%27click%27%2C%20this%2EeventData%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%28%20displayObject%5B%20isDown%20%5D%20%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayObject%5B%20isDown%20%5D%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20isRightButton%20%3F%20%27rightupoutside%27%20%3A%20%27mouseupoutside%27%2C%20this%2EeventData%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Is%20called%20when%20the%20mouse%20moves%20across%20the%20renderer%20element%0A%20%2A%0A%20%2A%20%40param%20event%20%7BEvent%7D%20The%20DOM%20event%20of%20the%20mouse%20moving%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EonMouseMove%20%3D%20function%20%28event%29%0A%7B%0A%20%20%20%20this%2Emouse%2EoriginalEvent%20%3D%20event%3B%0A%20%20%20%20this%2EeventData%2Edata%20%3D%20this%2Emouse%3B%0A%20%20%20%20this%2EeventData%2Estopped%20%3D%20false%3B%0A%0A%20%20%20%20this%2EmapPositionToPoint%28%20this%2Emouse%2Eglobal%2C%20event%2EclientX%2C%20event%2EclientY%29%3B%0A%0A%20%20%20%20this%2EdidMove%20%3D%20true%3B%0A%0A%20%20%20%20this%2Ecursor%20%3D%20%27inherit%27%3B%0A%0A%20%20%20%20this%2EprocessInteractive%28this%2Emouse%2Eglobal%2C%20this%2Erenderer%2E%5FlastObjectRendered%2C%20this%2EprocessMouseMove%2C%20true%20%29%3B%0A%0A%20%20%20%20if%20%28this%2EcurrentCursorStyle%20%21%3D%3D%20this%2Ecursor%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EcurrentCursorStyle%20%3D%20this%2Ecursor%3B%0A%20%20%20%20%20%20%20%20this%2EinteractionDOMElement%2Estyle%2Ecursor%20%3D%20this%2Ecursor%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FTODO%20BUG%20for%20parents%20ineractive%20object%20%28border%20order%20issue%29%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Processes%20the%20result%20of%20the%20mouse%20move%20check%20and%20dispatches%20the%20event%20if%20need%20be%0A%20%2A%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EContainer%7CPIXI%2ESprite%7CPIXI%2Eextras%2ETilingSprite%7D%20The%20display%20object%20that%20was%20tested%0A%20%2A%20%40param%20hit%20%7Bboolean%7D%20the%20result%20of%20the%20hit%20test%20on%20the%20display%20object%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EprocessMouseMove%20%3D%20function%20%28%20displayObject%2C%20hit%20%29%0A%7B%0A%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20%27mousemove%27%2C%20this%2EeventData%29%3B%0A%20%20%20%20this%2EprocessMouseOverOut%28displayObject%2C%20hit%29%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Is%20called%20when%20the%20mouse%20is%20moved%20out%20of%20the%20renderer%20element%0A%20%2A%0A%20%2A%20%40param%20event%20%7BEvent%7D%20The%20DOM%20event%20of%20a%20mouse%20being%20moved%20out%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EonMouseOut%20%3D%20function%20%28event%29%0A%7B%0A%20%20%20%20this%2Emouse%2EoriginalEvent%20%3D%20event%3B%0A%20%20%20%20this%2EeventData%2Estopped%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2F%20Update%20internal%20mouse%20reference%0A%20%20%20%20this%2EmapPositionToPoint%28%20this%2Emouse%2Eglobal%2C%20event%2EclientX%2C%20event%2EclientY%29%3B%0A%0A%20%20%20%20this%2EinteractionDOMElement%2Estyle%2Ecursor%20%3D%20%27inherit%27%3B%0A%0A%20%20%20%20%2F%2F%20TODO%20optimize%20by%20not%20check%20EVERY%20TIME%21%20maybe%20half%20as%20often%3F%20%2F%2F%0A%20%20%20%20this%2EmapPositionToPoint%28%20this%2Emouse%2Eglobal%2C%20event%2EclientX%2C%20event%2EclientY%20%29%3B%0A%0A%20%20%20%20this%2EprocessInteractive%28%20this%2Emouse%2Eglobal%2C%20this%2Erenderer%2E%5FlastObjectRendered%2C%20this%2EprocessMouseOverOut%2C%20false%20%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Processes%20the%20result%20of%20the%20mouse%20over%2Fout%20check%20and%20dispatches%20the%20event%20if%20need%20be%0A%20%2A%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EContainer%7CPIXI%2ESprite%7CPIXI%2Eextras%2ETilingSprite%7D%20The%20display%20object%20that%20was%20tested%0A%20%2A%20%40param%20hit%20%7Bboolean%7D%20the%20result%20of%20the%20hit%20test%20on%20the%20display%20object%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EprocessMouseOverOut%20%3D%20function%20%28%20displayObject%2C%20hit%20%29%0A%7B%0A%20%20%20%20if%28hit%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%28%21displayObject%2E%5Fover%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayObject%2E%5Fover%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20%27mouseover%27%2C%20this%2EeventData%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28displayObject%2EbuttonMode%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ecursor%20%3D%20displayObject%2EdefaultCursor%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%28displayObject%2E%5Fover%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayObject%2E%5Fover%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20%27mouseout%27%2C%20this%2EeventData%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Is%20called%20when%20a%20touch%20is%20started%20on%20the%20renderer%20element%0A%20%2A%0A%20%2A%20%40param%20event%20%7BEvent%7D%20The%20DOM%20event%20of%20a%20touch%20starting%20on%20the%20renderer%20view%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EonTouchStart%20%3D%20function%20%28event%29%0A%7B%0A%20%20%20%20if%20%28this%2EautoPreventDefault%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20changedTouches%20%3D%20event%2EchangedTouches%3B%0A%20%20%20%20var%20cLength%20%3D%20changedTouches%2Elength%3B%0A%0A%20%20%20%20for%20%28var%20i%3D0%3B%20i%20%3C%20cLength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20touchEvent%20%3D%20changedTouches%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%2F%2FTODO%20POOL%0A%20%20%20%20%20%20%20%20var%20touchData%20%3D%20this%2EgetTouchData%28%20touchEvent%20%29%3B%0A%0A%20%20%20%20%20%20%20%20touchData%2EoriginalEvent%20%3D%20event%3B%0A%0A%20%20%20%20%20%20%20%20this%2EeventData%2Edata%20%3D%20touchData%3B%0A%20%20%20%20%20%20%20%20this%2EeventData%2Estopped%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20this%2EprocessInteractive%28%20touchData%2Eglobal%2C%20this%2Erenderer%2E%5FlastObjectRendered%2C%20this%2EprocessTouchStart%2C%20true%20%29%3B%0A%0A%20%20%20%20%20%20%20%20this%2EreturnTouchData%28%20touchData%20%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Processes%20the%20result%20of%20a%20touch%20check%20and%20dispatches%20the%20event%20if%20need%20be%0A%20%2A%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EContainer%7CPIXI%2ESprite%7CPIXI%2Eextras%2ETilingSprite%7D%20The%20display%20object%20that%20was%20tested%0A%20%2A%20%40param%20hit%20%7Bboolean%7D%20the%20result%20of%20the%20hit%20test%20on%20the%20display%20object%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EprocessTouchStart%20%3D%20function%20%28%20displayObject%2C%20hit%20%29%0A%7B%0A%20%20%20%20if%28hit%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20displayObject%2E%5FtouchDown%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20%27touchstart%27%2C%20this%2EeventData%20%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Is%20called%20when%20a%20touch%20ends%20on%20the%20renderer%20element%0A%20%2A%0A%20%2A%20%40param%20event%20%7BEvent%7D%20The%20DOM%20event%20of%20a%20touch%20ending%20on%20the%20renderer%20view%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EonTouchEnd%20%3D%20function%20%28event%29%0A%7B%0A%20%20%20%20if%20%28this%2EautoPreventDefault%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20changedTouches%20%3D%20event%2EchangedTouches%3B%0A%20%20%20%20var%20cLength%20%3D%20changedTouches%2Elength%3B%0A%0A%20%20%20%20for%20%28var%20i%3D0%3B%20i%20%3C%20cLength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20touchEvent%20%3D%20changedTouches%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20var%20touchData%20%3D%20this%2EgetTouchData%28%20touchEvent%20%29%3B%0A%0A%20%20%20%20%20%20%20%20touchData%2EoriginalEvent%20%3D%20event%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FTODO%20this%20should%20be%20passed%20along%2E%2E%20no%20set%0A%20%20%20%20%20%20%20%20this%2EeventData%2Edata%20%3D%20touchData%3B%0A%20%20%20%20%20%20%20%20this%2EeventData%2Estopped%20%3D%20false%3B%0A%0A%0A%20%20%20%20%20%20%20%20this%2EprocessInteractive%28%20touchData%2Eglobal%2C%20this%2Erenderer%2E%5FlastObjectRendered%2C%20this%2EprocessTouchEnd%2C%20true%20%29%3B%0A%0A%20%20%20%20%20%20%20%20this%2EreturnTouchData%28%20touchData%20%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Processes%20the%20result%20of%20the%20end%20of%20a%20touch%20and%20dispatches%20the%20event%20if%20need%20be%0A%20%2A%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EContainer%7CPIXI%2ESprite%7CPIXI%2Eextras%2ETilingSprite%7D%20The%20display%20object%20that%20was%20tested%0A%20%2A%20%40param%20hit%20%7Bboolean%7D%20the%20result%20of%20the%20hit%20test%20on%20the%20display%20object%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EprocessTouchEnd%20%3D%20function%20%28%20displayObject%2C%20hit%20%29%0A%7B%0A%20%20%20%20if%28hit%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20%27touchend%27%2C%20this%2EeventData%20%29%3B%0A%0A%20%20%20%20%20%20%20%20if%28%20displayObject%2E%5FtouchDown%20%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayObject%2E%5FtouchDown%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20%27tap%27%2C%20this%2EeventData%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%28%20displayObject%2E%5FtouchDown%20%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20displayObject%2E%5FtouchDown%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20%27touchendoutside%27%2C%20this%2EeventData%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Is%20called%20when%20a%20touch%20is%20moved%20across%20the%20renderer%20element%0A%20%2A%0A%20%2A%20%40param%20event%20%7BEvent%7D%20The%20DOM%20event%20of%20a%20touch%20moving%20across%20the%20renderer%20view%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EonTouchMove%20%3D%20function%20%28event%29%0A%7B%0A%20%20%20%20if%20%28this%2EautoPreventDefault%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20changedTouches%20%3D%20event%2EchangedTouches%3B%0A%20%20%20%20var%20cLength%20%3D%20changedTouches%2Elength%3B%0A%0A%20%20%20%20for%20%28var%20i%3D0%3B%20i%20%3C%20cLength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20touchEvent%20%3D%20changedTouches%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20var%20touchData%20%3D%20this%2EgetTouchData%28%20touchEvent%20%29%3B%0A%0A%20%20%20%20%20%20%20%20touchData%2EoriginalEvent%20%3D%20event%3B%0A%0A%20%20%20%20%20%20%20%20this%2EeventData%2Edata%20%3D%20touchData%3B%0A%20%20%20%20%20%20%20%20this%2EeventData%2Estopped%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20this%2EprocessInteractive%28%20touchData%2Eglobal%2C%20this%2Erenderer%2E%5FlastObjectRendered%2C%20this%2EprocessTouchMove%2C%20true%20%29%3B%0A%0A%20%20%20%20%20%20%20%20this%2EreturnTouchData%28%20touchData%20%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Processes%20the%20result%20of%20a%20touch%20move%20check%20and%20dispatches%20the%20event%20if%20need%20be%0A%20%2A%0A%20%2A%20%40param%20displayObject%20%7BPIXI%2EContainer%7CPIXI%2ESprite%7CPIXI%2Eextras%2ETilingSprite%7D%20The%20display%20object%20that%20was%20tested%0A%20%2A%20%40param%20hit%20%7Bboolean%7D%20the%20result%20of%20the%20hit%20test%20on%20the%20display%20object%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EprocessTouchMove%20%3D%20function%20%28%20displayObject%2C%20hit%20%29%0A%7B%0A%20%20%20%20hit%20%3D%20hit%3B%0A%20%20%20%20this%2EdispatchEvent%28%20displayObject%2C%20%27touchmove%27%2C%20this%2EeventData%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Grabs%20an%20interaction%20data%20object%20from%20the%20internal%20pool%0A%20%2A%0A%20%2A%20%40param%20touchEvent%20%7BEventData%7D%20The%20touch%20event%20we%20need%20to%20pair%20with%20an%20interactionData%20object%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EgetTouchData%20%3D%20function%20%28touchEvent%29%0A%7B%0A%20%20%20%20var%20touchData%20%3D%20this%2EinteractiveDataPool%2Epop%28%29%3B%0A%0A%20%20%20%20if%28%21touchData%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20touchData%20%3D%20new%20InteractionData%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20touchData%2Eidentifier%20%3D%20touchEvent%2Eidentifier%3B%0A%20%20%20%20this%2EmapPositionToPoint%28%20touchData%2Eglobal%2C%20touchEvent%2EclientX%2C%20touchEvent%2EclientY%20%29%3B%0A%0A%20%20%20%20if%28navigator%2EisCocoonJS%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20touchData%2Eglobal%2Ex%20%3D%20touchData%2Eglobal%2Ex%20%2F%20this%2Eresolution%3B%0A%20%20%20%20%20%20%20%20touchData%2Eglobal%2Ey%20%3D%20touchData%2Eglobal%2Ey%20%2F%20this%2Eresolution%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20touchEvent%2EglobalX%20%3D%20touchData%2Eglobal%2Ex%3B%0A%20%20%20%20touchEvent%2EglobalY%20%3D%20touchData%2Eglobal%2Ey%3B%0A%0A%20%20%20%20return%20touchData%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Returns%20an%20interaction%20data%20object%20to%20the%20internal%20pool%0A%20%2A%0A%20%2A%20%40param%20touchData%20%7BPIXI%2Einteraction%2EInteractionData%7D%20The%20touch%20data%20object%20we%20want%20to%20return%20to%20the%20pool%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AInteractionManager%2Eprototype%2EreturnTouchData%20%3D%20function%20%28%20touchData%20%29%0A%7B%0A%20%20%20%20this%2EinteractiveDataPool%2Epush%28%20touchData%20%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20interaction%20manager%0A%20%2A%0A%20%2A%2F%0AInteractionManager%2Eprototype%2Edestroy%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this%2EremoveEvents%28%29%3B%0A%0A%20%20%20%20this%2Erenderer%20%3D%20null%3B%0A%0A%20%20%20%20this%2Emouse%20%3D%20null%3B%0A%0A%20%20%20%20this%2EeventData%20%3D%20null%3B%0A%0A%20%20%20%20this%2EinteractiveDataPool%20%3D%20null%3B%0A%0A%20%20%20%20this%2EinteractionDOMElement%20%3D%20null%3B%0A%0A%20%20%20%20this%2EonMouseUp%20%3D%20null%3B%0A%20%20%20%20this%2EprocessMouseUp%20%3D%20null%3B%0A%0A%0A%20%20%20%20this%2EonMouseDown%20%3D%20null%3B%0A%20%20%20%20this%2EprocessMouseDown%20%3D%20null%3B%0A%0A%20%20%20%20this%2EonMouseMove%20%3D%20null%3B%0A%20%20%20%20this%2EprocessMouseMove%20%3D%20null%3B%0A%0A%20%20%20%20this%2EonMouseOut%20%3D%20null%3B%0A%20%20%20%20this%2EprocessMouseOverOut%20%3D%20null%3B%0A%0A%0A%20%20%20%20this%2EonTouchStart%20%3D%20null%3B%0A%20%20%20%20this%2EprocessTouchStart%20%3D%20null%3B%0A%0A%20%20%20%20this%2EonTouchEnd%20%3D%20null%3B%0A%20%20%20%20this%2EprocessTouchEnd%20%3D%20null%3B%0A%0A%20%20%20%20this%2EonTouchMove%20%3D%20null%3B%0A%20%20%20%20this%2EprocessTouchMove%20%3D%20null%3B%0A%0A%20%20%20%20this%2E%5FtempPoint%20%3D%20null%3B%0A%7D%3B%0A%0Acore%2EWebGLRenderer%2EregisterPlugin%28%27interaction%27%2C%20InteractionManager%29%3B%0Acore%2ECanvasRenderer%2EregisterPlugin%28%27interaction%27%2C%20InteractionManager%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%2C%22%2E%2FInteractionData%22%3A109%2C%22%2E%2FinteractiveTarget%22%3A112%7D%5D%2C111%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20%40file%20%20%20%20%20%20%20%20Main%20export%20of%20the%20PIXI%20interactions%20library%0A%20%2A%20%40author%20%20%20%20%20%20Mat%20Groves%20%3Cmat%40goodboydigital%2Ecom%3E%0A%20%2A%20%40copyright%20%20%202013%2D2015%20GoodBoyDigital%0A%20%2A%20%40license%20%20%20%20%20%7B%40link%20https%3A%2F%2Fgithub%2Ecom%2Fpixijs%2Fpixi%2Ejs%2Fblob%2Fmaster%2FLICENSE%7CMIT%20License%7D%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20%40namespace%20PIXI%2Einteraction%0A%20%2A%2F%0Amodule%2Eexports%20%3D%20%7B%0A%20%20%20%20InteractionData%3A%20%20%20%20require%28%27%2E%2FInteractionData%27%29%2C%0A%20%20%20%20InteractionManager%3A%20require%28%27%2E%2FInteractionManager%27%29%2C%0A%20%20%20%20interactiveTarget%3A%20%20require%28%27%2E%2FinteractiveTarget%27%29%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FInteractionData%22%3A109%2C%22%2E%2FInteractionManager%22%3A110%2C%22%2E%2FinteractiveTarget%22%3A112%7D%5D%2C112%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20Default%20property%20values%20of%20interactive%20objects%0A%20%2A%20used%20by%20%7B%40link%20PIXI%2Einteraction%2EInteractionManager%7D%2E%0A%20%2A%0A%20%2A%20%40mixin%0A%20%2A%20%40memberof%20PIXI%2Einteraction%0A%20%2A%20%40example%0A%20%2A%20%20%20%20%20%20function%20MyObject%28%29%20%7B%7D%0A%20%2A%0A%20%2A%20%20%20%20%20%20Object%2Eassign%28%0A%20%2A%20%20%20%20%20%20%20%20%20%20MyObject%2Eprototype%2C%0A%20%2A%20%20%20%20%20%20%20%20%20%20PIXI%2Einteraction%2EinteractiveTarget%0A%20%2A%20%20%20%20%20%20%29%3B%0A%20%2A%2F%0Avar%20interactiveTarget%20%3D%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Needs%20docs%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20interactive%3A%20false%2C%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Needs%20docs%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20buttonMode%3A%20false%2C%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Needs%20docs%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20interactiveChildren%3A%20true%2C%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Needs%20docs%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20defaultCursor%3A%20%27pointer%27%2C%0A%0A%20%20%20%20%2F%2F%20some%20internal%20checks%2E%2E%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Needs%20docs%2E%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5Fover%3A%20false%2C%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20%40todo%20Needs%20docs%2E%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FtouchDown%3A%20false%0A%7D%3B%0A%0Amodule%2Eexports%20%3D%20interactiveTarget%3B%0A%0A%7D%2C%7B%7D%5D%2C113%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Resource%20%3D%20require%28%27resource%2Dloader%27%29%2EResource%2C%0A%20%20%20%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%2C%0A%20%20%20%20extras%20%3D%20require%28%27%2E%2E%2Fextras%27%29%2C%0A%20%20%20%20path%20%3D%20require%28%27path%27%29%3B%0A%0A%0Afunction%20parse%28resource%2C%20texture%29%20%7B%0A%20%20%20%20var%20data%20%3D%20%7B%7D%3B%0A%20%20%20%20var%20info%20%3D%20resource%2Edata%2EgetElementsByTagName%28%27info%27%29%5B0%5D%3B%0A%20%20%20%20var%20common%20%3D%20resource%2Edata%2EgetElementsByTagName%28%27common%27%29%5B0%5D%3B%0A%0A%20%20%20%20data%2Efont%20%3D%20info%2EgetAttribute%28%27face%27%29%3B%0A%20%20%20%20data%2Esize%20%3D%20parseInt%28info%2EgetAttribute%28%27size%27%29%2C%2010%29%3B%0A%20%20%20%20data%2ElineHeight%20%3D%20parseInt%28common%2EgetAttribute%28%27lineHeight%27%29%2C%2010%29%3B%0A%20%20%20%20data%2Echars%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2Fparse%20letters%0A%20%20%20%20var%20letters%20%3D%20resource%2Edata%2EgetElementsByTagName%28%27char%27%29%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20letters%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20charCode%20%3D%20parseInt%28letters%5Bi%5D%2EgetAttribute%28%27id%27%29%2C%2010%29%3B%0A%0A%20%20%20%20%20%20%20%20var%20textureRect%20%3D%20new%20core%2ERectangle%28%0A%20%20%20%20%20%20%20%20%20%20%20%20parseInt%28letters%5Bi%5D%2EgetAttribute%28%27x%27%29%2C%2010%29%20%2B%20texture%2Eframe%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20parseInt%28letters%5Bi%5D%2EgetAttribute%28%27y%27%29%2C%2010%29%20%2B%20texture%2Eframe%2Ey%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20parseInt%28letters%5Bi%5D%2EgetAttribute%28%27width%27%29%2C%2010%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20parseInt%28letters%5Bi%5D%2EgetAttribute%28%27height%27%29%2C%2010%29%0A%20%20%20%20%20%20%20%20%29%3B%0A%0A%20%20%20%20%20%20%20%20data%2Echars%5BcharCode%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20xOffset%3A%20parseInt%28letters%5Bi%5D%2EgetAttribute%28%27xoffset%27%29%2C%2010%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20yOffset%3A%20parseInt%28letters%5Bi%5D%2EgetAttribute%28%27yoffset%27%29%2C%2010%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20xAdvance%3A%20parseInt%28letters%5Bi%5D%2EgetAttribute%28%27xadvance%27%29%2C%2010%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20kerning%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20texture%3A%20new%20core%2ETexture%28texture%2EbaseTexture%2C%20textureRect%29%0A%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2Fparse%20kernings%0A%20%20%20%20var%20kernings%20%3D%20resource%2Edata%2EgetElementsByTagName%28%27kerning%27%29%3B%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20kernings%2Elength%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20first%20%3D%20parseInt%28kernings%5Bi%5D%2EgetAttribute%28%27first%27%29%2C%2010%29%3B%0A%20%20%20%20%20%20%20%20var%20second%20%3D%20parseInt%28kernings%5Bi%5D%2EgetAttribute%28%27second%27%29%2C%2010%29%3B%0A%20%20%20%20%20%20%20%20var%20amount%20%3D%20parseInt%28kernings%5Bi%5D%2EgetAttribute%28%27amount%27%29%2C%2010%29%3B%0A%0A%20%20%20%20%20%20%20%20data%2Echars%5Bsecond%5D%2Ekerning%5Bfirst%5D%20%3D%20amount%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20resource%2EbitmapFont%20%3D%20data%3B%0A%0A%20%20%20%20%2F%2F%20I%27m%20leaving%20this%20as%20a%20temporary%20fix%20so%20we%20can%20test%20the%20bitmap%20fonts%20in%20v3%0A%20%20%20%20%2F%2F%20but%20it%27s%20very%20likely%20to%20change%0A%20%20%20%20extras%2EBitmapText%2Efonts%5Bdata%2Efont%5D%20%3D%20data%3B%0A%7D%0A%0A%0Amodule%2Eexports%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20function%20%28resource%2C%20next%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20skip%20if%20no%20data%20or%20not%20xml%20data%0A%20%20%20%20%20%20%20%20if%20%28%21resource%2Edata%20%7C%7C%20%21resource%2EisXml%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20skip%20if%20not%20bitmap%20font%20data%2C%20using%20some%20silly%20duck%2Dtyping%0A%20%20%20%20%20%20%20%20if%20%28%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%2EgetElementsByTagName%28%27page%27%29%2Elength%20%3D%3D%3D%200%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%2EgetElementsByTagName%28%27info%27%29%2Elength%20%3D%3D%3D%200%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%2EgetElementsByTagName%28%27info%27%29%5B0%5D%2EgetAttribute%28%27face%27%29%20%3D%3D%3D%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20xmlUrl%20%3D%20path%2Edirname%28resource%2Eurl%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28xmlUrl%20%3D%3D%3D%20%27%2E%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20xmlUrl%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28this%2EbaseUrl%20%26%26%20xmlUrl%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20baseurl%20has%20a%20trailing%20slash%20then%20add%20one%20to%20xmlUrl%20so%20the%20replace%20works%20below%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2EbaseUrl%2EcharAt%28this%2EbaseUrl%2Elength%20%2D%201%29%20%3D%3D%3D%20%27%2F%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xmlUrl%20%2B%3D%20%27%2F%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20remove%20baseUrl%20from%20xmlUrl%0A%20%20%20%20%20%20%20%20%20%20%20%20xmlUrl%20%3D%20xmlUrl%2Ereplace%28this%2EbaseUrl%2C%20%27%27%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20there%20is%20an%20xmlUrl%20now%2C%20it%20needs%20a%20trailing%20slash%2E%20Ensure%20that%20it%20does%20if%20the%20string%20isn%27t%20empty%2E%0A%20%20%20%20%20%20%20%20if%20%28xmlUrl%20%26%26%20xmlUrl%2EcharAt%28xmlUrl%2Elength%20%2D%201%29%20%21%3D%3D%20%27%2F%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20xmlUrl%20%2B%3D%20%27%2F%27%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20textureUrl%20%3D%20xmlUrl%20%2B%20resource%2Edata%2EgetElementsByTagName%28%27page%27%29%5B0%5D%2EgetAttribute%28%27file%27%29%3B%0A%20%20%20%20%20%20%20%20if%20%28core%2Eutils%2ETextureCache%5BtextureUrl%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Freuse%20existing%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20parse%28resource%2C%20core%2Eutils%2ETextureCache%5BtextureUrl%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20loadOptions%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20crossOrigin%3A%20resource%2EcrossOrigin%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20loadType%3A%20Resource%2ELOAD%5FTYPE%2EIMAGE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20metadata%3A%20resource%2Emetadata%2EimageMetadata%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20load%20the%20texture%20for%20the%20font%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eadd%28resource%2Ename%20%2B%20%27%5Fimage%27%2C%20textureUrl%2C%20loadOptions%2C%20function%20%28res%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parse%28resource%2C%20res%2Etexture%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%2C%22%2E%2E%2Fextras%22%3A79%2C%22path%22%3A2%2C%22resource%2Dloader%22%3A133%7D%5D%2C114%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20%40file%20%20%20%20%20%20%20%20Main%20export%20of%20the%20PIXI%20loaders%20library%0A%20%2A%20%40author%20%20%20%20%20%20Mat%20Groves%20%3Cmat%40goodboydigital%2Ecom%3E%0A%20%2A%20%40copyright%20%20%202013%2D2015%20GoodBoyDigital%0A%20%2A%20%40license%20%20%20%20%20%7B%40link%20https%3A%2F%2Fgithub%2Ecom%2Fpixijs%2Fpixi%2Ejs%2Fblob%2Fmaster%2FLICENSE%7CMIT%20License%7D%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20%40namespace%20PIXI%2Eloaders%0A%20%2A%2F%0Amodule%2Eexports%20%3D%20%7B%0A%20%20%20%20Loader%3A%20%20%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2Floader%27%29%2C%0A%0A%20%20%20%20%2F%2F%20parsers%0A%20%20%20%20bitmapFontParser%3A%20%20%20require%28%27%2E%2FbitmapFontParser%27%29%2C%0A%20%20%20%20spritesheetParser%3A%20%20require%28%27%2E%2FspritesheetParser%27%29%2C%0A%20%20%20%20textureParser%3A%20%20%20%20%20%20require%28%27%2E%2FtextureParser%27%29%2C%0A%20%20%20%20Resource%3A%20%20%20%20%20%20%20%20%20%20%20require%28%27resource%2Dloader%27%29%2EResource%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FbitmapFontParser%22%3A113%2C%22%2E%2Floader%22%3A115%2C%22%2E%2FspritesheetParser%22%3A116%2C%22%2E%2FtextureParser%22%3A117%2C%22resource%2Dloader%22%3A133%7D%5D%2C115%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20ResourceLoader%20%3D%20require%28%27resource%2Dloader%27%29%2C%0A%20%20%20%20textureParser%20%3D%20require%28%27%2E%2FtextureParser%27%29%2C%0A%20%20%20%20spritesheetParser%20%3D%20require%28%27%2E%2FspritesheetParser%27%29%2C%0A%20%20%20%20bitmapFontParser%20%3D%20require%28%27%2E%2FbitmapFontParser%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%20The%20new%20loader%2C%20extends%20Resource%20Loader%20by%20Chad%20Engler%20%3A%20https%3A%2F%2Fgithub%2Ecom%2Fenglercj%2Fresource%2Dloader%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20var%20loader%20%3D%20PIXI%2Eloader%3B%20%2F%2F%20pixi%20exposes%20a%20premade%20instance%20for%20you%20to%20use%2E%0A%20%2A%20%2F%2For%0A%20%2A%20var%20loader%20%3D%20new%20PIXI%2Eloaders%2ELoader%28%29%3B%20%2F%2F%20you%20can%20also%20create%20your%20own%20if%20you%20want%0A%20%2A%0A%20%2A%20loader%2Eadd%28%27bunny%27%2C%22data%2Fbunny%2Epng%22%29%3B%0A%20%2A%0A%20%2A%20loader%2Eonce%28%27complete%27%2ConAssetsLoaded%29%3B%0A%20%2A%0A%20%2A%20loader%2Eload%28%29%3B%0A%20%2A%20%60%60%60%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EResourceLoader%0A%20%2A%20%40memberof%20PIXI%2Eloaders%0A%20%2A%20%40param%20%5BbaseUrl%3D%27%27%5D%20%7Bstring%7D%20The%20base%20url%20for%20all%20resources%20loaded%20by%20this%20loader%2E%0A%20%2A%20%40param%20%5Bconcurrency%3D10%5D%20%7Bnumber%7D%20The%20number%20of%20resources%20to%20load%20concurrently%2E%0A%20%2A%2F%0Afunction%20Loader%28baseUrl%2C%20concurrency%29%0A%7B%0A%20%20%20%20ResourceLoader%2Ecall%28this%2C%20baseUrl%2C%20concurrency%29%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20Loader%2E%5FpixiMiddleware%2Elength%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Euse%28Loader%2E%5FpixiMiddleware%5Bi%5D%28%29%29%3B%0A%20%20%20%20%7D%0A%7D%0A%0ALoader%2Eprototype%20%3D%20Object%2Ecreate%28ResourceLoader%2Eprototype%29%3B%0ALoader%2Eprototype%2Econstructor%20%3D%20Loader%3B%0A%0Amodule%2Eexports%20%3D%20Loader%3B%0A%0ALoader%2E%5FpixiMiddleware%20%3D%20%5B%0A%20%20%20%20%2F%2F%20parse%20any%20blob%20into%20more%20usable%20objects%20%28e%2Eg%2E%20Image%29%0A%20%20%20%20ResourceLoader%2Emiddleware%2Eparsing%2Eblob%2C%0A%20%20%20%20%2F%2F%20parse%20any%20Image%20objects%20into%20textures%0A%20%20%20%20textureParser%2C%0A%20%20%20%20%2F%2F%20parse%20any%20spritesheet%20data%20into%20multiple%20textures%0A%20%20%20%20spritesheetParser%2C%0A%20%20%20%20%2F%2F%20parse%20any%20spritesheet%20data%20into%20multiple%20textures%0A%20%20%20%20bitmapFontParser%0A%5D%3B%0A%0ALoader%2EaddPixiMiddleware%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20Loader%2E%5FpixiMiddleware%2Epush%28fn%29%3B%0A%7D%3B%0A%0A%2F%2F%20Add%20custom%20extentions%0Avar%20Resource%20%3D%20ResourceLoader%2EResource%3B%0A%0AResource%2EsetExtensionXhrType%28%27fnt%27%2C%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDOCUMENT%29%3B%0A%0A%7D%2C%7B%22%2E%2FbitmapFontParser%22%3A113%2C%22%2E%2FspritesheetParser%22%3A116%2C%22%2E%2FtextureParser%22%3A117%2C%22resource%2Dloader%22%3A133%7D%5D%2C116%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Resource%20%3D%20require%28%27resource%2Dloader%27%29%2EResource%2C%0A%20%20%20%20path%20%3D%20require%28%27path%27%29%2C%0A%20%20%20%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%3B%0A%0Amodule%2Eexports%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20function%20%28resource%2C%20next%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20skip%20if%20no%20data%2C%20its%20not%20json%2C%20or%20it%20isn%27t%20spritesheet%20data%0A%20%20%20%20%20%20%20%20if%20%28%21resource%2Edata%20%7C%7C%20%21resource%2EisJson%20%7C%7C%20%21resource%2Edata%2Eframes%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20loadOptions%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20crossOrigin%3A%20resource%2EcrossOrigin%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20loadType%3A%20Resource%2ELOAD%5FTYPE%2EIMAGE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20metadata%3A%20resource%2Emetadata%2EimageMetadata%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20var%20route%20%3D%20path%2Edirname%28resource%2Eurl%2Ereplace%28this%2EbaseUrl%2C%20%27%27%29%29%3B%0A%0A%20%20%20%20%20%20%20%20var%20resolution%20%3D%20core%2Eutils%2EgetResolutionOfUrl%28%20resource%2Eurl%20%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20load%20the%20image%20for%20this%20sheet%0A%20%20%20%20%20%20%20%20this%2Eadd%28resource%2Ename%20%2B%20%27%5Fimage%27%2C%20route%20%2B%20%27%2F%27%20%2B%20resource%2Edata%2Emeta%2Eimage%2C%20loadOptions%2C%20function%20%28res%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2Etextures%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20frames%20%3D%20resource%2Edata%2Eframes%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20in%20frames%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20rect%20%3D%20frames%5Bi%5D%2Eframe%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28rect%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20size%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20trim%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28frames%5Bi%5D%2Erotated%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20size%20%3D%20new%20core%2ERectangle%28rect%2Ex%2C%20rect%2Ey%2C%20rect%2Eh%2C%20rect%2Ew%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20size%20%3D%20new%20core%2ERectangle%28rect%2Ex%2C%20rect%2Ey%2C%20rect%2Ew%2C%20rect%2Eh%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20Check%20to%20see%20if%20the%20sprite%20is%20trimmed%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28frames%5Bi%5D%2Etrimmed%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20trim%20%3D%20new%20core%2ERectangle%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20frames%5Bi%5D%2EspriteSourceSize%2Ex%20%2F%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20frames%5Bi%5D%2EspriteSourceSize%2Ey%20%2F%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20frames%5Bi%5D%2EsourceSize%2Ew%20%2F%20resolution%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20frames%5Bi%5D%2EsourceSize%2Eh%20%2F%20resolution%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20flip%20the%20width%20and%20height%21%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28frames%5Bi%5D%2Erotated%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20temp%20%3D%20size%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20size%2Ewidth%20%3D%20size%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20size%2Eheight%20%3D%20temp%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20size%2Ex%20%2F%3D%20resolution%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20size%2Ey%20%2F%3D%20resolution%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20size%2Ewidth%20%2F%3D%20resolution%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20size%2Eheight%20%2F%3D%20resolution%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2Etextures%5Bi%5D%20%3D%20new%20core%2ETexture%28res%2Etexture%2EbaseTexture%2C%20size%2C%20size%2Eclone%28%29%2C%20trim%2C%20frames%5Bi%5D%2Erotated%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20lets%20also%20add%20the%20frame%20to%20pixi%27s%20global%20cache%20for%20fromFrame%20and%20fromImage%20functions%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20core%2Eutils%2ETextureCache%5Bi%5D%20%3D%20resource%2Etextures%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%2C%22path%22%3A2%2C%22resource%2Dloader%22%3A133%7D%5D%2C117%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%3B%0A%0Amodule%2Eexports%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20return%20function%20%28resource%2C%20next%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20create%20a%20new%20texture%20if%20the%20data%20is%20an%20Image%20object%0A%20%20%20%20%20%20%20%20if%20%28resource%2Edata%20%26%26%20resource%2EisImage%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20baseTexture%20%3D%20new%20core%2EBaseTexture%28resource%2Edata%2C%20null%2C%20core%2Eutils%2EgetResolutionOfUrl%28resource%2Eurl%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20baseTexture%2EimageUrl%20%3D%20resource%2Eurl%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2Etexture%20%3D%20new%20core%2ETexture%28baseTexture%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20lets%20also%20add%20the%20frame%20to%20pixi%27s%20global%20cache%20for%20fromFrame%20and%20fromImage%20fucntions%0A%20%20%20%20%20%20%20%20%20%20%20%20core%2Eutils%2EBaseTextureCache%5Bresource%2Eurl%5D%20%3D%20baseTexture%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20core%2Eutils%2ETextureCache%5Bresource%2Eurl%5D%20%3D%20resource%2Etexture%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20next%28%29%3B%0A%20%20%20%20%7D%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%7D%5D%2C118%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%2C%0A%20%20%20%20tempPoint%20%3D%20new%20core%2EPoint%28%29%2C%0A%20%20%20%20tempPolygon%20%3D%20new%20core%2EPolygon%28%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Base%20mesh%20class%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EContainer%0A%20%2A%20%40memberof%20PIXI%2Emesh%0A%20%2A%20%40param%20texture%20%7BPIXI%2ETexture%7D%20The%20texture%20to%20use%0A%20%2A%20%40param%20%5Bvertices%5D%20%7BFloat32Arrif%20you%20want%20to%20specify%20the%20vertices%0A%20%2A%20%40param%20%5Buvs%5D%20%7BFloat32Array%7D%20if%20you%20want%20to%20specify%20the%20uvs%0A%20%2A%20%40param%20%5Bindices%5D%20%7BUint16Array%7D%20if%20you%20want%20to%20specify%20the%20indices%0A%20%2A%20%40param%20%5BdrawMode%5D%20%7Bnumber%7D%20the%20drawMode%2C%20can%20be%20any%20of%20the%20Mesh%2EDRAW%5FMODES%20consts%0A%20%2A%2F%0Afunction%20Mesh%28texture%2C%20vertices%2C%20uvs%2C%20indices%2C%20drawMode%29%0A%7B%0A%20%20%20%20core%2EContainer%2Ecall%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20texture%20of%20the%20Mesh%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ETexture%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Ftexture%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20Uvs%20of%20the%20Mesh%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFloat32Array%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Euvs%20%3D%20uvs%20%7C%7C%20new%20Float32Array%28%5B0%2C%200%2C%0A%20%20%20%20%20%20%20%201%2C%200%2C%0A%20%20%20%20%20%20%20%201%2C%201%2C%0A%20%20%20%20%20%20%20%200%2C%201%5D%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20An%20array%20of%20vertices%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFloat32Array%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Evertices%20%3D%20vertices%20%7C%7C%20new%20Float32Array%28%5B0%2C%200%2C%0A%20%20%20%20%20%20%20%20100%2C%200%2C%0A%20%20%20%20%20%20%20%20100%2C%20100%2C%0A%20%20%20%20%20%20%20%200%2C%20100%5D%29%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7BUint16Array%7D%20An%20array%20containing%20the%20indices%20of%20the%20vertices%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%2F%2F%20%20TODO%20auto%20generate%20this%20based%20on%20draw%20mode%21%0A%20%20%20%20this%2Eindices%20%3D%20indices%20%7C%7C%20new%20Uint16Array%28%5B0%2C%201%2C%203%2C%202%5D%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Whether%20the%20Mesh%20is%20dirty%20or%20not%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20blend%20mode%20to%20be%20applied%20to%20the%20sprite%2E%20Set%20to%20%60PIXI%2EBLEND%5FMODES%2ENORMAL%60%20to%20remove%20any%20blend%20mode%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40default%20PIXI%2EBLEND%5FMODES%2ENORMAL%0A%20%20%20%20%20%2A%20%40see%20PIXI%2EBLEND%5FMODES%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EblendMode%20%3D%20core%2EBLEND%5FMODES%2ENORMAL%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Triangles%20in%20canvas%20mode%20are%20automatically%20antialiased%2C%20use%20this%20value%20to%20force%20triangles%20to%20overlap%20a%20bit%20with%20each%20other%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcanvasPadding%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20way%20the%20Mesh%20should%20be%20drawn%2C%20can%20be%20any%20of%20the%20%7B%40link%20PIXI%2Emesh%2EMesh%2EDRAW%5FMODES%7D%20consts%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%20%40see%20PIXI%2Emesh%2EMesh%2EDRAW%5FMODES%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EdrawMode%20%3D%20drawMode%20%7C%7C%20Mesh%2EDRAW%5FMODES%2ETRIANGLE%5FMESH%3B%0A%0A%20%20%20%20%2F%2F%20run%20texture%20setter%3B%0A%20%20%20%20this%2Etexture%20%3D%20texture%3B%0A%0A%20%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20default%20shader%20that%20is%20used%20if%20a%20mesh%20doesn%27t%20have%20a%20more%20specific%20one%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EShader%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eshader%20%3D%20null%3B%0A%7D%0A%0A%2F%2F%20constructor%0AMesh%2Eprototype%20%3D%20Object%2Ecreate%28core%2EContainer%2Eprototype%29%3B%0AMesh%2Eprototype%2Econstructor%20%3D%20Mesh%3B%0Amodule%2Eexports%20%3D%20Mesh%3B%0A%0AObject%2EdefineProperties%28Mesh%2Eprototype%2C%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20texture%20that%20the%20sprite%20is%20using%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2ETexture%7D%0A%20%20%20%20%20%2A%20%40memberof%20PIXI%2Emesh%2EMesh%23%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20texture%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20%28%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%20this%2E%5Ftexture%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20%28value%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2E%5Ftexture%20%3D%3D%3D%20value%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5Ftexture%20%3D%20value%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20wait%20for%20the%20texture%20to%20load%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%2EbaseTexture%2EhasLoaded%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FonTextureUpdate%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%2Eonce%28%27update%27%2C%20this%2E%5FonTextureUpdate%2C%20this%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20WebGL%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20a%20reference%20to%20the%20WebGL%20renderer%0A%20%2A%20%40private%0A%20%2A%2F%0AMesh%2Eprototype%2E%5FrenderWebGL%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20renderer%2EsetObjectRenderer%28renderer%2Eplugins%2Emesh%29%3B%0A%20%20%20%20renderer%2Eplugins%2Emesh%2Erender%28this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20object%20using%20the%20Canvas%20renderer%0A%20%2A%0A%20%2A%20%40param%20renderer%20%7BPIXI%2ECanvasRenderer%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AMesh%2Eprototype%2E%5FrenderCanvas%20%3D%20function%20%28renderer%29%0A%7B%0A%20%20%20%20var%20context%20%3D%20renderer%2Econtext%3B%0A%0A%20%20%20%20var%20transform%20%3D%20this%2EworldTransform%3B%0A%0A%20%20%20%20if%20%28renderer%2EroundPixels%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20context%2EsetTransform%28transform%2Ea%2C%20transform%2Eb%2C%20transform%2Ec%2C%20transform%2Ed%2C%20transform%2Etx%20%7C%200%2C%20transform%2Ety%20%7C%200%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20context%2EsetTransform%28transform%2Ea%2C%20transform%2Eb%2C%20transform%2Ec%2C%20transform%2Ed%2C%20transform%2Etx%2C%20transform%2Ety%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28this%2EdrawMode%20%3D%3D%3D%20Mesh%2EDRAW%5FMODES%2ETRIANGLE%5FMESH%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FrenderCanvasTriangleMesh%28context%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FrenderCanvasTriangles%28context%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Draws%20the%20object%20in%20Triangle%20Mesh%20mode%20using%20canvas%0A%20%2A%0A%20%2A%20%40param%20context%20%7BCanvasRenderingContext2D%7D%20the%20current%20drawing%20context%0A%20%2A%20%40private%0A%20%2A%2F%0AMesh%2Eprototype%2E%5FrenderCanvasTriangleMesh%20%3D%20function%20%28context%29%0A%7B%0A%20%20%20%20%2F%2F%20draw%20triangles%21%21%0A%20%20%20%20var%20vertices%20%3D%20this%2Evertices%3B%0A%20%20%20%20var%20uvs%20%3D%20this%2Euvs%3B%0A%0A%20%20%20%20var%20length%20%3D%20vertices%2Elength%20%2F%202%3B%0A%20%20%20%20%2F%2F%20this%2Ecount%2B%2B%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20length%20%2D%202%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20draw%20some%20triangles%21%0A%20%20%20%20%20%20%20%20var%20index%20%3D%20i%20%2A%202%3B%0A%20%20%20%20%20%20%20%20this%2E%5FrenderCanvasDrawTriangle%28context%2C%20vertices%2C%20uvs%2C%20index%2C%20%28index%20%2B%202%29%2C%20%28index%20%2B%204%29%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Draws%20the%20object%20in%20triangle%20mode%20using%20canvas%0A%20%2A%0A%20%2A%20%40param%20context%20%7BCanvasRenderingContext2D%7D%20the%20current%20drawing%20context%0A%20%2A%20%40private%0A%20%2A%2F%0AMesh%2Eprototype%2E%5FrenderCanvasTriangles%20%3D%20function%20%28context%29%0A%7B%0A%20%20%20%20%2F%2F%20draw%20triangles%21%21%0A%20%20%20%20var%20vertices%20%3D%20this%2Evertices%3B%0A%20%20%20%20var%20uvs%20%3D%20this%2Euvs%3B%0A%20%20%20%20var%20indices%20%3D%20this%2Eindices%3B%0A%0A%20%20%20%20var%20length%20%3D%20indices%2Elength%3B%0A%20%20%20%20%2F%2F%20this%2Ecount%2B%2B%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20length%3B%20i%20%2B%3D%203%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20draw%20some%20triangles%21%0A%20%20%20%20%20%20%20%20var%20index0%20%3D%20indices%5Bi%5D%20%2A%202%2C%20index1%20%3D%20indices%5Bi%20%2B%201%5D%20%2A%202%2C%20index2%20%3D%20indices%5Bi%20%2B%202%5D%20%2A%202%3B%0A%20%20%20%20%20%20%20%20this%2E%5FrenderCanvasDrawTriangle%28context%2C%20vertices%2C%20uvs%2C%20index0%2C%20index1%2C%20index2%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Draws%20one%20of%20the%20triangles%20that%20form%20this%20Mesh%0A%20%2A%0A%20%2A%20%40param%20context%20%7BCanvasRenderingContext2D%7D%20the%20current%20drawing%20context%0A%20%2A%20%40param%20vertices%20%7BFloat32Array%7D%20a%20reference%20to%20the%20vertices%20of%20the%20Mesh%0A%20%2A%20%40param%20uvs%20%7BFloat32Array%7D%20a%20reference%20to%20the%20uvs%20of%20the%20Mesh%0A%20%2A%20%40param%20index0%20%7Bnumber%7D%20the%20index%20of%20the%20first%20vertex%0A%20%2A%20%40param%20index1%20%7Bnumber%7D%20the%20index%20of%20the%20second%20vertex%0A%20%2A%20%40param%20index2%20%7Bnumber%7D%20the%20index%20of%20the%20third%20vertex%0A%20%2A%20%40private%0A%20%2A%2F%0AMesh%2Eprototype%2E%5FrenderCanvasDrawTriangle%20%3D%20function%20%28context%2C%20vertices%2C%20uvs%2C%20index0%2C%20index1%2C%20index2%29%0A%7B%0A%20%20%20%20var%20textureSource%20%3D%20this%2E%5Ftexture%2EbaseTexture%2Esource%3B%0A%20%20%20%20var%20textureWidth%20%3D%20this%2E%5Ftexture%2EbaseTexture%2Ewidth%3B%0A%20%20%20%20var%20textureHeight%20%3D%20this%2E%5Ftexture%2EbaseTexture%2Eheight%3B%0A%0A%20%20%20%20var%20x0%20%3D%20vertices%5Bindex0%5D%2C%20x1%20%3D%20vertices%5Bindex1%5D%2C%20x2%20%3D%20vertices%5Bindex2%5D%3B%0A%20%20%20%20var%20y0%20%3D%20vertices%5Bindex0%20%2B%201%5D%2C%20y1%20%3D%20vertices%5Bindex1%20%2B%201%5D%2C%20y2%20%3D%20vertices%5Bindex2%20%2B%201%5D%3B%0A%0A%20%20%20%20var%20u0%20%3D%20uvs%5Bindex0%5D%20%2A%20textureWidth%2C%20u1%20%3D%20uvs%5Bindex1%5D%20%2A%20textureWidth%2C%20u2%20%3D%20uvs%5Bindex2%5D%20%2A%20textureWidth%3B%0A%20%20%20%20var%20v0%20%3D%20uvs%5Bindex0%20%2B%201%5D%20%2A%20textureHeight%2C%20v1%20%3D%20uvs%5Bindex1%20%2B%201%5D%20%2A%20textureHeight%2C%20v2%20%3D%20uvs%5Bindex2%20%2B%201%5D%20%2A%20textureHeight%3B%0A%0A%20%20%20%20if%20%28this%2EcanvasPadding%20%3E%200%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20paddingX%20%3D%20this%2EcanvasPadding%20%2F%20this%2EworldTransform%2Ea%3B%0A%20%20%20%20%20%20%20%20var%20paddingY%20%3D%20this%2EcanvasPadding%20%2F%20this%2EworldTransform%2Ed%3B%0A%20%20%20%20%20%20%20%20var%20centerX%20%3D%20%28x0%20%2B%20x1%20%2B%20x2%29%20%2F%203%3B%0A%20%20%20%20%20%20%20%20var%20centerY%20%3D%20%28y0%20%2B%20y1%20%2B%20y2%29%20%2F%203%3B%0A%0A%20%20%20%20%20%20%20%20var%20normX%20%3D%20x0%20%2D%20centerX%3B%0A%20%20%20%20%20%20%20%20var%20normY%20%3D%20y0%20%2D%20centerY%3B%0A%0A%20%20%20%20%20%20%20%20var%20dist%20%3D%20Math%2Esqrt%28normX%20%2A%20normX%20%2B%20normY%20%2A%20normY%29%3B%0A%20%20%20%20%20%20%20%20x0%20%3D%20centerX%20%2B%20%28normX%20%2F%20dist%29%20%2A%20%28dist%20%2B%20paddingX%29%3B%0A%20%20%20%20%20%20%20%20y0%20%3D%20centerY%20%2B%20%28normY%20%2F%20dist%29%20%2A%20%28dist%20%2B%20paddingY%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%0A%0A%20%20%20%20%20%20%20%20normX%20%3D%20x1%20%2D%20centerX%3B%0A%20%20%20%20%20%20%20%20normY%20%3D%20y1%20%2D%20centerY%3B%0A%0A%20%20%20%20%20%20%20%20dist%20%3D%20Math%2Esqrt%28normX%20%2A%20normX%20%2B%20normY%20%2A%20normY%29%3B%0A%20%20%20%20%20%20%20%20x1%20%3D%20centerX%20%2B%20%28normX%20%2F%20dist%29%20%2A%20%28dist%20%2B%20paddingX%29%3B%0A%20%20%20%20%20%20%20%20y1%20%3D%20centerY%20%2B%20%28normY%20%2F%20dist%29%20%2A%20%28dist%20%2B%20paddingY%29%3B%0A%0A%20%20%20%20%20%20%20%20normX%20%3D%20x2%20%2D%20centerX%3B%0A%20%20%20%20%20%20%20%20normY%20%3D%20y2%20%2D%20centerY%3B%0A%0A%20%20%20%20%20%20%20%20dist%20%3D%20Math%2Esqrt%28normX%20%2A%20normX%20%2B%20normY%20%2A%20normY%29%3B%0A%20%20%20%20%20%20%20%20x2%20%3D%20centerX%20%2B%20%28normX%20%2F%20dist%29%20%2A%20%28dist%20%2B%20paddingX%29%3B%0A%20%20%20%20%20%20%20%20y2%20%3D%20centerY%20%2B%20%28normY%20%2F%20dist%29%20%2A%20%28dist%20%2B%20paddingY%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20context%2Esave%28%29%3B%0A%20%20%20%20context%2EbeginPath%28%29%3B%0A%0A%0A%20%20%20%20context%2EmoveTo%28x0%2C%20y0%29%3B%0A%20%20%20%20context%2ElineTo%28x1%2C%20y1%29%3B%0A%20%20%20%20context%2ElineTo%28x2%2C%20y2%29%3B%0A%0A%20%20%20%20context%2EclosePath%28%29%3B%0A%0A%20%20%20%20context%2Eclip%28%29%3B%0A%0A%20%20%20%20%2F%2F%20Compute%20matrix%20transform%0A%20%20%20%20var%20delta%20%3D%20%20%28u0%20%2A%20v1%29%20%20%20%20%20%20%2B%20%28v0%20%2A%20u2%29%20%20%20%20%20%20%2B%20%28u1%20%2A%20v2%29%20%20%20%20%20%20%2D%20%28v1%20%2A%20u2%29%20%20%20%20%20%20%2D%20%28v0%20%2A%20u1%29%20%20%20%20%20%20%2D%20%28u0%20%2A%20v2%29%3B%0A%20%20%20%20var%20deltaA%20%3D%20%28x0%20%2A%20v1%29%20%20%20%20%20%20%2B%20%28v0%20%2A%20x2%29%20%20%20%20%20%20%2B%20%28x1%20%2A%20v2%29%20%20%20%20%20%20%2D%20%28v1%20%2A%20x2%29%20%20%20%20%20%20%2D%20%28v0%20%2A%20x1%29%20%20%20%20%20%20%2D%20%28x0%20%2A%20v2%29%3B%0A%20%20%20%20var%20deltaB%20%3D%20%28u0%20%2A%20x1%29%20%20%20%20%20%20%2B%20%28x0%20%2A%20u2%29%20%20%20%20%20%20%2B%20%28u1%20%2A%20x2%29%20%20%20%20%20%20%2D%20%28x1%20%2A%20u2%29%20%20%20%20%20%20%2D%20%28x0%20%2A%20u1%29%20%20%20%20%20%20%2D%20%28u0%20%2A%20x2%29%3B%0A%20%20%20%20var%20deltaC%20%3D%20%28u0%20%2A%20v1%20%2A%20x2%29%20%2B%20%28v0%20%2A%20x1%20%2A%20u2%29%20%2B%20%28x0%20%2A%20u1%20%2A%20v2%29%20%2D%20%28x0%20%2A%20v1%20%2A%20u2%29%20%2D%20%28v0%20%2A%20u1%20%2A%20x2%29%20%2D%20%28u0%20%2A%20x1%20%2A%20v2%29%3B%0A%20%20%20%20var%20deltaD%20%3D%20%28y0%20%2A%20v1%29%20%20%20%20%20%20%2B%20%28v0%20%2A%20y2%29%20%20%20%20%20%20%2B%20%28y1%20%2A%20v2%29%20%20%20%20%20%20%2D%20%28v1%20%2A%20y2%29%20%20%20%20%20%20%2D%20%28v0%20%2A%20y1%29%20%20%20%20%20%20%2D%20%28y0%20%2A%20v2%29%3B%0A%20%20%20%20var%20deltaE%20%3D%20%28u0%20%2A%20y1%29%20%20%20%20%20%20%2B%20%28y0%20%2A%20u2%29%20%20%20%20%20%20%2B%20%28u1%20%2A%20y2%29%20%20%20%20%20%20%2D%20%28y1%20%2A%20u2%29%20%20%20%20%20%20%2D%20%28y0%20%2A%20u1%29%20%20%20%20%20%20%2D%20%28u0%20%2A%20y2%29%3B%0A%20%20%20%20var%20deltaF%20%3D%20%28u0%20%2A%20v1%20%2A%20y2%29%20%2B%20%28v0%20%2A%20y1%20%2A%20u2%29%20%2B%20%28y0%20%2A%20u1%20%2A%20v2%29%20%2D%20%28y0%20%2A%20v1%20%2A%20u2%29%20%2D%20%28v0%20%2A%20u1%20%2A%20y2%29%20%2D%20%28u0%20%2A%20y1%20%2A%20v2%29%3B%0A%0A%20%20%20%20context%2Etransform%28deltaA%20%2F%20delta%2C%20deltaD%20%2F%20delta%2C%0A%20%20%20%20%20%20%20%20deltaB%20%2F%20delta%2C%20deltaE%20%2F%20delta%2C%0A%20%20%20%20%20%20%20%20deltaC%20%2F%20delta%2C%20deltaF%20%2F%20delta%29%3B%0A%0A%20%20%20%20context%2EdrawImage%28textureSource%2C%200%2C%200%29%3B%0A%20%20%20%20context%2Erestore%28%29%3B%0A%7D%3B%0A%0A%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20a%20flat%20Mesh%0A%20%2A%0A%20%2A%20%40param%20Mesh%20%7BPIXI%2Emesh%2EMesh%7D%20The%20Mesh%20to%20render%0A%20%2A%20%40private%0A%20%2A%2F%0AMesh%2Eprototype%2ErenderMeshFlat%20%3D%20function%20%28Mesh%29%0A%7B%0A%20%20%20%20var%20context%20%3D%20this%2Econtext%3B%0A%20%20%20%20var%20vertices%20%3D%20Mesh%2Evertices%3B%0A%0A%20%20%20%20var%20length%20%3D%20vertices%2Elength%2F2%3B%0A%20%20%20%20%2F%2F%20this%2Ecount%2B%2B%3B%0A%0A%20%20%20%20context%2EbeginPath%28%29%3B%0A%20%20%20%20for%20%28var%20i%3D1%3B%20i%20%3C%20length%2D2%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20draw%20some%20triangles%21%0A%20%20%20%20%20%20%20%20var%20index%20%3D%20i%2A2%3B%0A%0A%20%20%20%20%20%20%20%20var%20x0%20%3D%20vertices%5Bindex%5D%2C%20%20%20x1%20%3D%20vertices%5Bindex%2B2%5D%2C%20x2%20%3D%20vertices%5Bindex%2B4%5D%3B%0A%20%20%20%20%20%20%20%20var%20y0%20%3D%20vertices%5Bindex%2B1%5D%2C%20y1%20%3D%20vertices%5Bindex%2B3%5D%2C%20y2%20%3D%20vertices%5Bindex%2B5%5D%3B%0A%0A%20%20%20%20%20%20%20%20context%2EmoveTo%28x0%2C%20y0%29%3B%0A%20%20%20%20%20%20%20%20context%2ElineTo%28x1%2C%20y1%29%3B%0A%20%20%20%20%20%20%20%20context%2ElineTo%28x2%2C%20y2%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20context%2EfillStyle%20%3D%20%27%23FF0000%27%3B%0A%20%20%20%20context%2Efill%28%29%3B%0A%20%20%20%20context%2EclosePath%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20When%20the%20texture%20is%20updated%2C%20this%20event%20will%20fire%20to%20update%20the%20scale%20and%20frame%0A%20%2A%0A%20%2A%20%40param%20event%0A%20%2A%20%40private%0A%20%2A%2F%0AMesh%2Eprototype%2E%5FonTextureUpdate%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20this%2EupdateFrame%20%3D%20true%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Returns%20the%20bounds%20of%20the%20mesh%20as%20a%20rectangle%2E%20The%20bounds%20calculation%20takes%20the%20worldTransform%20into%20account%2E%0A%20%2A%0A%20%2A%20%40param%20matrix%20%7BPIXI%2EMatrix%7D%20the%20transformation%20matrix%20of%20the%20sprite%0A%20%2A%20%40return%20%7BPIXI%2ERectangle%7D%20the%20framing%20rectangle%0A%20%2A%2F%0AMesh%2Eprototype%2EgetBounds%20%3D%20function%20%28matrix%29%0A%7B%0A%20%20%20%20if%20%28%21this%2E%5FcurrentBounds%29%20%7B%0A%20%20%20%20%20%20%20%20var%20worldTransform%20%3D%20matrix%20%7C%7C%20this%2EworldTransform%3B%0A%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20worldTransform%2Ea%3B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20worldTransform%2Eb%3B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20worldTransform%2Ec%3B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%20worldTransform%2Ed%3B%0A%20%20%20%20%20%20%20%20var%20tx%20%3D%20worldTransform%2Etx%3B%0A%20%20%20%20%20%20%20%20var%20ty%20%3D%20worldTransform%2Ety%3B%0A%0A%20%20%20%20%20%20%20%20var%20maxX%20%3D%20%2DInfinity%3B%0A%20%20%20%20%20%20%20%20var%20maxY%20%3D%20%2DInfinity%3B%0A%0A%20%20%20%20%20%20%20%20var%20minX%20%3D%20Infinity%3B%0A%20%20%20%20%20%20%20%20var%20minY%20%3D%20Infinity%3B%0A%0A%20%20%20%20%20%20%20%20var%20vertices%20%3D%20this%2Evertices%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20n%20%3D%20vertices%2Elength%3B%20i%20%3C%20n%3B%20i%20%2B%3D%202%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20rawX%20%3D%20vertices%5Bi%5D%2C%20rawY%20%3D%20vertices%5Bi%20%2B%201%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20%28a%20%2A%20rawX%29%20%2B%20%28c%20%2A%20rawY%29%20%2B%20tx%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20y%20%3D%20%28d%20%2A%20rawY%29%20%2B%20%28b%20%2A%20rawX%29%20%2B%20ty%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20minX%20%3D%20x%20%3C%20minX%20%3F%20x%20%3A%20minX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minY%20%3D%20y%20%3C%20minY%20%3F%20y%20%3A%20minY%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20maxX%20%3D%20x%20%3E%20maxX%20%3F%20x%20%3A%20maxX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20maxY%20%3D%20y%20%3E%20maxY%20%3F%20y%20%3A%20maxY%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28minX%20%3D%3D%3D%20%2DInfinity%20%7C%7C%20maxY%20%3D%3D%3D%20Infinity%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20core%2ERectangle%2EEMPTY%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20bounds%20%3D%20this%2E%5Fbounds%3B%0A%0A%20%20%20%20%20%20%20%20bounds%2Ex%20%3D%20minX%3B%0A%20%20%20%20%20%20%20%20bounds%2Ewidth%20%3D%20maxX%20%2D%20minX%3B%0A%0A%20%20%20%20%20%20%20%20bounds%2Ey%20%3D%20minY%3B%0A%20%20%20%20%20%20%20%20bounds%2Eheight%20%3D%20maxY%20%2D%20minY%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20store%20a%20reference%20so%20that%20if%20this%20function%20gets%20called%20again%20in%20the%20render%20cycle%20we%20do%20not%20have%20to%20recalculate%0A%20%20%20%20%20%20%20%20this%2E%5FcurrentBounds%20%3D%20bounds%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20this%2E%5FcurrentBounds%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Tests%20if%20a%20point%20is%20inside%20this%20mesh%2E%20Works%20only%20for%20TRIANGLE%5FMESH%0A%20%2A%0A%20%2A%20%40param%20point%20%7BPIXI%2EPoint%7D%20the%20point%20to%20test%0A%20%2A%20%40return%20%7Bboolean%7D%20the%20result%20of%20the%20test%0A%20%2A%2F%0AMesh%2Eprototype%2EcontainsPoint%20%3D%20function%28%20point%20%29%20%7B%0A%20%20%20%20if%20%28%21this%2EgetBounds%28%29%2Econtains%28point%2Ex%2C%20point%2Ey%29%29%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20this%2EworldTransform%2EapplyInverse%28point%2C%20%20tempPoint%29%3B%0A%0A%20%20%20%20var%20vertices%20%3D%20this%2Evertices%3B%0A%20%20%20%20var%20points%20%3D%20tempPolygon%2Epoints%3B%0A%20%20%20%20var%20i%2C%20len%3B%0A%0A%20%20%20%20if%20%28this%2EdrawMode%20%3D%3D%3D%20Mesh%2EDRAW%5FMODES%2ETRIANGLES%29%20%7B%0A%20%20%20%20%20%20%20%20var%20indices%20%3D%20this%2Eindices%3B%0A%20%20%20%20%20%20%20%20len%20%3D%20this%2Eindices%2Elength%3B%0A%20%20%20%20%20%20%20%20%2F%2FTODO%3A%20inline%20this%2E%0A%20%20%20%20%20%20%20%20for%20%28i%3D0%3Bi%3Clen%3Bi%2B%3D3%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20ind0%20%3D%20indices%5Bi%5D%2A2%2C%20ind1%20%3D%20indices%5Bi%2B1%5D%2A2%2C%20ind2%20%3D%20indices%5Bi%2B2%5D%2A2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B0%5D%20%3D%20vertices%5Bind0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B1%5D%20%3D%20vertices%5Bind0%2B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B2%5D%20%3D%20vertices%5Bind1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B3%5D%20%3D%20vertices%5Bind1%2B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B4%5D%20%3D%20vertices%5Bind2%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B5%5D%20%3D%20vertices%5Bind2%2B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28tempPolygon%2Econtains%28tempPoint%2Ex%2C%20tempPoint%2Ey%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20len%20%3D%20vertices%2Elength%3B%0A%20%20%20%20%20%20%20%20for%20%28i%3D0%3Bi%3Clen%3Bi%2B%3D6%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B0%5D%20%3D%20vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B1%5D%20%3D%20vertices%5Bi%2B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B2%5D%20%3D%20vertices%5Bi%2B2%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B3%5D%20%3D%20vertices%5Bi%2B3%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B4%5D%20%3D%20vertices%5Bi%2B4%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%5B5%5D%20%3D%20vertices%5Bi%2B5%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28tempPolygon%2Econtains%28tempPoint%2Ex%2C%20tempPoint%2Ey%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20false%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Different%20drawing%20buffer%20modes%20supported%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40constant%0A%20%2A%20%40property%20%7Bobject%7D%20DRAW%5FMODES%0A%20%2A%20%40property%20%7Bnumber%7D%20DRAW%5FMODES%2ETRIANGLE%5FMESH%0A%20%2A%20%40property%20%7Bnumber%7D%20DRAW%5FMODES%2ETRIANGLES%0A%20%2A%2F%0AMesh%2EDRAW%5FMODES%20%3D%20%7B%0A%20%20%20%20TRIANGLE%5FMESH%3A%200%2C%0A%20%20%20%20TRIANGLES%3A%201%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%7D%5D%2C119%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Mesh%20%3D%20require%28%27%2E%2FMesh%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20Plane%20allows%20you%20to%20draw%20a%20texture%20across%20several%20points%20and%20them%20manipulate%20these%20points%0A%20%2A%0A%20%2A%60%60%60js%0A%20%2A%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%2020%3B%20i%2B%2B%29%20%7B%0A%20%2A%20%20%20%20%20points%2Epush%28new%20PIXI%2EPoint%28i%20%2A%2050%2C%200%29%29%3B%0A%20%2A%20%7D%3B%0A%20%2A%20var%20Plane%20%3D%20new%20PIXI%2EPlane%28PIXI%2ETexture%2EfromImage%28%22snake%2Epng%22%29%2C%20points%29%3B%0A%20%2A%20%20%60%60%60%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2Emesh%2EMesh%0A%20%2A%20%40memberof%20PIXI%2Emesh%0A%20%2A%20%40param%20%7BPIXI%2ETexture%7D%20texture%20%2D%20The%20texture%20to%20use%20on%20the%20Plane%2E%0A%20%2A%20%40param%20%7Bint%7D%20segmentsX%20%2D%20The%20number%20ox%20x%20segments%0A%20%2A%20%40param%20%7Bint%7D%20segmentsY%20%2D%20The%20number%20of%20y%20segments%0A%20%2A%0A%20%2A%2F%0Afunction%20Plane%28texture%2C%20segmentsX%2C%20segmentsY%29%0A%7B%0A%20%20%20%20Mesh%2Ecall%28this%2C%20texture%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Tracker%20for%20if%20the%20Plane%20is%20ready%20to%20be%20drawn%2E%20Needed%20because%20Mesh%20ctor%20can%0A%20%20%20%20%20%2A%20call%20%5FonTextureUpdated%20which%20could%20call%20refresh%20too%20early%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fready%20%3D%20true%3B%0A%0A%20%20%20%20this%2EsegmentsX%20%3D%20%20segmentsX%20%7C%7C%2010%3B%0A%20%20%20%20this%2EsegmentsY%20%3D%20segmentsY%20%7C%7C%2010%3B%0A%0A%20%20%20%20this%2EdrawMode%20%3D%20Mesh%2EDRAW%5FMODES%2ETRIANGLES%3B%0A%20%20%20%20this%2Erefresh%28%29%3B%0A%0A%7D%0A%0A%0A%2F%2F%20constructor%0APlane%2Eprototype%20%3D%20Object%2Ecreate%28%20Mesh%2Eprototype%20%29%3B%0APlane%2Eprototype%2Econstructor%20%3D%20Plane%3B%0Amodule%2Eexports%20%3D%20Plane%3B%0A%0A%2F%2A%2A%0A%20%2A%20Refreshes%0A%20%2A%0A%20%2A%2F%0APlane%2Eprototype%2Erefresh%20%3D%20function%28%29%0A%7B%0A%20%20%20%20var%20total%20%3D%20this%2EsegmentsX%20%2A%20this%2EsegmentsY%3B%0A%20%20%20%20var%20verts%20%3D%20%5B%5D%3B%0A%20%20%20%20var%20colors%20%3D%20%5B%5D%3B%0A%20%20%20%20var%20uvs%20%3D%20%5B%5D%3B%0A%20%20%20%20var%20indices%20%3D%20%5B%5D%3B%0A%20%20%20%20var%20texture%20%3D%20this%2Etexture%3B%0A%0A%20%20%2F%2F%20%20texture%2Ewidth%20%3D%20800%20texture%2Ewidth%20%7C%7C%20800%3B%0A%20%2F%2F%20%20%20texture%2Eheight%20%3D%20800%2F%2Ftexture%2Eheight%20%7C%7C%20800%3B%0A%0A%20%20%20%20var%20segmentsXSub%20%3D%20this%2EsegmentsX%20%2D%201%3B%0A%20%20%20%20var%20segmentsYSub%20%3D%20this%2EsegmentsY%20%2D%201%3B%0A%20%20%20%20var%20i%20%3D%200%3B%0A%0A%20%20%20%20%2F%2F%20TODO%20MAP%20UVS%2E%2E%0A%20%20%20%20var%20sizeX%20%3D%20texture%2Ewidth%20%2F%20segmentsXSub%3B%0A%20%20%20%20var%20sizeY%20%3D%20texture%2Eheight%20%2F%20segmentsYSub%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20total%3B%20i%2B%2B%29%20%7B%0A%0A%20%20%20%20%20%20%20%20var%20x%20%3D%20%28i%20%25%20this%2EsegmentsX%29%3B%0A%20%20%20%20%20%20%20%20var%20y%20%3D%20%28%20%28i%20%2F%20this%2EsegmentsX%20%29%20%7C%200%20%29%3B%0A%0A%0A%20%20%20%20%20%20%20%20verts%2Epush%28%28x%20%2A%20sizeX%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28y%20%2A%20sizeY%29%29%3B%0A%0A%20%20%20%20%20%20%20%20uvs%2Epush%28x%20%2F%20%28this%2EsegmentsX%2D1%29%2C%20y%2F%20%28this%2EsegmentsY%2D1%29%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20%20cons%0A%0A%20%20%20%20var%20totalSub%20%3D%20segmentsXSub%20%2A%20segmentsYSub%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20totalSub%3B%20i%2B%2B%29%20%7B%0A%0A%20%20%20%20%20%20%20%20var%20xpos%20%3D%20i%20%25%20segmentsXSub%3B%0A%20%20%20%20%20%20%20%20var%20ypos%20%3D%20%28i%20%2F%20segmentsXSub%20%29%20%7C%200%3B%0A%0A%0A%20%20%20%20%20%20%20%20var%20%20value%20%3D%20%28ypos%20%2A%20this%2EsegmentsX%29%20%2B%20xpos%3B%0A%20%20%20%20%20%20%20%20var%20%20value2%20%3D%20%28ypos%20%2A%20this%2EsegmentsX%29%20%2B%20xpos%20%2B%201%3B%0A%20%20%20%20%20%20%20%20var%20%20value3%20%3D%20%28%28ypos%2B1%29%20%2A%20this%2EsegmentsX%29%20%2B%20xpos%3B%0A%20%20%20%20%20%20%20%20var%20%20value4%20%3D%20%28%28ypos%2B1%29%20%2A%20this%2EsegmentsX%29%20%2B%20xpos%20%2B%201%3B%0A%0A%20%20%20%20%20%20%20%20indices%2Epush%28value%2C%20value2%2C%20value3%29%3B%0A%20%20%20%20%20%20%20%20indices%2Epush%28value2%2C%20value4%2C%20value3%29%3B%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20%2F%2Fconsole%2Elog%28indices%29%0A%20%20%20%20this%2Evertices%20%3D%20new%20Float32Array%28verts%29%3B%0A%20%20%20%20this%2Euvs%20%3D%20new%20Float32Array%28uvs%29%3B%0A%20%20%20%20this%2Ecolors%20%3D%20new%20Float32Array%28colors%29%3B%0A%20%20%20%20this%2Eindices%20%3D%20new%20Uint16Array%28indices%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Clear%20texture%20UVs%20when%20new%20texture%20is%20set%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0APlane%2Eprototype%2E%5FonTextureUpdate%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20Mesh%2Eprototype%2E%5FonTextureUpdate%2Ecall%28this%29%3B%0A%0A%20%20%20%20%2F%2F%20wait%20for%20the%20Plane%20ctor%20to%20finish%20before%20calling%20refresh%0A%20%20%20%20if%20%28this%2E%5Fready%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Erefresh%28%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FMesh%22%3A118%7D%5D%2C120%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Mesh%20%3D%20require%28%27%2E%2FMesh%27%29%3B%0Avar%20core%20%3D%20require%28%27%2E%2E%2Fcore%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20rope%20allows%20you%20to%20draw%20a%20texture%20across%20several%20points%20and%20them%20manipulate%20these%20points%0A%20%2A%0A%20%2A%60%60%60js%0A%20%2A%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%2020%3B%20i%2B%2B%29%20%7B%0A%20%2A%20%20%20%20%20points%2Epush%28new%20PIXI%2EPoint%28i%20%2A%2050%2C%200%29%29%3B%0A%20%2A%20%7D%3B%0A%20%2A%20var%20rope%20%3D%20new%20PIXI%2ERope%28PIXI%2ETexture%2EfromImage%28%22snake%2Epng%22%29%2C%20points%29%3B%0A%20%2A%20%20%60%60%60%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2Emesh%2EMesh%0A%20%2A%20%40memberof%20PIXI%2Emesh%0A%20%2A%20%40param%20%7BPIXI%2ETexture%7D%20texture%20%2D%20The%20texture%20to%20use%20on%20the%20rope%2E%0A%20%2A%20%40param%20%7BPIXI%2EPoint%5B%5D%7D%20points%20%2D%20An%20array%20of%20%7B%40link%20PIXI%2EPoint%7D%20objects%20to%20construct%20this%20rope%2E%0A%20%2A%0A%20%2A%2F%0Afunction%20Rope%28texture%2C%20points%29%0A%7B%0A%20%20%20%20Mesh%2Ecall%28this%2C%20texture%29%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7BPIXI%2EPoint%5B%5D%7D%20An%20array%20of%20points%20that%20determine%20the%20rope%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Epoints%20%3D%20points%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFloat32Array%7D%20An%20array%20of%20vertices%20used%20to%20construct%20this%20rope%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Evertices%20%3D%20new%20Float32Array%28points%2Elength%20%2A%204%29%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFloat32Array%7D%20The%20WebGL%20Uvs%20of%20the%20rope%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Euvs%20%3D%20new%20Float32Array%28points%2Elength%20%2A%204%29%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7BFloat32Array%7D%20An%20array%20containing%20the%20color%20components%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ecolors%20%3D%20new%20Float32Array%28points%2Elength%20%2A%202%29%3B%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20%2A%20%40member%20%7BUint16Array%7D%20An%20array%20containing%20the%20indices%20of%20the%20vertices%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eindices%20%3D%20new%20Uint16Array%28points%2Elength%20%2A%202%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Tracker%20for%20if%20the%20rope%20is%20ready%20to%20be%20drawn%2E%20Needed%20because%20Mesh%20ctor%20can%0A%20%20%20%20%20%2A%20call%20%5FonTextureUpdated%20which%20could%20call%20refresh%20too%20early%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%20this%2E%5Fready%20%3D%20true%3B%0A%0A%20%20%20%20%20this%2Erefresh%28%29%3B%0A%7D%0A%0A%0A%2F%2F%20constructor%0ARope%2Eprototype%20%3D%20Object%2Ecreate%28Mesh%2Eprototype%29%3B%0ARope%2Eprototype%2Econstructor%20%3D%20Rope%3B%0Amodule%2Eexports%20%3D%20Rope%3B%0A%0A%2F%2A%2A%0A%20%2A%20Refreshes%0A%20%2A%0A%20%2A%2F%0ARope%2Eprototype%2Erefresh%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20points%20%3D%20this%2Epoints%3B%0A%0A%20%20%20%20%2F%2F%20if%20too%20little%20points%2C%20or%20texture%20hasn%27t%20got%20UVs%20set%20yet%20just%20move%20on%2E%0A%20%20%20%20if%20%28points%2Elength%20%3C%201%20%7C%7C%20%21this%2E%5Ftexture%2E%5Fuvs%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20uvs%20%3D%20this%2Euvs%3B%0A%0A%20%20%20%20var%20indices%20%3D%20this%2Eindices%3B%0A%20%20%20%20var%20colors%20%3D%20this%2Ecolors%3B%0A%0A%20%20%20%20var%20textureUvs%20%3D%20this%2E%5Ftexture%2E%5Fuvs%3B%0A%20%20%20%20var%20offset%20%3D%20new%20core%2EPoint%28textureUvs%2Ex0%2C%20textureUvs%2Ey0%29%3B%0A%20%20%20%20var%20factor%20%3D%20new%20core%2EPoint%28textureUvs%2Ex2%20%2D%20textureUvs%2Ex0%2C%20textureUvs%2Ey2%20%2D%20textureUvs%2Ey0%29%3B%0A%0A%20%20%20%20uvs%5B0%5D%20%3D%200%20%2B%20offset%2Ex%3B%0A%20%20%20%20uvs%5B1%5D%20%3D%200%20%2B%20offset%2Ey%3B%0A%20%20%20%20uvs%5B2%5D%20%3D%200%20%2B%20offset%2Ex%3B%0A%20%20%20%20uvs%5B3%5D%20%3D%201%20%2A%20factor%2Ey%20%2B%20offset%2Ey%3B%0A%0A%20%20%20%20colors%5B0%5D%20%3D%201%3B%0A%20%20%20%20colors%5B1%5D%20%3D%201%3B%0A%0A%20%20%20%20indices%5B0%5D%20%3D%200%3B%0A%20%20%20%20indices%5B1%5D%20%3D%201%3B%0A%0A%20%20%20%20var%20total%20%3D%20points%2Elength%2C%0A%20%20%20%20%20%20%20%20point%2C%20index%2C%20amount%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%201%3B%20i%20%3C%20total%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20point%20%3D%20points%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20index%20%3D%20i%20%2A%204%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20time%20to%20do%20some%20smart%20drawing%21%0A%20%20%20%20%20%20%20%20amount%20%3D%20i%20%2F%20%28total%2D1%29%3B%0A%0A%20%20%20%20%20%20%20%20uvs%5Bindex%5D%20%3D%20amount%20%2A%20factor%2Ex%20%2B%20offset%2Ex%3B%0A%20%20%20%20%20%20%20%20uvs%5Bindex%2B1%5D%20%3D%200%20%2B%20offset%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20uvs%5Bindex%2B2%5D%20%3D%20amount%20%2A%20factor%2Ex%20%2B%20offset%2Ex%3B%0A%20%20%20%20%20%20%20%20uvs%5Bindex%2B3%5D%20%3D%201%20%2A%20factor%2Ey%20%2B%20offset%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20index%20%3D%20i%20%2A%202%3B%0A%20%20%20%20%20%20%20%20colors%5Bindex%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20colors%5Bindex%2B1%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20%20%20index%20%3D%20i%20%2A%202%3B%0A%20%20%20%20%20%20%20%20indices%5Bindex%5D%20%3D%20index%3B%0A%20%20%20%20%20%20%20%20indices%5Bindex%20%2B%201%5D%20%3D%20index%20%2B%201%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Edirty%20%3D%20true%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Clear%20texture%20UVs%20when%20new%20texture%20is%20set%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ARope%2Eprototype%2E%5FonTextureUpdate%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20Mesh%2Eprototype%2E%5FonTextureUpdate%2Ecall%28this%29%3B%0A%0A%20%20%20%20%2F%2F%20wait%20for%20the%20Rope%20ctor%20to%20finish%20before%20calling%20refresh%0A%20%20%20%20if%20%28this%2E%5Fready%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Erefresh%28%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Updates%20the%20object%20transform%20for%20rendering%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ARope%2Eprototype%2EupdateTransform%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20var%20points%20%3D%20this%2Epoints%3B%0A%0A%20%20%20%20if%20%28points%2Elength%20%3C%201%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20lastPoint%20%3D%20points%5B0%5D%3B%0A%20%20%20%20var%20nextPoint%3B%0A%20%20%20%20var%20perpX%20%3D%200%3B%0A%20%20%20%20var%20perpY%20%3D%200%3B%0A%0A%20%20%20%20%2F%2F%20this%2Ecount%20%2D%3D%200%2E2%3B%0A%0A%20%20%20%20var%20vertices%20%3D%20this%2Evertices%3B%0A%20%20%20%20var%20total%20%3D%20points%2Elength%2C%0A%20%20%20%20%20%20%20%20point%2C%20index%2C%20ratio%2C%20perpLength%2C%20num%3B%0A%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20total%3B%20i%2B%2B%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20point%20%3D%20points%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20index%20%3D%20i%20%2A%204%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28i%20%3C%20points%2Elength%2D1%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20nextPoint%20%3D%20points%5Bi%2B1%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20nextPoint%20%3D%20point%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20perpY%20%3D%20%2D%28nextPoint%2Ex%20%2D%20lastPoint%2Ex%29%3B%0A%20%20%20%20%20%20%20%20perpX%20%3D%20nextPoint%2Ey%20%2D%20lastPoint%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20ratio%20%3D%20%281%20%2D%20%28i%20%2F%20%28total%2D1%29%29%29%20%2A%2010%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28ratio%20%3E%201%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ratio%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20perpLength%20%3D%20Math%2Esqrt%28perpX%20%2A%20perpX%20%2B%20perpY%20%2A%20perpY%29%3B%0A%20%20%20%20%20%20%20%20num%20%3D%20this%2E%5Ftexture%2Eheight%20%2F%202%3B%20%2F%2F%2820%20%2B%20Math%2Eabs%28Math%2Esin%28%28i%20%2B%20this%2Ecount%29%20%2A%200%2E3%29%20%2A%2050%29%20%29%2A%20ratio%3B%0A%20%20%20%20%20%20%20%20perpX%20%2F%3D%20perpLength%3B%0A%20%20%20%20%20%20%20%20perpY%20%2F%3D%20perpLength%3B%0A%0A%20%20%20%20%20%20%20%20perpX%20%2A%3D%20num%3B%0A%20%20%20%20%20%20%20%20perpY%20%2A%3D%20num%3B%0A%0A%20%20%20%20%20%20%20%20vertices%5Bindex%5D%20%3D%20point%2Ex%20%2B%20perpX%3B%0A%20%20%20%20%20%20%20%20vertices%5Bindex%2B1%5D%20%3D%20point%2Ey%20%2B%20perpY%3B%0A%20%20%20%20%20%20%20%20vertices%5Bindex%2B2%5D%20%3D%20point%2Ex%20%2D%20perpX%3B%0A%20%20%20%20%20%20%20%20vertices%5Bindex%2B3%5D%20%3D%20point%2Ey%20%2D%20perpY%3B%0A%0A%20%20%20%20%20%20%20%20lastPoint%20%3D%20point%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EcontainerUpdateTransform%28%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2Fcore%22%3A23%2C%22%2E%2FMesh%22%3A118%7D%5D%2C121%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2A%2A%0A%20%2A%20%40file%20%20%20%20%20%20%20%20Main%20export%20of%20the%20PIXI%20extras%20library%0A%20%2A%20%40author%20%20%20%20%20%20Mat%20Groves%20%3Cmat%40goodboydigital%2Ecom%3E%0A%20%2A%20%40copyright%20%20%202013%2D2015%20GoodBoyDigital%0A%20%2A%20%40license%20%20%20%20%20%7B%40link%20https%3A%2F%2Fgithub%2Ecom%2Fpixijs%2Fpixi%2Ejs%2Fblob%2Fmaster%2FLICENSE%7CMIT%20License%7D%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%20%40namespace%20PIXI%2Emesh%0A%20%2A%2F%0Amodule%2Eexports%20%3D%20%7B%0A%20%20%20%20Mesh%3A%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2FMesh%27%29%2C%0A%20%20%20%20Plane%3A%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2FPlane%27%29%2C%0A%20%20%20%20Rope%3A%20%20%20%20%20%20%20%20%20%20%20require%28%27%2E%2FRope%27%29%2C%0A%20%20%20%20MeshRenderer%3A%20%20%20require%28%27%2E%2Fwebgl%2FMeshRenderer%27%29%2C%0A%20%20%20%20MeshShader%3A%20%20%20%20%20require%28%27%2E%2Fwebgl%2FMeshShader%27%29%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FMesh%22%3A118%2C%22%2E%2FPlane%22%3A119%2C%22%2E%2FRope%22%3A120%2C%22%2E%2Fwebgl%2FMeshRenderer%22%3A122%2C%22%2E%2Fwebgl%2FMeshShader%22%3A123%7D%5D%2C122%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%2C%0A%20%20%20%20Mesh%20%3D%20require%28%27%2E%2E%2FMesh%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40author%20Mat%20Groves%0A%20%2A%0A%20%2A%20Big%20thanks%20to%20the%20very%20clever%20Matt%20DesLauriers%20%3Cmattdesl%3E%20https%3A%2F%2Fgithub%2Ecom%2Fmattdesl%2F%0A%20%2A%20for%20creating%20the%20original%20pixi%20version%21%0A%20%2A%20Also%20a%20thanks%20to%20https%3A%2F%2Fgithub%2Ecom%2Fbchevalier%20for%20tweaking%20the%20tint%20and%20alpha%20so%20that%20they%20now%20share%204%20bytes%20on%20the%20vertex%20buffer%0A%20%2A%0A%20%2A%20Heavily%20inspired%20by%20LibGDX%27s%20MeshRenderer%3A%0A%20%2A%20https%3A%2F%2Fgithub%2Ecom%2Flibgdx%2Flibgdx%2Fblob%2Fmaster%2Fgdx%2Fsrc%2Fcom%2Fbadlogic%2Fgdx%2Fgraphics%2Fg2d%2FMeshRenderer%2Ejava%0A%20%2A%2F%0A%0A%2F%2A%2A%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40private%0A%20%2A%20%40memberof%20PIXI%2Emesh%0A%20%2A%20%40extends%20PIXI%2EObjectRenderer%0A%20%2A%20%40param%20renderer%20%7BPIXI%2EWebGLRenderer%7D%20The%20renderer%20this%20sprite%20batch%20works%20for%2E%0A%20%2A%2F%0Afunction%20MeshRenderer%28renderer%29%0A%7B%0A%20%20%20%20core%2EObjectRenderer%2Ecall%28this%2C%20renderer%29%3B%0A%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Holds%20the%20indices%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BUint16Array%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%0A%20%20%20%20this%2Eindices%20%3D%20new%20Uint16Array%2815000%29%3B%0A%0A%20%20%20%20%2F%2FTODO%20this%20could%20be%20a%20single%20buffer%20shared%20amongst%20all%20renderers%20as%20we%20reuse%20this%20set%20up%20in%20most%20renderers%0A%20%20%20%20for%20%28var%20i%3D0%2C%20j%3D0%3B%20i%20%3C%2015000%3B%20i%20%2B%3D%206%2C%20j%20%2B%3D%204%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%200%5D%20%3D%20j%20%2B%200%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%201%5D%20%3D%20j%20%2B%201%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%202%5D%20%3D%20j%20%2B%202%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%203%5D%20%3D%20j%20%2B%200%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%204%5D%20%3D%20j%20%2B%202%3B%0A%20%20%20%20%20%20%20%20this%2Eindices%5Bi%20%2B%205%5D%20%3D%20j%20%2B%203%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2EcurrentShader%20%3D%20null%3B%0A%7D%0A%0AMeshRenderer%2Eprototype%20%3D%20Object%2Ecreate%28core%2EObjectRenderer%2Eprototype%29%3B%0AMeshRenderer%2Eprototype%2Econstructor%20%3D%20MeshRenderer%3B%0Amodule%2Eexports%20%3D%20MeshRenderer%3B%0A%0Acore%2EWebGLRenderer%2EregisterPlugin%28%27mesh%27%2C%20MeshRenderer%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20up%20the%20renderer%20context%20and%20necessary%20buffers%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20gl%20%7BWebGLRenderingContext%7D%20the%20current%20WebGL%20drawing%20context%0A%20%2A%2F%0AMeshRenderer%2Eprototype%2EonContextChange%20%3D%20function%20%28%29%0A%7B%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Renders%20the%20sprite%20object%2E%0A%20%2A%0A%20%2A%20%40param%20mesh%20%7BPIXI%2Emesh%2EMesh%7D%20the%20mesh%20to%20render%0A%20%2A%2F%0AMeshRenderer%2Eprototype%2Erender%20%3D%20function%20%28mesh%29%0A%7B%0A%20%20%20%20if%28%21mesh%2E%5FvertexBuffer%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5FinitWebGL%28mesh%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20renderer%20%3D%20this%2Erenderer%2C%0A%20%20%20%20%20%20%20%20gl%20%3D%20renderer%2Egl%2C%0A%20%20%20%20%20%20%20%20texture%20%3D%20mesh%2E%5Ftexture%2EbaseTexture%2C%0A%20%20%20%20%20%20%20%20shader%20%3D%20mesh%2Eshader%3B%2F%2F%20%7C%7C%20renderer%2EshaderManager%2Eplugins%2EmeshShader%3B%0A%0A%20%20%20%20var%20drawMode%20%3D%20mesh%2EdrawMode%20%3D%3D%3D%20Mesh%2EDRAW%5FMODES%2ETRIANGLE%5FMESH%20%3F%20gl%2ETRIANGLE%5FSTRIP%20%3A%20gl%2ETRIANGLES%3B%0A%0A%20%20%20%20renderer%2EblendModeManager%2EsetBlendMode%28mesh%2EblendMode%29%3B%0A%0A%20%20%20%20%2F%2FTODO%20cache%20custom%20state%2E%2E%0A%20%20%20%20if%20%28%21shader%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20shader%20%3D%20renderer%2EshaderManager%2Eplugins%2EmeshShader%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20shader%20%3D%20shader%2Eshaders%5Bgl%2Eid%5D%20%7C%7C%20shader%2EgetShader%28renderer%29%3B%2F%2F%20%3A%20shader%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Erenderer%2EshaderManager%2EsetShader%28shader%29%3B%0A%0A%20%20%20%20shader%2Euniforms%2EtranslationMatrix%2Evalue%20%3D%20mesh%2EworldTransform%2EtoArray%28true%29%3B%0A%20%20%20%20shader%2Euniforms%2EprojectionMatrix%2Evalue%20%3D%20renderer%2EcurrentRenderTarget%2EprojectionMatrix%2EtoArray%28true%29%3B%0A%20%20%20%20shader%2Euniforms%2Ealpha%2Evalue%20%3D%20mesh%2EworldAlpha%3B%0A%0A%20%20%20%20shader%2EsyncUniforms%28%29%3B%0A%0A%20%20%20%20if%20%28%21mesh%2Edirty%29%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20mesh%2E%5FvertexBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbufferSubData%28gl%2EARRAY%5FBUFFER%2C%200%2C%20mesh%2Evertices%29%3B%0A%20%20%20%20%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaVertexPosition%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%200%2C%200%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20update%20the%20uvs%0A%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20mesh%2E%5FuvBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaTextureCoord%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%200%2C%200%29%3B%0A%0A%0A%20%20%20%20%20%20%20%20gl%2EactiveTexture%28gl%2ETEXTURE0%29%3B%0A%0A%20%20%20%20%20%20%20if%20%28%21texture%2E%5FglTextures%5Bgl%2Eid%5D%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Erenderer%2EupdateTexture%28texture%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20bind%20the%20current%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EbindTexture%28gl%2ETEXTURE%5F2D%2C%20texture%2E%5FglTextures%5Bgl%2Eid%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20mesh%2E%5FindexBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbufferSubData%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%200%2C%20mesh%2Eindices%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%0A%20%20%20%20%20%20%20%20mesh%2Edirty%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20mesh%2E%5FvertexBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbufferData%28gl%2EARRAY%5FBUFFER%2C%20mesh%2Evertices%2C%20gl%2ESTATIC%5FDRAW%29%3B%0A%20%20%20%20%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaVertexPosition%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%200%2C%200%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20update%20the%20uvs%0A%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20mesh%2E%5FuvBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbufferData%28gl%2EARRAY%5FBUFFER%2C%20mesh%2Euvs%2C%20gl%2ESTATIC%5FDRAW%29%3B%0A%20%20%20%20%20%20%20%20gl%2EvertexAttribPointer%28shader%2Eattributes%2EaTextureCoord%2C%202%2C%20gl%2EFLOAT%2C%20false%2C%200%2C%200%29%3B%0A%0A%20%20%20%20%20%20%20%20%20gl%2EactiveTexture%28gl%2ETEXTURE0%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28%21texture%2E%5FglTextures%5Bgl%2Eid%5D%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Erenderer%2EupdateTexture%28texture%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20bind%20the%20current%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2EbindTexture%28gl%2ETEXTURE%5F2D%2C%20texture%2E%5FglTextures%5Bgl%2Eid%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20dont%20need%20to%20upload%21%0A%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20mesh%2E%5FindexBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbufferData%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20mesh%2Eindices%2C%20gl%2ESTATIC%5FDRAW%29%3B%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20gl%2EdrawElements%28drawMode%2C%20mesh%2Eindices%2Elength%2C%20gl%2EUNSIGNED%5FSHORT%2C%200%29%3B%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Prepares%20all%20the%20buffers%20to%20render%20this%20mesh%0A%20%2A%20%40param%20mesh%20%7BPIXI%2Emesh%2EMesh%7D%20the%20mesh%20to%20render%0A%20%2A%2F%0AMeshRenderer%2Eprototype%2E%5FinitWebGL%20%3D%20function%20%28mesh%29%0A%7B%0A%20%20%20%20%2F%2F%20build%20the%20strip%21%0A%20%20%20%20var%20gl%20%3D%20this%2Erenderer%2Egl%3B%0A%0A%20%20%20%20mesh%2E%5FvertexBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%20%20%20%20mesh%2E%5FindexBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%20%20%20%20mesh%2E%5FuvBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%0A%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20mesh%2E%5FvertexBuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EARRAY%5FBUFFER%2C%20mesh%2Evertices%2C%20gl%2EDYNAMIC%5FDRAW%29%3B%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20mesh%2E%5FuvBuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EARRAY%5FBUFFER%2C%20%20mesh%2Euvs%2C%20gl%2ESTATIC%5FDRAW%29%3B%0A%0A%20%20%20%20if%28mesh%2Ecolors%29%7B%0A%20%20%20%20%20%20%20%20mesh%2E%5FcolorBuffer%20%3D%20gl%2EcreateBuffer%28%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbindBuffer%28gl%2EARRAY%5FBUFFER%2C%20mesh%2E%5FcolorBuffer%29%3B%0A%20%20%20%20%20%20%20%20gl%2EbufferData%28gl%2EARRAY%5FBUFFER%2C%20mesh%2Ecolors%2C%20gl%2ESTATIC%5FDRAW%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gl%2EbindBuffer%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20mesh%2E%5FindexBuffer%29%3B%0A%20%20%20%20gl%2EbufferData%28gl%2EELEMENT%5FARRAY%5FBUFFER%2C%20mesh%2Eindices%2C%20gl%2ESTATIC%5FDRAW%29%3B%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Empties%20the%20current%20batch%2E%0A%20%2A%0A%20%2A%2F%0AMeshRenderer%2Eprototype%2Eflush%20%3D%20function%20%28%29%0A%7B%0A%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Starts%20a%20new%20mesh%20renderer%2E%0A%20%2A%0A%20%2A%2F%0AMeshRenderer%2Eprototype%2Estart%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20%0A%0A%20%20%20%20this%2EcurrentShader%20%3D%20null%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Destroys%20the%20Mesh%20renderer%0A%20%2A%0A%20%2A%2F%0AMeshRenderer%2Eprototype%2Edestroy%20%3D%20function%20%28%29%0A%7B%0A%20%20%20%20core%2EObjectRenderer%2Eprototype%2Edestroy%2Ecall%28this%29%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%2C%22%2E%2E%2FMesh%22%3A118%7D%5D%2C123%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20core%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fcore%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20%40class%0A%20%2A%20%40extends%20PIXI%2EShader%0A%20%2A%20%40memberof%20PIXI%2Emesh%0A%20%2A%20%40param%20shaderManager%20%7BPIXI%2EShaderManager%7D%20The%20WebGL%20shader%20manager%20this%20shader%20works%20for%2E%0A%20%2A%2F%0Afunction%20MeshShader%28shaderManager%29%0A%7B%0A%20%20%20%20core%2EShader%2Ecall%28this%2C%0A%20%20%20%20%20%20%20%20shaderManager%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20vertex%20shader%0A%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%27precision%20lowp%20float%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27attribute%20vec2%20aVertexPosition%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27attribute%20vec2%20aTextureCoord%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20mat3%20translationMatrix%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20mat3%20projectionMatrix%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27varying%20vec2%20vTextureCoord%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20gl%5FPosition%20%3D%20vec4%28%28projectionMatrix%20%2A%20translationMatrix%20%2A%20vec3%28aVertexPosition%2C%201%2E0%29%29%2Exy%2C%200%2E0%2C%201%2E0%29%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20vTextureCoord%20%3D%20aTextureCoord%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%7D%27%0A%20%20%20%20%20%20%20%20%5D%2Ejoin%28%27%5Cn%27%29%2C%0A%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%27precision%20lowp%20float%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27varying%20vec2%20vTextureCoord%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20float%20alpha%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27uniform%20sampler2D%20uSampler%3B%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%27void%20main%28void%29%7B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%20%20%20gl%5FFragColor%20%3D%20texture2D%28uSampler%2C%20vTextureCoord%29%20%2A%20alpha%20%3B%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27%7D%27%0A%20%20%20%20%20%20%20%20%5D%2Ejoin%28%27%5Cn%27%29%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20uniforms%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alpha%3A%20%20%7B%20type%3A%20%271f%27%2C%20value%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20translationMatrix%3A%20%7B%20type%3A%20%27mat3%27%2C%20value%3A%20new%20Float32Array%289%29%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20projectionMatrix%3A%20%7B%20type%3A%20%27mat3%27%2C%20value%3A%20new%20Float32Array%289%29%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20attributes%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20aVertexPosition%3A0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20aTextureCoord%3A0%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%29%3B%0A%7D%0A%0AMeshShader%2Eprototype%20%3D%20Object%2Ecreate%28core%2EShader%2Eprototype%29%3B%0AMeshShader%2Eprototype%2Econstructor%20%3D%20MeshShader%3B%0Amodule%2Eexports%20%3D%20MeshShader%3B%0A%0Acore%2EShaderManager%2EregisterPlugin%28%27meshShader%27%2C%20MeshShader%29%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2Fcore%22%3A23%7D%5D%2C124%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2F%20References%3A%0A%2F%2F%20https%3A%2F%2Fdeveloper%2Emozilla%2Eorg%2Fen%2DUS%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal%5FObjects%2FMath%2Fsign%0A%0Aif%20%28%21Math%2Esign%29%0A%7B%0A%20%20%20%20Math%2Esign%20%3D%20function%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20x%20%3D%20%2Bx%3B%0A%20%20%20%20%20%20%20%20if%20%28x%20%3D%3D%3D%200%20%7C%7C%20isNaN%28x%29%29%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20x%20%3E%200%20%3F%201%20%3A%20%2D1%3B%0A%20%20%20%20%7D%3B%0A%7D%0A%0A%7D%2C%7B%7D%5D%2C125%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2F%20References%3A%0A%2F%2F%20https%3A%2F%2Fgithub%2Ecom%2Fsindresorhus%2Fobject%2Dassign%0A%2F%2F%20https%3A%2F%2Fdeveloper%2Emozilla%2Eorg%2Fen%2DUS%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal%5FObjects%2FObject%2Fassign%0A%0Aif%20%28%21Object%2Eassign%29%0A%7B%0A%20%20%20%20Object%2Eassign%20%3D%20require%28%27object%2Dassign%27%29%3B%0A%7D%0A%0A%7D%2C%7B%22object%2Dassign%22%3A11%7D%5D%2C126%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Arequire%28%27%2E%2FObject%2Eassign%27%29%3B%0Arequire%28%27%2E%2FrequestAnimationFrame%27%29%3B%0Arequire%28%27%2E%2FMath%2Esign%27%29%3B%0A%0A%7D%2C%7B%22%2E%2FMath%2Esign%22%3A124%2C%22%2E%2FObject%2Eassign%22%3A125%2C%22%2E%2FrequestAnimationFrame%22%3A127%7D%5D%2C127%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%28function%20%28global%29%7B%0A%2F%2F%20References%3A%0A%2F%2F%20http%3A%2F%2Fpaulirish%2Ecom%2F2011%2Frequestanimationframe%2Dfor%2Dsmart%2Danimating%2F%0A%2F%2F%20https%3A%2F%2Fgist%2Egithub%2Ecom%2F1579671%0A%2F%2F%20http%3A%2F%2Fupdates%2Ehtml5rocks%2Ecom%2F2012%2F05%2FrequestAnimationFrame%2DAPI%2Dnow%2Dwith%2Dsub%2Dmillisecond%2Dprecision%0A%2F%2F%20https%3A%2F%2Fgist%2Egithub%2Ecom%2Ftimhall%2F4078614%0A%2F%2F%20https%3A%2F%2Fgithub%2Ecom%2FFinancial%2DTimes%2Fpolyfill%2Dservice%2Ftree%2Fmaster%2Fpolyfills%2FrequestAnimationFrame%0A%0A%2F%2F%20Expected%20to%20be%20used%20with%20Browserfiy%0A%2F%2F%20Browserify%20automatically%20detects%20the%20use%20of%20%60global%60%20and%20passes%20the%0A%2F%2F%20correct%20reference%20of%20%60global%60%2C%20%60self%60%2C%20and%20finally%20%60window%60%0A%0A%2F%2F%20Date%2Enow%0Aif%20%28%21%28Date%2Enow%20%26%26%20Date%2Eprototype%2EgetTime%29%29%20%7B%0A%20%20%20%20Date%2Enow%20%3D%20function%20now%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20Date%28%29%2EgetTime%28%29%3B%0A%20%20%20%20%7D%3B%0A%7D%0A%0A%2F%2F%20performance%2Enow%0Aif%20%28%21%28global%2Eperformance%20%26%26%20global%2Eperformance%2Enow%29%29%20%7B%0A%20%20%20%20var%20startTime%20%3D%20Date%2Enow%28%29%3B%0A%20%20%20%20if%20%28%21global%2Eperformance%29%20%7B%0A%20%20%20%20%20%20%20%20global%2Eperformance%20%3D%20%7B%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20global%2Eperformance%2Enow%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Date%2Enow%28%29%20%2D%20startTime%3B%0A%20%20%20%20%7D%3B%0A%7D%0A%0A%2F%2F%20requestAnimationFrame%0Avar%20lastTime%20%3D%20Date%2Enow%28%29%3B%0Avar%20vendors%20%3D%20%5B%27ms%27%2C%20%27moz%27%2C%20%27webkit%27%2C%20%27o%27%5D%3B%0A%0Afor%28var%20x%20%3D%200%3B%20x%20%3C%20vendors%2Elength%20%26%26%20%21global%2ErequestAnimationFrame%3B%20%2B%2Bx%29%20%7B%0A%20%20%20%20global%2ErequestAnimationFrame%20%3D%20global%5Bvendors%5Bx%5D%20%2B%20%27RequestAnimationFrame%27%5D%3B%0A%20%20%20%20global%2EcancelAnimationFrame%20%3D%20global%5Bvendors%5Bx%5D%20%2B%20%27CancelAnimationFrame%27%5D%20%7C%7C%0A%20%20%20%20%20%20%20%20global%5Bvendors%5Bx%5D%20%2B%20%27CancelRequestAnimationFrame%27%5D%3B%0A%7D%0A%0Aif%20%28%21global%2ErequestAnimationFrame%29%20%7B%0A%20%20%20%20global%2ErequestAnimationFrame%20%3D%20function%20%28callback%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20callback%20%21%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20TypeError%28callback%20%2B%20%27is%20not%20a%20function%27%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20currentTime%20%3D%20Date%2Enow%28%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20delay%20%3D%2016%20%2B%20lastTime%20%2D%20currentTime%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28delay%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delay%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20lastTime%20%3D%20currentTime%3B%0A%0A%20%20%20%20%20%20%20%20return%20setTimeout%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastTime%20%3D%20Date%2Enow%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28performance%2Enow%28%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20delay%29%3B%0A%20%20%20%20%7D%3B%0A%7D%0A%0Aif%20%28%21global%2EcancelAnimationFrame%29%20%7B%0A%20%20%20%20global%2EcancelAnimationFrame%20%3D%20function%28id%29%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout%28id%29%3B%0A%20%20%20%20%7D%3B%0A%7D%0A%0A%7D%29%2Ecall%28this%2Ctypeof%20global%20%21%3D%3D%20%22undefined%22%20%3F%20global%20%3A%20typeof%20self%20%21%3D%3D%20%22undefined%22%20%3F%20self%20%3A%20typeof%20window%20%21%3D%3D%20%22undefined%22%20%3F%20window%20%3A%20%7B%7D%29%0A%0A%7D%2C%7B%7D%5D%2C128%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%28function%20%28process%29%7B%0A%2F%2A%21%0A%20%2A%20async%0A%20%2A%20https%3A%2F%2Fgithub%2Ecom%2Fcaolan%2Fasync%0A%20%2A%0A%20%2A%20Copyright%202010%2D2014%20Caolan%20McMahon%0A%20%2A%20Released%20under%20the%20MIT%20license%0A%20%2A%2F%0A%2F%2Ajshint%20onevar%3A%20false%2C%20indent%3A4%20%2A%2F%0A%2F%2Aglobal%20setImmediate%3A%20false%2C%20setTimeout%3A%20false%2C%20console%3A%20false%20%2A%2F%0A%28function%20%28%29%20%7B%0A%0A%20%20%20%20var%20async%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2F%20global%20on%20the%20server%2C%20window%20in%20the%20browser%0A%20%20%20%20var%20root%2C%20previous%5Fasync%3B%0A%0A%20%20%20%20root%20%3D%20this%3B%0A%20%20%20%20if%20%28root%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20previous%5Fasync%20%3D%20root%2Easync%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%2EnoConflict%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20root%2Easync%20%3D%20previous%5Fasync%3B%0A%20%20%20%20%20%20%20%20return%20async%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20only%5Fonce%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20var%20called%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28called%29%20throw%20new%20Error%28%22Callback%20was%20already%20called%2E%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20called%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28root%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%2F%2F%20cross%2Dbrowser%20compatiblity%20functions%20%2F%2F%2F%2F%0A%0A%20%20%20%20var%20%5FtoString%20%3D%20Object%2Eprototype%2EtoString%3B%0A%0A%20%20%20%20var%20%5FisArray%20%3D%20Array%2EisArray%20%7C%7C%20function%20%28obj%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FtoString%2Ecall%28obj%29%20%3D%3D%3D%20%27%5Bobject%20Array%5D%27%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20var%20%5Feach%20%3D%20function%20%28arr%2C%20iterator%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28arr%2EforEach%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20arr%2EforEach%28iterator%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20arr%2Elength%3B%20i%20%2B%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28arr%5Bi%5D%2C%20i%2C%20arr%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20var%20%5Fmap%20%3D%20function%20%28arr%2C%20iterator%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28arr%2Emap%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20arr%2Emap%28iterator%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20results%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%5Feach%28arr%2C%20function%20%28x%2C%20i%2C%20a%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%2Epush%28iterator%28x%2C%20i%2C%20a%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20return%20results%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20var%20%5Freduce%20%3D%20function%20%28arr%2C%20iterator%2C%20memo%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28arr%2Ereduce%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20arr%2Ereduce%28iterator%2C%20memo%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5Feach%28arr%2C%20function%20%28x%2C%20i%2C%20a%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20memo%20%3D%20iterator%28memo%2C%20x%2C%20i%2C%20a%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20return%20memo%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20var%20%5Fkeys%20%3D%20function%20%28obj%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28Object%2Ekeys%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20Object%2Ekeys%28obj%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20keys%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20k%20in%20obj%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28obj%2EhasOwnProperty%28k%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20keys%2Epush%28k%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20keys%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%2F%2F%20exported%20async%20module%20functions%20%2F%2F%2F%2F%0A%0A%20%20%20%20%2F%2F%2F%2F%20nextTick%20implementation%20with%20browser%2Dcompatible%20fallback%20%2F%2F%2F%2F%0A%20%20%20%20if%20%28typeof%20process%20%3D%3D%3D%20%27undefined%27%20%7C%7C%20%21%28process%2EnextTick%29%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20setImmediate%20%3D%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2EnextTick%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20not%20a%20direct%20alias%20for%20IE10%20compatibility%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setImmediate%28fn%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%20%3D%20async%2EnextTick%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2EnextTick%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout%28fn%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%20%3D%20async%2EnextTick%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20async%2EnextTick%20%3D%20process%2EnextTick%3B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20setImmediate%20%21%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20not%20a%20direct%20alias%20for%20IE10%20compatibility%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20setImmediate%28fn%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%20%3D%20async%2EnextTick%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%2Eeach%20%3D%20function%20%28arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20callback%20%7C%7C%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20if%20%28%21arr%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20completed%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%5Feach%28arr%2C%20function%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2C%20only%5Fonce%28done%29%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20function%20done%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20completed%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28completed%20%3E%3D%20arr%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20async%2EforEach%20%3D%20async%2Eeach%3B%0A%0A%20%20%20%20async%2EeachSeries%20%3D%20function%20%28arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20callback%20%7C%7C%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20if%20%28%21arr%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20completed%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20iterate%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28arr%5Bcompleted%5D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20completed%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28completed%20%3E%3D%20arr%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iterate%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20iterate%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20async%2EforEachSeries%20%3D%20async%2EeachSeries%3B%0A%0A%20%20%20%20async%2EeachLimit%20%3D%20function%20%28arr%2C%20limit%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20fn%20%3D%20%5FeachLimit%28limit%29%3B%0A%20%20%20%20%20%20%20%20fn%2Eapply%28null%2C%20%5Barr%2C%20iterator%2C%20callback%5D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20async%2EforEachLimit%20%3D%20async%2EeachLimit%3B%0A%0A%20%20%20%20var%20%5FeachLimit%20%3D%20function%20%28limit%29%20%7B%0A%0A%20%20%20%20%20%20%20%20return%20function%20%28arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20callback%20%7C%7C%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21arr%2Elength%20%7C%7C%20limit%20%3C%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20completed%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20started%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20running%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%28function%20replenish%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28completed%20%3E%3D%20arr%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20%28running%20%3C%20limit%20%26%26%20started%20%3C%20arr%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20started%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20running%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iterator%28arr%5Bstarted%20%2D%201%5D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20completed%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20running%20%2D%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28completed%20%3E%3D%20arr%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20replenish%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%0A%20%20%20%20var%20doParallel%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%2Eapply%28null%2C%20%5Basync%2Eeach%5D%2Econcat%28args%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20var%20doParallelLimit%20%3D%20function%28limit%2C%20fn%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%2Eapply%28null%2C%20%5B%5FeachLimit%28limit%29%5D%2Econcat%28args%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20var%20doSeries%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%2Eapply%28null%2C%20%5Basync%2EeachSeries%5D%2Econcat%28args%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%0A%20%20%20%20var%20%5FasyncMap%20%3D%20function%20%28eachfn%2C%20arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20arr%20%3D%20%5Fmap%28arr%2C%20function%20%28x%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7Bindex%3A%20i%2C%20value%3A%20x%7D%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20if%20%28%21callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20eachfn%28arr%2C%20function%20%28x%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2Evalue%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20results%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20eachfn%28arr%2C%20function%20%28x%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2Evalue%2C%20function%20%28err%2C%20v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5Bx%2Eindex%5D%20%3D%20v%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20results%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20async%2Emap%20%3D%20doParallel%28%5FasyncMap%29%3B%0A%20%20%20%20async%2EmapSeries%20%3D%20doSeries%28%5FasyncMap%29%3B%0A%20%20%20%20async%2EmapLimit%20%3D%20function%20%28arr%2C%20limit%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FmapLimit%28limit%29%28arr%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20var%20%5FmapLimit%20%3D%20function%28limit%29%20%7B%0A%20%20%20%20%20%20%20%20return%20doParallelLimit%28limit%2C%20%5FasyncMap%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20reduce%20only%20has%20a%20series%20version%2C%20as%20doing%20reduce%20in%20parallel%20won%27t%0A%20%20%20%20%2F%2F%20work%20in%20many%20situations%2E%0A%20%20%20%20async%2Ereduce%20%3D%20function%20%28arr%2C%20memo%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20async%2EeachSeries%28arr%2C%20function%20%28x%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28memo%2C%20x%2C%20function%20%28err%2C%20v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20memo%20%3D%20v%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20memo%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20inject%20alias%0A%20%20%20%20async%2Einject%20%3D%20async%2Ereduce%3B%0A%20%20%20%20%2F%2F%20foldl%20alias%0A%20%20%20%20async%2Efoldl%20%3D%20async%2Ereduce%3B%0A%0A%20%20%20%20async%2EreduceRight%20%3D%20function%20%28arr%2C%20memo%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20reversed%20%3D%20%5Fmap%28arr%2C%20function%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%3B%0A%20%20%20%20%20%20%20%20%7D%29%2Ereverse%28%29%3B%0A%20%20%20%20%20%20%20%20async%2Ereduce%28reversed%2C%20memo%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20foldr%20alias%0A%20%20%20%20async%2Efoldr%20%3D%20async%2EreduceRight%3B%0A%0A%20%20%20%20var%20%5Ffilter%20%3D%20function%20%28eachfn%2C%20arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20results%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20arr%20%3D%20%5Fmap%28arr%2C%20function%20%28x%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7Bindex%3A%20i%2C%20value%3A%20x%7D%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20eachfn%28arr%2C%20function%20%28x%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2Evalue%2C%20function%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%2Epush%28x%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28%5Fmap%28results%2Esort%28function%20%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20a%2Eindex%20%2D%20b%2Eindex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%2C%20function%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20x%2Evalue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20async%2Efilter%20%3D%20doParallel%28%5Ffilter%29%3B%0A%20%20%20%20async%2EfilterSeries%20%3D%20doSeries%28%5Ffilter%29%3B%0A%20%20%20%20%2F%2F%20select%20alias%0A%20%20%20%20async%2Eselect%20%3D%20async%2Efilter%3B%0A%20%20%20%20async%2EselectSeries%20%3D%20async%2EfilterSeries%3B%0A%0A%20%20%20%20var%20%5Freject%20%3D%20function%20%28eachfn%2C%20arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20results%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20arr%20%3D%20%5Fmap%28arr%2C%20function%20%28x%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7Bindex%3A%20i%2C%20value%3A%20x%7D%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20eachfn%28arr%2C%20function%20%28x%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2Evalue%2C%20function%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%2Epush%28x%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28%5Fmap%28results%2Esort%28function%20%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20a%2Eindex%20%2D%20b%2Eindex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%2C%20function%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20x%2Evalue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20async%2Ereject%20%3D%20doParallel%28%5Freject%29%3B%0A%20%20%20%20async%2ErejectSeries%20%3D%20doSeries%28%5Freject%29%3B%0A%0A%20%20%20%20var%20%5Fdetect%20%3D%20function%20%28eachfn%2C%20arr%2C%20iterator%2C%20main%5Fcallback%29%20%7B%0A%20%20%20%20%20%20%20%20eachfn%28arr%2C%20function%20%28x%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2C%20function%20%28result%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28result%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20main%5Fcallback%28x%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20main%5Fcallback%20%3D%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20main%5Fcallback%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20async%2Edetect%20%3D%20doParallel%28%5Fdetect%29%3B%0A%20%20%20%20async%2EdetectSeries%20%3D%20doSeries%28%5Fdetect%29%3B%0A%0A%20%20%20%20async%2Esome%20%3D%20function%20%28arr%2C%20iterator%2C%20main%5Fcallback%29%20%7B%0A%20%20%20%20%20%20%20%20async%2Eeach%28arr%2C%20function%20%28x%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2C%20function%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20main%5Fcallback%28true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20main%5Fcallback%20%3D%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20main%5Fcallback%28false%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20any%20alias%0A%20%20%20%20async%2Eany%20%3D%20async%2Esome%3B%0A%0A%20%20%20%20async%2Eevery%20%3D%20function%20%28arr%2C%20iterator%2C%20main%5Fcallback%29%20%7B%0A%20%20%20%20%20%20%20%20async%2Eeach%28arr%2C%20function%20%28x%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2C%20function%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20main%5Fcallback%28false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20main%5Fcallback%20%3D%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20main%5Fcallback%28true%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20all%20alias%0A%20%20%20%20async%2Eall%20%3D%20async%2Eevery%3B%0A%0A%20%20%20%20async%2EsortBy%20%3D%20function%20%28arr%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20async%2Emap%28arr%2C%20function%20%28x%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28x%2C%20function%20%28err%2C%20criteria%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%2C%20%7Bvalue%3A%20x%2C%20criteria%3A%20criteria%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%2C%20results%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20fn%20%3D%20function%20%28left%2C%20right%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20a%20%3D%20left%2Ecriteria%2C%20b%20%3D%20right%2Ecriteria%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20a%20%3C%20b%20%3F%20%2D1%20%3A%20a%20%3E%20b%20%3F%201%20%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28null%2C%20%5Fmap%28results%2Esort%28fn%29%2C%20function%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20x%2Evalue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eauto%20%3D%20function%20%28tasks%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20callback%20%7C%7C%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20var%20keys%20%3D%20%5Fkeys%28tasks%29%3B%0A%20%20%20%20%20%20%20%20var%20remainingTasks%20%3D%20keys%2Elength%0A%20%20%20%20%20%20%20%20if%20%28%21remainingTasks%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20results%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20var%20listeners%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20var%20addListener%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20listeners%2Eunshift%28fn%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20var%20removeListener%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20listeners%2Elength%3B%20i%20%2B%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28listeners%5Bi%5D%20%3D%3D%3D%20fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listeners%2Esplice%28i%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20var%20taskComplete%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remainingTasks%2D%2D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Feach%28listeners%2Eslice%280%29%2C%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fn%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20addListener%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21remainingTasks%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20theCallback%20%3D%20callback%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20prevent%20final%20callback%20from%20calling%20itself%20if%20it%20errors%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20function%20%28%29%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20theCallback%28null%2C%20results%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%5Feach%28keys%2C%20function%20%28k%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20task%20%3D%20%5FisArray%28tasks%5Bk%5D%29%20%3F%20tasks%5Bk%5D%3A%20%5Btasks%5Bk%5D%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20taskCallback%20%3D%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28args%2Elength%20%3C%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20safeResults%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Feach%28%5Fkeys%28results%29%2C%20function%28rkey%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20safeResults%5Brkey%5D%20%3D%20results%5Brkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20safeResults%5Bk%5D%20%3D%20args%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20safeResults%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20stop%20subsequent%20errors%20hitting%20callback%20multiple%20times%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5Bk%5D%20%3D%20args%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28taskComplete%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20requires%20%3D%20task%2Eslice%280%2C%20Math%2Eabs%28task%2Elength%20%2D%201%29%29%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20ready%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%5Freduce%28requires%2C%20function%20%28a%2C%20x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%28a%20%26%26%20results%2EhasOwnProperty%28x%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20true%29%20%26%26%20%21results%2EhasOwnProperty%28k%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28ready%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20task%5Btask%2Elength%20%2D%201%5D%28taskCallback%2C%20results%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20listener%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28ready%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20removeListener%28listener%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20task%5Btask%2Elength%20%2D%201%5D%28taskCallback%2C%20results%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20addListener%28listener%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eretry%20%3D%20function%28times%2C%20task%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20DEFAULT%5FTIMES%20%3D%205%3B%0A%20%20%20%20%20%20%20%20var%20attempts%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20Use%20defaults%20if%20times%20not%20passed%0A%20%20%20%20%20%20%20%20if%20%28typeof%20times%20%3D%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20task%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20task%20%3D%20times%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20times%20%3D%20DEFAULT%5FTIMES%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Make%20sure%20times%20is%20a%20number%0A%20%20%20%20%20%20%20%20times%20%3D%20parseInt%28times%2C%2010%29%20%7C%7C%20DEFAULT%5FTIMES%3B%0A%20%20%20%20%20%20%20%20var%20wrappedTask%20%3D%20function%28wrappedCallback%2C%20wrappedResults%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20retryAttempt%20%3D%20function%28task%2C%20finalAttempt%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20function%28seriesCallback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20task%28function%28err%2C%20result%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20seriesCallback%28%21err%20%7C%7C%20finalAttempt%2C%20%7Berr%3A%20err%2C%20result%3A%20result%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20wrappedResults%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20%28times%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20attempts%2Epush%28retryAttempt%28task%2C%20%21%28times%2D%3D1%29%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2Eseries%28attempts%2C%20function%28done%2C%20data%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%20%3D%20data%5Bdata%2Elength%20%2D%201%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28wrappedCallback%20%7C%7C%20callback%29%28data%2Eerr%2C%20data%2Eresult%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20a%20callback%20is%20passed%2C%20run%20this%20as%20a%20controll%20flow%0A%20%20%20%20%20%20%20%20return%20callback%20%3F%20wrappedTask%28%29%20%3A%20wrappedTask%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Ewaterfall%20%3D%20function%20%28tasks%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20callback%20%7C%7C%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20if%20%28%21%5FisArray%28tasks%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20err%20%3D%20new%20Error%28%27First%20argument%20to%20waterfall%20must%20be%20an%20array%20of%20functions%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20return%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%21tasks%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20wrapIterator%20%3D%20function%20%28iterator%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%2Eapply%28null%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20next%20%3D%20iterator%2Enext%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28next%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%2Epush%28wrapIterator%28next%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%2Epush%28callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iterator%2Eapply%28null%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20wrapIterator%28async%2Eiterator%28tasks%29%29%28%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20var%20%5Fparallel%20%3D%20function%28eachfn%2C%20tasks%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20callback%20%7C%7C%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20if%20%28%5FisArray%28tasks%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20eachfn%2Emap%28tasks%2C%20function%20%28fn%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fn%28function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28args%2Elength%20%3C%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%2Ecall%28null%2C%20err%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20results%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20eachfn%2Eeach%28%5Fkeys%28tasks%29%2C%20function%20%28k%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tasks%5Bk%5D%28function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28args%2Elength%20%3C%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5Bk%5D%20%3D%20args%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20results%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eparallel%20%3D%20function%20%28tasks%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%5Fparallel%28%7B%20map%3A%20async%2Emap%2C%20each%3A%20async%2Eeach%20%7D%2C%20tasks%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EparallelLimit%20%3D%20function%28tasks%2C%20limit%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%5Fparallel%28%7B%20map%3A%20%5FmapLimit%28limit%29%2C%20each%3A%20%5FeachLimit%28limit%29%20%7D%2C%20tasks%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eseries%20%3D%20function%20%28tasks%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20callback%20%3D%20callback%20%7C%7C%20function%20%28%29%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20if%20%28%5FisArray%28tasks%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2EmapSeries%28tasks%2C%20function%20%28fn%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fn%28function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28args%2Elength%20%3C%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%2Ecall%28null%2C%20err%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20results%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2EeachSeries%28%5Fkeys%28tasks%29%2C%20function%20%28k%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tasks%5Bk%5D%28function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28args%2Elength%20%3C%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5Bk%5D%20%3D%20args%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20results%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eiterator%20%3D%20function%20%28tasks%29%20%7B%0A%20%20%20%20%20%20%20%20var%20makeCallback%20%3D%20function%20%28index%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20fn%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28tasks%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tasks%5Bindex%5D%2Eapply%28null%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%2Enext%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%2Enext%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%28index%20%3C%20tasks%2Elength%20%2D%201%29%20%3F%20makeCallback%28index%20%2B%201%29%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20return%20makeCallback%280%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eapply%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20return%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fn%2Eapply%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20null%2C%20args%2Econcat%28Array%2Eprototype%2Eslice%2Ecall%28arguments%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20var%20%5Fconcat%20%3D%20function%20%28eachfn%2C%20arr%2C%20fn%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20r%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20eachfn%28arr%2C%20function%20%28x%2C%20cb%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%28x%2C%20function%20%28err%2C%20y%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r%20%3D%20r%2Econcat%28y%20%7C%7C%20%5B%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cb%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28err%2C%20r%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20async%2Econcat%20%3D%20doParallel%28%5Fconcat%29%3B%0A%20%20%20%20async%2EconcatSeries%20%3D%20doSeries%28%5Fconcat%29%3B%0A%0A%20%20%20%20async%2Ewhilst%20%3D%20function%20%28test%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28test%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2Ewhilst%28test%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EdoWhilst%20%3D%20function%20%28iterator%2C%20test%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20iterator%28function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28test%2Eapply%28null%2C%20args%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EdoWhilst%28iterator%2C%20test%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Euntil%20%3D%20function%20%28test%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21test%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterator%28function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2Euntil%28test%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EdoUntil%20%3D%20function%20%28iterator%2C%20test%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20iterator%28function%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21test%2Eapply%28null%2C%20args%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EdoUntil%28iterator%2C%20test%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Equeue%20%3D%20function%20%28worker%2C%20concurrency%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28concurrency%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20concurrency%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20function%20%5Finsert%28q%2C%20data%2C%20pos%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21q%2Estarted%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20q%2Estarted%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21%5FisArray%28data%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%20%3D%20%5Bdata%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%28data%2Elength%20%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20call%20drain%20immediately%20if%20there%20are%20no%20tasks%0A%20%20%20%20%20%20%20%20%20%20%20%20%20return%20async%2EsetImmediate%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Edrain%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Edrain%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5Feach%28data%2C%20function%28task%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20item%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20task%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%3A%20typeof%20callback%20%3D%3D%3D%20%27function%27%20%3F%20callback%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pos%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Etasks%2Eunshift%28item%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Etasks%2Epush%28item%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Esaturated%20%26%26%20q%2Etasks%2Elength%20%3D%3D%3D%20q%2Econcurrency%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Esaturated%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28q%2Eprocess%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20workers%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20q%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tasks%3A%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20concurrency%3A%20concurrency%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20saturated%3A%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20empty%3A%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20drain%3A%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20started%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20paused%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20push%3A%20function%20%28data%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Finsert%28q%2C%20data%2C%20false%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20kill%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Edrain%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Etasks%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20unshift%3A%20function%20%28data%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Finsert%28q%2C%20data%2C%20true%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20process%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21q%2Epaused%20%26%26%20workers%20%3C%20q%2Econcurrency%20%26%26%20q%2Etasks%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20task%20%3D%20q%2Etasks%2Eshift%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Eempty%20%26%26%20q%2Etasks%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Eempty%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20workers%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20next%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20workers%20%2D%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28task%2Ecallback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20task%2Ecallback%2Eapply%28task%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Edrain%20%26%26%20q%2Etasks%2Elength%20%2B%20workers%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Edrain%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Eprocess%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20cb%20%3D%20only%5Fonce%28next%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20worker%28task%2Edata%2C%20cb%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20length%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20q%2Etasks%2Elength%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20running%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20workers%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20idle%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20q%2Etasks%2Elength%20%2B%20workers%20%3D%3D%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20pause%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Epaused%20%3D%3D%3D%20true%29%20%7B%20return%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Epaused%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Eprocess%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20resume%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Epaused%20%3D%3D%3D%20false%29%20%7B%20return%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Epaused%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Eprocess%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20return%20q%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20async%2EpriorityQueue%20%3D%20function%20%28worker%2C%20concurrency%29%20%7B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20function%20%5FcompareTasks%28a%2C%20b%29%7B%0A%20%20%20%20%20%20%20%20%20%20return%20a%2Epriority%20%2D%20b%2Epriority%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20function%20%5FbinarySearch%28sequence%2C%20item%2C%20compare%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20beg%20%3D%20%2D1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20sequence%2Elength%20%2D%201%3B%0A%20%20%20%20%20%20%20%20%20%20while%20%28beg%20%3C%20end%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20mid%20%3D%20beg%20%2B%20%28%28end%20%2D%20beg%20%2B%201%29%20%3E%3E%3E%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28compare%28item%2C%20sequence%5Bmid%5D%29%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20beg%20%3D%20mid%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20mid%20%2D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20beg%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20function%20%5Finsert%28q%2C%20data%2C%20priority%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21q%2Estarted%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20q%2Estarted%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21%5FisArray%28data%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%20%3D%20%5Bdata%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%28data%2Elength%20%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20call%20drain%20immediately%20if%20there%20are%20no%20tasks%0A%20%20%20%20%20%20%20%20%20%20%20%20%20return%20async%2EsetImmediate%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Edrain%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Edrain%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5Feach%28data%2C%20function%28task%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20item%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20task%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20priority%3A%20priority%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%3A%20typeof%20callback%20%3D%3D%3D%20%27function%27%20%3F%20callback%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Etasks%2Esplice%28%5FbinarySearch%28q%2Etasks%2C%20item%2C%20%5FcompareTasks%29%20%2B%201%2C%200%2C%20item%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28q%2Esaturated%20%26%26%20q%2Etasks%2Elength%20%3D%3D%3D%20q%2Econcurrency%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%2Esaturated%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28q%2Eprocess%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Start%20with%20a%20normal%20queue%0A%20%20%20%20%20%20%20%20var%20q%20%3D%20async%2Equeue%28worker%2C%20concurrency%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Override%20push%20to%20accept%20second%20parameter%20representing%20priority%0A%20%20%20%20%20%20%20%20q%2Epush%20%3D%20function%20%28data%2C%20priority%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%5Finsert%28q%2C%20data%2C%20priority%2C%20callback%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Remove%20unshift%20function%0A%20%20%20%20%20%20%20%20delete%20q%2Eunshift%3B%0A%0A%20%20%20%20%20%20%20%20return%20q%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Ecargo%20%3D%20function%20%28worker%2C%20payload%29%20%7B%0A%20%20%20%20%20%20%20%20var%20working%20%20%20%20%20%3D%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20tasks%20%20%20%20%20%20%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20var%20cargo%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tasks%3A%20tasks%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20payload%3A%20payload%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20saturated%3A%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20empty%3A%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20drain%3A%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20drained%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20push%3A%20function%20%28data%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21%5FisArray%28data%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%20%3D%20%5Bdata%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Feach%28data%2C%20function%28task%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tasks%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20task%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%3A%20typeof%20callback%20%3D%3D%3D%20%27function%27%20%3F%20callback%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cargo%2Edrained%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28cargo%2Esaturated%20%26%26%20tasks%2Elength%20%3D%3D%3D%20payload%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cargo%2Esaturated%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EsetImmediate%28cargo%2Eprocess%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20process%3A%20function%20process%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28working%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28tasks%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%28cargo%2Edrain%20%26%26%20%21cargo%2Edrained%29%20cargo%2Edrain%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cargo%2Edrained%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20ts%20%3D%20typeof%20payload%20%3D%3D%3D%20%27number%27%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20tasks%2Esplice%280%2C%20payload%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20tasks%2Esplice%280%2C%20tasks%2Elength%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20ds%20%3D%20%5Fmap%28ts%2C%20function%20%28task%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20task%2Edata%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%28cargo%2Eempty%29%20cargo%2Eempty%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20working%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20worker%28ds%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20working%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20arguments%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Feach%28ts%2C%20function%20%28data%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2Ecallback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%2Ecallback%2Eapply%28null%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20process%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20length%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20tasks%2Elength%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20running%3A%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20working%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20return%20cargo%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20var%20%5Fconsole%5Ffn%20%3D%20function%20%28name%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28null%2C%20args%2Econcat%28%5Bfunction%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20console%20%21%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28console%2Eerror%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console%2Eerror%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28console%5Bname%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Feach%28args%2C%20function%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console%5Bname%5D%28x%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%5D%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20async%2Elog%20%3D%20%5Fconsole%5Ffn%28%27log%27%29%3B%0A%20%20%20%20async%2Edir%20%3D%20%5Fconsole%5Ffn%28%27dir%27%29%3B%0A%20%20%20%20%2F%2Aasync%2Einfo%20%3D%20%5Fconsole%5Ffn%28%27info%27%29%3B%0A%20%20%20%20async%2Ewarn%20%3D%20%5Fconsole%5Ffn%28%27warn%27%29%3B%0A%20%20%20%20async%2Eerror%20%3D%20%5Fconsole%5Ffn%28%27error%27%29%3B%2A%2F%0A%0A%20%20%20%20async%2Ememoize%20%3D%20function%20%28fn%2C%20hasher%29%20%7B%0A%20%20%20%20%20%20%20%20var%20memo%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20var%20queues%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20hasher%20%3D%20hasher%20%7C%7C%20function%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20var%20memoized%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20callback%20%3D%20args%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20key%20%3D%20hasher%2Eapply%28null%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28key%20in%20memo%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20async%2EnextTick%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%2Eapply%28null%2C%20memo%5Bkey%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28key%20in%20queues%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queues%5Bkey%5D%2Epush%28callback%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queues%5Bkey%5D%20%3D%20%5Bcallback%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28null%2C%20args%2Econcat%28%5Bfunction%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20memo%5Bkey%5D%20%3D%20arguments%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20q%20%3D%20queues%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete%20queues%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20l%20%3D%20q%2Elength%3B%20i%20%3C%20l%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20q%5Bi%5D%2Eapply%28null%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20memoized%2Ememo%20%3D%20memo%3B%0A%20%20%20%20%20%20%20%20memoized%2Eunmemoized%20%3D%20fn%3B%0A%20%20%20%20%20%20%20%20return%20memoized%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eunmemoize%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20%20%20return%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%28fn%2Eunmemoized%20%7C%7C%20fn%29%2Eapply%28null%2C%20arguments%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Etimes%20%3D%20function%20%28count%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20counter%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20count%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20counter%2Epush%28i%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20async%2Emap%28counter%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2EtimesSeries%20%3D%20function%20%28count%2C%20iterator%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20var%20counter%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20count%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20counter%2Epush%28i%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20async%2EmapSeries%28counter%2C%20iterator%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Eseq%20%3D%20function%20%28%2F%2A%20functions%2E%2E%2E%20%2A%2F%29%20%7B%0A%20%20%20%20%20%20%20%20var%20fns%20%3D%20arguments%3B%0A%20%20%20%20%20%20%20%20return%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20that%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20callback%20%3D%20args%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20async%2Ereduce%28fns%2C%20args%2C%20function%20%28newargs%2C%20fn%2C%20cb%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28that%2C%20newargs%2Econcat%28%5Bfunction%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20err%20%3D%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20nextargs%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cb%28err%2C%20nextargs%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5D%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20%28err%2C%20results%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%2Eapply%28that%2C%20%5Berr%5D%2Econcat%28results%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20async%2Ecompose%20%3D%20function%20%28%2F%2A%20functions%2E%2E%2E%20%2A%2F%29%20%7B%0A%20%20%20%20%20%20return%20async%2Eseq%2Eapply%28null%2C%20Array%2Eprototype%2Ereverse%2Ecall%28arguments%29%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20var%20%5FapplyEach%20%3D%20function%20%28eachfn%2C%20fns%20%2F%2Aargs%2E%2E%2E%2A%2F%29%20%7B%0A%20%20%20%20%20%20%20%20var%20go%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20that%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20callback%20%3D%20args%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20eachfn%28fns%2C%20function%20%28fn%2C%20cb%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fn%2Eapply%28that%2C%20args%2Econcat%28%5Bcb%5D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20if%20%28arguments%2Elength%20%3E%202%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20Array%2Eprototype%2Eslice%2Ecall%28arguments%2C%202%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20go%2Eapply%28this%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20go%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20async%2EapplyEach%20%3D%20doParallel%28%5FapplyEach%29%3B%0A%20%20%20%20async%2EapplyEachSeries%20%3D%20doSeries%28%5FapplyEach%29%3B%0A%0A%20%20%20%20async%2Eforever%20%3D%20function%20%28fn%2C%20callback%29%20%7B%0A%20%20%20%20%20%20%20%20function%20next%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28callback%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback%28err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20err%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%28next%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20next%28%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Node%2Ejs%0A%20%20%20%20if%20%28typeof%20module%20%21%3D%3D%20%27undefined%27%20%26%26%20module%2Eexports%29%20%7B%0A%20%20%20%20%20%20%20%20module%2Eexports%20%3D%20async%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20AMD%20%2F%20RequireJS%0A%20%20%20%20else%20if%20%28typeof%20define%20%21%3D%3D%20%27undefined%27%20%26%26%20define%2Eamd%29%20%7B%0A%20%20%20%20%20%20%20%20define%28%5B%5D%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20async%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20included%20directly%20via%20%3Cscript%3E%20tag%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20root%2Easync%20%3D%20async%3B%0A%20%20%20%20%7D%0A%0A%7D%28%29%29%3B%0A%0A%7D%29%2Ecall%28this%2Crequire%28%27%5Fprocess%27%29%29%0A%0A%7D%2C%7B%22%5Fprocess%22%3A3%7D%5D%2C129%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%27use%20strict%27%3B%0A%0A%2F%2F%0A%2F%2F%20We%20store%20our%20EE%20objects%20in%20a%20plain%20object%20whose%20properties%20are%20event%20names%2E%0A%2F%2F%20If%20%60Object%2Ecreate%28null%29%60%20is%20not%20supported%20we%20prefix%20the%20event%20names%20with%20a%0A%2F%2F%20%60%7E%60%20to%20make%20sure%20that%20the%20built%2Din%20object%20properties%20are%20not%20overridden%20or%0A%2F%2F%20used%20as%20an%20attack%20vector%2E%0A%2F%2F%20We%20also%20assume%20that%20%60Object%2Ecreate%28null%29%60%20is%20available%20when%20the%20event%20name%0A%2F%2F%20is%20an%20ES6%20Symbol%2E%0A%2F%2F%0Avar%20prefix%20%3D%20typeof%20Object%2Ecreate%20%21%3D%3D%20%27function%27%20%3F%20%27%7E%27%20%3A%20false%3B%0A%0A%2F%2A%2A%0A%20%2A%20Representation%20of%20a%20single%20EventEmitter%20function%2E%0A%20%2A%0A%20%2A%20%40param%20%7BFunction%7D%20fn%20Event%20handler%20to%20be%20called%2E%0A%20%2A%20%40param%20%7BMixed%7D%20context%20Context%20for%20function%20execution%2E%0A%20%2A%20%40param%20%7BBoolean%7D%20once%20Only%20emit%20once%0A%20%2A%20%40api%20private%0A%20%2A%2F%0Afunction%20EE%28fn%2C%20context%2C%20once%29%20%7B%0A%20%20this%2Efn%20%3D%20fn%3B%0A%20%20this%2Econtext%20%3D%20context%3B%0A%20%20this%2Eonce%20%3D%20once%20%7C%7C%20false%3B%0A%7D%0A%0A%2F%2A%2A%0A%20%2A%20Minimal%20EventEmitter%20interface%20that%20is%20molded%20against%20the%20Node%2Ejs%0A%20%2A%20EventEmitter%20interface%2E%0A%20%2A%0A%20%2A%20%40constructor%0A%20%2A%20%40api%20public%0A%20%2A%2F%0Afunction%20EventEmitter%28%29%20%7B%20%2F%2A%20Nothing%20to%20set%20%2A%2F%20%7D%0A%0A%2F%2A%2A%0A%20%2A%20Holds%20the%20assigned%20EventEmitters%20by%20name%2E%0A%20%2A%0A%20%2A%20%40type%20%7BObject%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AEventEmitter%2Eprototype%2E%5Fevents%20%3D%20undefined%3B%0A%0A%2F%2A%2A%0A%20%2A%20Return%20a%20list%20of%20assigned%20event%20listeners%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20The%20events%20that%20should%20be%20listed%2E%0A%20%2A%20%40param%20%7BBoolean%7D%20exists%20We%20only%20need%20to%20know%20if%20there%20are%20listeners%2E%0A%20%2A%20%40returns%20%7BArray%7CBoolean%7D%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2Elisteners%20%3D%20function%20listeners%28event%2C%20exists%29%20%7B%0A%20%20var%20evt%20%3D%20prefix%20%3F%20prefix%20%2B%20event%20%3A%20event%0A%20%20%20%20%2C%20available%20%3D%20this%2E%5Fevents%20%26%26%20this%2E%5Fevents%5Bevt%5D%3B%0A%0A%20%20if%20%28exists%29%20return%20%21%21available%3B%0A%20%20if%20%28%21available%29%20return%20%5B%5D%3B%0A%20%20if%20%28this%2E%5Fevents%5Bevt%5D%2Efn%29%20return%20%5Bthis%2E%5Fevents%5Bevt%5D%2Efn%5D%3B%0A%0A%20%20for%20%28var%20i%20%3D%200%2C%20l%20%3D%20this%2E%5Fevents%5Bevt%5D%2Elength%2C%20ee%20%3D%20new%20Array%28l%29%3B%20i%20%3C%20l%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20ee%5Bi%5D%20%3D%20this%2E%5Fevents%5Bevt%5D%5Bi%5D%2Efn%3B%0A%20%20%7D%0A%0A%20%20return%20ee%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Emit%20an%20event%20to%20all%20registered%20event%20listeners%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20The%20name%20of%20the%20event%2E%0A%20%2A%20%40returns%20%7BBoolean%7D%20Indication%20if%20we%27ve%20emitted%20an%20event%2E%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2Eemit%20%3D%20function%20emit%28event%2C%20a1%2C%20a2%2C%20a3%2C%20a4%2C%20a5%29%20%7B%0A%20%20var%20evt%20%3D%20prefix%20%3F%20prefix%20%2B%20event%20%3A%20event%3B%0A%0A%20%20if%20%28%21this%2E%5Fevents%20%7C%7C%20%21this%2E%5Fevents%5Bevt%5D%29%20return%20false%3B%0A%0A%20%20var%20listeners%20%3D%20this%2E%5Fevents%5Bevt%5D%0A%20%20%20%20%2C%20len%20%3D%20arguments%2Elength%0A%20%20%20%20%2C%20args%0A%20%20%20%20%2C%20i%3B%0A%0A%20%20if%20%28%27function%27%20%3D%3D%3D%20typeof%20listeners%2Efn%29%20%7B%0A%20%20%20%20if%20%28listeners%2Eonce%29%20this%2EremoveListener%28event%2C%20listeners%2Efn%2C%20undefined%2C%20true%29%3B%0A%0A%20%20%20%20switch%20%28len%29%20%7B%0A%20%20%20%20%20%20case%201%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%29%2C%20true%3B%0A%20%20%20%20%20%20case%202%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%2C%20a1%29%2C%20true%3B%0A%20%20%20%20%20%20case%203%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%2C%20a1%2C%20a2%29%2C%20true%3B%0A%20%20%20%20%20%20case%204%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%2C%20a1%2C%20a2%2C%20a3%29%2C%20true%3B%0A%20%20%20%20%20%20case%205%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%2C%20a1%2C%20a2%2C%20a3%2C%20a4%29%2C%20true%3B%0A%20%20%20%20%20%20case%206%3A%20return%20listeners%2Efn%2Ecall%28listeners%2Econtext%2C%20a1%2C%20a2%2C%20a3%2C%20a4%2C%20a5%29%2C%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20%28i%20%3D%201%2C%20args%20%3D%20new%20Array%28len%20%2D1%29%3B%20i%20%3C%20len%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20args%5Bi%20%2D%201%5D%20%3D%20arguments%5Bi%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20listeners%2Efn%2Eapply%28listeners%2Econtext%2C%20args%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20var%20length%20%3D%20listeners%2Elength%0A%20%20%20%20%20%20%2C%20j%3B%0A%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20if%20%28listeners%5Bi%5D%2Eonce%29%20this%2EremoveListener%28event%2C%20listeners%5Bi%5D%2Efn%2C%20undefined%2C%20true%29%3B%0A%0A%20%20%20%20%20%20switch%20%28len%29%20%7B%0A%20%20%20%20%20%20%20%20case%201%3A%20listeners%5Bi%5D%2Efn%2Ecall%28listeners%5Bi%5D%2Econtext%29%3B%20break%3B%0A%20%20%20%20%20%20%20%20case%202%3A%20listeners%5Bi%5D%2Efn%2Ecall%28listeners%5Bi%5D%2Econtext%2C%20a1%29%3B%20break%3B%0A%20%20%20%20%20%20%20%20case%203%3A%20listeners%5Bi%5D%2Efn%2Ecall%28listeners%5Bi%5D%2Econtext%2C%20a1%2C%20a2%29%3B%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21args%29%20for%20%28j%20%3D%201%2C%20args%20%3D%20new%20Array%28len%20%2D1%29%3B%20j%20%3C%20len%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20args%5Bj%20%2D%201%5D%20%3D%20arguments%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20listeners%5Bi%5D%2Efn%2Eapply%28listeners%5Bi%5D%2Econtext%2C%20args%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20return%20true%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Register%20a%20new%20EventListener%20for%20the%20given%20event%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20Name%20of%20the%20event%2E%0A%20%2A%20%40param%20%7BFuncton%7D%20fn%20Callback%20function%2E%0A%20%2A%20%40param%20%7BMixed%7D%20context%20The%20context%20of%20the%20function%2E%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2Eon%20%3D%20function%20on%28event%2C%20fn%2C%20context%29%20%7B%0A%20%20var%20listener%20%3D%20new%20EE%28fn%2C%20context%20%7C%7C%20this%29%0A%20%20%20%20%2C%20evt%20%3D%20prefix%20%3F%20prefix%20%2B%20event%20%3A%20event%3B%0A%0A%20%20if%20%28%21this%2E%5Fevents%29%20this%2E%5Fevents%20%3D%20prefix%20%3F%20%7B%7D%20%3A%20Object%2Ecreate%28null%29%3B%0A%20%20if%20%28%21this%2E%5Fevents%5Bevt%5D%29%20this%2E%5Fevents%5Bevt%5D%20%3D%20listener%3B%0A%20%20else%20%7B%0A%20%20%20%20if%20%28%21this%2E%5Fevents%5Bevt%5D%2Efn%29%20this%2E%5Fevents%5Bevt%5D%2Epush%28listener%29%3B%0A%20%20%20%20else%20this%2E%5Fevents%5Bevt%5D%20%3D%20%5B%0A%20%20%20%20%20%20this%2E%5Fevents%5Bevt%5D%2C%20listener%0A%20%20%20%20%5D%3B%0A%20%20%7D%0A%0A%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Add%20an%20EventListener%20that%27s%20only%20called%20once%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20Name%20of%20the%20event%2E%0A%20%2A%20%40param%20%7BFunction%7D%20fn%20Callback%20function%2E%0A%20%2A%20%40param%20%7BMixed%7D%20context%20The%20context%20of%20the%20function%2E%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2Eonce%20%3D%20function%20once%28event%2C%20fn%2C%20context%29%20%7B%0A%20%20var%20listener%20%3D%20new%20EE%28fn%2C%20context%20%7C%7C%20this%2C%20true%29%0A%20%20%20%20%2C%20evt%20%3D%20prefix%20%3F%20prefix%20%2B%20event%20%3A%20event%3B%0A%0A%20%20if%20%28%21this%2E%5Fevents%29%20this%2E%5Fevents%20%3D%20prefix%20%3F%20%7B%7D%20%3A%20Object%2Ecreate%28null%29%3B%0A%20%20if%20%28%21this%2E%5Fevents%5Bevt%5D%29%20this%2E%5Fevents%5Bevt%5D%20%3D%20listener%3B%0A%20%20else%20%7B%0A%20%20%20%20if%20%28%21this%2E%5Fevents%5Bevt%5D%2Efn%29%20this%2E%5Fevents%5Bevt%5D%2Epush%28listener%29%3B%0A%20%20%20%20else%20this%2E%5Fevents%5Bevt%5D%20%3D%20%5B%0A%20%20%20%20%20%20this%2E%5Fevents%5Bevt%5D%2C%20listener%0A%20%20%20%20%5D%3B%0A%20%20%7D%0A%0A%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Remove%20event%20listeners%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20The%20event%20we%20want%20to%20remove%2E%0A%20%2A%20%40param%20%7BFunction%7D%20fn%20The%20listener%20that%20we%20need%20to%20find%2E%0A%20%2A%20%40param%20%7BMixed%7D%20context%20Only%20remove%20listeners%20matching%20this%20context%2E%0A%20%2A%20%40param%20%7BBoolean%7D%20once%20Only%20remove%20once%20listeners%2E%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2EremoveListener%20%3D%20function%20removeListener%28event%2C%20fn%2C%20context%2C%20once%29%20%7B%0A%20%20var%20evt%20%3D%20prefix%20%3F%20prefix%20%2B%20event%20%3A%20event%3B%0A%0A%20%20if%20%28%21this%2E%5Fevents%20%7C%7C%20%21this%2E%5Fevents%5Bevt%5D%29%20return%20this%3B%0A%0A%20%20var%20listeners%20%3D%20this%2E%5Fevents%5Bevt%5D%0A%20%20%20%20%2C%20events%20%3D%20%5B%5D%3B%0A%0A%20%20if%20%28fn%29%20%7B%0A%20%20%20%20if%20%28listeners%2Efn%29%20%7B%0A%20%20%20%20%20%20if%20%28%0A%20%20%20%20%20%20%20%20%20%20%20listeners%2Efn%20%21%3D%3D%20fn%0A%20%20%20%20%20%20%20%20%7C%7C%20%28once%20%26%26%20%21listeners%2Eonce%29%0A%20%20%20%20%20%20%20%20%7C%7C%20%28context%20%26%26%20listeners%2Econtext%20%21%3D%3D%20context%29%0A%20%20%20%20%20%20%29%20%7B%0A%20%20%20%20%20%20%20%20events%2Epush%28listeners%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20length%20%3D%20listeners%2Elength%3B%20i%20%3C%20length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20listeners%5Bi%5D%2Efn%20%21%3D%3D%20fn%0A%20%20%20%20%20%20%20%20%20%20%7C%7C%20%28once%20%26%26%20%21listeners%5Bi%5D%2Eonce%29%0A%20%20%20%20%20%20%20%20%20%20%7C%7C%20%28context%20%26%26%20listeners%5Bi%5D%2Econtext%20%21%3D%3D%20context%29%0A%20%20%20%20%20%20%20%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20events%2Epush%28listeners%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%0A%20%20%2F%2F%20Reset%20the%20array%2C%20or%20remove%20it%20completely%20if%20we%20have%20no%20more%20listeners%2E%0A%20%20%2F%2F%0A%20%20if%20%28events%2Elength%29%20%7B%0A%20%20%20%20this%2E%5Fevents%5Bevt%5D%20%3D%20events%2Elength%20%3D%3D%3D%201%20%3F%20events%5B0%5D%20%3A%20events%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20delete%20this%2E%5Fevents%5Bevt%5D%3B%0A%20%20%7D%0A%0A%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Remove%20all%20listeners%20or%20only%20the%20listeners%20for%20the%20specified%20event%2E%0A%20%2A%0A%20%2A%20%40param%20%7BString%7D%20event%20The%20event%20want%20to%20remove%20all%20listeners%20for%2E%0A%20%2A%20%40api%20public%0A%20%2A%2F%0AEventEmitter%2Eprototype%2EremoveAllListeners%20%3D%20function%20removeAllListeners%28event%29%20%7B%0A%20%20if%20%28%21this%2E%5Fevents%29%20return%20this%3B%0A%0A%20%20if%20%28event%29%20delete%20this%2E%5Fevents%5Bprefix%20%3F%20prefix%20%2B%20event%20%3A%20event%5D%3B%0A%20%20else%20this%2E%5Fevents%20%3D%20prefix%20%3F%20%7B%7D%20%3A%20Object%2Ecreate%28null%29%3B%0A%0A%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2F%0A%2F%2F%20Alias%20methods%20names%20because%20people%20roll%20like%20that%2E%0A%2F%2F%0AEventEmitter%2Eprototype%2Eoff%20%3D%20EventEmitter%2Eprototype%2EremoveListener%3B%0AEventEmitter%2Eprototype%2EaddListener%20%3D%20EventEmitter%2Eprototype%2Eon%3B%0A%0A%2F%2F%0A%2F%2F%20This%20function%20doesn%27t%20apply%20anymore%2E%0A%2F%2F%0AEventEmitter%2Eprototype%2EsetMaxListeners%20%3D%20function%20setMaxListeners%28%29%20%7B%0A%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2F%0A%2F%2F%20Expose%20the%20prefix%2E%0A%2F%2F%0AEventEmitter%2Eprefixed%20%3D%20prefix%3B%0A%0A%2F%2F%0A%2F%2F%20Expose%20the%20module%2E%0A%2F%2F%0Amodule%2Eexports%20%3D%20EventEmitter%3B%0A%0A%7D%2C%7B%7D%5D%2C130%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20async%20%20%20%20%20%20%20%3D%20require%28%27async%27%29%2C%0A%20%20%20%20urlParser%20%20%20%3D%20require%28%27url%27%29%2C%0A%20%20%20%20Resource%20%20%20%20%3D%20require%28%27%2E%2FResource%27%29%2C%0A%20%20%20%20EventEmitter%20%3D%20require%28%27eventemitter3%27%29%3B%0A%0A%2F%2A%2A%0A%20%2A%20Manages%20the%20state%20and%20loading%20of%20multiple%20resources%20to%20load%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40param%20%5BbaseUrl%3D%27%27%5D%20%7Bstring%7D%20The%20base%20url%20for%20all%20resources%20loaded%20by%20this%20loader%2E%0A%20%2A%20%40param%20%5Bconcurrency%3D10%5D%20%7Bnumber%7D%20The%20number%20of%20resources%20to%20load%20concurrently%2E%0A%20%2A%2F%0Afunction%20Loader%28baseUrl%2C%20concurrency%29%20%7B%0A%20%20%20%20EventEmitter%2Ecall%28this%29%3B%0A%0A%20%20%20%20concurrency%20%3D%20concurrency%20%7C%7C%2010%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20base%20url%20for%20all%20resources%20loaded%20by%20this%20loader%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EbaseUrl%20%3D%20baseUrl%20%7C%7C%20%27%27%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20progress%20percent%20of%20the%20loader%20going%20through%20the%20queue%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eprogress%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Loading%20state%20of%20the%20loader%2C%20true%20if%20it%20is%20currently%20loading%20resources%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eloading%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20percentage%20of%20total%20progress%20that%20a%20single%20resource%20represents%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FprogressChunk%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20middleware%20to%20run%20before%20loading%20each%20resource%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bfunction%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FbeforeMiddleware%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20middleware%20to%20run%20after%20loading%20each%20resource%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bfunction%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FafterMiddleware%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20%60%5FloadResource%60%20function%20bound%20with%20this%20object%20context%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40member%20%7Bfunction%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FboundLoadResource%20%3D%20this%2E%5FloadResource%2Ebind%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20%60%5FonLoad%60%20function%20bound%20with%20this%20object%20context%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40member%20%7Bfunction%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FboundOnLoad%20%3D%20this%2E%5FonLoad%2Ebind%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20resource%20buffer%20that%20fills%20until%20%60load%60%20is%20called%20to%20start%20loading%20resources%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40member%20%7BResource%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fbuffer%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Used%20to%20track%20load%20completion%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40member%20%7Bnumber%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FnumToLoad%20%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20resources%20waiting%20to%20be%20loaded%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%20%40member%20%7BResource%5B%5D%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fqueue%20%3D%20async%2Equeue%28this%2E%5FboundLoadResource%2C%20concurrency%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20All%20the%20resources%20for%20this%20loader%20keyed%20by%20name%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%3Cstring%2C%20Resource%3E%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eresources%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Emitted%20once%20per%20loaded%20or%20errored%20resource%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40event%20progress%0A%20%20%20%20%20%2A%20%40memberof%20Loader%23%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Emitted%20once%20per%20errored%20resource%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40event%20error%0A%20%20%20%20%20%2A%20%40memberof%20Loader%23%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Emitted%20once%20per%20loaded%20resource%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40event%20load%0A%20%20%20%20%20%2A%20%40memberof%20Loader%23%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Emitted%20when%20the%20loader%20begins%20to%20process%20the%20queue%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40event%20start%0A%20%20%20%20%20%2A%20%40memberof%20Loader%23%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Emitted%20when%20the%20queued%20resources%20all%20load%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40event%20complete%0A%20%20%20%20%20%2A%20%40memberof%20Loader%23%0A%20%20%20%20%20%2A%2F%0A%7D%0A%0ALoader%2Eprototype%20%3D%20Object%2Ecreate%28EventEmitter%2Eprototype%29%3B%0ALoader%2Eprototype%2Econstructor%20%3D%20Loader%3B%0Amodule%2Eexports%20%3D%20Loader%3B%0A%0A%2F%2A%2A%0A%20%2A%20Adds%20a%20resource%20%28or%20multiple%20resources%29%20to%20the%20loader%20queue%2E%0A%20%2A%0A%20%2A%20This%20function%20can%20take%20a%20wide%20variety%20of%20different%20parameters%2E%20The%20only%20thing%20that%20is%20always%0A%20%2A%20required%20the%20url%20to%20load%2E%20All%20the%20following%20will%20work%3A%0A%20%2A%0A%20%2A%20%60%60%60js%0A%20%2A%20loader%0A%20%2A%20%20%20%20%20%2F%2F%20normal%20param%20syntax%0A%20%2A%20%20%20%20%20%2Eadd%28%27key%27%2C%20%27http%3A%2F%2F%2E%2E%2E%27%2C%20function%20%28%29%20%7B%7D%29%0A%20%2A%20%20%20%20%20%2Eadd%28%27http%3A%2F%2F%2E%2E%2E%27%2C%20function%20%28%29%20%7B%7D%29%0A%20%2A%20%20%20%20%20%2Eadd%28%27http%3A%2F%2F%2E%2E%2E%27%29%0A%20%2A%0A%20%2A%20%20%20%20%20%2F%2F%20object%20syntax%0A%20%2A%20%20%20%20%20%2Eadd%28%7B%0A%20%2A%20%20%20%20%20%20%20%20%20name%3A%20%27key2%27%2C%0A%20%2A%20%20%20%20%20%20%20%20%20url%3A%20%27http%3A%2F%2F%2E%2E%2E%27%0A%20%2A%20%20%20%20%20%7D%2C%20function%20%28%29%20%7B%7D%29%0A%20%2A%20%20%20%20%20%2Eadd%28%7B%0A%20%2A%20%20%20%20%20%20%20%20%20url%3A%20%27http%3A%2F%2F%2E%2E%2E%27%0A%20%2A%20%20%20%20%20%7D%2C%20function%20%28%29%20%7B%7D%29%0A%20%2A%20%20%20%20%20%2Eadd%28%7B%0A%20%2A%20%20%20%20%20%20%20%20%20name%3A%20%27key3%27%2C%0A%20%2A%20%20%20%20%20%20%20%20%20url%3A%20%27http%3A%2F%2F%2E%2E%2E%27%0A%20%2A%20%20%20%20%20%20%20%20%20onComplete%3A%20function%20%28%29%20%7B%7D%0A%20%2A%20%20%20%20%20%7D%29%0A%20%2A%20%20%20%20%20%2Eadd%28%7B%0A%20%2A%20%20%20%20%20%20%20%20%20url%3A%20%27https%3A%2F%2F%2E%2E%2E%27%2C%0A%20%2A%20%20%20%20%20%20%20%20%20onComplete%3A%20function%20%28%29%20%7B%7D%2C%0A%20%2A%20%20%20%20%20%20%20%20%20crossOrigin%3A%20true%0A%20%2A%20%20%20%20%20%7D%29%0A%20%2A%0A%20%2A%20%20%20%20%20%2F%2F%20you%20can%20also%20pass%20an%20array%20of%20objects%20or%20urls%20or%20both%0A%20%2A%20%20%20%20%20%2Eadd%28%5B%0A%20%2A%20%20%20%20%20%20%20%20%20%7B%20name%3A%20%27key4%27%2C%20url%3A%20%27http%3A%2F%2F%2E%2E%2E%27%2C%20onComplete%3A%20function%20%28%29%20%7B%7D%20%7D%2C%0A%20%2A%20%20%20%20%20%20%20%20%20%7B%20url%3A%20%27http%3A%2F%2F%2E%2E%2E%27%2C%20onComplete%3A%20function%20%28%29%20%7B%7D%20%7D%2C%0A%20%2A%20%20%20%20%20%20%20%20%20%27http%3A%2F%2F%2E%2E%2E%27%0A%20%2A%20%20%20%20%20%5D%29%3B%0A%20%2A%20%60%60%60%0A%20%2A%0A%20%2A%20%40alias%20enqueue%0A%20%2A%20%40param%20%5Bname%5D%20%7Bstring%7D%20The%20name%20of%20the%20resource%20to%20load%2C%20if%20not%20passed%20the%20url%20is%20used%2E%0A%20%2A%20%40param%20url%20%7Bstring%7D%20The%20url%20for%20this%20resource%2C%20relative%20to%20the%20baseUrl%20of%20this%20loader%2E%0A%20%2A%20%40param%20%5Boptions%5D%20%7Bobject%7D%20The%20options%20for%20the%20load%2E%0A%20%2A%20%40param%20%5Boptions%2EcrossOrigin%5D%20%7Bboolean%7D%20Is%20this%20request%20cross%2Dorigin%3F%20Default%20is%20to%20determine%20automatically%2E%0A%20%2A%20%40param%20%5Boptions%2EloadType%3DResource%2ELOAD%5FTYPE%2EXHR%5D%20%7BResource%2EXHR%5FLOAD%5FTYPE%7D%20How%20should%20this%20resource%20be%20loaded%3F%0A%20%2A%20%40param%20%5Boptions%2ExhrType%3DResource%2EXHR%5FRESPONSE%5FTYPE%2EDEFAULT%5D%20%7BResource%2EXHR%5FRESPONSE%5FTYPE%7D%20How%20should%20the%20data%20being%0A%20%2A%20%20%20%20%20%20loaded%20be%20interpreted%20when%20using%20XHR%3F%0A%20%2A%20%40param%20%5Bcallback%5D%20%7Bfunction%7D%20Function%20to%20call%20when%20this%20specific%20resource%20completes%20loading%2E%0A%20%2A%20%40return%20%7BLoader%7D%0A%20%2A%2F%0ALoader%2Eprototype%2Eadd%20%3D%20Loader%2Eprototype%2Eenqueue%20%3D%20function%20%28name%2C%20url%2C%20options%2C%20cb%29%20%7B%0A%20%20%20%20%2F%2F%20special%20case%20of%20an%20array%20of%20objects%20or%20urls%0A%20%20%20%20if%20%28Array%2EisArray%28name%29%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20name%2Elength%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eadd%28name%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20if%20an%20object%20is%20passed%20instead%20of%20params%0A%20%20%20%20if%20%28typeof%20name%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20cb%20%3D%20url%20%7C%7C%20name%2Ecallback%20%7C%7C%20name%2EonComplete%3B%0A%20%20%20%20%20%20%20%20options%20%3D%20name%3B%0A%20%20%20%20%20%20%20%20url%20%3D%20name%2Eurl%3B%0A%20%20%20%20%20%20%20%20name%20%3D%20name%2Ename%20%7C%7C%20name%2Ekey%20%7C%7C%20name%2Eurl%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20case%20where%20no%20name%20is%20passed%20shift%20all%20args%20over%20by%20one%2E%0A%20%20%20%20if%20%28typeof%20url%20%21%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20cb%20%3D%20options%3B%0A%20%20%20%20%20%20%20%20options%20%3D%20url%3B%0A%20%20%20%20%20%20%20%20url%20%3D%20name%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20now%20that%20we%20shifted%20make%20sure%20we%20have%20a%20proper%20url%2E%0A%20%20%20%20if%20%28typeof%20url%20%21%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27No%20url%20passed%20to%20add%20resource%20to%20loader%2E%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20options%20are%20optional%20so%20people%20might%20pass%20a%20function%20and%20no%20options%0A%20%20%20%20if%20%28typeof%20options%20%3D%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20cb%20%3D%20options%3B%0A%20%20%20%20%20%20%20%20options%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20check%20if%20resource%20already%20exists%2E%0A%20%20%20%20if%20%28this%2Eresources%5Bname%5D%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27Resource%20with%20name%20%22%27%20%2B%20name%20%2B%20%27%22%20already%20exists%2E%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20add%20base%20url%20if%20this%20isn%27t%20an%20absolute%20url%0A%20%20%20%20url%20%3D%20this%2E%5FhandleBaseUrl%28url%29%3B%0A%0A%20%20%20%20%2F%2F%20create%20the%20store%20the%20resource%0A%20%20%20%20this%2Eresources%5Bname%5D%20%3D%20new%20Resource%28name%2C%20url%2C%20options%29%3B%0A%0A%20%20%20%20if%20%28typeof%20cb%20%3D%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Eresources%5Bname%5D%2Eonce%28%27afterMiddleware%27%2C%20cb%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2E%5FnumToLoad%2B%2B%3B%0A%0A%20%20%20%20%2F%2F%20if%20already%20loading%20add%20it%20to%20the%20worker%20queue%0A%20%20%20%20if%20%28this%2E%5Fqueue%2Estarted%29%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5Fqueue%2Epush%28this%2Eresources%5Bname%5D%29%3B%0A%20%20%20%20%20%20%20%20this%2E%5FprogressChunk%20%3D%20%28100%20%2D%20this%2Eprogress%29%20%2F%20%28this%2E%5Fqueue%2Elength%28%29%20%2B%20this%2E%5Fqueue%2Erunning%28%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20otherwise%20buffer%20it%20to%20be%20added%20to%20the%20queue%20later%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5Fbuffer%2Epush%28this%2Eresources%5Bname%5D%29%3B%0A%20%20%20%20%20%20%20%20this%2E%5FprogressChunk%20%3D%20100%20%2F%20this%2E%5Fbuffer%2Elength%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0ALoader%2Eprototype%2E%5FhandleBaseUrl%20%3D%20function%20%28url%29%20%7B%0A%20%20%20%20var%20parsedUrl%20%3D%20urlParser%2Eparse%28url%29%3B%0A%0A%20%20%20%20%2F%2F%20absolute%20url%2C%20just%20use%20it%20as%20is%2E%0A%20%20%20%20if%20%28parsedUrl%2Eprotocol%20%7C%7C%20parsedUrl%2Epathname%2EindexOf%28%27%2F%2F%27%29%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20return%20url%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20if%20baseUrl%20doesn%27t%20end%20in%20slash%20and%20url%20doesn%27t%20start%20with%20slash%2C%20then%20add%20a%20slash%20inbetween%0A%20%20%20%20if%20%28%0A%20%20%20%20%20%20%20%20this%2EbaseUrl%2Elength%20%26%26%0A%20%20%20%20%20%20%20%20this%2EbaseUrl%2ElastIndexOf%28%27%2F%27%29%20%21%3D%3D%20this%2EbaseUrl%2Elength%20%2D%201%20%26%26%0A%20%20%20%20%20%20%20%20url%2EcharAt%280%29%20%21%3D%3D%20%27%2F%27%0A%20%20%20%20%29%20%7B%0A%20%20%20%20%20%20%20%20return%20this%2EbaseUrl%20%2B%20%27%2F%27%20%2B%20url%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20this%2EbaseUrl%20%2B%20url%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20up%20a%20middleware%20function%20that%20will%20run%20%2Abefore%2A%20the%0A%20%2A%20resource%20is%20loaded%2E%0A%20%2A%0A%20%2A%20%40alias%20pre%0A%20%2A%20%40param%20middleware%20%7Bfunction%7D%20The%20middleware%20function%20to%20register%2E%0A%20%2A%20%40return%20%7BLoader%7D%0A%20%2A%2F%0ALoader%2Eprototype%2Ebefore%20%3D%20Loader%2Eprototype%2Epre%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20this%2E%5FbeforeMiddleware%2Epush%28fn%29%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20up%20a%20middleware%20function%20that%20will%20run%20%2Aafter%2A%20the%0A%20%2A%20resource%20is%20loaded%2E%0A%20%2A%0A%20%2A%20%40alias%20use%0A%20%2A%20%40param%20middleware%20%7Bfunction%7D%20The%20middleware%20function%20to%20register%2E%0A%20%2A%20%40return%20%7BLoader%7D%0A%20%2A%2F%0ALoader%2Eprototype%2Eafter%20%3D%20Loader%2Eprototype%2Euse%20%3D%20function%20%28fn%29%20%7B%0A%20%20%20%20this%2E%5FafterMiddleware%2Epush%28fn%29%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Resets%20the%20queue%20of%20the%20loader%20to%20prepare%20for%20a%20new%20load%2E%0A%20%2A%0A%20%2A%20%40return%20%7BLoader%7D%0A%20%2A%2F%0ALoader%2Eprototype%2Ereset%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%2F%2F%20this%2EbaseUrl%20%3D%20baseUrl%20%7C%7C%20%27%27%3B%0A%0A%20%20%20%20this%2Eprogress%20%3D%200%3B%0A%0A%20%20%20%20this%2Eloading%20%3D%20false%3B%0A%0A%20%20%20%20this%2E%5FprogressChunk%20%3D%200%3B%0A%0A%20%20%20%20%2F%2F%20this%2E%5FbeforeMiddleware%2Elength%20%3D%200%3B%0A%20%20%20%20%2F%2F%20this%2E%5FafterMiddleware%2Elength%20%3D%200%3B%0A%0A%20%20%20%20this%2E%5Fbuffer%2Elength%20%3D%200%3B%0A%0A%20%20%20%20this%2E%5FnumToLoad%20%3D%200%3B%0A%0A%20%20%20%20this%2E%5Fqueue%2Ekill%28%29%3B%0A%20%20%20%20this%2E%5Fqueue%2Estarted%20%3D%20false%3B%0A%0A%20%20%20%20this%2Eresources%20%3D%20%7B%7D%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Starts%20loading%20the%20queued%20resources%2E%0A%20%2A%0A%20%2A%20%40fires%20start%0A%20%2A%20%40param%20%5Bcallback%5D%20%7Bfunction%7D%20Optional%20callback%20that%20will%20be%20bound%20to%20the%20%60complete%60%20event%2E%0A%20%2A%20%40return%20%7BLoader%7D%0A%20%2A%2F%0ALoader%2Eprototype%2Eload%20%3D%20function%20%28cb%29%20%7B%0A%20%20%20%20%2F%2F%20register%20complete%20callback%20if%20they%20pass%20one%0A%20%20%20%20if%20%28typeof%20cb%20%3D%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Eonce%28%27complete%27%2C%20cb%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20if%20the%20queue%20has%20already%20started%20we%20are%20done%20here%0A%20%20%20%20if%20%28this%2E%5Fqueue%2Estarted%29%20%7B%0A%20%20%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20notify%20of%20start%0A%20%20%20%20this%2Eemit%28%27start%27%2C%20this%29%3B%0A%0A%20%20%20%20%2F%2F%20start%20the%20internal%20queue%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2E%5Fbuffer%2Elength%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5Fqueue%2Epush%28this%2E%5Fbuffer%5Bi%5D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20empty%20the%20buffer%0A%20%20%20%20this%2E%5Fbuffer%2Elength%20%3D%200%3B%0A%0A%20%20%20%20return%20this%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Loads%20a%20single%20resource%2E%0A%20%2A%0A%20%2A%20%40fires%20progress%0A%20%2A%20%40private%0A%20%2A%2F%0ALoader%2Eprototype%2E%5FloadResource%20%3D%20function%20%28resource%2C%20dequeue%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20resource%2E%5Fdequeue%20%3D%20dequeue%3B%0A%0A%20%20%20%20this%2E%5FrunMiddleware%28resource%2C%20this%2E%5FbeforeMiddleware%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20resource%2Eon%28%27progress%27%2C%20self%2Eemit%2Ebind%28self%2C%20%27progress%27%29%29%3B%0A%0A%20%20%20%20%20%20%20%20resource%2Eload%28self%2E%5FboundOnLoad%29%3B%0A%20%20%20%20%7D%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20once%20each%20resource%20has%20loaded%2E%0A%20%2A%0A%20%2A%20%40fires%20complete%0A%20%2A%20%40private%0A%20%2A%2F%0ALoader%2Eprototype%2E%5FonComplete%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this%2Eemit%28%27complete%27%2C%20this%2C%20this%2Eresources%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20each%20time%20a%20resources%20is%20loaded%2E%0A%20%2A%0A%20%2A%20%40fires%20progress%0A%20%2A%20%40fires%20error%0A%20%2A%20%40fires%20load%0A%20%2A%20%40private%0A%20%2A%2F%0ALoader%2Eprototype%2E%5FonLoad%20%3D%20function%20%28resource%29%20%7B%0A%20%20%20%20this%2Eprogress%20%2B%3D%20this%2E%5FprogressChunk%3B%0A%0A%20%20%20%20this%2Eemit%28%27progress%27%2C%20this%2C%20resource%29%3B%0A%0A%20%20%20%20%2F%2F%20run%20middleware%2C%20this%20%2Amust%2A%20happen%20before%20dequeue%20so%20sub%2Dassets%20get%20added%20properly%0A%20%20%20%20this%2E%5FrunMiddleware%28resource%2C%20this%2E%5FafterMiddleware%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20resource%2Eemit%28%27afterMiddleware%27%2C%20resource%29%3B%0A%0A%20%20%20%20%20%20%20%20this%2E%5FnumToLoad%2D%2D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20do%20completion%20check%0A%20%20%20%20%20%20%20%20if%20%28this%2E%5FnumToLoad%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eprogress%20%3D%20100%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FonComplete%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28resource%2Eerror%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eemit%28%27error%27%2C%20resource%2Eerror%2C%20this%2C%20resource%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Eemit%28%27load%27%2C%20this%2C%20resource%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20%0A%0A%0A%20%20%20%20%2F%2F%20remove%20this%20resource%20from%20the%20async%20queue%0A%20%20%20%20resource%2E%5Fdequeue%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Run%20middleware%20functions%20on%20a%20resource%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0ALoader%2Eprototype%2E%5FrunMiddleware%20%3D%20function%20%28resource%2C%20fns%2C%20cb%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20async%2EeachSeries%28fns%2C%20function%20%28fn%2C%20next%29%20%7B%0A%20%20%20%20%20%20%20%20fn%2Ecall%28self%2C%20resource%2C%20next%29%3B%0A%20%20%20%20%7D%2C%20cb%2Ebind%28this%2C%20resource%29%29%3B%0A%7D%3B%0A%0ALoader%2ELOAD%5FTYPE%20%3D%20Resource%2ELOAD%5FTYPE%3B%0ALoader%2EXHR%5FREADY%5FSTATE%20%3D%20Resource%2EXHR%5FREADY%5FSTATE%3B%0ALoader%2EXHR%5FRESPONSE%5FTYPE%20%3D%20Resource%2EXHR%5FRESPONSE%5FTYPE%3B%0A%0A%7D%2C%7B%22%2E%2FResource%22%3A131%2C%22async%22%3A128%2C%22eventemitter3%22%3A129%2C%22url%22%3A8%7D%5D%2C131%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20EventEmitter%20%3D%20require%28%27eventemitter3%27%29%2C%0A%20%20%20%20%5Furl%20%3D%20require%28%27url%27%29%2C%0A%20%20%20%20%2F%2F%20tests%20is%20CORS%20is%20supported%20in%20XHR%2C%20if%20not%20we%20need%20to%20use%20XDR%0A%20%20%20%20useXdr%20%3D%20%21%21%28window%2EXDomainRequest%20%26%26%20%21%28%27withCredentials%27%20in%20%28new%20XMLHttpRequest%28%29%29%29%29%2C%0A%20%20%20%20tempAnchor%20%3D%20null%3B%0A%0A%2F%2A%2A%0A%20%2A%20Manages%20the%20state%20and%20loading%20of%20a%20single%20resource%20represented%20by%0A%20%2A%20a%20single%20URL%2E%0A%20%2A%0A%20%2A%20%40class%0A%20%2A%20%40param%20name%20%7Bstring%7D%20The%20name%20of%20the%20resource%20to%20load%2E%0A%20%2A%20%40param%20url%20%7Bstring%7Cstring%5B%5D%7D%20The%20url%20for%20this%20resource%2C%20for%20audio%2Fvideo%20loads%20you%20can%20pass%20an%20array%20of%20sources%2E%0A%20%2A%20%40param%20%5Boptions%5D%20%7Bobject%7D%20The%20options%20for%20the%20load%2E%0A%20%2A%20%40param%20%5Boptions%2EcrossOrigin%5D%20%7Bstring%7Cboolean%7D%20Is%20this%20request%20cross%2Dorigin%3F%20Default%20is%20to%20determine%20automatically%2E%0A%20%2A%20%40param%20%5Boptions%2EloadType%3DResource%2ELOAD%5FTYPE%2EXHR%5D%20%7BResource%2ELOAD%5FTYPE%7D%20How%20should%20this%20resource%20be%20loaded%3F%0A%20%2A%20%40param%20%5Boptions%2ExhrType%3DResource%2EXHR%5FRESPONSE%5FTYPE%2EDEFAULT%5D%20%7BResource%2EXHR%5FRESPONSE%5FTYPE%7D%20How%20should%20the%20data%20being%0A%20%2A%20%20%20%20%20%20loaded%20be%20interpreted%20when%20using%20XHR%3F%0A%20%2A%20%40param%20%5Boptions%2Emetadata%5D%20%7Bobject%7D%20Extra%20info%20for%20middleware%2E%0A%20%2A%2F%0Afunction%20Resource%28name%2C%20url%2C%20options%29%20%7B%0A%20%20%20%20EventEmitter%2Ecall%28this%29%3B%0A%0A%20%20%20%20options%20%3D%20options%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20if%20%28typeof%20name%20%21%3D%3D%20%27string%27%20%7C%7C%20typeof%20url%20%21%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%27Both%20name%20and%20url%20are%20required%20for%20constructing%20a%20resource%2E%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20name%20of%20this%20resource%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Ename%20%3D%20name%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20url%20used%20to%20load%20this%20resource%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eurl%20%3D%20url%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Stores%20whether%20or%20not%20this%20url%20is%20a%20data%20url%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EisDataUrl%20%3D%20this%2Eurl%2EindexOf%28%27data%3A%27%29%20%3D%3D%3D%200%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20data%20that%20was%20loaded%20by%20the%20resource%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bany%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Edata%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Is%20this%20request%20cross%2Dorigin%3F%20If%20unset%2C%20determined%20automatically%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EcrossOrigin%20%3D%20options%2EcrossOrigin%20%3D%3D%3D%20true%20%3F%20%27anonymous%27%20%3A%20options%2EcrossOrigin%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20method%20of%20loading%20to%20use%20for%20this%20resource%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BResource%2ELOAD%5FTYPE%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EloadType%20%3D%20options%2EloadType%20%7C%7C%20this%2E%5FdetermineLoadType%28%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20type%20used%20to%20load%20the%20resource%20via%20XHR%2E%20If%20unset%2C%20determined%20automatically%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bstring%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2ExhrType%20%3D%20options%2ExhrType%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Extra%20info%20for%20middleware%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bobject%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Emetadata%20%3D%20options%2Emetadata%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20error%20that%20occurred%20while%20loading%20%28if%20any%29%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BError%7D%0A%20%20%20%20%20%2A%20%40readonly%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Eerror%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20XHR%20object%20that%20was%20used%20to%20load%20this%20resource%2E%20This%20is%20only%20set%0A%20%20%20%20%20%2A%20when%20%60loadType%60%20is%20%60Resource%2ELOAD%5FTYPE%2EXHR%60%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7BXMLHttpRequest%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2Exhr%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Describes%20if%20this%20resource%20was%20loaded%20as%20json%2E%20Only%20valid%20after%20the%20resource%0A%20%20%20%20%20%2A%20has%20completely%20loaded%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EisJson%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Describes%20if%20this%20resource%20was%20loaded%20as%20xml%2E%20Only%20valid%20after%20the%20resource%0A%20%20%20%20%20%2A%20has%20completely%20loaded%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EisXml%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Describes%20if%20this%20resource%20was%20loaded%20as%20an%20image%20tag%2E%20Only%20valid%20after%20the%20resource%0A%20%20%20%20%20%2A%20has%20completely%20loaded%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EisImage%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Describes%20if%20this%20resource%20was%20loaded%20as%20an%20audio%20tag%2E%20Only%20valid%20after%20the%20resource%0A%20%20%20%20%20%2A%20has%20completely%20loaded%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EisAudio%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Describes%20if%20this%20resource%20was%20loaded%20as%20a%20video%20tag%2E%20Only%20valid%20after%20the%20resource%0A%20%20%20%20%20%2A%20has%20completely%20loaded%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bboolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2EisVideo%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20%60dequeue%60%20method%20that%20will%20be%20used%20a%20storage%20place%20for%20the%20async%20queue%20dequeue%20method%0A%20%20%20%20%20%2A%20used%20privately%20by%20the%20loader%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bfunction%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5Fdequeue%20%3D%20null%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20%60complete%60%20function%20bound%20to%20this%20resource%27s%20context%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bfunction%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FboundComplete%20%3D%20this%2Ecomplete%2Ebind%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20%60%5FonError%60%20function%20bound%20to%20this%20resource%27s%20context%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bfunction%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FboundOnError%20%3D%20this%2E%5FonError%2Ebind%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20The%20%60%5FonProgress%60%20function%20bound%20to%20this%20resource%27s%20context%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40member%20%7Bfunction%7D%0A%20%20%20%20%20%2A%20%40private%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20this%2E%5FboundOnProgress%20%3D%20this%2E%5FonProgress%2Ebind%28this%29%3B%0A%0A%20%20%20%20%2F%2F%20xhr%20callbacks%0A%20%20%20%20this%2E%5FboundXhrOnError%20%3D%20this%2E%5FxhrOnError%2Ebind%28this%29%3B%0A%20%20%20%20this%2E%5FboundXhrOnAbort%20%3D%20this%2E%5FxhrOnAbort%2Ebind%28this%29%3B%0A%20%20%20%20this%2E%5FboundXhrOnLoad%20%3D%20this%2E%5FxhrOnLoad%2Ebind%28this%29%3B%0A%20%20%20%20this%2E%5FboundXdrOnTimeout%20%3D%20this%2E%5FxdrOnTimeout%2Ebind%28this%29%3B%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Emitted%20when%20the%20resource%20beings%20to%20load%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40event%20start%0A%20%20%20%20%20%2A%20%40memberof%20Resource%23%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Emitted%20each%20time%20progress%20of%20this%20resource%20load%20updates%2E%0A%20%20%20%20%20%2A%20Not%20all%20resources%20types%20and%20loader%20systems%20can%20support%20this%20event%0A%20%20%20%20%20%2A%20so%20sometimes%20it%20may%20not%20be%20available%2E%20If%20the%20resource%0A%20%20%20%20%20%2A%20is%20being%20loaded%20on%20a%20modern%20browser%2C%20using%20XHR%2C%20and%20the%20remote%20server%0A%20%20%20%20%20%2A%20properly%20sets%20Content%2DLength%20headers%2C%20then%20this%20will%20be%20available%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40event%20progress%0A%20%20%20%20%20%2A%20%40memberof%20Resource%23%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Emitted%20once%20this%20resource%20has%20loaded%2C%20if%20there%20was%20an%20error%20it%20will%0A%20%20%20%20%20%2A%20be%20in%20the%20%60error%60%20property%2E%0A%20%20%20%20%20%2A%0A%20%20%20%20%20%2A%20%40event%20complete%0A%20%20%20%20%20%2A%20%40memberof%20Resource%23%0A%20%20%20%20%20%2A%2F%0A%7D%0A%0AResource%2Eprototype%20%3D%20Object%2Ecreate%28EventEmitter%2Eprototype%29%3B%0AResource%2Eprototype%2Econstructor%20%3D%20Resource%3B%0Amodule%2Eexports%20%3D%20Resource%3B%0A%0A%2F%2A%2A%0A%20%2A%20Marks%20the%20resource%20as%20complete%2E%0A%20%2A%0A%20%2A%20%40fires%20complete%0A%20%2A%2F%0AResource%2Eprototype%2Ecomplete%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%2F%2F%20TODO%3A%20Clean%20this%20up%20in%20a%20wrapper%20or%20something%2E%2E%2Egross%2E%2E%2E%2E%0A%20%20%20%20if%20%28this%2Edata%20%26%26%20this%2Edata%2EremoveEventListener%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Edata%2EremoveEventListener%28%27error%27%2C%20this%2E%5FboundOnError%29%3B%0A%20%20%20%20%20%20%20%20this%2Edata%2EremoveEventListener%28%27load%27%2C%20this%2E%5FboundComplete%29%3B%0A%20%20%20%20%20%20%20%20this%2Edata%2EremoveEventListener%28%27progress%27%2C%20this%2E%5FboundOnProgress%29%3B%0A%20%20%20%20%20%20%20%20this%2Edata%2EremoveEventListener%28%27canplaythrough%27%2C%20this%2E%5FboundComplete%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28this%2Exhr%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2Exhr%2EremoveEventListener%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Exhr%2EremoveEventListener%28%27error%27%2C%20this%2E%5FboundXhrOnError%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Exhr%2EremoveEventListener%28%27abort%27%2C%20this%2E%5FboundXhrOnAbort%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Exhr%2EremoveEventListener%28%27progress%27%2C%20this%2E%5FboundOnProgress%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Exhr%2EremoveEventListener%28%27load%27%2C%20this%2E%5FboundXhrOnLoad%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Exhr%2Eonerror%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Exhr%2Eontimeout%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Exhr%2Eonprogress%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Exhr%2Eonload%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Eemit%28%27complete%27%2C%20this%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Kicks%20off%20loading%20of%20this%20resource%2E%0A%20%2A%0A%20%2A%20%40fires%20start%0A%20%2A%20%40param%20%5Bcallback%5D%20%7Bfunction%7D%20Optional%20callback%20to%20call%20once%20the%20resource%20is%20loaded%2E%0A%20%2A%2F%0AResource%2Eprototype%2Eload%20%3D%20function%20%28cb%29%20%7B%0A%20%20%20%20this%2Eemit%28%27start%27%2C%20this%29%3B%0A%0A%20%20%20%20%2F%2F%20if%20a%20callback%20is%20set%2C%20listen%20for%20complete%20event%0A%20%20%20%20if%20%28cb%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Eonce%28%27complete%27%2C%20cb%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20if%20unset%2C%20determine%20the%20value%0A%20%20%20%20if%20%28this%2EcrossOrigin%20%3D%3D%3D%20false%20%7C%7C%20typeof%20this%2EcrossOrigin%20%21%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20this%2EcrossOrigin%20%3D%20this%2E%5FdetermineCrossOrigin%28this%2Eurl%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20switch%28this%2EloadType%29%20%7B%0A%20%20%20%20%20%20%20%20case%20Resource%2ELOAD%5FTYPE%2EIMAGE%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FloadImage%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%20Resource%2ELOAD%5FTYPE%2EAUDIO%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FloadElement%28%27audio%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%20Resource%2ELOAD%5FTYPE%2EVIDEO%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FloadElement%28%27video%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%20Resource%2ELOAD%5FTYPE%2EXHR%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2A%20falls%20through%20%2A%2F%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28useXdr%20%26%26%20this%2EcrossOrigin%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FloadXdr%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FloadXhr%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Loads%20this%20resources%20using%20an%20Image%20object%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AResource%2Eprototype%2E%5FloadImage%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this%2Edata%20%3D%20new%20Image%28%29%3B%0A%0A%20%20%20%20if%20%28this%2EcrossOrigin%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Edata%2EcrossOrigin%20%3D%20this%2EcrossOrigin%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Edata%2Esrc%20%3D%20this%2Eurl%3B%0A%0A%20%20%20%20this%2EisImage%20%3D%20true%3B%0A%0A%20%20%20%20this%2Edata%2EaddEventListener%28%27error%27%2C%20this%2E%5FboundOnError%2C%20false%29%3B%0A%20%20%20%20this%2Edata%2EaddEventListener%28%27load%27%2C%20this%2E%5FboundComplete%2C%20false%29%3B%0A%20%20%20%20this%2Edata%2EaddEventListener%28%27progress%27%2C%20this%2E%5FboundOnProgress%2C%20false%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Loads%20this%20resources%20using%20an%20HTMLAudioElement%20or%20HTMLVideoElement%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AResource%2Eprototype%2E%5FloadElement%20%3D%20function%20%28type%29%20%7B%0A%20%20%20%20if%20%28type%20%3D%3D%3D%20%27audio%27%20%26%26%20typeof%20Audio%20%21%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Edata%20%3D%20new%20Audio%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20this%2Edata%20%3D%20document%2EcreateElement%28type%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28this%2Edata%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Eerror%20%3D%20new%20Error%28%27Unsupported%20element%20%27%20%2B%20type%29%3B%0A%20%20%20%20%20%20%20%20this%2Ecomplete%28%29%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20support%20for%20CocoonJS%20Canvas%2B%20runtime%2C%20lacks%20document%2EcreateElement%28%27source%27%29%0A%20%20%20%20if%20%28navigator%2EisCocoonJS%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Edata%2Esrc%20%3D%20Array%2EisArray%28this%2Eurl%29%20%3F%20this%2Eurl%5B0%5D%20%3A%20this%2Eurl%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28Array%2EisArray%28this%2Eurl%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Eurl%2Elength%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Edata%2EappendChild%28this%2E%5FcreateSource%28type%2C%20this%2Eurl%5Bi%5D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Edata%2EappendChild%28this%2E%5FcreateSource%28type%2C%20this%2Eurl%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%5B%27is%27%20%2B%20type%5B0%5D%2EtoUpperCase%28%29%20%2B%20type%2Esubstring%281%29%5D%20%3D%20true%3B%0A%0A%20%20%20%20this%2Edata%2EaddEventListener%28%27error%27%2C%20this%2E%5FboundOnError%2C%20false%29%3B%0A%20%20%20%20this%2Edata%2EaddEventListener%28%27load%27%2C%20this%2E%5FboundComplete%2C%20false%29%3B%0A%20%20%20%20this%2Edata%2EaddEventListener%28%27progress%27%2C%20this%2E%5FboundOnProgress%2C%20false%29%3B%0A%20%20%20%20this%2Edata%2EaddEventListener%28%27canplaythrough%27%2C%20this%2E%5FboundComplete%2C%20false%29%3B%0A%0A%20%20%20%20this%2Edata%2Eload%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Loads%20this%20resources%20using%20an%20XMLHttpRequest%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AResource%2Eprototype%2E%5FloadXhr%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%2F%2F%20if%20unset%2C%20determine%20the%20value%0A%20%20%20%20if%20%28typeof%20this%2ExhrType%20%21%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20this%2ExhrType%20%3D%20this%2E%5FdetermineXhrType%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20xhr%20%3D%20this%2Exhr%20%3D%20new%20XMLHttpRequest%28%29%3B%0A%0A%20%20%20%20%2F%2F%20set%20the%20request%20type%20and%20url%0A%20%20%20%20xhr%2Eopen%28%27GET%27%2C%20this%2Eurl%2C%20true%29%3B%0A%0A%20%20%20%20%2F%2F%20load%20json%20as%20text%20and%20parse%20it%20ourselves%2E%20We%20do%20this%20because%20some%20browsers%0A%20%20%20%20%2F%2F%20%2Acough%2A%20safari%20%2Acough%2A%20can%27t%20deal%20with%20it%2E%0A%20%20%20%20if%20%28this%2ExhrType%20%3D%3D%3D%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EJSON%20%7C%7C%20this%2ExhrType%20%3D%3D%3D%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDOCUMENT%29%20%7B%0A%20%20%20%20%20%20%20%20xhr%2EresponseType%20%3D%20Resource%2EXHR%5FRESPONSE%5FTYPE%2ETEXT%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20xhr%2EresponseType%20%3D%20this%2ExhrType%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20xhr%2EaddEventListener%28%27error%27%2C%20this%2E%5FboundXhrOnError%2C%20false%29%3B%0A%20%20%20%20xhr%2EaddEventListener%28%27abort%27%2C%20this%2E%5FboundXhrOnAbort%2C%20false%29%3B%0A%20%20%20%20xhr%2EaddEventListener%28%27progress%27%2C%20this%2E%5FboundOnProgress%2C%20false%29%3B%0A%20%20%20%20xhr%2EaddEventListener%28%27load%27%2C%20this%2E%5FboundXhrOnLoad%2C%20false%29%3B%0A%0A%20%20%20%20xhr%2Esend%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Loads%20this%20resources%20using%20an%20XDomainRequest%2E%20This%20is%20here%20because%20we%20need%20to%20support%20IE9%20%28gross%29%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%2F%0AResource%2Eprototype%2E%5FloadXdr%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%2F%2F%20if%20unset%2C%20determine%20the%20value%0A%20%20%20%20if%20%28typeof%20this%2ExhrType%20%21%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20this%2ExhrType%20%3D%20this%2E%5FdetermineXhrType%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20xdr%20%3D%20this%2Exhr%20%3D%20new%20XDomainRequest%28%29%3B%0A%0A%20%20%20%20%2F%2F%20XDomainRequest%20has%20a%20few%20quirks%2E%20Occasionally%20it%20will%20abort%20requests%0A%20%20%20%20%2F%2F%20A%20way%20to%20avoid%20this%20is%20to%20make%20sure%20ALL%20callbacks%20are%20set%20even%20if%20not%20used%0A%20%20%20%20%2F%2F%20More%20info%20here%3A%20http%3A%2F%2Fstackoverflow%2Ecom%2Fquestions%2F15786966%2Fxdomainrequest%2Daborts%2Dpost%2Don%2Die%2D9%0A%20%20%20%20xdr%2Etimeout%20%3D%205000%3B%0A%0A%20%20%20%20xdr%2Eonerror%20%3D%20this%2E%5FboundXhrOnError%3B%0A%20%20%20%20xdr%2Eontimeout%20%3D%20this%2E%5FboundXdrOnTimeout%3B%0A%20%20%20%20xdr%2Eonprogress%20%3D%20this%2E%5FboundOnProgress%3B%0A%20%20%20%20xdr%2Eonload%20%3D%20this%2E%5FboundXhrOnLoad%3B%0A%0A%20%20%20%20xdr%2Eopen%28%27GET%27%2C%20this%2Eurl%2C%20true%29%3B%0A%0A%20%20%20%20%2F%2F%20%20Note%3A%20The%20xdr%2Esend%28%29%20call%20is%20wrapped%20in%20a%20timeout%20to%20prevent%20an%20issue%20with%20the%20interface%20where%20some%20requests%20are%20lost%0A%20%20%20%20%2F%2F%20%20if%20multiple%20XDomainRequests%20are%20being%20sent%20at%20the%20same%20time%2E%0A%20%20%20%20%2F%2F%20Some%20info%20here%3A%20https%3A%2F%2Fgithub%2Ecom%2Fphotonstorm%2Fphaser%2Fissues%2F1248%0A%20%20%20%20setTimeout%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20xdr%2Esend%28%29%3B%0A%20%20%20%20%7D%2C%200%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Creates%20a%20source%20used%20in%20loading%20via%20an%20element%2E%0A%20%2A%0A%20%2A%20%40param%20type%20%7Bstring%7D%20The%20element%20type%20%28video%20or%20audio%29%2E%0A%20%2A%20%40param%20url%20%7Bstring%7D%20The%20source%20URL%20to%20load%20from%2E%0A%20%2A%20%40param%20%5Bmime%5D%20%7Bstring%7D%20The%20mime%20type%20of%20the%20video%0A%20%2A%20%40private%0A%20%2A%2F%0AResource%2Eprototype%2E%5FcreateSource%20%3D%20function%20%28type%2C%20url%2C%20mime%29%20%7B%0A%20%20%20%20if%20%28%21mime%29%20%7B%0A%20%20%20%20%20%20%20%20mime%20%3D%20type%20%2B%20%27%2F%27%20%2B%20url%2Esubstr%28url%2ElastIndexOf%28%27%2E%27%29%20%2B%201%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20source%20%3D%20document%2EcreateElement%28%27source%27%29%3B%0A%0A%20%20%20%20source%2Esrc%20%3D%20url%3B%0A%20%20%20%20source%2Etype%20%3D%20mime%3B%0A%0A%20%20%20%20return%20source%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20if%20a%20load%20errors%20out%2E%0A%20%2A%0A%20%2A%20%40param%20event%20%7BEvent%7D%20The%20error%20event%20from%20the%20element%20that%20emits%20it%2E%0A%20%2A%20%40private%0A%20%2A%2F%0AResource%2Eprototype%2E%5FonError%20%3D%20function%20%28event%29%20%7B%0A%20%20%20%20this%2Eerror%20%3D%20new%20Error%28%27Failed%20to%20load%20element%20using%20%27%20%2B%20event%2Etarget%2EnodeName%29%3B%0A%20%20%20%20this%2Ecomplete%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20if%20a%20load%20progress%20event%20fires%20for%20xhr%2Fxdr%2E%0A%20%2A%0A%20%2A%20%40fires%20progress%0A%20%2A%20%40param%20event%20%7BXMLHttpRequestProgressEvent%7CEvent%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AResource%2Eprototype%2E%5FonProgress%20%3D%20%20function%20%28event%29%20%7B%0A%20%20%20%20if%20%28event%20%26%26%20event%2ElengthComputable%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Eemit%28%27progress%27%2C%20this%2C%20event%2Eloaded%20%2F%20event%2Etotal%29%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20if%20an%20error%20event%20fires%20for%20xhr%2Fxdr%2E%0A%20%2A%0A%20%2A%20%40param%20event%20%7BXMLHttpRequestErrorEvent%7CEvent%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AResource%2Eprototype%2E%5FxhrOnError%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this%2Eerror%20%3D%20new%20Error%28%0A%20%20%20%20%20%20%20%20reqType%28this%2Exhr%29%20%2B%20%27%20Request%20failed%2E%20%27%20%2B%0A%20%20%20%20%20%20%20%20%27Status%3A%20%27%20%2B%20this%2Exhr%2Estatus%20%2B%20%27%2C%20text%3A%20%22%27%20%2B%20this%2Exhr%2EstatusText%20%2B%20%27%22%27%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20this%2Ecomplete%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20if%20an%20abort%20event%20fires%20for%20xhr%2E%0A%20%2A%0A%20%2A%20%40param%20event%20%7BXMLHttpRequestAbortEvent%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AResource%2Eprototype%2E%5FxhrOnAbort%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this%2Eerror%20%3D%20new%20Error%28reqType%28this%2Exhr%29%20%2B%20%27%20Request%20was%20aborted%20by%20the%20user%2E%27%29%3B%0A%20%20%20%20this%2Ecomplete%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20if%20a%20timeout%20event%20fires%20for%20xdr%2E%0A%20%2A%0A%20%2A%20%40param%20event%20%7BEvent%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AResource%2Eprototype%2E%5FxdrOnTimeout%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20this%2Eerror%20%3D%20new%20Error%28reqType%28this%2Exhr%29%20%2B%20%27%20Request%20timed%20out%2E%27%29%3B%0A%20%20%20%20this%2Ecomplete%28%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Called%20when%20data%20successfully%20loads%20from%20an%20xhr%2Fxdr%20request%2E%0A%20%2A%0A%20%2A%20%40param%20event%20%7BXMLHttpRequestLoadEvent%7CEvent%7D%0A%20%2A%20%40private%0A%20%2A%2F%0AResource%2Eprototype%2E%5FxhrOnLoad%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20var%20xhr%20%3D%20this%2Exhr%2C%0A%20%20%20%20%20%20%20%20status%20%3D%20xhr%2Estatus%20%21%3D%3D%20undefined%20%3F%20xhr%2Estatus%20%3A%20200%3B%20%2F%2FXDR%20has%20no%20%60%2Estatus%60%2C%20assume%20200%2E%0A%0A%20%20%20%20%2F%2F%20status%20can%20be%200%20when%20using%20the%20file%3A%2F%2F%20protocol%2C%20also%20check%20if%20a%20response%20was%20found%0A%20%20%20%20if%20%28status%20%3D%3D%3D%20200%20%7C%7C%20status%20%3D%3D%3D%20204%20%7C%7C%20%28status%20%3D%3D%3D%200%20%26%26%20xhr%2EresponseText%2Elength%20%3E%200%29%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20text%2C%20just%20return%20it%0A%20%20%20%20%20%20%20%20if%20%28this%2ExhrType%20%3D%3D%3D%20Resource%2EXHR%5FRESPONSE%5FTYPE%2ETEXT%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Edata%20%3D%20xhr%2EresponseText%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20json%2C%20parse%20into%20json%20object%0A%20%20%20%20%20%20%20%20else%20if%20%28this%2ExhrType%20%3D%3D%3D%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EJSON%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Edata%20%3D%20JSON%2Eparse%28xhr%2EresponseText%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EisJson%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Eerror%20%3D%20new%20Error%28%27Error%20trying%20to%20parse%20loaded%20json%3A%27%2C%20e%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20xml%2C%20parse%20into%20an%20xml%20document%20or%20div%20element%0A%20%20%20%20%20%20%20%20else%20if%20%28this%2ExhrType%20%3D%3D%3D%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDOCUMENT%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28window%2EDOMParser%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20domparser%20%3D%20new%20DOMParser%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Edata%20%3D%20domparser%2EparseFromString%28xhr%2EresponseText%2C%20%27text%2Fxml%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20div%20%3D%20document%2EcreateElement%28%27div%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20div%2EinnerHTML%20%3D%20xhr%2EresponseText%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Edata%20%3D%20div%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EisXml%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2Eerror%20%3D%20new%20Error%28%27Error%20trying%20to%20parse%20loaded%20xml%3A%27%2C%20e%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20other%20types%20just%20return%20the%20response%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Edata%20%3D%20xhr%2Eresponse%20%7C%7C%20xhr%2EresponseText%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20this%2Eerror%20%3D%20new%20Error%28%27%5B%27%20%2B%20xhr%2Estatus%20%2B%20%27%5D%27%20%2B%20xhr%2EstatusText%20%2B%20%27%3A%27%20%2B%20xhr%2EresponseURL%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this%2Ecomplete%28%29%3B%0A%7D%3B%0A%0Afunction%20reqType%28xhr%29%20%7B%0A%20%20%20%20return%20xhr%2EtoString%28%29%2Ereplace%28%27object%20%27%2C%20%27%27%29%3B%0A%7D%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20the%20%60crossOrigin%60%20property%20for%20this%20resource%20based%20on%20if%20the%20url%0A%20%2A%20for%20this%20resource%20is%20cross%2Dorigin%2E%20If%20crossOrigin%20was%20manually%20set%2C%20this%0A%20%2A%20function%20does%20nothing%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40param%20url%20%7Bstring%7D%20The%20url%20to%20test%2E%0A%20%2A%20%40param%20%5Blocation%3Dwindow%2Elocation%5D%20%7Bobject%7D%20The%20location%20object%20to%20test%20against%2E%0A%20%2A%20%40return%20%7Bstring%7D%20The%20crossOrigin%20value%20to%20use%20%28or%20empty%20string%20for%20none%29%2E%0A%20%2A%2F%0AResource%2Eprototype%2E%5FdetermineCrossOrigin%20%3D%20function%20%28url%2C%20loc%29%20%7B%0A%20%20%20%20%2F%2F%20data%3A%20and%20javascript%3A%20urls%20are%20considered%20same%2Dorigin%0A%20%20%20%20if%20%28url%2EindexOf%28%27data%3A%27%29%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%27%27%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20default%20is%20window%2Elocation%0A%20%20%20%20loc%20%3D%20loc%20%7C%7C%20window%2Elocation%3B%0A%0A%20%20%20%20if%20%28%21tempAnchor%29%20%7B%0A%20%20%20%20%20%20%20%20tempAnchor%20%3D%20document%2EcreateElement%28%27a%27%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20let%20the%20browser%20determine%20the%20full%20href%20for%20the%20url%20of%20this%20resource%20and%20then%0A%20%20%20%20%2F%2F%20parse%20with%20the%20node%20url%20lib%2C%20we%20can%27t%20use%20the%20properties%20of%20the%20anchor%20element%0A%20%20%20%20%2F%2F%20because%20they%20don%27t%20work%20in%20IE9%20%3A%28%0A%20%20%20%20tempAnchor%2Ehref%20%3D%20url%3B%0A%20%20%20%20url%20%3D%20%5Furl%2Eparse%28tempAnchor%2Ehref%29%3B%0A%0A%20%20%20%20var%20samePort%20%3D%20%28%21url%2Eport%20%26%26%20loc%2Eport%20%3D%3D%3D%20%27%27%29%20%7C%7C%20%28url%2Eport%20%3D%3D%3D%20loc%2Eport%29%3B%0A%0A%20%20%20%20%2F%2F%20if%20cross%20origin%0A%20%20%20%20if%20%28url%2Ehostname%20%21%3D%3D%20loc%2Ehostname%20%7C%7C%20%21samePort%20%7C%7C%20url%2Eprotocol%20%21%3D%3D%20loc%2Eprotocol%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%27anonymous%27%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%27%27%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Determines%20the%20responseType%20of%20an%20XHR%20request%20based%20on%20the%20extension%20of%20the%0A%20%2A%20resource%20being%20loaded%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40return%20%7BResource%2EXHR%5FRESPONSE%5FTYPE%7D%20The%20responseType%20to%20use%2E%0A%20%2A%2F%0AResource%2Eprototype%2E%5FdetermineXhrType%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20return%20Resource%2E%5FxhrTypeMap%5Bthis%2E%5FgetExtension%28%29%5D%20%7C%7C%20Resource%2EXHR%5FRESPONSE%5FTYPE%2ETEXT%3B%0A%7D%3B%0A%0AResource%2Eprototype%2E%5FdetermineLoadType%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20return%20Resource%2E%5FloadTypeMap%5Bthis%2E%5FgetExtension%28%29%5D%20%7C%7C%20Resource%2ELOAD%5FTYPE%2EXHR%3B%0A%7D%3B%0A%0AResource%2Eprototype%2E%5FgetExtension%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20var%20url%20%3D%20this%2Eurl%2C%0A%20%20%20%20%20%20%20%20ext%3B%0A%0A%20%20%20%20if%20%28this%2EisDataUrl%29%20%7B%0A%20%20%20%20%20%20%20%20var%20slashIndex%20%3D%20url%2EindexOf%28%27%2F%27%29%3B%0A%20%20%20%20%20%20%20%20ext%20%3D%20url%2Esubstring%28slashIndex%20%2B%201%2C%20url%2EindexOf%28%27%3B%27%2C%20slashIndex%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20queryStart%20%3D%20url%2EindexOf%28%27%3F%27%29%3B%0A%20%20%20%20%20%20%20%20if%20%28queryStart%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3D%20url%2Esubstring%280%2C%20queryStart%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20ext%20%3D%20url%2Esubstring%28url%2ElastIndexOf%28%27%2E%27%29%20%2B%201%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20ext%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Determines%20the%20mime%20type%20of%20an%20XHR%20request%20based%20on%20the%20responseType%20of%0A%20%2A%20resource%20being%20loaded%2E%0A%20%2A%0A%20%2A%20%40private%0A%20%2A%20%40return%20%7Bstring%7D%20The%20mime%20type%20to%20use%2E%0A%20%2A%2F%0AResource%2Eprototype%2E%5FgetMimeFromXhrType%20%3D%20function%20%28type%29%20%7B%0A%20%20%20%20switch%28type%29%20%7B%0A%20%20%20%20%20%20%20%20case%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBUFFER%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%27application%2Foctet%2Dbinary%27%3B%0A%0A%20%20%20%20%20%20%20%20case%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBLOB%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%27application%2Fblob%27%3B%0A%0A%20%20%20%20%20%20%20%20case%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDOCUMENT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%27application%2Fxml%27%3B%0A%0A%20%20%20%20%20%20%20%20case%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EJSON%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%27application%2Fjson%27%3B%0A%0A%20%20%20%20%20%20%20%20case%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDEFAULT%3A%0A%20%20%20%20%20%20%20%20case%20Resource%2EXHR%5FRESPONSE%5FTYPE%2ETEXT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2A%20falls%20through%20%2A%2F%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%27text%2Fplain%27%3B%0A%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20types%20of%20loading%20a%20resource%20can%20use%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40constant%0A%20%2A%20%40property%20%7Bobject%7D%20LOAD%5FTYPE%0A%20%2A%20%40property%20%7Bnumber%7D%20LOAD%5FTYPE%2EXHR%20%2D%20Uses%20XMLHttpRequest%20to%20load%20the%20resource%2E%0A%20%2A%20%40property%20%7Bnumber%7D%20LOAD%5FTYPE%2EIMAGE%20%2D%20Uses%20an%20%60Image%60%20object%20to%20load%20the%20resource%2E%0A%20%2A%20%40property%20%7Bnumber%7D%20LOAD%5FTYPE%2EAUDIO%20%2D%20Uses%20an%20%60Audio%60%20object%20to%20load%20the%20resource%2E%0A%20%2A%20%40property%20%7Bnumber%7D%20LOAD%5FTYPE%2EVIDEO%20%2D%20Uses%20a%20%60Video%60%20object%20to%20load%20the%20resource%2E%0A%20%2A%2F%0AResource%2ELOAD%5FTYPE%20%3D%20%7B%0A%20%20%20%20XHR%3A%20%20%20%201%2C%0A%20%20%20%20IMAGE%3A%20%202%2C%0A%20%20%20%20AUDIO%3A%20%203%2C%0A%20%20%20%20VIDEO%3A%20%204%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20XHR%20ready%20states%2C%20used%20internally%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40constant%0A%20%2A%20%40property%20%7Bobject%7D%20XHR%5FREADY%5FSTATE%0A%20%2A%20%40property%20%7Bnumber%7D%20XHR%5FREADY%5FSTATE%2EUNSENT%20%2D%20open%28%29has%20not%20been%20called%20yet%2E%0A%20%2A%20%40property%20%7Bnumber%7D%20XHR%5FREADY%5FSTATE%2EOPENED%20%2D%20send%28%29has%20not%20been%20called%20yet%2E%0A%20%2A%20%40property%20%7Bnumber%7D%20XHR%5FREADY%5FSTATE%2EHEADERS%5FRECEIVED%20%2D%20send%28%29%20has%20been%20called%2C%20and%20headers%20and%20status%20are%20available%2E%0A%20%2A%20%40property%20%7Bnumber%7D%20XHR%5FREADY%5FSTATE%2ELOADING%20%2D%20Downloading%3B%20responseText%20holds%20partial%20data%2E%0A%20%2A%20%40property%20%7Bnumber%7D%20XHR%5FREADY%5FSTATE%2EDONE%20%2D%20The%20operation%20is%20complete%2E%0A%20%2A%2F%0AResource%2EXHR%5FREADY%5FSTATE%20%3D%20%7B%0A%20%20%20%20UNSENT%3A%200%2C%0A%20%20%20%20OPENED%3A%201%2C%0A%20%20%20%20HEADERS%5FRECEIVED%3A%202%2C%0A%20%20%20%20LOADING%3A%203%2C%0A%20%20%20%20DONE%3A%204%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20The%20XHR%20ready%20states%2C%20used%20internally%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40constant%0A%20%2A%20%40property%20%7Bobject%7D%20XHR%5FRESPONSE%5FTYPE%0A%20%2A%20%40property%20%7Bstring%7D%20XHR%5FRESPONSE%5FTYPE%2EDEFAULT%20%2D%20defaults%20to%20text%0A%20%2A%20%40property%20%7Bstring%7D%20XHR%5FRESPONSE%5FTYPE%2EBUFFER%20%2D%20ArrayBuffer%0A%20%2A%20%40property%20%7Bstring%7D%20XHR%5FRESPONSE%5FTYPE%2EBLOB%20%2D%20Blob%0A%20%2A%20%40property%20%7Bstring%7D%20XHR%5FRESPONSE%5FTYPE%2EDOCUMENT%20%2D%20Document%0A%20%2A%20%40property%20%7Bstring%7D%20XHR%5FRESPONSE%5FTYPE%2EJSON%20%2D%20Object%0A%20%2A%20%40property%20%7Bstring%7D%20XHR%5FRESPONSE%5FTYPE%2ETEXT%20%2D%20String%0A%20%2A%2F%0AResource%2EXHR%5FRESPONSE%5FTYPE%20%3D%20%7B%0A%20%20%20%20DEFAULT%3A%20%20%20%20%27text%27%2C%0A%20%20%20%20BUFFER%3A%20%20%20%20%20%27arraybuffer%27%2C%0A%20%20%20%20BLOB%3A%20%20%20%20%20%20%20%27blob%27%2C%0A%20%20%20%20DOCUMENT%3A%20%20%20%27document%27%2C%0A%20%20%20%20JSON%3A%20%20%20%20%20%20%20%27json%27%2C%0A%20%20%20%20TEXT%3A%20%20%20%20%20%20%20%27text%27%0A%7D%3B%0A%0AResource%2E%5FloadTypeMap%20%3D%20%7B%0A%20%20%20%20%27gif%27%3A%20%20%20%20%20%20Resource%2ELOAD%5FTYPE%2EIMAGE%2C%0A%20%20%20%20%27png%27%3A%20%20%20%20%20%20Resource%2ELOAD%5FTYPE%2EIMAGE%2C%0A%20%20%20%20%27bmp%27%3A%20%20%20%20%20%20Resource%2ELOAD%5FTYPE%2EIMAGE%2C%0A%20%20%20%20%27jpg%27%3A%20%20%20%20%20%20Resource%2ELOAD%5FTYPE%2EIMAGE%2C%0A%20%20%20%20%27jpeg%27%3A%20%20%20%20%20Resource%2ELOAD%5FTYPE%2EIMAGE%2C%0A%20%20%20%20%27tif%27%3A%20%20%20%20%20%20Resource%2ELOAD%5FTYPE%2EIMAGE%2C%0A%20%20%20%20%27tiff%27%3A%20%20%20%20%20Resource%2ELOAD%5FTYPE%2EIMAGE%2C%0A%20%20%20%20%27webp%27%3A%20%20%20%20%20Resource%2ELOAD%5FTYPE%2EIMAGE%2C%0A%20%20%20%20%27tga%27%3A%20%20%20%20%20%20Resource%2ELOAD%5FTYPE%2EIMAGE%0A%7D%3B%0A%0AResource%2E%5FxhrTypeMap%20%3D%20%7B%0A%20%20%20%20%2F%2F%20xml%0A%20%20%20%20%27xhtml%27%3A%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDOCUMENT%2C%0A%20%20%20%20%27html%27%3A%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDOCUMENT%2C%0A%20%20%20%20%27htm%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDOCUMENT%2C%0A%20%20%20%20%27xml%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDOCUMENT%2C%0A%20%20%20%20%27tmx%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDOCUMENT%2C%0A%20%20%20%20%27tsx%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDOCUMENT%2C%0A%20%20%20%20%27svg%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EDOCUMENT%2C%0A%0A%20%20%20%20%2F%2F%20images%0A%20%20%20%20%27gif%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBLOB%2C%0A%20%20%20%20%27png%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBLOB%2C%0A%20%20%20%20%27bmp%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBLOB%2C%0A%20%20%20%20%27jpg%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBLOB%2C%0A%20%20%20%20%27jpeg%27%3A%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBLOB%2C%0A%20%20%20%20%27tif%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBLOB%2C%0A%20%20%20%20%27tiff%27%3A%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBLOB%2C%0A%20%20%20%20%27webp%27%3A%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBLOB%2C%0A%20%20%20%20%27tga%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBLOB%2C%0A%0A%20%20%20%20%2F%2F%20json%0A%20%20%20%20%27json%27%3A%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EJSON%2C%0A%0A%20%20%20%20%2F%2F%20text%0A%20%20%20%20%27text%27%3A%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2ETEXT%2C%0A%20%20%20%20%27txt%27%3A%20%20%20%20%20%20Resource%2EXHR%5FRESPONSE%5FTYPE%2ETEXT%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20the%20load%20type%20to%20be%20used%20for%20a%20specific%20extension%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20extname%20%7Bstring%7D%20The%20extension%20to%20set%20the%20type%20for%2C%20e%2Eg%2E%20%22png%22%20or%20%22fnt%22%0A%20%2A%20%40param%20loadType%20%7BResource%2ELOAD%5FTYPE%7D%20The%20load%20type%20to%20set%20it%20to%2E%0A%20%2A%2F%0AResource%2EsetExtensionLoadType%20%3D%20function%20%28extname%2C%20loadType%29%20%7B%0A%20%20%20%20setExtMap%28Resource%2E%5FloadTypeMap%2C%20extname%2C%20loadType%29%3B%0A%7D%3B%0A%0A%2F%2A%2A%0A%20%2A%20Sets%20the%20load%20type%20to%20be%20used%20for%20a%20specific%20extension%2E%0A%20%2A%0A%20%2A%20%40static%0A%20%2A%20%40param%20extname%20%7Bstring%7D%20The%20extension%20to%20set%20the%20type%20for%2C%20e%2Eg%2E%20%22png%22%20or%20%22fnt%22%0A%20%2A%20%40param%20xhrType%20%7BResource%2EXHR%5FRESPONSE%5FTYPE%7D%20The%20xhr%20type%20to%20set%20it%20to%2E%0A%20%2A%2F%0AResource%2EsetExtensionXhrType%20%3D%20function%20%28extname%2C%20xhrType%29%20%7B%0A%20%20%20%20setExtMap%28Resource%2E%5FxhrTypeMap%2C%20extname%2C%20xhrType%29%3B%0A%7D%3B%0A%0Afunction%20setExtMap%28map%2C%20extname%2C%20val%29%20%7B%0A%20%20%20%20if%20%28extname%20%26%26%20extname%2EindexOf%28%27%2E%27%29%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20extname%20%3D%20extname%2Esubstring%281%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%21extname%29%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20map%5Bextname%5D%20%3D%20val%3B%0A%7D%0A%0A%7D%2C%7B%22eventemitter3%22%3A129%2C%22url%22%3A8%7D%5D%2C132%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Amodule%2Eexports%20%3D%20%7B%0A%0A%20%20%20%20%2F%2F%20private%20property%0A%20%20%20%20%5FkeyStr%3A%20%22ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%2B%2F%3D%22%2C%0A%0A%20%20%20%20encodeBinary%3A%20function%20%28input%29%20%7B%0A%20%20%20%20%20%20%20%20var%20output%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20var%20bytebuffer%3B%0A%20%20%20%20%20%20%20%20var%20encodedCharIndexes%20%3D%20new%20Array%284%29%3B%0A%20%20%20%20%20%20%20%20var%20inx%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20jnx%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20paddingBytes%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20while%20%28inx%20%3C%20input%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Fill%20byte%20buffer%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20bytebuffer%20%3D%20new%20Array%283%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28jnx%20%3D%200%3B%20jnx%20%3C%20bytebuffer%2Elength%3B%20jnx%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inx%20%3C%20input%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20throw%20away%20high%2Dorder%20byte%2C%20as%20documented%20at%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20https%3A%2F%2Fdeveloper%2Emozilla%2Eorg%2FEn%2FUsing%5FXMLHttpRequest%23Handling%5Fbinary%5Fdata%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytebuffer%5Bjnx%5D%20%3D%20input%2EcharCodeAt%28inx%2B%2B%29%20%26%200xff%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bytebuffer%5Bjnx%5D%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20each%20encoded%20character%2C%206%20bits%20at%20a%20time%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20index%201%3A%20first%206%20bits%0A%20%20%20%20%20%20%20%20%20%20%20%20encodedCharIndexes%5B0%5D%20%3D%20bytebuffer%5B0%5D%20%3E%3E%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20index%202%3A%20second%206%20bits%20%282%20least%20significant%20bits%20from%20input%20byte%201%20%2B%204%20most%20significant%20bits%20from%20byte%202%29%0A%20%20%20%20%20%20%20%20%20%20%20%20encodedCharIndexes%5B1%5D%20%3D%20%28%28bytebuffer%5B0%5D%20%26%200x3%29%20%3C%3C%204%29%20%7C%20%28bytebuffer%5B1%5D%20%3E%3E%204%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20index%203%3A%20third%206%20bits%20%284%20least%20significant%20bits%20from%20input%20byte%202%20%2B%202%20most%20significant%20bits%20from%20byte%203%29%0A%20%20%20%20%20%20%20%20%20%20%20%20encodedCharIndexes%5B2%5D%20%3D%20%28%28bytebuffer%5B1%5D%20%26%200x0f%29%20%3C%3C%202%29%20%7C%20%28bytebuffer%5B2%5D%20%3E%3E%206%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20index%203%3A%20forth%206%20bits%20%286%20least%20significant%20bits%20from%20input%20byte%203%29%0A%20%20%20%20%20%20%20%20%20%20%20%20encodedCharIndexes%5B3%5D%20%3D%20bytebuffer%5B2%5D%20%26%200x3f%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Determine%20whether%20padding%20happened%2C%20and%20adjust%20accordingly%0A%20%20%20%20%20%20%20%20%20%20%20%20paddingBytes%20%3D%20inx%20%2D%20%28input%2Elength%20%2D%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20switch%20%28paddingBytes%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Set%20last%202%20characters%20to%20padding%20char%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20encodedCharIndexes%5B3%5D%20%3D%2064%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20encodedCharIndexes%5B2%5D%20%3D%2064%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Set%20last%20character%20to%20padding%20char%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20encodedCharIndexes%5B3%5D%20%3D%2064%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%20%2F%2F%20No%20padding%20%2D%20proceed%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Now%20we%20will%20grab%20each%20appropriate%20character%20out%20of%20our%20keystring%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20based%20on%20our%20index%20array%20and%20append%20it%20to%20the%20output%20string%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28jnx%20%3D%200%3B%20jnx%20%3C%20encodedCharIndexes%2Elength%3B%20jnx%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%2B%3D%20this%2E%5FkeyStr%2EcharAt%28encodedCharIndexes%5Bjnx%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20output%3B%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C133%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Amodule%2Eexports%20%3D%20require%28%27%2E%2FLoader%27%29%3B%0A%0Amodule%2Eexports%2EResource%20%3D%20require%28%27%2E%2FResource%27%29%3B%0A%0Amodule%2Eexports%2Emiddleware%20%3D%20%7B%0A%20%20%20%20caching%3A%20%7B%0A%20%20%20%20%20%20%20%20memory%3A%20require%28%27%2E%2Fmiddlewares%2Fcaching%2Fmemory%27%29%0A%20%20%20%20%7D%2C%0A%20%20%20%20parsing%3A%20%7B%0A%20%20%20%20%20%20%20%20blob%3A%20require%28%27%2E%2Fmiddlewares%2Fparsing%2Fblob%27%29%0A%20%20%20%20%7D%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2FLoader%22%3A130%2C%22%2E%2FResource%22%3A131%2C%22%2E%2Fmiddlewares%2Fcaching%2Fmemory%22%3A134%2C%22%2E%2Fmiddlewares%2Fparsing%2Fblob%22%3A135%7D%5D%2C134%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0A%2F%2F%20a%20simple%20in%2Dmemory%20cache%20for%20resources%0Avar%20cache%20%3D%20%7B%7D%3B%0A%0Amodule%2Eexports%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20return%20function%20%28resource%2C%20next%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20cached%2C%20then%20set%20data%20and%20complete%20the%20resource%0A%20%20%20%20%20%20%20%20if%20%28cache%5Bresource%2Eurl%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%20%3D%20cache%5Bresource%2Eurl%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2Ecomplete%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20not%20cached%2C%20wait%20for%20complete%20and%20store%20it%20in%20the%20cache%2E%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2Eonce%28%27complete%27%2C%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cache%5Bthis%2Eurl%5D%20%3D%20this%2Edata%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20next%28%29%3B%0A%20%20%20%20%7D%3B%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%2C135%3A%5Bfunction%28require%2Cmodule%2Cexports%29%7B%0Avar%20Resource%20%3D%20require%28%27%2E%2E%2F%2E%2E%2FResource%27%29%2C%0A%20%20%20%20b64%20%3D%20require%28%27%2E%2E%2F%2E%2E%2Fb64%27%29%3B%0A%0Awindow%2EURL%20%3D%20window%2EURL%20%7C%7C%20window%2EwebkitURL%3B%0A%0A%2F%2F%20a%20middleware%20for%20transforming%20XHR%20loaded%20Blobs%20into%20more%20useful%20objects%0A%0Amodule%2Eexports%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20return%20function%20%28resource%2C%20next%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21resource%2Edata%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20this%20was%20an%20XHR%20load%20of%20a%20blob%0A%20%20%20%20%20%20%20%20if%20%28resource%2Exhr%20%26%26%20resource%2ExhrType%20%3D%3D%3D%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBLOB%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20there%20is%20no%20blob%20support%20we%20probably%20got%20a%20binary%20string%20back%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21window%2EBlob%20%7C%7C%20typeof%20resource%2Edata%20%3D%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20type%20%3D%20resource%2Exhr%2EgetResponseHeader%28%27content%2Dtype%27%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20is%20an%20image%2C%20convert%20the%20binary%20string%20into%20a%20data%20url%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28type%20%26%26%20type%2EindexOf%28%27image%27%29%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%20%3D%20new%20Image%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%2Esrc%20%3D%20%27data%3A%27%20%2B%20type%20%2B%20%27%3Bbase64%2C%27%20%2B%20b64%2EencodeBinary%28resource%2Exhr%2EresponseText%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2EisImage%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20wait%20until%20the%20image%20loads%20and%20then%20callback%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%2Eonload%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%2Eonload%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20content%20type%20says%20this%20is%20an%20image%2C%20then%20we%20should%20transform%20the%20blob%20into%20an%20Image%20object%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28resource%2Edata%2Etype%2EindexOf%28%27image%27%29%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20src%20%3D%20URL%2EcreateObjectURL%28resource%2Edata%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2Eblob%20%3D%20resource%2Edata%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%20%3D%20new%20Image%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%2Esrc%20%3D%20src%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2EisImage%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20cleanup%20the%20no%20longer%20used%20blob%20after%20the%20image%20loads%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%2Eonload%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URL%2ErevokeObjectURL%28src%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resource%2Edata%2Eonload%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20next%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%7D%3B%0A%0A%7D%2C%7B%22%2E%2E%2F%2E%2E%2FResource%22%3A131%2C%22%2E%2E%2F%2E%2E%2Fb64%22%3A132%7D%5D%7D%2C%7B%7D%2C%5B108%5D%29%28108%29%0A%7D%29%3B%0A%0A%0A%2F%2F%23%20sourceMappingURL%3Dpixi%2Ejs%2Emap%0A%2F%2A%0ASound%2Ejs%0A%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A%0AA%20complete%20micro%20library%20of%20useful%2C%20modular%20functions%20that%20help%20you%20load%2C%20play%2C%20control%0Aand%20generate%20sound%20effects%20and%20music%20for%20games%20and%20interactive%20applications%2E%20All%20the%0Acode%20targets%20the%20WebAudio%20API%2E%0A%2A%2F%0A%0A%0A%2F%2A%0AFixing%20the%20WebAudio%20API%0A%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%0AThe%20WebAudio%20API%20is%20so%20new%20that%20it%27s%20API%20is%20not%20consistently%20implemented%20properly%20across%0Aall%20modern%20browsers%2E%20Thankfully%2C%20Chris%20Wilson%27s%20Audio%20Context%20Monkey%20Patch%20script%0Anormalizes%20the%20API%20for%20maximum%20compatibility%2E%0A%0Ahttps%3A%2F%2Fgithub%2Ecom%2Fcwilso%2FAudioContext%2DMonkeyPatch%2Fblob%2Fgh%2Dpages%2FAudioContextMonkeyPatch%2Ejs%0A%0AIt%27s%20included%20here%2E%0AThank%20you%2C%20Chris%21%0A%0A%2A%2F%0A%0A%28function%20%28global%2C%20exports%2C%20perf%29%20%7B%0A%20%20%27use%20strict%27%3B%0A%0A%20%20function%20fixSetTarget%28param%29%20%7B%0A%20%20%20%20if%20%28%21param%29%09%2F%2F%20if%20NYI%2C%20just%20return%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20if%20%28%21param%2EsetTargetAtTime%29%0A%20%20%20%20%20%20param%2EsetTargetAtTime%20%3D%20param%2EsetTargetValueAtTime%3B%0A%20%20%7D%0A%0A%20%20if%20%28window%2EhasOwnProperty%28%27webkitAudioContext%27%29%20%26%26%0A%20%20%20%20%20%20%21window%2EhasOwnProperty%28%27AudioContext%27%29%29%20%7B%0A%20%20%20%20window%2EAudioContext%20%3D%20webkitAudioContext%3B%0A%0A%20%20%20%20if%20%28%21AudioContext%2Eprototype%2EhasOwnProperty%28%27createGain%27%29%29%0A%20%20%20%20%20%20AudioContext%2Eprototype%2EcreateGain%20%3D%20AudioContext%2Eprototype%2EcreateGainNode%3B%0A%20%20%20%20if%20%28%21AudioContext%2Eprototype%2EhasOwnProperty%28%27createDelay%27%29%29%0A%20%20%20%20%20%20AudioContext%2Eprototype%2EcreateDelay%20%3D%20AudioContext%2Eprototype%2EcreateDelayNode%3B%0A%20%20%20%20if%20%28%21AudioContext%2Eprototype%2EhasOwnProperty%28%27createScriptProcessor%27%29%29%0A%20%20%20%20%20%20AudioContext%2Eprototype%2EcreateScriptProcessor%20%3D%20AudioContext%2Eprototype%2EcreateJavaScriptNode%3B%0A%20%20%20%20if%20%28%21AudioContext%2Eprototype%2EhasOwnProperty%28%27createPeriodicWave%27%29%29%0A%20%20%20%20%20%20AudioContext%2Eprototype%2EcreatePeriodicWave%20%3D%20AudioContext%2Eprototype%2EcreateWaveTable%3B%0A%0A%0A%20%20%20%20AudioContext%2Eprototype%2Einternal%5FcreateGain%20%3D%20AudioContext%2Eprototype%2EcreateGain%3B%0A%20%20%20%20AudioContext%2Eprototype%2EcreateGain%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20node%20%3D%20this%2Einternal%5FcreateGain%28%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2Egain%29%3B%0A%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20AudioContext%2Eprototype%2Einternal%5FcreateDelay%20%3D%20AudioContext%2Eprototype%2EcreateDelay%3B%0A%20%20%20%20AudioContext%2Eprototype%2EcreateDelay%20%3D%20function%28maxDelayTime%29%20%7B%0A%20%20%20%20%20%20var%20node%20%3D%20maxDelayTime%20%3F%20this%2Einternal%5FcreateDelay%28maxDelayTime%29%20%3A%20this%2Einternal%5FcreateDelay%28%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2EdelayTime%29%3B%0A%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20AudioContext%2Eprototype%2Einternal%5FcreateBufferSource%20%3D%20AudioContext%2Eprototype%2EcreateBufferSource%3B%0A%20%20%20%20AudioContext%2Eprototype%2EcreateBufferSource%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20node%20%3D%20this%2Einternal%5FcreateBufferSource%28%29%3B%0A%20%20%20%20%20%20if%20%28%21node%2Estart%29%20%7B%0A%20%20%20%20%20%20%20%20node%2Estart%20%3D%20function%20%28%20when%2C%20offset%2C%20duration%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%20offset%20%7C%7C%20duration%20%29%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EnoteGrainOn%28%20when%20%7C%7C%200%2C%20offset%2C%20duration%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EnoteOn%28%20when%20%7C%7C%200%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20node%2Einternal%5Fstart%20%3D%20node%2Estart%3B%0A%20%20%20%20%20%20%20%20node%2Estart%20%3D%20function%28%20when%2C%20offset%2C%20duration%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%28%20typeof%20duration%20%21%3D%3D%20%27undefined%27%20%29%0A%20%20%20%20%20%20%20%20%20%20%20%20node%2Einternal%5Fstart%28%20when%20%7C%7C%200%2C%20offset%2C%20duration%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20node%2Einternal%5Fstart%28%20when%20%7C%7C%200%2C%20offset%20%7C%7C%200%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28%21node%2Estop%29%20%7B%0A%20%20%20%20%20%20%20%20node%2Estop%20%3D%20function%20%28%20when%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2EnoteOff%28%20when%20%7C%7C%200%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20node%2Einternal%5Fstop%20%3D%20node%2Estop%3B%0A%20%20%20%20%20%20%20%20node%2Estop%20%3D%20function%28%20when%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%2Einternal%5Fstop%28%20when%20%7C%7C%200%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20fixSetTarget%28node%2EplaybackRate%29%3B%0A%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20AudioContext%2Eprototype%2Einternal%5FcreateDynamicsCompressor%20%3D%20AudioContext%2Eprototype%2EcreateDynamicsCompressor%3B%0A%20%20%20%20AudioContext%2Eprototype%2EcreateDynamicsCompressor%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20node%20%3D%20this%2Einternal%5FcreateDynamicsCompressor%28%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2Ethreshold%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2Eknee%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2Eratio%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2Ereduction%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2Eattack%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2Erelease%29%3B%0A%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20AudioContext%2Eprototype%2Einternal%5FcreateBiquadFilter%20%3D%20AudioContext%2Eprototype%2EcreateBiquadFilter%3B%0A%20%20%20%20AudioContext%2Eprototype%2EcreateBiquadFilter%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20node%20%3D%20this%2Einternal%5FcreateBiquadFilter%28%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2Efrequency%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2Edetune%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2EQ%29%3B%0A%20%20%20%20%20%20fixSetTarget%28node%2Egain%29%3B%0A%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20if%20%28AudioContext%2Eprototype%2EhasOwnProperty%28%20%27createOscillator%27%20%29%29%20%7B%0A%20%20%20%20%20%20AudioContext%2Eprototype%2Einternal%5FcreateOscillator%20%3D%20AudioContext%2Eprototype%2EcreateOscillator%3B%0A%20%20%20%20%20%20AudioContext%2Eprototype%2EcreateOscillator%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20this%2Einternal%5FcreateOscillator%28%29%3B%0A%20%20%20%20%20%20%20%20if%20%28%21node%2Estart%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%2Estart%20%3D%20function%20%28%20when%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EnoteOn%28%20when%20%7C%7C%200%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%2Einternal%5Fstart%20%3D%20node%2Estart%3B%0A%20%20%20%20%20%20%20%20%20%20node%2Estart%20%3D%20function%20%28%20when%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%2Einternal%5Fstart%28%20when%20%7C%7C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%21node%2Estop%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%2Estop%20%3D%20function%20%28%20when%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EnoteOff%28%20when%20%7C%7C%200%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%2Einternal%5Fstop%20%3D%20node%2Estop%3B%0A%20%20%20%20%20%20%20%20%20%20node%2Estop%20%3D%20function%28%20when%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%2Einternal%5Fstop%28%20when%20%7C%7C%200%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%21node%2EsetPeriodicWave%29%0A%20%20%20%20%20%20%20%20%20%20node%2EsetPeriodicWave%20%3D%20node%2EsetWaveTable%3B%0A%20%20%20%20%20%20%20%20fixSetTarget%28node%2Efrequency%29%3B%0A%20%20%20%20%20%20%20%20fixSetTarget%28node%2Edetune%29%3B%0A%20%20%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20if%20%28window%2EhasOwnProperty%28%27webkitOfflineAudioContext%27%29%20%26%26%0A%20%20%20%20%20%20%21window%2EhasOwnProperty%28%27OfflineAudioContext%27%29%29%20%7B%0A%20%20%20%20window%2EOfflineAudioContext%20%3D%20webkitOfflineAudioContext%3B%0A%20%20%7D%0A%0A%7D%28window%29%29%3B%0A%0A%2F%2A%0ADefine%20the%20audio%20context%0A%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%0AAll%20this%20code%20uses%20a%20single%20%60AudioContext%60%20If%20you%20want%20to%20use%20any%20of%20these%20functions%0Aindependently%20of%20this%20file%2C%20make%20sure%20that%20have%20an%20%60AudioContext%60%20called%20%60actx%60%2E%20%0A%2A%2F%0Avar%20actx%20%3D%20new%20AudioContext%28%29%3B%0A%0A%2F%2A%0Asounds%0A%2D%2D%2D%2D%2D%2D%0A%0A%60sounds%60%20is%20an%20object%20that%20you%20can%20use%20to%20store%20all%20your%20loaded%20sound%20fles%2E%20%0AIt%20also%20has%20a%20helpful%20%60load%60%20method%20that%20manages%20asset%20loading%2E%20You%20can%20load%20sounds%20at%0Aany%20time%20during%20the%20game%20by%20using%20the%20%60sounds%2Eload%60%20method%2E%20You%20don%27t%20have%20to%20use%0Athe%20%60sounds%60%20object%20or%20its%20%60load%60%20method%2C%20but%20it%27s%20a%20really%20convenient%20way%20to%20%0Awork%20with%20sound%20file%20assets%2E%0A%0AHere%27s%20how%20could%20use%20the%20%60sound%60%20object%20to%20load%20three%20sound%20files%20from%20a%20%60sounds%60%20folder%20and%20%0Acall%20a%20%60setup%60%20method%20when%20all%20the%20files%20have%20finished%20loading%3A%0A%0A%20%20%20%20sounds%2Eload%28%5B%0A%20%20%20%20%20%20%22sounds%2Fshoot%2Ewav%22%2C%20%0A%20%20%20%20%20%20%22sounds%2Fmusic%2Ewav%22%2C%0A%20%20%20%20%20%20%22sounds%2Fbounce%2Emp3%22%0A%20%20%20%20%5D%29%3B%0A%20%20%20%20sounds%2EwhenLoaded%20%3D%20setup%3B%0A%0AYou%20can%20now%20access%20these%20loaded%20sounds%20in%20your%20application%20code%20like%20this%3A%0A%0Avar%20shoot%20%3D%20sounds%5B%22sounds%2Fshoot%2Ewav%22%5D%2C%0A%20%20%20%20music%20%3D%20sounds%5B%22sounds%2Fmusic%2Ewav%22%5D%2C%0A%20%20%20%20bounce%20%3D%20sounds%5B%22sounds%2Fbounce%2Emp3%22%5D%3B%0A%0A%2A%2F%0A%0Avar%20sounds%20%3D%20%7B%0A%20%20%2F%2FProperties%20to%20help%20track%20the%20assets%20being%20loaded%2E%0A%20%20toLoad%3A%200%2C%0A%20%20loaded%3A%200%2C%0A%0A%20%20%2F%2FFile%20extensions%20for%20different%20types%20of%20sounds%2E%0A%20%20audioExtensions%3A%20%5B%22mp3%22%2C%20%22ogg%22%2C%20%22wav%22%2C%20%22webm%22%5D%2C%0A%0A%20%20%2F%2FThe%20callback%20function%20that%20should%20run%20when%20all%20assets%20have%20loaded%2E%0A%20%20%2F%2FAssign%20this%20when%20you%20load%20the%20fonts%2C%20like%20this%3A%20%60assets%2EwhenLoaded%20%3D%20makeSprites%3B%60%2E%0A%20%20whenLoaded%3A%20undefined%2C%0A%0A%20%20%2F%2FThe%20load%20method%20creates%20and%20loads%20all%20the%20assets%2E%20Use%20it%20like%20this%3A%0A%20%20%2F%2F%60assets%2Eload%28%5B%22images%2FanyImage%2Epng%22%2C%20%22fonts%2FanyFont%2Eotf%22%5D%29%3B%60%2E%0A%0A%20%20load%3A%20function%28sources%29%20%7B%0A%20%20%20%20console%2Elog%28%22Loading%20sounds%2E%2E%22%29%3B%0A%0A%20%20%20%20%2F%2FGet%20a%20reference%20to%20this%20asset%20object%20so%20we%20can%0A%20%20%20%20%2F%2Frefer%20to%20it%20in%20the%20%60forEach%60%20loop%20ahead%2E%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%2F%2FFind%20the%20number%20of%20files%20that%20need%20to%20be%20loaded%2E%0A%20%20%20%20self%2EtoLoad%20%3D%20sources%2Elength%3B%0A%20%20%20%20sources%2EforEach%28function%28source%29%7B%0A%0A%20%20%20%20%20%20%2F%2FFind%20the%20file%20extension%20of%20the%20asset%2E%0A%20%20%20%20%20%20var%20extension%20%3D%20source%2Esplit%28%27%2E%27%29%2Epop%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%23%23%23%23%20Sounds%0A%20%20%20%20%20%20%2F%2FLoad%20audio%20files%20that%20have%20file%20extensions%20that%20match%0A%20%20%20%20%20%20%2F%2Fthe%20%60audioExtensions%60%20array%2E%0A%20%20%20%20%20%20if%20%28self%2EaudioExtensions%2EindexOf%28extension%29%20%21%3D%3D%20%2D1%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCreate%20a%20sound%20sprite%2E%0A%20%20%20%20%20%20%20%20var%20soundSprite%20%3D%20makeSound%28source%2C%20self%2EloadHandler%2Ebind%28self%29%2C%20true%2C%20false%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FGet%20the%20sound%20file%20name%2E%0A%20%20%20%20%20%20%20%20soundSprite%2Ename%20%3D%20source%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20you%20just%20want%20to%20extract%20the%20file%20name%20with%20the%0A%20%20%20%20%20%20%20%20%2F%2Fextension%2C%20you%20can%20do%20it%20like%20this%3A%0A%20%20%20%20%20%20%20%20%2F%2FsoundSprite%2Ename%20%3D%20source%2Esplit%28%22%2F%22%29%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%2F%2FAssign%20the%20sound%20as%20a%20property%20of%20the%20assets%20object%20so%0A%20%20%20%20%20%20%20%20%2F%2Fwe%20can%20access%20it%20like%20this%3A%20%60assets%5B%22sounds%2Fsound%2Emp3%22%5D%60%2E%0A%20%20%20%20%20%20%20%20self%5BsoundSprite%2Ename%5D%20%3D%20soundSprite%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FDisplay%20a%20message%20if%20the%20file%20type%20isn%27t%20recognized%2E%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20console%2Elog%28%22File%20type%20not%20recognized%3A%20%22%20%2B%20source%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%2C%0A%0A%20%20%2F%2F%23%23%23%23%20loadHandler%0A%20%20%2F%2FThe%20%60loadHandler%60%20will%20be%20called%20each%20time%20an%20asset%20finishes%20loading%2E%0A%20%20loadHandler%3A%20function%20%28%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20self%2Eloaded%20%2B%3D%201%3B%0A%20%20%20%20console%2Elog%28self%2Eloaded%29%3B%0A%0A%20%20%20%20%2F%2FCheck%20whether%20everything%20has%20loaded%2E%0A%20%20%20%20if%20%28self%2EtoLoad%20%3D%3D%3D%20self%2Eloaded%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FIf%20it%20has%2C%20run%20the%20callback%20function%20that%20was%20assigned%20to%20the%20%60whenLoaded%60%20property%0A%20%20%20%20%20%20console%2Elog%28%22Sounds%20finished%20loading%22%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReset%20%60loaded%60%20and%20%60toLoaded%60%20so%20we%20can%20load%20more%20assets%0A%20%20%20%20%20%20%2F%2Flater%20if%20we%20want%20to%2E%0A%20%20%20%20%20%20self%2EtoLoad%20%3D%200%3B%0A%20%20%20%20%20%20self%2Eloaded%20%3D%200%3B%0A%20%20%20%20%20%20self%2EwhenLoaded%28%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%3B%0A%0A%2F%2A%0AmakeSound%0A%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%0A%60makeSound%60%20is%20the%20function%20you%20want%20to%20use%20to%20load%20and%20play%20sound%20files%2E%0AIt%20creates%20and%20returns%20and%20WebAudio%20sound%20object%20with%20lots%20of%20useful%20methods%20you%20can%0Ause%20to%20control%20the%20sound%2E%20%0AYou%20can%20use%20it%20to%20load%20a%20sound%20like%20this%3A%0A%0A%20%20%20%20var%20anySound%20%3D%20makeSound%28%22sounds%2FanySound%2Emp3%22%2C%20loadHandler%29%3B%0A%0A%0AThe%20code%20above%20will%20load%20the%20sound%20and%20then%20call%20the%20%60loadHandler%60%0Awhen%20the%20sound%20has%20finished%20loading%2E%20%0A%28However%2C%20it%27s%20more%20convenient%20to%20load%20the%20sound%20file%20using%20%0Athe%20%60sounds%2Eload%60%20method%20described%20above%2C%20so%20I%20don%27t%20recommend%20loading%20sounds%0Alike%20this%20unless%20you%20need%20more%20low%2Dlevel%20control%2E%29%0A%0AAfter%20the%20sound%20has%20been%20loaded%20you%20can%20access%20and%20use%20it%20like%20this%3A%0A%0A%20%20%20%20function%20loadHandler%28%29%20%7B%0A%20%20%20%20%20%20anySound%2Eloop%20%3D%20true%3B%0A%20%20%20%20%20%20anySound%2Epan%20%3D%200%2E8%3B%0A%20%20%20%20%20%20anySound%2Evolume%20%3D%200%2E5%3B%0A%20%20%20%20%20%20anySound%2Eplay%28%29%3B%0A%20%20%20%20%20%20anySound%2Epause%28%29%3B%0A%20%20%20%20%20%20anySound%2EplayFrom%28second%29%3B%0A%20%20%20%20%20%20anySound%2Erestart%28%29%3B%0A%20%20%20%20%20%20anySound%2EsetReverb%282%2C%202%2C%20false%29%3B%0A%20%20%20%20%20%20anySound%2EsetEcho%280%2E2%2C%200%2E2%2C%200%29%3B%0A%20%20%20%20%20%20anySound%2EplaybackRate%20%3D%200%2E5%3B%0A%20%20%20%20%7D%0A%20%20%20%0AFor%20advanced%20configurations%2C%20you%20can%20optionally%20supply%20%60makeSound%60%20with%20optional%203rd%20and%20%0A4th%20arguments%3A%0A%0A%20%20%20var%20anySound%20%3D%20makeSound%28source%2C%20loadHandler%2C%20loadTheSound%3F%2C%20xhrObject%29%3B%0A%0A%60loadTheSound%3F%60%20is%20a%20Boolean%20%28true%2Ffalse%29%20value%20that%2C%20if%20%60false%60%20prevents%20the%20sound%20file%0Afrom%20being%20loaded%2E%20You%20would%20only%20want%20to%20set%20it%20to%20%60false%60%20like%20this%20if%20you%20were%0Ausing%20another%20file%20loading%20library%20to%20load%20the%20sound%2C%20and%20didn%27t%20want%20it%20to%20be%20loaded%0Atwice%2E%0A%0A%60xhrObject%60%2C%20the%20optional%204th%20argument%2C%20is%20the%20XHR%20object%20that%20was%20used%20to%20load%20the%20sound%2E%20Again%2C%20you%20%0Awould%20only%20supply%20this%20if%20you%20were%20using%20another%20file%20loading%20library%20to%20load%20the%20sound%2C%0Aand%20that%20library%20had%20generated%20its%20own%20XHR%20object%2E%20If%20you%20supply%20the%20%60xhr%60%20argument%2C%20%60makeSound%60%0Awill%20skip%20the%20file%20loading%20step%20%28because%20you%27ve%20already%20done%20that%29%2C%20but%20still%20decode%20the%20audio%20buffer%20for%20you%2E%0A%28If%20you%20are%20loading%20the%20sound%20file%20using%20another%20file%20loading%20library%2C%20make%20sure%20that%20your%20sound%0Afiles%20are%20loaded%20with%20the%20XHR%20%60responseType%20%3D%20%22arraybuffer%22%60%20option%2E%29%0A%0AFor%20example%2C%20here%27s%20how%20you%20could%20use%20this%20advanced%20configuration%20to%20decode%20a%20sound%20that%20you%27ve%20already%20loaded%0Ausing%20your%20own%20custom%20loading%20system%3A%0A%0A%20%20%20var%20soundSprite%20%3D%20makeSound%28source%2C%20decodeHandler%2Ebind%28this%29%2C%20false%2C%20xhr%29%3B%0A%0AWhen%20the%20file%20has%20finished%20being%20decoded%2C%20your%20custom%20%60decodeHandler%60%20will%20run%2C%20which%20tells%20you%0Athat%20the%20file%20has%20finished%20decoding%2E%0A%0AIf%20you%27re%20creating%20more%20than%20one%20sound%20like%20this%2C%20use%20counter%20variables%20to%20track%20the%20number%20of%20sounds%0Ayou%20need%20to%20decode%2C%20and%20the%20number%20of%20sounds%20that%20have%20been%20decoded%2E%20When%20both%20sets%20of%20counters%20are%20the%0Asame%2C%20you%27ll%20know%20that%20all%20your%20sound%20files%20have%20finished%20decoding%20and%20you%20can%20proceed%20with%20the%20rest%0Aof%20you%20application%2E%20%28The%20%5BHexi%20game%20engine%5D%28https%3A%2F%2Fgithub%2Ecom%2Fkittykatattack%2Fhexi%29%20uses%20%60makeSound%60%20in%20this%20way%2E%29%0A%0A%2A%2F%0A%0Afunction%20makeSound%28source%2C%20loadHandler%2C%20loadSound%2C%20xhr%29%20%7B%0A%0A%20%20%2F%2FThe%20sound%20object%20that%20this%20function%20returns%2E%0A%20%20var%20o%20%3D%20%7B%7D%3B%0A%0A%20%20%2F%2FSet%20the%20default%20properties%2E%0A%20%20o%2EvolumeNode%20%3D%20actx%2EcreateGain%28%29%3B%0A%0A%20%20%2F%2FCreate%20the%20pan%20node%20using%20the%20efficient%20%60createStereoPanner%60%0A%20%20%2F%2Fmethod%2C%20if%20it%27s%20available%2E%0A%20%20if%20%28%21actx%2EcreateStereoPanner%29%20%7B%0A%20%20%20%20o%2EpanNode%20%3D%20actx%2EcreatePanner%28%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20o%2EpanNode%20%3D%20actx%2EcreateStereoPanner%28%29%3B%0A%20%20%7D%0A%20%20o%2EdelayNode%20%3D%20actx%2EcreateDelay%28%29%3B%0A%20%20o%2EfeedbackNode%20%3D%20actx%2EcreateGain%28%29%3B%0A%20%20o%2EfilterNode%20%3D%20actx%2EcreateBiquadFilter%28%29%3B%0A%20%20o%2EconvolverNode%20%3D%20actx%2EcreateConvolver%28%29%3B%0A%20%20o%2EsoundNode%20%3D%20null%3B%0A%20%20o%2Ebuffer%20%3D%20null%3B%0A%20%20o%2Esource%20%3D%20source%3B%0A%20%20o%2Eloop%20%3D%20false%3B%0A%20%20o%2Eplaying%20%3D%20false%3B%0A%0A%20%20%2F%2FThe%20function%20that%20should%20run%20when%20the%20sound%20is%20loaded%2E%0A%20%20o%2EloadHandler%20%3D%20undefined%3B%0A%0A%20%20%2F%2FValues%20for%20the%20%60pan%60%20and%20%60volume%60%20getters%2Fsetters%2E%0A%20%20o%2EpanValue%20%3D%200%3B%0A%20%20o%2EvolumeValue%20%3D%201%3B%0A%0A%20%20%2F%2FValues%20to%20help%20track%20and%20set%20the%20start%20and%20pause%20times%2E%0A%20%20o%2EstartTime%20%3D%200%3B%0A%20%20o%2EstartOffset%20%3D%200%3B%0A%0A%20%20%2F%2FSet%20the%20playback%20rate%2E%0A%20%20o%2EplaybackRate%20%3D%201%3B%0A%0A%20%20%2F%2FEcho%20properties%2E%0A%20%20o%2Eecho%20%3D%20false%3B%0A%20%20o%2EdelayValue%20%3D%200%2E3%3B%0A%20%20o%2EfeebackValue%20%3D%200%2E3%3B%0A%20%20o%2EfilterValue%20%3D%200%3B%0A%0A%20%20%2F%2FReverb%20properties%0A%20%20o%2Ereverb%20%3D%20false%3B%0A%20%20o%2EreverbImpulse%20%3D%20null%3B%0A%20%20%0A%20%20%2F%2FThe%20sound%20object%27s%20methods%2E%0A%20%20o%2Eplay%20%3D%20function%28%29%20%7B%0A%0A%20%20%20%20%2F%2FSet%20the%20start%20time%20%28it%20will%20be%20%600%60%20when%20the%20sound%0A%20%20%20%20%2F%2Ffirst%20starts%2E%0A%20%20%20%20o%2EstartTime%20%3D%20actx%2EcurrentTime%3B%0A%0A%20%20%20%20%2F%2FCreate%20a%20sound%20node%2E%0A%20%20%20%20o%2EsoundNode%20%3D%20actx%2EcreateBufferSource%28%29%3B%0A%0A%20%20%20%20%2F%2FSet%20the%20sound%20node%27s%20buffer%20property%20to%20the%20loaded%20sound%2E%0A%20%20%20%20o%2EsoundNode%2Ebuffer%20%3D%20o%2Ebuffer%3B%0A%0A%20%20%20%20%2F%2FSet%20the%20playback%20rate%0A%20%20%20%20o%2EsoundNode%2EplaybackRate%2Evalue%20%3D%20this%2EplaybackRate%3B%0A%0A%20%20%20%20%2F%2FConnect%20the%20sound%20to%20the%20pan%2C%20connect%20the%20pan%20to%20the%0A%20%20%20%20%2F%2Fvolume%2C%20and%20connect%20the%20volume%20to%20the%20destination%2E%0A%20%20%20%20o%2EsoundNode%2Econnect%28o%2EvolumeNode%29%3B%0A%0A%20%20%20%20%2F%2FIf%20there%27s%20no%20reverb%2C%20bypass%20the%20convolverNode%0A%20%20%20%20if%20%28o%2Ereverb%20%3D%3D%3D%20false%29%20%7B%0A%20%20%20%20%20%20o%2EvolumeNode%2Econnect%28o%2EpanNode%29%3B%0A%20%20%20%20%7D%20%0A%0A%20%20%20%20%2F%2FIf%20there%20is%20reverb%2C%20connect%20the%20%60convolverNode%60%20and%20apply%0A%20%20%20%20%2F%2Fthe%20impulse%20response%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20o%2EvolumeNode%2Econnect%28o%2EconvolverNode%29%3B%0A%20%20%20%20%20%20o%2EconvolverNode%2Econnect%28o%2EpanNode%29%3B%0A%20%20%20%20%20%20o%2EconvolverNode%2Ebuffer%20%3D%20o%2EreverbImpulse%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2FConnect%20the%20%60panNode%60%20to%20the%20destination%20to%20complete%20the%20chain%2E%0A%20%20%20%20o%2EpanNode%2Econnect%28actx%2Edestination%29%3B%0A%0A%20%20%20%20%2F%2FAdd%20optional%20echo%2E%0A%20%20%20%20if%20%28o%2Eecho%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FSet%20the%20values%2E%0A%20%20%20%20%20%20o%2EfeedbackNode%2Egain%2Evalue%20%3D%20o%2EfeebackValue%3B%0A%20%20%20%20%20%20o%2EdelayNode%2EdelayTime%2Evalue%20%3D%20o%2EdelayValue%3B%0A%20%20%20%20%20%20o%2EfilterNode%2Efrequency%2Evalue%20%3D%20o%2EfilterValue%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20delay%20loop%2C%20with%20optional%20filtering%2E%0A%20%20%20%20%20%20o%2EdelayNode%2Econnect%28o%2EfeedbackNode%29%3B%0A%20%20%20%20%20%20if%20%28o%2EfilterValue%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20o%2EfeedbackNode%2Econnect%28o%2EfilterNode%29%3B%0A%20%20%20%20%20%20%20%20o%2EfilterNode%2Econnect%28o%2EdelayNode%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20o%2EfeedbackNode%2Econnect%28o%2EdelayNode%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FCapture%20the%20sound%20from%20the%20main%20node%20chain%2C%20send%20it%20to%20the%0A%20%20%20%20%20%20%2F%2Fdelay%20loop%2C%20and%20send%20the%20final%20echo%20effect%20to%20the%20%60panNode%60%20which%0A%20%20%20%20%20%20%2F%2Fwill%20then%20route%20it%20to%20the%20destination%2E%0A%20%20%20%20%20%20o%2EvolumeNode%2Econnect%28o%2EdelayNode%29%3B%0A%20%20%20%20%20%20o%2EdelayNode%2Econnect%28o%2EpanNode%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FWill%20the%20sound%20loop%3F%20This%20can%20be%20%60true%60%20or%20%60false%60%2E%0A%20%20%20%20o%2EsoundNode%2Eloop%20%3D%20o%2Eloop%3B%0A%0A%20%20%20%20%2F%2FFinally%2C%20use%20the%20%60start%60%20method%20to%20play%20the%20sound%2E%0A%20%20%20%20%2F%2FThe%20start%20time%20will%20either%20be%20%600%60%2C%0A%20%20%20%20%2F%2For%20a%20later%20time%20if%20the%20sound%20was%20paused%2E%0A%20%20%20%20o%2EsoundNode%2Estart%28%0A%20%20%20%20%20%200%2C%20o%2EstartOffset%20%25%20o%2Ebuffer%2Eduration%0A%20%20%20%20%29%3B%0A%0A%20%20%20%20%2F%2FSet%20%60playing%60%20to%20%60true%60%20to%20help%20control%20the%0A%20%20%20%20%2F%2F%60pause%60%20and%20%60restart%60%20methods%2E%0A%20%20%20%20o%2Eplaying%20%3D%20true%3B%0A%20%20%7D%3B%0A%0A%20%20o%2Epause%20%3D%20function%28%29%20%7B%0A%20%20%20%20%2F%2FPause%20the%20sound%20if%20it%27s%20playing%2C%20and%20calculate%20the%0A%20%20%20%20%2F%2F%60startOffset%60%20to%20save%20the%20current%20position%2E%0A%20%20%20%20if%20%28o%2Eplaying%29%20%7B%0A%20%20%20%20%20%20o%2EsoundNode%2Estop%280%29%3B%0A%20%20%20%20%20%20o%2EstartOffset%20%2B%3D%20actx%2EcurrentTime%20%2D%20o%2EstartTime%3B%0A%20%20%20%20%20%20o%2Eplaying%20%3D%20false%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20o%2Erestart%20%3D%20function%28%29%20%7B%0A%20%20%20%20%2F%2FStop%20the%20sound%20if%20it%27s%20playing%2C%20reset%20the%20start%20and%20offset%20times%2C%0A%20%20%20%20%2F%2Fthen%20call%20the%20%60play%60%20method%20again%2E%0A%20%20%20%20if%20%28o%2Eplaying%29%20%7B%0A%20%20%20%20%20%20o%2EsoundNode%2Estop%280%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20o%2EstartOffset%20%3D%200%3B%0A%20%20%20%20o%2Eplay%28%29%3B%0A%20%20%7D%3B%0A%0A%20%20o%2EplayFrom%20%3D%20function%28value%29%20%7B%0A%20%20%20%20if%20%28o%2Eplaying%29%20%7B%0A%20%20%20%20%20%20o%2EsoundNode%2Estop%280%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20o%2EstartOffset%20%3D%20value%3B%0A%20%20%20%20o%2Eplay%28%29%3B%0A%20%20%7D%3B%0A%0A%20%20o%2EsetEcho%20%3D%20function%28delayValue%2C%20feedbackValue%2C%20filterValue%29%20%7B%0A%20%20%20%20if%20%28delayValue%20%3D%3D%3D%20undefined%29%20delayValue%20%3D%200%2E3%3B%0A%20%20%20%20if%20%28feedbackValue%20%3D%3D%3D%20undefined%29%20feedbackValue%20%3D%200%2E3%3B%0A%20%20%20%20if%20%28filterValue%20%3D%3D%3D%20undefined%29%20filterValue%20%3D%200%3B%0A%20%20%20%20o%2EdelayValue%20%3D%20delayValue%3B%0A%20%20%20%20o%2EfeebackValue%20%3D%20feedbackValue%3B%0A%20%20%20%20o%2EfilterValue%20%3D%20filterValue%3B%0A%20%20%20%20o%2Eecho%20%3D%20true%3B%0A%20%20%7D%3B%0A%0A%20%20o%2EsetReverb%20%3D%20function%28duration%2C%20decay%2C%20reverse%29%20%7B%0A%20%20%20%20if%20%28duration%20%3D%3D%3D%20undefined%29%20duration%20%3D%202%3B%0A%20%20%20%20if%20%28decay%20%3D%3D%3D%20undefined%29%20decay%20%3D%202%3B%0A%20%20%20%20if%20%28reverse%20%3D%3D%3D%20undefined%29%20reverse%20%3D%20false%3B%0A%20%20%20%20o%2EreverbImpulse%20%3D%20impulseResponse%28duration%2C%20decay%2C%20reverse%2C%20actx%29%3B%0A%20%20%20%20o%2Ereverb%20%3D%20true%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2FA%20general%20purpose%20%60fade%60%20method%20for%20fading%20sounds%20in%20or%20out%2E%0A%20%20%2F%2FThe%20first%20argument%20is%20the%20volume%20that%20the%20sound%20should%0A%20%20%2F%2Ffade%20to%2C%20and%20the%20second%20value%20is%20the%20duration%2C%20in%20seconds%2C%0A%20%20%2F%2Fthat%20the%20fade%20should%20last%2E%0A%20%20o%2Efade%20%3D%20function%28endValue%2C%20durationInSeconds%29%20%7B%0A%20%20%20%20if%20%28o%2Eplaying%29%20%7B%0A%20%20%20%20%20%20o%2EvolumeNode%2Egain%2ElinearRampToValueAtTime%28%0A%20%20%20%20%20%20%20%20o%2EvolumeNode%2Egain%2Evalue%2C%20actx%2EcurrentTime%0A%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20o%2EvolumeNode%2Egain%2ElinearRampToValueAtTime%28%0A%20%20%20%20%20%20%20%20endValue%2C%20actx%2EcurrentTime%20%2B%20durationInSeconds%0A%20%20%20%20%20%20%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2FFade%20a%20sound%20in%2C%20from%20an%20initial%20volume%20level%20of%20zero%2E%0A%20%20o%2EfadeIn%20%3D%20function%28durationInSeconds%29%20%7B%0A%20%20%20%20%0A%20%20%20%20%2F%2FSet%20the%20volume%20to%200%20so%20that%20you%20can%20fade%0A%20%20%20%20%2F%2Fin%20from%20silence%0A%20%20%20%20o%2EvolumeNode%2Egain%2Evalue%20%3D%200%3B%0A%20%20%20%20o%2Efade%281%2C%20durationInSeconds%29%3B%0A%20%20%0A%20%20%7D%3B%0A%0A%20%20%2F%2FFade%20a%20sound%20out%2C%20from%20its%20current%20volume%20level%20to%20zero%2E%0A%20%20o%2EfadeOut%20%3D%20function%28durationInSeconds%29%20%7B%0A%20%20%20%20o%2Efade%280%2C%20durationInSeconds%29%3B%0A%20%20%7D%3B%0A%20%20%0A%20%20%2F%2FVolume%20and%20pan%20getters%2Fsetters%2E%0A%20%20Object%2EdefineProperties%28o%2C%20%7B%0A%20%20%20%20volume%3A%20%7B%0A%20%20%20%20%20%20get%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20o%2EvolumeValue%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20set%3A%20function%28value%29%20%7B%0A%20%20%20%20%20%20%20%20o%2EvolumeNode%2Egain%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20o%2EvolumeValue%20%3D%20value%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2FThe%20pan%20node%20uses%20the%20high%2Defficiency%20stereo%20panner%2C%20if%20it%27s%0A%20%20%20%20%2F%2Favailable%2E%20But%2C%20because%20this%20is%20a%20new%20addition%20to%20the%20%0A%20%20%20%20%2F%2FWebAudio%20spec%2C%20it%20might%20not%20be%20available%20on%20all%20browsers%2E%0A%20%20%20%20%2F%2FSo%20the%20code%20checks%20for%20this%20and%20uses%20the%20older%203D%20panner%0A%20%20%20%20%2F%2Fif%202D%20isn%27t%20available%2E%0A%20%20%20%20pan%3A%20%7B%0A%20%20%20%20%20%20get%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21actx%2EcreateStereoPanner%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20o%2EpanValue%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20o%2EpanNode%2Epan%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20set%3A%20function%28value%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21actx%2EcreateStereoPanner%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2FPanner%20objects%20accept%20x%2C%20y%20and%20z%20coordinates%20for%203D%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fsound%2E%20However%2C%20because%20we%27re%20only%20doing%202D%20left%2Fright%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fpanning%20we%27re%20only%20interested%20in%20the%20x%20coordinate%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20first%20one%2E%20However%2C%20for%20a%20natural%20effect%2C%20the%20z%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fvalue%20also%20has%20to%20be%20set%20proportionately%2E%0A%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20z%20%3D%201%20%2D%20Math%2Eabs%28x%29%3B%0A%20%20%20%20%20%20%20%20%20%20o%2EpanNode%2EsetPosition%28x%2C%20y%2C%20z%29%3B%0A%20%20%20%20%20%20%20%20%20%20o%2EpanValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%2EpanNode%2Epan%2Evalue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%7D%0A%20%20%7D%29%3B%0A%0A%20%20%2F%2FOptionally%20Load%20and%20decode%20the%20sound%2E%0A%20%20if%20%28loadSound%29%20%7B%0A%20%20%20%20this%2EloadSound%28o%2C%20source%2C%20loadHandler%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2FOptionally%2C%20if%20you%27ve%20loaded%20the%20sound%20using%20some%20other%20loader%2C%20just%20decode%20the%20sound%0A%20%20if%20%28xhr%29%20%7B%0A%20%20%20%20this%2EdecodeAudio%28o%2C%20xhr%2C%20loadHandler%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2FReturn%20the%20sound%20object%2E%0A%20%20return%20o%3B%0A%7D%0A%0A%2F%2FThe%20%60loadSound%60%20function%20loads%20the%20sound%20file%20using%20XHR%0Afunction%20loadSound%28o%2C%20source%2C%20loadHandler%29%20%7B%0A%20%20var%20xhr%20%3D%20new%20XMLHttpRequest%28%29%3B%0A%0A%20%20%2F%2FUse%20xhr%20to%20load%20the%20sound%20file%2E%0A%20%20xhr%2Eopen%28%22GET%22%2C%20source%2C%20true%29%3B%0A%20%20xhr%2EresponseType%20%3D%20%22arraybuffer%22%3B%0A%0A%20%20%2F%2FWhen%20the%20sound%20has%20finished%20loading%2C%20decode%20it%20using%20the%0A%20%20%2F%2F%60decodeAudio%60%20function%20%28which%20you%27ll%20see%20ahead%29%0A%20%20xhr%2EaddEventListener%28%22load%22%2C%20decodeAudio%2Ebind%28this%2C%20o%2C%20xhr%2C%20loadHandler%29%29%3B%20%0A%0A%20%20%2F%2FSend%20the%20request%20to%20load%20the%20file%2E%0A%20%20xhr%2Esend%28%29%3B%0A%7D%0A%0A%2F%2FThe%20%60decodeAudio%60%20function%20decodes%20the%20audio%20file%20for%20you%20and%20%0A%2F%2Flaunches%20the%20%60loadHandler%60%20when%20it%27s%20done%0Afunction%20decodeAudio%28o%2C%20xhr%2C%20loadHandler%29%20%7B%0A%0A%20%20%2F%2FDecode%20the%20sound%20and%20store%20a%20reference%20to%20the%20buffer%2E%0A%20%20actx%2EdecodeAudioData%28%0A%20%20%20%20xhr%2Eresponse%2C%0A%20%20%20%20function%28buffer%29%20%7B%0A%20%20%20%20%20%20o%2Ebuffer%20%3D%20buffer%3B%0A%20%20%20%20%20%20o%2EhasLoaded%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%2F%2FThis%20next%20bit%20is%20optional%2C%20but%20important%2E%0A%20%20%20%20%20%20%2F%2FIf%20you%20have%20a%20load%20manager%20in%20your%20game%2C%20call%20it%20here%20so%20that%0A%20%20%20%20%20%20%2F%2Fthe%20sound%20is%20registered%20as%20having%20loaded%2E%0A%20%20%20%20%20%20if%20%28loadHandler%29%20%7B%0A%20%20%20%20%20%20%20%20loadHandler%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2FThrow%20an%20error%20if%20the%20sound%20can%27t%20be%20decoded%2E%0A%20%20%20%20function%28error%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Audio%20could%20not%20be%20decoded%3A%20%22%20%2B%20error%29%3B%0A%20%20%20%20%7D%0A%20%20%29%3B%0A%7D%0A%0A%0A%2F%2A%0AsoundEffect%0A%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%0AThe%20%60soundEffect%60%20function%20let%27s%20you%20generate%20your%20sounds%20and%20musical%20notes%20from%20scratch%0A%28Reverb%20effect%20requires%20the%20%60impulseResponse%60%20function%20that%20you%27ll%20see%20further%20ahead%20in%20this%20file%29%0A%0ATo%20create%20a%20custom%20sound%20effect%2C%20define%20all%20the%20parameters%20that%20characterize%20your%20sound%2E%20Here%27s%20how%20to%0Acreate%20a%20laser%20shooting%20sound%3A%0A%0A%20%20%20%20soundEffect%28%0A%20%20%20%20%20%201046%2E5%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2Ffrequency%0A%20%20%20%20%20%200%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fattack%0A%20%20%20%20%20%200%2E3%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fdecay%0A%20%20%20%20%20%20%22sawtooth%22%2C%20%20%20%20%20%20%20%2F%2Fwaveform%0A%20%20%20%20%20%201%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FVolume%0A%20%20%20%20%20%20%2D0%2E8%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fpan%0A%20%20%20%20%20%200%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fwait%20before%20playing%0A%20%20%20%20%20%201200%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fpitch%20bend%20amount%0A%20%20%20%20%20%20false%2C%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Freverse%20bend%0A%20%20%20%20%20%200%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Frandom%20pitch%20range%0A%20%20%20%20%20%2025%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fdissonance%0A%20%20%20%20%20%20%5B0%2E2%2C%200%2E2%2C%202000%5D%2C%20%2F%2Fecho%3A%20%5Bdelay%2C%20feedback%2C%20filter%5D%0A%20%20%20%20%20%20undefined%20%20%20%20%20%20%20%20%20%2F%2Freverb%3A%20%5Bduration%2C%20decay%2C%20reverse%3F%5D%0A%20%20%20%20%20%203%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMaximum%20duration%20of%20sound%2C%20in%20seconds%0A%20%20%20%20%29%3B%0A%0AExperiment%20by%20changing%20these%20parameters%20to%20see%20what%20kinds%20of%20effects%20you%20can%20create%2C%20and%20build%0Ayour%20own%20library%20of%20custom%20sound%20effects%20for%20games%2E%0A%2A%2F%0A%0Afunction%20soundEffect%28%0A%20%20frequencyValue%2C%20%20%20%20%20%20%2F%2FThe%20sound%27s%20fequency%20pitch%20in%20Hertz%0A%20%20attack%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20time%2C%20in%20seconds%2C%20to%20fade%20the%20sound%20in%0A%20%20decay%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20time%2C%20in%20seconds%2C%20to%20fade%20the%20sound%20out%0A%20%20type%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fwaveform%20type%3A%20%22sine%22%2C%20%22triangle%22%2C%20%22square%22%2C%20%22sawtooth%22%0A%20%20volumeValue%2C%20%20%20%20%20%20%20%20%20%2F%2FThe%20sound%27s%20maximum%20volume%0A%20%20panValue%2C%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20speaker%20pan%2E%20left%3A%20%2D1%2C%20middle%3A%200%2C%20right%3A%201%0A%20%20wait%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20time%2C%20in%20seconds%2C%20to%20wait%20before%20playing%20the%20sound%0A%20%20pitchBendAmount%2C%20%20%20%20%20%2F%2FThe%20number%20of%20Hz%20in%20which%20to%20bend%20the%20sound%27s%20pitch%20down%0A%20%20reverse%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20%60reverse%60%20is%20true%20the%20pitch%20will%20bend%20up%0A%20%20randomValue%2C%20%20%20%20%20%20%20%20%20%2F%2FA%20range%2C%20in%20Hz%2C%20within%20which%20to%20randomize%20the%20pitch%0A%20%20dissonance%2C%20%20%20%20%20%20%20%20%20%20%2F%2FA%20value%20in%20Hz%2E%20It%20creates%202%20dissonant%20frequencies%20above%20and%20below%20the%20target%20pitch%0A%20%20echo%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FAn%20array%3A%20%5BdelayTimeInSeconds%2C%20feedbackTimeInSeconds%2C%20filterValueInHz%5D%0A%20%20reverb%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FAn%20array%3A%20%5BdurationInSeconds%2C%20decayRateInSeconds%2C%20reverse%5D%0A%20%20timeout%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FA%20number%2C%20in%20seconds%2C%20which%20is%20the%20maximum%20duration%20for%20sound%20effects%0A%29%20%7B%0A%0A%20%20%2F%2FSet%20the%20default%20values%0A%20%20if%20%28frequencyValue%20%3D%3D%3D%20undefined%29%20frequencyValue%20%3D%20200%3B%0A%20%20if%20%28attack%20%3D%3D%3D%20undefined%29%20attack%20%3D%200%3B%0A%20%20if%20%28decay%20%3D%3D%3D%20undefined%29%20decay%20%3D%201%3B%0A%20%20if%20%28type%20%3D%3D%3D%20undefined%29%20type%20%3D%20%22sine%22%3B%0A%20%20if%20%28volumeValue%20%3D%3D%3D%20undefined%29%20volumeValue%20%3D%201%3B%0A%20%20if%20%28panValue%20%3D%3D%3D%20undefined%29%20panValue%20%3D%200%3B%0A%20%20if%20%28wait%20%3D%3D%3D%20undefined%29%20wait%20%3D%200%3B%0A%20%20if%20%28pitchBendAmount%20%3D%3D%3D%20undefined%29%20pitchBendAmount%20%3D%200%3B%0A%20%20if%20%28reverse%20%3D%3D%3D%20undefined%29%20reverse%20%3D%20false%3B%0A%20%20if%20%28randomValue%20%3D%3D%3D%20undefined%29%20randomValue%20%3D%200%3B%0A%20%20if%20%28dissonance%20%3D%3D%3D%20undefined%29%20dissonance%20%3D%200%3B%0A%20%20if%20%28echo%20%3D%3D%3D%20undefined%29%20echo%20%3D%20undefined%3B%0A%20%20if%20%28reverb%20%3D%3D%3D%20undefined%29%20reverb%20%3D%20undefined%3B%0A%20%20if%20%28timeout%20%3D%3D%3D%20undefined%29%20timeout%20%3D%20undefined%3B%0A%0A%20%20%2F%2FCreate%20an%20oscillator%2C%20gain%20and%20pan%20nodes%2C%20and%20connect%20them%0A%20%20%2F%2Ftogether%20to%20the%20destination%0A%20%20var%20oscillator%2C%20volume%2C%20pan%3B%0A%20%20oscillator%20%3D%20actx%2EcreateOscillator%28%29%3B%0A%20%20volume%20%3D%20actx%2EcreateGain%28%29%3B%0A%20%20if%20%28%21actx%2EcreateStereoPanner%29%20%7B%0A%20%20%20%20pan%20%3D%20actx%2EcreatePanner%28%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20pan%20%3D%20actx%2EcreateStereoPanner%28%29%3B%0A%20%20%7D%0A%20%20oscillator%2Econnect%28volume%29%3B%0A%20%20volume%2Econnect%28pan%29%3B%0A%20%20pan%2Econnect%28actx%2Edestination%29%3B%0A%0A%20%20%2F%2FSet%20the%20supplied%20values%0A%20%20volume%2Egain%2Evalue%20%3D%20volumeValue%3B%0A%20%20if%20%28%21actx%2EcreateStereoPanner%29%20%7B%0A%20%20%20%20pan%2EsetPosition%28panValue%2C%200%2C%201%20%2D%20Math%2Eabs%28panValue%29%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20pan%2Epan%2Evalue%20%3D%20panValue%3B%20%0A%20%20%7D%0A%20%20oscillator%2Etype%20%3D%20type%3B%0A%0A%20%20%2F%2FOptionally%20randomize%20the%20pitch%2E%20If%20the%20%60randomValue%60%20is%20greater%0A%20%20%2F%2Fthan%20zero%2C%20a%20random%20pitch%20is%20selected%20that%27s%20within%20the%20range%0A%20%20%2F%2Fspecified%20by%20%60frequencyValue%60%2E%20The%20random%20pitch%20will%20be%20either%0A%20%20%2F%2Fabove%20or%20below%20the%20target%20frequency%2E%0A%20%20var%20frequency%3B%0A%20%20var%20randomInt%20%3D%20function%28min%2C%20max%29%7B%0A%20%20%20%20return%20Math%2Efloor%28Math%2Erandom%28%29%20%2A%20%28max%20%2D%20min%20%2B%201%29%29%20%2B%20min%0A%20%20%7D%3B%0A%20%20if%20%28randomValue%20%3E%200%29%20%7B%0A%20%20%20%20frequency%20%3D%20randomInt%28%0A%20%20%20%20%20%20frequencyValue%20%2D%20randomValue%20%2F%202%2C%0A%20%20%20%20%20%20frequencyValue%20%2B%20randomValue%20%2F%202%0A%20%20%20%20%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20frequency%20%3D%20frequencyValue%3B%0A%20%20%7D%0A%20%20oscillator%2Efrequency%2Evalue%20%3D%20frequency%3B%0A%0A%20%20%2F%2FApply%20effects%0A%20%20if%20%28attack%20%3E%200%29%20fadeIn%28volume%29%3B%0A%20%20fadeOut%28volume%29%3B%0A%20%20if%20%28pitchBendAmount%20%3E%200%29%20pitchBend%28oscillator%29%3B%0A%20%20if%20%28echo%29%20addEcho%28volume%29%3B%0A%20%20if%20%28reverb%29%20addReverb%28volume%29%3B%0A%20%20if%20%28dissonance%20%3E%200%29%20addDissonance%28%29%3B%0A%0A%20%20%2F%2FPlay%20the%20sound%0A%20%20play%28oscillator%29%3B%0A%0A%20%20%2F%2FThe%20helper%20functions%3A%0A%20%20%0A%20%20function%20addReverb%28volumeNode%29%20%7B%0A%20%20%20%20var%20convolver%20%3D%20actx%2EcreateConvolver%28%29%3B%0A%20%20%20%20convolver%2Ebuffer%20%3D%20impulseResponse%28reverb%5B0%5D%2C%20reverb%5B1%5D%2C%20reverb%5B2%5D%2C%20actx%29%3B%0A%20%20%20%20volumeNode%2Econnect%28convolver%29%3B%0A%20%20%20%20convolver%2Econnect%28pan%29%3B%0A%20%20%7D%0A%0A%20%20function%20addEcho%28volumeNode%29%20%7B%0A%0A%20%20%20%20%2F%2FCreate%20the%20nodes%0A%20%20%20%20var%20feedback%20%3D%20actx%2EcreateGain%28%29%2C%0A%20%20%20%20%20%20%20%20delay%20%3D%20actx%2EcreateDelay%28%29%2C%0A%20%20%20%20%20%20%20%20filter%20%3D%20actx%2EcreateBiquadFilter%28%29%3B%0A%0A%20%20%20%20%2F%2FSet%20their%20values%20%28delay%20time%2C%20feedback%20time%20and%20filter%20frequency%29%0A%20%20%20%20delay%2EdelayTime%2Evalue%20%3D%20echo%5B0%5D%3B%0A%20%20%20%20feedback%2Egain%2Evalue%20%3D%20echo%5B1%5D%3B%0A%20%20%20%20if%20%28echo%5B2%5D%29%20filter%2Efrequency%2Evalue%20%3D%20echo%5B2%5D%3B%0A%0A%20%20%20%20%2F%2FCreate%20the%20delay%20feedback%20loop%2C%20with%0A%20%20%20%20%2F%2Foptional%20filtering%0A%20%20%20%20delay%2Econnect%28feedback%29%3B%0A%20%20%20%20if%20%28echo%5B2%5D%29%20%7B%0A%20%20%20%20%20%20feedback%2Econnect%28filter%29%3B%0A%20%20%20%20%20%20filter%2Econnect%28delay%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20feedback%2Econnect%28delay%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FConnect%20the%20delay%20loop%20to%20the%20oscillator%27s%20volume%0A%20%20%20%20%2F%2Fnode%2C%20and%20then%20to%20the%20destination%0A%20%20%20%20volumeNode%2Econnect%28delay%29%3B%0A%0A%20%20%20%20%2F%2FConnect%20the%20delay%20loop%20to%20the%20main%20sound%20chain%27s%0A%20%20%20%20%2F%2Fpan%20node%2C%20so%20that%20the%20echo%20effect%20is%20directed%20to%0A%20%20%20%20%2F%2Fthe%20correct%20speaker%0A%20%20%20%20delay%2Econnect%28pan%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2FThe%20%60fadeIn%60%20function%0A%20%20function%20fadeIn%28volumeNode%29%20%7B%0A%0A%20%20%20%20%2F%2FSet%20the%20volume%20to%200%20so%20that%20you%20can%20fade%0A%20%20%20%20%2F%2Fin%20from%20silence%0A%20%20%20%20volumeNode%2Egain%2Evalue%20%3D%200%3B%0A%0A%20%20%20%20volumeNode%2Egain%2ElinearRampToValueAtTime%28%0A%20%20%20%20%20%200%2C%20actx%2EcurrentTime%20%2B%20wait%0A%20%20%20%20%29%3B%0A%20%20%20%20volumeNode%2Egain%2ElinearRampToValueAtTime%28%0A%20%20%20%20%20%20volumeValue%2C%20actx%2EcurrentTime%20%2B%20wait%20%2B%20attack%0A%20%20%20%20%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2FThe%20%60fadeOut%60%20function%0A%20%20function%20fadeOut%28volumeNode%29%20%7B%0A%20%20%20%20volumeNode%2Egain%2ElinearRampToValueAtTime%28%0A%20%20%20%20%20%20volumeValue%2C%20actx%2EcurrentTime%20%2B%20attack%20%2B%20wait%0A%20%20%20%20%29%3B%0A%20%20%20%20volumeNode%2Egain%2ElinearRampToValueAtTime%28%0A%20%20%20%20%20%200%2C%20actx%2EcurrentTime%20%2B%20wait%20%2B%20attack%20%2B%20decay%0A%20%20%20%20%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2FThe%20%60pitchBend%60%20function%0A%20%20function%20pitchBend%28oscillatorNode%29%20%7B%0A%20%20%20%20%2F%2FIf%20%60reverse%60%20is%20true%2C%20make%20the%20note%20drop%20in%20frequency%2E%20Useful%20for%0A%20%20%20%20%2F%2Fshooting%20sounds%0A%0A%20%20%20%20%2F%2FGet%20the%20frequency%20of%20the%20current%20oscillator%0A%20%20%20%20var%20frequency%20%3D%20oscillatorNode%2Efrequency%2Evalue%3B%0A%0A%20%20%20%20%2F%2FIf%20%60reverse%60%20is%20true%2C%20make%20the%20sound%20drop%20in%20pitch%0A%20%20%20%20if%20%28%21reverse%29%20%7B%0A%20%20%20%20%20%20oscillatorNode%2Efrequency%2ElinearRampToValueAtTime%28%0A%20%20%20%20%20%20%20%20frequency%2C%20%0A%20%20%20%20%20%20%20%20actx%2EcurrentTime%20%2B%20wait%0A%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20oscillatorNode%2Efrequency%2ElinearRampToValueAtTime%28%0A%20%20%20%20%20%20%20%20frequency%20%2D%20pitchBendAmount%2C%20%0A%20%20%20%20%20%20%20%20actx%2EcurrentTime%20%2B%20wait%20%2B%20attack%20%2B%20decay%0A%20%20%20%20%20%20%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FIf%20%60reverse%60%20is%20false%2C%20make%20the%20note%20rise%20in%20pitch%2E%20Useful%20for%0A%20%20%20%20%2F%2Fjumping%20sounds%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20oscillatorNode%2Efrequency%2ElinearRampToValueAtTime%28%0A%20%20%20%20%20%20%20%20frequency%2C%20%0A%20%20%20%20%20%20%20%20actx%2EcurrentTime%20%2B%20wait%0A%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20oscillatorNode%2Efrequency%2ElinearRampToValueAtTime%28%0A%20%20%20%20%20%20%20%20frequency%20%2B%20pitchBendAmount%2C%20%0A%20%20%20%20%20%20%20%20actx%2EcurrentTime%20%2B%20wait%20%2B%20attack%20%2B%20decay%0A%20%20%20%20%20%20%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2FThe%20%60addDissonance%60%20function%0A%20%20function%20addDissonance%28%29%20%7B%0A%0A%20%20%20%20%2F%2FCreate%20two%20more%20oscillators%20and%20gain%20nodes%0A%20%20%20%20var%20d1%20%3D%20actx%2EcreateOscillator%28%29%2C%0A%20%20%20%20%20%20%20%20d2%20%3D%20actx%2EcreateOscillator%28%29%2C%0A%20%20%20%20%20%20%20%20d1Volume%20%3D%20actx%2EcreateGain%28%29%2C%0A%20%20%20%20%20%20%20%20d2Volume%20%3D%20actx%2EcreateGain%28%29%3B%0A%0A%20%20%20%20%2F%2FSet%20the%20volume%20to%20the%20%60volumeValue%60%0A%20%20%20%20d1Volume%2Egain%2Evalue%20%3D%20volumeValue%3B%0A%20%20%20%20d2Volume%2Egain%2Evalue%20%3D%20volumeValue%3B%0A%0A%20%20%20%20%2F%2FConnect%20the%20oscillators%20to%20the%20gain%20and%20destination%20nodes%0A%20%20%20%20d1%2Econnect%28d1Volume%29%3B%0A%20%20%20%20d1Volume%2Econnect%28actx%2Edestination%29%3B%0A%20%20%20%20d2%2Econnect%28d2Volume%29%3B%0A%20%20%20%20d2Volume%2Econnect%28actx%2Edestination%29%3B%0A%0A%20%20%20%20%2F%2FSet%20the%20waveform%20to%20%22sawtooth%22%20for%20a%20harsh%20effect%0A%20%20%20%20d1%2Etype%20%3D%20%22sawtooth%22%3B%0A%20%20%20%20d2%2Etype%20%3D%20%22sawtooth%22%3B%0A%0A%20%20%20%20%2F%2FMake%20the%20two%20oscillators%20play%20at%20frequencies%20above%20and%0A%20%20%20%20%2F%2Fbelow%20the%20main%20sound%27s%20frequency%2E%20Use%20whatever%20value%20was%0A%20%20%20%20%2F%2Fsupplied%20by%20the%20%60dissonance%60%20argument%0A%20%20%20%20d1%2Efrequency%2Evalue%20%3D%20frequency%20%2B%20dissonance%3B%0A%20%20%20%20d2%2Efrequency%2Evalue%20%3D%20frequency%20%2D%20dissonance%3B%0A%0A%20%20%20%20%2F%2FFade%20in%2Fout%2C%20pitch%20bend%20and%20play%20the%20oscillators%0A%20%20%20%20%2F%2Fto%20match%20the%20main%20sound%0A%20%20%20%20if%20%28attack%20%3E%200%29%20%7B%0A%20%20%20%20%20%20fadeIn%28d1Volume%29%3B%0A%20%20%20%20%20%20fadeIn%28d2Volume%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28decay%20%3E%200%29%20%7B%0A%20%20%20%20%20%20fadeOut%28d1Volume%29%3B%0A%20%20%20%20%20%20fadeOut%28d2Volume%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28pitchBendAmount%20%3E%200%29%20%7B%0A%20%20%20%20%20%20pitchBend%28d1%29%3B%0A%20%20%20%20%20%20pitchBend%28d2%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28echo%29%20%7B%0A%20%20%20%20%20%20addEcho%28d1Volume%29%3B%0A%20%20%20%20%20%20addEcho%28d2Volume%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28reverb%29%20%7B%0A%20%20%20%20%20%20addReverb%28d1Volume%29%3B%0A%20%20%20%20%20%20addReverb%28d2Volume%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20play%28d1%29%3B%0A%20%20%20%20play%28d2%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2FThe%20%60play%60%20function%0A%20%20function%20play%28node%29%20%7B%0A%20%20%20%20node%2Estart%28actx%2EcurrentTime%20%2B%20wait%29%3B%0A%0A%20%20%20%20%2F%2FOscillators%20have%20to%20be%20stopped%20otherwise%20they%20accumulate%20in%20%0A%20%20%20%20%2F%2Fmemory%20and%20tax%20the%20CPU%2E%20They%27ll%20be%20stopped%20after%20a%20default%0A%20%20%20%20%2F%2Ftimeout%20of%202%20seconds%2C%20which%20should%20be%20enough%20for%20most%20sound%20%0A%20%20%20%20%2F%2Feffects%2E%20Override%20this%20in%20the%20%60soundEffect%60%20parameters%20if%20you%0A%20%20%20%20%2F%2Fneed%20a%20longer%20sound%0A%20%20%20%20node%2Estop%28actx%2EcurrentTime%20%2B%20wait%20%2B%202%29%3B%0A%20%20%7D%0A%7D%0A%0A%2F%2A%0AimpulseResponse%0A%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%0AThe%20%60makeSound%60%20and%20%60soundEffect%60%20functions%20uses%20%60impulseResponse%60%20%20to%20help%20create%20an%20optional%20reverb%20effect%2E%20%20%0AIt%20simulates%20a%20model%20of%20sound%20reverberation%20in%20an%20acoustic%20space%20which%20%0Aa%20convolver%20node%20can%20blend%20with%20the%20source%20sound%2E%20Make%20sure%20to%20include%20this%20function%20along%20with%20%60makeSound%60%0Aand%20%60soundEffect%60%20if%20you%20need%20to%20use%20the%20reverb%20feature%2E%0A%2A%2F%0A%0Afunction%20impulseResponse%28duration%2C%20decay%2C%20reverse%2C%20actx%29%20%7B%0A%0A%20%20%2F%2FThe%20length%20of%20the%20buffer%2E%0A%20%20var%20length%20%3D%20actx%2EsampleRate%20%2A%20duration%3B%0A%0A%20%20%2F%2FCreate%20an%20audio%20buffer%20%28an%20empty%20sound%20container%29%20to%20store%20the%20reverb%20effect%2E%0A%20%20var%20impulse%20%3D%20actx%2EcreateBuffer%282%2C%20length%2C%20actx%2EsampleRate%29%3B%0A%0A%20%20%2F%2FUse%20%60getChannelData%60%20to%20initialize%20empty%20arrays%20to%20store%20sound%20data%20for%0A%20%20%2F%2Fthe%20left%20and%20right%20channels%2E%0A%20%20var%20left%20%3D%20impulse%2EgetChannelData%280%29%2C%0A%20%20%20%20%20%20right%20%3D%20impulse%2EgetChannelData%281%29%3B%0A%0A%20%20%2F%2FLoop%20through%20each%20sample%2Dframe%20and%20fill%20the%20channel%0A%20%20%2F%2Fdata%20with%20random%20noise%2E%0A%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20length%3B%20i%2B%2B%29%7B%0A%0A%20%20%20%20%2F%2FApply%20the%20reverse%20effect%2C%20if%20%60reverse%60%20is%20%60true%60%2E%0A%20%20%20%20var%20n%3B%0A%20%20%20%20if%20%28reverse%29%20%7B%0A%20%20%20%20%20%20n%20%3D%20length%20%2D%20i%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20n%20%3D%20i%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FFill%20the%20left%20and%20right%20channels%20with%20random%20white%20noise%20which%0A%20%20%20%20%2F%2Fdecays%20exponentially%2E%0A%20%20%20%20left%5Bi%5D%20%3D%20%28Math%2Erandom%28%29%20%2A%202%20%2D%201%29%20%2A%20Math%2Epow%281%20%2D%20n%20%2F%20length%2C%20decay%29%3B%0A%20%20%20%20right%5Bi%5D%20%3D%20%28Math%2Erandom%28%29%20%2A%202%20%2D%201%29%20%2A%20Math%2Epow%281%20%2D%20n%20%2F%20length%2C%20decay%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2FReturn%20the%20%60impulse%60%2E%0A%20%20return%20impulse%3B%0A%7D%0A%0A%0A%2F%2A%0Akeyboard%0A%2D%2D%2D%2D%2D%2D%2D%2D%0A%0AThis%20isn%27t%20really%20necessary%20%2D%20I%20just%20included%20it%20for%20fun%20to%20help%20with%20the%20%0Aexamples%20in%20the%20%60index%2Ehtml%60%20files%2E%0AThe%20%60keyboard%60%20helper%20function%20creates%20%60key%60%20objects%0Athat%20listen%20for%20keyboard%20events%2E%20Create%20a%20new%20key%20object%20like%0Athis%3A%0A%0A%20%20%20%20var%20keyObject%20%3D%20g%2Ekeyboard%28asciiKeyCodeNumber%29%3B%0A%0AThen%20assign%20%60press%60%20and%20%60release%60%20methods%20like%20this%3A%0A%0A%20%20%20%20keyObject%2Epress%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%2F%2Fkey%20object%20pressed%0A%20%20%20%20%7D%3B%0A%20%20%20%20keyObject%2Erelease%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%2F%2Fkey%20object%20released%0A%20%20%20%20%7D%3B%0A%0AKeyboard%20objects%20also%20have%20%60isDown%60%20and%20%60isUp%60%20Booleans%20that%20you%20can%20check%2E%0AThis%20is%20so%20much%20easier%20than%20having%20to%20write%20out%20tedious%20keyboard%20even%20capture%20%0Acode%20from%20scratch%2E%0A%0ALike%20I%20said%2C%20the%20%60keyboard%60%20function%20has%20nothing%20to%20do%20with%20generating%20sounds%2C%0Aso%20just%20delete%20it%20if%20you%20don%27t%20want%20it%21%0A%2A%2F%0A%0Afunction%20keyboard%28keyCode%29%20%7B%0A%20%20var%20key%20%3D%20%7B%7D%3B%0A%20%20key%2Ecode%20%3D%20keyCode%3B%0A%20%20key%2EisDown%20%3D%20false%3B%0A%20%20key%2EisUp%20%3D%20true%3B%0A%20%20key%2Epress%20%3D%20undefined%3B%0A%20%20key%2Erelease%20%3D%20undefined%3B%0A%20%20%2F%2FThe%20%60downHandler%60%0A%20%20key%2EdownHandler%20%3D%20function%28event%29%20%7B%0A%20%20%20%20if%20%28event%2EkeyCode%20%3D%3D%3D%20key%2Ecode%29%20%7B%0A%20%20%20%20%20%20if%20%28key%2EisUp%20%26%26%20key%2Epress%29%20key%2Epress%28%29%3B%0A%20%20%20%20%20%20key%2EisDown%20%3D%20true%3B%0A%20%20%20%20%20%20key%2EisUp%20%3D%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2FThe%20%60upHandler%60%0A%20%20key%2EupHandler%20%3D%20function%28event%29%20%7B%0A%20%20%20%20if%20%28event%2EkeyCode%20%3D%3D%3D%20key%2Ecode%29%20%7B%0A%20%20%20%20%20%20if%20%28key%2EisDown%20%26%26%20key%2Erelease%29%20key%2Erelease%28%29%3B%0A%20%20%20%20%20%20key%2EisDown%20%3D%20false%3B%0A%20%20%20%20%20%20key%2EisUp%20%3D%20true%3B%0A%20%20%20%20%7D%0A%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2FAttach%20event%20listeners%0A%20%20window%2EaddEventListener%28%0A%20%20%20%20%22keydown%22%2C%20key%2EdownHandler%2Ebind%28key%29%2C%20false%0A%20%20%29%3B%0A%20%20window%2EaddEventListener%28%0A%20%20%20%20%22keyup%22%2C%20key%2EupHandler%2Ebind%28key%29%2C%20false%0A%20%20%29%3B%0A%20%20return%20key%3B%0A%7D%0A%0A%0Afunction%20scaleToWindow%28canvas%2C%20backgroundColor%29%20%7B%0A%0A%20%20backgroundColor%20%3D%20backgroundColor%20%7C%7C%20%22%232C3539%22%3B%0A%20%20var%20scaleX%2C%20scaleY%2C%20scale%2C%20center%3B%0A%20%20%0A%20%20%2F%2F1%2E%20Scale%20the%20canvas%20to%20the%20correct%20size%0A%20%20%2F%2FFigure%20out%20the%20scale%20amount%20on%20each%20axis%0A%20%20scaleX%20%3D%20window%2EinnerWidth%20%2F%20canvas%2EoffsetWidth%3B%0A%20%20scaleY%20%3D%20window%2EinnerHeight%20%2F%20canvas%2EoffsetHeight%3B%0A%0A%20%20%2F%2FScale%20the%20canvas%20based%20on%20whichever%20value%20is%20less%3A%20%60scaleX%60%20or%20%60scaleY%60%0A%20%20scale%20%3D%20Math%2Emin%28scaleX%2C%20scaleY%29%3B%0A%20%20canvas%2Estyle%2EtransformOrigin%20%3D%20%220%200%22%3B%0A%20%20canvas%2Estyle%2Etransform%20%3D%20%22scale%28%22%20%2B%20scale%20%2B%20%22%29%22%3B%0A%20%20console%2Elog%28scaleX%29%0A%0A%20%20%2F%2F2%2E%20Center%20the%20canvas%2E%0A%20%20%2F%2FDecide%20whether%20to%20center%20the%20canvas%20vertically%20or%20horizontally%2E%0A%20%20%2F%2FWide%20canvases%20should%20be%20centered%20vertically%2C%20and%20%0A%20%20%2F%2Fsquare%20or%20tall%20canvases%20should%20be%20centered%20horizontally%0A%20%20if%20%28canvas%2Eoffsetwidth%20%3E%20canvas%2EoffsetHeight%29%20%7B%0A%20%20%20%20if%20%28canvas%2EoffsetWidth%20%2A%20scale%20%3C%20window%2EinnerWidth%29%20%7B%0A%20%20%20%20%20%20center%20%3D%20%22horizontally%22%3B%0A%20%20%20%20%7D%20else%20%7B%20%0A%20%20%20%20%20%20center%20%3D%20%22vertically%22%3B%0A%20%20%20%20%7D%0A%20%20%7D%20else%20%7B%0A%20%20%20%20if%20%28canvas%2EoffsetHeight%20%2A%20scale%20%3C%20window%2EinnerHeight%29%20%7B%0A%20%20%20%20%20%20center%20%3D%20%22vertically%22%3B%0A%20%20%20%20%7D%20else%20%7B%20%0A%20%20%20%20%20%20center%20%3D%20%22horizontally%22%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%0A%20%20%2F%2FCenter%20horizontally%20%28for%20square%20or%20tall%20canvases%29%0A%20%20var%20margin%3B%0A%20%20if%20%28center%20%3D%3D%3D%20%22horizontally%22%29%20%7B%0A%20%20%20%20margin%20%3D%20%28window%2EinnerWidth%20%2D%20canvas%2EoffsetWidth%20%2A%20scale%29%20%2F%202%3B%0A%20%20%20%20canvas%2Estyle%2EmarginLeft%20%3D%20margin%20%2B%20%22px%22%3B%0A%20%20%20%20canvas%2Estyle%2EmarginRight%20%3D%20margin%20%2B%20%22px%22%3B%0A%20%20%7D%0A%0A%20%20%2F%2FCenter%20vertically%20%28for%20wide%20canvases%29%20%0A%20%20if%20%28center%20%3D%3D%3D%20%22vertically%22%29%20%7B%0A%20%20%20%20margin%20%3D%20%28window%2EinnerHeight%20%2D%20canvas%2EoffsetHeight%20%2A%20scale%29%20%2F%202%3B%0A%20%20%20%20canvas%2Estyle%2EmarginTop%20%3D%20margin%20%2B%20%22px%22%3B%0A%20%20%20%20canvas%2Estyle%2EmarginBottom%20%3D%20margin%20%2B%20%22px%22%3B%0A%20%20%7D%0A%0A%20%20%2F%2F3%2E%20Remove%20any%20padding%20from%20the%20canvas%20%20and%20body%20and%20set%20the%20canvas%0A%20%20%2F%2Fdisplay%20style%20to%20%22block%22%0A%20%20canvas%2Estyle%2EpaddingLeft%20%3D%200%3B%0A%20%20canvas%2Estyle%2EpaddingRight%20%3D%200%3B%0A%20%20canvas%2Estyle%2EpaddingTop%20%3D%200%3B%0A%20%20canvas%2Estyle%2EpaddingBottom%20%3D%200%3B%0A%20%20canvas%2Estyle%2Edisplay%20%3D%20%22block%22%3B%0A%20%20%0A%20%20%2F%2F4%2E%20Set%20the%20color%20of%20the%20HTML%20body%20background%0A%20%20document%2Ebody%2Estyle%2EbackgroundColor%20%3D%20backgroundColor%3B%0A%20%20%0A%20%20%2F%2FFix%20some%20quirkiness%20in%20scaling%20for%20Safari%0A%20%20var%20ua%20%3D%20navigator%2EuserAgent%2EtoLowerCase%28%29%3B%20%0A%20%20if%20%28ua%2EindexOf%28%22safari%22%29%20%21%3D%20%2D1%29%20%7B%20%0A%20%20%20%20if%20%28ua%2EindexOf%28%22chrome%22%29%20%3E%20%2D1%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Chrome%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%2F%2F%20Safari%0A%20%20%20%20%20%20%2F%2Fcanvas%2Estyle%2EmaxHeight%20%3D%20%22100%25%22%3B%0A%20%20%20%20%20%20%2F%2Fcanvas%2Estyle%2EminHeight%20%3D%20%22100%25%22%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F5%2E%20Return%20the%20%60scale%60%20value%2E%20This%20is%20important%2C%20because%20you%27ll%20nee%20this%20value%20%0A%20%20%2F%2Ffor%20correct%20hit%20testing%20between%20the%20pointer%20and%20sprites%0A%20%20return%20scale%3B%0A%7D%0A%22use%20strict%22%3B%0A%0Avar%20%5FcreateClass%20%3D%20%28function%20%28%29%20%7B%20function%20defineProperties%28target%2C%20props%29%20%7B%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20props%2Elength%3B%20i%2B%2B%29%20%7B%20var%20descriptor%20%3D%20props%5Bi%5D%3B%20descriptor%2Eenumerable%20%3D%20descriptor%2Eenumerable%20%7C%7C%20false%3B%20descriptor%2Econfigurable%20%3D%20true%3B%20if%20%28%22value%22%20in%20descriptor%29%20descriptor%2Ewritable%20%3D%20true%3B%20Object%2EdefineProperty%28target%2C%20descriptor%2Ekey%2C%20descriptor%29%3B%20%7D%20%7D%20return%20function%20%28Constructor%2C%20protoProps%2C%20staticProps%29%20%7B%20if%20%28protoProps%29%20defineProperties%28Constructor%2Eprototype%2C%20protoProps%29%3B%20if%20%28staticProps%29%20defineProperties%28Constructor%2C%20staticProps%29%3B%20return%20Constructor%3B%20%7D%3B%20%7D%29%28%29%3B%0A%0Afunction%20%5FclassCallCheck%28instance%2C%20Constructor%29%20%7B%20if%20%28%21%28instance%20instanceof%20Constructor%29%29%20%7B%20throw%20new%20TypeError%28%22Cannot%20call%20a%20class%20as%20a%20function%22%29%3B%20%7D%20%7D%0A%0Avar%20Bump%20%3D%20%28function%20%28%29%20%7B%0A%20%20function%20Bump%28%29%20%7B%0A%20%20%20%20var%20renderingEngine%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20PIXI%20%3A%20arguments%5B0%5D%3B%0A%0A%20%20%20%20%5FclassCallCheck%28this%2C%20Bump%29%3B%0A%0A%20%20%20%20if%20%28renderingEngine%20%3D%3D%3D%20undefined%29%20throw%20new%20Error%28%22Please%20assign%20a%20rendering%20engine%20in%20the%20constructor%20before%20using%20bump%2Ejs%22%29%3B%0A%0A%20%20%20%20%2F%2FFind%20out%20which%20rendering%20engine%20is%20being%20used%20%28the%20default%20is%20Pixi%29%0A%20%20%20%20this%2Erenderer%20%3D%20%22%22%3B%0A%0A%20%20%20%20%2F%2FIf%20the%20%60renderingEngine%60%20is%20Pixi%2C%20set%20up%20Pixi%20object%20aliases%0A%20%20%20%20if%20%28renderingEngine%2EParticleContainer%20%26%26%20renderingEngine%2ESprite%29%20%7B%0A%20%20%20%20%20%20this%2Erenderer%20%3D%20%22pixi%22%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%60addCollisionProperties%60%20adds%20extra%20properties%20to%20sprites%20to%20help%0A%20%20%2F%2Fsimplify%20the%20collision%20code%2E%20It%20won%27t%20add%20these%20properties%20if%20they%0A%20%20%2F%2Falready%20exist%20on%20the%20sprite%2E%20After%20these%20properties%20have%20been%0A%20%20%2F%2Fadded%2C%20this%20methods%20adds%20a%20Boolean%20property%20to%20the%20sprite%20called%20%60%5FbumpPropertiesAdded%60%0A%20%20%2F%2Fand%20sets%20it%20to%20%60true%60%20to%20flag%20that%20the%20sprite%20has%20these%0A%20%20%2F%2Fnew%20properties%0A%0A%20%20%5FcreateClass%28Bump%2C%20%5B%7B%0A%20%20%20%20key%3A%20%22addCollisionProperties%22%2C%0A%20%20%20%20value%3A%20function%20addCollisionProperties%28sprite%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20properties%20to%20Pixi%20sprites%0A%20%20%20%20%20%20if%20%28this%2Erenderer%20%3D%3D%3D%20%22pixi%22%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2Fgx%0A%20%20%20%20%20%20%20%20if%20%28sprite%2Egx%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22gx%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2EgetGlobalPosition%28%29%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2Fgy%0A%20%20%20%20%20%20%20%20if%20%28sprite%2Egy%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22gy%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2EgetGlobalPosition%28%29%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FcenterX%0A%20%20%20%20%20%20%20%20if%20%28sprite%2EcenterX%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22centerX%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2Ex%20%2B%20sprite%2Ewidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FcenterY%0A%20%20%20%20%20%20%20%20if%20%28sprite%2EcenterY%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22centerY%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2Ey%20%2B%20sprite%2Eheight%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FhalfWidth%0A%20%20%20%20%20%20%20%20if%20%28sprite%2EhalfWidth%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22halfWidth%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2Ewidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FhalfHeight%0A%20%20%20%20%20%20%20%20if%20%28sprite%2EhalfHeight%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22halfHeight%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2Eheight%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FxAnchorOffset%0A%20%20%20%20%20%20%20%20if%20%28sprite%2ExAnchorOffset%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22xAnchorOffset%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2Eheight%20%2A%20sprite%2Eanchor%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FyAnchorOffset%0A%20%20%20%20%20%20%20%20if%20%28sprite%2EyAnchorOffset%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22yAnchorOffset%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2Ewidth%20%2A%20sprite%2Eanchor%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28sprite%2Ecircular%20%26%26%20sprite%2Eradius%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22radius%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2Ewidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FEarlier%20code%20%2D%20not%20needed%20now%2E%0A%20%20%20%20%20%20%20%20%2F%2A%0A%20%20%20%20%20%20%20%20Object%2EdefineProperties%28sprite%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%22gx%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%28%29%7Breturn%20sprite%2EgetGlobalPosition%28%29%2Ex%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22gy%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%28%29%7Breturn%20sprite%2EgetGlobalPosition%28%29%2Ey%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22centerX%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%28%29%7Breturn%20sprite%2Ex%20%2B%20sprite%2Ewidth%20%2F%202%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22centerY%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%28%29%7Breturn%20sprite%2Ey%20%2B%20sprite%2Eheight%20%2F%202%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22halfWidth%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%28%29%7Breturn%20sprite%2Ewidth%20%2F%202%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22halfHeight%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%28%29%7Breturn%20sprite%2Eheight%20%2F%202%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22xAnchorOffset%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%28%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2Eheight%20%2A%20sprite%2Eanchor%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22yAnchorOffset%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%28%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2Ewidth%20%2A%20sprite%2Eanchor%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%2A%2F%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FAdd%20a%20Boolean%20%60%5FbumpPropertiesAdded%60%20property%20to%20the%20sprite%20to%20flag%20it%0A%20%20%20%20%20%20%2F%2Fas%20having%20these%20new%20properties%0A%20%20%20%20%20%20sprite%2E%5FbumpPropertiesAdded%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20hitTestPoint%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Use%20it%20to%20find%20out%20if%20a%20point%20is%20touching%20a%20circlular%20or%20rectangular%20sprite%2E%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20An%20object%20with%20%60x%60%20and%20%60y%60%20properties%2E%0A%20%20%20%20b%2E%20A%20sprite%20object%20with%20%60x%60%2C%20%60y%60%2C%20%60centerX%60%20and%20%60centerY%60%20properties%2E%0A%20%20%20%20If%20the%20sprite%20has%20a%20%60radius%60%20property%2C%20the%20function%20will%20interpret%0A%20%20%20%20the%20shape%20as%20a%20circle%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22hitTestPoint%22%2C%0A%20%20%20%20value%3A%20function%20hitTestPoint%28point%2C%20sprite%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21sprite%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28sprite%29%3B%0A%0A%20%20%20%20%20%20var%20shape%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20left%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20right%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20top%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20bottom%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20vx%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20vy%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20magnitude%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20hit%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FFind%20out%20if%20the%20sprite%20is%20rectangular%20or%20circular%20depending%0A%20%20%20%20%20%20%2F%2Fon%20whether%20it%20has%20a%20%60radius%60%20property%0A%20%20%20%20%20%20if%20%28sprite%2Eradius%29%20%7B%0A%20%20%20%20%20%20%20%20shape%20%3D%20%22circle%22%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20shape%20%3D%20%22rectangle%22%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FRectangle%0A%20%20%20%20%20%20if%20%28shape%20%3D%3D%3D%20%22rectangle%22%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FGet%20the%20position%20of%20the%20sprite%27s%20edges%0A%20%20%20%20%20%20%20%20left%20%3D%20sprite%2Ex%20%2D%20sprite%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20right%20%3D%20sprite%2Ex%20%2B%20sprite%2Ewidth%20%2D%20sprite%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20top%20%3D%20sprite%2Ey%20%2D%20sprite%2EyAnchorOffset%3B%0A%20%20%20%20%20%20%20%20bottom%20%3D%20sprite%2Ey%20%2B%20sprite%2Eheight%20%2D%20sprite%2EyAnchorOffset%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20out%20if%20the%20point%20is%20intersecting%20the%20rectangle%0A%20%20%20%20%20%20%20%20hit%20%3D%20point%2Ex%20%3E%20left%20%26%26%20point%2Ex%20%3C%20right%20%26%26%20point%2Ey%20%3E%20top%20%26%26%20point%2Ey%20%3C%20bottom%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FCircle%0A%20%20%20%20%20%20if%20%28shape%20%3D%3D%3D%20%22circle%22%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20distance%20between%20the%20point%20and%20the%0A%20%20%20%20%20%20%20%20%2F%2Fcenter%20of%20the%20circle%0A%20%20%20%20%20%20%20%20var%20%5Fvx%20%3D%20point%2Ex%20%2D%20sprite%2Ex%20%2D%20sprite%2Ewidth%20%2F%202%20%2B%20sprite%2ExAnchorOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Fvy%20%3D%20point%2Ey%20%2D%20sprite%2Ey%20%2D%20sprite%2Eheight%20%2F%202%20%2B%20sprite%2EyAnchorOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Fmagnitude%20%3D%20Math%2Esqrt%28%5Fvx%20%2A%20%5Fvx%20%2B%20%5Fvy%20%2A%20%5Fvy%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20point%20is%20intersecting%20the%20circle%20if%20the%20magnitude%0A%20%20%20%20%20%20%20%20%2F%2F%28distance%29%20is%20less%20than%20the%20circle%27s%20radius%0A%20%20%20%20%20%20%20%20hit%20%3D%20%5Fmagnitude%20%3C%20sprite%2Eradius%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%60hit%60%20will%20be%20either%20%60true%60%20or%20%60false%60%0A%20%20%20%20%20%20return%20hit%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20hitTestCircle%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Use%20it%20to%20find%20out%20if%20two%20circular%20sprites%20are%20touching%2E%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%20with%20%60centerX%60%2C%20%60centerY%60%20and%20%60radius%60%20properties%2E%0A%20%20%20%20b%2E%20A%20sprite%20object%20with%20%60centerX%60%2C%20%60centerY%60%20and%20%60radius%60%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22hitTestCircle%22%2C%0A%20%20%20%20value%3A%20function%20hitTestCircle%28c1%2C%20c2%29%20%7B%0A%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21c1%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28c1%29%3B%0A%20%20%20%20%20%20if%20%28%21c2%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28c2%29%3B%0A%0A%20%20%20%20%20%20var%20vx%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20vy%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20magnitude%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20combinedRadii%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20hit%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FCalculate%20the%20vector%20between%20the%20circles%E2%80%99%20center%20points%0A%20%20%20%20%20%20if%20%28global%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FUse%20global%20coordinates%0A%20%20%20%20%20%20%20%20vx%20%3D%20c2%2Egx%20%2B%20c2%2Ewidth%20%2F%202%20%2D%20c2%2ExAnchorOffset%20%2D%20%28c1%2Egx%20%2B%20c1%2Ewidth%20%2F%202%20%2D%20c1%2ExAnchorOffset%29%3B%0A%20%20%20%20%20%20%20%20vy%20%3D%20c2%2Egy%20%2B%20c2%2Ewidth%20%2F%202%20%2D%20c2%2EyAnchorOffset%20%2D%20%28c1%2Egy%20%2B%20c1%2Ewidth%20%2F%202%20%2D%20c1%2EyAnchorOffset%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FUse%20local%20coordinates%0A%20%20%20%20%20%20%20%20vx%20%3D%20c2%2Ex%20%2B%20c2%2Ewidth%20%2F%202%20%2D%20c2%2ExAnchorOffset%20%2D%20%28c1%2Ex%20%2B%20c1%2Ewidth%20%2F%202%20%2D%20c1%2ExAnchorOffset%29%3B%0A%20%20%20%20%20%20%20%20vy%20%3D%20c2%2Ey%20%2B%20c2%2Ewidth%20%2F%202%20%2D%20c2%2EyAnchorOffset%20%2D%20%28c1%2Ey%20%2B%20c1%2Ewidth%20%2F%202%20%2D%20c1%2EyAnchorOffset%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FFind%20the%20distance%20between%20the%20circles%20by%20calculating%0A%20%20%20%20%20%20%2F%2Fthe%20vector%27s%20magnitude%20%28how%20long%20the%20vector%20is%29%0A%20%20%20%20%20%20magnitude%20%3D%20Math%2Esqrt%28vx%20%2A%20vx%20%2B%20vy%20%2A%20vy%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20together%20the%20circles%27%20total%20radii%0A%20%20%20%20%20%20combinedRadii%20%3D%20c1%2Eradius%20%2B%20c2%2Eradius%3B%0A%0A%20%20%20%20%20%20%2F%2FSet%20%60hit%60%20to%20%60true%60%20if%20the%20distance%20between%20the%20circles%20is%0A%20%20%20%20%20%20%2F%2Fless%20than%20their%20%60combinedRadii%60%0A%20%20%20%20%20%20hit%20%3D%20magnitude%20%3C%20combinedRadii%3B%0A%0A%20%20%20%20%20%20%2F%2F%60hit%60%20will%20be%20either%20%60true%60%20or%20%60false%60%0A%20%20%20%20%20%20return%20hit%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20circleCollision%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Use%20it%20to%20prevent%20a%20moving%20circular%20sprite%20from%20overlapping%20and%20optionally%0A%20%20%20%20bouncing%20off%20a%20non%2Dmoving%20circular%20sprite%2E%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%20with%20%60x%60%2C%20%60y%60%20%60centerX%60%2C%20%60centerY%60%20and%20%60radius%60%20properties%2E%0A%20%20%20%20b%2E%20A%20sprite%20object%20with%20%60x%60%2C%20%60y%60%20%60centerX%60%2C%20%60centerY%60%20and%20%60radius%60%20properties%2E%0A%20%20%20%20c%2E%20Optional%3A%20true%20or%20false%20to%20indicate%20whether%20or%20not%20the%20first%20sprite%0A%20%20%20%20should%20bounce%20off%20the%20second%20sprite%2E%0A%20%20%20%20The%20sprites%20can%20contain%20an%20optional%20mass%20property%20that%20should%20be%20greater%20than%201%2E%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22circleCollision%22%2C%0A%20%20%20%20value%3A%20function%20circleCollision%28c1%2C%20c2%29%20%7B%0A%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B3%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21c1%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28c1%29%3B%0A%20%20%20%20%20%20if%20%28%21c2%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28c2%29%3B%0A%0A%20%20%20%20%20%20var%20magnitude%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20combinedRadii%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20overlap%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20vx%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20vy%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20dx%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20dy%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20hit%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%2F%2FCalculate%20the%20vector%20between%20the%20circles%E2%80%99%20center%20points%0A%0A%20%20%20%20%20%20if%20%28global%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FUse%20global%20coordinates%0A%20%20%20%20%20%20%20%20vx%20%3D%20c2%2Egx%20%2B%20c2%2Ewidth%20%2F%202%20%2D%20c2%2ExAnchorOffset%20%2D%20%28c1%2Egx%20%2B%20c1%2Ewidth%20%2F%202%20%2D%20c1%2ExAnchorOffset%29%3B%0A%20%20%20%20%20%20%20%20vy%20%3D%20c2%2Egy%20%2B%20c2%2Ewidth%20%2F%202%20%2D%20c2%2EyAnchorOffset%20%2D%20%28c1%2Egy%20%2B%20c1%2Ewidth%20%2F%202%20%2D%20c1%2EyAnchorOffset%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FUse%20local%20coordinates%0A%20%20%20%20%20%20%20%20vx%20%3D%20c2%2Ex%20%2B%20c2%2Ewidth%20%2F%202%20%2D%20c2%2ExAnchorOffset%20%2D%20%28c1%2Ex%20%2B%20c1%2Ewidth%20%2F%202%20%2D%20c1%2ExAnchorOffset%29%3B%0A%20%20%20%20%20%20%20%20vy%20%3D%20c2%2Ey%20%2B%20c2%2Ewidth%20%2F%202%20%2D%20c2%2EyAnchorOffset%20%2D%20%28c1%2Ey%20%2B%20c1%2Ewidth%20%2F%202%20%2D%20c1%2EyAnchorOffset%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FFind%20the%20distance%20between%20the%20circles%20by%20calculating%0A%20%20%20%20%20%20%2F%2Fthe%20vector%27s%20magnitude%20%28how%20long%20the%20vector%20is%29%0A%20%20%20%20%20%20magnitude%20%3D%20Math%2Esqrt%28vx%20%2A%20vx%20%2B%20vy%20%2A%20vy%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20together%20the%20circles%27%20combined%20half%2Dwidths%0A%20%20%20%20%20%20combinedRadii%20%3D%20c1%2Eradius%20%2B%20c2%2Eradius%3B%0A%0A%20%20%20%20%20%20%2F%2FFigure%20out%20if%20there%27s%20a%20collision%0A%20%20%20%20%20%20if%20%28magnitude%20%3C%20combinedRadii%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FYes%2C%20a%20collision%20is%20happening%0A%20%20%20%20%20%20%20%20hit%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20amount%20of%20overlap%20between%20the%20circles%0A%20%20%20%20%20%20%20%20overlap%20%3D%20combinedRadii%20%2D%20magnitude%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20some%20%22quantum%20padding%22%2E%20This%20adds%20a%20tiny%20amount%20of%20space%0A%20%20%20%20%20%20%20%20%2F%2Fbetween%20the%20circles%20to%20reduce%20their%20surface%20tension%20and%20make%0A%20%20%20%20%20%20%20%20%2F%2Fthem%20more%20slippery%2E%20%220%2E3%22%20is%20a%20good%20place%20to%20start%20but%20you%20might%0A%20%20%20%20%20%20%20%20%2F%2Fneed%20to%20modify%20this%20slightly%20depending%20on%20the%20exact%20behaviour%0A%20%20%20%20%20%20%20%20%2F%2Fyou%20want%2E%20Too%20little%20and%20the%20balls%20will%20feel%20sticky%2C%20too%20much%0A%20%20%20%20%20%20%20%20%2F%2Fand%20they%20could%20start%20to%20jitter%20if%20they%27re%20jammed%20together%0A%20%20%20%20%20%20%20%20var%20quantumPadding%20%3D%200%2E3%3B%0A%20%20%20%20%20%20%20%20overlap%20%2B%3D%20quantumPadding%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FNormalize%20the%20vector%0A%20%20%20%20%20%20%20%20%2F%2FThese%20numbers%20tell%20us%20the%20direction%20of%20the%20collision%0A%20%20%20%20%20%20%20%20dx%20%3D%20vx%20%2F%20magnitude%3B%0A%20%20%20%20%20%20%20%20dy%20%3D%20vy%20%2F%20magnitude%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FMove%20circle%201%20out%20of%20the%20collision%20by%20multiplying%0A%20%20%20%20%20%20%20%20%2F%2Fthe%20overlap%20with%20the%20normalized%20vector%20and%20subtract%20it%20from%0A%20%20%20%20%20%20%20%20%2F%2Fcircle%201%27s%20position%0A%20%20%20%20%20%20%20%20c1%2Ex%20%2D%3D%20overlap%20%2A%20dx%3B%0A%20%20%20%20%20%20%20%20c1%2Ey%20%2D%3D%20overlap%20%2A%20dy%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FBounce%0A%20%20%20%20%20%20%20%20if%20%28bounce%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCreate%20a%20collision%20vector%20object%2C%20%60s%60%20to%20represent%20the%20bounce%20%22surface%22%2E%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20bounce%20surface%27s%20x%20and%20y%20properties%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%28This%20represents%20the%20normal%20of%20the%20distance%20vector%20between%20the%20circles%29%0A%20%20%20%20%20%20%20%20%20%20s%2Ex%20%3D%20vy%3B%0A%20%20%20%20%20%20%20%20%20%20s%2Ey%20%3D%20%2Dvx%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FBounce%20c1%20off%20the%20surface%0A%20%20%20%20%20%20%20%20%20%20this%2EbounceOffSurface%28c1%2C%20s%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20hit%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20movingCircleCollision%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Use%20it%20to%20make%20two%20moving%20circles%20bounce%20off%20each%20other%2E%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%20with%20%60x%60%2C%20%60y%60%20%60centerX%60%2C%20%60centerY%60%20and%20%60radius%60%20properties%2E%0A%20%20%20%20b%2E%20A%20sprite%20object%20with%20%60x%60%2C%20%60y%60%20%60centerX%60%2C%20%60centerY%60%20and%20%60radius%60%20properties%2E%0A%20%20%20%20The%20sprites%20can%20contain%20an%20optional%20mass%20property%20that%20should%20be%20greater%20than%201%2E%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22movingCircleCollision%22%2C%0A%20%20%20%20value%3A%20function%20movingCircleCollision%28c1%2C%20c2%29%20%7B%0A%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21c1%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28c1%29%3B%0A%20%20%20%20%20%20if%20%28%21c2%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28c2%29%3B%0A%0A%20%20%20%20%20%20var%20combinedRadii%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20overlap%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20xSide%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20ySide%20%3D%20undefined%2C%0A%0A%20%20%20%20%20%20%2F%2F%60s%60%20refers%20to%20the%20distance%20vector%20between%20the%20circles%0A%20%20%20%20%20%20s%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20p1A%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20p1B%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20p2A%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20p2B%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20hit%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%2F%2FApply%20mass%2C%20if%20the%20circles%20have%20mass%20properties%0A%20%20%20%20%20%20c1%2Emass%20%3D%20c1%2Emass%20%7C%7C%201%3B%0A%20%20%20%20%20%20c2%2Emass%20%3D%20c2%2Emass%20%7C%7C%201%3B%0A%0A%20%20%20%20%20%20%2F%2FCalculate%20the%20vector%20between%20the%20circles%E2%80%99%20center%20points%0A%20%20%20%20%20%20if%20%28global%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FUse%20global%20coordinates%0A%20%20%20%20%20%20%20%20s%2Evx%20%3D%20c2%2Egx%20%2B%20c2%2Eradius%20%2D%20c2%2ExAnchorOffset%20%2D%20%28c1%2Egx%20%2B%20c1%2Eradius%20%2D%20c1%2ExAnchorOffset%29%3B%0A%20%20%20%20%20%20%20%20s%2Evy%20%3D%20c2%2Egy%20%2B%20c2%2Eradius%20%2D%20c2%2EyAnchorOffset%20%2D%20%28c1%2Egy%20%2B%20c1%2Eradius%20%2D%20c1%2EyAnchorOffset%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FUse%20local%20coordinates%0A%20%20%20%20%20%20%20%20s%2Evx%20%3D%20c2%2Ex%20%2B%20c2%2Eradius%20%2D%20c2%2ExAnchorOffset%20%2D%20%28c1%2Ex%20%2B%20c1%2Eradius%20%2D%20c1%2ExAnchorOffset%29%3B%0A%20%20%20%20%20%20%20%20s%2Evy%20%3D%20c2%2Ey%20%2B%20c2%2Eradius%20%2D%20c2%2EyAnchorOffset%20%2D%20%28c1%2Ey%20%2B%20c1%2Eradius%20%2D%20c1%2EyAnchorOffset%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FFind%20the%20distance%20between%20the%20circles%20by%20calculating%0A%20%20%20%20%20%20%2F%2Fthe%20vector%27s%20magnitude%20%28how%20long%20the%20vector%20is%29%0A%20%20%20%20%20%20s%2Emagnitude%20%3D%20Math%2Esqrt%28s%2Evx%20%2A%20s%2Evx%20%2B%20s%2Evy%20%2A%20s%2Evy%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20together%20the%20circles%27%20combined%20half%2Dwidths%0A%20%20%20%20%20%20combinedRadii%20%3D%20c1%2Eradius%20%2B%20c2%2Eradius%3B%0A%0A%20%20%20%20%20%20%2F%2FFigure%20out%20if%20there%27s%20a%20collision%0A%20%20%20%20%20%20if%20%28s%2Emagnitude%20%3C%20combinedRadii%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FYes%2C%20a%20collision%20is%20happening%0A%20%20%20%20%20%20%20%20hit%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20amount%20of%20overlap%20between%20the%20circles%0A%20%20%20%20%20%20%20%20overlap%20%3D%20combinedRadii%20%2D%20s%2Emagnitude%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20some%20%22quantum%20padding%22%20to%20the%20overlap%0A%20%20%20%20%20%20%20%20overlap%20%2B%3D%200%2E3%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FNormalize%20the%20vector%2E%0A%20%20%20%20%20%20%20%20%2F%2FThese%20numbers%20tell%20us%20the%20direction%20of%20the%20collision%0A%20%20%20%20%20%20%20%20s%2Edx%20%3D%20s%2Evx%20%2F%20s%2Emagnitude%3B%0A%20%20%20%20%20%20%20%20s%2Edy%20%3D%20s%2Evy%20%2F%20s%2Emagnitude%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20collision%20vector%2E%0A%20%20%20%20%20%20%20%20%2F%2FDivide%20it%20in%20half%20to%20share%20between%20the%20circles%2C%20and%20make%20it%20absolute%0A%20%20%20%20%20%20%20%20s%2EvxHalf%20%3D%20Math%2Eabs%28s%2Edx%20%2A%20overlap%20%2F%202%29%3B%0A%20%20%20%20%20%20%20%20s%2EvyHalf%20%3D%20Math%2Eabs%28s%2Edy%20%2A%20overlap%20%2F%202%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20side%20that%20the%20collision%20is%20occurring%20on%0A%20%20%20%20%20%20%20%20c1%2Ex%20%3E%20c2%2Ex%20%3F%20xSide%20%3D%201%20%3A%20xSide%20%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20c1%2Ey%20%3E%20c2%2Ey%20%3F%20ySide%20%3D%201%20%3A%20ySide%20%3D%20%2D1%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FMove%20c1%20out%20of%20the%20collision%20by%20multiplying%0A%20%20%20%20%20%20%20%20%2F%2Fthe%20overlap%20with%20the%20normalized%20vector%20and%20adding%20it%20to%0A%20%20%20%20%20%20%20%20%2F%2Fthe%20circles%27%20positions%0A%20%20%20%20%20%20%20%20c1%2Ex%20%3D%20c1%2Ex%20%2B%20s%2EvxHalf%20%2A%20xSide%3B%0A%20%20%20%20%20%20%20%20c1%2Ey%20%3D%20c1%2Ey%20%2B%20s%2EvyHalf%20%2A%20ySide%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FMove%20c2%20out%20of%20the%20collision%0A%20%20%20%20%20%20%20%20c2%2Ex%20%3D%20c2%2Ex%20%2B%20s%2EvxHalf%20%2A%20%2DxSide%3B%0A%20%20%20%20%20%20%20%20c2%2Ey%20%3D%20c2%2Ey%20%2B%20s%2EvyHalf%20%2A%20%2DySide%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F1%2E%20Calculate%20the%20collision%20surface%27s%20properties%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20surface%20vector%27s%20left%20normal%0A%20%20%20%20%20%20%20%20s%2Elx%20%3D%20s%2Evy%3B%0A%20%20%20%20%20%20%20%20s%2Ely%20%3D%20%2Ds%2Evx%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F2%2E%20Bounce%20c1%20off%20the%20surface%20%28s%29%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20dot%20product%20between%20c1%20and%20the%20surface%0A%20%20%20%20%20%20%20%20var%20dp1%20%3D%20c1%2Evx%20%2A%20s%2Edx%20%2B%20c1%2Evy%20%2A%20s%2Edy%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FProject%20c1%27s%20velocity%20onto%20the%20collision%20surface%0A%20%20%20%20%20%20%20%20p1A%2Ex%20%3D%20dp1%20%2A%20s%2Edx%3B%0A%20%20%20%20%20%20%20%20p1A%2Ey%20%3D%20dp1%20%2A%20s%2Edy%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20dot%20product%20of%20c1%20and%20the%20surface%27s%20left%20normal%20%28s%2Elx%20and%20s%2Ely%29%0A%20%20%20%20%20%20%20%20var%20dp2%20%3D%20c1%2Evx%20%2A%20%28s%2Elx%20%2F%20s%2Emagnitude%29%20%2B%20c1%2Evy%20%2A%20%28s%2Ely%20%2F%20s%2Emagnitude%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FProject%20the%20c1%27s%20velocity%20onto%20the%20surface%27s%20left%20normal%0A%20%20%20%20%20%20%20%20p1B%2Ex%20%3D%20dp2%20%2A%20%28s%2Elx%20%2F%20s%2Emagnitude%29%3B%0A%20%20%20%20%20%20%20%20p1B%2Ey%20%3D%20dp2%20%2A%20%28s%2Ely%20%2F%20s%2Emagnitude%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F3%2E%20Bounce%20c2%20off%20the%20surface%20%28s%29%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20dot%20product%20between%20c2%20and%20the%20surface%0A%20%20%20%20%20%20%20%20var%20dp3%20%3D%20c2%2Evx%20%2A%20s%2Edx%20%2B%20c2%2Evy%20%2A%20s%2Edy%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FProject%20c2%27s%20velocity%20onto%20the%20collision%20surface%0A%20%20%20%20%20%20%20%20p2A%2Ex%20%3D%20dp3%20%2A%20s%2Edx%3B%0A%20%20%20%20%20%20%20%20p2A%2Ey%20%3D%20dp3%20%2A%20s%2Edy%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20dot%20product%20of%20c2%20and%20the%20surface%27s%20left%20normal%20%28s%2Elx%20and%20s%2Ely%29%0A%20%20%20%20%20%20%20%20var%20dp4%20%3D%20c2%2Evx%20%2A%20%28s%2Elx%20%2F%20s%2Emagnitude%29%20%2B%20c2%2Evy%20%2A%20%28s%2Ely%20%2F%20s%2Emagnitude%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FProject%20c2%27s%20velocity%20onto%20the%20surface%27s%20left%20normal%0A%20%20%20%20%20%20%20%20p2B%2Ex%20%3D%20dp4%20%2A%20%28s%2Elx%20%2F%20s%2Emagnitude%29%3B%0A%20%20%20%20%20%20%20%20p2B%2Ey%20%3D%20dp4%20%2A%20%28s%2Ely%20%2F%20s%2Emagnitude%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F4%2E%20Calculate%20the%20bounce%20vectors%0A%0A%20%20%20%20%20%20%20%20%2F%2FBounce%20c1%0A%20%20%20%20%20%20%20%20%2F%2Fusing%20p1B%20and%20p2A%0A%20%20%20%20%20%20%20%20c1%2Ebounce%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20c1%2Ebounce%2Ex%20%3D%20p1B%2Ex%20%2B%20p2A%2Ex%3B%0A%20%20%20%20%20%20%20%20c1%2Ebounce%2Ey%20%3D%20p1B%2Ey%20%2B%20p2A%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FBounce%20c2%0A%20%20%20%20%20%20%20%20%2F%2Fusing%20p1A%20and%20p2B%0A%20%20%20%20%20%20%20%20c2%2Ebounce%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20c2%2Ebounce%2Ex%20%3D%20p1A%2Ex%20%2B%20p2B%2Ex%3B%0A%20%20%20%20%20%20%20%20c2%2Ebounce%2Ey%20%3D%20p1A%2Ey%20%2B%20p2B%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20bounce%20vector%20to%20the%20circles%27%20velocity%0A%20%20%20%20%20%20%20%20%2F%2Fand%20add%20mass%20if%20the%20circle%20has%20a%20mass%20property%0A%20%20%20%20%20%20%20%20c1%2Evx%20%3D%20c1%2Ebounce%2Ex%20%2F%20c1%2Emass%3B%0A%20%20%20%20%20%20%20%20c1%2Evy%20%3D%20c1%2Ebounce%2Ey%20%2F%20c1%2Emass%3B%0A%20%20%20%20%20%20%20%20c2%2Evx%20%3D%20c2%2Ebounce%2Ex%20%2F%20c2%2Emass%3B%0A%20%20%20%20%20%20%20%20c2%2Evy%20%3D%20c2%2Ebounce%2Ey%20%2F%20c2%2Emass%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20hit%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2A%0A%20%20%20%20multipleCircleCollision%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Checks%20all%20the%20circles%20in%20an%20array%20for%20a%20collision%20against%0A%20%20%20%20all%20the%20other%20circles%20in%20an%20array%2C%20using%20%60movingCircleCollision%60%20%28above%29%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22multipleCircleCollision%22%2C%0A%20%20%20%20value%3A%20function%20multipleCircleCollision%28arrayOfCircles%29%20%7B%0A%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B1%5D%3B%0A%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20arrayOfCircles%2Elength%3B%20i%2B%2B%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20first%20circle%20to%20use%20in%20the%20collision%20check%0A%20%20%20%20%20%20%20%20var%20c1%20%3D%20arrayOfCircles%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%20i%20%2B%201%3B%20j%20%3C%20arrayOfCircles%2Elength%3B%20j%2B%2B%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20second%20circle%20to%20use%20in%20the%20collision%20check%0A%20%20%20%20%20%20%20%20%20%20var%20c2%20%3D%20arrayOfCircles%5Bj%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCheck%20for%20a%20collision%20and%20bounce%20the%20circles%20apart%20if%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fthey%20collide%2E%20Use%20an%20optional%20%60mass%60%20property%20on%20the%20sprite%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fto%20affect%20the%20bounciness%20of%20each%20marble%0A%20%20%20%20%20%20%20%20%20%20this%2EmovingCircleCollision%28c1%2C%20c2%2C%20global%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20rectangleCollision%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Use%20it%20to%20prevent%20two%20rectangular%20sprites%20from%20overlapping%2E%20%0A%20%20%20%20Optionally%2C%20make%20the%20first%20rectangle%20bounce%20off%20the%20second%20rectangle%2E%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%20with%20%60x%60%2C%20%60y%60%20%60centerX%60%2C%20%60centerY%60%2C%20%60halfWidth%60%20and%20%60halfHeight%60%20properties%2E%0A%20%20%20%20b%2E%20A%20sprite%20object%20with%20%60x%60%2C%20%60y%60%20%60centerX%60%2C%20%60centerY%60%2C%20%60halfWidth%60%20and%20%60halfHeight%60%20properties%2E%0A%20%20%20%20c%2E%20Optional%3A%20true%20or%20false%20to%20indicate%20whether%20or%20not%20the%20first%20sprite%0A%20%20%20%20should%20bounce%20off%20the%20second%20sprite%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22rectangleCollision%22%2C%0A%20%20%20%20value%3A%20function%20rectangleCollision%28r1%2C%20r2%29%20%7B%0A%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20arguments%5B3%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21r1%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28r1%29%3B%0A%20%20%20%20%20%20if%20%28%21r2%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28r2%29%3B%0A%0A%20%20%20%20%20%20var%20collision%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20combinedHalfWidths%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20combinedHalfHeights%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20overlapX%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20overlapY%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20vx%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20vy%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FCalculate%20the%20distance%20vector%0A%20%20%20%20%20%20if%20%28global%29%20%7B%0A%20%20%20%20%20%20%20%20vx%20%3D%20r1%2Egx%20%2B%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%20%2D%20%28r2%2Egx%20%2B%20r2%2EhalfWidth%20%2D%20r2%2ExAnchorOffset%29%3B%0A%20%20%20%20%20%20%20%20vy%20%3D%20r1%2Egy%20%2B%20r1%2EhalfHeight%20%2D%20r1%2EyAnchorOffset%20%2D%20%28r2%2Egy%20%2B%20r2%2EhalfHeight%20%2D%20r2%2EyAnchorOffset%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2Fvx%20%3D%20r1%2EcenterX%20%2D%20r2%2EcenterX%3B%0A%20%20%20%20%20%20%20%20%2F%2Fvy%20%3D%20r1%2EcenterY%20%2D%20r2%2EcenterY%3B%0A%20%20%20%20%20%20%20%20vx%20%3D%20r1%2Ex%20%2B%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%20%2D%20%28r2%2Ex%20%2B%20r2%2EhalfWidth%20%2D%20r2%2ExAnchorOffset%29%3B%0A%20%20%20%20%20%20%20%20vy%20%3D%20r1%2Ey%20%2B%20r1%2EhalfHeight%20%2D%20r1%2EyAnchorOffset%20%2D%20%28r2%2Ey%20%2B%20r2%2EhalfHeight%20%2D%20r2%2EyAnchorOffset%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FFigure%20out%20the%20combined%20half%2Dwidths%20and%20half%2Dheights%0A%20%20%20%20%20%20combinedHalfWidths%20%3D%20r1%2EhalfWidth%20%2B%20r2%2EhalfWidth%3B%0A%20%20%20%20%20%20combinedHalfHeights%20%3D%20r1%2EhalfHeight%20%2B%20r2%2EhalfHeight%3B%0A%0A%20%20%20%20%20%20%2F%2FCheck%20whether%20vx%20is%20less%20than%20the%20combined%20half%20widths%0A%20%20%20%20%20%20if%20%28Math%2Eabs%28vx%29%20%3C%20combinedHalfWidths%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FA%20collision%20might%20be%20occurring%21%0A%20%20%20%20%20%20%20%20%2F%2FCheck%20whether%20vy%20is%20less%20than%20the%20combined%20half%20heights%0A%20%20%20%20%20%20%20%20if%20%28Math%2Eabs%28vy%29%20%3C%20combinedHalfHeights%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FA%20collision%20has%20occurred%21%20This%20is%20good%21%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20out%20the%20size%20of%20the%20overlap%20on%20both%20the%20X%20and%20Y%20axes%0A%20%20%20%20%20%20%20%20%20%20overlapX%20%3D%20combinedHalfWidths%20%2D%20Math%2Eabs%28vx%29%3B%0A%20%20%20%20%20%20%20%20%20%20overlapY%20%3D%20combinedHalfHeights%20%2D%20Math%2Eabs%28vy%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20collision%20has%20occurred%20on%20the%20axis%20with%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%2Asmallest%2A%20amount%20of%20overlap%2E%20Let%27s%20figure%20out%20which%0A%20%20%20%20%20%20%20%20%20%20%2F%2Faxis%20that%20is%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28overlapX%20%3E%3D%20overlapY%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20collision%20is%20happening%20on%20the%20X%20axis%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FBut%20on%20which%20side%3F%20vy%20can%20tell%20us%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28vy%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20collision%20%3D%20%22top%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMove%20the%20rectangle%20out%20of%20the%20collision%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20r1%2Ey%20%3D%20r1%2Ey%20%2B%20overlapY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20collision%20%3D%20%22bottom%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMove%20the%20rectangle%20out%20of%20the%20collision%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20r1%2Ey%20%3D%20r1%2Ey%20%2D%20overlapY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FBounce%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28bounce%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20r1%2Evy%20%2A%3D%20%2D1%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2AAlternative%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20bounce%20surface%27s%20vx%20and%20vy%20properties%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20s%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%2Evx%20%3D%20r2%2Ex%20%2D%20r2%2Ex%20%2B%20r2%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%2Evy%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FBounce%20r1%20off%20the%20surface%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthis%2EbounceOffSurface%28r1%2C%20s%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2A%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20collision%20is%20happening%20on%20the%20Y%20axis%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FBut%20on%20which%20side%3F%20vx%20can%20tell%20us%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28vx%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collision%20%3D%20%22left%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMove%20the%20rectangle%20out%20of%20the%20collision%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r1%2Ex%20%3D%20r1%2Ex%20%2B%20overlapX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collision%20%3D%20%22right%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMove%20the%20rectangle%20out%20of%20the%20collision%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r1%2Ex%20%3D%20r1%2Ex%20%2D%20overlapX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FBounce%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28bounce%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r1%2Evx%20%2A%3D%20%2D1%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2AAlternative%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20bounce%20surface%27s%20vx%20and%20vy%20properties%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20s%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%2Evx%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%2Evy%20%3D%20r2%2Ey%20%2D%20r2%2Ey%20%2B%20r2%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FBounce%20r1%20off%20the%20surface%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EbounceOffSurface%28r1%2C%20s%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2A%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FNo%20collision%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%2F%2FNo%20collision%0A%0A%20%20%20%20%20%20%20%20%2F%2FReturn%20the%20collision%20string%2E%20it%20will%20be%20either%20%22top%22%2C%20%22right%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%22bottom%22%2C%20or%20%22left%22%20depending%20on%20which%20side%20of%20r1%20is%20touching%20r2%2E%0A%20%20%20%20%20%20return%20collision%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20hitTestRectangle%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Use%20it%20to%20find%20out%20if%20two%20rectangular%20sprites%20are%20touching%2E%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%20with%20%60centerX%60%2C%20%60centerY%60%2C%20%60halfWidth%60%20and%20%60halfHeight%60%20properties%2E%0A%20%20%20%20b%2E%20A%20sprite%20object%20with%20%60centerX%60%2C%20%60centerY%60%2C%20%60halfWidth%60%20and%20%60halfHeight%60%20properties%2E%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22hitTestRectangle%22%2C%0A%20%20%20%20value%3A%20function%20hitTestRectangle%28r1%2C%20r2%29%20%7B%0A%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21r1%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28r1%29%3B%0A%20%20%20%20%20%20if%20%28%21r2%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28r2%29%3B%0A%0A%20%20%20%20%20%20var%20hit%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20combinedHalfWidths%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20combinedHalfHeights%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20vx%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20vy%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FA%20variable%20to%20determine%20whether%20there%27s%20a%20collision%0A%20%20%20%20%20%20hit%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%2F%2FCalculate%20the%20distance%20vector%0A%20%20%20%20%20%20if%20%28global%29%20%7B%0A%20%20%20%20%20%20%20%20vx%20%3D%20r1%2Egx%20%2B%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%20%2D%20%28r2%2Egx%20%2B%20r2%2EhalfWidth%20%2D%20r2%2ExAnchorOffset%29%3B%0A%20%20%20%20%20%20%20%20vy%20%3D%20r1%2Egy%20%2B%20r1%2EhalfHeight%20%2D%20r1%2EyAnchorOffset%20%2D%20%28r2%2Egy%20%2B%20r2%2EhalfHeight%20%2D%20r2%2EyAnchorOffset%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20vx%20%3D%20r1%2Ex%20%2B%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%20%2D%20%28r2%2Ex%20%2B%20r2%2EhalfWidth%20%2D%20r2%2ExAnchorOffset%29%3B%0A%20%20%20%20%20%20%20%20vy%20%3D%20r1%2Ey%20%2B%20r1%2EhalfHeight%20%2D%20r1%2EyAnchorOffset%20%2D%20%28r2%2Ey%20%2B%20r2%2EhalfHeight%20%2D%20r2%2EyAnchorOffset%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FFigure%20out%20the%20combined%20half%2Dwidths%20and%20half%2Dheights%0A%20%20%20%20%20%20combinedHalfWidths%20%3D%20r1%2EhalfWidth%20%2B%20r2%2EhalfWidth%3B%0A%20%20%20%20%20%20combinedHalfHeights%20%3D%20r1%2EhalfHeight%20%2B%20r2%2EhalfHeight%3B%0A%0A%20%20%20%20%20%20%2F%2FCheck%20for%20a%20collision%20on%20the%20x%20axis%0A%20%20%20%20%20%20if%20%28Math%2Eabs%28vx%29%20%3C%20combinedHalfWidths%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FA%20collision%20might%20be%20occuring%2E%20Check%20for%20a%20collision%20on%20the%20y%20axis%0A%20%20%20%20%20%20%20%20if%20%28Math%2Eabs%28vy%29%20%3C%20combinedHalfHeights%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FThere%27s%20definitely%20a%20collision%20happening%0A%20%20%20%20%20%20%20%20%20%20hit%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FThere%27s%20no%20collision%20on%20the%20y%20axis%0A%20%20%20%20%20%20%20%20%20%20hit%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FThere%27s%20no%20collision%20on%20the%20x%20axis%0A%20%20%20%20%20%20%20%20hit%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%60hit%60%20will%20be%20either%20%60true%60%20or%20%60false%60%0A%20%20%20%20%20%20return%20hit%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20hitTestCircleRectangle%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Use%20it%20to%20find%20out%20if%20a%20circular%20shape%20is%20touching%20a%20rectangular%20shape%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%20with%20%60centerX%60%2C%20%60centerY%60%2C%20%60halfWidth%60%20and%20%60halfHeight%60%20properties%2E%0A%20%20%20%20b%2E%20A%20sprite%20object%20with%20%60centerX%60%2C%20%60centerY%60%2C%20%60halfWidth%60%20and%20%60halfHeight%60%20properties%2E%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22hitTestCircleRectangle%22%2C%0A%20%20%20%20value%3A%20function%20hitTestCircleRectangle%28c1%2C%20r1%29%20%7B%0A%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21r1%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28r1%29%3B%0A%20%20%20%20%20%20if%20%28%21c1%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28c1%29%3B%0A%0A%20%20%20%20%20%20var%20region%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20collision%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20c1x%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20c1y%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20r1x%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20r1y%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FUse%20either%20global%20or%20local%20coordinates%0A%20%20%20%20%20%20if%20%28global%29%20%7B%0A%20%20%20%20%20%20%20%20c1x%20%3D%20c1%2Egx%3B%0A%20%20%20%20%20%20%20%20c1y%20%3D%20c1%2Egy%3B%0A%20%20%20%20%20%20%20%20r1x%20%3D%20r1%2Egx%3B%0A%20%20%20%20%20%20%20%20r1y%20%3D%20r1%2Egy%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20c1x%20%3D%20c1%2Ex%3B%0A%20%20%20%20%20%20%20%20c1y%20%3D%20c1%2Ey%3B%0A%20%20%20%20%20%20%20%20r1x%20%3D%20r1%2Ex%3B%0A%20%20%20%20%20%20%20%20r1y%20%3D%20r1%2Ey%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIs%20the%20circle%20above%20the%20rectangle%27s%20top%20edge%3F%0A%20%20%20%20%20%20if%20%28c1y%20%2D%20c1%2EyAnchorOffset%20%3C%20r1y%20%2D%20r1%2EhalfHeight%20%2D%20r1%2EyAnchorOffset%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20it%20is%2C%20we%20need%20to%20check%20whether%20it%27s%20in%20the%0A%20%20%20%20%20%20%20%20%2F%2Ftop%20left%2C%20top%20center%20or%20top%20right%0A%20%20%20%20%20%20%20%20if%20%28c1x%20%2D%20c1%2ExAnchorOffset%20%3C%20r1x%20%2D%201%20%2D%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22topLeft%22%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28c1x%20%2D%20c1%2ExAnchorOffset%20%3E%20r1x%20%2B%201%20%2B%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22topRight%22%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22topMiddle%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThe%20circle%20isn%27t%20above%20the%20top%20edge%2C%20so%20it%20might%20be%0A%20%20%20%20%20%20%2F%2Fbelow%20the%20bottom%20edge%0A%20%20%20%20%20%20else%20if%20%28c1y%20%2D%20c1%2EyAnchorOffset%20%3E%20r1y%20%2B%20r1%2EhalfHeight%20%2D%20r1%2EyAnchorOffset%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20it%20is%2C%20we%20need%20to%20check%20whether%20it%27s%20in%20the%20bottom%20left%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fbottom%20center%2C%20or%20bottom%20right%0A%20%20%20%20%20%20%20%20%20%20if%20%28c1x%20%2D%20c1%2ExAnchorOffset%20%3C%20r1x%20%2D%201%20%2D%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22bottomLeft%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28c1x%20%2D%20c1%2ExAnchorOffset%20%3E%20r1x%20%2B%201%20%2B%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22bottomRight%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22bottomMiddle%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20circle%20isn%27t%20above%20the%20top%20edge%20or%20below%20the%20bottom%20edge%2C%0A%20%20%20%20%20%20%20%20%2F%2Fso%20it%20must%20be%20on%20the%20left%20or%20right%20side%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28c1x%20%2D%20c1%2ExAnchorOffset%20%3C%20r1x%20%2D%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22leftMiddle%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22rightMiddle%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIs%20this%20the%20circle%20touching%20the%20flat%20sides%0A%20%20%20%20%20%20%2F%2Fof%20the%20rectangle%3F%0A%20%20%20%20%20%20if%20%28region%20%3D%3D%3D%20%22topMiddle%22%20%7C%7C%20region%20%3D%3D%3D%20%22bottomMiddle%22%20%7C%7C%20region%20%3D%3D%3D%20%22leftMiddle%22%20%7C%7C%20region%20%3D%3D%3D%20%22rightMiddle%22%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FYes%2C%20it%20is%2C%20so%20do%20a%20standard%20rectangle%20vs%2E%20rectangle%20collision%20test%0A%20%20%20%20%20%20%20%20collision%20%3D%20this%2EhitTestRectangle%28c1%2C%20r1%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThe%20circle%20is%20touching%20one%20of%20the%20corners%2C%20so%20do%20a%0A%20%20%20%20%20%20%2F%2Fcircle%20vs%2E%20point%20collision%20test%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20point%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20switch%20%28region%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22topLeft%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ex%20%3D%20r1x%20%2D%20r1%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ey%20%3D%20r1y%20%2D%20r1%2EyAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22topRight%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ex%20%3D%20r1x%20%2B%20r1%2Ewidth%20%2D%20r1%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ey%20%3D%20r1y%20%2D%20r1%2EyAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22bottomLeft%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ex%20%3D%20r1x%20%2D%20r1%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ey%20%3D%20r1y%20%2B%20r1%2Eheight%20%2D%20r1%2EyAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22bottomRight%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ex%20%3D%20r1x%20%2B%20r1%2Ewidth%20%2D%20r1%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ey%20%3D%20r1y%20%2B%20r1%2Eheight%20%2D%20r1%2EyAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCheck%20for%20a%20collision%20between%20the%20circle%20and%20the%20point%0A%20%20%20%20%20%20%20%20%20%20collision%20%3D%20this%2EhitTestCirclePoint%28c1%2C%20point%2C%20global%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20result%20of%20the%20collision%2E%0A%20%20%20%20%20%20%2F%2FThe%20return%20value%20will%20be%20%60undefined%60%20if%20there%27s%20no%20collision%0A%20%20%20%20%20%20if%20%28collision%29%20%7B%0A%20%20%20%20%20%20%20%20return%20region%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20collision%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20hitTestCirclePoint%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Use%20it%20to%20find%20out%20if%20a%20circular%20shape%20is%20touching%20a%20point%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%20with%20%60centerX%60%2C%20%60centerY%60%2C%20and%20%60radius%60%20properties%2E%0A%20%20%20%20b%2E%20A%20point%20object%20with%20%60x%60%20and%20%60y%60%20properties%2E%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22hitTestCirclePoint%22%2C%0A%20%20%20%20value%3A%20function%20hitTestCirclePoint%28c1%2C%20point%29%20%7B%0A%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21c1%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28c1%29%3B%0A%0A%20%20%20%20%20%20%2F%2FA%20point%20is%20just%20a%20circle%20with%20a%20diameter%20of%0A%20%20%20%20%20%20%2F%2F1%20pixel%2C%20so%20we%20can%20cheat%2E%20All%20we%20need%20to%20do%20is%20an%20ordinary%20circle%20vs%2E%20circle%0A%20%20%20%20%20%20%2F%2FCollision%20test%2E%20Just%20supply%20the%20point%20with%20the%20properties%0A%20%20%20%20%20%20%2F%2Fit%20needs%0A%20%20%20%20%20%20point%2Ediameter%20%3D%201%3B%0A%20%20%20%20%20%20point%2Ewidth%20%3D%20point%2Ediameter%3B%0A%20%20%20%20%20%20point%2Eradius%20%3D%200%2E5%3B%0A%20%20%20%20%20%20point%2EcenterX%20%3D%20point%2Ex%3B%0A%20%20%20%20%20%20point%2EcenterY%20%3D%20point%2Ey%3B%0A%20%20%20%20%20%20point%2Egx%20%3D%20point%2Ex%3B%0A%20%20%20%20%20%20point%2Egy%20%3D%20point%2Ey%3B%0A%20%20%20%20%20%20point%2ExAnchorOffset%20%3D%200%3B%0A%20%20%20%20%20%20point%2EyAnchorOffset%20%3D%200%3B%0A%20%20%20%20%20%20point%2E%5FbumpPropertiesAdded%20%3D%20true%3B%0A%20%20%20%20%20%20return%20this%2EhitTestCircle%28c1%2C%20point%2C%20global%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20circleRectangleCollision%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Use%20it%20to%20bounce%20a%20circular%20shape%20off%20a%20rectangular%20shape%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%20with%20%60centerX%60%2C%20%60centerY%60%2C%20%60halfWidth%60%20and%20%60halfHeight%60%20properties%2E%0A%20%20%20%20b%2E%20A%20sprite%20object%20with%20%60centerX%60%2C%20%60centerY%60%2C%20%60halfWidth%60%20and%20%60halfHeight%60%20properties%2E%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22circleRectangleCollision%22%2C%0A%20%20%20%20value%3A%20function%20circleRectangleCollision%28c1%2C%20r1%29%20%7B%0A%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B3%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21r1%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28r1%29%3B%0A%20%20%20%20%20%20if%20%28%21c1%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28c1%29%3B%0A%0A%20%20%20%20%20%20var%20region%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20collision%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20c1x%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20c1y%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20r1x%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20r1y%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FUse%20either%20the%20global%20or%20local%20coordinates%0A%20%20%20%20%20%20if%20%28global%29%20%7B%0A%20%20%20%20%20%20%20%20c1x%20%3D%20c1%2Egx%3B%0A%20%20%20%20%20%20%20%20c1y%20%3D%20c1%2Egy%3B%0A%20%20%20%20%20%20%20%20r1x%20%3D%20r1%2Egx%3B%0A%20%20%20%20%20%20%20%20r1y%20%3D%20r1%2Egy%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20c1x%20%3D%20c1%2Ex%3B%0A%20%20%20%20%20%20%20%20c1y%20%3D%20c1%2Ey%3B%0A%20%20%20%20%20%20%20%20r1x%20%3D%20r1%2Ex%3B%0A%20%20%20%20%20%20%20%20r1y%20%3D%20r1%2Ey%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIs%20the%20circle%20above%20the%20rectangle%27s%20top%20edge%3F%0A%20%20%20%20%20%20if%20%28c1y%20%2D%20c1%2EyAnchorOffset%20%3C%20r1y%20%2D%20r1%2EhalfHeight%20%2D%20r1%2EyAnchorOffset%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20it%20is%2C%20we%20need%20to%20check%20whether%20it%27s%20in%20the%0A%20%20%20%20%20%20%20%20%2F%2Ftop%20left%2C%20top%20center%20or%20top%20right%0A%20%20%20%20%20%20%20%20if%20%28c1x%20%2D%20c1%2ExAnchorOffset%20%3C%20r1x%20%2D%201%20%2D%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22topLeft%22%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28c1x%20%2D%20c1%2ExAnchorOffset%20%3E%20r1x%20%2B%201%20%2B%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22topRight%22%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22topMiddle%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThe%20circle%20isn%27t%20above%20the%20top%20edge%2C%20so%20it%20might%20be%0A%20%20%20%20%20%20%2F%2Fbelow%20the%20bottom%20edge%0A%20%20%20%20%20%20else%20if%20%28c1y%20%2D%20c1%2EyAnchorOffset%20%3E%20r1y%20%2B%20r1%2EhalfHeight%20%2D%20r1%2EyAnchorOffset%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20it%20is%2C%20we%20need%20to%20check%20whether%20it%27s%20in%20the%20bottom%20left%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fbottom%20center%2C%20or%20bottom%20right%0A%20%20%20%20%20%20%20%20%20%20if%20%28c1x%20%2D%20c1%2ExAnchorOffset%20%3C%20r1x%20%2D%201%20%2D%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22bottomLeft%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28c1x%20%2D%20c1%2ExAnchorOffset%20%3E%20r1x%20%2B%201%20%2B%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22bottomRight%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22bottomMiddle%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20circle%20isn%27t%20above%20the%20top%20edge%20or%20below%20the%20bottom%20edge%2C%0A%20%20%20%20%20%20%20%20%2F%2Fso%20it%20must%20be%20on%20the%20left%20or%20right%20side%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28c1x%20%2D%20c1%2ExAnchorOffset%20%3C%20r1x%20%2D%20r1%2EhalfWidth%20%2D%20r1%2ExAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22leftMiddle%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20region%20%3D%20%22rightMiddle%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIs%20this%20the%20circle%20touching%20the%20flat%20sides%0A%20%20%20%20%20%20%2F%2Fof%20the%20rectangle%3F%0A%20%20%20%20%20%20if%20%28region%20%3D%3D%3D%20%22topMiddle%22%20%7C%7C%20region%20%3D%3D%3D%20%22bottomMiddle%22%20%7C%7C%20region%20%3D%3D%3D%20%22leftMiddle%22%20%7C%7C%20region%20%3D%3D%3D%20%22rightMiddle%22%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FYes%2C%20it%20is%2C%20so%20do%20a%20standard%20rectangle%20vs%2E%20rectangle%20collision%20test%0A%20%20%20%20%20%20%20%20collision%20%3D%20this%2ErectangleCollision%28c1%2C%20r1%2C%20bounce%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThe%20circle%20is%20touching%20one%20of%20the%20corners%2C%20so%20do%20a%0A%20%20%20%20%20%20%2F%2Fcircle%20vs%2E%20point%20collision%20test%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20point%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20switch%20%28region%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22topLeft%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ex%20%3D%20r1x%20%2D%20r1%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ey%20%3D%20r1y%20%2D%20r1%2EyAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22topRight%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ex%20%3D%20r1x%20%2B%20r1%2Ewidth%20%2D%20r1%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ey%20%3D%20r1y%20%2D%20r1%2EyAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22bottomLeft%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ex%20%3D%20r1x%20%2D%20r1%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ey%20%3D%20r1y%20%2B%20r1%2Eheight%20%2D%20r1%2EyAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22bottomRight%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ex%20%3D%20r1x%20%2B%20r1%2Ewidth%20%2D%20r1%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point%2Ey%20%3D%20r1y%20%2B%20r1%2Eheight%20%2D%20r1%2EyAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCheck%20for%20a%20collision%20between%20the%20circle%20and%20the%20point%0A%20%20%20%20%20%20%20%20%20%20collision%20%3D%20this%2EcirclePointCollision%28c1%2C%20point%2C%20bounce%2C%20global%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28collision%29%20%7B%0A%20%20%20%20%20%20%20%20return%20region%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20collision%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20circlePointCollision%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Use%20it%20to%20boucnce%20a%20circle%20off%20a%20point%2E%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%20with%20%60centerX%60%2C%20%60centerY%60%2C%20and%20%60radius%60%20properties%2E%0A%20%20%20%20b%2E%20A%20point%20object%20with%20%60x%60%20and%20%60y%60%20properties%2E%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22circlePointCollision%22%2C%0A%20%20%20%20value%3A%20function%20circlePointCollision%28c1%2C%20point%29%20%7B%0A%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B3%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21c1%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28c1%29%3B%0A%0A%20%20%20%20%20%20%2F%2FA%20point%20is%20just%20a%20circle%20with%20a%20diameter%20of%0A%20%20%20%20%20%20%2F%2F1%20pixel%2C%20so%20we%20can%20cheat%2E%20All%20we%20need%20to%20do%20is%20an%20ordinary%20circle%20vs%2E%20circle%0A%20%20%20%20%20%20%2F%2FCollision%20test%2E%20Just%20supply%20the%20point%20with%20the%20properties%0A%20%20%20%20%20%20%2F%2Fit%20needs%0A%20%20%20%20%20%20point%2Ediameter%20%3D%201%3B%0A%20%20%20%20%20%20point%2Ewidth%20%3D%20point%2Ediameter%3B%0A%20%20%20%20%20%20point%2Eradius%20%3D%200%2E5%3B%0A%20%20%20%20%20%20point%2EcenterX%20%3D%20point%2Ex%3B%0A%20%20%20%20%20%20point%2EcenterY%20%3D%20point%2Ey%3B%0A%20%20%20%20%20%20point%2Egx%20%3D%20point%2Ex%3B%0A%20%20%20%20%20%20point%2Egy%20%3D%20point%2Ey%3B%0A%20%20%20%20%20%20point%2ExAnchorOffset%20%3D%200%3B%0A%20%20%20%20%20%20point%2EyAnchorOffset%20%3D%200%3B%0A%20%20%20%20%20%20point%2E%5FbumpPropertiesAdded%20%3D%20true%3B%0A%20%20%20%20%20%20return%20this%2EcircleCollision%28c1%2C%20point%2C%20bounce%2C%20global%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20bounceOffSurface%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Use%20this%20to%20bounce%20an%20object%20off%20another%20object%2E%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20An%20object%20with%20%60v%2Ex%60%20and%20%60v%2Ey%60%20properties%2E%20This%20represents%20the%20object%20that%20is%20colliding%0A%20%20%20%20with%20a%20surface%2E%0A%20%20%20%20b%2E%20An%20object%20with%20%60x%60%20and%20%60y%60%20properties%2E%20This%20represents%20the%20surface%20that%20the%20object%0A%20%20%20%20is%20colliding%20into%2E%0A%20%20%20%20The%20first%20object%20can%20optionally%20have%20a%20mass%20property%20that%27s%20greater%20than%201%2E%20The%20mass%20will%0A%20%20%20%20be%20used%20to%20dampen%20the%20bounce%20effect%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22bounceOffSurface%22%2C%0A%20%20%20%20value%3A%20function%20bounceOffSurface%28o%2C%20s%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21o%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28o%29%3B%0A%0A%20%20%20%20%20%20var%20dp1%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20dp2%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20p1%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20p2%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20bounce%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20mass%20%3D%20o%2Emass%20%7C%7C%201%3B%0A%0A%20%20%20%20%20%20%2F%2F1%2E%20Calculate%20the%20collision%20surface%27s%20properties%0A%20%20%20%20%20%20%2F%2FFind%20the%20surface%20vector%27s%20left%20normal%0A%20%20%20%20%20%20s%2Elx%20%3D%20s%2Ey%3B%0A%20%20%20%20%20%20s%2Ely%20%3D%20%2Ds%2Ex%3B%0A%0A%20%20%20%20%20%20%2F%2FFind%20its%20magnitude%0A%20%20%20%20%20%20s%2Emagnitude%20%3D%20Math%2Esqrt%28s%2Ex%20%2A%20s%2Ex%20%2B%20s%2Ey%20%2A%20s%2Ey%29%3B%0A%0A%20%20%20%20%20%20%2F%2FFind%20its%20normalized%20values%0A%20%20%20%20%20%20s%2Edx%20%3D%20s%2Ex%20%2F%20s%2Emagnitude%3B%0A%20%20%20%20%20%20s%2Edy%20%3D%20s%2Ey%20%2F%20s%2Emagnitude%3B%0A%0A%20%20%20%20%20%20%2F%2F2%2E%20Bounce%20the%20object%20%28o%29%20off%20the%20surface%20%28s%29%0A%0A%20%20%20%20%20%20%2F%2FFind%20the%20dot%20product%20between%20the%20object%20and%20the%20surface%0A%20%20%20%20%20%20dp1%20%3D%20o%2Evx%20%2A%20s%2Edx%20%2B%20o%2Evy%20%2A%20s%2Edy%3B%0A%0A%20%20%20%20%20%20%2F%2FProject%20the%20object%27s%20velocity%20onto%20the%20collision%20surface%0A%20%20%20%20%20%20p1%2Evx%20%3D%20dp1%20%2A%20s%2Edx%3B%0A%20%20%20%20%20%20p1%2Evy%20%3D%20dp1%20%2A%20s%2Edy%3B%0A%0A%20%20%20%20%20%20%2F%2FFind%20the%20dot%20product%20of%20the%20object%20and%20the%20surface%27s%20left%20normal%20%28s%2Elx%20and%20s%2Ely%29%0A%20%20%20%20%20%20dp2%20%3D%20o%2Evx%20%2A%20%28s%2Elx%20%2F%20s%2Emagnitude%29%20%2B%20o%2Evy%20%2A%20%28s%2Ely%20%2F%20s%2Emagnitude%29%3B%0A%0A%20%20%20%20%20%20%2F%2FProject%20the%20object%27s%20velocity%20onto%20the%20surface%27s%20left%20normal%0A%20%20%20%20%20%20p2%2Evx%20%3D%20dp2%20%2A%20%28s%2Elx%20%2F%20s%2Emagnitude%29%3B%0A%20%20%20%20%20%20p2%2Evy%20%3D%20dp2%20%2A%20%28s%2Ely%20%2F%20s%2Emagnitude%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReverse%20the%20projection%20on%20the%20surface%27s%20left%20normal%0A%20%20%20%20%20%20p2%2Evx%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20p2%2Evy%20%2A%3D%20%2D1%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20up%20the%20projections%20to%20create%20a%20new%20bounce%20vector%0A%20%20%20%20%20%20bounce%2Ex%20%3D%20p1%2Evx%20%2B%20p2%2Evx%3B%0A%20%20%20%20%20%20bounce%2Ey%20%3D%20p1%2Evy%20%2B%20p2%2Evy%3B%0A%0A%20%20%20%20%20%20%2F%2FAssign%20the%20bounce%20vector%20to%20the%20object%27s%20velocity%0A%20%20%20%20%20%20%2F%2Fwith%20optional%20mass%20to%20dampen%20the%20effect%0A%20%20%20%20%20%20o%2Evx%20%3D%20bounce%2Ex%20%2F%20mass%3B%0A%20%20%20%20%20%20o%2Evy%20%3D%20bounce%2Ey%20%2F%20mass%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20contain%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%60contain%60%20can%20be%20used%20to%20contain%20a%20sprite%20with%20%60x%60%20and%0A%20%20%20%20%60y%60%20properties%20inside%20a%20rectangular%20area%2E%0A%20%20%20%20%20The%20%60contain%60%20function%20takes%20four%20arguments%3A%20a%20sprite%20with%20%60x%60%20and%20%60y%60%0A%20%20%20%20properties%2C%20an%20object%20literal%20with%20%60x%60%2C%20%60y%60%2C%20%60width%60%20and%20%60height%60%20properties%2E%20The%20%0A%20%20%20%20third%20argument%20is%20a%20Boolean%20%28true%2Ffalse%29%20value%20that%20determines%20if%20the%20sprite%0A%20%20%20%20should%20bounce%20when%20it%20hits%20the%20edge%20of%20the%20container%2E%20The%20fourth%20argument%0A%20%20%20%20is%20an%20extra%20user%2Ddefined%20callback%20function%20that%20you%20can%20call%20when%20the%0A%20%20%20%20sprite%20hits%20the%20container%0A%20%20%20%20%60%60%60js%0A%20%20%20%20contain%28anySprite%2C%20%7Bx%3A%200%2C%20y%3A%200%2C%20width%3A%20512%2C%20height%3A%20512%7D%2C%20true%2C%20callbackFunction%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20The%20code%20above%20will%20contain%20the%20sprite%27s%20position%20inside%20the%20512%20by%0A%20%20%20%20512%20pixel%20area%20defined%20by%20the%20object%2E%20If%20the%20sprite%20hits%20the%20edges%20of%0A%20%20%20%20the%20container%2C%20it%20will%20bounce%2E%20The%20%60callBackFunction%60%20will%20run%20if%20%0A%20%20%20%20there%27s%20a%20collision%2E%0A%20%20%20%20%20An%20additional%20feature%20of%20the%20%60contain%60%20method%20is%20that%20if%20the%20sprite%0A%20%20%20%20has%20a%20%60mass%60%20property%2C%20it%20will%20be%20used%20to%20dampen%20the%20sprite%27s%20bounce%0A%20%20%20%20in%20a%20natural%20looking%20way%2E%0A%20%20%20%20%20If%20the%20sprite%20bumps%20into%20any%20of%20the%20containing%20object%27s%20boundaries%2C%0A%20%20%20%20the%20%60contain%60%20function%20will%20return%20a%20value%20that%20tells%20you%20which%20side%0A%20%20%20%20the%20sprite%20bumped%20into%3A%20%E2%80%9Cleft%E2%80%9D%2C%20%E2%80%9Ctop%E2%80%9D%2C%20%E2%80%9Cright%E2%80%9D%20or%20%E2%80%9Cbottom%E2%80%9D%2E%20Here%27s%20how%0A%20%20%20%20you%20could%20keep%20the%20sprite%20contained%20and%20also%20find%20out%20which%20boundary%0A%20%20%20%20it%20hit%3A%0A%20%20%20%20%60%60%60js%0A%20%20%20%20%2F%2FContain%20the%20sprite%20and%20find%20the%20collision%20value%0A%20%20%20%20let%20collision%20%3D%20contain%28anySprite%2C%20%7Bx%3A%200%2C%20y%3A%200%2C%20width%3A%20512%2C%20height%3A%20512%7D%29%3B%0A%20%20%20%20%20%2F%2FIf%20there%27s%20a%20collision%2C%20display%20the%20boundary%20that%20the%20collision%20happened%20on%0A%20%20%20%20if%28collision%29%20%7B%0A%20%20%20%20%20%20if%20collision%2Ehas%28%22left%22%29%20console%2Elog%28%22The%20sprite%20hit%20the%20left%22%29%3B%20%20%0A%20%20%20%20%20%20if%20collision%2Ehas%28%22top%22%29%20console%2Elog%28%22The%20sprite%20hit%20the%20top%22%29%3B%20%20%0A%20%20%20%20%20%20if%20collision%2Ehas%28%22right%22%29%20console%2Elog%28%22The%20sprite%20hit%20the%20right%22%29%3B%20%20%0A%20%20%20%20%20%20if%20collision%2Ehas%28%22bottom%22%29%20console%2Elog%28%22The%20sprite%20hit%20the%20bottom%22%29%3B%20%20%0A%20%20%20%20%7D%0A%20%20%20%20%60%60%60%0A%20%20%20%20If%20the%20sprite%20doesn%27t%20hit%20a%20boundary%2C%20the%20value%20of%0A%20%20%20%20%60collision%60%20will%20be%20%60undefined%60%2E%20%0A%20%20%20%20%2A%2F%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%20contain%28sprite%2C%20container%2C%20bounce%20%3D%20false%2C%20extra%20%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FHelper%20methods%20that%20compensate%20for%20any%20possible%20shift%20the%20the%0A%20%20%20%20%20%20%20%2F%2Fsprites%27%20anchor%20points%0A%20%20%20%20%20%20%20let%20nudgeAnchor%20%3D%20%28o%2C%20value%2C%20axis%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%5Baxis%5D%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%20%2A%20%28%281%20%2D%20o%2Eanchor%5Baxis%5D%29%20%2D%20o%2Eanchor%5Baxis%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%20%0A%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20let%20compensateForAnchor%20%3D%20%28o%2C%20value%2C%20axis%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%5Baxis%5D%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%20%2A%20o%2Eanchor%5Baxis%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20return%200%3B%20%0A%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20let%20compensateForAnchors%20%3D%20%28a%2C%20b%2C%20property1%2C%20property2%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20compensateForAnchor%28a%2C%20a%5Bproperty1%5D%2C%20property2%29%20%2B%20compensateForAnchor%28b%2C%20b%5Bproperty1%5D%2C%20property2%29%0A%20%20%20%20%20%20%20%7D%3B%20%20%20%20%0A%20%20%20%20%20%20%20%2F%2FCreate%20a%20set%20called%20%60collision%60%20to%20keep%20track%20of%20the%0A%20%20%20%20%20%20%20%2F%2Fboundaries%20with%20which%20the%20sprite%20is%20colliding%0A%20%20%20%20%20%20%20let%20collision%20%3D%20new%20Set%28%29%3B%0A%20%20%20%20%20%20%20%20%2F%2FLeft%0A%20%20%20%20%20%20%20if%20%28sprite%2Ex%20%2D%20compensateForAnchor%28sprite%2C%20sprite%2Ewidth%2C%20%22x%22%29%20%3C%20container%2Ex%20%2D%20sprite%2Eparent%2Egx%20%2D%20compensateForAnchor%28container%2C%20container%2Ewidth%2C%20%22x%22%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%2F%2FBounce%20the%20sprite%20if%20%60bounce%60%20is%20true%0A%20%20%20%20%20%20%20%20%20if%20%28bounce%29%20sprite%2Evx%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20sprite%20has%20%60mass%60%2C%20let%20the%20mass%0A%20%20%20%20%20%20%20%20%20%2F%2Faffect%20the%20sprite%27s%20velocity%0A%20%20%20%20%20%20%20%20%20if%28sprite%2Emass%29%20sprite%2Evx%20%2F%3D%20sprite%2Emass%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2FKeep%20the%20sprite%20inside%20the%20container%0A%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20container%2Ex%20%2D%20sprite%2Eparent%2Egx%20%2B%20compensateForAnchor%28sprite%2C%20sprite%2Ewidth%2C%20%22x%22%29%20%2D%20compensateForAnchor%28container%2C%20container%2Ewidth%2C%20%22x%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20%22left%22%20to%20the%20collision%20set%0A%20%20%20%20%20%20%20%20%20collision%2Eadd%28%22left%22%29%3B%0A%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2FTop%0A%20%20%20%20%20%20%20if%20%28sprite%2Ey%20%2D%20compensateForAnchor%28sprite%2C%20sprite%2Eheight%2C%20%22y%22%29%20%3C%20container%2Ey%20%2D%20sprite%2Eparent%2Egy%20%2D%20compensateForAnchor%28container%2C%20container%2Eheight%2C%20%22y%22%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20if%20%28bounce%29%20sprite%2Evy%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20%20if%28sprite%2Emass%29%20sprite%2Evy%20%2F%3D%20sprite%2Emass%3B%0A%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20container%2Ex%20%2D%20sprite%2Eparent%2Egy%20%2B%20compensateForAnchor%28sprite%2C%20sprite%2Eheight%2C%20%22y%22%29%20%2D%20compensateForAnchor%28container%2C%20container%2Eheight%2C%20%22y%22%29%3B%0A%20%20%20%20%20%20%20%20%20collision%2Eadd%28%22top%22%29%3B%0A%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2FRight%0A%20%20%20%20%20%20%20if%20%28sprite%2Ex%20%2D%20compensateForAnchor%28sprite%2C%20sprite%2Ewidth%2C%20%22x%22%29%20%2B%20sprite%2Ewidth%20%3E%20container%2Ewidth%20%2D%20compensateForAnchor%28container%2C%20container%2Ewidth%2C%20%22x%22%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20if%20%28bounce%29%20sprite%2Evx%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20%20if%28sprite%2Emass%29%20sprite%2Evx%20%2F%3D%20sprite%2Emass%3B%0A%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20container%2Ewidth%20%2D%20sprite%2Ewidth%20%2B%20compensateForAnchor%28sprite%2C%20sprite%2Ewidth%2C%20%22x%22%29%20%2D%20compensateForAnchor%28container%2C%20container%2Ewidth%2C%20%22x%22%29%3B%0A%20%20%20%20%20%20%20%20%20collision%2Eadd%28%22right%22%29%3B%0A%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2FBottom%0A%20%20%20%20%20%20%20if%20%28sprite%2Ey%20%2D%20compensateForAnchor%28sprite%2C%20sprite%2Eheight%2C%20%22y%22%29%20%2B%20sprite%2Eheight%20%3E%20container%2Eheight%20%2D%20compensateForAnchor%28container%2C%20container%2Eheight%2C%20%22y%22%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20if%20%28bounce%29%20sprite%2Evy%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20%20if%28sprite%2Emass%29%20sprite%2Evy%20%2F%3D%20sprite%2Emass%3B%0A%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20container%2Eheight%20%2D%20sprite%2Eheight%20%2B%20compensateForAnchor%28sprite%2C%20sprite%2Eheight%2C%20%22y%22%29%20%2D%20compensateForAnchor%28container%2C%20container%2Eheight%2C%20%22y%22%29%3B%0A%20%20%20%20%20%20%20%20%20collision%2Eadd%28%22bottom%22%29%3B%0A%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2FIf%20there%20were%20no%20collisions%2C%20set%20%60collision%60%20to%20%60undefined%60%0A%20%20%20%20%20%20%20if%20%28collision%2Esize%20%3D%3D%3D%200%29%20collision%20%3D%20undefined%3B%0A%20%20%20%20%20%20%20%20%2F%2FThe%20%60extra%60%20function%20runs%20if%20there%20was%20a%20collision%0A%20%20%20%20%20%20%20%2F%2Fand%20%60extra%60%20has%20been%20defined%0A%20%20%20%20%20%20%20if%20%28collision%20%26%26%20extra%29%20extra%28collision%29%3B%0A%20%20%20%20%20%20%20%20%2F%2FReturn%20the%20%60collision%60%20value%0A%20%20%20%20%20%20%20return%20collision%3B%0A%20%20%20%20%20%7D%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22contain%22%2C%0A%20%20%20%20value%3A%20function%20contain%28sprite%2C%20container%29%20%7B%0A%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20extra%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B3%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20collision%20properties%0A%20%20%20%20%20%20if%20%28%21sprite%2E%5FbumpPropertiesAdded%29%20this%2EaddCollisionProperties%28sprite%29%3B%0A%0A%20%20%20%20%20%20%2F%2FGive%20the%20container%20x%20and%20y%20anchor%20offset%20values%2C%20if%20it%20doesn%27t%0A%20%20%20%20%20%20%2F%2Fhave%20any%0A%20%20%20%20%20%20if%20%28container%2ExAnchorOffset%20%3D%3D%3D%20undefined%29%20container%2ExAnchorOffset%20%3D%200%3B%0A%20%20%20%20%20%20if%20%28container%2EyAnchorOffset%20%3D%3D%3D%20undefined%29%20container%2EyAnchorOffset%20%3D%200%3B%0A%20%20%20%20%20%20if%20%28sprite%2Eparent%2Egx%20%3D%3D%3D%20undefined%29%20sprite%2Eparent%2Egx%20%3D%200%3B%0A%20%20%20%20%20%20if%20%28sprite%2Eparent%2Egy%20%3D%3D%3D%20undefined%29%20sprite%2Eparent%2Egy%20%3D%200%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20a%20Set%20called%20%60collision%60%20to%20keep%20track%20of%20the%0A%20%20%20%20%20%20%2F%2Fboundaries%20with%20which%20the%20sprite%20is%20colliding%0A%20%20%20%20%20%20var%20collision%20%3D%20new%20Set%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FLeft%0A%20%20%20%20%20%20if%20%28sprite%2Ex%20%2D%20sprite%2ExAnchorOffset%20%3C%20container%2Ex%20%2D%20sprite%2Eparent%2Egx%20%2D%20container%2ExAnchorOffset%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FBounce%20the%20sprite%20if%20%60bounce%60%20is%20true%0A%20%20%20%20%20%20%20%20if%20%28bounce%29%20sprite%2Evx%20%2A%3D%20%2D1%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20sprite%20has%20%60mass%60%2C%20let%20the%20mass%0A%20%20%20%20%20%20%20%20%2F%2Faffect%20the%20sprite%27s%20velocity%0A%20%20%20%20%20%20%20%20if%20%28sprite%2Emass%29%20sprite%2Evx%20%2F%3D%20sprite%2Emass%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FReposition%20the%20sprite%20inside%20the%20container%0A%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20container%2Ex%20%2D%20sprite%2Eparent%2Egx%20%2D%20container%2ExAnchorOffset%20%2B%20sprite%2ExAnchorOffset%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FMake%20a%20record%20of%20the%20side%20which%20the%20container%20hit%0A%20%20%20%20%20%20%20%20collision%2Eadd%28%22left%22%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FTop%0A%20%20%20%20%20%20if%20%28sprite%2Ey%20%2D%20sprite%2EyAnchorOffset%20%3C%20container%2Ey%20%2D%20sprite%2Eparent%2Egy%20%2D%20container%2EyAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28bounce%29%20sprite%2Evy%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20if%20%28sprite%2Emass%29%20sprite%2Evy%20%2F%3D%20sprite%2Emass%3B%0A%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20container%2Ey%20%2D%20sprite%2Eparent%2Egy%20%2D%20container%2EyAnchorOffset%20%2B%20sprite%2EyAnchorOffset%3B%3B%0A%20%20%20%20%20%20%20%20collision%2Eadd%28%22top%22%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FRight%0A%20%20%20%20%20%20if%20%28sprite%2Ex%20%2D%20sprite%2ExAnchorOffset%20%2B%20sprite%2Ewidth%20%3E%20container%2Ewidth%20%2D%20container%2ExAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28bounce%29%20sprite%2Evx%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20if%20%28sprite%2Emass%29%20sprite%2Evx%20%2F%3D%20sprite%2Emass%3B%0A%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20container%2Ewidth%20%2D%20sprite%2Ewidth%20%2D%20container%2ExAnchorOffset%20%2B%20sprite%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20collision%2Eadd%28%22right%22%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FBottom%0A%20%20%20%20%20%20if%20%28sprite%2Ey%20%2D%20sprite%2EyAnchorOffset%20%2B%20sprite%2Eheight%20%3E%20container%2Eheight%20%2D%20container%2EyAnchorOffset%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28bounce%29%20sprite%2Evy%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20if%20%28sprite%2Emass%29%20sprite%2Evy%20%2F%3D%20sprite%2Emass%3B%0A%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20container%2Eheight%20%2D%20sprite%2Eheight%20%2D%20container%2EyAnchorOffset%20%2B%20sprite%2EyAnchorOffset%3B%0A%20%20%20%20%20%20%20%20collision%2Eadd%28%22bottom%22%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIf%20there%20were%20no%20collisions%2C%20set%20%60collision%60%20to%20%60undefined%60%0A%20%20%20%20%20%20if%20%28collision%2Esize%20%3D%3D%3D%200%29%20collision%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60extra%60%20function%20runs%20if%20there%20was%20a%20collision%0A%20%20%20%20%20%20%2F%2Fand%20%60extra%60%20has%20been%20defined%0A%20%20%20%20%20%20if%20%28collision%20%26%26%20extra%29%20extra%28collision%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20%60collision%60%20value%0A%20%20%20%20%20%20return%20collision%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60outsideBounds%60%20checks%20whether%20a%20sprite%20is%20outide%20the%20boundary%20of%0A%20%20%20%20%2F%2Fanother%20object%2E%20It%20returns%20an%20object%20called%20%60collision%60%2E%20%60collision%60%20will%20be%20%60undefined%60%20if%20there%27s%20no%0A%20%20%20%20%2F%2Fcollision%2E%20But%20if%20there%20is%20a%20collision%2C%20%60collision%60%20will%20be%0A%20%20%20%20%2F%2Freturned%20as%20a%20Set%20containg%20strings%20that%20tell%20you%20which%20boundary%0A%20%20%20%20%2F%2Fside%20was%20crossed%3A%20%22left%22%2C%20%22right%22%2C%20%22top%22%20or%20%22bottom%22%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22outsideBounds%22%2C%0A%20%20%20%20value%3A%20function%20outsideBounds%28s%2C%20bounds%2C%20extra%29%20%7B%0A%0A%20%20%20%20%20%20var%20x%20%3D%20bounds%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20y%20%3D%20bounds%2Ey%2C%0A%20%20%20%20%20%20%20%20%20%20width%20%3D%20bounds%2Ewidth%2C%0A%20%20%20%20%20%20%20%20%20%20height%20%3D%20bounds%2Eheight%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60collision%60%20object%20is%20used%20to%20store%20which%0A%20%20%20%20%20%20%2F%2Fside%20of%20the%20containing%20rectangle%20the%20sprite%20hits%0A%20%20%20%20%20%20var%20collision%20%3D%20new%20Set%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FLeft%0A%20%20%20%20%20%20if%20%28s%2Ex%20%3C%20x%20%2D%20s%2Ewidth%29%20%7B%0A%20%20%20%20%20%20%20%20collision%2Eadd%28%22left%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2FTop%0A%20%20%20%20%20%20if%20%28s%2Ey%20%3C%20y%20%2D%20s%2Eheight%29%20%7B%0A%20%20%20%20%20%20%20%20collision%2Eadd%28%22top%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2FRight%0A%20%20%20%20%20%20if%20%28s%2Ex%20%3E%20width%20%2B%20s%2Ewidth%29%20%7B%0A%20%20%20%20%20%20%20%20collision%2Eadd%28%22right%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2FBottom%0A%20%20%20%20%20%20if%20%28s%2Ey%20%3E%20height%20%2B%20s%2Eheight%29%20%7B%0A%20%20%20%20%20%20%20%20collision%2Eadd%28%22bottom%22%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIf%20there%20were%20no%20collisions%2C%20set%20%60collision%60%20to%20%60undefined%60%0A%20%20%20%20%20%20if%20%28collision%2Esize%20%3D%3D%3D%200%29%20collision%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60extra%60%20function%20runs%20if%20there%20was%20a%20collision%0A%20%20%20%20%20%20%2F%2Fand%20%60extra%60%20has%20been%20defined%0A%20%20%20%20%20%20if%20%28collision%20%26%26%20extra%29%20extra%28collision%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20%60collision%60%20object%0A%20%20%20%20%20%20return%20collision%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%5FgetCenter%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20A%20utility%20that%20finds%20the%20center%20point%20of%20the%20sprite%2E%20If%20it%27s%20anchor%20point%20is%20the%0A%20%20%20%20sprite%27s%20top%20left%20corner%2C%20then%20the%20center%20is%20calculated%20from%20that%20point%2E%0A%20%20%20%20If%20the%20anchor%20point%20has%20been%20shifted%2C%20then%20the%20anchor%20x%2Fy%20point%20is%20used%20as%20the%20sprite%27s%20center%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22%5FgetCenter%22%2C%0A%20%20%20%20value%3A%20function%20%5FgetCenter%28o%2C%20dimension%2C%20axis%29%20%7B%0A%20%20%20%20%20%20if%20%28o%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%5Baxis%5D%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fconsole%2Elog%28o%2Eanchor%5Baxis%5D%29%0A%20%20%20%20%20%20%20%20%20%20return%20dimension%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20dimension%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20hit%0A%20%20%20%20%2D%2D%2D%0A%20%20%20%20A%20convenient%20universal%20collision%20function%20to%20test%20for%20collisions%0A%20%20%20%20between%20rectangles%2C%20circles%2C%20and%20points%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22hit%22%2C%0A%20%20%20%20value%3A%20function%20hit%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20var%20react%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20global%20%3D%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20extra%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FLocal%20references%20to%20bump%27s%20collision%20methods%0A%20%20%20%20%20%20var%20hitTestPoint%20%3D%20this%2EhitTestPoint%2Ebind%28this%29%2C%0A%20%20%20%20%20%20%20%20%20%20hitTestRectangle%20%3D%20this%2EhitTestRectangle%2Ebind%28this%29%2C%0A%20%20%20%20%20%20%20%20%20%20hitTestCircle%20%3D%20this%2EhitTestCircle%2Ebind%28this%29%2C%0A%20%20%20%20%20%20%20%20%20%20movingCircleCollision%20%3D%20this%2EmovingCircleCollision%2Ebind%28this%29%2C%0A%20%20%20%20%20%20%20%20%20%20circleCollision%20%3D%20this%2EcircleCollision%2Ebind%28this%29%2C%0A%20%20%20%20%20%20%20%20%20%20hitTestCircleRectangle%20%3D%20this%2EhitTestCircleRectangle%2Ebind%28this%29%2C%0A%20%20%20%20%20%20%20%20%20%20rectangleCollision%20%3D%20this%2ErectangleCollision%2Ebind%28this%29%2C%0A%20%20%20%20%20%20%20%20%20%20circleRectangleCollision%20%3D%20this%2EcircleRectangleCollision%2Ebind%28this%29%3B%0A%0A%20%20%20%20%20%20var%20collision%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20aIsASprite%20%3D%20a%2Eparent%20%21%3D%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20bIsASprite%20%3D%20b%2Eparent%20%21%3D%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FCheck%20to%20make%20sure%20one%20of%20the%20arguments%20isn%27t%20an%20array%0A%20%20%20%20%20%20if%20%28aIsASprite%20%26%26%20b%20instanceof%20Array%20%7C%7C%20bIsASprite%20%26%26%20a%20instanceof%20Array%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FIf%20it%20is%2C%20check%20for%20a%20collision%20between%20a%20sprite%20and%20an%20array%0A%20%20%20%20%20%20%20%20spriteVsArray%28%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FIf%20one%20of%20the%20arguments%20isn%27t%20an%20array%2C%20find%20out%20what%20type%20of%0A%20%20%20%20%20%20%20%20%2F%2Fcollision%20check%20to%20run%0A%20%20%20%20%20%20%20%20collision%20%3D%20findCollisionType%28a%2C%20b%29%3B%0A%20%20%20%20%20%20%20%20if%20%28collision%20%26%26%20extra%29%20extra%28collision%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20result%20of%20the%20collision%2E%0A%20%20%20%20%20%20%2F%2FIt%20will%20be%20%60undefined%60%20if%20there%27s%20no%20collision%20and%20%60true%60%20if%0A%20%20%20%20%20%20%2F%2Fthere%20is%20a%20collision%2E%20%60rectangleCollision%60%20sets%20%60collsision%60%20to%0A%20%20%20%20%20%20%2F%2F%22top%22%2C%20%22bottom%22%2C%20%22left%22%20or%20%22right%22%20depeneding%20on%20which%20side%20the%0A%20%20%20%20%20%20%2F%2Fcollision%20is%20occuring%20on%0A%20%20%20%20%20%20return%20collision%3B%0A%0A%20%20%20%20%20%20function%20findCollisionType%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FAre%20%60a%60%20and%20%60b%60%20both%20sprites%3F%0A%20%20%20%20%20%20%20%20%2F%2F%28We%20have%20to%20check%20again%20if%20this%20function%20was%20called%20from%0A%20%20%20%20%20%20%20%20%2F%2F%60spriteVsArray%60%29%0A%20%20%20%20%20%20%20%20var%20aIsASprite%20%3D%20a%2Eparent%20%21%3D%3D%20undefined%3B%0A%20%20%20%20%20%20%20%20var%20bIsASprite%20%3D%20b%2Eparent%20%21%3D%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28aIsASprite%20%26%26%20bIsASprite%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2FYes%2C%20but%20what%20kind%20of%20sprites%3F%0A%20%20%20%20%20%20%20%20%20%20if%20%28a%2Ediameter%20%26%26%20b%2Ediameter%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThey%27re%20circles%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20circleVsCircle%28a%2C%20b%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28a%2Ediameter%20%26%26%20%21b%2Ediameter%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20first%20one%20is%20a%20circle%20and%20the%20second%20is%20a%20rectangle%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20circleVsRectangle%28a%2C%20b%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThey%27re%20rectangles%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20rectangleVsRectangle%28a%2C%20b%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2FThey%27re%20not%20both%20sprites%2C%20so%20what%20are%20they%3F%0A%20%20%20%20%20%20%20%20%2F%2FIs%20%60a%60%20not%20a%20sprite%20and%20does%20it%20have%20x%20and%20y%20properties%3F%0A%20%20%20%20%20%20%20%20else%20if%20%28bIsASprite%20%26%26%20%21%28a%2Ex%20%3D%3D%3D%20undefined%29%20%26%26%20%21%28a%2Ey%20%3D%3D%3D%20undefined%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FYes%2C%20so%20this%20is%20a%20point%20vs%2E%20sprite%20collision%20test%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20hitTestPoint%28a%2C%20b%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20user%20is%20trying%20to%20test%20some%20incompatible%20objects%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%22I%27m%20sorry%2C%20%22%20%2B%20a%20%2B%20%22%20and%20%22%20%2B%20b%20%2B%20%22%20cannot%20be%20use%20together%20in%20a%20collision%20test%2E%27%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20spriteVsArray%28%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FIf%20%60a%60%20happens%20to%20be%20the%20array%2C%20flip%20it%20around%20so%20that%20it%20becomes%20%60b%60%0A%20%20%20%20%20%20%20%20if%20%28a%20instanceof%20Array%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20%5Fref%20%3D%20%5B%5Fb%2C%20%5Fa%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20%5Fa%20%3D%20%5Fref%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20%5Fb%20%3D%20%5Fref%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2FLoop%20through%20the%20array%20in%20reverse%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20b%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20b%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20collision%20%3D%20findCollisionType%28a%2C%20sprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28collision%20%26%26%20extra%29%20extra%28collision%2C%20sprite%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20circleVsCircle%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20circles%20shouldn%27t%20react%20to%20the%20collision%2C%0A%20%20%20%20%20%20%20%20%2F%2Fjust%20test%20to%20see%20if%20they%27re%20touching%0A%20%20%20%20%20%20%20%20if%20%28%21react%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20hitTestCircle%28a%2C%20b%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2FYes%2C%20the%20circles%20should%20react%20to%20the%20collision%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FAre%20they%20both%20moving%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28a%2Evx%20%2B%20a%2Evy%20%21%3D%3D%200%20%26%26%20b%2Evx%20%2B%20b%2Evy%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FYes%2C%20they%20are%20both%20moving%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%28moving%20circle%20collisions%20always%20bounce%20apart%20so%20there%27s%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fno%20need%20for%20the%20third%2C%20%60bounce%60%2C%20argument%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20movingCircleCollision%28a%2C%20b%2C%20global%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FNo%2C%20they%27re%20not%20both%20moving%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20circleCollision%28a%2C%20b%2C%20bounce%2C%20global%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20rectangleVsRectangle%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20rectangles%20shouldn%27t%20react%20to%20the%20collision%2C%20just%0A%20%20%20%20%20%20%20%20%2F%2Ftest%20to%20see%20if%20they%27re%20touching%0A%20%20%20%20%20%20%20%20if%20%28%21react%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20hitTestRectangle%28a%2C%20b%2C%20global%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20rectangleCollision%28a%2C%20b%2C%20bounce%2C%20global%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20circleVsRectangle%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20rectangles%20shouldn%27t%20react%20to%20the%20collision%2C%20just%0A%20%20%20%20%20%20%20%20%2F%2Ftest%20to%20see%20if%20they%27re%20touching%0A%20%20%20%20%20%20%20%20if%20%28%21react%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20hitTestCircleRectangle%28a%2C%20b%2C%20global%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20circleRectangleCollision%28a%2C%20b%2C%20bounce%2C%20global%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%5D%29%3B%0A%0A%20%20return%20Bump%3B%0A%7D%29%28%29%3B%0A%2F%2F%23%20sourceMappingURL%3Dbump%2Ejs%2Emap%22use%20strict%22%3B%0A%0Avar%20%5FcreateClass%20%3D%20%28function%20%28%29%20%7B%20function%20defineProperties%28target%2C%20props%29%20%7B%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20props%2Elength%3B%20i%2B%2B%29%20%7B%20var%20descriptor%20%3D%20props%5Bi%5D%3B%20descriptor%2Eenumerable%20%3D%20descriptor%2Eenumerable%20%7C%7C%20false%3B%20descriptor%2Econfigurable%20%3D%20true%3B%20if%20%28%22value%22%20in%20descriptor%29%20descriptor%2Ewritable%20%3D%20true%3B%20Object%2EdefineProperty%28target%2C%20descriptor%2Ekey%2C%20descriptor%29%3B%20%7D%20%7D%20return%20function%20%28Constructor%2C%20protoProps%2C%20staticProps%29%20%7B%20if%20%28protoProps%29%20defineProperties%28Constructor%2Eprototype%2C%20protoProps%29%3B%20if%20%28staticProps%29%20defineProperties%28Constructor%2C%20staticProps%29%3B%20return%20Constructor%3B%20%7D%3B%20%7D%29%28%29%3B%0A%0Afunction%20%5FtoConsumableArray%28arr%29%20%7B%20if%20%28Array%2EisArray%28arr%29%29%20%7B%20for%20%28var%20i%20%3D%200%2C%20arr2%20%3D%20Array%28arr%2Elength%29%3B%20i%20%3C%20arr%2Elength%3B%20i%2B%2B%29%20%7B%20arr2%5Bi%5D%20%3D%20arr%5Bi%5D%3B%20%7D%20return%20arr2%3B%20%7D%20else%20%7B%20return%20Array%2Efrom%28arr%29%3B%20%7D%20%7D%0A%0Afunction%20%5FclassCallCheck%28instance%2C%20Constructor%29%20%7B%20if%20%28%21%28instance%20instanceof%20Constructor%29%29%20%7B%20throw%20new%20TypeError%28%22Cannot%20call%20a%20class%20as%20a%20function%22%29%3B%20%7D%20%7D%0A%0Avar%20Charm%20%3D%20%28function%20%28%29%20%7B%0A%20%20function%20Charm%28%29%20%7B%0A%20%20%20%20var%20%5Fthis%20%3D%20this%3B%0A%0A%20%20%20%20var%20renderingEngine%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20PIXI%20%3A%20arguments%5B0%5D%3B%0A%0A%20%20%20%20%5FclassCallCheck%28this%2C%20Charm%29%3B%0A%0A%20%20%20%20if%20%28renderingEngine%20%3D%3D%3D%20undefined%29%20throw%20new%20Error%28%22Please%20assign%20a%20rendering%20engine%20in%20the%20constructor%20before%20using%20charm%2Ejs%22%29%3B%0A%0A%20%20%20%20%2F%2FFind%20out%20which%20rendering%20engine%20is%20being%20used%20%28the%20default%20is%20Pixi%29%0A%20%20%20%20this%2Erenderer%20%3D%20%22%22%3B%0A%0A%20%20%20%20%2F%2FIf%20the%20%60renderingEngine%60%20is%20Pixi%2C%20set%20up%20Pixi%20object%20aliases%0A%20%20%20%20if%20%28renderingEngine%2EParticleContainer%20%26%26%20renderingEngine%2ESprite%29%20%7B%0A%20%20%20%20%20%20this%2Erenderer%20%3D%20%22pixi%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FAn%20array%20to%20store%20the%20global%20tweens%0A%20%20%20%20this%2EglobalTweens%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2FAn%20object%20that%20stores%20all%20the%20easing%20formulas%0A%20%20%20%20this%2EeasingFormulas%20%3D%20%7B%0A%0A%20%20%20%20%20%20%2F%2FLinear%0A%0A%20%20%20%20%20%20linear%3A%20function%20linear%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20x%3B%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F%2FSmoothstep%0A%20%20%20%20%20%20smoothstep%3A%20function%20smoothstep%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20x%20%2A%20x%20%2A%20%283%20%2D%202%20%2A%20x%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20smoothstepSquared%3A%20function%20smoothstepSquared%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math%2Epow%28x%20%2A%20x%20%2A%20%283%20%2D%202%20%2A%20x%29%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20smoothstepCubed%3A%20function%20smoothstepCubed%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math%2Epow%28x%20%2A%20x%20%2A%20%283%20%2D%202%20%2A%20x%29%2C%203%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F%2FAcceleration%0A%20%20%20%20%20%20acceleration%3A%20function%20acceleration%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20x%20%2A%20x%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20accelerationCubed%3A%20function%20accelerationCubed%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math%2Epow%28x%20%2A%20x%2C%203%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F%2FDeceleration%0A%20%20%20%20%20%20deceleration%3A%20function%20deceleration%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%201%20%2D%20Math%2Epow%281%20%2D%20x%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20decelerationCubed%3A%20function%20decelerationCubed%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%201%20%2D%20Math%2Epow%281%20%2D%20x%2C%203%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F%2FSine%0A%20%20%20%20%20%20sine%3A%20function%20sine%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math%2Esin%28x%20%2A%20Math%2EPI%20%2F%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20sineSquared%3A%20function%20sineSquared%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math%2Epow%28Math%2Esin%28x%20%2A%20Math%2EPI%20%2F%202%29%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20sineCubed%3A%20function%20sineCubed%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math%2Epow%28Math%2Esin%28x%20%2A%20Math%2EPI%20%2F%202%29%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20inverseSine%3A%20function%20inverseSine%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%201%20%2D%20Math%2Esin%28%281%20%2D%20x%29%20%2A%20Math%2EPI%20%2F%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20inverseSineSquared%3A%20function%20inverseSineSquared%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%201%20%2D%20Math%2Epow%28Math%2Esin%28%281%20%2D%20x%29%20%2A%20Math%2EPI%20%2F%202%29%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20inverseSineCubed%3A%20function%20inverseSineCubed%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%201%20%2D%20Math%2Epow%28Math%2Esin%28%281%20%2D%20x%29%20%2A%20Math%2EPI%20%2F%202%29%2C%203%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F%2FSpline%0A%20%20%20%20%20%20spline%3A%20function%20spline%28t%2C%20p0%2C%20p1%2C%20p2%2C%20p3%29%20%7B%0A%20%20%20%20%20%20%20%20return%200%2E5%20%2A%20%282%20%2A%20p1%20%2B%20%28%2Dp0%20%2B%20p2%29%20%2A%20t%20%2B%20%282%20%2A%20p0%20%2D%205%20%2A%20p1%20%2B%204%20%2A%20p2%20%2D%20p3%29%20%2A%20t%20%2A%20t%20%2B%20%28%2Dp0%20%2B%203%20%2A%20p1%20%2D%203%20%2A%20p2%20%2B%20p3%29%20%2A%20t%20%2A%20t%20%2A%20t%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F%2FBezier%20curve%0A%20%20%20%20%20%20cubicBezier%3A%20function%20cubicBezier%28t%2C%20a%2C%20b%2C%20c%2C%20d%29%20%7B%0A%20%20%20%20%20%20%20%20var%20t2%20%3D%20t%20%2A%20t%3B%0A%20%20%20%20%20%20%20%20var%20t3%20%3D%20t2%20%2A%20t%3B%0A%20%20%20%20%20%20%20%20return%20a%20%2B%20%28%2Da%20%2A%203%20%2B%20t%20%2A%20%283%20%2A%20a%20%2D%20a%20%2A%20t%29%29%20%2A%20t%20%2B%20%283%20%2A%20b%20%2B%20t%20%2A%20%28%2D6%20%2A%20b%20%2B%20b%20%2A%203%20%2A%20t%29%29%20%2A%20t%20%2B%20%28c%20%2A%203%20%2D%20c%20%2A%203%20%2A%20t%29%20%2A%20t2%20%2B%20d%20%2A%20t3%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2FAdd%20%60scaleX%60%20and%20%60scaleY%60%20properties%20to%20Pixi%20sprites%0A%20%20%20%20this%2E%5FaddScaleProperties%20%3D%20function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20if%20%28%5Fthis%2Erenderer%20%3D%3D%3D%20%22pixi%22%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21sprite%2EscaleX%20%26%26%20sprite%2Escale%2Ex%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22scaleX%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2Escale%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Escale%2Ex%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%21sprite%2EscaleY%20%26%26%20sprite%2Escale%2Ey%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22scaleY%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2Escale%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Escale%2Ey%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20%2F%2FThe%20low%20level%20%60tweenProperty%60%20function%20is%20used%20as%20the%20foundation%0A%20%20%2F%2Ffor%20the%20the%20higher%20level%20tween%20methods%2E%0A%0A%20%20%5FcreateClass%28Charm%2C%20%5B%7B%0A%20%20%20%20key%3A%20%22tweenProperty%22%2C%0A%20%20%20%20value%3A%20function%20tweenProperty%28sprite%2C%20%2F%2FSprite%20object%0A%20%20%20%20property%2C%20%2F%2FString%20property%0A%20%20%20%20startValue%2C%20%2F%2FTween%20start%20value%0A%20%20%20%20endValue%2C%20%2F%2FTween%20end%20value%0A%20%20%20%20totalFrames%29%20%2F%2FDelay%20in%20frames%20before%20repeating%0A%20%20%20%20%7B%0A%20%20%20%20%20%20var%20type%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20%22smoothstep%22%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20var%20%5Fthis2%20%3D%20this%3B%0A%0A%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B6%5D%3B%0A%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%207%20%7C%7C%20arguments%5B7%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B7%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20tween%20object%0A%20%20%20%20%20%20var%20o%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20tween%20is%20a%20bounce%20type%20%28a%20spline%29%2C%20set%20the%0A%20%20%20%20%20%20%2F%2Fstart%20and%20end%20magnitude%20values%0A%20%20%20%20%20%20var%20typeArray%20%3D%20type%2Esplit%28%22%20%22%29%3B%0A%20%20%20%20%20%20if%20%28typeArray%5B0%5D%20%3D%3D%3D%20%22bounce%22%29%20%7B%0A%20%20%20%20%20%20%20%20o%2EstartMagnitude%20%3D%20parseInt%28typeArray%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20o%2EendMagnitude%20%3D%20parseInt%28typeArray%5B2%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FUse%20%60o%2Estart%60%20to%20make%20a%20new%20tween%20using%20the%20current%0A%20%20%20%20%20%20%2F%2Fend%20point%20values%0A%20%20%20%20%20%20o%2Estart%20%3D%20function%20%28startValue%2C%20endValue%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FClone%20the%20start%20and%20end%20values%20so%20that%20any%20possible%20references%20to%20sprite%0A%20%20%20%20%20%20%20%20%2F%2Fproperties%20are%20converted%20to%20ordinary%20numbers%0A%20%20%20%20%20%20%20%20o%2EstartValue%20%3D%20JSON%2Eparse%28JSON%2Estringify%28startValue%29%29%3B%0A%20%20%20%20%20%20%20%20o%2EendValue%20%3D%20JSON%2Eparse%28JSON%2Estringify%28endValue%29%29%3B%0A%20%20%20%20%20%20%20%20o%2Eplaying%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20o%2EtotalFrames%20%3D%20totalFrames%3B%0A%20%20%20%20%20%20%20%20o%2EframeCounter%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20tween%20to%20the%20global%20%60tweens%60%20array%2E%20The%20%60tweens%60%20array%20is%0A%20%20%20%20%20%20%20%20%2F%2Fupdated%20on%20each%20frame%0A%20%20%20%20%20%20%20%20%5Fthis2%2EglobalTweens%2Epush%28o%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FCall%20%60o%2Estart%60%20to%20start%20the%20tween%0A%20%20%20%20%20%20o%2Estart%28startValue%2C%20endValue%29%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60update%60%20method%20will%20be%20called%20on%20each%20frame%20by%20the%20game%20loop%2E%0A%20%20%20%20%20%20%2F%2FThis%20is%20what%20makes%20the%20tween%20move%0A%20%20%20%20%20%20o%2Eupdate%20%3D%20function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20var%20time%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20curvedTime%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28o%2Eplaying%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20elapsed%20frames%20are%20less%20than%20the%20total%20frames%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fuse%20the%20tweening%20formulas%20to%20move%20the%20sprite%0A%20%20%20%20%20%20%20%20%20%20if%20%28o%2EframeCounter%20%3C%20o%2EtotalFrames%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20normalized%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20normalizedTime%20%3D%20o%2EframeCounter%20%2F%20o%2EtotalFrames%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FSelect%20the%20correct%20easing%20function%20from%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%60ease%60%20object%E2%80%99s%20library%20of%20easing%20functions%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20it%27s%20not%20a%20spline%2C%20use%20one%20of%20the%20ordinary%20easing%20functions%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeArray%5B0%5D%20%21%3D%3D%20%22bounce%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20curvedTime%20%3D%20%5Fthis2%2EeasingFormulas%5Btype%5D%28normalizedTime%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20it%27s%20a%20spline%2C%20use%20the%20%60spline%60%20function%20and%20apply%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F2%20additional%20%60type%60%20array%20values%20as%20the%20spline%27s%20start%20and%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fend%20points%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20curvedTime%20%3D%20%5Fthis2%2EeasingFormulas%2Espline%28normalizedTime%2C%20o%2EstartMagnitude%2C%200%2C%201%2C%20o%2EendMagnitude%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FInterpolate%20the%20sprite%27s%20property%20based%20on%20the%20curve%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%5Bproperty%5D%20%3D%20o%2EendValue%20%2A%20curvedTime%20%2B%20o%2EstartValue%20%2A%20%281%20%2D%20curvedTime%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2EframeCounter%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FWhen%20the%20tween%20has%20finished%20playing%2C%20run%20the%20end%20tasks%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%5Bproperty%5D%20%3D%20o%2EendValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Eend%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60end%60%20method%20will%20be%20called%20when%20the%20tween%20is%20finished%0A%20%20%20%20%20%20o%2Eend%20%3D%20function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FSet%20%60playing%60%20to%20%60false%60%0A%20%20%20%20%20%20%20%20o%2Eplaying%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCall%20the%20tween%27s%20%60onComplete%60%20method%2C%20if%20it%27s%20been%20assigned%0A%20%20%20%20%20%20%20%20if%20%28o%2EonComplete%29%20o%2EonComplete%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FRemove%20the%20tween%20from%20the%20%60tweens%60%20array%0A%20%20%20%20%20%20%20%20%5Fthis2%2EglobalTweens%2Esplice%28%5Fthis2%2EglobalTweens%2EindexOf%28o%29%2C%201%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20tween%27s%20%60yoyo%60%20property%20is%20%60true%60%2C%20create%20a%20new%20tween%0A%20%20%20%20%20%20%20%20%2F%2Fusing%20the%20same%20values%2C%20but%20use%20the%20current%20tween%27s%20%60startValue%60%0A%20%20%20%20%20%20%20%20%2F%2Fas%20the%20next%20tween%27s%20%60endValue%60%0A%20%20%20%20%20%20%20%20if%20%28yoyo%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%5Fthis2%2Ewait%28delayBeforeRepeat%29%2Ethen%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2Estart%28o%2EendValue%2C%20o%2EstartValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FPause%20and%20play%20methods%0A%20%20%20%20%20%20o%2Eplay%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20o%2Eplaying%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20o%2Epause%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20o%2Eplaying%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20tween%20object%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60makeTween%60%20is%20a%20general%20low%2Dlevel%20method%20for%20making%20complex%20tweens%0A%20%20%20%20%2F%2Fout%20of%20multiple%20%60tweenProperty%60%20functions%2E%20Its%20one%20argument%2C%0A%20%20%20%20%2F%2F%60tweensToAdd%60%20is%20an%20array%20containing%20multiple%20%60tweenProperty%60%20calls%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22makeTween%22%2C%0A%20%20%20%20value%3A%20function%20makeTween%28tweensToAdd%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis3%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20an%20object%20to%20manage%20the%20tweens%0A%20%20%20%20%20%20var%20o%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20a%20%60tweens%60%20array%20to%20store%20the%20new%20tweens%0A%20%20%20%20%20%20o%2Etweens%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FMake%20a%20new%20tween%20for%20each%20array%0A%20%20%20%20%20%20tweensToAdd%2EforEach%28function%20%28tweenPropertyArguments%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FUse%20the%20tween%20property%20arguments%20to%20make%20a%20new%20tween%0A%20%20%20%20%20%20%20%20var%20newTween%20%3D%20%5Fthis3%2EtweenProperty%2Eapply%28%5Fthis3%2C%20%5FtoConsumableArray%28tweenPropertyArguments%29%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FPush%20the%20new%20tween%20into%20this%20object%27s%20internal%20%60tweens%60%20array%0A%20%20%20%20%20%20%20%20o%2Etweens%2Epush%28newTween%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20a%20counter%20to%20keep%20track%20of%20the%0A%20%20%20%20%20%20%2F%2Fnumber%20of%20tweens%20that%20have%20completed%20their%20actions%0A%20%20%20%20%20%20var%20completionCounter%20%3D%200%3B%0A%0A%20%20%20%20%20%20%2F%2F%60o%2Ecompleted%60%20will%20be%20called%20each%20time%20one%20of%20the%20tweens%0A%20%20%20%20%20%20%2F%2Ffinishes%0A%20%20%20%20%20%20o%2Ecompleted%20%3D%20function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%201%20to%20the%20%60completionCounter%60%0A%20%20%20%20%20%20%20%20completionCounter%20%2B%3D%201%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20all%20tweens%20have%20finished%2C%20call%20the%20user%2Ddefined%20%60onComplete%60%0A%20%20%20%20%20%20%20%20%2F%2Fmethod%2C%20if%20it%27s%20been%20assigned%2E%20Reset%20the%20%60completionCounter%60%0A%20%20%20%20%20%20%20%20if%20%28completionCounter%20%3D%3D%3D%20o%2Etweens%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28o%2EonComplete%29%20o%2EonComplete%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20completionCounter%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20%60onComplete%60%20methods%20to%20all%20tweens%0A%20%20%20%20%20%20o%2Etweens%2EforEach%28function%20%28tween%29%20%7B%0A%20%20%20%20%20%20%20%20tween%2EonComplete%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20o%2Ecompleted%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20pause%20and%20play%20methods%20to%20control%20all%20the%20tweens%0A%20%20%20%20%20%20o%2Epause%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20o%2Etweens%2EforEach%28function%20%28tween%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20tween%2Eplaying%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20o%2Eplay%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20o%2Etweens%2EforEach%28function%20%28tween%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20tween%2Eplaying%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20tween%20object%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%20High%20level%20tween%20methods%20%2A%2F%0A%0A%20%20%20%20%2F%2F1%2E%20Simple%20tweens%0A%0A%20%20%20%20%2F%2F%60fadeOut%60%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22fadeOut%22%2C%0A%20%20%20%20value%3A%20function%20fadeOut%28sprite%29%20%7B%0A%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B1%5D%3B%0A%0A%20%20%20%20%20%20return%20this%2EtweenProperty%28sprite%2C%20%22alpha%22%2C%20sprite%2Ealpha%2C%200%2C%20frames%2C%20%22sine%22%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60fadeIn%60%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22fadeIn%22%2C%0A%20%20%20%20value%3A%20function%20fadeIn%28sprite%29%20%7B%0A%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B1%5D%3B%0A%0A%20%20%20%20%20%20return%20this%2EtweenProperty%28sprite%2C%20%22alpha%22%2C%20sprite%2Ealpha%2C%201%2C%20frames%2C%20%22sine%22%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60pulse%60%0A%20%20%20%20%2F%2FFades%20the%20sprite%20in%20and%20out%20at%20a%20steady%20rate%2E%0A%20%20%20%20%2F%2FSet%20the%20%60minAlpha%60%20to%20something%20greater%20than%200%20if%20you%0A%20%20%20%20%2F%2Fdon%27t%20want%20the%20sprite%20to%20fade%20away%20completely%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22pulse%22%2C%0A%20%20%20%20value%3A%20function%20pulse%28sprite%29%20%7B%0A%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20minAlpha%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20return%20this%2EtweenProperty%28sprite%2C%20%22alpha%22%2C%20sprite%2Ealpha%2C%20minAlpha%2C%20frames%2C%20%22smoothstep%22%2C%20true%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F2%2E%20Complex%20tweens%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22slide%22%2C%0A%20%20%20%20value%3A%20function%20slide%28sprite%2C%20endX%2C%20endY%29%20%7B%0A%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20type%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20%22smoothstep%22%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%0A%20%20%20%20%20%20return%20this%2EmakeTween%28%5B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20x%20axis%20tween%0A%20%20%20%20%20%20%5Bsprite%2C%20%22x%22%2C%20sprite%2Ex%2C%20endX%2C%20frames%2C%20type%2C%20yoyo%2C%20delayBeforeRepeat%5D%2C%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20y%20axis%20tween%0A%20%20%20%20%20%20%5Bsprite%2C%20%22y%22%2C%20sprite%2Ey%2C%20endY%2C%20frames%2C%20type%2C%20yoyo%2C%20delayBeforeRepeat%5D%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22breathe%22%2C%0A%20%20%20%20value%3A%20function%20breathe%28sprite%29%20%7B%0A%20%20%20%20%20%20var%20endScaleX%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%2E8%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20endScaleY%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%2E8%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20%60scaleX%60%20and%20%60scaleY%60%20properties%20to%20Pixi%20sprites%0A%20%20%20%20%20%20this%2E%5FaddScaleProperties%28sprite%29%3B%0A%0A%20%20%20%20%20%20return%20this%2EmakeTween%28%5B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20scaleX%20tween%0A%20%20%20%20%20%20%5Bsprite%2C%20%22scaleX%22%2C%20sprite%2EscaleX%2C%20endScaleX%2C%20frames%2C%20%22smoothstepSquared%22%2C%20yoyo%2C%20delayBeforeRepeat%5D%2C%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20scaleY%20tween%0A%20%20%20%20%20%20%5Bsprite%2C%20%22scaleY%22%2C%20sprite%2EscaleY%2C%20endScaleY%2C%20frames%2C%20%22smoothstepSquared%22%2C%20yoyo%2C%20delayBeforeRepeat%5D%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22scale%22%2C%0A%20%20%20%20value%3A%20function%20scale%28sprite%29%20%7B%0A%20%20%20%20%20%20var%20endScaleX%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%2E5%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20endScaleY%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%2E5%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B3%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20%60scaleX%60%20and%20%60scaleY%60%20properties%20to%20Pixi%20sprites%0A%20%20%20%20%20%20this%2E%5FaddScaleProperties%28sprite%29%3B%0A%0A%20%20%20%20%20%20return%20this%2EmakeTween%28%5B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20scaleX%20tween%0A%20%20%20%20%20%20%5Bsprite%2C%20%22scaleX%22%2C%20sprite%2EscaleX%2C%20endScaleX%2C%20frames%2C%20%22smoothstep%22%2C%20false%5D%2C%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20scaleY%20tween%0A%20%20%20%20%20%20%5Bsprite%2C%20%22scaleY%22%2C%20sprite%2EscaleY%2C%20endScaleY%2C%20frames%2C%20%22smoothstep%22%2C%20false%5D%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22strobe%22%2C%0A%20%20%20%20value%3A%20function%20strobe%28sprite%29%20%7B%0A%20%20%20%20%20%20var%20scaleFactor%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%201%2E3%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20startMagnitude%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%2010%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20endMagnitude%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2020%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%2010%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%0A%20%20%20%20%20%20var%20bounce%20%3D%20%22bounce%20%22%20%2B%20startMagnitude%20%2B%20%22%20%22%20%2B%20endMagnitude%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20%60scaleX%60%20and%20%60scaleY%60%20properties%20to%20Pixi%20sprites%0A%20%20%20%20%20%20this%2E%5FaddScaleProperties%28sprite%29%3B%0A%0A%20%20%20%20%20%20return%20this%2EmakeTween%28%5B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20scaleX%20tween%0A%20%20%20%20%20%20%5Bsprite%2C%20%22scaleX%22%2C%20sprite%2EscaleX%2C%20scaleFactor%2C%20frames%2C%20bounce%2C%20yoyo%2C%20delayBeforeRepeat%5D%2C%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20scaleY%20tween%0A%20%20%20%20%20%20%5Bsprite%2C%20%22scaleY%22%2C%20sprite%2EscaleY%2C%20scaleFactor%2C%20frames%2C%20bounce%2C%20yoyo%2C%20delayBeforeRepeat%5D%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22wobble%22%2C%0A%20%20%20%20value%3A%20function%20wobble%28sprite%29%20%7B%0A%20%20%20%20%20%20var%20scaleFactorX%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%201%2E2%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20scaleFactorY%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%201%2E2%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2010%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20xStartMagnitude%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%2010%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20xEndMagnitude%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%2010%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20var%20yStartMagnitude%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%20%2D10%20%3A%20arguments%5B6%5D%3B%0A%20%20%20%20%20%20var%20yEndMagnitude%20%3D%20arguments%2Elength%20%3C%3D%207%20%7C%7C%20arguments%5B7%5D%20%3D%3D%3D%20undefined%20%3F%20%2D10%20%3A%20arguments%5B7%5D%3B%0A%20%20%20%20%20%20var%20friction%20%3D%20arguments%2Elength%20%3C%3D%208%20%7C%7C%20arguments%5B8%5D%20%3D%3D%3D%20undefined%20%3F%200%2E98%20%3A%20arguments%5B8%5D%3B%0A%0A%20%20%20%20%20%20var%20%5Fthis4%20%3D%20this%3B%0A%0A%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%209%20%7C%7C%20arguments%5B9%5D%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20arguments%5B9%5D%3B%0A%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%2010%20%7C%7C%20arguments%5B10%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B10%5D%3B%0A%0A%20%20%20%20%20%20var%20bounceX%20%3D%20%22bounce%20%22%20%2B%20xStartMagnitude%20%2B%20%22%20%22%20%2B%20xEndMagnitude%3B%0A%20%20%20%20%20%20var%20bounceY%20%3D%20%22bounce%20%22%20%2B%20yStartMagnitude%20%2B%20%22%20%22%20%2B%20yEndMagnitude%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20%60scaleX%60%20and%20%60scaleY%60%20properties%20to%20Pixi%20sprites%0A%20%20%20%20%20%20this%2E%5FaddScaleProperties%28sprite%29%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20this%2EmakeTween%28%5B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20scaleX%20tween%0A%20%20%20%20%20%20%5Bsprite%2C%20%22scaleX%22%2C%20sprite%2EscaleX%2C%20scaleFactorX%2C%20frames%2C%20bounceX%2C%20yoyo%2C%20delayBeforeRepeat%5D%2C%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20scaleY%20tween%0A%20%20%20%20%20%20%5Bsprite%2C%20%22scaleY%22%2C%20sprite%2EscaleY%2C%20scaleFactorY%2C%20frames%2C%20bounceY%2C%20yoyo%2C%20delayBeforeRepeat%5D%5D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20some%20friction%20to%20the%20%60endValue%60%20at%20the%20end%20of%20each%20tween%0A%20%20%20%20%20%20o%2Etweens%2EforEach%28function%20%28tween%29%20%7B%0A%20%20%20%20%20%20%20%20tween%2EonComplete%20%3D%20function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20friction%20if%20the%20%60endValue%60%20is%20greater%20than%201%0A%20%20%20%20%20%20%20%20%20%20if%20%28tween%2EendValue%20%3E%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tween%2EendValue%20%2A%3D%20friction%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FSet%20the%20%60endValue%60%20to%201%20when%20the%20effect%20is%20finished%20and%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fremove%20the%20tween%20from%20the%20global%20%60tweens%60%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28tween%2EendValue%20%3C%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tween%2EendValue%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis4%2EremoveTween%28tween%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F3%2E%20Motion%20path%20tweens%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22followCurve%22%2C%0A%20%20%20%20value%3A%20function%20followCurve%28sprite%2C%20pointsArray%2C%20totalFrames%29%20%7B%0A%20%20%20%20%20%20var%20type%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20%22smoothstep%22%20%3A%20arguments%5B3%5D%3B%0A%0A%20%20%20%20%20%20var%20%5Fthis5%20%3D%20this%3B%0A%0A%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20tween%20object%0A%20%20%20%20%20%20var%20o%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20tween%20is%20a%20bounce%20type%20%28a%20spline%29%2C%20set%20the%0A%20%20%20%20%20%20%2F%2Fstart%20and%20end%20magnitude%20values%0A%20%20%20%20%20%20var%20typeArray%20%3D%20type%2Esplit%28%22%20%22%29%3B%0A%20%20%20%20%20%20if%20%28typeArray%5B0%5D%20%3D%3D%3D%20%22bounce%22%29%20%7B%0A%20%20%20%20%20%20%20%20o%2EstartMagnitude%20%3D%20parseInt%28typeArray%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20o%2EendMagnitude%20%3D%20parseInt%28typeArray%5B2%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FUse%20%60tween%2Estart%60%20to%20make%20a%20new%20tween%20using%20the%20current%0A%20%20%20%20%20%20%2F%2Fend%20point%20values%0A%20%20%20%20%20%20o%2Estart%20%3D%20function%20%28pointsArray%29%20%7B%0A%20%20%20%20%20%20%20%20o%2Eplaying%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20o%2EtotalFrames%20%3D%20totalFrames%3B%0A%20%20%20%20%20%20%20%20o%2EframeCounter%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FClone%20the%20points%20array%0A%20%20%20%20%20%20%20%20o%2EpointsArray%20%3D%20JSON%2Eparse%28JSON%2Estringify%28pointsArray%29%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20tween%20to%20the%20%60globalTweens%60%20array%2E%20The%20%60globalTweens%60%20array%20is%0A%20%20%20%20%20%20%20%20%2F%2Fupdated%20on%20each%20frame%0A%20%20%20%20%20%20%20%20%5Fthis5%2EglobalTweens%2Epush%28o%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FCall%20%60tween%2Estart%60%20to%20start%20the%20first%20tween%0A%20%20%20%20%20%20o%2Estart%28pointsArray%29%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60update%60%20method%20will%20be%20called%20on%20each%20frame%20by%20the%20game%20loop%2E%0A%20%20%20%20%20%20%2F%2FThis%20is%20what%20makes%20the%20tween%20move%0A%20%20%20%20%20%20o%2Eupdate%20%3D%20function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20var%20normalizedTime%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20curvedTime%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20p%20%3D%20o%2EpointsArray%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28o%2Eplaying%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20elapsed%20frames%20are%20less%20than%20the%20total%20frames%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fuse%20the%20tweening%20formulas%20to%20move%20the%20sprite%0A%20%20%20%20%20%20%20%20%20%20if%20%28o%2EframeCounter%20%3C%20o%2EtotalFrames%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20normalized%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20normalizedTime%20%3D%20o%2EframeCounter%20%2F%20o%2EtotalFrames%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FSelect%20the%20correct%20easing%20function%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20it%27s%20not%20a%20spline%2C%20use%20one%20of%20the%20ordinary%20tween%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Ffunctions%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeArray%5B0%5D%20%21%3D%3D%20%22bounce%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20curvedTime%20%3D%20%5Fthis5%2EeasingFormulas%5Btype%5D%28normalizedTime%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20it%27s%20a%20spline%2C%20use%20the%20%60spline%60%20function%20and%20apply%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F2%20additional%20%60type%60%20array%20values%20as%20the%20spline%27s%20start%20and%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fend%20points%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fcurve%20%3D%20tweenFunction%2Espline%28n%2C%20type%5B1%5D%2C%200%2C%201%2C%20type%5B2%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20curvedTime%20%3D%20%5Fthis5%2EeasingFormulas%2Espline%28normalizedTime%2C%20o%2EstartMagnitude%2C%200%2C%201%2C%20o%2EendMagnitude%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FApply%20the%20Bezier%20curve%20to%20the%20sprite%27s%20position%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20%5Fthis5%2EeasingFormulas%2EcubicBezier%28curvedTime%2C%20p%5B0%5D%5B0%5D%2C%20p%5B1%5D%5B0%5D%2C%20p%5B2%5D%5B0%5D%2C%20p%5B3%5D%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20%5Fthis5%2EeasingFormulas%2EcubicBezier%28curvedTime%2C%20p%5B0%5D%5B1%5D%2C%20p%5B1%5D%5B1%5D%2C%20p%5B2%5D%5B1%5D%2C%20p%5B3%5D%5B1%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20one%20to%20the%20%60elapsedFrames%60%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2EframeCounter%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FWhen%20the%20tween%20has%20finished%20playing%2C%20run%20the%20end%20tasks%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fsprite%5Bproperty%5D%20%3D%20o%2EendValue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Eend%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60end%60%20method%20will%20be%20called%20when%20the%20tween%20is%20finished%0A%20%20%20%20%20%20o%2Eend%20%3D%20function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FSet%20%60playing%60%20to%20%60false%60%0A%20%20%20%20%20%20%20%20o%2Eplaying%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCall%20the%20tween%27s%20%60onComplete%60%20method%2C%20if%20it%27s%20been%0A%20%20%20%20%20%20%20%20%2F%2Fassigned%0A%20%20%20%20%20%20%20%20if%20%28o%2EonComplete%29%20o%2EonComplete%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FRemove%20the%20tween%20from%20the%20global%20%60tweens%60%20array%0A%20%20%20%20%20%20%20%20%5Fthis5%2EglobalTweens%2Esplice%28%5Fthis5%2EglobalTweens%2EindexOf%28o%29%2C%201%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20tween%27s%20%60yoyo%60%20property%20is%20%60true%60%2C%20reverse%20the%20array%20and%0A%20%20%20%20%20%20%20%20%2F%2Fuse%20it%20to%20create%20a%20new%20tween%0A%20%20%20%20%20%20%20%20if%20%28yoyo%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%5Fthis5%2Ewait%28delayBeforeRepeat%29%2Ethen%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2EpointsArray%20%3D%20o%2EpointsArray%2Ereverse%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2Estart%28o%2EpointsArray%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FPause%20and%20play%20methods%0A%20%20%20%20%20%20o%2Epause%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20o%2Eplaying%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20o%2Eplay%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20o%2Eplaying%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20tween%20object%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22walkPath%22%2C%0A%20%20%20%20value%3A%20function%20walkPath%28sprite%2C%20%2F%2FThe%20sprite%0A%20%20%20%20originalPathArray%29%20%2F%2FDelay%2C%20in%20milliseconds%2C%20between%20sections%0A%20%20%20%20%7B%0A%20%20%20%20%20%20var%20totalFrames%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20300%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20type%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20%22smoothstep%22%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20loop%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B4%5D%3B%0A%0A%20%20%20%20%20%20var%20%5Fthis6%20%3D%20this%3B%0A%0A%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20var%20delayBetweenSections%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FClone%20the%20path%20array%20so%20that%20any%20possible%20references%20to%20sprite%0A%20%20%20%20%20%20%2F%2Fproperties%20are%20converted%20into%20ordinary%20numbers%0A%20%20%20%20%20%20var%20pathArray%20%3D%20JSON%2Eparse%28JSON%2Estringify%28originalPathArray%29%29%3B%0A%0A%20%20%20%20%20%20%2F%2FFigure%20out%20the%20duration%2C%20in%20frames%2C%20of%20each%20path%20section%20by%0A%20%20%20%20%20%20%2F%2Fdividing%20the%20%60totalFrames%60%20by%20the%20length%20of%20the%20%60pathArray%60%0A%20%20%20%20%20%20var%20frames%20%3D%20totalFrames%20%2F%20pathArray%2Elength%3B%0A%0A%20%20%20%20%20%20%2F%2FSet%20the%20current%20point%20to%200%2C%20which%20will%20be%20the%20first%20waypoint%0A%20%20%20%20%20%20var%20currentPoint%20%3D%200%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60makePath%60%20function%20creates%20a%20single%20tween%20between%20two%20points%20and%0A%20%20%20%20%20%20%2F%2Fthen%20schedules%20the%20next%20path%20to%20be%20made%20after%20it%0A%20%20%20%20%20%20var%20makePath%20%3D%20function%20makePath%28currentPoint%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FUse%20the%20%60makeTween%60%20function%20to%20tween%20the%20sprite%27s%0A%20%20%20%20%20%20%20%20%2F%2Fx%20and%20y%20position%0A%20%20%20%20%20%20%20%20var%20tween%20%3D%20%5Fthis6%2EmakeTween%28%5B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCreate%20the%20x%20axis%20tween%20between%20the%20first%20x%20value%20in%20the%0A%20%20%20%20%20%20%20%20%2F%2Fcurrent%20point%20and%20the%20x%20value%20in%20the%20following%20point%0A%20%20%20%20%20%20%20%20%5Bsprite%2C%20%22x%22%2C%20pathArray%5BcurrentPoint%5D%5B0%5D%2C%20pathArray%5BcurrentPoint%20%2B%201%5D%5B0%5D%2C%20frames%2C%20type%5D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FCreate%20the%20y%20axis%20tween%20in%20the%20same%20way%0A%20%20%20%20%20%20%20%20%5Bsprite%2C%20%22y%22%2C%20pathArray%5BcurrentPoint%5D%5B1%5D%2C%20pathArray%5BcurrentPoint%20%2B%201%5D%5B1%5D%2C%20frames%2C%20type%5D%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FWhen%20the%20tween%20is%20complete%2C%20advance%20the%20%60currentPoint%60%20by%20one%2E%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20an%20optional%20delay%20between%20path%20segments%2C%20and%20then%20make%20the%0A%20%20%20%20%20%20%20%20%2F%2Fnext%20connecting%20path%0A%20%20%20%20%20%20%20%20tween%2EonComplete%20%3D%20function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdvance%20to%20the%20next%20point%0A%20%20%20%20%20%20%20%20%20%20currentPoint%20%2B%3D%201%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20sprite%20hasn%27t%20reached%20the%20end%20of%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fpath%2C%20tween%20the%20sprite%20to%20the%20next%20point%0A%20%20%20%20%20%20%20%20%20%20if%20%28currentPoint%20%3C%20pathArray%2Elength%20%2D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis6%2Ewait%28delayBetweenSections%29%2Ethen%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tween%20%3D%20makePath%28currentPoint%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20we%27ve%20reached%20the%20end%20of%20the%20path%2C%20optionally%0A%20%20%20%20%20%20%20%20%20%20%2F%2Floop%20and%20yoyo%20it%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FReverse%20the%20path%20if%20%60loop%60%20is%20%60true%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28loop%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FReverse%20the%20array%20if%20%60yoyo%60%20is%20%60true%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28yoyo%29%20pathArray%2Ereverse%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FOptionally%20wait%20before%20restarting%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis6%2Ewait%28delayBetweenSections%29%2Ethen%28function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FReset%20the%20%60currentPoint%60%20to%200%20so%20that%20we%20can%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Frestart%20at%20the%20first%20point%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20currentPoint%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FSet%20the%20sprite%20to%20the%20first%20point%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20pathArray%5B0%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20pathArray%5B0%5D%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMake%20the%20first%20new%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tween%20%3D%20makePath%28currentPoint%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%2E%2E%2E%20and%20so%20it%20continues%21%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FReturn%20the%20path%20tween%20to%20the%20main%20function%0A%20%20%20%20%20%20%20%20return%20tween%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FMake%20the%20first%20path%20using%20the%20internal%20%60makePath%60%20function%20%28below%29%0A%20%20%20%20%20%20var%20tween%20%3D%20makePath%28currentPoint%29%3B%0A%0A%20%20%20%20%20%20%2F%2FPass%20the%20tween%20back%20to%20the%20main%20program%0A%20%20%20%20%20%20return%20tween%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22walkCurve%22%2C%0A%20%20%20%20value%3A%20function%20walkCurve%28sprite%2C%20%2F%2FThe%20sprite%0A%20%20%20%20pathArray%29%20%2F%2FDelay%2C%20in%20milliseconds%2C%20between%20sections%0A%20%20%20%20%7B%0A%20%20%20%20%20%20var%20totalFrames%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20300%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20type%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20%22smoothstep%22%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20loop%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B4%5D%3B%0A%0A%20%20%20%20%20%20var%20%5Fthis7%20%3D%20this%3B%0A%0A%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20var%20delayBeforeContinue%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FDivide%20the%20%60totalFrames%60%20into%20sections%20for%20each%20part%20of%20the%20path%0A%20%20%20%20%20%20var%20frames%20%3D%20totalFrames%20%2F%20pathArray%2Elength%3B%0A%0A%20%20%20%20%20%20%2F%2FSet%20the%20current%20curve%20to%200%2C%20which%20will%20be%20the%20first%20one%0A%20%20%20%20%20%20var%20currentCurve%20%3D%200%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60makePath%60%20function%0A%20%20%20%20%20%20var%20makePath%20%3D%20function%20makePath%28currentCurve%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FUse%20the%20custom%20%60followCurve%60%20function%20to%20make%0A%20%20%20%20%20%20%20%20%2F%2Fa%20sprite%20follow%20a%20curve%0A%20%20%20%20%20%20%20%20var%20tween%20%3D%20%5Fthis7%2EfollowCurve%28sprite%2C%20pathArray%5BcurrentCurve%5D%2C%20frames%2C%20type%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FWhen%20the%20tween%20is%20complete%2C%20advance%20the%20%60currentCurve%60%20by%20one%2E%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20an%20optional%20delay%20between%20path%20segments%2C%20and%20then%20make%20the%0A%20%20%20%20%20%20%20%20%2F%2Fnext%20path%0A%20%20%20%20%20%20%20%20tween%2EonComplete%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20currentCurve%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28currentCurve%20%3C%20pathArray%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis7%2Ewait%28delayBeforeContinue%29%2Ethen%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tween%20%3D%20makePath%28currentCurve%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20we%27ve%20reached%20the%20end%20of%20the%20path%2C%20optionally%0A%20%20%20%20%20%20%20%20%20%20%2F%2Floop%20and%20reverse%20it%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28loop%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28yoyo%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FReverse%20order%20of%20the%20curves%20in%20the%20%60pathArray%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pathArray%2Ereverse%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FReverse%20the%20order%20of%20the%20points%20in%20each%20curve%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pathArray%2EforEach%28function%20%28curveArray%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20curveArray%2Ereverse%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FAfter%20an%20optional%20delay%2C%20reset%20the%20sprite%20to%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fbeginning%20of%20the%20path%20and%20make%20the%20next%20new%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis7%2Ewait%28delayBeforeContinue%29%2Ethen%28function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20currentCurve%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20pathArray%5B0%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20pathArray%5B0%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tween%20%3D%20makePath%28currentCurve%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FReturn%20the%20path%20tween%20to%20the%20main%20function%0A%20%20%20%20%20%20%20%20return%20tween%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FMake%20the%20first%20path%0A%20%20%20%20%20%20var%20tween%20%3D%20makePath%28currentCurve%29%3B%0A%0A%20%20%20%20%20%20%2F%2FPass%20the%20tween%20back%20to%20the%20main%20program%0A%20%20%20%20%20%20return%20tween%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F4%2E%20Utilities%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20The%20%60wait%60%20method%20lets%20you%20set%20up%20a%20timed%20sequence%20of%20events%0A%20%20%20%20%20%20%20wait%281000%29%0A%20%20%20%20%20%20%20%20%2Ethen%28%28%29%20%3D%3E%20console%2Elog%28%22One%22%29%29%0A%20%20%20%20%20%20%20%20%2Ethen%28%28%29%20%3D%3E%20wait%281000%29%29%0A%20%20%20%20%20%20%20%20%2Ethen%28%28%29%20%3D%3E%20console%2Elog%28%22Two%22%29%29%0A%20%20%20%20%20%20%20%20%2Ethen%28%28%29%20%3D%3E%20wait%281000%29%29%0A%20%20%20%20%20%20%20%20%2Ethen%28%28%29%20%3D%3E%20console%2Elog%28%22Three%22%29%29%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22wait%22%2C%0A%20%20%20%20value%3A%20function%20wait%28%29%20%7B%0A%20%20%20%20%20%20var%20duration%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B0%5D%3B%0A%0A%20%20%20%20%20%20return%20new%20Promise%28function%20%28resolve%2C%20reject%29%20%7B%0A%20%20%20%20%20%20%20%20setTimeout%28resolve%2C%20duration%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FA%20utility%20to%20remove%20tweens%20from%20the%20game%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22removeTween%22%2C%0A%20%20%20%20value%3A%20function%20removeTween%28tweenObject%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis8%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FRemove%20the%20tween%20if%20%60tweenObject%60%20doesn%27t%20have%20any%20nested%0A%20%20%20%20%20%20%2F%2Ftween%20objects%0A%20%20%20%20%20%20if%20%28%21tweenObject%2Etweens%29%20%7B%0A%20%20%20%20%20%20%20%20tweenObject%2Epause%28%29%3B%0A%20%20%20%20%20%20%20%20this%2EglobalTweens%2Esplice%28this%2EglobalTweens%2EindexOf%28tweenObject%29%2C%201%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FOtherwise%2C%20remove%20the%20nested%20tween%20objects%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20tweenObject%2Epause%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20tweenObject%2Etweens%2EforEach%28function%20%28element%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis8%2EglobalTweens%2Esplice%28%5Fthis8%2EglobalTweens%2EindexOf%28element%29%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22update%22%2C%0A%20%20%20%20value%3A%20function%20update%28%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FUpdate%20all%20the%20tween%20objects%20in%20the%20%60globalTweens%60%20array%0A%20%20%20%20%20%20if%20%28this%2EglobalTweens%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20this%2EglobalTweens%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20tween%20%3D%20this%2EglobalTweens%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28tween%29%20tween%2Eupdate%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%5D%29%3B%0A%0A%20%20return%20Charm%3B%0A%7D%29%28%29%3B%0A%2F%2F%23%20sourceMappingURL%3Dcharm%2Ejs%2Emap%22use%20strict%22%3B%0A%0Avar%20%5FcreateClass%20%3D%20%28function%20%28%29%20%7B%20function%20defineProperties%28target%2C%20props%29%20%7B%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20props%2Elength%3B%20i%2B%2B%29%20%7B%20var%20descriptor%20%3D%20props%5Bi%5D%3B%20descriptor%2Eenumerable%20%3D%20descriptor%2Eenumerable%20%7C%7C%20false%3B%20descriptor%2Econfigurable%20%3D%20true%3B%20if%20%28%22value%22%20in%20descriptor%29%20descriptor%2Ewritable%20%3D%20true%3B%20Object%2EdefineProperty%28target%2C%20descriptor%2Ekey%2C%20descriptor%29%3B%20%7D%20%7D%20return%20function%20%28Constructor%2C%20protoProps%2C%20staticProps%29%20%7B%20if%20%28protoProps%29%20defineProperties%28Constructor%2Eprototype%2C%20protoProps%29%3B%20if%20%28staticProps%29%20defineProperties%28Constructor%2C%20staticProps%29%3B%20return%20Constructor%3B%20%7D%3B%20%7D%29%28%29%3B%0A%0Afunction%20%5FclassCallCheck%28instance%2C%20Constructor%29%20%7B%20if%20%28%21%28instance%20instanceof%20Constructor%29%29%20%7B%20throw%20new%20TypeError%28%22Cannot%20call%20a%20class%20as%20a%20function%22%29%3B%20%7D%20%7D%0A%0Avar%20Tink%20%3D%20%28function%20%28%29%20%7B%0A%20%20function%20Tink%28PIXI%2C%20element%29%20%7B%0A%20%20%20%20var%20scale%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%201%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%5FclassCallCheck%28this%2C%20Tink%29%3B%0A%0A%20%20%20%20%2F%2FAdd%20element%20and%20scale%20properties%0A%20%20%20%20this%2Eelement%20%3D%20element%3B%0A%20%20%20%20this%2Escale%20%3D%20scale%3B%0A%0A%20%20%20%20%2F%2FAn%20array%20to%20store%20all%20the%20draggable%20sprites%0A%20%20%20%20this%2EdraggableSprites%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2FAn%20array%20to%20store%20all%20the%20pointer%20objects%0A%20%20%20%20%2F%2F%28there%20will%20usually%20just%20be%20one%29%0A%20%20%20%20this%2Epointers%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2FAn%20array%20to%20store%20all%20the%20buttons%20and%20button%2Dlike%0A%20%20%20%20%2F%2Finteractive%20sprites%0A%20%20%20%20this%2Ebuttons%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2FA%20local%20PIXI%20reference%0A%20%20%20%20this%2EPIXI%20%3D%20PIXI%3B%0A%0A%20%20%20%20%2F%2FAliases%20for%20Pixi%20objects%0A%20%20%20%20this%2ETextureCache%20%3D%20this%2EPIXI%2Eutils%2ETextureCache%3B%0A%20%20%20%20this%2EMovieClip%20%3D%20this%2EPIXI%2Eextras%2EMovieClip%3B%0A%20%20%20%20this%2ETexture%20%3D%20this%2EPIXI%2ETexture%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%60makeDraggable%60%20lets%20you%20make%20a%20drag%2Dand%2Ddrop%20sprite%20by%20pushing%20it%0A%20%20%2F%2Finto%20the%20%60draggableSprites%60%20array%0A%0A%20%20%5FcreateClass%28Tink%2C%20%5B%7B%0A%20%20%20%20key%3A%20%22makeDraggable%22%2C%0A%20%20%20%20value%3A%20function%20makeDraggable%28%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis%20%3D%20this%3B%0A%0A%20%20%20%20%20%20for%20%28var%20%5Flen%20%3D%20arguments%2Elength%2C%20sprites%20%3D%20Array%28%5Flen%29%2C%20%5Fkey%20%3D%200%3B%20%5Fkey%20%3C%20%5Flen%3B%20%5Fkey%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20sprites%5B%5Fkey%5D%20%3D%20arguments%5B%5Fkey%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20first%20argument%20isn%27t%20an%20array%20of%20sprites%2E%2E%2E%0A%20%20%20%20%20%20if%20%28%21%28sprites%5B0%5D%20instanceof%20Array%29%29%20%7B%0A%20%20%20%20%20%20%20%20sprites%2EforEach%28function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%5Fthis%2EdraggableSprites%2Epush%28sprite%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20sprite%27s%20%60draggable%60%20property%20hasn%27t%20already%20been%20defined%20by%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fanother%20library%2C%20like%20Hexi%2C%20define%20it%0A%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Edraggable%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Edraggable%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FlocalDraggableAllocation%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20first%20argument%20is%20an%20array%20of%20sprites%2E%2E%2E%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20spritesArray%20%3D%20sprites%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28spritesArray%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20spritesArray%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20spritesArray%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EdraggableSprites%2Epush%28sprite%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20sprite%27s%20%60draggable%60%20property%20hasn%27t%20already%20been%20defined%20by%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fanother%20library%2C%20like%20Hexi%2C%20define%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Edraggable%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Edraggable%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FlocalDraggableAllocation%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60makeUndraggable%60%20removes%20the%20sprite%20from%20the%20%60draggableSprites%60%0A%20%20%20%20%2F%2Farray%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22makeUndraggable%22%2C%0A%20%20%20%20value%3A%20function%20makeUndraggable%28%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis2%20%3D%20this%3B%0A%0A%20%20%20%20%20%20for%20%28var%20%5Flen2%20%3D%20arguments%2Elength%2C%20sprites%20%3D%20Array%28%5Flen2%29%2C%20%5Fkey2%20%3D%200%3B%20%5Fkey2%20%3C%20%5Flen2%3B%20%5Fkey2%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20sprites%5B%5Fkey2%5D%20%3D%20arguments%5B%5Fkey2%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20first%20argument%20isn%27t%20an%20array%20of%20sprites%2E%2E%2E%0A%20%20%20%20%20%20if%20%28%21%28sprites%5B0%5D%20instanceof%20Array%29%29%20%7B%0A%20%20%20%20%20%20%20%20sprites%2EforEach%28function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%5Fthis2%2EdraggableSprites%2Esplice%28%5Fthis2%2EdraggableSprites%2EindexOf%28sprite%29%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FlocalDraggableAllocation%20%3D%3D%3D%20true%29%20sprite%2Edraggable%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20first%20argument%20is%20an%20array%20of%20sprites%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20spritesArray%20%3D%20sprites%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28spritesArray%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20spritesArray%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20spritesArray%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2EdraggableSprites%2Esplice%28this%2EdraggableSprites%2EindexOf%28sprite%29%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FlocalDraggableAllocation%20%3D%3D%3D%20true%29%20sprite%2Edraggable%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22makePointer%22%2C%0A%20%20%20%20value%3A%20function%20makePointer%28%29%20%7B%0A%20%20%20%20%20%20var%20element%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20this%2Eelement%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20scale%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%20this%2Escale%20%3A%20arguments%5B1%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FGet%20a%20reference%20to%20Tink%27s%20global%20%60draggableSprites%60%20array%0A%20%20%20%20%20%20var%20draggableSprites%20%3D%20this%2EdraggableSprites%3B%0A%0A%20%20%20%20%20%20%2F%2FGet%20a%20reference%20to%20Tink%27s%20%60addGlobalPositionProperties%60%20method%0A%20%20%20%20%20%20var%20addGlobalPositionProperties%20%3D%20this%2EaddGlobalPositionProperties%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20pointer%20object%20will%20be%20returned%20by%20this%20function%0A%20%20%20%20%20%20var%20pointer%20%3D%20%7B%0A%20%20%20%20%20%20%20%20element%3A%20element%2C%0A%20%20%20%20%20%20%20%20scale%3A%20scale%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FPrivate%20x%20and%20y%20properties%0A%20%20%20%20%20%20%20%20%5Fx%3A%200%2C%0A%20%20%20%20%20%20%20%20%5Fy%3A%200%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FWidth%20and%20height%0A%20%20%20%20%20%20%20%20width%3A%201%2C%0A%20%20%20%20%20%20%20%20height%3A%201%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20public%20x%20and%20y%20properties%20are%20divided%20by%20the%20scale%2E%20If%20the%0A%20%20%20%20%20%20%20%20%2F%2FHTML%20element%20that%20the%20pointer%20is%20sensitive%20to%20%28like%20the%20canvas%29%0A%20%20%20%20%20%20%20%20%2F%2Fis%20scaled%20up%20or%20down%2C%20you%20can%20change%20the%20%60scale%60%20value%20to%0A%20%20%20%20%20%20%20%20%2F%2Fcorrect%20the%20pointer%27s%20position%20values%0A%20%20%20%20%20%20%20%20get%20x%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fx%20%2F%20this%2Escale%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20get%20y%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fy%20%2F%20this%2Escale%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20%60centerX%60%20and%20%60centerY%60%20getters%20so%20that%20we%0A%20%20%20%20%20%20%20%20%2F%2Fcan%20use%20the%20pointer%27s%20coordinates%20with%20easing%0A%20%20%20%20%20%20%20%20%2F%2Fand%20collision%20functions%0A%20%20%20%20%20%20%20%20get%20centerX%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2Ex%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20get%20centerY%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2Ey%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%60position%60%20returns%20an%20object%20with%20x%20and%20y%20properties%20that%0A%20%20%20%20%20%20%20%20%2F%2Fcontain%20the%20pointer%27s%20position%0A%20%20%20%20%20%20%20%20get%20position%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20this%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20this%2Ey%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20a%20%60cursor%60%20getter%2Fsetter%20to%20change%20the%20pointer%27s%20cursor%0A%20%20%20%20%20%20%20%20%2F%2Fstyle%2E%20Values%20can%20be%20%22pointer%22%20%28for%20a%20hand%20icon%29%20or%20%22auto%22%20for%0A%20%20%20%20%20%20%20%20%2F%2Fan%20ordinary%20arrow%20icon%2E%0A%20%20%20%20%20%20%20%20get%20cursor%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2Eelement%2Estyle%2Ecursor%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%20cursor%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2Eelement%2Estyle%2Ecursor%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FBooleans%20to%20track%20the%20pointer%20state%0A%20%20%20%20%20%20%20%20isDown%3A%20false%2C%0A%20%20%20%20%20%20%20%20isUp%3A%20true%2C%0A%20%20%20%20%20%20%20%20tapped%3A%20false%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FProperties%20to%20help%20measure%20the%20time%20between%20up%20and%20down%20states%0A%20%20%20%20%20%20%20%20downTime%3A%200%2C%0A%20%20%20%20%20%20%20%20elapsedTime%3A%200%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FOptional%20%60press%60%2C%60release%60%20and%20%60tap%60%20methods%0A%20%20%20%20%20%20%20%20press%3A%20undefined%2C%0A%20%20%20%20%20%20%20%20release%3A%20undefined%2C%0A%20%20%20%20%20%20%20%20tap%3A%20undefined%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FA%20%60dragSprite%60%20property%20to%20help%20with%20drag%20and%20drop%0A%20%20%20%20%20%20%20%20dragSprite%3A%20null%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20drag%20offsets%20to%20help%20drag%20sprites%0A%20%20%20%20%20%20%20%20dragOffsetX%3A%200%2C%0A%20%20%20%20%20%20%20%20dragOffsetY%3A%200%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FA%20property%20to%20check%20whether%20or%20not%20the%20pointer%0A%20%20%20%20%20%20%20%20%2F%2Fis%20visible%0A%20%20%20%20%20%20%20%20%5Fvisible%3A%20true%2C%0A%20%20%20%20%20%20%20%20get%20visible%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fvisible%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%20visible%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3D%3D%3D%20true%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ecursor%20%3D%20%22auto%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ecursor%20%3D%20%22none%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this%2E%5Fvisible%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20pointer%27s%20mouse%20%60moveHandler%60%0A%20%20%20%20%20%20%20%20moveHandler%3A%20function%20moveHandler%28event%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FGet%20the%20element%20that%27s%20firing%20the%20event%0A%20%20%20%20%20%20%20%20%20%20var%20element%20%3D%20event%2Etarget%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20pointer%E2%80%99s%20x%20and%20y%20position%20%28for%20mouse%29%2E%0A%20%20%20%20%20%20%20%20%20%20%2F%2FSubtract%20the%20element%27s%20top%20and%20left%20offset%20from%20the%20browser%20window%0A%20%20%20%20%20%20%20%20%20%20this%2E%5Fx%20%3D%20event%2EpageX%20%2D%20element%2EoffsetLeft%3B%0A%20%20%20%20%20%20%20%20%20%20this%2E%5Fy%20%3D%20event%2EpageY%20%2D%20element%2EoffsetTop%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FPrevent%20the%20event%27s%20default%20behavior%0A%20%20%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20pointer%27s%20%60touchmoveHandler%60%0A%20%20%20%20%20%20%20%20touchmoveHandler%3A%20function%20touchmoveHandler%28event%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20element%20%3D%20event%2Etarget%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20touch%20point%27s%20x%20and%20y%20position%0A%20%20%20%20%20%20%20%20%20%20this%2E%5Fx%20%3D%20event%2EtargetTouches%5B0%5D%2EpageX%20%2D%20element%2EoffsetLeft%3B%0A%20%20%20%20%20%20%20%20%20%20this%2E%5Fy%20%3D%20event%2EtargetTouches%5B0%5D%2EpageY%20%2D%20element%2EoffsetTop%3B%0A%20%20%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20pointer%27s%20%60downHandler%60%0A%20%20%20%20%20%20%20%20downHandler%3A%20function%20downHandler%28event%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FSet%20the%20down%20states%0A%20%20%20%20%20%20%20%20%20%20this%2EisDown%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20this%2EisUp%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20this%2Etapped%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCapture%20the%20current%20time%0A%20%20%20%20%20%20%20%20%20%20this%2EdownTime%20%3D%20Date%2Enow%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCall%20the%20%60press%60%20method%20if%20it%27s%20been%20assigned%0A%20%20%20%20%20%20%20%20%20%20if%20%28this%2Epress%29%20this%2Epress%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20pointer%27s%20%60touchstartHandler%60%0A%20%20%20%20%20%20%20%20touchstartHandler%3A%20function%20touchstartHandler%28event%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20element%20%3D%20event%2Etarget%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20touch%20point%27s%20x%20and%20y%20position%0A%20%20%20%20%20%20%20%20%20%20this%2E%5Fx%20%3D%20event%2EtargetTouches%5B0%5D%2EpageX%20%2D%20element%2EoffsetLeft%3B%0A%20%20%20%20%20%20%20%20%20%20this%2E%5Fy%20%3D%20event%2EtargetTouches%5B0%5D%2EpageY%20%2D%20element%2EoffsetTop%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FSet%20the%20down%20states%0A%20%20%20%20%20%20%20%20%20%20this%2EisDown%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20this%2EisUp%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20this%2Etapped%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCapture%20the%20current%20time%0A%20%20%20%20%20%20%20%20%20%20this%2EdownTime%20%3D%20Date%2Enow%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCall%20the%20%60press%60%20method%20if%20it%27s%20been%20assigned%0A%20%20%20%20%20%20%20%20%20%20if%20%28this%2Epress%29%20this%2Epress%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20pointer%27s%20%60upHandler%60%0A%20%20%20%20%20%20%20%20upHandler%3A%20function%20upHandler%28event%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20how%20much%20time%20the%20pointer%20has%20been%20down%0A%20%20%20%20%20%20%20%20%20%20this%2EelapsedTime%20%3D%20Math%2Eabs%28this%2EdownTime%20%2D%20Date%2Enow%28%29%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20it%27s%20less%20than%20200%20milliseconds%2C%20it%20must%20be%20a%20tap%20or%20click%0A%20%20%20%20%20%20%20%20%20%20if%20%28this%2EelapsedTime%20%3C%3D%20200%20%26%26%20this%2Etapped%20%3D%3D%3D%20false%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Etapped%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCall%20the%20%60tap%60%20method%20if%20it%27s%20been%20assigned%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2Etap%29%20this%2Etap%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this%2EisUp%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20this%2EisDown%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCall%20the%20%60release%60%20method%20if%20it%27s%20been%20assigned%0A%20%20%20%20%20%20%20%20%20%20if%20%28this%2Erelease%29%20this%2Erelease%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20pointer%27s%20%60touchendHandler%60%0A%20%20%20%20%20%20%20%20touchendHandler%3A%20function%20touchendHandler%28event%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20how%20much%20time%20the%20pointer%20has%20been%20down%0A%20%20%20%20%20%20%20%20%20%20this%2EelapsedTime%20%3D%20Math%2Eabs%28this%2EdownTime%20%2D%20Date%2Enow%28%29%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20it%27s%20less%20than%20200%20milliseconds%2C%20it%20must%20be%20a%20tap%20or%20click%0A%20%20%20%20%20%20%20%20%20%20if%20%28this%2EelapsedTime%20%3C%3D%20200%20%26%26%20this%2Etapped%20%3D%3D%3D%20false%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Etapped%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCall%20the%20%60tap%60%20method%20if%20it%27s%20been%20assigned%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2Etap%29%20this%2Etap%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this%2EisUp%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20this%2EisDown%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCall%20the%20%60release%60%20method%20if%20it%27s%20been%20assigned%0A%20%20%20%20%20%20%20%20%20%20if%20%28this%2Erelease%29%20this%2Erelease%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%60hitTestSprite%60%20figures%20out%20if%20the%20pointer%20is%20touching%20a%20sprite%0A%20%20%20%20%20%20%20%20hitTestSprite%3A%20function%20hitTestSprite%28sprite%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20global%20%60gx%60%20and%20%60gy%60%20properties%20to%20the%20sprite%20if%20they%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fdon%27t%20already%20exist%0A%20%20%20%20%20%20%20%20%20%20addGlobalPositionProperties%28sprite%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20%60hit%60%20variable%20will%20become%20%60true%60%20if%20the%20pointer%20is%0A%20%20%20%20%20%20%20%20%20%20%2F%2Ftouching%20the%20sprite%20and%20remain%20%60false%60%20if%20it%20isn%27t%0A%20%20%20%20%20%20%20%20%20%20var%20hit%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20out%20the%20sprite%27s%20offset%20from%20its%20anchor%20point%0A%20%20%20%20%20%20%20%20%20%20var%20xAnchorOffset%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20yAnchorOffset%20%3D%20undefined%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20xAnchorOffset%20%3D%20sprite%2Ewidth%20%2A%20sprite%2Eanchor%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20yAnchorOffset%20%3D%20sprite%2Eheight%20%2A%20sprite%2Eanchor%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20xAnchorOffset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20yAnchorOffset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIs%20the%20sprite%20rectangular%3F%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21sprite%2Ecircular%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGet%20the%20position%20of%20the%20sprite%27s%20edges%20using%20global%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fcoordinates%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20left%20%3D%20sprite%2Egx%20%2D%20xAnchorOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20right%20%3D%20sprite%2Egx%20%2B%20sprite%2Ewidth%20%2D%20xAnchorOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%20%3D%20sprite%2Egy%20%2D%20yAnchorOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bottom%20%3D%20sprite%2Egy%20%2B%20sprite%2Eheight%20%2D%20yAnchorOffset%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20out%20if%20the%20pointer%20is%20intersecting%20the%20rectangle%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%60hit%60%20will%20become%20%60true%60%20if%20the%20pointer%20is%20inside%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fsprite%27s%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20hit%20%3D%20this%2Ex%20%3E%20left%20%26%26%20this%2Ex%20%3C%20right%20%26%26%20this%2Ey%20%3E%20top%20%26%26%20this%2Ey%20%3C%20bottom%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIs%20the%20sprite%20circular%3F%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20distance%20between%20the%20pointer%20and%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fcenter%20of%20the%20circle%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20vx%20%3D%20this%2Ex%20%2D%20%28sprite%2Egx%20%2B%20sprite%2Ewidth%20%2F%202%20%2D%20xAnchorOffset%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vy%20%3D%20this%2Ey%20%2D%20%28sprite%2Egy%20%2B%20sprite%2Ewidth%20%2F%202%20%2D%20yAnchorOffset%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20distance%20%3D%20Math%2Esqrt%28vx%20%2A%20vx%20%2B%20vy%20%2A%20vy%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20pointer%20is%20intersecting%20the%20circle%20if%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fdistance%20is%20less%20than%20the%20circle%27s%20radius%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20hit%20%3D%20distance%20%3C%20sprite%2Ewidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20hit%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FBind%20the%20events%20to%20the%20handlers%0A%20%20%20%20%20%20%2F%2FMouse%20events%0A%20%20%20%20%20%20element%2EaddEventListener%28%22mousemove%22%2C%20pointer%2EmoveHandler%2Ebind%28pointer%29%2C%20false%29%3B%0A%20%20%20%20%20%20element%2EaddEventListener%28%22mousedown%22%2C%20pointer%2EdownHandler%2Ebind%28pointer%29%2C%20false%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20the%20%60mouseup%60%20event%20to%20the%20%60window%60%20to%0A%20%20%20%20%20%20%2F%2Fcatch%20a%20mouse%20button%20release%20outside%20of%20the%20canvas%20area%0A%20%20%20%20%20%20window%2EaddEventListener%28%22mouseup%22%2C%20pointer%2EupHandler%2Ebind%28pointer%29%2C%20false%29%3B%0A%0A%20%20%20%20%20%20%2F%2FTouch%20events%0A%20%20%20%20%20%20element%2EaddEventListener%28%22touchmove%22%2C%20pointer%2EtouchmoveHandler%2Ebind%28pointer%29%2C%20false%29%3B%0A%20%20%20%20%20%20element%2EaddEventListener%28%22touchstart%22%2C%20pointer%2EtouchstartHandler%2Ebind%28pointer%29%2C%20false%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20the%20%60touchend%60%20event%20to%20the%20%60window%60%20object%20to%0A%20%20%20%20%20%20%2F%2Fcatch%20a%20mouse%20button%20release%20outside%20of%20the%20canvas%20area%0A%20%20%20%20%20%20window%2EaddEventListener%28%22touchend%22%2C%20pointer%2EtouchendHandler%2Ebind%28pointer%29%2C%20false%29%3B%0A%0A%20%20%20%20%20%20%2F%2FDisable%20the%20default%20pan%20and%20zoom%20actions%20on%20the%20%60canvas%60%0A%20%20%20%20%20%20element%2Estyle%2EtouchAction%20%3D%20%22none%22%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20the%20pointer%20to%20Tink%27s%20global%20%60pointers%60%20array%0A%20%20%20%20%20%20this%2Epointers%2Epush%28pointer%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20pointer%0A%20%20%20%20%20%20return%20pointer%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FMany%20of%20Tink%27s%20objects%2C%20like%20pointers%2C%20use%20collision%0A%20%20%20%20%2F%2Fdetection%20using%20the%20sprites%27%20global%20x%20and%20y%20positions%2E%20To%20make%0A%20%20%20%20%2F%2Fthis%20easier%2C%20new%20%60gx%60%20and%20%60gy%60%20properties%20are%20added%20to%20sprites%0A%20%20%20%20%2F%2Fthat%20reference%20Pixi%20sprites%27%20%60getGlobalPosition%28%29%60%20values%2E%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22addGlobalPositionProperties%22%2C%0A%20%20%20%20value%3A%20function%20addGlobalPositionProperties%28sprite%29%20%7B%0A%20%20%20%20%20%20if%20%28sprite%2Egx%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22gx%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2EgetGlobalPosition%28%29%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28sprite%2Egy%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20Object%2EdefineProperty%28sprite%2C%20%22gy%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20sprite%2EgetGlobalPosition%28%29%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FA%20method%20that%20implments%20drag%2Dand%2Ddrop%20functionality%0A%20%20%20%20%2F%2Ffor%20each%20pointer%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22updateDragAndDrop%22%2C%0A%20%20%20%20value%3A%20function%20updateDragAndDrop%28draggableSprites%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20a%20pointer%20if%20one%20doesn%27t%20already%20exist%0A%20%20%20%20%20%20if%20%28this%2Epointers%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20this%2EmakePointer%28this%2Eelement%2C%20this%2Escale%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FLoop%20through%20all%20the%20pointers%20in%20Tink%27s%20global%20%60pointers%60%20array%0A%20%20%20%20%20%20%2F%2F%28there%20will%20usually%20just%20be%20one%2C%20but%20you%20never%20know%29%0A%20%20%20%20%20%20this%2Epointers%2EforEach%28function%20%28pointer%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCheck%20whether%20the%20pointer%20is%20pressed%20down%0A%20%20%20%20%20%20%20%20if%20%28pointer%2EisDown%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FYou%20need%20to%20capture%20the%20co%2Dordinates%20at%20which%20the%20pointer%20was%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fpressed%20down%20and%20find%20out%20if%20it%27s%20touching%20a%20sprite%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FOnly%20run%20pointer%2Ecode%20if%20the%20pointer%20isn%27t%20already%20dragging%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fsprite%0A%20%20%20%20%20%20%20%20%20%20if%20%28pointer%2EdragSprite%20%3D%3D%3D%20null%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FLoop%20through%20the%20%60draggableSprites%60%20in%20reverse%20to%20start%20searching%20at%20the%20bottom%20of%20the%20stack%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20draggableSprites%2Elength%20%2D%201%3B%20i%20%3E%20%2D1%3B%20i%2D%2D%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGet%20a%20reference%20to%20the%20current%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20draggableSprites%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCheck%20for%20a%20collision%20with%20the%20pointer%20using%20%60hitTestSprite%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pointer%2EhitTestSprite%28sprite%29%20%26%26%20sprite%2Edraggable%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCalculate%20the%20difference%20between%20the%20pointer%27s%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fposition%20and%20the%20sprite%27s%20position%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointer%2EdragOffsetX%20%3D%20pointer%2Ex%20%2D%20sprite%2Egx%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointer%2EdragOffsetY%20%3D%20pointer%2Ey%20%2D%20sprite%2Egy%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FSet%20the%20sprite%20as%20the%20pointer%27s%20%60dragSprite%60%20property%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointer%2EdragSprite%20%3D%20sprite%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20next%20two%20lines%20re%2Dorder%20the%20%60sprites%60%20array%20so%20that%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fselected%20sprite%20is%20displayed%20above%20all%20the%20others%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFirst%2C%20splice%20the%20sprite%20out%20of%20its%20current%20position%20in%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fits%20parent%27s%20%60children%60%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20children%20%3D%20sprite%2Eparent%2Echildren%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20children%2Esplice%28children%2EindexOf%28sprite%29%2C%201%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FNext%2C%20push%20the%20%60dragSprite%60%20to%20the%20end%20of%20its%20%60children%60%20array%20so%20that%20it%27s%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fdisplayed%20last%2C%20above%20all%20the%20other%20sprites%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20children%2Epush%28sprite%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FReorganize%20the%20%60draggableSpites%60%20array%20in%20the%20same%20way%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20draggableSprites%2Esplice%28draggableSprites%2EindexOf%28sprite%29%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20draggableSprites%2Epush%28sprite%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FBreak%20the%20loop%2C%20because%20we%20only%20need%20to%20drag%20the%20topmost%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20pointer%20is%20down%20and%20it%20has%20a%20%60dragSprite%60%2C%20make%20the%20sprite%20follow%20the%20pointer%27s%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fposition%2C%20with%20the%20calculated%20offset%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointer%2EdragSprite%2Ex%20%3D%20pointer%2Ex%20%2D%20pointer%2EdragOffsetX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pointer%2EdragSprite%2Ey%20%3D%20pointer%2Ey%20%2D%20pointer%2EdragOffsetY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20pointer%20is%20up%2C%20drop%20the%20%60dragSprite%60%20by%20setting%20it%20to%20%60null%60%0A%20%20%20%20%20%20%20%20if%20%28pointer%2EisUp%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20pointer%2EdragSprite%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FChange%20the%20mouse%20arrow%20pointer%20to%20a%20hand%20if%20it%27s%20over%20a%0A%20%20%20%20%20%20%20%20%2F%2Fdraggable%20sprite%0A%20%20%20%20%20%20%20%20draggableSprites%2Esome%28function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28pointer%2EhitTestSprite%28sprite%29%20%26%26%20sprite%2Edraggable%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pointer%2Evisible%29%20pointer%2Ecursor%20%3D%20%22pointer%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pointer%2Evisible%29%20pointer%2Ecursor%20%3D%20%22auto%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22makeInteractive%22%2C%0A%20%20%20%20value%3A%20function%20makeInteractive%28o%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60press%60%2C%60release%60%2C%20%60over%60%2C%20%60out%60%20and%20%60tap%60%20methods%2E%20They%27re%20%60undefined%60%0A%20%20%20%20%20%20%2F%2Ffor%20now%2C%20but%20they%20can%20be%20defined%20in%20the%20game%20program%0A%20%20%20%20%20%20o%2Epress%20%3D%20o%2Epress%20%7C%7C%20undefined%3B%0A%20%20%20%20%20%20o%2Erelease%20%3D%20o%2Erelease%20%7C%7C%20undefined%3B%0A%20%20%20%20%20%20o%2Eover%20%3D%20o%2Eover%20%7C%7C%20undefined%3B%0A%20%20%20%20%20%20o%2Eout%20%3D%20o%2Eout%20%7C%7C%20undefined%3B%0A%20%20%20%20%20%20o%2Etap%20%3D%20o%2Etap%20%7C%7C%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60state%60%20property%20tells%20you%20the%20button%27s%0A%20%20%20%20%20%20%2F%2Fcurrent%20state%2E%20Set%20its%20initial%20state%20to%20%22up%22%0A%20%20%20%20%20%20o%2Estate%20%3D%20%22up%22%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60action%60%20property%20tells%20you%20whether%20its%20being%20pressed%20or%0A%20%20%20%20%20%20%2F%2Freleased%0A%20%20%20%20%20%20o%2Eaction%20%3D%20%22%22%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60pressed%60%20and%20%60hoverOver%60%20Booleans%20are%20mainly%20for%20internal%0A%20%20%20%20%20%20%2F%2Fuse%20in%20this%20code%20to%20help%20figure%20out%20the%20correct%20state%2E%0A%20%20%20%20%20%20%2F%2F%60pressed%60%20is%20a%20Boolean%20that%20helps%20track%20whether%20or%20not%0A%20%20%20%20%20%20%2F%2Fthe%20sprite%20has%20been%20pressed%20down%0A%20%20%20%20%20%20o%2Epressed%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%2F%2F%60hoverOver%60%20is%20a%20Boolean%20which%20checks%20whether%20the%20pointer%0A%20%20%20%20%20%20%2F%2Fhas%20hovered%20over%20the%20sprite%0A%20%20%20%20%20%20o%2EhoverOver%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%2F%2FtinkType%20is%20a%20string%20that%20will%20be%20set%20to%20%22button%22%20if%20the%0A%20%20%20%20%20%20%2F%2Fuser%20creates%20an%20object%20using%20the%20%60button%60%20function%0A%20%20%20%20%20%20o%2EtinkType%20%3D%20%22%22%3B%0A%0A%20%20%20%20%20%20%2F%2FSet%20%60enabled%60%20to%20true%20to%20allow%20for%20interactivity%0A%20%20%20%20%20%20%2F%2FSet%20%60enabled%60%20to%20false%20to%20disable%20interactivity%0A%20%20%20%20%20%20o%2Eenabled%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20the%20sprite%20to%20the%20global%20%60buttons%60%20array%20so%20that%20it%20can%0A%20%20%20%20%20%20%2F%2Fbe%20updated%20each%20frame%20in%20the%20%60updateButtons%20method%0A%20%20%20%20%20%20this%2Ebuttons%2Epush%28o%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20%60updateButtons%60%20method%20will%20be%20called%20each%20frame%0A%20%20%20%20%2F%2Finside%20the%20game%20loop%2E%20It%20updates%20all%20the%20button%2Dlike%20sprites%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22updateButtons%22%2C%0A%20%20%20%20value%3A%20function%20updateButtons%28%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis3%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20a%20pointer%20if%20one%20doesn%27t%20already%20exist%0A%20%20%20%20%20%20if%20%28this%2Epointers%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20this%2EmakePointer%28this%2Eelement%2C%20this%2Escale%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FLoop%20through%20all%20the%20button%2Dlike%20sprites%20that%20were%20created%0A%20%20%20%20%20%20%2F%2Fusing%20the%20%60makeInteractive%60%20method%0A%20%20%20%20%20%20this%2Ebuttons%2EforEach%28function%20%28o%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FOnly%20do%20this%20if%20the%20interactive%20object%20is%20enabled%0A%20%20%20%20%20%20%20%20if%20%28o%2Eenabled%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FLoop%20through%20all%20of%20Tink%27s%20pointers%20%28there%20will%20usually%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fjust%20be%20one%29%0A%20%20%20%20%20%20%20%20%20%20%5Fthis3%2Epointers%2EforEach%28function%20%28pointer%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20if%20the%20pointer%20is%20touching%20the%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20hit%20%3D%20pointer%2EhitTestSprite%28o%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F1%2E%20Figure%20out%20the%20current%20state%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pointer%2EisUp%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FUp%20state%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Estate%20%3D%20%22up%22%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FShow%20the%20first%20image%20state%20frame%2C%20if%20this%20is%20a%20%60Button%60%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2EtinkType%20%3D%3D%3D%20%22button%22%29%20o%2EgotoAndStop%280%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20pointer%20is%20touching%20the%20sprite%2C%20figure%20out%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fif%20the%20over%20or%20down%20state%20should%20be%20displayed%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28hit%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FOver%20state%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Estate%20%3D%20%22over%22%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FShow%20the%20second%20image%20state%20frame%20if%20this%20sprite%20has%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F3%20frames%20and%20it%27s%20a%20%60Button%60%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2EtotalFrames%20%26%26%20o%2EtotalFrames%20%3D%3D%3D%203%20%26%26%20o%2EtinkType%20%3D%3D%3D%20%22button%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2EgotoAndStop%281%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FDown%20state%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pointer%2EisDown%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Estate%20%3D%20%22down%22%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FShow%20the%20third%20frame%20if%20this%20sprite%20is%20a%20%60Button%60%20sprite%20and%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fhas%20only%20three%20frames%2C%20or%20show%20the%20second%20frame%20if%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fonly%20has%20two%20frames%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2EtinkType%20%3D%3D%3D%20%22button%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2EtotalFrames%20%3D%3D%3D%203%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2EgotoAndStop%282%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2EgotoAndStop%281%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FChange%20the%20pointer%20icon%20to%20a%20hand%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pointer%2Evisible%29%20pointer%2Ecursor%20%3D%20%22pointer%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FTurn%20the%20pointer%20to%20an%20ordinary%20arrow%20icon%20if%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fpointer%20isn%27t%20touching%20a%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pointer%2Evisible%29%20pointer%2Ecursor%20%3D%20%22auto%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FPerform%20the%20correct%20interactive%20action%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fa%2E%20Run%20the%20%60press%60%20method%20if%20the%20sprite%20state%20is%20%22down%22%20and%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20sprite%20hasn%27t%20already%20been%20pressed%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Estate%20%3D%3D%3D%20%22down%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21o%2Epressed%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Epress%29%20o%2Epress%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Epressed%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Eaction%20%3D%20%22pressed%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fb%2E%20Run%20the%20%60release%60%20method%20if%20the%20sprite%20state%20is%20%22over%22%20and%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20sprite%20has%20been%20pressed%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Estate%20%3D%3D%3D%20%22over%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Epressed%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Erelease%29%20o%2Erelease%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Epressed%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Eaction%20%3D%20%22released%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20pointer%20was%20tapped%20and%20the%20user%20assigned%20a%20%60tap%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fmethod%2C%20call%20the%20%60tap%60%20method%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pointer%2Etapped%20%26%26%20o%2Etap%29%20o%2Etap%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FRun%20the%20%60over%60%20method%20if%20it%20has%20been%20assigned%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21o%2EhoverOver%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Eover%29%20o%2Eover%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2EhoverOver%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fc%2E%20Check%20whether%20the%20pointer%20has%20been%20released%20outside%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20sprite%27s%20area%2E%20If%20the%20button%20state%20is%20%22up%22%20and%20it%27s%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Falready%20been%20pressed%2C%20then%20run%20the%20%60release%60%20method%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Estate%20%3D%3D%3D%20%22up%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Epressed%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Erelease%29%20o%2Erelease%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Epressed%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Eaction%20%3D%20%22released%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FRun%20the%20%60out%60%20method%20if%20it%20has%20been%20assigned%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2EhoverOver%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Eout%29%20o%2Eout%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2EhoverOver%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FA%20function%20that%20creates%20a%20sprite%20with%203%20frames%20that%0A%20%20%20%20%2F%2Frepresent%20the%20button%20states%3A%20up%2C%20over%20and%20down%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22button%22%2C%0A%20%20%20%20value%3A%20function%20button%28source%29%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20sprite%20object%20that%20will%20be%20returned%0A%20%20%20%20%20%20var%20o%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FIs%20it%20an%20array%20of%20frame%20ids%20or%20textures%3F%0A%20%20%20%20%20%20if%20%28typeof%20source%5B0%5D%20%3D%3D%3D%20%22string%22%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FThey%27re%20strings%2C%20but%20are%20they%20pre%2Dexisting%20texture%20or%0A%20%20%20%20%20%20%20%20%2F%2Fpaths%20to%20image%20files%3F%0A%20%20%20%20%20%20%20%20%2F%2FCheck%20to%20see%20if%20the%20first%20element%20matches%20a%20texture%20in%20the%0A%20%20%20%20%20%20%20%20%2F%2Fcache%0A%20%20%20%20%20%20%20%20if%20%28this%2ETextureCache%5Bsource%5B0%5D%5D%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIt%20does%2C%20so%20it%27s%20an%20array%20of%20frame%20ids%0A%20%20%20%20%20%20%20%20%20%20o%20%3D%20this%2EMovieClip%2EfromFrames%28source%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIt%27s%20not%20already%20in%20the%20cache%2C%20so%20let%27s%20load%20it%0A%20%20%20%20%20%20%20%20%20%20o%20%3D%20this%2EMovieClip%2EfromImages%28source%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20%60source%60%20isn%27t%20an%20array%20of%20strings%2C%20check%20whether%0A%20%20%20%20%20%20%2F%2Fit%27s%20an%20array%20of%20textures%0A%20%20%20%20%20%20else%20if%20%28source%5B0%5D%20instanceof%20this%2ETexture%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FYes%2C%20it%27s%20an%20array%20of%20textures%2E%0A%20%20%20%20%20%20%20%20%20%20%2F%2FUse%20them%20to%20make%20a%20MovieClip%20o%0A%20%20%20%20%20%20%20%20%20%20o%20%3D%20new%20this%2EMovieClip%28source%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FAdd%20interactive%20properties%20to%20the%20button%0A%20%20%20%20%20%20this%2EmakeInteractive%28o%29%3B%0A%0A%20%20%20%20%20%20%2F%2FSet%20the%20%60tinkType%60%20to%20%22button%22%0A%20%20%20%20%20%20o%2EtinkType%20%3D%20%22button%22%3B%0A%0A%20%20%20%20%20%20%2F%2FPosition%20the%20button%0A%20%20%20%20%20%20o%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20o%2Ey%20%3D%20y%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20new%20button%20sprite%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FRun%20the%20%60udpate%60%20function%20in%20your%20game%20loop%0A%20%20%20%20%2F%2Fto%20update%20all%20of%20Tink%27s%20interactive%20objects%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22update%22%2C%0A%20%20%20%20value%3A%20function%20update%28%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FUpdate%20the%20drag%20and%20drop%20system%0A%20%20%20%20%20%20if%20%28this%2EdraggableSprites%2Elength%20%21%3D%3D%200%29%20this%2EupdateDragAndDrop%28this%2EdraggableSprites%29%3B%0A%0A%20%20%20%20%20%20%2F%2FUpdate%20the%20buttons%20and%20button%2Dlike%20interactive%20sprites%0A%20%20%20%20%20%20if%20%28this%2Ebuttons%2Elength%20%21%3D%3D%200%29%20this%2EupdateButtons%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%60keyboard%60%20is%20a%20method%20that%20listens%20for%20and%20captures%20keyboard%20events%2E%20It%27s%20really%0A%20%20%20%20just%20a%20convenient%20wrapper%20function%20for%20HTML%20%60keyup%60%20and%20%60keydown%60%20events%20so%20that%20you%20can%20keep%20your%20application%20code%20clutter%2Dfree%20and%20easier%20to%20write%20and%20read%2E%0A%20%20%20%20%20Here%27s%20how%20to%20use%20the%20%60keyboard%60%20method%2E%20Create%20a%20new%20keyboard%20object%20like%20this%3A%0A%20%20%20%20%60%60%60js%0A%20%20%20%20let%20keyObject%20%3D%20keyboard%28asciiKeyCodeNumber%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20It%27s%20one%20argument%20is%20the%20ASCII%20key%20code%20number%20of%20the%20keyboard%20key%0A%20%20%20%20that%20you%20want%20to%20listen%20for%2E%20%5BHere%27s%20a%20list%20of%20ASCII%20key%20codes%20you%20can%0A%20%20%20%20use%5D%28http%3A%2F%2Fwww%2Easciitable%2Ecom%29%2E%0A%20%20%20%20Then%20assign%20%60press%60%20and%20%60release%60%20methods%20to%20the%20keyboard%20object%20like%20this%3A%0A%20%20%20%20%60%60%60js%0A%20%20%20%20keyObject%2Epress%20%3D%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2F%2Fkey%20object%20pressed%0A%20%20%20%20%7D%3B%0A%20%20%20%20keyObject%2Erelease%20%3D%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2F%2Fkey%20object%20released%0A%20%20%20%20%7D%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20Keyboard%20objects%20also%20have%20%60isDown%60%20and%20%60isUp%60%20Boolean%20properties%20that%20you%20can%20use%20to%20check%20the%20state%20of%20each%20key%2E%20%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22keyboard%22%2C%0A%20%20%20%20value%3A%20function%20keyboard%28keyCode%29%20%7B%0A%20%20%20%20%20%20var%20key%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20key%2Ecode%20%3D%20keyCode%3B%0A%20%20%20%20%20%20key%2EisDown%20%3D%20false%3B%0A%20%20%20%20%20%20key%2EisUp%20%3D%20true%3B%0A%20%20%20%20%20%20key%2Epress%20%3D%20undefined%3B%0A%20%20%20%20%20%20key%2Erelease%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60downHandler%60%0A%20%20%20%20%20%20key%2EdownHandler%20%3D%20function%20%28event%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28event%2EkeyCode%20%3D%3D%3D%20key%2Ecode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28key%2EisUp%20%26%26%20key%2Epress%29%20key%2Epress%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20key%2EisDown%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20key%2EisUp%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60upHandler%60%0A%20%20%20%20%20%20key%2EupHandler%20%3D%20function%20%28event%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28event%2EkeyCode%20%3D%3D%3D%20key%2Ecode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28key%2EisDown%20%26%26%20key%2Erelease%29%20key%2Erelease%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20key%2EisDown%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20key%2EisUp%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FAttach%20event%20listeners%0A%20%20%20%20%20%20window%2EaddEventListener%28%22keydown%22%2C%20key%2EdownHandler%2Ebind%28key%29%2C%20false%29%3B%0A%20%20%20%20%20%20window%2EaddEventListener%28%22keyup%22%2C%20key%2EupHandler%2Ebind%28key%29%2C%20false%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20key%20object%0A%20%20%20%20%20%20return%20key%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60arrowControl%60%20is%20a%20convenience%20method%20for%20updating%20a%20sprite%27s%20velocity%0A%20%20%20%20%2F%2Ffor%204%2Dway%20movement%20using%20the%20arrow%20directional%20keys%2E%20Supply%20it%0A%20%20%20%20%2F%2Fwith%20the%20sprite%20you%20want%20to%20control%20and%20the%20speed%20per%20frame%2C%20in%0A%20%20%20%20%2F%2Fpixels%2C%20that%20you%20want%20to%20update%20the%20sprite%27s%20velocity%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22arrowControl%22%2C%0A%20%20%20%20value%3A%20function%20arrowControl%28sprite%2C%20speed%29%20%7B%0A%0A%20%20%20%20%20%20if%20%28speed%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%22Please%20supply%20the%20arrowControl%20method%20with%20the%20speed%20at%20which%20you%20want%20the%20sprite%20to%20move%22%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20var%20upArrow%20%3D%20this%2Ekeyboard%2838%29%2C%0A%20%20%20%20%20%20%20%20%20%20rightArrow%20%3D%20this%2Ekeyboard%2839%29%2C%0A%20%20%20%20%20%20%20%20%20%20downArrow%20%3D%20this%2Ekeyboard%2840%29%2C%0A%20%20%20%20%20%20%20%20%20%20leftArrow%20%3D%20this%2Ekeyboard%2837%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAssign%20key%20%60press%60%20methods%0A%20%20%20%20%20%20leftArrow%2Epress%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FChange%20the%20sprite%27s%20velocity%20when%20the%20key%20is%20pressed%0A%20%20%20%20%20%20%20%20sprite%2Evx%20%3D%20%2Dspeed%3B%0A%20%20%20%20%20%20%20%20sprite%2Evy%20%3D%200%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20leftArrow%2Erelease%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20left%20arrow%20has%20been%20released%2C%20and%20the%20right%20arrow%20isn%27t%20down%2C%0A%20%20%20%20%20%20%20%20%2F%2Fand%20the%20sprite%20isn%27t%20moving%20vertically%3A%0A%20%20%20%20%20%20%20%20%2F%2FStop%20the%20sprite%0A%20%20%20%20%20%20%20%20if%20%28%21rightArrow%2EisDown%20%26%26%20sprite%2Evy%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2Evx%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20upArrow%2Epress%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20sprite%2Evy%20%3D%20%2Dspeed%3B%0A%20%20%20%20%20%20%20%20sprite%2Evx%20%3D%200%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20upArrow%2Erelease%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21downArrow%2EisDown%20%26%26%20sprite%2Evx%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2Evy%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20rightArrow%2Epress%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20sprite%2Evx%20%3D%20speed%3B%0A%20%20%20%20%20%20%20%20sprite%2Evy%20%3D%200%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20rightArrow%2Erelease%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21leftArrow%2EisDown%20%26%26%20sprite%2Evy%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2Evx%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20downArrow%2Epress%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20sprite%2Evy%20%3D%20speed%3B%0A%20%20%20%20%20%20%20%20sprite%2Evx%20%3D%200%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20downArrow%2Erelease%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21upArrow%2EisDown%20%26%26%20sprite%2Evx%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2Evy%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%7D%5D%29%3B%0A%0A%20%20return%20Tink%3B%0A%7D%29%28%29%3B%0A%2F%2F%23%20sourceMappingURL%3Dtink%2Ejs%2Emap%22use%20strict%22%3B%0A%0Avar%20%5FcreateClass%20%3D%20%28function%20%28%29%20%7B%20function%20defineProperties%28target%2C%20props%29%20%7B%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20props%2Elength%3B%20i%2B%2B%29%20%7B%20var%20descriptor%20%3D%20props%5Bi%5D%3B%20descriptor%2Eenumerable%20%3D%20descriptor%2Eenumerable%20%7C%7C%20false%3B%20descriptor%2Econfigurable%20%3D%20true%3B%20if%20%28%22value%22%20in%20descriptor%29%20descriptor%2Ewritable%20%3D%20true%3B%20Object%2EdefineProperty%28target%2C%20descriptor%2Ekey%2C%20descriptor%29%3B%20%7D%20%7D%20return%20function%20%28Constructor%2C%20protoProps%2C%20staticProps%29%20%7B%20if%20%28protoProps%29%20defineProperties%28Constructor%2Eprototype%2C%20protoProps%29%3B%20if%20%28staticProps%29%20defineProperties%28Constructor%2C%20staticProps%29%3B%20return%20Constructor%3B%20%7D%3B%20%7D%29%28%29%3B%0A%0Afunction%20%5FclassCallCheck%28instance%2C%20Constructor%29%20%7B%20if%20%28%21%28instance%20instanceof%20Constructor%29%29%20%7B%20throw%20new%20TypeError%28%22Cannot%20call%20a%20class%20as%20a%20function%22%29%3B%20%7D%20%7D%0A%0Avar%20Dust%20%3D%20%28function%20%28%29%20%7B%0A%20%20function%20Dust%28%29%20%7B%0A%20%20%20%20var%20renderingEngine%20%3D%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20PIXI%20%3A%20arguments%5B0%5D%3B%0A%0A%20%20%20%20%5FclassCallCheck%28this%2C%20Dust%29%3B%0A%0A%20%20%20%20if%20%28renderingEngine%20%3D%3D%3D%20undefined%29%20throw%20new%20Error%28%22Please%20assign%20a%20rendering%20engine%20in%20the%20constructor%20before%20using%20pixiDust%2Ejs%22%29%3B%0A%0A%20%20%20%20%2F%2FFind%20out%20which%20rendering%20engine%20is%20being%20used%20%28the%20default%20is%20Pixi%29%0A%20%20%20%20this%2Erenderer%20%3D%20%22%22%3B%0A%0A%20%20%20%20%2F%2FIf%20the%20%60renderingEngine%60%20is%20Pixi%2C%20set%20up%20Pixi%20object%20aliases%0A%20%20%20%20if%20%28renderingEngine%2EParticleContainer%29%20%7B%0A%20%20%20%20%20%20this%2EContainer%20%3D%20renderingEngine%2EContainer%3B%0A%20%20%20%20%20%20this%2Erenderer%20%3D%20%22pixi%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20%60particles%60%20array%20stores%20all%20the%20particles%20you%20make%0A%20%20%20%20this%2EglobalParticles%20%3D%20%5B%5D%3B%0A%20%20%7D%0A%0A%20%20%5FcreateClass%28Dust%2C%20%5B%7B%0A%20%20%20%20key%3A%20%22randomFloat%22%2C%0A%0A%20%20%20%20%2F%2FRandom%20number%20functions%0A%20%20%20%20value%3A%20function%20randomFloat%28min%2C%20max%29%20%7B%0A%20%20%20%20%20%20return%20min%20%2B%20Math%2Erandom%28%29%20%2A%20%28max%20%2D%20min%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22randomInt%22%2C%0A%20%20%20%20value%3A%20function%20randomInt%28min%2C%20max%29%20%7B%0A%20%20%20%20%20%20return%20Math%2Efloor%28Math%2Erandom%28%29%20%2A%20%28max%20%2D%20min%20%2B%201%29%29%20%2B%20min%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22create%22%2C%0A%0A%20%20%20%20%2F%2FUse%20the%20create%20function%20to%20create%20new%20particle%20effects%0A%20%20%20%20value%3A%20function%20create%28%29%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20spriteFunction%20%3D%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20console%2Elog%28%22Sprite%20creation%20function%22%29%3B%0A%20%20%20%20%20%20%7D%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20container%20%3D%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis%2EContainer%28%29%3B%0A%20%20%20%20%20%20%7D%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20numberOfParticles%20%3D%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%2020%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20gravity%20%3D%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20var%20randomSpacing%20%3D%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20arguments%5B6%5D%3B%0A%20%20%20%20%20%20var%20minAngle%20%3D%20arguments%5B7%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B7%5D%3B%0A%20%20%20%20%20%20var%20maxAngle%20%3D%20arguments%5B8%5D%20%3D%3D%3D%20undefined%20%3F%206%2E28%20%3A%20arguments%5B8%5D%3B%0A%20%20%20%20%20%20var%20minSize%20%3D%20arguments%5B9%5D%20%3D%3D%3D%20undefined%20%3F%204%20%3A%20arguments%5B9%5D%3B%0A%20%20%20%20%20%20var%20maxSize%20%3D%20arguments%5B10%5D%20%3D%3D%3D%20undefined%20%3F%2016%20%3A%20arguments%5B10%5D%3B%0A%20%20%20%20%20%20var%20minSpeed%20%3D%20arguments%5B11%5D%20%3D%3D%3D%20undefined%20%3F%200%2E3%20%3A%20arguments%5B11%5D%3B%0A%20%20%20%20%20%20var%20maxSpeed%20%3D%20arguments%5B12%5D%20%3D%3D%3D%20undefined%20%3F%203%20%3A%20arguments%5B12%5D%3B%0A%20%20%20%20%20%20var%20minScaleSpeed%20%3D%20arguments%5B13%5D%20%3D%3D%3D%20undefined%20%3F%200%2E01%20%3A%20arguments%5B13%5D%3B%0A%20%20%20%20%20%20var%20maxScaleSpeed%20%3D%20arguments%5B14%5D%20%3D%3D%3D%20undefined%20%3F%200%2E05%20%3A%20arguments%5B14%5D%3B%0A%20%20%20%20%20%20var%20minAlphaSpeed%20%3D%20arguments%5B15%5D%20%3D%3D%3D%20undefined%20%3F%200%2E02%20%3A%20arguments%5B15%5D%3B%0A%20%20%20%20%20%20var%20maxAlphaSpeed%20%3D%20arguments%5B16%5D%20%3D%3D%3D%20undefined%20%3F%200%2E02%20%3A%20arguments%5B16%5D%3B%0A%0A%20%20%20%20%20%20var%20%5Fthis%20%3D%20this%3B%0A%0A%20%20%20%20%20%20var%20minRotationSpeed%20%3D%20arguments%5B17%5D%20%3D%3D%3D%20undefined%20%3F%200%2E01%20%3A%20arguments%5B17%5D%3B%0A%20%20%20%20%20%20var%20maxRotationSpeed%20%3D%20arguments%5B18%5D%20%3D%3D%3D%20undefined%20%3F%200%2E03%20%3A%20arguments%5B18%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAn%20array%20to%20store%20the%20curent%20batch%20of%20particles%0A%20%20%20%20%20%20var%20particles%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20the%20current%20%60particles%60%20array%20to%20the%20%60globalParticles%60%20array%0A%20%20%20%20%20%20this%2EglobalParticles%2Epush%28particles%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAn%20array%20to%20store%20the%20angles%0A%20%20%20%20%20%20var%20angles%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FA%20variable%20to%20store%20the%20current%20particle%27s%20angle%0A%20%20%20%20%20%20var%20angle%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FFigure%20out%20by%20how%20many%20radians%20each%20particle%20should%20be%20separated%0A%20%20%20%20%20%20var%20spacing%20%3D%20%28maxAngle%20%2D%20minAngle%29%20%2F%20%28numberOfParticles%20%2D%201%29%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20an%20angle%20value%20for%20each%20particle%20and%20push%20that%20%2F%2Fvalue%20into%20the%20%60angles%60%20array%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20numberOfParticles%3B%20i%2B%2B%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20%60randomSpacing%60%20is%20%60true%60%2C%20give%20the%20particle%20any%20angle%0A%20%20%20%20%20%20%20%20%2F%2Fvalue%20between%20%60minAngle%60%20and%20%60maxAngle%60%0A%20%20%20%20%20%20%20%20if%20%28randomSpacing%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20angle%20%3D%20this%2ErandomFloat%28minAngle%2C%20maxAngle%29%3B%0A%20%20%20%20%20%20%20%20%20%20angles%2Epush%28angle%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20%60randomSpacing%60%20is%20%60false%60%2C%20space%20each%20particle%20evenly%2C%0A%20%20%20%20%20%20%20%20%2F%2Fstarting%20with%20the%20%60minAngle%60%20and%20ending%20with%20the%20%60maxAngle%60%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28angle%20%3D%3D%3D%20undefined%29%20angle%20%3D%20minAngle%3B%0A%20%20%20%20%20%20%20%20%20%20angles%2Epush%28angle%29%3B%0A%20%20%20%20%20%20%20%20%20%20angle%20%2B%3D%20spacing%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FA%20function%20to%20make%20particles%0A%20%20%20%20%20%20var%20makeParticle%20%3D%20function%20makeParticle%28angle%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCreate%20the%20particle%20using%20the%20supplied%20sprite%20function%0A%20%20%20%20%20%20%20%20var%20particle%20%3D%20spriteFunction%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FDisplay%20a%20random%20frame%20if%20the%20particle%20has%20more%20than%201%20frame%0A%20%20%20%20%20%20%20%20if%20%28particle%2EtotalFrames%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20particle%2EgotoAndStop%28%5Fthis%2ErandomInt%280%2C%20particle%2EtotalFrames%20%2D%201%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FSet%20a%20random%20width%20and%20height%0A%20%20%20%20%20%20%20%20var%20size%20%3D%20%5Fthis%2ErandomInt%28minSize%2C%20maxSize%29%3B%0A%20%20%20%20%20%20%20%20particle%2Ewidth%20%3D%20size%3B%0A%20%20%20%20%20%20%20%20particle%2Eheight%20%3D%20size%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FSet%20the%20particle%27s%20%60anchor%60%20to%20its%20center%0A%20%20%20%20%20%20%20%20particle%2Eanchor%2Eset%280%2E5%2C%200%2E5%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FSet%20the%20x%20and%20y%20position%0A%20%20%20%20%20%20%20%20particle%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20particle%2Ey%20%3D%20y%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FSet%20a%20random%20speed%20to%20change%20the%20scale%2C%20alpha%20and%20rotation%0A%20%20%20%20%20%20%20%20particle%2EscaleSpeed%20%3D%20%5Fthis%2ErandomFloat%28minScaleSpeed%2C%20maxScaleSpeed%29%3B%0A%20%20%20%20%20%20%20%20particle%2EalphaSpeed%20%3D%20%5Fthis%2ErandomFloat%28minAlphaSpeed%2C%20maxAlphaSpeed%29%3B%0A%20%20%20%20%20%20%20%20particle%2ErotationSpeed%20%3D%20%5Fthis%2ErandomFloat%28minRotationSpeed%2C%20maxRotationSpeed%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FSet%20a%20random%20velocity%20at%20which%20the%20particle%20should%20move%0A%20%20%20%20%20%20%20%20var%20speed%20%3D%20%5Fthis%2ErandomFloat%28minSpeed%2C%20maxSpeed%29%3B%0A%20%20%20%20%20%20%20%20particle%2Evx%20%3D%20speed%20%2A%20Math%2Ecos%28angle%29%3B%0A%20%20%20%20%20%20%20%20particle%2Evy%20%3D%20speed%20%2A%20Math%2Esin%28angle%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FPush%20the%20particle%20into%20the%20%60particles%60%20array%2E%0A%20%20%20%20%20%20%20%20%2F%2FThe%20%60particles%60%20array%20needs%20to%20be%20updated%20by%20the%20game%20loop%20each%20frame%20particles%2Epush%28particle%29%3B%0A%20%20%20%20%20%20%20%20particles%2Epush%28particle%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20particle%20to%20its%20parent%20container%0A%20%20%20%20%20%20%20%20container%2EaddChild%28particle%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20particle%27s%20%60updateParticle%60%20method%20is%20called%20on%20each%20frame%20of%20the%0A%20%20%20%20%20%20%20%20%2F%2Fgame%20loop%0A%20%20%20%20%20%20%20%20particle%2EupdateParticle%20%3D%20function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20gravity%0A%20%20%20%20%20%20%20%20%20%20particle%2Evy%20%2B%3D%20gravity%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FMove%20the%20particle%0A%20%20%20%20%20%20%20%20%20%20particle%2Ex%20%2B%3D%20particle%2Evx%3B%0A%20%20%20%20%20%20%20%20%20%20particle%2Ey%20%2B%3D%20particle%2Evy%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FChange%20the%20particle%27s%20%60scale%60%0A%20%20%20%20%20%20%20%20%20%20if%20%28particle%2Escale%2Ex%20%2D%20particle%2EscaleSpeed%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20particle%2Escale%2Ex%20%2D%3D%20particle%2EscaleSpeed%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28particle%2Escale%2Ey%20%2D%20particle%2EscaleSpeed%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20particle%2Escale%2Ey%20%2D%3D%20particle%2EscaleSpeed%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FChange%20the%20particle%27s%20rotation%0A%20%20%20%20%20%20%20%20%20%20particle%2Erotation%20%2B%3D%20particle%2ErotationSpeed%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FChange%20the%20particle%27s%20%60alpha%60%0A%20%20%20%20%20%20%20%20%20%20particle%2Ealpha%20%2D%3D%20particle%2EalphaSpeed%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FRemove%20the%20particle%20if%20its%20%60alpha%60%20reaches%20zero%0A%20%20%20%20%20%20%20%20%20%20if%20%28particle%2Ealpha%20%3C%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20container%2EremoveChild%28particle%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20particles%2Esplice%28particles%2EindexOf%28particle%29%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FMake%20a%20particle%20for%20each%20angle%0A%20%20%20%20%20%20angles%2EforEach%28function%20%28angle%29%20%7B%0A%20%20%20%20%20%20%20%20return%20makeParticle%28angle%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20%60particles%60%20array%20back%20to%20the%20main%20program%0A%20%20%20%20%20%20return%20particles%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22emitter%22%2C%0A%0A%20%20%20%20%2F%2FA%20particle%20emitter%0A%20%20%20%20value%3A%20function%20emitter%28interval%2C%20particleFunction%29%20%7B%0A%20%20%20%20%20%20var%20emitter%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20timerInterval%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20emitter%2Eplaying%20%3D%20false%3B%0A%0A%20%20%20%20%20%20function%20play%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21emitter%2Eplaying%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20particleFunction%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20timerInterval%20%3D%20setInterval%28emitParticle%2Ebind%28this%29%2C%20interval%29%3B%0A%20%20%20%20%20%20%20%20%20%20emitter%2Eplaying%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20stop%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28emitter%2Eplaying%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20clearInterval%28timerInterval%29%3B%0A%20%20%20%20%20%20%20%20%20%20emitter%2Eplaying%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20emitParticle%28%29%20%7B%0A%20%20%20%20%20%20%20%20particleFunction%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20emitter%2Eplay%20%3D%20play%3B%0A%20%20%20%20%20%20emitter%2Estop%20%3D%20stop%3B%0A%20%20%20%20%20%20return%20emitter%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22update%22%2C%0A%0A%20%20%20%20%2F%2FA%20function%20to%20update%20the%20particles%20in%20the%20game%20loop%0A%20%20%20%20value%3A%20function%20update%28%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FCheck%20so%20see%20if%20the%20%60globalParticles%60%20array%20contains%20any%0A%20%20%20%20%20%20%2F%2Fsub%2Darrays%0A%20%20%20%20%20%20if%20%28this%2EglobalParticles%2Elength%20%3E%200%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20it%20does%2C%20Loop%20through%20the%20particle%20arrays%20in%20reverse%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20this%2EglobalParticles%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FGet%20the%20current%20particle%20sub%2Darray%0A%20%20%20%20%20%20%20%20%20%20var%20particles%20%3D%20this%2EglobalParticles%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FLoop%20through%20the%20%60particles%60%20sub%2Darray%20and%20update%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fall%20the%20particle%20sprites%20that%20it%20contains%0A%20%20%20%20%20%20%20%20%20%20if%20%28particles%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%20particles%2Elength%20%2D%201%3B%20j%20%3E%3D%200%3B%20j%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20particle%20%3D%20particles%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20particle%2EupdateParticle%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FRemove%20the%20particle%20array%20from%20the%20%60globalParticles%60%20array%20if%20doesn%27t%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fcontain%20any%20more%20sprites%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2EglobalParticles%2Esplice%28this%2EglobalParticles%2EindexOf%28particles%29%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%5D%29%3B%0A%0A%20%20return%20Dust%3B%0A%7D%29%28%29%3B%0A%2F%2F%23%20sourceMappingURL%3Ddust%2Ejs%2Emap%22use%20strict%22%3B%0A%0Avar%20%5FcreateClass%20%3D%20%28function%20%28%29%20%7B%20function%20defineProperties%28target%2C%20props%29%20%7B%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20props%2Elength%3B%20i%2B%2B%29%20%7B%20var%20descriptor%20%3D%20props%5Bi%5D%3B%20descriptor%2Eenumerable%20%3D%20descriptor%2Eenumerable%20%7C%7C%20false%3B%20descriptor%2Econfigurable%20%3D%20true%3B%20if%20%28%22value%22%20in%20descriptor%29%20descriptor%2Ewritable%20%3D%20true%3B%20Object%2EdefineProperty%28target%2C%20descriptor%2Ekey%2C%20descriptor%29%3B%20%7D%20%7D%20return%20function%20%28Constructor%2C%20protoProps%2C%20staticProps%29%20%7B%20if%20%28protoProps%29%20defineProperties%28Constructor%2Eprototype%2C%20protoProps%29%3B%20if%20%28staticProps%29%20defineProperties%28Constructor%2C%20staticProps%29%3B%20return%20Constructor%3B%20%7D%3B%20%7D%29%28%29%3B%0A%0Afunction%20%5FclassCallCheck%28instance%2C%20Constructor%29%20%7B%20if%20%28%21%28instance%20instanceof%20Constructor%29%29%20%7B%20throw%20new%20TypeError%28%22Cannot%20call%20a%20class%20as%20a%20function%22%29%3B%20%7D%20%7D%0A%0Avar%20SpriteUtilities%20%3D%20%28function%20%28%29%20%7B%0A%20%20function%20SpriteUtilities%28%29%20%7B%0A%20%20%20%20var%20renderingEngine%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20PIXI%20%3A%20arguments%5B0%5D%3B%0A%0A%20%20%20%20%5FclassCallCheck%28this%2C%20SpriteUtilities%29%3B%0A%0A%20%20%20%20if%20%28renderingEngine%20%3D%3D%3D%20undefined%29%20throw%20new%20Error%28%22Please%20supply%20a%20reference%20to%20PIXI%20in%20the%20SpriteUtilities%20constructor%20before%20using%20spriteUtilities%2Ejs%22%29%3B%0A%0A%20%20%20%20%2F%2FFind%20out%20which%20rendering%20engine%20is%20being%20used%20%28the%20default%20is%20Pixi%29%0A%20%20%20%20this%2Erenderer%20%3D%20%22%22%3B%0A%0A%20%20%20%20%2F%2FIf%20the%20%60renderingEngine%60%20is%20Pixi%2C%20set%20up%20Pixi%20object%20aliases%0A%20%20%20%20if%20%28renderingEngine%2EParticleContainer%20%26%26%20renderingEngine%2ESprite%29%20%7B%0A%20%20%20%20%20%20this%2Erenderer%20%3D%20%22pixi%22%3B%0A%20%20%20%20%20%20this%2EContainer%20%3D%20renderingEngine%2EContainer%3B%0A%20%20%20%20%20%20this%2EParticleContainer%20%3D%20renderingEngine%2EParticleContainer%3B%0A%20%20%20%20%20%20this%2ETextureCache%20%3D%20renderingEngine%2Eutils%2ETextureCache%3B%0A%20%20%20%20%20%20this%2ETexture%20%3D%20renderingEngine%2ETexture%3B%0A%20%20%20%20%20%20this%2ERectangle%20%3D%20renderingEngine%2ERectangle%3B%0A%20%20%20%20%20%20this%2EMovieClip%20%3D%20renderingEngine%2Eextras%2EMovieClip%3B%0A%20%20%20%20%20%20this%2EBitmapText%20%3D%20renderingEngine%2Eextras%2EBitmapText%3B%0A%20%20%20%20%20%20this%2ESprite%20%3D%20renderingEngine%2ESprite%3B%0A%20%20%20%20%20%20this%2ETilingSprite%20%3D%20renderingEngine%2Eextras%2ETilingSprite%3B%0A%20%20%20%20%20%20this%2EGraphics%20%3D%20renderingEngine%2EGraphics%3B%0A%20%20%20%20%20%20this%2EText%20%3D%20renderingEngine%2EText%3B%0A%0A%20%20%20%20%20%20%2F%2FAn%20array%20to%20store%20all%20the%20shaking%20sprites%0A%20%20%20%20%20%20this%2EshakingSprites%20%3D%20%5B%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%5FcreateClass%28SpriteUtilities%2C%20%5B%7B%0A%20%20%20%20key%3A%20%22update%22%2C%0A%20%20%20%20value%3A%20function%20update%28%29%20%7B%0A%20%20%20%20%20%20if%20%28this%2EshakingSprites%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20this%2EshakingSprites%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20shakingSprite%20%3D%20this%2EshakingSprites%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28shakingSprite%2EupdateShake%29%20shakingSprite%2EupdateShake%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22sprite%22%2C%0A%20%20%20%20value%3A%20function%20sprite%28source%29%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20tiling%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20width%20%3D%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20height%20%3D%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20texture%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20a%20sprite%20if%20the%20%60source%60%20is%20a%20string%0A%20%20%20%20%20%20if%20%28typeof%20source%20%3D%3D%3D%20%22string%22%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAccess%20the%20texture%20in%20the%20cache%20if%20it%27s%20there%0A%20%20%20%20%20%20%20%20if%20%28this%2ETextureCache%5Bsource%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20texture%20%3D%20this%2ETextureCache%5Bsource%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20it%27s%20not%20is%20the%20cache%2C%20load%20it%20from%20the%20source%20file%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20texture%20%3D%20this%2ETexture%2EfromImage%28source%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20texture%20was%20created%2C%20make%20the%20o%0A%20%20%20%20%20%20%20%20if%20%28texture%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20%60tiling%60%20is%20%60false%60%2C%20make%20a%20regular%20%60Sprite%60%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21tiling%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%20%3D%20new%20this%2ESprite%28texture%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20%60tiling%60%20is%20%60true%60%20make%20a%20%60TilingSprite%60%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%20%3D%20new%20this%2ETilingSprite%28texture%2C%20width%2C%20height%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2FBut%20if%20the%20source%20still%20can%27t%20be%20found%2C%20alert%20the%20user%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28source%20%2B%20%22%20cannot%20be%20found%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FCreate%20a%20o%20if%20the%20%60source%60%20is%20a%20texture%0A%20%20%20%20%20%20else%20if%20%28source%20instanceof%20this%2ETexture%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21tiling%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%20%3D%20new%20this%2ESprite%28source%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%20%3D%20new%20this%2ETilingSprite%28source%2C%20width%2C%20height%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FCreate%20a%20%60MovieClip%60%20o%20if%20the%20%60source%60%20is%20an%20array%0A%20%20%20%20%20%20%20%20else%20if%20%28source%20instanceof%20Array%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIs%20it%20an%20array%20of%20frame%20ids%20or%20textures%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20source%5B0%5D%20%3D%3D%3D%20%22string%22%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThey%27re%20strings%2C%20but%20are%20they%20pre%2Dexisting%20texture%20or%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fpaths%20to%20image%20files%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCheck%20to%20see%20if%20the%20first%20element%20matches%20a%20texture%20in%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fcache%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2ETextureCache%5Bsource%5B0%5D%5D%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIt%20does%2C%20so%20it%27s%20an%20array%20of%20frame%20ids%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%20%3D%20this%2EMovieClip%2EfromFrames%28source%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIt%27s%20not%20already%20in%20the%20cache%2C%20so%20let%27s%20load%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%20%3D%20this%2EMovieClip%2EfromImages%28source%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20%60source%60%20isn%27t%20an%20array%20of%20strings%2C%20check%20whether%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fit%27s%20an%20array%20of%20textures%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28source%5B0%5D%20instanceof%20this%2ETexture%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FYes%2C%20it%27s%20an%20array%20of%20textures%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FUse%20them%20to%20make%20a%20MovieClip%20o%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%20%3D%20new%20this%2EMovieClip%28source%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20sprite%20was%20successfully%20created%2C%20intialize%20it%0A%20%20%20%20%20%20if%20%28o%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FPosition%20the%20sprite%0A%20%20%20%20%20%20%20%20o%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20o%2Ey%20%3D%20y%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FSet%20optional%20width%20and%20height%0A%20%20%20%20%20%20%20%20if%20%28width%29%20o%2Ewidth%20%3D%20width%3B%0A%20%20%20%20%20%20%20%20if%20%28height%29%20o%2Eheight%20%3D%20height%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20sprite%20is%20a%20MovieClip%2C%20add%20a%20state%20player%20so%20that%0A%20%20%20%20%20%20%20%20%2F%2Fit%27s%20easier%20to%20control%0A%20%20%20%20%20%20%20%20if%20%28o%20instanceof%20this%2EMovieClip%29%20this%2EaddStatePlayer%28o%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAssign%20the%20sprite%0A%20%20%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22addStatePlayer%22%2C%0A%20%20%20%20value%3A%20function%20addStatePlayer%28sprite%29%20%7B%0A%0A%20%20%20%20%20%20var%20frameCounter%20%3D%200%2C%0A%20%20%20%20%20%20%20%20%20%20numberOfFrames%20%3D%200%2C%0A%20%20%20%20%20%20%20%20%20%20startFrame%20%3D%200%2C%0A%20%20%20%20%20%20%20%20%20%20endFrame%20%3D%200%2C%0A%20%20%20%20%20%20%20%20%20%20timerInterval%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60show%60%20function%20%28to%20display%20static%20states%29%0A%20%20%20%20%20%20function%20show%28frameNumber%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FReset%20any%20possible%20previous%20animations%0A%20%20%20%20%20%20%20%20reset%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20new%20state%20on%20the%20sprite%0A%20%20%20%20%20%20%20%20sprite%2EgotoAndStop%28frameNumber%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60stop%60%20function%20stops%20the%20animation%20at%20the%20current%20frame%0A%20%20%20%20%20%20function%20stopAnimation%28%29%20%7B%0A%20%20%20%20%20%20%20%20reset%28%29%3B%0A%20%20%20%20%20%20%20%20sprite%2EgotoAndStop%28sprite%2EcurrentFrame%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60playSequence%60%20function%2C%20to%20play%20a%20sequence%20of%20frames%0A%20%20%20%20%20%20function%20playAnimation%28sequenceArray%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FReset%20any%20possible%20previous%20animations%0A%20%20%20%20%20%20%20%20reset%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20how%20many%20frames%20there%20are%20in%20the%20range%0A%20%20%20%20%20%20%20%20if%20%28%21sequenceArray%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20startFrame%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20endFrame%20%3D%20sprite%2EtotalFrames%20%2D%201%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20startFrame%20%3D%20sequenceArray%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20endFrame%20%3D%20sequenceArray%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FCalculate%20the%20number%20of%20frames%0A%20%20%20%20%20%20%20%20numberOfFrames%20%3D%20endFrame%20%2D%20startFrame%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCompensate%20for%20two%20edge%20cases%3A%0A%20%20%20%20%20%20%20%20%2F%2F1%2E%20If%20the%20%60startFrame%60%20happens%20to%20be%20%600%60%0A%20%20%20%20%20%20%20%20%2F%2A%0A%20%20%20%20%20%20%20%20if%20%28startFrame%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20numberOfFrames%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20frameCounter%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%20%20%20%20%2F%2F2%2E%20If%20only%20a%20two%2Dframe%20sequence%20was%20provided%0A%20%20%20%20%20%20%20%20%2F%2A%0A%20%20%20%20%20%20%20%20if%28numberOfFrames%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20numberOfFrames%20%3D%202%3B%0A%20%20%20%20%20%20%20%20%20%20frameCounter%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%20%20%0A%20%20%20%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%20%20%20%20%2F%2FCalculate%20the%20frame%20rate%2E%20Set%20the%20default%20fps%20to%2012%0A%20%20%20%20%20%20%20%20if%20%28%21sprite%2Efps%29%20sprite%2Efps%20%3D%2012%3B%0A%20%20%20%20%20%20%20%20var%20frameRate%20%3D%201000%20%2F%20sprite%2Efps%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FSet%20the%20sprite%20to%20the%20starting%20frame%0A%20%20%20%20%20%20%20%20sprite%2EgotoAndStop%28startFrame%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FSet%20the%20%60frameCounter%60%20to%20the%20first%20frame%0A%20%20%20%20%20%20%20%20frameCounter%20%3D%201%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20state%20isn%27t%20already%20%60playing%60%2C%20start%20it%0A%20%20%20%20%20%20%20%20if%20%28%21sprite%2Eanimating%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20timerInterval%20%3D%20setInterval%28advanceFrame%2Ebind%28this%29%2C%20frameRate%29%3B%0A%20%20%20%20%20%20%20%20%20%20sprite%2Eanimating%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%60advanceFrame%60%20is%20called%20by%20%60setInterval%60%20to%20display%20the%20next%20frame%0A%20%20%20%20%20%20%2F%2Fin%20the%20sequence%20based%20on%20the%20%60frameRate%60%2E%20When%20the%20frame%20sequence%0A%20%20%20%20%20%20%2F%2Freaches%20the%20end%2C%20it%20will%20either%20stop%20or%20loop%0A%20%20%20%20%20%20function%20advanceFrame%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdvance%20the%20frame%20if%20%60frameCounter%60%20is%20less%20than%0A%20%20%20%20%20%20%20%20%2F%2Fthe%20state%27s%20total%20frames%0A%20%20%20%20%20%20%20%20if%20%28frameCounter%20%3C%20numberOfFrames%20%2B%201%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdvance%20the%20frame%0A%20%20%20%20%20%20%20%20%20%20sprite%2EgotoAndStop%28sprite%2EcurrentFrame%20%2B%201%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FUpdate%20the%20frame%20counter%0A%20%20%20%20%20%20%20%20%20%20frameCounter%20%2B%3D%201%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20we%27ve%20reached%20the%20last%20frame%20and%20%60loop%60%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fis%20%60true%60%2C%20then%20start%20from%20the%20first%20frame%20again%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Eloop%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EgotoAndStop%28startFrame%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20frameCounter%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20reset%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FReset%20%60sprite%2Eplaying%60%20to%20%60false%60%2C%20set%20the%20%60frameCounter%60%20to%200%2C%20%2F%2Fand%20clear%20the%20%60timerInterval%60%0A%20%20%20%20%20%20%20%20if%20%28timerInterval%20%21%3D%3D%20undefined%20%26%26%20sprite%2Eanimating%20%3D%3D%3D%20true%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2Eanimating%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20frameCounter%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20startFrame%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20endFrame%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20numberOfFrames%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20clearInterval%28timerInterval%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FAdd%20the%20%60show%60%2C%20%60play%60%2C%20%60stop%60%2C%20and%20%60playSequence%60%20methods%20to%20the%20sprite%0A%20%20%20%20%20%20sprite%2Eshow%20%3D%20show%3B%0A%20%20%20%20%20%20sprite%2EstopAnimation%20%3D%20stopAnimation%3B%0A%20%20%20%20%20%20sprite%2EplayAnimation%20%3D%20playAnimation%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60tilingSpirte%60%20lets%20you%20quickly%20create%20Pixi%20tiling%20sprites%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22tilingSprite%22%2C%0A%20%20%20%20value%3A%20function%20tilingSprite%28source%2C%20width%2C%20height%2C%20x%2C%20y%29%20%7B%0A%20%20%20%20%20%20if%20%28width%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%22Please%20define%20a%20width%20as%20your%20second%20argument%20for%20the%20tiling%20sprite%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28height%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%22Please%20define%20a%20height%20as%20your%20third%20argument%20for%20the%20tiling%20sprite%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20o%20%3D%20this%2Esprite%28source%2C%20x%2C%20y%2C%20true%2C%20width%2C%20height%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20%60tileX%60%2C%20%60tileY%60%2C%20%60tileScaleX%60%20and%20%60tileScaleY%60%20properties%0A%20%20%20%20%20%20Object%2EdefineProperties%28o%2C%20%7B%0A%20%20%20%20%20%20%20%20%22tileX%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2EtilePosition%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2EtilePosition%2Ex%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22tileY%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2EtilePosition%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2EtilePosition%2Ey%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22tileScaleX%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2EtileScale%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2EtileScale%2Ex%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22tileScaleY%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2EtileScale%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2EtileScale%2Ey%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22filmstrip%22%2C%0A%20%20%20%20value%3A%20function%20filmstrip%28texture%2C%20frameWidth%2C%20frameHeight%29%20%7B%0A%20%20%20%20%20%20var%20spacing%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B3%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FAn%20array%20to%20store%20the%20x%2Fy%20positions%20of%20the%20frames%0A%20%20%20%20%20%20var%20positions%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FFind%20the%20width%20and%20height%20of%20the%20texture%0A%20%20%20%20%20%20var%20textureWidth%20%3D%20this%2ETextureCache%5Btexture%5D%2Ewidth%2C%0A%20%20%20%20%20%20%20%20%20%20textureHeight%20%3D%20this%2ETextureCache%5Btexture%5D%2Eheight%3B%0A%0A%20%20%20%20%20%20%2F%2FFind%20out%20how%20many%20columns%20and%20rows%20there%20are%0A%20%20%20%20%20%20var%20columns%20%3D%20textureWidth%20%2F%20frameWidth%2C%0A%20%20%20%20%20%20%20%20%20%20rows%20%3D%20textureHeight%20%2F%20frameHeight%3B%0A%0A%20%20%20%20%20%20%2F%2FFind%20the%20total%20number%20of%20frames%0A%20%20%20%20%20%20var%20numberOfFrames%20%3D%20columns%20%2A%20rows%3B%0A%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20numberOfFrames%3B%20i%2B%2B%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20correct%20row%20and%20column%20for%20each%20frame%0A%20%20%20%20%20%20%20%20%2F%2Fand%20figure%20out%20its%20x%20and%20y%20position%0A%20%20%20%20%20%20%20%20var%20x%20%3D%20i%20%25%20columns%20%2A%20frameWidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20Math%2Efloor%28i%20%2F%20columns%29%20%2A%20frameHeight%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCompensate%20for%20any%20optional%20spacing%20%28padding%29%20around%20the%20tiles%20if%0A%20%20%20%20%20%20%20%20%2F%2Fthere%20is%20any%2E%20This%20bit%20of%20code%20accumlates%20the%20spacing%20offsets%20from%20the%0A%20%20%20%20%20%20%20%20%2F%2Fleft%20side%20of%20the%20tileset%20and%20adds%20them%20to%20the%20current%20tile%27s%20position%0A%20%20%20%20%20%20%20%20if%20%28spacing%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20x%20%2B%3D%20spacing%20%2B%20spacing%20%2A%20i%20%25%20columns%3B%0A%20%20%20%20%20%20%20%20%20%20y%20%2B%3D%20spacing%20%2B%20spacing%20%2A%20Math%2Efloor%28i%20%2F%20columns%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20x%20and%20y%20value%20of%20each%20frame%20to%20the%20%60positions%60%20array%0A%20%20%20%20%20%20%20%20positions%2Epush%28%5Bx%2C%20y%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20frames%0A%20%20%20%20%20%20return%20this%2Eframes%28texture%2C%20positions%2C%20frameWidth%2C%20frameHeight%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FMake%20a%20texture%20from%20a%20frame%20in%20another%20texture%20or%20image%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22frame%22%2C%0A%20%20%20%20value%3A%20function%20frame%28source%2C%20x%2C%20y%2C%20width%2C%20height%29%20%7B%0A%0A%20%20%20%20%20%20var%20texture%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20imageFrame%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20source%20is%20a%20string%2C%20it%27s%20either%20a%20texture%20in%20the%0A%20%20%20%20%20%20%2F%2Fcache%20or%20an%20image%20file%0A%20%20%20%20%20%20if%20%28typeof%20source%20%3D%3D%3D%20%22string%22%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2ETextureCache%5Bsource%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20texture%20%3D%20new%20this%2ETexture%28this%2ETextureCache%5Bsource%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20%60source%60%20is%20a%20texture%2C%20%20use%20it%0A%20%20%20%20%20%20else%20if%20%28source%20instanceof%20this%2ETexture%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20texture%20%3D%20new%20this%2ETexture%28source%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28%21texture%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%22Please%20load%20the%20%22%20%2B%20source%20%2B%20%22%20texture%20into%20the%20cache%2E%22%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FMake%20a%20rectangle%20the%20size%20of%20the%20sub%2Dimage%0A%20%20%20%20%20%20%20%20imageFrame%20%3D%20new%20this%2ERectangle%28x%2C%20y%2C%20width%2C%20height%29%3B%0A%20%20%20%20%20%20%20%20texture%2Eframe%20%3D%20imageFrame%3B%0A%20%20%20%20%20%20%20%20return%20texture%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FMake%20an%20array%20of%20textures%20from%20a%202D%20array%20of%20frame%20x%20and%20y%20coordinates%20in%0A%20%20%20%20%2F%2Ftexture%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22frames%22%2C%0A%20%20%20%20value%3A%20function%20frames%28source%2C%20coordinates%2C%20frameWidth%2C%20frameHeight%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis%20%3D%20this%3B%0A%0A%20%20%20%20%20%20var%20baseTexture%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20textures%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20source%20is%20a%20string%2C%20it%27s%20either%20a%20texture%20in%20the%0A%20%20%20%20%20%20%2F%2Fcache%20or%20an%20image%20file%0A%20%20%20%20%20%20if%20%28typeof%20source%20%3D%3D%3D%20%22string%22%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2ETextureCache%5Bsource%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20baseTexture%20%3D%20new%20this%2ETexture%28this%2ETextureCache%5Bsource%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2FIf%20the%20%60source%60%20is%20a%20texture%2C%20%20use%20it%0A%20%20%20%20%20%20else%20if%20%28source%20instanceof%20this%2ETexture%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20baseTexture%20%3D%20new%20this%2ETexture%28source%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28%21baseTexture%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%22Please%20load%20the%20%22%20%2B%20source%20%2B%20%22%20texture%20into%20the%20cache%2E%22%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20%5Ftextures%20%3D%20coordinates%2Emap%28function%20%28position%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20position%5B0%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20position%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20imageFrame%20%3D%20new%20%5Fthis%2ERectangle%28x%2C%20y%2C%20frameWidth%2C%20frameHeight%29%3B%0A%20%20%20%20%20%20%20%20%20%20var%20frameTexture%20%3D%20new%20%5Fthis%2ETexture%28baseTexture%29%3B%0A%20%20%20%20%20%20%20%20%20%20frameTexture%2Eframe%20%3D%20imageFrame%3B%0A%20%20%20%20%20%20%20%20%20%20return%20frameTexture%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20return%20%5Ftextures%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22frameSeries%22%2C%0A%20%20%20%20value%3A%20function%20frameSeries%28%29%20%7B%0A%20%20%20%20%20%20var%20startNumber%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20endNumber%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%201%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20baseName%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20%22%22%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20extension%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20%22%22%20%3A%20arguments%5B3%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20an%20array%20to%20store%20the%20frame%20names%0A%20%20%20%20%20%20var%20frames%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%20startNumber%3B%20i%20%3C%20endNumber%20%2B%201%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20var%20frame%20%3D%20this%2ETextureCache%5B%22%22%20%2B%20%28baseName%20%2B%20i%20%2B%20extension%29%5D%3B%0A%20%20%20%20%20%20%20%20frames%2Epush%28frame%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20frames%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%20Text%20creation%20%2A%2F%0A%0A%20%20%20%20%2F%2FThe%60text%60%20method%20is%20a%20quick%20way%20to%20create%20a%20Pixi%20Text%20sprite%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22text%22%2C%0A%20%20%20%20value%3A%20function%20text%28%29%20%7B%0A%20%20%20%20%20%20var%20content%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20%22message%22%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20font%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%20%2216px%20sans%22%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20fillStyle%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20%22red%22%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B4%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20a%20Pixi%20Sprite%20object%0A%20%20%20%20%20%20var%20message%20%3D%20new%20this%2EText%28content%2C%20%7B%20font%3A%20font%2C%20fill%3A%20fillStyle%20%7D%29%3B%0A%20%20%20%20%20%20message%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20message%2Ey%20%3D%20y%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20a%20%60%5Ftext%60%20property%20with%20a%20getter%2Fsetter%0A%20%20%20%20%20%20message%2E%5Fcontent%20%3D%20content%3B%0A%20%20%20%20%20%20Object%2EdefineProperty%28message%2C%20%22content%22%2C%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fcontent%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2E%5Fcontent%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20this%2Etext%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20text%20object%0A%20%20%20%20%20%20return%20message%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%60bitmapText%60%20method%20lets%20you%20create%20bitmap%20text%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22bitmapText%22%2C%0A%20%20%20%20value%3A%20function%20bitmapText%28%29%20%7B%0A%20%20%20%20%20%20var%20content%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20%22message%22%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20font%20%3D%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20align%20%3D%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20tint%20%3D%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20a%20Pixi%20Sprite%20object%0A%20%20%20%20%20%20var%20message%20%3D%20new%20this%2EBitmapText%28content%2C%20%7B%20font%3A%20font%2C%20align%3A%20align%2C%20tint%3A%20tint%20%7D%29%3B%0A%20%20%20%20%20%20message%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20message%2Ey%20%3D%20y%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20a%20%60%5Ftext%60%20property%20with%20a%20getter%2Fsetter%0A%20%20%20%20%20%20message%2E%5Fcontent%20%3D%20content%3B%0A%20%20%20%20%20%20Object%2EdefineProperty%28message%2C%20%22content%22%2C%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fcontent%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2E%5Fcontent%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20this%2Etext%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20text%20object%0A%20%20%20%20%20%20return%20message%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%20Shapes%20and%20lines%20%2A%2F%0A%0A%20%20%20%20%2F%2FRectangle%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22rectangle%22%2C%0A%20%20%20%20value%3A%20function%20rectangle%28%29%20%7B%0A%20%20%20%20%20%20var%20width%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20height%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20fillStyle%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200xFF3300%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20strokeStyle%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%200x0033CC%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20lineWidth%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20new%20this%2EGraphics%28%29%3B%0A%20%20%20%20%20%20o%2E%5Fsprite%20%3D%20undefined%3B%0A%20%20%20%20%20%20o%2E%5Fwidth%20%3D%20width%3B%0A%20%20%20%20%20%20o%2E%5Fheight%20%3D%20height%3B%0A%20%20%20%20%20%20o%2E%5FfillStyle%20%3D%20this%2Ecolor%28fillStyle%29%3B%0A%20%20%20%20%20%20o%2E%5FstrokeStyle%20%3D%20this%2Ecolor%28strokeStyle%29%3B%0A%20%20%20%20%20%20o%2E%5FlineWidth%20%3D%20lineWidth%3B%0A%0A%20%20%20%20%20%20%2F%2FDraw%20the%20rectangle%0A%20%20%20%20%20%20var%20draw%20%3D%20function%20draw%28width%2C%20height%2C%20fillStyle%2C%20strokeStyle%2C%20lineWidth%29%20%7B%0A%20%20%20%20%20%20%20%20o%2Eclear%28%29%3B%0A%20%20%20%20%20%20%20%20o%2EbeginFill%28fillStyle%29%3B%0A%20%20%20%20%20%20%20%20if%20%28lineWidth%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%2ElineStyle%28lineWidth%2C%20strokeStyle%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20o%2EdrawRect%280%2C%200%2C%20width%2C%20height%29%3B%0A%20%20%20%20%20%20%20%20o%2EendFill%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FDraw%20the%20line%20and%20capture%20the%20sprite%20that%20the%20%60draw%60%20function%0A%20%20%20%20%20%20%2F%2Freturns%0A%20%20%20%20%20%20draw%28o%2E%5Fwidth%2C%20o%2E%5Fheight%2C%20o%2E%5FfillStyle%2C%20o%2E%5FstrokeStyle%2C%20o%2E%5FlineWidth%29%3B%0A%0A%20%20%20%20%20%20%2F%2FGenerate%20a%20texture%20from%20the%20rectangle%0A%20%20%20%20%20%20var%20texture%20%3D%20o%2EgenerateTexture%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FUse%20the%20texture%20to%20create%20a%20sprite%0A%20%20%20%20%20%20var%20sprite%20%3D%20new%20this%2ESprite%28texture%29%3B%0A%0A%20%20%20%20%20%20%2F%2FPosition%20the%20sprite%0A%20%20%20%20%20%20sprite%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20sprite%2Ey%20%3D%20y%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20getters%20and%20setters%20to%20the%20sprite%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20Object%2EdefineProperties%28sprite%2C%20%7B%0A%20%20%20%20%20%20%20%20%22fillStyle%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5FfillStyle%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5FfillStyle%20%3D%20self%2Ecolor%28value%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FDraw%20the%20new%20rectangle%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5Fwidth%2C%20o%2E%5Fheight%2C%20o%2E%5FfillStyle%2C%20o%2E%5FstrokeStyle%2C%20o%2E%5FlineWidth%2C%20o%2E%5Fx%2C%20o%2E%5Fy%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGenerate%20a%20new%20texture%20and%20set%20it%20as%20the%20sprite%27s%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20texture%20%3D%20o%2EgenerateTexture%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fsprite%2Etexture%20%3D%20texture%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22strokeStyle%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5FstrokeStyle%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5FstrokeStyle%20%3D%20self%2Ecolor%28value%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FDraw%20the%20new%20rectangle%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5Fwidth%2C%20o%2E%5Fheight%2C%20o%2E%5FfillStyle%2C%20o%2E%5FstrokeStyle%2C%20o%2E%5FlineWidth%2C%20o%2E%5Fx%2C%20o%2E%5Fy%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGenerate%20a%20new%20texture%20and%20set%20it%20as%20the%20sprite%27s%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20texture%20%3D%20o%2EgenerateTexture%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fsprite%2Etexture%20%3D%20texture%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22lineWidth%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5FlineWidth%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5FlineWidth%20%3D%20value%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FDraw%20the%20new%20rectangle%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5Fwidth%2C%20o%2E%5Fheight%2C%20o%2E%5FfillStyle%2C%20o%2E%5FstrokeStyle%2C%20o%2E%5FlineWidth%2C%20o%2E%5Fx%2C%20o%2E%5Fy%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGenerate%20a%20new%20texture%20and%20set%20it%20as%20the%20sprite%27s%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20texture%20%3D%20o%2EgenerateTexture%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fsprite%2Etexture%20%3D%20texture%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FGet%20a%20local%20reference%20to%20the%20sprite%20so%20that%20we%20can%0A%20%20%20%20%20%20%2F%2Fchange%20the%20rectangle%20properties%20later%20using%20the%20getters%2Fsetters%0A%20%20%20%20%20%20o%2E%5Fsprite%20%3D%20sprite%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20sprite%0A%20%20%20%20%20%20return%20sprite%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FCircle%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22circle%22%2C%0A%20%20%20%20value%3A%20function%20circle%28%29%20%7B%0A%20%20%20%20%20%20var%20diameter%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20fillStyle%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200xFF3300%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20strokeStyle%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200x0033CC%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20lineWidth%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20new%20this%2EGraphics%28%29%3B%0A%20%20%20%20%20%20o%2E%5Fdiameter%20%3D%20diameter%3B%0A%20%20%20%20%20%20o%2E%5FfillStyle%20%3D%20this%2Ecolor%28fillStyle%29%3B%0A%20%20%20%20%20%20o%2E%5FstrokeStyle%20%3D%20this%2Ecolor%28strokeStyle%29%3B%0A%20%20%20%20%20%20o%2E%5FlineWidth%20%3D%20lineWidth%3B%0A%0A%20%20%20%20%20%20%2F%2FDraw%20the%20circle%0A%20%20%20%20%20%20var%20draw%20%3D%20function%20draw%28diameter%2C%20fillStyle%2C%20strokeStyle%2C%20lineWidth%29%20%7B%0A%20%20%20%20%20%20%20%20o%2Eclear%28%29%3B%0A%20%20%20%20%20%20%20%20o%2EbeginFill%28fillStyle%29%3B%0A%20%20%20%20%20%20%20%20if%20%28lineWidth%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%2ElineStyle%28lineWidth%2C%20strokeStyle%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20o%2EdrawCircle%280%2C%200%2C%20diameter%20%2F%202%29%3B%0A%20%20%20%20%20%20%20%20o%2EendFill%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FDraw%20the%20cirlce%0A%20%20%20%20%20%20draw%28o%2E%5Fdiameter%2C%20o%2E%5FfillStyle%2C%20o%2E%5FstrokeStyle%2C%20o%2E%5FlineWidth%29%3B%0A%0A%20%20%20%20%20%20%2F%2FGenerate%20a%20texture%20from%20the%20rectangle%0A%20%20%20%20%20%20var%20texture%20%3D%20o%2EgenerateTexture%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FUse%20the%20texture%20to%20create%20a%20sprite%0A%20%20%20%20%20%20var%20sprite%20%3D%20new%20this%2ESprite%28texture%29%3B%0A%0A%20%20%20%20%20%20%2F%2FPosition%20the%20sprite%0A%20%20%20%20%20%20sprite%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20sprite%2Ey%20%3D%20y%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20getters%20and%20setters%20to%20the%20sprite%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20Object%2EdefineProperties%28sprite%2C%20%7B%0A%20%20%20%20%20%20%20%20%22fillStyle%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5FfillStyle%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5FfillStyle%20%3D%20self%2Ecolor%28value%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FDraw%20the%20cirlce%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5Fdiameter%2C%20o%2E%5FfillStyle%2C%20o%2E%5FstrokeStyle%2C%20o%2E%5FlineWidth%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGenerate%20a%20new%20texture%20and%20set%20it%20as%20the%20sprite%27s%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20texture%20%3D%20o%2EgenerateTexture%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fsprite%2Etexture%20%3D%20texture%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22strokeStyle%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5FstrokeStyle%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5FstrokeStyle%20%3D%20self%2Ecolor%28value%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FDraw%20the%20cirlce%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5Fdiameter%2C%20o%2E%5FfillStyle%2C%20o%2E%5FstrokeStyle%2C%20o%2E%5FlineWidth%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGenerate%20a%20new%20texture%20and%20set%20it%20as%20the%20sprite%27s%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20texture%20%3D%20o%2EgenerateTexture%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fsprite%2Etexture%20%3D%20texture%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22diameter%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5Fdiameter%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5FlineWidth%20%3D%2010%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FDraw%20the%20cirlce%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5Fdiameter%2C%20o%2E%5FfillStyle%2C%20o%2E%5FstrokeStyle%2C%20o%2E%5FlineWidth%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGenerate%20a%20new%20texture%20and%20set%20it%20as%20the%20sprite%27s%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20texture%20%3D%20o%2EgenerateTexture%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fsprite%2Etexture%20%3D%20texture%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22radius%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5Fdiameter%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FDraw%20the%20cirlce%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28value%20%2A%202%2C%20o%2E%5FfillStyle%2C%20o%2E%5FstrokeStyle%2C%20o%2E%5FlineWidth%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGenerate%20a%20new%20texture%20and%20set%20it%20as%20the%20sprite%27s%20texture%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20texture%20%3D%20o%2EgenerateTexture%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fsprite%2Etexture%20%3D%20texture%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%2F%2FGet%20a%20local%20reference%20to%20the%20sprite%20so%20that%20we%20can%0A%20%20%20%20%20%20%2F%2Fchange%20the%20circle%20properties%20later%20using%20the%20getters%2Fsetters%0A%20%20%20%20%20%20o%2E%5Fsprite%20%3D%20sprite%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20sprite%0A%20%20%20%20%20%20return%20sprite%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FLine%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22line%22%2C%0A%20%20%20%20value%3A%20function%20line%28%29%20%7B%0A%20%20%20%20%20%20var%20strokeStyle%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%200x000000%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20lineWidth%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%201%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20ax%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20ay%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20bx%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20by%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20line%20object%0A%20%20%20%20%20%20var%20o%20%3D%20new%20this%2EGraphics%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FPrivate%20properties%0A%20%20%20%20%20%20o%2E%5FstrokeStyle%20%3D%20this%2Ecolor%28strokeStyle%29%3B%0A%20%20%20%20%20%20o%2E%5Fwidth%20%3D%20lineWidth%3B%0A%20%20%20%20%20%20o%2E%5Fax%20%3D%20ax%3B%0A%20%20%20%20%20%20o%2E%5Fay%20%3D%20ay%3B%0A%20%20%20%20%20%20o%2E%5Fbx%20%3D%20bx%3B%0A%20%20%20%20%20%20o%2E%5Fby%20%3D%20by%3B%0A%0A%20%20%20%20%20%20%2F%2FA%20helper%20function%20that%20draws%20the%20line%0A%20%20%20%20%20%20var%20draw%20%3D%20function%20draw%28strokeStyle%2C%20lineWidth%2C%20ax%2C%20ay%2C%20bx%2C%20by%29%20%7B%0A%20%20%20%20%20%20%20%20o%2Eclear%28%29%3B%0A%20%20%20%20%20%20%20%20o%2ElineStyle%28lineWidth%2C%20strokeStyle%2C%201%29%3B%0A%20%20%20%20%20%20%20%20o%2EmoveTo%28ax%2C%20ay%29%3B%0A%20%20%20%20%20%20%20%20o%2ElineTo%28bx%2C%20by%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FDraw%20the%20line%0A%20%20%20%20%20%20draw%28o%2E%5FstrokeStyle%2C%20o%2E%5Fwidth%2C%20o%2E%5Fax%2C%20o%2E%5Fay%2C%20o%2E%5Fbx%2C%20o%2E%5Fby%29%3B%0A%0A%20%20%20%20%20%20%2F%2FDefine%20getters%20and%20setters%20that%20redefine%20the%20line%27s%20start%20and%0A%20%20%20%20%20%20%2F%2Fend%20points%20and%20re%2Ddraws%20it%20if%20they%20change%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20Object%2EdefineProperties%28o%2C%20%7B%0A%20%20%20%20%20%20%20%20%22ax%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5Fax%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fax%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5FstrokeStyle%2C%20o%2E%5Fwidth%2C%20o%2E%5Fax%2C%20o%2E%5Fay%2C%20o%2E%5Fbx%2C%20o%2E%5Fby%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22ay%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5Fay%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fay%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5FstrokeStyle%2C%20o%2E%5Fwidth%2C%20o%2E%5Fax%2C%20o%2E%5Fay%2C%20o%2E%5Fbx%2C%20o%2E%5Fby%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22bx%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5Fbx%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fbx%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5FstrokeStyle%2C%20o%2E%5Fwidth%2C%20o%2E%5Fax%2C%20o%2E%5Fay%2C%20o%2E%5Fbx%2C%20o%2E%5Fby%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22by%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5Fby%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fby%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5FstrokeStyle%2C%20o%2E%5Fwidth%2C%20o%2E%5Fax%2C%20o%2E%5Fay%2C%20o%2E%5Fbx%2C%20o%2E%5Fby%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22strokeStyle%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5FstrokeStyle%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5FstrokeStyle%20%3D%20self%2Ecolor%28value%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FDraw%20the%20line%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5FstrokeStyle%2C%20o%2E%5Fwidth%2C%20o%2E%5Fax%2C%20o%2E%5Fay%2C%20o%2E%5Fbx%2C%20o%2E%5Fby%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22width%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5Fwidth%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fwidth%20%3D%20value%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FDraw%20the%20line%0A%20%20%20%20%20%20%20%20%20%20%20%20draw%28o%2E%5FstrokeStyle%2C%20o%2E%5Fwidth%2C%20o%2E%5Fax%2C%20o%2E%5Fay%2C%20o%2E%5Fbx%2C%20o%2E%5Fby%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20line%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%20Compound%20sprites%20%2A%2F%0A%0A%20%20%20%20%2F%2FUse%20%60grid%60%20to%20create%20a%20grid%20of%20sprites%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22grid%22%2C%0A%20%20%20%20value%3A%20function%20grid%28%29%20%7B%0A%20%20%20%20%20%20var%20columns%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20rows%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20cellWidth%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20cellHeight%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20centerCell%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20xOffset%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20var%20yOffset%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%20%20%20%20%20%20var%20makeSprite%20%3D%20arguments%2Elength%20%3C%3D%207%20%7C%7C%20arguments%5B7%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B7%5D%3B%0A%20%20%20%20%20%20var%20extra%20%3D%20arguments%2Elength%20%3C%3D%208%20%7C%7C%20arguments%5B8%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B8%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20an%20empty%20group%20called%20%60container%60%2E%20This%20%60container%60%0A%20%20%20%20%20%20%2F%2Fgroup%20is%20what%20the%20function%20returns%20back%20to%20the%20main%20program%2E%0A%20%20%20%20%20%20%2F%2FAll%20the%20sprites%20in%20the%20grid%20cells%20will%20be%20added%0A%20%20%20%20%20%20%2F%2Fas%20children%20to%20this%20container%0A%20%20%20%20%20%20var%20container%20%3D%20new%20this%2EContainer%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60create%60%20method%20plots%20the%20grid%0A%0A%20%20%20%20%20%20var%20createGrid%20%3D%20function%20createGrid%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20the%20number%20of%20cells%20in%20the%20grid%0A%20%20%20%20%20%20%20%20var%20length%20%3D%20columns%20%2A%20rows%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCreate%20a%20sprite%20for%20each%20cell%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20length%3B%20i%2B%2B%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20the%20sprite%27s%20x%2Fy%20placement%20in%20the%20grid%0A%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20i%20%25%20columns%20%2A%20cellWidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20Math%2Efloor%28i%20%2F%20columns%29%20%2A%20cellHeight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FUse%20the%20%60makeSprite%60%20function%20supplied%20in%20the%20constructor%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fto%20make%20a%20sprite%20for%20the%20grid%20cell%0A%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20makeSprite%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20sprite%20to%20the%20%60container%60%0A%20%20%20%20%20%20%20%20%20%20container%2EaddChild%28sprite%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FShould%20the%20sprite%20be%20centered%20in%20the%20cell%3F%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FNo%2C%20it%20shouldn%27t%20be%20centered%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21centerCell%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20x%20%2B%20xOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20y%20%2B%20yOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FYes%2C%20it%20should%20be%20centered%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20x%20%2B%20cellWidth%20%2F%202%20%2D%20sprite%2Ewidth%20%2F%202%20%2B%20xOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20y%20%2B%20cellHeight%20%2F%202%20%2D%20sprite%2Ewidth%20%2F%202%20%2B%20yOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FRun%20any%20optional%20extra%20code%2E%20This%20calls%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%60extra%60%20function%20supplied%20by%20the%20constructor%0A%20%20%20%20%20%20%20%20%20%20if%20%28extra%29%20extra%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FRun%20the%20%60createGrid%60%20method%0A%20%20%20%20%20%20createGrid%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20%60container%60%20group%20back%20to%20the%20main%20program%0A%20%20%20%20%20%20return%20container%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FUse%20%60shoot%60%20to%20create%20bullet%20sprites%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22shoot%22%2C%0A%20%20%20%20value%3A%20function%20shoot%28shooter%2C%20angle%2C%20x%2C%20y%2C%20container%2C%20bulletSpeed%2C%20bulletArray%2C%20bulletSprite%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FMake%20a%20new%20sprite%20using%20the%20user%2Dsupplied%20%60bulletSprite%60%20function%0A%20%20%20%20%20%20var%20bullet%20%3D%20bulletSprite%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FSet%20the%20bullet%27s%20anchor%20point%20to%20its%20center%0A%20%20%20%20%20%20bullet%2Eanchor%2Eset%280%2E5%2C%200%2E5%29%3B%0A%0A%20%20%20%20%20%20%2F%2FTemporarily%20add%20the%20bullet%20to%20the%20shooter%0A%20%20%20%20%20%20%2F%2Fso%20that%20we%20can%20position%20it%20relative%20to%20the%0A%20%20%20%20%20%20%2F%2Fshooter%27s%20position%0A%20%20%20%20%20%20shooter%2EaddChild%28bullet%29%3B%0A%20%20%20%20%20%20bullet%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20bullet%2Ey%20%3D%20y%3B%0A%0A%20%20%20%20%20%20%2F%2FFind%20the%20bullet%27s%20global%20coordinates%20so%20that%20we%20can%20use%0A%20%20%20%20%20%20%2F%2Fthem%20to%20position%20the%20bullet%20on%20the%20new%20parent%20container%0A%20%20%20%20%20%20var%20tempGx%20%3D%20bullet%2EgetGlobalPosition%28%29%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20tempGy%20%3D%20bullet%2EgetGlobalPosition%28%29%2Ey%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20the%20bullet%20to%20the%20new%20parent%20container%20using%0A%20%20%20%20%20%20%2F%2Fthe%20new%20global%20coordinates%0A%20%20%20%20%20%20container%2EaddChild%28bullet%29%3B%0A%20%20%20%20%20%20bullet%2Ex%20%3D%20tempGx%3B%0A%20%20%20%20%20%20bullet%2Ey%20%3D%20tempGy%3B%0A%0A%20%20%20%20%20%20%2F%2FSet%20the%20bullet%27s%20velocity%0A%20%20%20%20%20%20bullet%2Evx%20%3D%20Math%2Ecos%28angle%29%20%2A%20bulletSpeed%3B%0A%20%20%20%20%20%20bullet%2Evy%20%3D%20Math%2Esin%28angle%29%20%2A%20bulletSpeed%3B%0A%0A%20%20%20%20%20%20%2F%2FPush%20the%20bullet%20into%20the%20%60bulletArray%60%0A%20%20%20%20%20%20bulletArray%2Epush%28bullet%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20grid%0A%20%20%20%20%2D%2D%2D%2D%0A%20%20%20%20%20Helps%20you%20to%20automatically%20create%20a%20grid%20of%20sprites%2E%20%60grid%60%20returns%20a%0A%20%20%20%20%60group%60%20sprite%20object%20that%20contains%20a%20sprite%20for%20every%20cell%20in%20the%0A%20%20%20%20grid%2E%20You%20can%20define%20the%20rows%20and%20columns%20in%20the%20grid%2C%20whether%20or%0A%20%20%20%20not%20the%20sprites%20should%20be%20centered%20inside%20each%20cell%2C%20or%20what%20their%20offset%20from%20the%0A%20%20%20%20top%20left%20corner%20of%20each%20cell%20should%20be%2E%20Supply%20a%20function%20that%0A%20%20%20%20returns%20the%20sprite%20that%20you%20want%20to%20make%20for%20each%20cell%2E%20You%20can%0A%20%20%20%20supply%20an%20optional%20final%20function%20that%20runs%20any%20extra%20code%20after%0A%20%20%20%20each%20sprite%20has%20been%20created%2E%20Here%27s%20the%20format%20for%20creating%20a%20grid%3A%0A%20%20%20%20%20%20%20%20%20gridGroup%20%3D%20grid%28%0A%20%20%20%20%20%20%20%20%20%20%20%2F%2FSet%20the%20grid%27s%20properties%0A%20%20%20%20%20%20%20%20%20%20columns%2C%20rows%2C%20cellWidth%2C%20cellHeight%2C%0A%20%20%20%20%20%20%20%20%20%20areSpirtesCentered%3F%2C%20xOffset%2C%20yOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%2F%2FA%20function%20that%20returns%20a%20sprite%0A%20%20%20%20%20%20%20%20%20%20%28%29%20%3D%3E%20g%2Ecircle%2816%2C%20%22blue%22%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%2F%2FAn%20optional%20final%20function%20that%20runs%20some%20extra%20code%0A%20%20%20%20%20%20%20%20%20%20%28%29%20%3D%3E%20console%2Elog%28%22extra%21%22%29%0A%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22grid%22%2C%0A%20%20%20%20value%3A%20function%20grid%28%29%20%7B%0A%20%20%20%20%20%20var%20columns%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20rows%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20cellWidth%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20cellHeight%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20centerCell%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20xOffset%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20var%20yOffset%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%20%20%20%20%20%20var%20makeSprite%20%3D%20arguments%2Elength%20%3C%3D%207%20%7C%7C%20arguments%5B7%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B7%5D%3B%0A%20%20%20%20%20%20var%20extra%20%3D%20arguments%2Elength%20%3C%3D%208%20%7C%7C%20arguments%5B8%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B8%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20an%20empty%20group%20called%20%60container%60%2E%20This%20%60container%60%0A%20%20%20%20%20%20%2F%2Fgroup%20is%20what%20the%20function%20returns%20back%20to%20the%20main%20program%2E%0A%20%20%20%20%20%20%2F%2FAll%20the%20sprites%20in%20the%20grid%20cells%20will%20be%20added%0A%20%20%20%20%20%20%2F%2Fas%20children%20to%20this%20container%0A%20%20%20%20%20%20var%20container%20%3D%20this%2Egroup%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60create%60%20method%20plots%20the%20grid%0A%20%20%20%20%20%20var%20createGrid%20%3D%20function%20createGrid%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20the%20number%20of%20cells%20in%20the%20grid%0A%20%20%20%20%20%20%20%20var%20length%20%3D%20columns%20%2A%20rows%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCreate%20a%20sprite%20for%20each%20cell%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20length%3B%20i%2B%2B%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20the%20sprite%27s%20x%2Fy%20placement%20in%20the%20grid%0A%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20i%20%25%20columns%20%2A%20cellWidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20Math%2Efloor%28i%20%2F%20columns%29%20%2A%20cellHeight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FUse%20the%20%60makeSprite%60%20function%20supplied%20in%20the%20constructor%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fto%20make%20a%20sprite%20for%20the%20grid%20cell%0A%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20makeSprite%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20sprite%20to%20the%20%60container%60%0A%20%20%20%20%20%20%20%20%20%20container%2EaddChild%28sprite%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FShould%20the%20sprite%20be%20centered%20in%20the%20cell%3F%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FNo%2C%20it%20shouldn%27t%20be%20centered%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21centerCell%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20x%20%2B%20xOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20y%20%2B%20yOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FYes%2C%20it%20should%20be%20centered%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20x%20%2B%20cellWidth%20%2F%202%20%2D%20sprite%2EhalfWidth%20%2B%20xOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20y%20%2B%20cellHeight%20%2F%202%20%2D%20sprite%2EhalfHeight%20%2B%20yOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FRun%20any%20optional%20extra%20code%2E%20This%20calls%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%60extra%60%20function%20supplied%20by%20the%20constructor%0A%20%20%20%20%20%20%20%20%20%20if%20%28extra%29%20extra%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FRun%20the%20%60createGrid%60%20method%0A%20%20%20%20%20%20createGrid%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20%60container%60%20group%20back%20to%20the%20main%20program%0A%20%20%20%20%20%20return%20container%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20shake%0A%20%20%20%20%2D%2D%2D%2D%2D%0A%20%20%20%20%20Used%20to%20create%20a%20shaking%20effect%2C%20like%20a%20screen%20shake%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22shake%22%2C%0A%20%20%20%20value%3A%20function%20shake%28sprite%29%20%7B%0A%20%20%20%20%20%20var%20magnitude%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%2016%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20angular%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FGet%20a%20reference%20to%20this%20current%20object%20so%20that%0A%20%20%20%20%20%20%2F%2Fit%27s%20easy%20to%20maintain%20scope%20in%20the%20nested%20sub%2Dfunctions%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FA%20counter%20to%20count%20the%20number%20of%20shakes%0A%20%20%20%20%20%20var%20counter%20%3D%201%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20total%20number%20of%20shakes%20%28there%20will%20be%201%20shake%20per%20frame%29%0A%20%20%20%20%20%20var%20numberOfShakes%20%3D%2010%3B%0A%0A%20%20%20%20%20%20%2F%2FCapture%20the%20sprite%27s%20position%20and%20angle%20so%20you%20can%0A%20%20%20%20%20%20%2F%2Frestore%20them%20after%20the%20shaking%20has%20finished%0A%20%20%20%20%20%20var%20startX%20%3D%20sprite%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20startY%20%3D%20sprite%2Ey%2C%0A%20%20%20%20%20%20%20%20%20%20startAngle%20%3D%20sprite%2Erotation%3B%0A%0A%20%20%20%20%20%20%2F%2FDivide%20the%20magnitude%20into%2010%20units%20so%20that%20you%20can%0A%20%20%20%20%20%20%2F%2Freduce%20the%20amount%20of%20shake%20by%2010%20percent%20each%20frame%0A%20%20%20%20%20%20var%20magnitudeUnit%20%3D%20magnitude%20%2F%20numberOfShakes%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60randomInt%60%20helper%20function%0A%20%20%20%20%20%20var%20randomInt%20%3D%20function%20randomInt%28min%2C%20max%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math%2Efloor%28Math%2Erandom%28%29%20%2A%20%28max%20%2D%20min%20%2B%201%29%29%20%2B%20min%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20the%20sprite%20to%20the%20%60shakingSprites%60%20array%20if%20it%0A%20%20%20%20%20%20%2F%2Fisn%27t%20already%20there%0A%20%20%20%20%20%20if%20%28self%2EshakingSprites%2EindexOf%28sprite%29%20%3D%3D%3D%20%2D1%29%20%7B%0A%0A%20%20%20%20%20%20%20%20self%2EshakingSprites%2Epush%28sprite%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20an%20%60updateShake%60%20method%20to%20the%20sprite%2E%0A%20%20%20%20%20%20%20%20%2F%2FThe%20%60updateShake%60%20method%20will%20be%20called%20each%20frame%0A%20%20%20%20%20%20%20%20%2F%2Fin%20the%20game%20loop%2E%20The%20shake%20effect%20type%20can%20be%20either%0A%20%20%20%20%20%20%20%20%2F%2Fup%20and%20down%20%28x%2Fy%20shaking%29%20or%20angular%20%28rotational%20shaking%29%2E%0A%20%20%20%20%20%20%20%20sprite%2EupdateShake%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28angular%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20angularShake%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20upAndDownShake%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60upAndDownShake%60%20function%0A%20%20%20%20%20%20function%20upAndDownShake%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FShake%20the%20sprite%20while%20the%20%60counter%60%20is%20less%20than%0A%20%20%20%20%20%20%20%20%2F%2Fthe%20%60numberOfShakes%60%0A%20%20%20%20%20%20%20%20if%20%28counter%20%3C%20numberOfShakes%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FReset%20the%20sprite%27s%20position%20at%20the%20start%20of%20each%20shake%0A%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20startX%3B%0A%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20startY%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FReduce%20the%20magnitude%0A%20%20%20%20%20%20%20%20%20%20magnitude%20%2D%3D%20magnitudeUnit%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FRandomly%20change%20the%20sprite%27s%20position%0A%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%2B%3D%20randomInt%28%2Dmagnitude%2C%20magnitude%29%3B%0A%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%2B%3D%20randomInt%28%2Dmagnitude%2C%20magnitude%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%201%20to%20the%20counter%0A%20%20%20%20%20%20%20%20%20%20counter%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FWhen%20the%20shaking%20is%20finished%2C%20restore%20the%20sprite%20to%20its%20original%0A%20%20%20%20%20%20%20%20%2F%2Fposition%20and%20remove%20it%20from%20the%20%60shakingSprites%60%20array%0A%20%20%20%20%20%20%20%20if%20%28counter%20%3E%3D%20numberOfShakes%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20startX%3B%0A%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20startY%3B%0A%20%20%20%20%20%20%20%20%20%20self%2EshakingSprites%2Esplice%28self%2EshakingSprites%2EindexOf%28sprite%29%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60angularShake%60%20function%0A%20%20%20%20%20%20%2F%2FFirst%20set%20the%20initial%20tilt%20angle%20to%20the%20right%20%28%2B1%29%0A%20%20%20%20%20%20var%20tiltAngle%20%3D%201%3B%0A%0A%20%20%20%20%20%20function%20angularShake%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28counter%20%3C%20numberOfShakes%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FReset%20the%20sprite%27s%20rotation%0A%20%20%20%20%20%20%20%20%20%20sprite%2Erotation%20%3D%20startAngle%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FReduce%20the%20magnitude%0A%20%20%20%20%20%20%20%20%20%20magnitude%20%2D%3D%20magnitudeUnit%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FRotate%20the%20sprite%20left%20or%20right%2C%20depending%20on%20the%20direction%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fby%20an%20amount%20in%20radians%20that%20matches%20the%20magnitude%0A%20%20%20%20%20%20%20%20%20%20sprite%2Erotation%20%3D%20magnitude%20%2A%20tiltAngle%3B%0A%20%20%20%20%20%20%20%20%20%20counter%20%2B%3D%201%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FReverse%20the%20tilt%20angle%20so%20that%20the%20sprite%20is%20tilted%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fin%20the%20opposite%20direction%20for%20the%20next%20shake%0A%20%20%20%20%20%20%20%20%20%20tiltAngle%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FWhen%20the%20shaking%20is%20finished%2C%20reset%20the%20sprite%27s%20angle%20and%0A%20%20%20%20%20%20%20%20%2F%2Fremove%20it%20from%20the%20%60shakingSprites%60%20array%0A%20%20%20%20%20%20%20%20if%20%28counter%20%3E%3D%20numberOfShakes%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2Erotation%20%3D%20startAngle%3B%0A%20%20%20%20%20%20%20%20%20%20self%2EshakingSprites%2Esplice%28self%2EshakingSprites%2EindexOf%28sprite%29%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%5FgetCenter%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20A%20utility%20that%20finds%20the%20center%20point%20of%20the%20sprite%2E%20If%20it%27s%20anchor%20point%20is%20the%0A%20%20%20%20sprite%27s%20top%20left%20corner%2C%20then%20the%20center%20is%20calculated%20from%20that%20point%2E%0A%20%20%20%20If%20the%20anchor%20point%20has%20been%20shifted%2C%20then%20the%20anchor%20x%2Fy%20point%20is%20used%20as%20the%20sprite%27s%20center%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22%5FgetCenter%22%2C%0A%20%20%20%20value%3A%20function%20%5FgetCenter%28o%2C%20dimension%2C%20axis%29%20%7B%0A%20%20%20%20%20%20if%20%28o%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%5Baxis%5D%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20dimension%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20dimension%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%20Groups%20%2A%2F%0A%0A%20%20%20%20%2F%2FGroup%20sprites%20into%20a%20container%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22group%22%2C%0A%20%20%20%20value%3A%20function%20group%28%29%20%7B%0A%20%20%20%20%20%20var%20container%20%3D%20new%20this%2EContainer%28%29%3B%0A%0A%20%20%20%20%20%20for%20%28var%20%5Flen%20%3D%20arguments%2Elength%2C%20sprites%20%3D%20Array%28%5Flen%29%2C%20%5Fkey%20%3D%200%3B%20%5Fkey%20%3C%20%5Flen%3B%20%5Fkey%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20sprites%5B%5Fkey%5D%20%3D%20arguments%5B%5Fkey%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20sprites%2EforEach%28function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20container%2EaddChild%28sprite%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20return%20container%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FUse%20the%20%60batch%60%20method%20to%20create%20a%20ParticleContainer%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22batch%22%2C%0A%20%20%20%20value%3A%20function%20batch%28%29%20%7B%0A%20%20%20%20%20%20var%20size%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%2015000%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20options%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%20%7B%20rotation%3A%20true%2C%20alpha%3A%20true%2C%20scale%3A%20true%2C%20uvs%3A%20true%20%7D%20%3A%20arguments%5B1%5D%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20new%20this%2EParticleContainer%28size%2C%20options%29%3B%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60remove%60%20is%20a%20global%20convenience%20method%20that%20will%0A%20%20%20%20%2F%2Fremove%20any%20sprite%2C%20or%20an%20argument%20list%20of%20sprites%2C%20from%20its%20parent%2E%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22remove%22%2C%0A%20%20%20%20value%3A%20function%20remove%28%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20%5Flen2%20%3D%20arguments%2Elength%2C%20sprites%20%3D%20Array%28%5Flen2%29%2C%20%5Fkey2%20%3D%200%3B%20%5Fkey2%20%3C%20%5Flen2%3B%20%5Fkey2%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20sprites%5B%5Fkey2%5D%20%3D%20arguments%5B%5Fkey2%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FRemove%20sprites%20that%27s%20aren%27t%20in%20an%20array%0A%20%20%20%20%20%20if%20%28%21%28sprites%5B0%5D%20instanceof%20Array%29%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28sprites%2Elength%20%3E%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprites%2EforEach%28function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Eparent%2EremoveChild%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprites%5B0%5D%2Eparent%2EremoveChild%28sprites%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FRemove%20sprites%20in%20an%20array%20of%20sprites%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20spritesArray%20%3D%20sprites%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28spritesArray%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20spritesArray%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20spritesArray%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Eparent%2EremoveChild%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20spritesArray%2Esplice%28spritesArray%2EindexOf%28sprite%29%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%20Color%20conversion%20%2A%2F%0A%20%20%20%20%2F%2FFrom%3A%20http%3A%2F%2Fstackoverflow%2Ecom%2Fquestions%2F1573053%2Fjavascript%2Dfunction%2Dto%2Dconvert%2Dcolor%2Dnames%2Dto%2Dhex%2Dcodes%0A%20%20%20%20%2F%2FUtilities%20to%20convert%20HTML%20color%20string%20names%20to%20hexadecimal%20codes%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22colorToRGBA%22%2C%0A%20%20%20%20value%3A%20function%20colorToRGBA%28color%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Returns%20the%20color%20as%20an%20array%20of%20%5Br%2C%20g%2C%20b%2C%20a%5D%20%2D%2D%20all%20range%20from%200%20%2D%20255%0A%20%20%20%20%20%20%2F%2F%20color%20must%20be%20a%20valid%20canvas%20fillStyle%2E%20This%20will%20cover%20most%20anything%0A%20%20%20%20%20%20%2F%2F%20you%27d%20want%20to%20use%2E%0A%20%20%20%20%20%20%2F%2F%20Examples%3A%0A%20%20%20%20%20%20%2F%2F%20colorToRGBA%28%27red%27%29%20%20%23%20%5B255%2C%200%2C%200%2C%20255%5D%0A%20%20%20%20%20%20%2F%2F%20colorToRGBA%28%27%23f00%27%29%20%23%20%5B255%2C%200%2C%200%2C%20255%5D%0A%20%20%20%20%20%20var%20cvs%2C%20ctx%3B%0A%20%20%20%20%20%20cvs%20%3D%20document%2EcreateElement%28%27canvas%27%29%3B%0A%20%20%20%20%20%20cvs%2Eheight%20%3D%201%3B%0A%20%20%20%20%20%20cvs%2Ewidth%20%3D%201%3B%0A%20%20%20%20%20%20ctx%20%3D%20cvs%2EgetContext%28%272d%27%29%3B%0A%20%20%20%20%20%20ctx%2EfillStyle%20%3D%20color%3B%0A%20%20%20%20%20%20ctx%2EfillRect%280%2C%200%2C%201%2C%201%29%3B%0A%20%20%20%20%20%20var%20data%20%3D%20ctx%2EgetImageData%280%2C%200%2C%201%2C%201%29%2Edata%3B%0A%20%20%20%20%20%20return%20data%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22byteToHex%22%2C%0A%20%20%20%20value%3A%20function%20byteToHex%28num%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Turns%20a%20number%20%280%2D255%29%20into%20a%202%2Dcharacter%20hex%20number%20%2800%2Dff%29%0A%20%20%20%20%20%20return%20%28%270%27%20%2B%20num%2EtoString%2816%29%29%2Eslice%28%2D2%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22colorToHex%22%2C%0A%20%20%20%20value%3A%20function%20colorToHex%28color%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis2%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Convert%20any%20CSS%20color%20to%20a%20hex%20representation%0A%20%20%20%20%20%20%2F%2F%20Examples%3A%0A%20%20%20%20%20%20%2F%2F%20colorToHex%28%27red%27%29%20%20%20%20%20%20%20%20%20%20%20%20%23%20%27%23ff0000%27%0A%20%20%20%20%20%20%2F%2F%20colorToHex%28%27rgb%28255%2C%200%2C%200%29%27%29%20%23%20%27%23ff0000%27%0A%20%20%20%20%20%20var%20rgba%2C%20hex%3B%0A%20%20%20%20%20%20rgba%20%3D%20this%2EcolorToRGBA%28color%29%3B%0A%20%20%20%20%20%20hex%20%3D%20%5B0%2C%201%2C%202%5D%2Emap%28function%20%28idx%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis2%2EbyteToHex%28rgba%5Bidx%5D%29%3B%0A%20%20%20%20%20%20%7D%29%2Ejoin%28%27%27%29%3B%0A%20%20%20%20%20%20return%20%220x%22%20%2B%20hex%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FA%20function%20to%20find%20out%20if%20the%20user%20entered%20a%20number%20%28a%20hex%20color%0A%20%20%20%20%2F%2Fcode%29%20or%20a%20string%20%28an%20HTML%20color%20string%29%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22color%22%2C%0A%20%20%20%20value%3A%20function%20color%28value%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FCheck%20if%20it%27s%20a%20number%0A%20%20%20%20%20%20if%20%28%21isNaN%28value%29%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FYes%2C%20it%20is%20a%20number%2C%20so%20just%20return%20it%0A%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FNo%20it%27s%20not%20a%20number%2C%20so%20it%20must%20be%20a%20string%20%20%20%0A%20%20%20%20%20%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20return%20this%2EcolorToHex%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2A%0A%20%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20out%20what%20kind%20of%20color%20string%20it%20is%2E%0A%20%20%20%20%20%20%20%20%20%20%2F%2FLet%27s%20first%20grab%20the%20first%20character%20of%20the%20string%0A%20%20%20%20%20%20%20%20%20%20let%20firstCharacter%20%3D%20value%2EcharAt%280%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20first%20character%20is%20a%20%22%23%22%20or%20a%20number%2C%20then%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fwe%20know%20it%20must%20be%20a%20RGBA%20color%0A%20%20%20%20%20%20%20%20%20%20if%20%28firstCharacter%20%3D%3D%3D%20%22%23%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console%2Elog%28%22first%20character%3A%20%22%20%2B%20value%2EcharAt%280%29%29%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2A%2F%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2A%0A%20%20%20%20%20%20%2F%2FFind%20out%20if%20the%20first%20character%20in%20the%20string%20is%20a%20number%0A%20%20%20%20%20%20if%20%28%21isNaN%28parseInt%28string%2EcharAt%280%29%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2FIt%27s%20not%2C%20so%20convert%20it%20to%20a%20hex%20code%0A%20%20%20%20%20%20%20%20return%20colorToHex%28string%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2FThe%20use%20input%20a%20number%2C%20so%20it%20must%20be%20a%20hex%20code%2E%20Just%20return%20it%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20string%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2A%2F%0A%20%20%20%20%7D%0A%20%20%7D%5D%29%3B%0A%0A%20%20return%20SpriteUtilities%3B%0A%7D%29%28%29%3B%0A%2F%2F%23%20sourceMappingURL%3DspriteUtilities%2Ejs%2Emap%22use%20strict%22%3B%0A%0Avar%20%5FcreateClass%20%3D%20%28function%20%28%29%20%7B%20function%20defineProperties%28target%2C%20props%29%20%7B%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20props%2Elength%3B%20i%2B%2B%29%20%7B%20var%20descriptor%20%3D%20props%5Bi%5D%3B%20descriptor%2Eenumerable%20%3D%20descriptor%2Eenumerable%20%7C%7C%20false%3B%20descriptor%2Econfigurable%20%3D%20true%3B%20if%20%28%22value%22%20in%20descriptor%29%20descriptor%2Ewritable%20%3D%20true%3B%20Object%2EdefineProperty%28target%2C%20descriptor%2Ekey%2C%20descriptor%29%3B%20%7D%20%7D%20return%20function%20%28Constructor%2C%20protoProps%2C%20staticProps%29%20%7B%20if%20%28protoProps%29%20defineProperties%28Constructor%2Eprototype%2C%20protoProps%29%3B%20if%20%28staticProps%29%20defineProperties%28Constructor%2C%20staticProps%29%3B%20return%20Constructor%3B%20%7D%3B%20%7D%29%28%29%3B%0A%0Afunction%20%5FclassCallCheck%28instance%2C%20Constructor%29%20%7B%20if%20%28%21%28instance%20instanceof%20Constructor%29%29%20%7B%20throw%20new%20TypeError%28%22Cannot%20call%20a%20class%20as%20a%20function%22%29%3B%20%7D%20%7D%0A%0Avar%20GameUtilities%20%3D%20%28function%20%28%29%20%7B%0A%20%20function%20GameUtilities%28%29%20%7B%0A%20%20%20%20%5FclassCallCheck%28this%2C%20GameUtilities%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2A%0A%20%20distance%0A%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20Find%20the%20distance%20in%20pixels%20between%20two%20sprites%2E%0A%20%20Parameters%3A%20%0A%20%20a%2E%20A%20sprite%20object%2E%20%0A%20%20b%2E%20A%20sprite%20object%2E%20%0A%20%20The%20function%20returns%20the%20number%20of%20pixels%20distance%20between%20the%20sprites%2E%0A%20%20%20%20%20%20let%20distanceBetweenSprites%20%3D%20gu%2Edistance%28spriteA%2C%20spriteB%29%3B%0A%20%20%20%2A%2F%0A%0A%20%20%5FcreateClass%28GameUtilities%2C%20%5B%7B%0A%20%20%20%20key%3A%20%22distance%22%2C%0A%20%20%20%20value%3A%20function%20distance%28s1%2C%20s2%29%20%7B%0A%20%20%20%20%20%20var%20vx%20%3D%20s2%2Ex%20%2B%20this%2E%5FgetCenter%28s2%2C%20s2%2Ewidth%2C%20%22x%22%29%20%2D%20%28s1%2Ex%20%2B%20this%2E%5FgetCenter%28s1%2C%20s1%2Ewidth%2C%20%22x%22%29%29%2C%0A%20%20%20%20%20%20%20%20%20%20vy%20%3D%20s2%2Ey%20%2B%20this%2E%5FgetCenter%28s2%2C%20s2%2Eheight%2C%20%22y%22%29%20%2D%20%28s1%2Ey%20%2B%20this%2E%5FgetCenter%28s1%2C%20s1%2Eheight%2C%20%22y%22%29%29%3B%0A%20%20%20%20%20%20return%20Math%2Esqrt%28vx%20%2A%20vx%20%2B%20vy%20%2A%20vy%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20followEase%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Make%20a%20sprite%20ease%20to%20the%20position%20of%20another%20sprite%2E%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%2E%20This%20is%20the%20%60follower%60%20sprite%2E%0A%20%20%20%20b%2E%20A%20sprite%20object%2E%20This%20is%20the%20%60leader%60%20sprite%20that%20the%20follower%20will%20chase%2E%0A%20%20%20%20c%2E%20The%20easing%20value%2C%20such%20as%200%2E3%2E%20A%20higher%20number%20makes%20the%20follower%20move%20faster%2E%0A%20%20%20%20%20%20%20%20gu%2EfollowEase%28follower%2C%20leader%2C%20speed%29%3B%0A%20%20%20%20%20Use%20it%20inside%20a%20game%20loop%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22followEase%22%2C%0A%20%20%20%20value%3A%20function%20followEase%28follower%2C%20leader%2C%20speed%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FFigure%20out%20the%20distance%20between%20the%20sprites%0A%20%20%20%20%20%20%2F%2A%0A%20%20%20%20%20%20let%20vx%20%3D%20%28leader%2Ex%20%2B%20leader%2Ewidth%20%2F%202%29%20%2D%20%28follower%2Ex%20%2B%20follower%2Ewidth%20%2F%202%29%2C%0A%20%20%20%20%20%20%20%20%20%20vy%20%3D%20%28leader%2Ey%20%2B%20leader%2Eheight%20%2F%202%29%20%2D%20%28follower%2Ey%20%2B%20follower%2Eheight%20%2F%202%29%2C%0A%20%20%20%20%20%20%20%20%20%20distance%20%3D%20Math%2Esqrt%28vx%20%2A%20vx%20%2B%20vy%20%2A%20vy%29%3B%0A%20%20%20%20%20%20%2A%2F%0A%0A%20%20%20%20%20%20var%20vx%20%3D%20leader%2Ex%20%2B%20this%2E%5FgetCenter%28leader%2C%20leader%2Ewidth%2C%20%22x%22%29%20%2D%20%28follower%2Ex%20%2B%20this%2E%5FgetCenter%28follower%2C%20follower%2Ewidth%2C%20%22x%22%29%29%2C%0A%20%20%20%20%20%20%20%20%20%20vy%20%3D%20leader%2Ey%20%2B%20this%2E%5FgetCenter%28leader%2C%20leader%2Eheight%2C%20%22y%22%29%20%2D%20%28follower%2Ey%20%2B%20this%2E%5FgetCenter%28follower%2C%20follower%2Eheight%2C%20%22y%22%29%29%2C%0A%20%20%20%20%20%20%20%20%20%20distance%20%3D%20Math%2Esqrt%28vx%20%2A%20vx%20%2B%20vy%20%2A%20vy%29%3B%0A%0A%20%20%20%20%20%20%2F%2FMove%20the%20follower%20if%20it%27s%20more%20than%201%20pixel%0A%20%20%20%20%20%20%2F%2Faway%20from%20the%20leader%0A%20%20%20%20%20%20if%20%28distance%20%3E%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20follower%2Ex%20%2B%3D%20vx%20%2A%20speed%3B%0A%20%20%20%20%20%20%20%20follower%2Ey%20%2B%3D%20vy%20%2A%20speed%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20followConstant%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Make%20a%20sprite%20move%20towards%20another%20sprite%20at%20a%20constant%20speed%2E%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%2E%20This%20is%20the%20%60follower%60%20sprite%2E%0A%20%20%20%20b%2E%20A%20sprite%20object%2E%20This%20is%20the%20%60leader%60%20sprite%20that%20the%20follower%20will%20chase%2E%0A%20%20%20%20c%2E%20The%20speed%20value%2C%20such%20as%203%2E%20The%20is%20the%20pixels%20per%20frame%20that%20the%20sprite%20will%20move%2E%20A%20higher%20number%20makes%20the%20follower%20move%20faster%2E%0A%20%20%20%20%20%20%20%20gu%2EfollowConstant%28follower%2C%20leader%2C%20speed%29%3B%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22followConstant%22%2C%0A%20%20%20%20value%3A%20function%20followConstant%28follower%2C%20leader%2C%20speed%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FFigure%20out%20the%20distance%20between%20the%20sprites%0A%20%20%20%20%20%20var%20vx%20%3D%20leader%2Ex%20%2B%20this%2E%5FgetCenter%28leader%2C%20leader%2Ewidth%2C%20%22x%22%29%20%2D%20%28follower%2Ex%20%2B%20this%2E%5FgetCenter%28follower%2C%20follower%2Ewidth%2C%20%22x%22%29%29%2C%0A%20%20%20%20%20%20%20%20%20%20vy%20%3D%20leader%2Ey%20%2B%20this%2E%5FgetCenter%28leader%2C%20leader%2Eheight%2C%20%22y%22%29%20%2D%20%28follower%2Ey%20%2B%20this%2E%5FgetCenter%28follower%2C%20follower%2Eheight%2C%20%22y%22%29%29%2C%0A%20%20%20%20%20%20%20%20%20%20distance%20%3D%20Math%2Esqrt%28vx%20%2A%20vx%20%2B%20vy%20%2A%20vy%29%3B%0A%0A%20%20%20%20%20%20%2F%2FMove%20the%20follower%20if%20it%27s%20more%20than%201%20move%0A%20%20%20%20%20%20%2F%2Faway%20from%20the%20leader%0A%20%20%20%20%20%20if%20%28distance%20%3E%3D%20speed%29%20%7B%0A%20%20%20%20%20%20%20%20follower%2Ex%20%2B%3D%20vx%20%2F%20distance%20%2A%20speed%3B%0A%20%20%20%20%20%20%20%20follower%2Ey%20%2B%3D%20vy%20%2F%20distance%20%2A%20speed%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20angle%0A%20%20%20%20%2D%2D%2D%2D%2D%0A%20%20%20%20%20Return%20the%20angle%20in%20Radians%20between%20two%20sprites%2E%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20A%20sprite%20object%2E%0A%20%20%20%20b%2E%20A%20sprite%20object%2E%0A%20%20%20%20You%20can%20use%20it%20to%20make%20a%20sprite%20rotate%20towards%20another%20sprite%20like%20this%3A%0A%20%20%20%20%20%20%20%20%20box%2Erotation%20%3D%20angle%28box%2C%20pointer%29%3B%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22angle%22%2C%0A%20%20%20%20value%3A%20function%20angle%28s1%2C%20s2%29%20%7B%0A%20%20%20%20%20%20return%20Math%2Eatan2%28%0A%20%20%20%20%20%20%2F%2FThis%20is%20the%20code%20you%20need%20if%20you%20don%27t%20want%20to%20compensate%0A%20%20%20%20%20%20%2F%2Ffor%20a%20possible%20shift%20in%20the%20sprites%27%20x%2Fy%20anchor%20points%0A%20%20%20%20%20%20%2F%2A%0A%20%20%20%20%20%20%28s2%2Ey%20%2B%20s2%2Eheight%20%2F%202%29%20%2D%20%28s1%2Ey%20%2B%20s1%2Eheight%20%2F%202%29%2C%0A%20%20%20%20%20%20%28s2%2Ex%20%2B%20s2%2Ewidth%20%2F%202%29%20%2D%20%28s1%2Ex%20%2B%20s1%2Ewidth%20%2F%202%29%0A%20%20%20%20%20%20%2A%2F%0A%20%20%20%20%20%20%2F%2FThis%20code%20adapts%20to%20a%20shifted%20anchor%20point%0A%20%20%20%20%20%20s2%2Ey%20%2B%20this%2E%5FgetCenter%28s2%2C%20s2%2Eheight%2C%20%22y%22%29%20%2D%20%28s1%2Ey%20%2B%20this%2E%5FgetCenter%28s1%2C%20s1%2Eheight%2C%20%22y%22%29%29%2C%20s2%2Ex%20%2B%20this%2E%5FgetCenter%28s2%2C%20s2%2Ewidth%2C%20%22x%22%29%20%2D%20%28s1%2Ex%20%2B%20this%2E%5FgetCenter%28s1%2C%20s1%2Ewidth%2C%20%22x%22%29%29%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%5FgetCenter%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20A%20utility%20that%20finds%20the%20center%20point%20of%20the%20sprite%2E%20If%20it%27s%20anchor%20point%20is%20the%0A%20%20%20%20sprite%27s%20top%20left%20corner%2C%20then%20the%20center%20is%20calculated%20from%20that%20point%2E%0A%20%20%20%20If%20the%20anchor%20point%20has%20been%20shifted%2C%20then%20the%20anchor%20x%2Fy%20point%20is%20used%20as%20the%20sprite%27s%20center%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22%5FgetCenter%22%2C%0A%20%20%20%20value%3A%20function%20%5FgetCenter%28o%2C%20dimension%2C%20axis%29%20%7B%0A%20%20%20%20%20%20if%20%28o%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%5Baxis%5D%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fconsole%2Elog%28o%2Eanchor%5Baxis%5D%29%0A%20%20%20%20%20%20%20%20%20%20return%20dimension%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20dimension%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20rotateAroundSprite%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20Make%20a%20sprite%20rotate%20around%20another%20sprite%2E%0A%20%20%20%20Parameters%3A%0A%20%20%20%20a%2E%20The%20sprite%20you%20want%20to%20rotate%2E%0A%20%20%20%20b%2E%20The%20sprite%20around%20which%20you%20want%20to%20rotate%20the%20first%20sprite%2E%0A%20%20%20%20c%2E%20The%20distance%2C%20in%20pixels%2C%20that%20the%20roating%20sprite%20should%20be%20offset%20from%20the%20center%2E%0A%20%20%20%20d%2E%20The%20angle%20of%20rotations%2C%20in%20radians%2E%0A%20%20%20%20%20%20%20%20gu%2ErotateAroundSprite%28orbitingSprite%2C%20centerSprite%2C%2050%2C%20angleInRadians%29%3B%0A%20%20%20%20%20Use%20it%20inside%20a%20game%20loop%2C%20and%20make%20sure%20you%20update%20the%20angle%20value%20%28the%204th%20argument%29%20each%20frame%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22rotateAroundSprite%22%2C%0A%20%20%20%20value%3A%20function%20rotateAroundSprite%28rotatingSprite%2C%20centerSprite%2C%20distance%2C%20angle%29%20%7B%0A%20%20%20%20%20%20rotatingSprite%2Ex%20%3D%20centerSprite%2Ex%20%2B%20this%2E%5FgetCenter%28centerSprite%2C%20centerSprite%2Ewidth%2C%20%22x%22%29%20%2D%20rotatingSprite%2Eparent%2Ex%20%2B%20distance%20%2A%20Math%2Ecos%28angle%29%20%2D%20this%2E%5FgetCenter%28rotatingSprite%2C%20rotatingSprite%2Ewidth%2C%20%22x%22%29%3B%0A%0A%20%20%20%20%20%20rotatingSprite%2Ey%20%3D%20centerSprite%2Ey%20%2B%20this%2E%5FgetCenter%28centerSprite%2C%20centerSprite%2Eheight%2C%20%22y%22%29%20%2D%20rotatingSprite%2Eparent%2Ey%20%2B%20distance%20%2A%20Math%2Esin%28angle%29%20%2D%20this%2E%5FgetCenter%28rotatingSprite%2C%20rotatingSprite%2Eheight%2C%20%22y%22%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20rotateAroundPoint%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20Make%20a%20point%20rotate%20around%20another%20point%2E%0A%20%20%20%20Parameters%3A%0A%20%20%20%20a%2E%20The%20point%20you%20want%20to%20rotate%2E%0A%20%20%20%20b%2E%20The%20point%20around%20which%20you%20want%20to%20rotate%20the%20first%20point%2E%0A%20%20%20%20c%2E%20The%20distance%2C%20in%20pixels%2C%20that%20the%20roating%20sprite%20should%20be%20offset%20from%20the%20center%2E%0A%20%20%20%20d%2E%20The%20angle%20of%20rotations%2C%20in%20radians%2E%0A%20%20%20%20%20%20%20%20gu%2ErotateAroundPoint%28orbitingPoint%2C%20centerPoint%2C%2050%2C%20angleInRadians%29%3B%0A%20%20%20%20%20Use%20it%20inside%20a%20game%20loop%2C%20and%20make%20sure%20you%20update%20the%20angle%20value%20%28the%204th%20argument%29%20each%20frame%2E%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22rotateAroundPoint%22%2C%0A%20%20%20%20value%3A%20function%20rotateAroundPoint%28pointX%2C%20pointY%2C%20distanceX%2C%20distanceY%2C%20angle%29%20%7B%0A%20%20%20%20%20%20var%20point%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20point%2Ex%20%3D%20pointX%20%2B%20Math%2Ecos%28angle%29%20%2A%20distanceX%3B%0A%20%20%20%20%20%20point%2Ey%20%3D%20pointY%20%2B%20Math%2Esin%28angle%29%20%2A%20distanceY%3B%0A%20%20%20%20%20%20return%20point%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20randomInt%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Return%20a%20random%20integer%20between%20a%20minimum%20and%20maximum%20value%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20An%20integer%2E%0A%20%20%20%20b%2E%20An%20integer%2E%0A%20%20%20%20Here%27s%20how%20you%20can%20use%20it%20to%20get%20a%20random%20number%20between%2C%201%20and%2010%3A%0A%20%20%20%20%20%20%20%20let%20number%20%3D%20gu%2ErandomInt%281%2C%2010%29%3B%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22randomInt%22%2C%0A%20%20%20%20value%3A%20function%20randomInt%28min%2C%20max%29%20%7B%0A%20%20%20%20%20%20return%20Math%2Efloor%28Math%2Erandom%28%29%20%2A%20%28max%20%2D%20min%20%2B%201%29%29%20%2B%20min%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20randomFloat%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20Return%20a%20random%20floating%20point%20number%20between%20a%20minimum%20and%20maximum%20value%0A%20%20%20%20Parameters%3A%20%0A%20%20%20%20a%2E%20Any%20number%2E%0A%20%20%20%20b%2E%20Any%20number%2E%0A%20%20%20%20Here%27s%20how%20you%20can%20use%20it%20to%20get%20a%20random%20floating%20point%20number%20between%2C%201%20and%2010%3A%0A%20%20%20%20%20%20%20%20%20let%20number%20%3D%20gu%2ErandomFloat%281%2C%2010%29%3B%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22randomFloat%22%2C%0A%20%20%20%20value%3A%20function%20randomFloat%28min%2C%20max%29%20%7B%0A%20%20%20%20%20%20return%20min%20%2B%20Math%2Erandom%28%29%20%2A%20%28max%20%2D%20min%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20Wait%0A%20%20%20%20%2D%2D%2D%2D%0A%20%20%20%20%20Lets%20you%20wait%20for%20a%20specific%20number%20of%20milliseconds%20before%20running%20the%0A%20%20%20%20next%20function%2E%20%0A%20%20%20%20%20%0A%20%20%20%20%20%20wait%281000%2C%20runThisFunctionNext%28%29%29%3B%0A%20%20%20%20%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22wait%22%2C%0A%20%20%20%20value%3A%20function%20wait%28duration%2C%20callBack%29%20%7B%0A%20%20%20%20%20%20setTimeout%28callBack%2C%20duration%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20Move%0A%20%20%20%20%2D%2D%2D%2D%0A%20%20%20%20%20Move%20a%20sprite%20by%20adding%20it%27s%20velocity%20to%20it%27s%20position%2E%20The%20sprite%20%0A%20%20%20%20must%20have%20%60vx%60%20and%20%60vy%60%20values%20for%20this%20to%20work%2E%20You%20can%20supply%20a%0A%20%20%20%20single%20sprite%2C%20or%20a%20list%20of%20sprites%2C%20separated%20by%20commas%2E%0A%20%20%20%20%20%20%20%20%20move%28sprite%29%3B%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22move%22%2C%0A%20%20%20%20value%3A%20function%20move%28%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20%5Flen%20%3D%20arguments%2Elength%2C%20sprites%20%3D%20Array%28%5Flen%29%2C%20%5Fkey%20%3D%200%3B%20%5Fkey%20%3C%20%5Flen%3B%20%5Fkey%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20sprites%5B%5Fkey%5D%20%3D%20arguments%5B%5Fkey%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FMove%20sprites%20that%27s%20aren%27t%20in%20an%20array%0A%20%20%20%20%20%20if%20%28%21%28sprites%5B0%5D%20instanceof%20Array%29%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28sprites%2Elength%20%3E%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprites%2EforEach%28function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%2B%3D%20sprite%2Evx%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%2B%3D%20sprite%2Evy%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprites%5B0%5D%2Ex%20%2B%3D%20sprites%5B0%5D%2Evx%3B%0A%20%20%20%20%20%20%20%20%20%20sprites%5B0%5D%2Ey%20%2B%3D%20sprites%5B0%5D%2Evy%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FMove%20sprites%20in%20an%20array%20of%20sprites%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20spritesArray%20%3D%20sprites%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28spritesArray%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20spritesArray%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20spritesArray%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%2B%3D%20sprite%2Evx%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%2B%3D%20sprite%2Evy%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20World%20camera%0A%20%20%20%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%20%20%20%20%20The%20%60worldCamera%60%20method%20returns%20a%20%60camera%60%20object%0A%20%20%20%20with%20%60x%60%20and%20%60y%60%20properties%2E%20It%20has%0A%20%20%20%20two%20useful%20methods%3A%20%60centerOver%60%2C%20to%20center%20the%20camera%20over%0A%20%20%20%20a%20sprite%2C%20and%20%60follow%60%20to%20make%20it%20follow%20a%20sprite%2E%0A%20%20%20%20%60worldCamera%60%20arguments%3A%20worldObject%2C%20theCanvas%0A%20%20%20%20The%20worldObject%20needs%20to%20have%20a%20%60width%60%20and%20%60height%60%20property%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22worldCamera%22%2C%0A%20%20%20%20value%3A%20function%20worldCamera%28world%2C%20worldWidth%2C%20worldHeight%2C%20canvas%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FDefine%20a%20%60camera%60%20object%20with%20helpful%20properties%0A%20%20%20%20%20%20var%20camera%20%3D%20%7B%0A%20%20%20%20%20%20%20%20width%3A%20canvas%2Ewidth%2C%0A%20%20%20%20%20%20%20%20height%3A%20canvas%2Eheight%2C%0A%20%20%20%20%20%20%20%20%5Fx%3A%200%2C%0A%20%20%20%20%20%20%20%20%5Fy%3A%200%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%60x%60%20and%20%60y%60%20getters%2Fsetters%0A%20%20%20%20%20%20%20%20%2F%2FWhen%20you%20change%20the%20camera%27s%20position%2C%0A%20%20%20%20%20%20%20%20%2F%2Fthey%20shift%20the%20position%20of%20the%20world%20in%20the%20opposite%20direction%0A%20%20%20%20%20%20%20%20get%20x%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fx%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%20x%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2E%5Fx%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20world%2Ex%20%3D%20%2Dthis%2E%5Fx%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fworld%2E%5FpreviousX%20%3D%20world%2Ex%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20get%20y%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2E%5Fy%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%20y%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2E%5Fy%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20world%2Ey%20%3D%20%2Dthis%2E%5Fy%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fworld%2E%5FpreviousY%20%3D%20world%2Ey%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20center%20x%20and%20y%20position%20of%20the%20camera%0A%20%20%20%20%20%20%20%20get%20centerX%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2Ex%20%2B%20this%2Ewidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20get%20centerY%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2Ey%20%2B%20this%2Eheight%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FBoundary%20properties%20that%20define%20a%20rectangular%20area%2C%20half%20the%20size%0A%20%20%20%20%20%20%20%20%2F%2Fof%20the%20game%20screen%2E%20If%20the%20sprite%20that%20the%20camera%20is%20following%0A%20%20%20%20%20%20%20%20%2F%2Fis%20inide%20this%20area%2C%20the%20camera%20won%27t%20scroll%2E%20If%20the%20sprite%0A%20%20%20%20%20%20%20%20%2F%2Fcrosses%20this%20boundary%2C%20the%20%60follow%60%20function%20ahead%20will%20change%0A%20%20%20%20%20%20%20%20%2F%2Fthe%20camera%27s%20x%20and%20y%20position%20to%20scroll%20the%20game%20world%0A%20%20%20%20%20%20%20%20get%20rightInnerBoundary%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2Ex%20%2B%20this%2Ewidth%20%2F%202%20%2B%20this%2Ewidth%20%2F%204%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20get%20leftInnerBoundary%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2Ex%20%2B%20this%2Ewidth%20%2F%202%20%2D%20this%2Ewidth%20%2F%204%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20get%20topInnerBoundary%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2Ey%20%2B%20this%2Eheight%20%2F%202%20%2D%20this%2Eheight%20%2F%204%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20get%20bottomInnerBoundary%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2Ey%20%2B%20this%2Eheight%20%2F%202%20%2B%20this%2Eheight%20%2F%204%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20code%20next%20defines%20two%20camera%0A%20%20%20%20%20%20%20%20%2F%2Fmethods%3A%20%60follow%60%20and%20%60centerOver%60%0A%0A%20%20%20%20%20%20%20%20%2F%2FUse%20the%20%60follow%60%20method%20to%20make%20the%20camera%20follow%20a%20sprite%0A%20%20%20%20%20%20%20%20follow%3A%20function%20follow%28sprite%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCheck%20the%20sprites%20position%20in%20relation%20to%20the%20inner%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fboundary%2E%20Move%20the%20camera%20to%20follow%20the%20sprite%20if%20the%20sprite%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fstrays%20outside%20the%20boundary%0A%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Ex%20%3C%20this%2EleftInnerBoundary%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ex%20%3D%20sprite%2Ex%20%2D%20this%2Ewidth%20%2F%204%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Ey%20%3C%20this%2EtopInnerBoundary%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ey%20%3D%20sprite%2Ey%20%2D%20this%2Eheight%20%2F%204%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Ex%20%2B%20sprite%2Ewidth%20%3E%20this%2ErightInnerBoundary%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ex%20%3D%20sprite%2Ex%20%2B%20sprite%2Ewidth%20%2D%20this%2Ewidth%20%2F%204%20%2A%203%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Ey%20%2B%20sprite%2Eheight%20%3E%20this%2EbottomInnerBoundary%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ey%20%3D%20sprite%2Ey%20%2B%20sprite%2Eheight%20%2D%20this%2Eheight%20%2F%204%20%2A%203%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20camera%20reaches%20the%20edge%20of%20the%20map%2C%20stop%20it%20from%20moving%0A%20%20%20%20%20%20%20%20%20%20if%20%28this%2Ex%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ex%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28this%2Ey%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ey%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28this%2Ex%20%2B%20this%2Ewidth%20%3E%20worldWidth%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ex%20%3D%20worldWidth%20%2D%20this%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28this%2Ey%20%2B%20this%2Eheight%20%3E%20worldHeight%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%2Ey%20%3D%20worldHeight%20%2D%20this%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FUse%20the%20%60centerOver%60%20method%20to%20center%20the%20camera%20over%20a%20sprite%0A%20%20%20%20%20%20%20%20centerOver%3A%20function%20centerOver%28sprite%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCenter%20the%20camera%20over%20a%20sprite%0A%20%20%20%20%20%20%20%20%20%20this%2Ex%20%3D%20sprite%2Ex%20%2B%20sprite%2EhalfWidth%20%2D%20this%2Ewidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20this%2Ey%20%3D%20sprite%2Ey%20%2B%20sprite%2EhalfHeight%20%2D%20this%2Eheight%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20%60camera%60%20object%0A%20%20%20%20%20%20return%20camera%3B%0A%20%20%20%20%7D%0A%20%20%7D%5D%29%3B%0A%0A%20%20return%20GameUtilities%3B%0A%7D%29%28%29%3B%0A%2F%2F%23%20sourceMappingURL%3DgameUtilities%2Ejs%2Emap%22use%20strict%22%3B%0A%0Avar%20%5FcreateClass%20%3D%20%28function%20%28%29%20%7B%20function%20defineProperties%28target%2C%20props%29%20%7B%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20props%2Elength%3B%20i%2B%2B%29%20%7B%20var%20descriptor%20%3D%20props%5Bi%5D%3B%20descriptor%2Eenumerable%20%3D%20descriptor%2Eenumerable%20%7C%7C%20false%3B%20descriptor%2Econfigurable%20%3D%20true%3B%20if%20%28%22value%22%20in%20descriptor%29%20descriptor%2Ewritable%20%3D%20true%3B%20Object%2EdefineProperty%28target%2C%20descriptor%2Ekey%2C%20descriptor%29%3B%20%7D%20%7D%20return%20function%20%28Constructor%2C%20protoProps%2C%20staticProps%29%20%7B%20if%20%28protoProps%29%20defineProperties%28Constructor%2Eprototype%2C%20protoProps%29%3B%20if%20%28staticProps%29%20defineProperties%28Constructor%2C%20staticProps%29%3B%20return%20Constructor%3B%20%7D%3B%20%7D%29%28%29%3B%0A%0Afunction%20%5FclassCallCheck%28instance%2C%20Constructor%29%20%7B%20if%20%28%21%28instance%20instanceof%20Constructor%29%29%20%7B%20throw%20new%20TypeError%28%22Cannot%20call%20a%20class%20as%20a%20function%22%29%3B%20%7D%20%7D%0A%0Avar%20Smoothie%20%3D%20%28function%20%28%29%20%7B%0A%20%20function%20Smoothie%28%29%20%2F%2FRefers%20to%20%60tileposition%60%20and%20%60tileScale%60%20x%20and%20y%20properties%0A%20%20%7B%0A%20%20%20%20var%20options%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20%7B%0A%20%20%20%20%20%20engine%3A%20PIXI%2C%20%2F%2FThe%20rendering%20engine%20%28Pixi%29%0A%20%20%20%20%20%20renderer%3A%20undefined%2C%20%2F%2FThe%20Pixi%20renderer%20you%20created%20in%20your%20application%0A%20%20%20%20%20%20root%3A%20undefined%2C%20%2F%2FThe%20root%20Pixi%20display%20object%20%28usually%20the%20%60stage%60%29%0A%20%20%20%20%20%20update%3A%20undefined%2C%20%2F%2FA%20logic%20function%20that%20should%20be%20called%20every%20frame%20of%20the%20game%20loop%0A%20%20%20%20%20%20interpolate%3A%20true%2C%20%2F%2FA%20Boolean%20to%20turn%20interpolation%20on%20or%20off%0A%20%20%20%20%20%20fps%3A%2060%2C%20%2F%2FThe%20frame%20rate%20at%20which%20the%20application%27s%20looping%20logic%20function%20should%20update%0A%20%20%20%20%20%20renderFps%3A%20undefined%2C%20%2F%2FThe%20frame%20rate%20at%20which%20sprites%20should%20be%20rendered%0A%20%20%20%20%20%20properties%3A%20%7B%20%2F%2FSprite%20roperties%20that%20should%20be%20interpolated%0A%20%20%20%20%20%20%20%20position%3A%20true%2C%0A%20%20%20%20%20%20%20%20rotation%3A%20true%2C%0A%20%20%20%20%20%20%20%20size%3A%20false%2C%0A%20%20%20%20%20%20%20%20scale%3A%20false%2C%0A%20%20%20%20%20%20%20%20alpha%3A%20false%2C%0A%20%20%20%20%20%20%20%20tile%3A%20false%20%7D%0A%20%20%20%20%7D%20%3A%20arguments%5B0%5D%3B%0A%0A%20%20%20%20%5FclassCallCheck%28this%2C%20Smoothie%29%3B%0A%0A%20%20%20%20if%20%28options%2Eengine%20%3D%3D%3D%20undefined%29%20throw%20new%20Error%28%22Please%20assign%20a%20rendering%20engine%20as%20Smoothie%27s%20engine%20option%22%29%3B%0A%0A%20%20%20%20%2F%2FFind%20out%20which%20rendering%20engine%20is%20being%20used%20%28the%20default%20is%20Pixi%29%0A%20%20%20%20this%2Eengine%20%3D%20%22%22%3B%0A%0A%20%20%20%20%2F%2FIf%20the%20%60renderingEngine%60%20is%20Pixi%2C%20set%20up%20Pixi%20object%20aliases%0A%20%20%20%20if%20%28options%2Eengine%2EParticleContainer%20%26%26%20options%2Eengine%2ESprite%29%20%7B%0A%20%20%20%20%20%20this%2ErenderingEngine%20%3D%20%22pixi%22%3B%0A%20%20%20%20%20%20this%2EContainer%20%3D%20options%2Eengine%2EContainer%3B%0A%20%20%20%20%20%20this%2ESprite%20%3D%20options%2Eengine%2ESprite%3B%0A%20%20%20%20%20%20this%2EMovieClip%20%3D%20options%2Eengine%2Eextras%2EMovieClip%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FCheck%20to%20make%20sure%20the%20user%20had%20supplied%20a%20renderer%2E%20If%20you%27re%0A%20%20%20%20%2F%2Fusing%20Pixi%2C%20this%20should%20be%20the%20instantiated%20%60renderer%60%20object%0A%20%20%20%20%2F%2Fthat%20you%20created%20in%20your%20main%20application%0A%20%20%20%20if%20%28options%2Erenderer%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Please%20assign%20a%20renderer%20object%20as%20Smoothie%27s%20renderer%20option%22%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this%2Erenderer%20%3D%20options%2Erenderer%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FCheck%20to%20make%20sure%20the%20user%20has%20supplied%20a%20root%20container%2E%20This%0A%20%20%20%20%2F%2Fis%20the%20object%20is%20at%20the%20top%20of%20the%20display%20list%20heirarchy%2E%20If%0A%20%20%20%20%2F%2Fyou%27re%20using%20Pixi%2C%20it%20would%20be%20a%20%60Container%60%20object%2C%20often%20by%0A%20%20%20%20%2F%2Fconvention%20called%20the%20%60stage%60%0A%20%20%20%20if%20%28options%2Eroot%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Please%20assign%20a%20root%20container%20object%20%28the%20stage%29%20as%20Smoothie%27s%20rootr%20option%22%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this%2Estage%20%3D%20options%2Eroot%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28options%2Eupdate%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Please%20assign%20a%20function%20that%20you%20want%20to%20update%20on%20each%20frame%20as%20Smoothie%27s%20update%20option%22%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this%2Eupdate%20%3D%20options%2Eupdate%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FDefine%20the%20sprite%20properties%20that%20should%20be%20interpolated%0A%20%20%20%20if%20%28options%2Eproperties%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20this%2Eproperties%20%3D%20%7B%20position%3A%20true%2C%20rotation%3A%20true%20%7D%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this%2Eproperties%20%3D%20options%2Eproperties%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20upper%2Dlimit%20frames%20per%20second%20that%20the%20game%27%20logic%20update%0A%20%20%20%20%2F%2Ffunction%20should%20run%20at%2E%0A%20%20%20%20%2F%2FSmoothie%20defaults%20to%2060%20fps%2E%0A%20%20%20%20if%20%28options%2Efps%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20this%2E%5Ffps%20%3D%20options%2Efps%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this%2E%5Ffps%20%3D%20undefined%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FOptionally%20Clamp%20the%20upper%2Dlimit%20frame%20rate%20at%20which%20sprites%20should%20render%0A%20%20%20%20if%20%28options%2ErenderFps%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20this%2E%5FrenderFps%20%3D%20options%2ErenderFps%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this%2E%5FrenderFps%20%3D%20undefined%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2FSet%20sprite%20rendering%20position%20interpolation%20to%0A%20%20%20%20%2F%2F%60true%60%20by%20default%0A%20%20%20%20if%20%28options%2Einterpolate%20%3D%3D%3D%20false%29%20%7B%0A%20%20%20%20%20%20this%2Einterpolate%20%3D%20false%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this%2Einterpolate%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FA%20variable%20that%20can%20be%20used%20to%20pause%20and%20play%20Smoothie%0A%20%20%20%20this%2Epaused%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2FPrivate%20properties%20used%20to%20set%20the%20frame%20rate%20and%20figure%20out%20the%20interpolation%20values%0A%20%20%20%20this%2E%5FstartTime%20%3D%20Date%2Enow%28%29%3B%0A%20%20%20%20this%2E%5FframeDuration%20%3D%201000%20%2F%20this%2E%5Ffps%3B%0A%20%20%20%20this%2E%5Flag%20%3D%200%3B%0A%20%20%20%20this%2E%5FlagOffset%20%3D%200%3B%0A%0A%20%20%20%20this%2E%5FrenderStartTime%20%3D%200%3B%0A%20%20%20%20if%20%28this%2E%5FrenderFps%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20this%2E%5FrenderDuration%20%3D%201000%20%2F%20this%2E%5FrenderFps%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2FGetters%20and%20setters%0A%0A%20%20%2F%2FFps%0A%0A%20%20%5FcreateClass%28Smoothie%2C%20%5B%7B%0A%20%20%20%20key%3A%20%22pause%22%2C%0A%0A%20%20%20%20%2F%2FMethods%20to%20pause%20and%20resume%20Smoothie%0A%20%20%20%20value%3A%20function%20pause%28%29%20%7B%0A%20%20%20%20%20%20this%2Epaused%20%3D%20true%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22resume%22%2C%0A%20%20%20%20value%3A%20function%20resume%28%29%20%7B%0A%20%20%20%20%20%20this%2Epaused%20%3D%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20%60start%60%20method%20gets%20Smoothie%27s%20game%20loop%20running%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22start%22%2C%0A%20%20%20%20value%3A%20function%20start%28%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FStart%20the%20game%20loop%0A%20%20%20%20%20%20this%2EgameLoop%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20core%20game%20loop%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22gameLoop%22%2C%0A%20%20%20%20value%3A%20function%20gameLoop%28timestamp%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis%20%3D%20this%3B%0A%0A%20%20%20%20%20%20requestAnimationFrame%28this%2EgameLoop%2Ebind%28this%29%29%3B%0A%0A%20%20%20%20%20%20%2F%2FOnly%20run%20if%20Smoothie%20isn%27t%20paused%0A%20%20%20%20%20%20if%20%28%21this%2Epaused%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20%60interpolate%60%20function%20updates%20the%20logic%20function%20at%20the%0A%20%20%20%20%20%20%20%20%2F%2Fsame%20rate%20as%20the%20user%2Ddefined%20fps%2C%20renders%20the%20sprites%2C%20with%0A%20%20%20%20%20%20%20%20%2F%2Finterpolation%2C%20at%20the%20maximum%20frame%20rate%20the%20system%20is%20capbale%0A%20%20%20%20%20%20%20%20%2F%2Fof%0A%0A%20%20%20%20%20%20%20%20var%20interpolate%20%3D%20function%20interpolate%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCalculate%20the%20time%20that%20has%20elapsed%20since%20the%20last%20frame%0A%20%20%20%20%20%20%20%20%20%20var%20current%20%3D%20Date%2Enow%28%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20elapsed%20%3D%20current%20%2D%20%5Fthis%2E%5FstartTime%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCatch%20any%20unexpectedly%20large%20frame%20rate%20spikes%0A%20%20%20%20%20%20%20%20%20%20if%20%28elapsed%20%3E%201000%29%20elapsed%20%3D%20%5Fthis%2E%5FframeDuration%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFor%20interpolation%3A%0A%20%20%20%20%20%20%20%20%20%20%5Fthis%2E%5FstartTime%20%3D%20current%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20elapsed%20time%20to%20the%20lag%20counter%0A%20%20%20%20%20%20%20%20%20%20%5Fthis%2E%5Flag%20%2B%3D%20elapsed%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FUpdate%20the%20frame%20if%20the%20lag%20counter%20is%20greater%20than%20or%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fequal%20to%20the%20frame%20duration%0A%20%20%20%20%20%20%20%20%20%20while%20%28%5Fthis%2E%5Flag%20%3E%3D%20%5Fthis%2E%5FframeDuration%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCapture%20the%20sprites%27%20previous%20properties%20for%20rendering%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Finterpolation%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis%2EcapturePreviousSpriteProperties%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FUpdate%20the%20logic%20in%20the%20user%2Ddefined%20update%20function%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis%2Eupdate%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FReduce%20the%20lag%20counter%20by%20the%20frame%20duration%0A%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis%2E%5Flag%20%2D%3D%20%5Fthis%2E%5FframeDuration%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCalculate%20the%20lag%20offset%20and%20use%20it%20to%20render%20the%20sprites%0A%20%20%20%20%20%20%20%20%20%20%5Fthis%2E%5FlagOffset%20%3D%20%5Fthis%2E%5Flag%20%2F%20%5Fthis%2E%5FframeDuration%3B%0A%20%20%20%20%20%20%20%20%20%20%5Fthis%2Erender%28%5Fthis%2E%5FlagOffset%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20%60fps%60%20hasn%27t%20been%20defined%2C%20call%20the%20user%2Ddefined%20update%0A%20%20%20%20%20%20%20%20%2F%2Ffunction%20and%20render%20the%20sprites%20at%20the%20maximum%20rate%20the%0A%20%20%20%20%20%20%20%20%2F%2Fsystem%20is%20capable%20of%0A%20%20%20%20%20%20%20%20if%20%28this%2E%5Ffps%20%3D%3D%3D%20undefined%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FRun%20the%20user%2Ddefined%20game%20logic%20function%20each%20frame%20of%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fgame%20at%20the%20maxium%20frame%20rate%20your%20system%20is%20capable%20of%0A%20%20%20%20%20%20%20%20%20%20this%2Eupdate%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20this%2Erender%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28this%2E%5FrenderFps%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20interpolate%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FImplement%20optional%20frame%20rate%20rendering%20clamping%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28timestamp%20%3E%3D%20this%2E%5FrenderStartTime%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FUpdate%20the%20current%20logic%20frame%20and%20render%20with%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Finterpolation%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20interpolate%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FReset%20the%20frame%20render%20start%20time%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5FrenderStartTime%20%3D%20timestamp%20%2B%20this%2E%5FrenderDuration%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60capturePreviousSpritePositions%60%0A%20%20%20%20%2F%2FThis%20function%20is%20run%20in%20the%20game%20loop%20just%20before%20the%20logic%20update%0A%20%20%20%20%2F%2Fto%20store%20all%20the%20sprites%27%20previous%20positions%20from%20the%20last%20frame%2E%0A%20%20%20%20%2F%2FIt%20allows%20the%20render%20function%20to%20interpolate%20the%20sprite%20positions%0A%20%20%20%20%2F%2Ffor%20ultra%2Dsmooth%20sprite%20rendering%20at%20any%20frame%20rate%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22capturePreviousSpriteProperties%22%2C%0A%20%20%20%20value%3A%20function%20capturePreviousSpriteProperties%28%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis2%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FA%20function%20that%20capture%27s%20the%20sprites%20properties%0A%20%20%20%20%20%20var%20setProperties%20%3D%20function%20setProperties%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%5Fthis2%2Eproperties%2Eposition%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousX%20%3D%20sprite%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousY%20%3D%20sprite%2Ey%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%5Fthis2%2Eproperties%2Erotation%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousRotation%20%3D%20sprite%2Erotation%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%5Fthis2%2Eproperties%2Esize%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousWidth%20%3D%20sprite%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousHeight%20%3D%20sprite%2Eheight%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%5Fthis2%2Eproperties%2Escale%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousScaleX%20%3D%20sprite%2Escale%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousScaleY%20%3D%20sprite%2Escale%2Ey%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%5Fthis2%2Eproperties%2Ealpha%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousAlpha%20%3D%20sprite%2Ealpha%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%5Fthis2%2Eproperties%2Etile%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2EtilePosition%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousTilePositionX%20%3D%20sprite%2EtilePosition%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousTilePositionY%20%3D%20sprite%2EtilePosition%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2EtileScale%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousTileScaleX%20%3D%20sprite%2EtileScale%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FpreviousTileScaleY%20%3D%20sprite%2EtileScale%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28sprite%2Echildren%20%26%26%20sprite%2Echildren%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20sprite%2Echildren%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20child%20%3D%20sprite%2Echildren%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20setProperties%28child%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2Floop%20through%20the%20all%20the%20sprites%20and%20capture%20their%20properties%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Estage%2Echildren%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20var%20sprite%20%3D%20this%2Estage%2Echildren%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20setProperties%28sprite%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FSmoothie%27s%20%60render%60%20method%20will%20interpolate%20the%20sprite%20positions%20and%0A%20%20%20%20%2F%2Frotation%20for%0A%20%20%20%20%2F%2Fultra%2Dsmooth%20animation%2C%20if%20Hexi%27s%20%60interpolate%60%20property%20is%20%60true%60%0A%20%20%20%20%2F%2F%28it%20is%20by%20default%29%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22render%22%2C%0A%20%20%20%20value%3A%20function%20render%28%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis3%20%3D%20this%3B%0A%0A%20%20%20%20%20%20var%20lagOffset%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%201%20%3A%20arguments%5B0%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FCalculate%20the%20sprites%27%20interpolated%20render%20positions%20if%0A%20%20%20%20%20%20%2F%2F%60this%2Einterpolate%60%20is%20%60true%60%20%28It%20is%20true%20by%20default%29%0A%0A%20%20%20%20%20%20if%20%28this%2Einterpolate%29%20%7B%0A%20%20%20%20%20%20%20%20%28function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FA%20recursive%20function%20that%20does%20the%20work%20of%20figuring%20out%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2Finterpolated%20positions%0A%20%20%20%20%20%20%20%20%20%20var%20interpolateSprite%20%3D%20function%20interpolateSprite%28sprite%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FPosition%20%28%60x%60%20and%20%60y%60%20properties%29%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Eposition%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCapture%20the%20sprite%27s%20current%20x%20and%20y%20positions%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentX%20%3D%20sprite%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentY%20%3D%20sprite%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20its%20interpolated%20positions%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousX%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20%28sprite%2Ex%20%2D%20sprite%2E%5FpreviousX%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousY%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20%28sprite%2Ey%20%2D%20sprite%2E%5FpreviousY%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FRotation%20%28%60rotation%60%20property%29%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Erotation%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCapture%20the%20sprite%27s%20current%20rotation%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentRotation%20%3D%20sprite%2Erotation%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20its%20interpolated%20rotation%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousRotation%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Erotation%20%3D%20%28sprite%2Erotation%20%2D%20sprite%2E%5FpreviousRotation%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousRotation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FSize%20%28%60width%60%20and%20%60height%60%20properties%29%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Esize%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FOnly%20allow%20this%20for%20Sprites%20or%20MovieClips%2E%20Because%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FContainers%20vary%20in%20size%20when%20the%20sprites%20they%20contain%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fmove%2C%20the%20interpolation%20will%20cause%20them%20to%20scale%20erraticly%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%20instanceof%20%5Fthis3%2ESprite%20%7C%7C%20sprite%20instanceof%20%5Fthis3%2EMovieClip%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCapture%20the%20sprite%27s%20current%20size%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentWidth%20%3D%20sprite%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentHeight%20%3D%20sprite%2Eheight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20the%20sprite%27s%20interpolated%20size%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousWidth%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ewidth%20%3D%20%28sprite%2Ewidth%20%2D%20sprite%2E%5FpreviousWidth%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousWidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousHeight%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Eheight%20%3D%20%28sprite%2Eheight%20%2D%20sprite%2E%5FpreviousHeight%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousHeight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FScale%20%28%60scale%2Ex%60%20and%20%60scale%2Ey%60%20properties%29%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Escale%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCapture%20the%20sprite%27s%20current%20scale%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentScaleX%20%3D%20sprite%2Escale%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentScaleY%20%3D%20sprite%2Escale%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20the%20sprite%27s%20interpolated%20scale%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousScaleX%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Escale%2Ex%20%3D%20%28sprite%2Escale%2Ex%20%2D%20sprite%2E%5FpreviousScaleX%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousScaleX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousScaleY%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Escale%2Ey%20%3D%20%28sprite%2Escale%2Ey%20%2D%20sprite%2E%5FpreviousScaleY%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousScaleY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FAlpha%20%28%60alpha%60%20property%29%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Ealpha%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCapture%20the%20sprite%27s%20current%20alpha%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentAlpha%20%3D%20sprite%2Ealpha%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20its%20interpolated%20alpha%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousAlpha%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ealpha%20%3D%20%28sprite%2Ealpha%20%2D%20sprite%2E%5FpreviousAlpha%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FTiling%20sprite%20properties%20%28%60tileposition%60%20and%20%60tileScale%60%20x%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fand%20y%20values%29%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Etile%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%60tilePosition%2Ex%60%20and%20%60tilePosition%2Ey%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2EtilePosition%20%21%3D%3D%20undefined%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCapture%20the%20sprite%27s%20current%20tile%20x%20and%20y%20positions%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentTilePositionX%20%3D%20sprite%2EtilePosition%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentTilePositionY%20%3D%20sprite%2EtilePosition%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20its%20interpolated%20positions%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousTilePositionX%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EtilePosition%2Ex%20%3D%20%28sprite%2EtilePosition%2Ex%20%2D%20sprite%2E%5FpreviousTilePositionX%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousTilePositionX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousTilePositionY%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EtilePosition%2Ey%20%3D%20%28sprite%2EtilePosition%2Ey%20%2D%20sprite%2E%5FpreviousTilePositionY%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousTilePositionY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%60tileScale%2Ex%60%20and%20%60tileScale%2Ey%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2EtileScale%20%21%3D%3D%20undefined%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCapture%20the%20sprite%27s%20current%20tile%20scale%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentTileScaleX%20%3D%20sprite%2EtileScale%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2E%5FcurrentTileScaleY%20%3D%20sprite%2EtileScale%2Ey%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20the%20sprite%27s%20interpolated%20scale%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousTileScaleX%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EtileScale%2Ex%20%3D%20%28sprite%2EtileScale%2Ex%20%2D%20sprite%2E%5FpreviousTileScaleX%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousTileScaleX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2E%5FpreviousTileScaleY%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EtileScale%2Ey%20%3D%20%28sprite%2EtileScale%2Ey%20%2D%20sprite%2E%5FpreviousTileScaleY%29%20%2A%20lagOffset%20%2B%20sprite%2E%5FpreviousTileScaleY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FInterpolate%20the%20sprite%27s%20children%2C%20if%20it%20has%20any%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Echildren%2Elength%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%200%3B%20j%20%3C%20sprite%2Echildren%2Elength%3B%20j%2B%2B%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20sprite%27s%20child%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20child%20%3D%20sprite%2Echildren%5Bj%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fdisplay%20the%20child%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20interpolateSprite%28child%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2Floop%20through%20the%20all%20the%20sprites%20and%20interpolate%20them%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20%5Fthis3%2Estage%2Echildren%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20%5Fthis3%2Estage%2Echildren%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20interpolateSprite%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FRender%20the%20stage%2E%20If%20the%20sprite%20positions%20have%20been%0A%20%20%20%20%20%20%2F%2Finterpolated%2C%20those%20position%20values%20will%20be%20used%20to%20render%20the%0A%20%20%20%20%20%20%2F%2Fsprite%0A%20%20%20%20%20%20this%2Erenderer%2Erender%28this%2Estage%29%3B%0A%0A%20%20%20%20%20%20%2F%2FRestore%20the%20sprites%27%20original%20x%20and%20y%20values%20if%20they%27ve%20been%0A%20%20%20%20%20%20%2F%2Finterpolated%20for%20this%20frame%0A%20%20%20%20%20%20if%20%28this%2Einterpolate%29%20%7B%0A%20%20%20%20%20%20%20%20%28function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FA%20recursive%20function%20that%20restores%20the%20sprite%27s%20original%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2Funinterpolated%20x%20and%20y%20positions%0A%20%20%20%20%20%20%20%20%20%20var%20restoreSpriteProperties%20%3D%20function%20restoreSpriteProperties%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Eposition%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ex%20%3D%20sprite%2E%5FcurrentX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ey%20%3D%20sprite%2E%5FcurrentY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Erotation%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Erotation%20%3D%20sprite%2E%5FcurrentRotation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Esize%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FOnly%20allow%20this%20for%20Sprites%20or%20Movie%20clips%2C%20to%20prevent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FContainer%20scaling%20bug%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%20instanceof%20%5Fthis3%2ESprite%20%7C%7C%20sprite%20instanceof%20%5Fthis3%2EMovieClip%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ewidth%20%3D%20sprite%2E%5FcurrentWidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Eheight%20%3D%20sprite%2E%5FcurrentHeight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Escale%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Escale%2Ex%20%3D%20sprite%2E%5FcurrentScaleX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Escale%2Ey%20%3D%20sprite%2E%5FcurrentScaleY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Ealpha%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Ealpha%20%3D%20sprite%2E%5FcurrentAlpha%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis3%2Eproperties%2Etile%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2EtilePosition%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EtilePosition%2Ex%20%3D%20sprite%2E%5FcurrentTilePositionX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EtilePosition%2Ey%20%3D%20sprite%2E%5FcurrentTilePositionY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2EtileScale%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EtileScale%2Ex%20%3D%20sprite%2E%5FcurrentTileScaleX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EtileScale%2Ey%20%3D%20sprite%2E%5FcurrentTileScaleY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FRestore%20the%20sprite%27s%20children%2C%20if%20it%20has%20any%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sprite%2Echildren%2Elength%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20sprite%2Echildren%2Elength%3B%20i%2B%2B%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20sprite%27s%20child%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20child%20%3D%20sprite%2Echildren%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FRestore%20the%20child%20sprite%20properties%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20restoreSpriteProperties%28child%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20%5Fthis3%2Estage%2Echildren%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20%5Fthis3%2Estage%2Echildren%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20restoreSpriteProperties%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22fps%22%2C%0A%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5Ffps%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20this%2E%5Ffps%20%3D%20value%3B%0A%20%20%20%20%20%20this%2E%5FframeDuration%20%3D%201000%20%2F%20this%2E%5Ffps%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FrenderFps%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22renderFps%22%2C%0A%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5FrenderFps%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20this%2E%5FrenderFps%20%3D%20value%3B%0A%20%20%20%20%20%20this%2E%5FrenderDuration%20%3D%201000%20%2F%20this%2E%5FrenderFps%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60dt%60%20%28Delta%20time%2C%20the%20%60this%2E%5FlagOffset%60%20value%20in%20Smoothie%27s%20code%29%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22dt%22%2C%0A%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5FlagOffset%3B%0A%20%20%20%20%7D%0A%20%20%7D%5D%29%3B%0A%0A%20%20return%20Smoothie%3B%0A%7D%29%28%29%3B%0A%2F%2F%23%20sourceMappingURL%3Dsmoothie%2Ejs%2Emap%22use%20strict%22%3B%0A%0Avar%20%5FcreateClass%20%3D%20%28function%20%28%29%20%7B%20function%20defineProperties%28target%2C%20props%29%20%7B%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20props%2Elength%3B%20i%2B%2B%29%20%7B%20var%20descriptor%20%3D%20props%5Bi%5D%3B%20descriptor%2Eenumerable%20%3D%20descriptor%2Eenumerable%20%7C%7C%20false%3B%20descriptor%2Econfigurable%20%3D%20true%3B%20if%20%28%22value%22%20in%20descriptor%29%20descriptor%2Ewritable%20%3D%20true%3B%20Object%2EdefineProperty%28target%2C%20descriptor%2Ekey%2C%20descriptor%29%3B%20%7D%20%7D%20return%20function%20%28Constructor%2C%20protoProps%2C%20staticProps%29%20%7B%20if%20%28protoProps%29%20defineProperties%28Constructor%2Eprototype%2C%20protoProps%29%3B%20if%20%28staticProps%29%20defineProperties%28Constructor%2C%20staticProps%29%3B%20return%20Constructor%3B%20%7D%3B%20%7D%29%28%29%3B%0A%0Afunction%20%5FclassCallCheck%28instance%2C%20Constructor%29%20%7B%20if%20%28%21%28instance%20instanceof%20Constructor%29%29%20%7B%20throw%20new%20TypeError%28%22Cannot%20call%20a%20class%20as%20a%20function%22%29%3B%20%7D%20%7D%0A%0A%2F%2FThe%20Fullscreen%20API%20is%20in%20flux%20and%20has%20a%20quirky%20browser%0A%2F%2Fimplementations%2E%20Here%27s%20a%20fix%20for%20it%2C%20thanks%20to%20Norman%20Paschke%3A%0A%0A%28function%20%28doc%29%20%7B%0A%20%20%2F%2F%20Use%20JavaScript%20script%20mode%0A%20%20%22use%20strict%22%0A%0A%20%20%2F%2Aglobal%20Element%20%2A%2F%0A%0A%20%20%3B%0A%20%20var%20pollute%20%3D%20true%2C%0A%20%20%20%20%20%20api%2C%0A%20%20%20%20%20%20vendor%2C%0A%20%20%20%20%20%20apis%20%3D%20%7B%0A%20%20%20%20%2F%2F%20http%3A%2F%2Fdvcs%2Ew3%2Eorg%2Fhg%2Ffullscreen%2Fraw%2Dfile%2Ftip%2FOverview%2Ehtml%0A%20%20%20%20w3%3A%20%7B%0A%20%20%20%20%20%20enabled%3A%20%22fullscreenEnabled%22%2C%0A%20%20%20%20%20%20element%3A%20%22fullscreenElement%22%2C%0A%20%20%20%20%20%20request%3A%20%22requestFullscreen%22%2C%0A%20%20%20%20%20%20exit%3A%20%22exitFullscreen%22%2C%0A%20%20%20%20%20%20events%3A%20%7B%0A%20%20%20%20%20%20%20%20change%3A%20%22fullscreenchange%22%2C%0A%20%20%20%20%20%20%20%20error%3A%20%22fullscreenerror%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20webkit%3A%20%7B%0A%20%20%20%20%20%20enabled%3A%20%22webkitIsFullScreen%22%2C%0A%20%20%20%20%20%20element%3A%20%22webkitCurrentFullScreenElement%22%2C%0A%20%20%20%20%20%20request%3A%20%22webkitRequestFullScreen%22%2C%0A%20%20%20%20%20%20exit%3A%20%22webkitCancelFullScreen%22%2C%0A%20%20%20%20%20%20events%3A%20%7B%0A%20%20%20%20%20%20%20%20change%3A%20%22webkitfullscreenchange%22%2C%0A%20%20%20%20%20%20%20%20error%3A%20%22webkitfullscreenerror%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20moz%3A%20%7B%0A%20%20%20%20%20%20enabled%3A%20%22mozFullScreenEnabled%22%2C%0A%20%20%20%20%20%20element%3A%20%22mozFullScreenElement%22%2C%0A%20%20%20%20%20%20request%3A%20%22mozRequestFullScreen%22%2C%0A%20%20%20%20%20%20exit%3A%20%22mozCancelFullScreen%22%2C%0A%20%20%20%20%20%20events%3A%20%7B%0A%20%20%20%20%20%20%20%20change%3A%20%22mozfullscreenchange%22%2C%0A%20%20%20%20%20%20%20%20error%3A%20%22mozfullscreenerror%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20ms%3A%20%7B%0A%20%20%20%20%20%20enabled%3A%20%22msFullscreenEnabled%22%2C%0A%20%20%20%20%20%20element%3A%20%22msFullscreenElement%22%2C%0A%20%20%20%20%20%20request%3A%20%22msRequestFullscreen%22%2C%0A%20%20%20%20%20%20exit%3A%20%22msExitFullscreen%22%2C%0A%20%20%20%20%20%20events%3A%20%7B%0A%20%20%20%20%20%20%20%20change%3A%20%22MSFullscreenChange%22%2C%0A%20%20%20%20%20%20%20%20error%3A%20%22MSFullscreenError%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20%20%20%20%20w3%20%3D%20apis%2Ew3%3B%0A%0A%20%20%2F%2F%20Loop%20through%20each%20vendor%27s%20specific%20API%0A%20%20for%20%28vendor%20in%20apis%29%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20document%20has%20the%20%22enabled%22%20property%0A%20%20%20%20if%20%28apis%5Bvendor%5D%2Eenabled%20in%20doc%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20It%20seems%20this%20browser%20support%20the%20fullscreen%20API%0A%20%20%20%20%20%20api%20%3D%20apis%5Bvendor%5D%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20dispatch%28type%2C%20target%29%20%7B%0A%20%20%20%20var%20event%20%3D%20doc%2EcreateEvent%28%22Event%22%29%3B%0A%0A%20%20%20%20event%2EinitEvent%28type%2C%20true%2C%20false%29%3B%0A%20%20%20%20target%2EdispatchEvent%28event%29%3B%0A%20%20%7D%20%2F%2F%20end%20of%20dispatch%28%29%0A%0A%20%20function%20handleChange%28e%29%20%7B%0A%20%20%20%20%2F%2F%20Recopy%20the%20enabled%20and%20element%20values%0A%20%20%20%20doc%5Bw3%2Eenabled%5D%20%3D%20doc%5Bapi%2Eenabled%5D%3B%0A%20%20%20%20doc%5Bw3%2Eelement%5D%20%3D%20doc%5Bapi%2Eelement%5D%3B%0A%0A%20%20%20%20dispatch%28w3%2Eevents%2Echange%2C%20e%2Etarget%29%3B%0A%20%20%7D%20%2F%2F%20end%20of%20handleChange%28%29%0A%0A%20%20function%20handleError%28e%29%20%7B%0A%20%20%20%20dispatch%28w3%2Eevents%2Eerror%2C%20e%2Etarget%29%3B%0A%20%20%7D%20%2F%2F%20end%20of%20handleError%28%29%0A%0A%20%20%2F%2F%20Pollute%20only%20if%20the%20API%20doesn%27t%20already%20exists%0A%20%20if%20%28pollute%20%26%26%20%21%28w3%2Eenabled%20in%20doc%29%20%26%26%20api%29%20%7B%0A%20%20%20%20%2F%2F%20Add%20listeners%20for%20fullscreen%20events%0A%20%20%20%20doc%2EaddEventListener%28api%2Eevents%2Echange%2C%20handleChange%2C%20false%29%3B%0A%20%20%20%20doc%2EaddEventListener%28api%2Eevents%2Eerror%2C%20handleError%2C%20false%29%3B%0A%0A%20%20%20%20%2F%2F%20Copy%20the%20default%20value%0A%20%20%20%20doc%5Bw3%2Eenabled%5D%20%3D%20doc%5Bapi%2Eenabled%5D%3B%0A%20%20%20%20doc%5Bw3%2Eelement%5D%20%3D%20doc%5Bapi%2Eelement%5D%3B%0A%0A%20%20%20%20%2F%2F%20Match%20the%20reference%20for%20exitFullscreen%0A%20%20%20%20doc%5Bw3%2Eexit%5D%20%3D%20doc%5Bapi%2Eexit%5D%3B%0A%0A%20%20%20%20%2F%2F%20Add%20the%20request%20method%20to%20the%20Element%27s%20prototype%0A%20%20%20%20Element%2Eprototype%5Bw3%2Erequest%5D%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20return%20this%5Bapi%2Erequest%5D%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Return%20the%20API%20found%20%28or%20undefined%20if%20the%20Fullscreen%20API%20is%20unavailable%29%0A%20%20return%20api%3B%0A%7D%29%28document%29%3B%0A%0A%2F%2FHere%27s%20the%20FullScreen%20class%2C%20which%20contains%20all%20the%20relevant%0A%2F%2Fapplication%20code%0A%0Avar%20FullScreen%20%3D%20%28function%20%28%29%20%7B%0A%20%20function%20FullScreen%28element%29%20%7B%0A%20%20%20%20%5FclassCallCheck%28this%2C%20FullScreen%29%3B%0A%0A%20%20%20%20this%2Eelement%20%3D%20element%3B%0A%20%20%20%20this%2EfullScreenScale%20%3D%201%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%60requestFullScreen%60%20is%20used%20by%20%60enableFullScreen%60%20to%20launch%0A%20%20%2F%2Ffullscreen%20mode%2E%0A%0A%20%20%5FcreateClass%28FullScreen%2C%20%5B%7B%0A%20%20%20%20key%3A%20%22requestFullScreen%22%2C%0A%20%20%20%20value%3A%20function%20requestFullScreen%28%29%20%7B%0A%20%20%20%20%20%20if%20%28%21document%2EfullscreenEnabled%29%20%7B%0A%20%20%20%20%20%20%20%20console%2Elog%28this%2Eelement%29%3B%0A%20%20%20%20%20%20%20%20this%2Eelement%2ErequestFullscreen%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22exitFullScreen%22%2C%0A%0A%20%20%20%20%2F%2F%60exitFullScreen%60%20is%20used%20by%20%60enableFullScreen%60%20to%20exit%0A%20%20%20%20%2F%2Ffullscreen%20mode%2E%0A%20%20%20%20value%3A%20function%20exitFullScreen%28%29%20%7B%0A%20%20%20%20%20%20if%20%28document%2EfullscreenEnabled%29%20%7B%0A%20%20%20%20%20%20%20%20document%2EexitFullscreen%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22alignFullScreen%22%2C%0A%0A%20%20%20%20%2F%2F%60alignFullScreen%60%20is%20called%20by%20%60enableFullScreen%60%20to%20center%20and%0A%20%20%20%20%2F%2Falign%20the%20element%20vertically%20or%20horizontally%20inside%20the%20users%0A%20%20%20%20%2F%2Fscreen%2E%20It%20also%20sets%20%60this%2EfullScreenScale%60%20which%20can%20optionally%0A%20%20%20%20%2F%2Fbe%20used%20by%20your%20application%20for%20setting%20things%20like%20the%20pointer%27s%0A%20%20%20%20%2F%2Fscale%0A%20%20%20%20value%3A%20function%20alignFullScreen%28%29%20%7B%0A%20%20%20%20%20%20var%20scaleX%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20scaleY%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FScale%20the%20element%20to%20the%20correct%20size%2E%0A%20%20%20%20%20%20%2F%2FFigure%20out%20the%20scale%20amount%20on%20each%20axis%2E%0A%20%20%20%20%20%20scaleX%20%3D%20screen%2Ewidth%20%2F%20this%2Eelement%2Ewidth%3B%0A%20%20%20%20%20%20scaleY%20%3D%20screen%2Eheight%20%2F%20this%2Eelement%2Eheight%3B%0A%0A%20%20%20%20%20%20%2F%2FSet%20the%20scale%20based%20on%20whichever%20value%20is%20less%3A%20%60scaleX%60%20or%20%60scaleY%60%2E%0A%20%20%20%20%20%20this%2EfullScreenScale%20%3D%20Math%2Emin%28scaleX%2C%20scaleY%29%3B%0A%0A%20%20%20%20%20%20%2F%2FTo%20center%20the%20element%20we%20need%20to%20inject%20some%20CSS%0A%20%20%20%20%20%20%2F%2Fand%20into%20the%20HTML%20document%27s%20%60%3Cstyle%3E%60%20tag%2E%20Some%0A%20%20%20%20%20%20%2F%2Fbrowsers%20require%20an%20existing%20%60%3Cstyle%3E%60%20tag%20to%20do%20this%2C%20so%0A%20%20%20%20%20%20%2F%2Fif%20no%20%60%3Cstyle%3E%60%20tag%20already%20exists%2C%20let%27s%20create%20one%20and%0A%20%20%20%20%20%20%2F%2Fappend%20it%20to%20the%20%60%3Cbody%3E%3A%0A%20%20%20%20%20%20var%20styleSheets%20%3D%20document%2EstyleSheets%3B%0A%20%20%20%20%20%20if%20%28styleSheets%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20var%20divNode%20%3D%20document%2EcreateElement%28%22div%22%29%3B%0A%20%20%20%20%20%20%20%20divNode%2EinnerHTML%20%3D%20%22%3Cstyle%3E%3C%2Fstyle%3E%22%3B%0A%20%20%20%20%20%20%20%20document%2Ebody%2EappendChild%28divNode%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FUnfortunately%20we%20also%20need%20to%20do%20some%20browser%20detection%0A%20%20%20%20%20%20%2F%2Fto%20inject%20the%20full%20screen%20CSS%20with%20the%20correct%20vendor%0A%20%20%20%20%20%20%2F%2Fprefix%2E%20So%2C%20let%27s%20find%20out%20what%20the%20%60userAgent%60%20is%2E%0A%20%20%20%20%20%20%2F%2F%60ua%60%20will%20be%20an%20array%20containing%20lower%2Dcase%20browser%20names%2E%0A%20%20%20%20%20%20var%20ua%20%3D%20navigator%2EuserAgent%2EtoLowerCase%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FNow%20Decide%20whether%20to%20center%20the%20canvas%20vertically%20or%20horizontally%2E%0A%20%20%20%20%20%20%2F%2FWide%20canvases%20should%20be%20centered%20vertically%2C%20and%0A%20%20%20%20%20%20%2F%2Fsquare%20or%20tall%20canvases%20should%20be%20centered%20horizontally%2E%0A%0A%20%20%20%20%20%20if%20%28this%2Eelement%2Ewidth%20%3E%20this%2Eelement%2Eheight%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCenter%20vertically%2E%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20CSS%20to%20the%20stylesheet%20to%20center%20the%20canvas%20vertically%2E%0A%20%20%20%20%20%20%20%20%2F%2FYou%20need%20a%20version%20for%20each%20browser%20vendor%2C%20plus%20a%20generic%0A%20%20%20%20%20%20%20%20%2F%2Fversion%0A%20%20%20%20%20%20%20%20%2F%2F%28Unfortunately%20the%20CSS%20string%20cannot%20include%20line%20breaks%2C%20so%0A%20%20%20%20%20%20%20%20%2F%2Fit%20all%20has%20to%20be%20on%20one%20long%20line%2E%29%0A%20%20%20%20%20%20%20%20if%20%28ua%2EindexOf%28%22safari%22%29%20%21%3D%3D%20%2D1%20%7C%7C%20ua%2EindexOf%28%22chrome%22%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20document%2EstyleSheets%5B0%5D%2EinsertRule%28%22canvas%3A%2Dwebkit%2Dfull%2Dscreen%20%7Bposition%3A%20fixed%3B%20width%3A%20100%25%3B%20height%3A%20auto%3B%20top%3A%200%3B%20right%3A%200%3B%20bottom%3A%200%3B%20left%3A%200%3B%20margin%3A%20auto%3B%20object%2Dfit%3A%20contain%7D%22%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28ua%2EindexOf%28%22firefox%22%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20document%2EstyleSheets%5B0%5D%2EinsertRule%28%22canvas%3A%2Dmoz%2Dfull%2Dscreen%20%7Bposition%3A%20fixed%3B%20width%3A%20100%25%3B%20height%3A%20auto%3B%20top%3A%200%3B%20right%3A%200%3B%20bottom%3A%200%3B%20left%3A%200%3B%20margin%3A%20auto%3B%20object%2Dfit%3A%20contain%3B%7D%22%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28ua%2EindexOf%28%22opera%22%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20document%2EstyleSheets%5B0%5D%2EinsertRule%28%22canvas%3A%2Do%2Dfull%2Dscreen%20%7Bposition%3A%20fixed%3B%20width%3A%20100%25%3B%20height%3A%20auto%3B%20top%3A%200%3B%20right%3A%200%3B%20bottom%3A%200%3B%20left%3A%200%3B%20margin%3A%20auto%3B%20object%2Dfit%3A%20contain%3B%7D%22%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28ua%2EindexOf%28%22explorer%22%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20document%2EstyleSheets%5B0%5D%2EinsertRule%28%22canvas%3A%2Dms%2Dfull%2Dscreen%20%7Bposition%3A%20fixed%3B%20width%3A%20100%25%3B%20height%3A%20auto%3B%20top%3A%200%3B%20right%3A%200%3B%20bottom%3A%200%3B%20left%3A%200%3B%20margin%3A%20auto%3B%20object%2Dfit%3A%20contain%3B%7D%22%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20document%2EstyleSheets%5B0%5D%2EinsertRule%28%22canvas%3Afullscreen%20%7Bposition%3A%20fixed%3B%20width%3A%20100%25%3B%20height%3A%20auto%3B%20top%3A%200%3B%20right%3A%200%3B%20bottom%3A%200%3B%20left%3A%200%3B%20margin%3A%20auto%3B%20object%2Dfit%3A%20contain%3B%7D%22%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCenter%20horizontally%2E%0A%20%20%20%20%20%20%20%20if%20%28ua%2EindexOf%28%22safari%22%29%20%21%3D%3D%20%2D1%20%7C%7C%20ua%2EindexOf%28%22chrome%22%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20document%2EstyleSheets%5B0%5D%2EinsertRule%28%22canvas%3A%2Dwebkit%2Dfull%2Dscreen%20%7Bheight%3A%20100%25%3B%20margin%3A%200%20auto%3B%20object%2Dfit%3A%20contain%3B%7D%22%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28ua%2EindexOf%28%22firefox%22%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20document%2EstyleSheets%5B0%5D%2EinsertRule%28%22canvas%3A%2Dmoz%2Dfull%2Dscreen%20%7Bheight%3A%20100%25%3B%20margin%3A%200%20auto%3B%20object%2Dfit%3A%20contain%3B%7D%22%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28ua%2EindexOf%28%22opera%22%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20document%2EstyleSheets%5B0%5D%2EinsertRule%28%22canvas%3A%2Do%2Dfull%2Dscreen%20%7Bheight%3A%20100%25%3B%20margin%3A%200%20auto%3B%20object%2Dfit%3A%20contain%3B%7D%22%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28ua%2EindexOf%28%22msie%22%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20document%2EstyleSheets%5B0%5D%2EinsertRule%28%22canvas%3A%2Dms%2Dfull%2Dscreen%20%7Bheight%3A%20100%25%3B%20margin%3A%200%20auto%3B%20object%2Dfit%3A%20contain%3B%7D%22%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20document%2EstyleSheets%5B0%5D%2EinsertRule%28%22canvas%3Afullscreen%20%7Bheight%3A%20100%25%3B%20margin%3A%200%20auto%3B%20object%2Dfit%3A%20contain%3B%7D%22%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20Use%20%60enableFullScreen%60%20to%20make%20the%20browser%20display%20the%20game%20full%20screen%2E%0A%20%20%20%20It%20automatically%20centers%20the%20game%20canvas%20for%20the%20best%20fit%2E%20Optionally%20supply%20any%20number%20of%20ascii%0A%20%20%20%20keycodes%20as%20arguments%20to%20represent%20the%20keyboard%20keys%20that%20should%20exit%20fullscreen%20mode%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22enableFullScreen%22%2C%0A%20%20%20%20value%3A%20function%20enableFullScreen%28%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FCenter%20and%20align%20the%20fullscreen%20element%2E%0A%20%20%20%20%20%20this%2EalignFullScreen%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20mouse%20and%20touch%20listeners%20to%20the%20canvas%20to%20enable%0A%20%20%20%20%20%20%2F%2Ffullscreen%20mode%2E%0A%20%20%20%20%20%20this%2Eelement%2EaddEventListener%28%22mouseup%22%2C%20this%2ErequestFullScreen%2Ebind%28this%29%2C%20false%29%3B%0A%20%20%20%20%20%20this%2Eelement%2EaddEventListener%28%22touchend%22%2C%20this%2ErequestFullScreen%2Ebind%28this%29%2C%20false%29%3B%0A%0A%20%20%20%20%20%20for%20%28var%20%5Flen%20%3D%20arguments%2Elength%2C%20exitKeyCodes%20%3D%20Array%28%5Flen%29%2C%20%5Fkey%20%3D%200%3B%20%5Fkey%20%3C%20%5Flen%3B%20%5Fkey%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20exitKeyCodes%5B%5Fkey%5D%20%3D%20arguments%5B%5Fkey%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28exitKeyCodes%29%20%7B%0A%20%20%20%20%20%20%20%20exitKeyCodes%2EforEach%28function%20%28keyCode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20window%2EaddEventListener%28%22keyup%22%2C%20function%20%28event%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28event%2EkeyCode%20%3D%3D%3D%20keyCode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis%2EexitFullScreen%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20event%2EpreventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%5D%29%3B%0A%0A%20%20return%20FullScreen%3B%0A%7D%29%28%29%3B%0A%2F%2F%23%20sourceMappingURL%3DfullScreen%2Ejs%2Emap%22use%20strict%22%3B%0A%0Avar%20%5FcreateClass%20%3D%20%28function%20%28%29%20%7B%20function%20defineProperties%28target%2C%20props%29%20%7B%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20props%2Elength%3B%20i%2B%2B%29%20%7B%20var%20descriptor%20%3D%20props%5Bi%5D%3B%20descriptor%2Eenumerable%20%3D%20descriptor%2Eenumerable%20%7C%7C%20false%3B%20descriptor%2Econfigurable%20%3D%20true%3B%20if%20%28%22value%22%20in%20descriptor%29%20descriptor%2Ewritable%20%3D%20true%3B%20Object%2EdefineProperty%28target%2C%20descriptor%2Ekey%2C%20descriptor%29%3B%20%7D%20%7D%20return%20function%20%28Constructor%2C%20protoProps%2C%20staticProps%29%20%7B%20if%20%28protoProps%29%20defineProperties%28Constructor%2Eprototype%2C%20protoProps%29%3B%20if%20%28staticProps%29%20defineProperties%28Constructor%2C%20staticProps%29%3B%20return%20Constructor%3B%20%7D%3B%20%7D%29%28%29%3B%0A%0Afunction%20%5FclassCallCheck%28instance%2C%20Constructor%29%20%7B%20if%20%28%21%28instance%20instanceof%20Constructor%29%29%20%7B%20throw%20new%20TypeError%28%22Cannot%20call%20a%20class%20as%20a%20function%22%29%3B%20%7D%20%7D%0A%0Avar%20TileUtilities%20%3D%20%28function%20%28%29%20%7B%0A%20%20function%20TileUtilities%28%29%20%7B%0A%20%20%20%20var%20renderingEngine%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20PIXI%20%3A%20arguments%5B0%5D%3B%0A%0A%20%20%20%20%5FclassCallCheck%28this%2C%20TileUtilities%29%3B%0A%0A%20%20%20%20if%20%28renderingEngine%20%3D%3D%3D%20undefined%29%20throw%20new%20Error%28%22Please%20assign%20a%20rendering%20engine%20in%20the%20constructor%20before%20using%20bump%2Ejs%22%29%3B%0A%0A%20%20%20%20%2F%2FFind%20out%20which%20rendering%20engine%20is%20being%20used%20%28the%20default%20is%20Pixi%29%0A%20%20%20%20this%2Erenderer%20%3D%20%22%22%3B%0A%0A%20%20%20%20%2F%2FIf%20the%20%60renderingEngine%60%20is%20Pixi%2C%20set%20up%20Pixi%20object%20aliases%0A%20%20%20%20if%20%28renderingEngine%2EParticleContainer%20%26%26%20renderingEngine%2ESprite%29%20%7B%0A%20%20%20%20%20%20this%2ErenderingEngine%20%3D%20renderingEngine%3B%0A%20%20%20%20%20%20this%2Erenderer%20%3D%20%22pixi%22%3B%0A%20%20%20%20%20%20this%2EContainer%20%3D%20this%2ErenderingEngine%2EContainer%3B%0A%20%20%20%20%20%20this%2ETextureCache%20%3D%20this%2ErenderingEngine%2Eutils%2ETextureCache%3B%0A%20%20%20%20%20%20this%2ETexture%20%3D%20this%2ErenderingEngine%2ETexture%3B%0A%20%20%20%20%20%20this%2ESprite%20%3D%20this%2ErenderingEngine%2ESprite%3B%0A%20%20%20%20%20%20this%2ERectangle%20%3D%20this%2ErenderingEngine%2ERectangle%3B%0A%20%20%20%20%20%20this%2EGraphics%20%3D%20this%2ErenderingEngine%2EGraphics%3B%0A%20%20%20%20%20%20this%2Eloader%20%3D%20this%2ErenderingEngine%2Eloader%3B%0A%20%20%20%20%20%20this%2Eresources%20%3D%20this%2ErenderingEngine%2Eloader%2Eresources%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2FMake%20a%20texture%20from%20a%20frame%20in%20another%20texture%20or%20image%0A%0A%20%20%5FcreateClass%28TileUtilities%2C%20%5B%7B%0A%20%20%20%20key%3A%20%22frame%22%2C%0A%20%20%20%20value%3A%20function%20frame%28source%2C%20x%2C%20y%2C%20width%2C%20height%29%20%7B%0A%0A%20%20%20%20%20%20var%20texture%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20imageFrame%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20source%20is%20a%20string%2C%20it%27s%20either%20a%20texture%20in%20the%0A%20%20%20%20%20%20%2F%2Fcache%20or%20an%20image%20file%0A%20%20%20%20%20%20if%20%28typeof%20source%20%3D%3D%3D%20%22string%22%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2ETextureCache%5Bsource%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20texture%20%3D%20new%20this%2ETexture%28this%2ETextureCache%5Bsource%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20%60source%60%20is%20a%20texture%2C%20%20use%20it%0A%20%20%20%20%20%20else%20if%20%28source%20instanceof%20this%2ETexture%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20texture%20%3D%20new%20this%2ETexture%28source%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28%21texture%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%22Please%20load%20the%20%22%20%2B%20source%20%2B%20%22%20texture%20into%20the%20cache%2E%22%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FMake%20a%20rectangle%20the%20size%20of%20the%20sub%2Dimage%0A%20%20%20%20%20%20%20%20imageFrame%20%3D%20new%20this%2ERectangle%28x%2C%20y%2C%20width%2C%20height%29%3B%0A%20%20%20%20%20%20%20%20texture%2Eframe%20%3D%20imageFrame%3B%0A%20%20%20%20%20%20%20%20return%20texture%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%23%23%23%23%20getIndex%0A%20%20%20%20%2F%2FThe%20%60getIndex%60%20helper%20method%0A%20%20%20%20%2F%2Fconverts%20a%20sprite%27s%20x%20and%20y%20position%20to%20an%20array%20index%20number%2E%0A%20%20%20%20%2F%2FIt%20returns%20a%20single%20index%20value%20that%20tells%20you%20the%20map%20array%0A%20%20%20%20%2F%2Findex%20number%20that%20the%20sprite%20is%20in%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22getIndex%22%2C%0A%20%20%20%20value%3A%20function%20getIndex%28x%2C%20y%2C%20tilewidth%2C%20tileheight%2C%20mapWidthInTiles%29%20%7B%0A%20%20%20%20%20%20var%20index%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FConvert%20pixel%20coordinates%20to%20map%20index%20coordinates%0A%20%20%20%20%20%20index%2Ex%20%3D%20Math%2Efloor%28x%20%2F%20tilewidth%29%3B%0A%20%20%20%20%20%20index%2Ey%20%3D%20Math%2Efloor%28y%20%2F%20tileheight%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20index%20number%0A%20%20%20%20%20%20return%20index%2Ex%20%2B%20index%2Ey%20%2A%20mapWidthInTiles%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%23%23%23%23%20getTile%0A%20%20%20%20The%20%60getTile%60%20helper%20method%0A%20%20%20%20converts%20a%20tile%27s%20index%20number%20into%20x%2Fy%20screen%0A%20%20%20%20coordinates%2C%20and%20capture%27s%20the%20tile%27s%20grid%20index%20%28%60gid%60%29%20number%2E%0A%20%20%20%20It%20returns%20an%20object%20with%20%60x%60%2C%20%60y%60%2C%20%60centerX%60%2C%20%60centerY%60%2C%20%60width%60%2C%20%60height%60%2C%20%60halfWidth%60%0A%20%20%20%20%60halffHeight%60%20and%20%60gid%60%20properties%2E%20%28The%20%60gid%60%20number%20is%20the%20value%20that%20the%20tile%20has%20in%20the%0A%20%20%20%20mapArray%29%20This%20lets%20you%20use%20the%20returned%20object%0A%20%20%20%20with%20the%202d%20geometric%20collision%20functions%20like%20%60hitTestRectangle%60%0A%20%20%20%20or%20%60rectangleCollision%60%0A%20%20%20%20%20The%20%60world%60%20object%20requires%20these%20properties%3A%0A%20%20%20%20%60x%60%2C%20%60y%60%2C%20%60tilewidth%60%2C%20%60tileheight%60%20and%20%60widthInTiles%60%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22getTile%22%2C%0A%20%20%20%20value%3A%20function%20getTile%28index%2C%20mapArray%2C%20world%29%20%7B%0A%20%20%20%20%20%20var%20tile%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20tile%2Egid%20%3D%20mapArray%5Bindex%5D%3B%0A%20%20%20%20%20%20tile%2Ewidth%20%3D%20world%2Etilewidth%3B%0A%20%20%20%20%20%20tile%2Eheight%20%3D%20world%2Etileheight%3B%0A%20%20%20%20%20%20tile%2EhalfWidth%20%3D%20world%2Etilewidth%20%2F%202%3B%0A%20%20%20%20%20%20tile%2EhalfHeight%20%3D%20world%2Etileheight%20%2F%202%3B%0A%20%20%20%20%20%20tile%2Ex%20%3D%20index%20%25%20world%2EwidthInTiles%20%2A%20world%2Etilewidth%20%2B%20world%2Ex%3B%0A%20%20%20%20%20%20tile%2Ey%20%3D%20Math%2Efloor%28index%20%2F%20world%2EwidthInTiles%29%20%2A%20world%2Etileheight%20%2B%20world%2Ey%3B%0A%20%20%20%20%20%20tile%2Egx%20%3D%20tile%2Ex%3B%0A%20%20%20%20%20%20tile%2Egy%20%3D%20tile%2Ey%3B%0A%20%20%20%20%20%20tile%2EcenterX%20%3D%20tile%2Ex%20%2B%20world%2Etilewidth%20%2F%202%3B%0A%20%20%20%20%20%20tile%2Ecentery%20%3D%20tile%2Ey%20%2B%20world%2Etileheight%20%2F%202%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20tile%20object%0A%20%20%20%20%20%20return%20tile%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%23%23%23%23%20surroundingCells%0A%20%20%20%20The%20%60surroundingCells%60%20helper%20method%20returns%20an%20array%20containing%209%0A%20%20%20%20index%20numbers%20of%20map%20array%20cells%20around%20any%20given%20index%20number%2E%0A%20%20%20%20Use%20it%20for%20an%20efficient%20broadphase%2Fnarrowphase%20collision%20test%2E%0A%20%20%20%20The%202%20arguments%20are%20the%20index%20number%20that%20represents%20the%20center%20cell%2C%0A%20%20%20%20and%20the%20width%20of%20the%20map%20array%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22surroundingCells%22%2C%0A%20%20%20%20value%3A%20function%20surroundingCells%28index%2C%20widthInTiles%29%20%7B%0A%20%20%20%20%20%20return%20%5Bindex%20%2D%20widthInTiles%20%2D%201%2C%20index%20%2D%20widthInTiles%2C%20index%20%2D%20widthInTiles%20%2B%201%2C%20index%20%2D%201%2C%20index%2C%20index%20%2B%201%2C%20index%20%2B%20widthInTiles%20%2D%201%2C%20index%20%2B%20widthInTiles%2C%20index%20%2B%20widthInTiles%20%2B%201%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%23%23%23%23%20getPoints%0A%20%20%20%20%2F%2A%0A%20%20%20%20The%20%60getPoints%60%20method%20takes%20a%20sprite%20and%20returns%0A%20%20%20%20an%20object%20that%20tells%20you%20what%20all%20its%20corner%20points%20are%2E%20The%20return%0A%20%20%20%20object%20has%20four%20properties%2C%20each%20of%20which%20is%20an%20object%20with%20%60x%60%20and%20%60y%60%20properties%3A%0A%20%20%20%20%20%2D%20%60topLeft%60%3A%20%60x%60%20and%20%60y%60%20properties%20describing%20the%20top%20left%20corner%0A%20%20%20%20point%2E%0A%20%20%20%20%2D%20%60topRight%60%3A%20%60x%60%20and%20%60y%60%20properties%20describing%20the%20top%20right%20corner%0A%20%20%20%20point%2E%0A%20%20%20%20%2D%20%60bottomLeft%60%3A%20%60x%60%20and%20%60y%60%20properties%20describing%20the%20bottom%20left%20corner%0A%20%20%20%20point%2E%0A%20%20%20%20%2D%20%60bottomRight%60%3A%20%60x%60%20and%20%60y%60%20properties%20describing%20the%20bottom%20right%20corner%0A%20%20%20%20point%2E%0A%20%20%20%20%20If%20the%20sprite%20has%20a%20%60collisionArea%60%20property%20that%20defines%20a%0A%20%20%20%20smaller%20rectangular%20area%20inside%20the%20sprite%2C%20that%20collision%0A%20%20%20%20area%20can%20be%20used%20instead%20for%20collisions%20instead%20of%20the%20sprite%27s%20dimensions%2E%20Here%27s%0A%20%20%20%20How%20you%20could%20define%20a%20%60collsionArea%60%20on%20a%20sprite%20called%20%60elf%60%3A%0A%20%20%20%20%60%60%60js%0A%20%20%20%20elf%2EcollisionArea%20%3D%20%7Bx%3A%2022%2C%20y%3A%2044%2C%20width%3A%2020%2C%20height%3A%2020%7D%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20Here%27s%20how%20you%20could%20use%20the%20%60getPoints%60%20method%20to%20find%20all%20the%20collision%20area%27s%20corner%20points%2E%0A%20%20%20%20%60%60%60js%0A%20%20%20%20let%20cornerPoints%20%3D%20tu%2EgetPoints%28elf%2EcollisionArea%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22getPoints%22%2C%0A%20%20%20%20value%3A%20function%20getPoints%28s%29%20%7B%0A%20%20%20%20%20%20var%20ca%20%3D%20s%2EcollisionArea%3B%0A%20%20%20%20%20%20if%20%28ca%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20topLeft%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2Ex%20%2B%20ca%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2Ey%20%2B%20ca%2Ey%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20topRight%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2Ex%20%2B%20ca%2Ex%20%2B%20ca%2Ewidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2Ey%20%2B%20ca%2Ey%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20bottomLeft%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2Ex%20%2B%20ca%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2Ey%20%2B%20ca%2Ey%20%2B%20ca%2Eheight%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20bottomRight%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2Ex%20%2B%20ca%2Ex%20%2B%20ca%2Ewidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2Ey%20%2B%20ca%2Ey%20%2B%20ca%2Eheight%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20topLeft%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2Ey%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20topRight%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2Ex%20%2B%20s%2Ewidth%20%2D%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2Ey%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20bottomLeft%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2Ey%20%2B%20s%2Eheight%20%2D%201%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20bottomRight%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2Ex%20%2B%20s%2Ewidth%20%2D%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2Ey%20%2B%20s%2Eheight%20%2D%201%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%23%23%23%20hitTestTile%0A%20%20%20%20%2F%2A%0A%20%20%20%20%60hitTestTile%60%20checks%20for%20a%0A%20%20%20%20collision%20between%20a%20sprite%20and%20a%20tile%20in%20any%20map%20array%20that%20you%0A%20%20%20%20specify%2E%20It%20returns%20a%20%60collision%60%20object%2E%0A%20%20%20%20%60collision%2Ehit%60%20is%20a%20Boolean%20that%20tells%20you%20if%20a%20sprite%20is%20colliding%0A%20%20%20%20with%20the%20tile%20that%20you%27re%20checking%2E%20%60collision%2Eindex%60%20tells%20you%20the%0A%20%20%20%20map%20array%27s%20index%20number%20of%20the%20colliding%20sprite%2E%20You%20can%20check%20for%0A%20%20%20%20a%20collision%20with%20the%20tile%20against%20%22every%22%20corner%20point%20on%20the%0A%20%20%20%20sprite%2C%20%22some%22%20corner%20points%2C%20or%20the%20sprite%27s%20%22center%22%20point%2E%0A%20%20%20%20%60hitTestTile%60%20arguments%3A%0A%20%20%20%20sprite%2C%20array%2C%20collisionTileGridIdNumber%2C%20worldObject%2C%20spritesPointsToCheck%0A%20%20%20%20%60%60%60js%0A%20%20%20%20tu%2EhitTestTile%28sprite%2C%20array%2C%20collisioGid%2C%20world%2C%20pointsToCheck%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20The%20%60world%60%20object%20%28the%204th%20argument%29%20has%20to%20have%20these%20properties%3A%0A%20%20%20%20%60tileheight%60%2C%20%60tilewidth%60%2C%20%60widthInTiles%60%2E%0A%20%20%20%20Here%27s%20how%20you%20could%20use%20%20%60hitTestTile%60%20to%20check%20for%20a%20collision%20between%20a%20sprite%0A%20%20%20%20called%20%60alien%60%20and%20an%20array%20of%20wall%20sprites%20with%20map%20gid%20numbers%20of%200%2E%0A%20%20%20%20%60%60%60js%0A%20%20%20%20let%20alienVsFloor%20%3D%20g%2EhitTestTile%28alien%2C%20wallMapArray%2C%200%2C%20world%2C%20%22every%22%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22hitTestTile%22%2C%0A%20%20%20%20value%3A%20function%20hitTestTile%28sprite%2C%20mapArray%2C%20gidToCheck%2C%20world%2C%20pointsToCheck%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60checkPoints%60%20helper%20function%20Loop%20through%20the%20sprite%27s%20corner%20points%20to%0A%20%20%20%20%20%20%2F%2Ffind%20out%20if%20they%20are%20inside%20an%20array%20cell%20that%20you%27re%20interested%20in%2E%0A%20%20%20%20%20%20%2F%2FReturn%20%60true%60%20if%20they%20are%0A%20%20%20%20%20%20var%20checkPoints%20%3D%20function%20checkPoints%28key%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FGet%20a%20reference%20to%20the%20current%20point%20to%20check%2E%0A%20%20%20%20%20%20%20%20%2F%2F%28%60topLeft%60%2C%20%60topRight%60%2C%20%60bottomLeft%60%20or%20%60bottomRight%60%20%29%0A%20%20%20%20%20%20%20%20var%20point%20%3D%20sprite%2EcollisionPoints%5Bkey%5D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20point%27s%20index%20number%20in%20the%20map%20array%0A%20%20%20%20%20%20%20%20collision%2Eindex%20%3D%20%5Fthis%2EgetIndex%28point%2Ex%2C%20point%2Ey%2C%20world%2Etilewidth%2C%20world%2Etileheight%2C%20world%2EwidthInTiles%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20out%20what%20the%20gid%20value%20is%20in%20the%20map%20position%0A%20%20%20%20%20%20%20%20%2F%2Fthat%20the%20point%20is%20currently%20over%0A%20%20%20%20%20%20%20%20collision%2Egid%20%3D%20mapArray%5Bcollision%2Eindex%5D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20it%20matches%20the%20value%20of%20the%20gid%20that%20we%27re%20interested%2C%20in%0A%20%20%20%20%20%20%20%20%2F%2Fthen%20there%27s%20been%20a%20collision%0A%20%20%20%20%20%20%20%20if%20%28collision%2Egid%20%3D%3D%3D%20gidToCheck%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FAssign%20%22some%22%20as%20the%20default%20value%20for%20%60pointsToCheck%60%0A%20%20%20%20%20%20pointsToCheck%20%3D%20pointsToCheck%20%7C%7C%20%22some%22%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20collision%20object%20that%20will%20be%20returned%20by%20this%20function%0A%20%20%20%20%20%20var%20collision%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FWhich%20points%20do%20you%20want%20to%20check%3F%0A%20%20%20%20%20%20%2F%2F%22every%22%2C%20%22some%22%20or%20%22center%22%3F%0A%20%20%20%20%20%20switch%20%28pointsToCheck%29%20%7B%0A%20%20%20%20%20%20%20%20case%20%22center%22%3A%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%60hit%60%20will%20be%20true%20only%20if%20the%20center%20point%20is%20touching%0A%20%20%20%20%20%20%20%20%20%20var%20point%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20center%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20sprite%2EcenterX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20sprite%2EcenterY%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20sprite%2EcollisionPoints%20%3D%20point%3B%0A%20%20%20%20%20%20%20%20%20%20collision%2Ehit%20%3D%20Object%2Ekeys%28sprite%2EcollisionPoints%29%2Esome%28checkPoints%29%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22every%22%3A%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%60hit%60%20will%20be%20true%20if%20every%20point%20is%20touching%0A%20%20%20%20%20%20%20%20%20%20sprite%2EcollisionPoints%20%3D%20this%2EgetPoints%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20collision%2Ehit%20%3D%20Object%2Ekeys%28sprite%2EcollisionPoints%29%2Eevery%28checkPoints%29%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22some%22%3A%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%60hit%60%20will%20be%20true%20only%20if%20some%20points%20are%20touching%0A%20%20%20%20%20%20%20%20%20%20sprite%2EcollisionPoints%20%3D%20this%2EgetPoints%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20collision%2Ehit%20%3D%20Object%2Ekeys%28sprite%2EcollisionPoints%29%2Esome%28checkPoints%29%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20collision%20object%2E%0A%20%20%20%20%20%20%2F%2F%60collision%2Ehit%60%20will%20be%20true%20if%20a%20collision%20is%20detected%2E%0A%20%20%20%20%20%20%2F%2F%60collision%2Eindex%60%20tells%20you%20the%20map%20array%20index%20number%20where%20the%0A%20%20%20%20%20%20%2F%2Fcollision%20occured%0A%20%20%20%20%20%20return%20collision%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%23%23%23%20updateMap%0A%20%20%20%20%2F%2A%0A%20%20%20%20%60updateMap%60%20takes%20a%20map%20array%20and%20adds%20a%20sprite%27s%20grid%20index%20number%20%28%60gid%60%29%20to%20it%2E%20%0A%20%20%20%20It%20finds%20the%20sprite%27s%20new%20index%20position%2C%20and%20retuns%20the%20new%20map%20array%2E%0A%20%20%20%20You%20can%20use%20it%20to%20do%20very%20efficient%20collision%20detection%20in%20tile%20based%20game%20worlds%2E%0A%20%20%20%20%60updateMap%60%20arguments%3A%0A%20%20%20%20array%2C%20singleSpriteOrArrayOfSprites%2C%20worldObject%0A%20%20%20%20The%20%60world%60%20object%20%28the%204th%20argument%29%20has%20to%20have%20these%20properties%3A%0A%20%20%20%20%60tileheight%60%2C%20%60tilewidth%60%2C%20%60widthInTiles%60%2E%0A%20%20%20%20The%20sprite%20objects%20have%20to%20have%20have%20these%20properties%3A%0A%20%20%20%20%60centerX%60%2C%20%60centerY%60%2C%20%60index%60%2C%20%60gid%60%20%28The%20number%20in%20the%20array%20that%20represpents%20the%20sprite%29%0A%20%20%20%20Here%27s%20an%20example%20of%20how%20you%20could%20use%20%60updateMap%60%20in%20your%20game%20code%20like%20this%3A%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20blockLayer%2Edata%20%3D%20g%2EupdateMap%28blockLayer%2Edata%2C%20blockLayer%2Echildren%2C%20world%29%3B%0A%20%20%20%20%20The%20%60blockLayer%2Edata%60%20array%20would%20now%20contain%20the%20new%20index%20position%20numbers%20of%20all%20the%20%0A%20%20%20%20child%20sprites%20on%20that%20layer%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22updateMap%22%2C%0A%20%20%20%20value%3A%20function%20updateMap%28mapArray%2C%20spritesToUpdate%2C%20world%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis2%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FFirst%20create%20a%20map%20a%20new%20array%20filled%20with%20zeros%2E%0A%20%20%20%20%20%20%2F%2FThe%20new%20map%20array%20will%20be%20exactly%20the%20same%20size%20as%20the%20original%0A%20%20%20%20%20%20var%20newMapArray%20%3D%20mapArray%2Emap%28function%20%28gid%29%20%7B%0A%20%20%20%20%20%20%20%20gid%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20gid%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FIs%20%60spriteToUpdate%60%20an%20array%20of%20sprites%3F%0A%20%20%20%20%20%20if%20%28spritesToUpdate%20instanceof%20Array%29%20%7B%0A%20%20%20%20%20%20%20%20%28function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FGet%20the%20index%20number%20of%20each%20sprite%20in%20the%20%60spritesToUpdate%60%20array%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fand%20add%20the%20sprite%27s%20%60gid%60%20to%20the%20matching%20index%20on%20the%20map%0A%20%20%20%20%20%20%20%20%20%20var%20self%20%3D%20%5Fthis2%3B%0A%20%20%20%20%20%20%20%20%20%20spritesToUpdate%2EforEach%28function%20%28sprite%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20new%20index%20number%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2Eindex%20%3D%20self%2EgetIndex%28sprite%2EcenterX%2C%20sprite%2EcenterY%2C%20world%2Etilewidth%2C%20world%2Etileheight%2C%20world%2EwidthInTiles%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20sprite%27s%20%60gid%60%20number%20to%20the%20correct%20index%20on%20the%20map%0A%20%20%20%20%20%20%20%20%20%20%20%20newMapArray%5Bsprite%2Eindex%5D%20%3D%20sprite%2Egid%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FIs%20%60spritesToUpdate%60%20just%20a%20single%20sprite%3F%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20spritesToUpdate%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20new%20index%20number%0A%20%20%20%20%20%20%20%20%20%20sprite%2Eindex%20%3D%20this%2EgetIndex%28sprite%2EcenterX%2C%20sprite%2EcenterY%2C%20world%2Etilewidth%2C%20world%2Etileheight%2C%20world%2EwidthInTiles%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20sprite%27s%20%60gid%60%20number%20to%20the%20correct%20index%20on%20the%20map%0A%20%20%20%20%20%20%20%20%20%20newMapArray%5Bsprite%2Eindex%5D%20%3D%20sprite%2Egid%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20new%20map%20array%20to%20replace%20the%20previous%20one%0A%20%20%20%20%20%20return%20newMapArray%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%23%23%23makeTiledWorld%0A%20%20%20%20%20%60makeTiledWorld%60%20is%20a%20quick%20and%20easy%20way%20to%20display%20a%20game%20world%20designed%20in%0A%20%20%20%20Tiled%20Editor%2E%20Supply%20%60makeTiledWorld%60%20with%202%20%2A%2Astring%20arguments%2A%2A%3A%20%0A%20%20%20%20%0A%20%20%20%201%2E%20A%20JSON%20file%20generated%20by%20Tiled%20Editor%2E%20%0A%20%20%20%202%2E%20A%20source%20image%20that%20represents%20the%20tile%20set%20you%20used%20to%20create%20the%20Tiled%20Editor%20world%2E%0A%20%20%20%20%60%60%60js%0A%20%20%20%20let%20world%20%3D%20makeTiledWorld%28%22tiledEditorMapData%2Ejson%22%2C%20%22tileset%2Epng%22%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20%28Note%3A%20%60makeTiledWorld%60%20looks%20for%20the%20JSON%20data%20file%20in%20Pixi%27s%20%60loader%2Eresources%60%20object%2E%20So%2C%20%0A%20%20%20%20make%20sure%20you%27ve%20loaded%20the%20JSON%20file%20using%20Pixi%27s%20%60loader%60%2E%29%0A%20%20%20%20%20%60makeTiledWorld%60%20will%20return%20a%20Pixi%20%60Container%60%20that%20contains%20all%20the%20things%20in%20your%20Tiled%20Editor%0A%20%20%20%20map%20as%20Pixi%20sprites%2E%0A%20%20%20%20%20All%20the%20image%20tiles%20you%20create%20in%20Tiled%20Editor%20are%20automatically%20converted%20into%20Pixi%20sprites%0A%20%20%20%20for%20you%20by%20%60makeTiledWorld%60%2E%20You%20can%20access%20all%20of%20them%20using%20two%20methods%3A%20%60getObject%60%20%28for%0A%20%20%20%20single%20sprites%29%20and%20%60getObjects%60%20%28with%20an%20%22s%22%29%20for%20multiple%20sprites%2E%20Let%27s%20find%20out%20how%20they%20work%2E%0A%20%20%20%20%0A%20%20%20%20%23%23%23%23world%2EgetObject%0A%20%20%20%20%20Tile%20Editor%20lets%20you%20assign%20a%20%22name%22%20properties%20any%20object%2E%0A%20%20%20%20You%20can%20access%20any%20sprite%20by%20this%20name%20using%20the%20%60getObject%60%20method%2E%20%60getObject%60%20searches%20for%20and%0A%20%20%20%20returns%20a%20sprite%20in%20the%20%60world%60%20that%20has%20the%20same%20%60name%60%20property%20that%20you%20assigned%0A%20%20%20%20in%20Tiled%20Editor%2E%20Here%27s%20how%20to%20use%20%60getObject%60%20to%20look%20for%20an%20object%20called%20%22alien%22%0A%20%20%20%20in%20the%20Tiled%20map%20data%20and%20assign%20it%20to%20a%20variable%20called%20%60alien%60%0A%20%20%20%20%60%60%60js%20%20%0A%20%20%20%20let%20alien%20%3D%20world%2EgetObject%28%22alien%22%29%3B%20%20%0A%20%20%20%20%60%60%60%0A%20%20%20%20%60alien%60%20is%20now%20an%20ordinary%20Pixi%20sprite%20that%20you%20can%20control%20just%20like%20any%20other%20Pixi%0A%20%20%20%20sprite%20in%20your%20games%2E%0A%20%20%20%20%20%23%23%23%23%20Creating%20sprites%20from%20generic%20objects%0A%20%20%20%20%20Tiled%20Editor%20lets%20you%20create%20generic%20objects%2E%20These%20are%20objects%20that%20don%27t%20have%20images%20associated%0A%20%20%20%20with%20them%2E%20Generic%20objects%20are%20handy%20to%20use%2C%20because%20they%20let%20you%20create%20complex%20game%20objects%20inside%0A%20%20%20%20Tiled%20Editor%2C%20as%20pure%20data%2E%20You%20can%20then%20use%20that%20data%20your%20game%20code%20to%20build%20complex%20game%20objects%2E%0A%20%20%20%20%20For%20example%2C%20imagine%20that%20you%20want%20to%20create%20a%20complex%20animated%20walking%20sprite%20called%20%22elf%22%2E%0A%20%20%20%20First%2C%20create%20the%20elf%20object%20in%20Tiled%20Editor%20as%20a%20generic%20object%2C%20but%20don%27t%20assign%20any%20image%20tiles%0A%20%20%20%20to%20it%2E%20Next%2C%20in%20your%20game%20code%2C%20create%20a%20new%20Pixi%20MovieClip%20called%20%60elf%60%20and%20give%20it%20any%20textures%20you%20want%0A%20%20%20%20to%20use%20for%20its%20animation%20states%2E%0A%20%20%20%20%60%60%60js%0A%20%20%20%20%2F%2FCreate%20a%20new%20Pixi%20MovieClip%20sprite%0A%20%20%20%20let%20elf%20%3D%20new%20PIXI%2EMovieClip%28elfSpriteTextures%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20Then%20use%20the%20%60x%60%20and%20%60y%60%20data%20from%20the%20generic%20%22elf%22%20object%20you%20created%20in%20Tiled%20Editor%20to%20position%20the%20%0A%20%20%20%20%60elf%60%20sprite%2E%0A%20%20%20%20%60%60%60js%0A%20%20%20%20elf%2Ex%20%3D%20world%2EgetObject%28%22elf%22%29%2Ex%3B%0A%20%20%20%20elf%2Ey%20%3D%20world%2EgetObject%28%22elf%22%29%2Ey%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20This%20is%20a%20simple%20example%2C%20but%20you%20could%20make%20very%20complex%20data%20objects%20in%20Tiled%20Editor%20and%20%0A%20%20%20%20use%20them%20to%20build%20complex%20sprites%20in%20the%20same%20way%2E%0A%20%20%20%20%20%23%23%23%23Accessing%20Tiled%20Editor%20layer%20groups%20%0A%20%20%20%20%0A%20%20%20%20Tiled%20Editor%20lets%20you%20create%20%2A%2Alayer%20groups%2A%2A%2E%20Each%20layer%20group%20you%20create%0A%20%20%20%20in%20Tiled%20Editor%20is%20automatically%20converted%20by%20%60makeTiledWorld%60%20into%20a%20Pixi%20%60Container%60%0A%20%20%20%20object%2E%20You%20can%20access%20those%20containers%20using%20%60getObject%60%20to%20extract%20the%20layer%20group%0A%20%20%20%20container%2E%20%0A%20%20%20%20%20Here%27s%20how%20you%20could%20extract%20the%20layer%20group%20called%20%22objects%22%20and%20add%20the%20%0A%20%20%20%20%60elf%60%20sprite%20to%20it%2E%0A%20%20%20%20%60%60%60js%0A%20%20%20%20let%20objectsLayer%20%3D%20world%2EgetObject%28%22objects%22%29%3B%0A%20%20%20%20objectsLayer%2EaddChild%28elf%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20If%20you%20want%20to%20add%20the%20sprite%20to%20a%20different%20world%20layer%2C%20you%20can%20do%20it%20like%20this%3A%0A%20%20%20%20%60%60%60js%0A%20%20%20%20world%2EgetObject%28%22treeTops%22%29%2EaddChild%28elf%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20If%20you%20want%20to%20access%20all%20the%20sprites%20in%20a%20specific%20Tiled%20Editor%20layer%2C%20just%20supply%0A%20%20%20%20%60getObject%60%20with%20the%20name%20of%20the%20layer%2E%20For%20example%2C%20if%20the%20layer%20name%20is%20%22items%22%2C%20you%0A%20%20%20%20can%20access%20it%20like%20this%3A%0A%20%20%20%20%60%60%60js%0A%20%20%20%20let%20itemsLayer%20%3D%20world%2EgetObject%28%22items%22%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20%60itemsLayer%60%20is%20now%20a%20Pixi%20container%20with%20a%20%60children%60%20array%20that%20contains%20all%20the%20sprites%0A%20%20%20%20on%20that%20layer%2E%20%20%0A%20%20%20%20%20To%20be%20safe%2C%20clone%20this%20array%20to%20create%20a%20new%20version%0A%20%20%20%20that%20doesn%27t%20point%20to%20the%20original%20data%20file%3A%0A%20%20%20%20%60%60%60js%0A%20%20%20%20items%20%3D%20itemsLayer%2Echildren%2Eslice%280%29%3B%20%20%0A%20%20%20%20%60%60%60%0A%20%20%20%20You%20can%20now%20manipulate%20the%20%60items%60%20array%20freely%20without%20worrying%20about%20changing%0A%20%20%20%20the%20original%20array%2E%20This%20can%20possibly%20help%20prevent%20some%20weird%20bugs%20in%20a%20complex%20game%2E%0A%20%20%20%20%20%23%23%23Finding%20the%20%22gid%22%20values%0A%20%20%20%20%20Tiled%20Editor%20uses%20%22gid%22%20numbers%20to%20identify%20different%20kinds%20of%20things%20in%20the%20world%2E%0A%20%20%20%20If%20you%20ever%20need%20to%20extract%20sprites%20with%20specific%20%60gid%60%20numbers%20in%20a%20%0A%20%20%20%20layer%20that%20contains%20different%20kinds%20of%20things%2C%20you%20can%20do%20it%20like%20this%3A%0A%20%20%20%20%60%60%60js%0A%20%20%20%20let%20items%20%3D%20itemsLayer%2Echildren%2Emap%28sprite%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20%28sprite%2Egid%20%21%3D%3D%200%29%20return%20sprite%3B%20%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20Every%20sprite%20created%20by%20%60makeTiledWorld%60%20has%20a%20%60gid%60%20property%20with%20a%20value%20that%20matches%20its%0A%20%20%20%20Tiled%20Editor%20%22gid%22%20value%2E%0A%20%20%20%20%20%23%23%23%23Accessing%20a%20layer%27s%20%22data%22%20array%0A%20%20%20%20%20Tiled%20Editor%27s%20layers%20have%20a%20%60data%60%20property%0A%20%20%20%20that%20is%20an%20array%20containing%20all%20the%20grid%20index%20numbers%20%28%60gid%60%29%20of%0A%20%20%20%20the%20tiles%20in%20that%20array%2E%20Imagine%20that%20you%27ve%20got%20a%20layer%20full%20of%20similar%0A%20%20%20%20tiles%20representing%20the%20walls%20in%20a%20game%2E%20How%20do%20you%20access%20the%20array%0A%20%20%20%20containing%20all%20the%20%22gid%22%20numbers%20of%20the%20wall%20sprites%20in%20that%20layer%3F%20If%20the%20layer%27s%20name%20is%20called%20%22wallLayer%22%2C%20you%20%0A%20%20%20%20can%20access%20the%20%60wallLayer%60%27s%20%60data%60%20array%20of%20sprites%20like%20this%3A%20%0A%20%20%20%20%60%60%60js%0A%20%20%20%20wallMapArray%20%3D%20world%2EgetObject%28%22wallLayer%22%29%2Edata%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20%60wallMapArray%60%20is%20now%20an%20array%20of%20%22gid%22%20numbers%20referring%20to%20all%20the%20sprites%20on%20that%0A%20%20%20%20layer%2E%20You%20can%20now%20use%20this%20data%20for%20collision%20detection%2C%20or%20doing%20any%20other%20kind%0A%20%20%20%20of%20world%20building%2E%0A%20%20%20%20%20%23%23%23world%2EgetObjects%0A%20%20%20%20%20There%27s%20another%20method%20called%20%60getObjects%60%20%28with%20an%20%22s%22%21%29%20that%20lets%20you%20extract%0A%20%20%20%20an%20array%20of%20sprites%20from%20the%20Tiled%20Editor%20data%2E%20Imagine%20that%20you%20created%20three%0A%20%20%20%20game%20objects%20in%20Tiled%20Editor%20called%20%22marmot%22%2C%20%22skull%22%20and%20%22heart%22%2E%20%60makeTiledWorld%60%0A%20%20%20%20automatically%20turns%20them%20into%20sprites%2C%20and%20you%20can%20access%0A%20%20%20%20all%20of%20them%20as%20array%20of%20sprites%20using%20%60getObjects%60%20like%20this%3A%0A%20%20%20%20%60%60%60js%0A%20%20%20%20let%20gameItemsArray%20%3D%20world%2EgetObjects%28%22marmot%22%2C%20%22skull%22%2C%20%22heart%22%29%3B%0A%20%20%20%20%60%60%60%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22makeTiledWorld%22%2C%0A%20%20%20%20value%3A%20function%20makeTiledWorld%28jsonTiledMap%2C%20tileset%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis3%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20a%20group%20called%20%60world%60%20to%20contain%20all%20the%20layers%2C%20sprites%0A%20%20%20%20%20%20%2F%2Fand%20objects%20from%20the%20%60tiledMap%60%2E%20The%20%60world%60%20object%20is%20going%20to%20be%0A%20%20%20%20%20%20%2F%2Freturned%20to%20the%20main%20game%20program%0A%20%20%20%20%20%20var%20tiledMap%20%3D%20PIXI%2Eloader%2Eresources%5BjsonTiledMap%5D%2Edata%3B%0A%20%20%20%20%20%20var%20world%20%3D%20new%20this%2EContainer%28%29%3B%0A%0A%20%20%20%20%20%20world%2Etileheight%20%3D%20tiledMap%2Etileheight%3B%0A%20%20%20%20%20%20world%2Etilewidth%20%3D%20tiledMap%2Etilewidth%3B%0A%0A%20%20%20%20%20%20%2F%2FCalculate%20the%20%60width%60%20and%20%60height%60%20of%20the%20world%2C%20in%20pixels%0A%20%20%20%20%20%20world%2EworldWidth%20%3D%20tiledMap%2Ewidth%20%2A%20tiledMap%2Etilewidth%3B%0A%20%20%20%20%20%20world%2EworldHeight%20%3D%20tiledMap%2Eheight%20%2A%20tiledMap%2Etileheight%3B%0A%0A%20%20%20%20%20%20%2F%2FGet%20a%20reference%20to%20the%20world%27s%20height%20and%20width%20in%0A%20%20%20%20%20%20%2F%2Ftiles%2C%20in%20case%20you%20need%20to%20know%20this%20later%20%28you%20will%21%29%0A%20%20%20%20%20%20world%2EwidthInTiles%20%3D%20tiledMap%2Ewidth%3B%0A%20%20%20%20%20%20world%2EheightInTiles%20%3D%20tiledMap%2Eheight%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20an%20%60objects%60%20array%20to%20store%20references%20to%20any%0A%20%20%20%20%20%20%2F%2Fnamed%20objects%20in%20the%20map%2E%20Named%20objects%20all%20have%0A%20%20%20%20%20%20%2F%2Fa%20%60name%60%20property%20that%20was%20assigned%20in%20Tiled%20Editor%0A%20%20%20%20%20%20world%2Eobjects%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20optional%20spacing%20%28padding%29%20around%20each%20tile%0A%20%20%20%20%20%20%2F%2FThis%20is%20to%20account%20for%20spacing%20around%20tiles%0A%20%20%20%20%20%20%2F%2Fthat%27s%20commonly%20used%20with%20texture%20atlas%20tilesets%2E%20Set%20the%0A%20%20%20%20%20%20%2F%2F%60spacing%60%20property%20when%20you%20create%20a%20new%20map%20in%20Tiled%20Editor%0A%20%20%20%20%20%20var%20spacing%20%3D%20tiledMap%2Etilesets%5B0%5D%2Espacing%3B%0A%0A%20%20%20%20%20%20%2F%2FFigure%20out%20how%20many%20columns%20there%20are%20on%20the%20tileset%2E%0A%20%20%20%20%20%20%2F%2FThis%20is%20the%20width%20of%20the%20image%2C%20divided%20by%20the%20width%0A%20%20%20%20%20%20%2F%2Fof%20each%20tile%2C%20plus%20any%20optional%20spacing%20thats%20around%20each%20tile%0A%20%20%20%20%20%20var%20numberOfTilesetColumns%20%3D%20Math%2Efloor%28tiledMap%2Etilesets%5B0%5D%2Eimagewidth%20%2F%20%28tiledMap%2Etilewidth%20%2B%20spacing%29%29%3B%0A%0A%20%20%20%20%20%20%2F%2FLoop%20through%20all%20the%20map%20layers%0A%20%20%20%20%20%20tiledMap%2Elayers%2EforEach%28function%20%28tiledLayer%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FMake%20a%20group%20for%20this%20layer%20and%20copy%0A%20%20%20%20%20%20%20%20%2F%2Fall%20of%20the%20layer%20properties%20onto%20it%2E%0A%20%20%20%20%20%20%20%20var%20layerGroup%20%3D%20new%20%5Fthis3%2EContainer%28%29%3B%0A%0A%20%20%20%20%20%20%20%20Object%2Ekeys%28tiledLayer%29%2EforEach%28function%20%28key%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20all%20the%20layer%27s%20properties%20to%20the%20group%2C%20except%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fwidth%20and%20height%20%28because%20the%20group%20will%20work%20those%20our%20for%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fitself%20based%20on%20its%20content%29%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28key%20%21%3D%3D%20%22width%22%20%26%26%20key%20%21%3D%3D%20%22height%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20layerGroup%5Bkey%5D%20%3D%20tiledLayer%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FSet%20the%20width%20and%20height%20of%20the%20layer%20to%0A%20%20%20%20%20%20%20%20%2F%2Fthe%20%60world%60%27s%20width%20and%20height%0A%20%20%20%20%20%20%20%20%2F%2FlayerGroup%2Ewidth%20%3D%20world%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%2F%2FlayerGroup%2Eheight%20%3D%20world%2Eheight%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FTranslate%20%60opacity%60%20to%20%60alpha%60%0A%20%20%20%20%20%20%20%20layerGroup%2Ealpha%20%3D%20tiledLayer%2Eopacity%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20group%20to%20the%20%60world%60%0A%20%20%20%20%20%20%20%20world%2EaddChild%28layerGroup%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FPush%20the%20group%20into%20the%20world%27s%20%60objects%60%20array%0A%20%20%20%20%20%20%20%20%2F%2FSo%20you%20can%20access%20it%20later%0A%20%20%20%20%20%20%20%20world%2Eobjects%2Epush%28layerGroup%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIs%20this%20current%20layer%20a%20%60tilelayer%60%3F%0A%20%20%20%20%20%20%20%20if%20%28tiledLayer%2Etype%20%3D%3D%3D%20%22tilelayer%22%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FLoop%20through%20the%20%60data%60%20array%20of%20this%20layer%0A%20%20%20%20%20%20%20%20%20%20tiledLayer%2Edata%2EforEach%28function%20%28gid%2C%20index%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20tileSprite%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20texture%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapX%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapY%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetX%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetY%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapColumn%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapRow%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetColumn%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetRow%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20grid%20id%20number%20%28%60gid%60%29%20isn%27t%20zero%2C%20create%20a%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28gid%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20the%20map%20column%20and%20row%20number%20that%20we%27re%20on%2C%20and%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fcalculate%20the%20grid%20cell%27s%20x%20and%20y%20pixel%20position%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapColumn%20%3D%20index%20%25%20world%2EwidthInTiles%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapRow%20%3D%20Math%2Efloor%28index%20%2F%20world%2EwidthInTiles%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapX%20%3D%20mapColumn%20%2A%20world%2Etilewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapY%20%3D%20mapRow%20%2A%20world%2Etileheight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20the%20column%20and%20row%20number%20that%20the%20tileset%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fimage%20is%20on%2C%20and%20then%20use%20those%20values%20to%20calculate%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20x%20and%20y%20pixel%20position%20of%20the%20image%20on%20the%20tileset%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetColumn%20%3D%20%28gid%20%2D%201%29%20%25%20numberOfTilesetColumns%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetRow%20%3D%20Math%2Efloor%28%28gid%20%2D%201%29%20%2F%20numberOfTilesetColumns%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetX%20%3D%20tilesetColumn%20%2A%20world%2Etilewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetY%20%3D%20tilesetRow%20%2A%20world%2Etileheight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCompensate%20for%20any%20optional%20spacing%20%28padding%29%20around%20the%20tiles%20if%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthere%20is%20any%2E%20This%20bit%20of%20code%20accumlates%20the%20spacing%20offsets%20from%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fleft%20side%20of%20the%20tileset%20and%20adds%20them%20to%20the%20current%20tile%27s%20position%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28spacing%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetX%20%2B%3D%20spacing%20%2B%20spacing%20%2A%20%28%28gid%20%2D%201%29%20%25%20numberOfTilesetColumns%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetY%20%2B%3D%20spacing%20%2B%20spacing%20%2A%20Math%2Efloor%28%28gid%20%2D%201%29%20%2F%20numberOfTilesetColumns%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FUse%20the%20above%20values%20to%20create%20the%20sprite%27s%20image%20from%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20tileset%20image%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20texture%20%3D%20%5Fthis3%2Eframe%28tileset%2C%20tilesetX%2C%20tilesetY%2C%20world%2Etilewidth%2C%20world%2Etileheight%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FI%27ve%20dedcided%20that%20any%20tiles%20that%20have%20a%20%60name%60%20property%20are%20important%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fand%20should%20be%20accessible%20in%20the%20%60world%2Eobjects%60%20array%2E%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20tileproperties%20%3D%20tiledMap%2Etilesets%5B0%5D%2Etileproperties%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%20%3D%20String%28gid%20%2D%201%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20JSON%20%60tileproperties%60%20object%20has%20a%20sub%2Dobject%20that%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fmatches%20the%20current%20tile%2C%20and%20that%20sub%2Dobject%20has%20a%20%60name%60%20property%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthen%20create%20a%20sprite%20and%20assign%20the%20tile%20properties%20onto%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28tileproperties%5Bkey%5D%20%26%26%20tileproperties%5Bkey%5D%2Ename%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMake%20a%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%20%3D%20new%20%5Fthis3%2ESprite%28texture%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCopy%20all%20of%20the%20tile%27s%20properties%20onto%20the%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%28This%20includes%20the%20%60name%60%20property%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Object%2Ekeys%28tileproperties%5Bkey%5D%29%2EforEach%28function%20%28property%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fconsole%2Elog%28tileproperties%5Bkey%5D%5Bproperty%5D%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%5Bproperty%5D%20%3D%20tileproperties%5Bkey%5D%5Bproperty%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FPush%20the%20sprite%20into%20the%20world%27s%20%60objects%60%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fso%20that%20you%20can%20access%20it%20by%20%60name%60%20later%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20world%2Eobjects%2Epush%28tileSprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20tile%20doesn%27t%20have%20a%20%60name%60%20property%2C%20just%20use%20it%20to%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fcreate%20an%20ordinary%20sprite%20%28it%20will%20only%20need%20one%20texture%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%20%3D%20new%20%5Fthis3%2ESprite%28texture%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FPosition%20the%20sprite%20on%20the%20map%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%2Ex%20%3D%20mapX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%2Ey%20%3D%20mapY%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMake%20a%20record%20of%20the%20sprite%27s%20index%20number%20in%20the%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%28We%27ll%20use%20this%20for%20collision%20detection%20later%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%2Eindex%20%3D%20index%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMake%20a%20record%20of%20the%20sprite%27s%20%60gid%60%20on%20the%20tileset%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThis%20will%20also%20be%20useful%20for%20collision%20detection%20later%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%2Egid%20%3D%20gid%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20sprite%20to%20the%20current%20layer%20group%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20layerGroup%2EaddChild%28tileSprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FIs%20this%20layer%20an%20%60objectgroup%60%3F%0A%20%20%20%20%20%20%20%20if%20%28tiledLayer%2Etype%20%3D%3D%3D%20%22objectgroup%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20tiledLayer%2Eobjects%2EforEach%28function%20%28object%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FWe%27re%20just%20going%20to%20capture%20the%20object%27s%20properties%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fso%20that%20we%20can%20decide%20what%20to%20do%20with%20it%20later%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGet%20a%20reference%20to%20the%20layer%20group%20the%20object%20is%20in%0A%20%20%20%20%20%20%20%20%20%20%20%20object%2Egroup%20%3D%20layerGroup%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FBecause%20this%20is%20an%20object%20layer%2C%20it%20doesn%27t%20contain%20any%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fsprites%2C%20just%20data%20object%2E%20That%20means%20it%20won%27t%20be%20able%20to%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fcalucalte%20its%20own%20height%20and%20width%2E%20To%20help%20it%20out%2C%20give%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20%60layerGroup%60%20the%20same%20%60width%60%20and%20%60height%60%20as%20the%20%60world%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FlayerGroup%2Ewidth%20%3D%20world%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FlayerGroup%2Eheight%20%3D%20world%2Eheight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FPush%20the%20object%20into%20the%20world%27s%20%60objects%60%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20world%2Eobjects%2Epush%28object%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FSearch%20functions%0A%20%20%20%20%20%20%2F%2F%60world%2EgetObject%60%20and%20%60world%2EgetObjects%60%20%20search%20for%20and%20return%0A%20%20%20%20%20%20%2F%2Fany%20sprites%20or%20objects%20in%20the%20%60world%2Eobjects%60%20array%2E%0A%20%20%20%20%20%20%2F%2FAny%20object%20that%20has%20a%20%60name%60%20propery%20in%0A%20%20%20%20%20%20%2F%2FTiled%20Editor%20will%20show%20up%20in%20a%20search%2E%0A%20%20%20%20%20%20%2F%2F%60getObject%60%20gives%20you%20a%20single%20object%2C%20%60getObjects%60%20gives%20you%20an%20array%0A%20%20%20%20%20%20%2F%2Fof%20objects%2E%0A%20%20%20%20%20%20%2F%2F%60getObject%60%20returns%20the%20actual%20search%20function%2C%20so%20you%0A%20%20%20%20%20%20%2F%2Fcan%20use%20the%20following%20format%20to%20directly%20access%20a%20single%20object%3A%0A%20%20%20%20%20%20%2F%2Fsprite%2Ex%20%3D%20world%2EgetObject%28%22anySprite%22%29%2Ex%3B%0A%20%20%20%20%20%20%2F%2Fsprite%2Ey%20%3D%20world%2EgetObject%28%22anySprite%22%29%2Ey%3B%0A%0A%20%20%20%20%20%20world%2EgetObject%20%3D%20function%20%28objectName%29%20%7B%0A%20%20%20%20%20%20%20%20var%20searchForObject%20%3D%20function%20searchForObject%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20foundObject%20%3D%20undefined%3B%0A%20%20%20%20%20%20%20%20%20%20world%2Eobjects%2Esome%28function%20%28object%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28object%2Ename%20%26%26%20object%2Ename%20%3D%3D%3D%20objectName%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20foundObject%20%3D%20object%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28foundObject%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20foundObject%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%22There%20is%20no%20object%20with%20the%20property%20name%3A%20%22%20%2B%20objectName%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FReturn%20the%20search%20function%0A%20%20%20%20%20%20%20%20return%20searchForObject%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20world%2EgetObjects%20%3D%20function%20%28objectNames%29%20%7B%0A%20%20%20%20%20%20%20%20var%20foundObjects%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20world%2Eobjects%2EforEach%28function%20%28object%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28object%2Ename%20%26%26%20objectNames%2EindexOf%28object%2Ename%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20foundObjects%2Epush%28object%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20if%20%28foundObjects%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20foundObjects%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%22I%20could%20not%20find%20those%20objects%22%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20foundObjects%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FThat%27s%20it%2C%20we%27re%20done%21%0A%20%20%20%20%20%20%2F%2FFinally%2C%20return%20the%20%60world%60%20object%20back%20to%20the%20game%20program%0A%20%20%20%20%20%20return%20world%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%20Isometric%20tile%20utilities%20%2A%2F%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%23%23%23%20byDepth%0A%20%20%20%20And%20array%20%60sort%60%20function%20that%20depth%2Dsorts%20sprites%20according%20to%0A%20%20%20%20their%20%60z%60%20properties%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22byDepth%22%2C%0A%20%20%20%20value%3A%20function%20byDepth%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%2F%2FCalculate%20the%20depths%20of%20%60a%60%20and%20%60b%60%0A%20%20%20%20%20%20%2F%2F%28add%20%601%60%20to%20%60a%2Ez%60%20and%20%60b%2Ex%60%20to%20avoid%20multiplying%20by%200%29%0A%20%20%20%20%20%20a%2Edepth%20%3D%20%28a%2EcartX%20%2B%20a%2EcartY%29%20%2A%20%28a%2Ez%20%2B%201%29%3B%0A%20%20%20%20%20%20b%2Edepth%20%3D%20%28b%2EcartX%20%2B%20b%2EcartY%29%20%2A%20%28b%2Ez%20%2B%201%29%3B%0A%0A%20%20%20%20%20%20%2F%2FMove%20sprites%20with%20a%20lower%20depth%20to%20a%20higher%20position%20in%20the%20array%0A%20%20%20%20%20%20if%20%28a%2Edepth%20%3C%20b%2Edepth%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%2D1%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28a%2Edepth%20%3E%20b%2Edepth%29%20%7B%0A%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%23%23%23%20hitTestIsoTile%0A%20%20%20%20Same%20API%20as%20%60hitTestTile%60%2C%20except%20that%20it%20works%20with%20isometric%20sprites%2E%0A%20%20%20%20Make%20sure%20that%20your%20%60world%60%20object%20has%20properties%20called%0A%20%20%20%20%60cartTileWidth%60%20and%20%60cartTileHeight%60%20that%20define%20the%20Cartesian%20with%20and%20%0A%20%20%20%20height%20of%20your%20tile%20cells%2C%20in%20pixels%2E%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22hitTestIsoTile%22%2C%0A%20%20%20%20value%3A%20function%20hitTestIsoTile%28sprite%2C%20mapArray%2C%20gidToCheck%2C%20world%2C%20pointsToCheck%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60checkPoints%60%20helper%20function%20Loop%20through%20the%20sprite%27s%20corner%20points%20to%0A%20%20%20%20%20%20%2F%2Ffind%20out%20if%20they%20are%20inside%20an%20array%20cell%20that%20you%27re%20interested%20in%2E%0A%20%20%20%20%20%20%2F%2FReturn%20%60true%60%20if%20they%20are%0A%20%20%20%20%20%20var%20checkPoints%20%3D%20function%20checkPoints%28key%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FGet%20a%20reference%20to%20the%20current%20point%20to%20check%2E%0A%20%20%20%20%20%20%20%20%2F%2F%28%60topLeft%60%2C%20%60topRight%60%2C%20%60bottomLeft%60%20or%20%60bottomRight%60%20%29%0A%20%20%20%20%20%20%20%20var%20point%20%3D%20sprite%2EcollisionPoints%5Bkey%5D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20point%27s%20index%20number%20in%20the%20map%20array%0A%20%20%20%20%20%20%20%20collision%2Eindex%20%3D%20g%2EgetIndex%28point%2Ex%2C%20point%2Ey%2C%20world%2EcartTilewidth%2C%20world%2EcartTileheight%2C%20world%2EwidthInTiles%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20out%20what%20the%20gid%20value%20is%20in%20the%20map%20position%0A%20%20%20%20%20%20%20%20%2F%2Fthat%20the%20point%20is%20currently%20over%0A%20%20%20%20%20%20%20%20collision%2Egid%20%3D%20mapArray%5Bcollision%2Eindex%5D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20it%20matches%20the%20value%20of%20the%20gid%20that%20we%27re%20interested%2C%20in%0A%20%20%20%20%20%20%20%20%2F%2Fthen%20there%27s%20been%20a%20collision%0A%20%20%20%20%20%20%20%20if%20%28collision%2Egid%20%3D%3D%3D%20gidToCheck%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FAssign%20%22some%22%20as%20the%20default%20value%20for%20%60pointsToCheck%60%0A%20%20%20%20%20%20pointsToCheck%20%3D%20pointsToCheck%20%7C%7C%20%22some%22%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20collision%20object%20that%20will%20be%20returned%20by%20this%20function%0A%20%20%20%20%20%20var%20collision%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FWhich%20points%20do%20you%20want%20to%20check%3F%0A%20%20%20%20%20%20%2F%2F%22every%22%2C%20%22some%22%20or%20%22center%22%3F%0A%20%20%20%20%20%20switch%20%28pointsToCheck%29%20%7B%0A%20%20%20%20%20%20%20%20case%20%22center%22%3A%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%60hit%60%20will%20be%20true%20only%20if%20the%20center%20point%20is%20touching%0A%20%20%20%20%20%20%20%20%20%20var%20point%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20center%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fx%3A%20sprite%2EcenterX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fy%3A%20sprite%2EcenterY%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2EcartX%20%2B%20ca%2Ex%20%2B%20ca%2Ewidth%20%2F%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2EcartY%20%2B%20ca%2Ey%20%2B%20ca%2Eheight%20%2F%202%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20sprite%2EcollisionPoints%20%3D%20point%3B%0A%20%20%20%20%20%20%20%20%20%20collision%2Ehit%20%3D%20Object%2Ekeys%28sprite%2EcollisionPoints%29%2Esome%28checkPoints%29%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22every%22%3A%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%60hit%60%20will%20be%20true%20if%20every%20point%20is%20touching%0A%20%20%20%20%20%20%20%20%20%20sprite%2EcollisionPoints%20%3D%20this%2EgetIsoPoints%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20collision%2Ehit%20%3D%20Object%2Ekeys%28sprite%2EcollisionPoints%29%2Eevery%28checkPoints%29%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22some%22%3A%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%60hit%60%20will%20be%20true%20only%20if%20some%20points%20are%20touching%0A%20%20%20%20%20%20%20%20%20%20sprite%2EcollisionPoints%20%3D%20this%2EgetIsoPoints%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20collision%2Ehit%20%3D%20Object%2Ekeys%28sprite%2EcollisionPoints%29%2Esome%28checkPoints%29%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20collision%20object%2E%0A%20%20%20%20%20%20%2F%2F%60collision%2Ehit%60%20will%20be%20true%20if%20a%20collision%20is%20detected%2E%0A%20%20%20%20%20%20%2F%2F%60collision%2Eindex%60%20tells%20you%20the%20map%20array%20index%20number%20where%20the%0A%20%20%20%20%20%20%2F%2Fcollision%20occured%0A%20%20%20%20%20%20return%20collision%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%23%23%23%20getIsoPoints%0A%20%20%20%20The%20isomertic%20version%20of%20%60getPoints%60%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22getIsoPoints%22%2C%0A%20%20%20%20value%3A%20function%20getIsoPoints%28s%29%20%7B%0A%20%20%20%20%20%20var%20ca%20%3D%20s%2EcollisionArea%3B%0A%20%20%20%20%20%20if%20%28ca%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20topLeft%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2EcartX%20%2B%20ca%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2EcartY%20%2B%20ca%2Ey%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20topRight%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2EcartX%20%2B%20ca%2Ex%20%2B%20ca%2Ewidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2EcartY%20%2B%20ca%2Ey%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20bottomLeft%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2EcartX%20%2B%20ca%2Ex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2EcartY%20%2B%20ca%2Ey%20%2B%20ca%2Eheight%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20bottomRight%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2EcartX%20%2B%20ca%2Ex%20%2B%20ca%2Ewidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2EcartY%20%2B%20ca%2Ey%20%2B%20ca%2Eheight%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20topLeft%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2EcartX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2EcartY%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20topRight%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2EcartX%20%2B%20s%2EcartWidth%20%2D%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2EcartY%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20bottomLeft%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2EcartX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2EcartY%20%2B%20s%2EcartHeight%20%2D%201%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20bottomRight%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20s%2EcartX%20%2B%20s%2EcartWidth%20%2D%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20s%2EcartY%20%2B%20s%2EcartHeight%20%2D%201%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%23%23%23%20makeIsoPointer%0A%20%20%20%20Used%20to%20add%20a%20isometric%20properties%20to%20any%20mouse%2Ftouch%20%60pointer%60%20object%20with%20%0A%20%20%20%20%60x%60%20and%20%60y%60%20properties%2E%20Supply%20%60makeIsoPointer%60%20with%20the%20pointer%20object%20and%0A%20%20%20%20the%20isometric%20%60world%60%20object%20%0A%20%20%20%20%2A%2F%0A%0A%20%20%20%20%2F%2FCreate%20some%20useful%20properties%20on%20the%20pointer%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22makeIsoPointer%22%2C%0A%20%20%20%20value%3A%20function%20makeIsoPointer%28pointer%2C%20world%29%20%7B%0A%20%20%20%20%20%20Object%2EdefineProperties%28pointer%2C%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20isometric%27s%20world%27s%20Cartesian%20coordiantes%0A%20%20%20%20%20%20%20%20cartX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20%282%20%2A%20this%2Ey%20%2B%20this%2Ex%20%2D%20%282%20%2A%20world%2Ey%20%2B%20world%2Ex%29%29%20%2F%202%20%2D%20world%2EcartTilewidth%20%2F%202%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20cartY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20y%20%3D%20%282%20%2A%20this%2Ey%20%2D%20this%2Ex%20%2D%20%282%20%2A%20world%2Ey%20%2D%20world%2Ex%29%29%20%2F%202%20%2B%20world%2EcartTileheight%20%2F%202%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20y%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20tile%27s%20column%20and%20row%20in%20the%20array%0A%20%20%20%20%20%20%20%20column%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20Math%2Efloor%28this%2EcartX%20%2F%20world%2EcartTilewidth%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20row%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20Math%2Efloor%28this%2EcartY%20%2F%20world%2EcartTileheight%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20tile%27s%20index%20number%20in%20the%20array%0A%20%20%20%20%20%20%20%20index%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20index%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FConvert%20pixel%20coordinates%20to%20map%20index%20coordinates%0A%20%20%20%20%20%20%20%20%20%20%20%20index%2Ex%20%3D%20Math%2Efloor%28this%2EcartX%20%2F%20world%2EcartTilewidth%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20index%2Ey%20%3D%20Math%2Efloor%28this%2EcartY%20%2F%20world%2EcartTileheight%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FReturn%20the%20index%20number%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20index%2Ex%20%2B%20index%2Ey%20%2A%20world%2EwidthInTiles%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%23%23%23%20isoRectangle%0A%20%20%20%20A%20function%20for%20creating%20a%20simple%20isometric%20diamond%0A%20%20%20%20shaped%20rectangle%20using%20Pixi%27s%20graphics%20library%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22isoRectangle%22%2C%0A%20%20%20%20value%3A%20function%20isoRectangle%28width%2C%20height%2C%20fillStyle%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FFigure%20out%20the%20%60halfHeight%60%20value%0A%20%20%20%20%20%20var%20halfHeight%20%3D%20height%20%2F%202%3B%0A%0A%20%20%20%20%20%20%2F%2FDraw%20the%20flattened%20and%20rotated%20square%20%28diamond%20shape%29%0A%20%20%20%20%20%20var%20rectangle%20%3D%20new%20this%2EGraphics%28%29%3B%0A%20%20%20%20%20%20rectangle%2EbeginFill%28fillStyle%29%3B%0A%20%20%20%20%20%20rectangle%2EmoveTo%280%2C%200%29%3B%0A%20%20%20%20%20%20rectangle%2ElineTo%28width%2C%20halfHeight%29%3B%0A%20%20%20%20%20%20rectangle%2ElineTo%280%2C%20height%29%3B%0A%20%20%20%20%20%20rectangle%2ElineTo%28%2Dwidth%2C%20halfHeight%29%3B%0A%20%20%20%20%20%20rectangle%2ElineTo%280%2C%200%29%3B%0A%20%20%20%20%20%20rectangle%2EendFill%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FGenerate%20a%20texture%20from%20the%20rectangle%0A%20%20%20%20%20%20var%20texture%20%3D%20rectangle%2EgenerateTexture%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FUse%20the%20texture%20to%20create%20a%20sprite%0A%20%20%20%20%20%20var%20sprite%20%3D%20new%20this%2ESprite%28texture%29%3B%0A%0A%20%20%20%20%20%20%2F%2FReturn%20it%20to%20the%20main%20program%0A%20%20%20%20%20%20return%20sprite%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%23%23%23%20addIsoProperties%0A%20%20%20%20Add%20properties%20to%20a%20sprite%20to%20help%20work%20between%20Cartesian%0A%20%20%20%20and%20isometric%20properties%3A%20%60isoX%60%2C%20%60isoY%60%2C%20%60cartX%60%2C%20%0A%20%20%20%20%60cartWidth%60%20and%20%60cartHeight%60%2E%0A%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22addIsoProperties%22%2C%0A%20%20%20%20value%3A%20function%20addIsoProperties%28sprite%2C%20x%2C%20y%2C%20width%2C%20height%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FCartisian%20%28flat%202D%29%20properties%0A%20%20%20%20%20%20sprite%2EcartX%20%3D%20x%3B%0A%20%20%20%20%20%20sprite%2EcartY%20%3D%20y%3B%0A%20%20%20%20%20%20sprite%2EcartWidth%20%3D%20width%3B%0A%20%20%20%20%20%20sprite%2EcartHeight%20%3D%20height%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20a%20getter%2Fsetter%20for%20the%20isometric%20properties%0A%20%20%20%20%20%20Object%2EdefineProperties%28sprite%2C%20%7B%0A%20%20%20%20%20%20%20%20isoX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%2EcartX%20%2D%20this%2EcartY%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20isoY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%28this%2EcartX%20%2B%20this%2EcartY%29%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2A%0A%20%20%20%20%23%23%23%20makeIsoTiledWorld%0A%20%20%20%20Make%20an%20isometric%20world%20from%20TiledEditor%20map%20data%2E%20Uses%20the%20same%20API%20as%20%60makeTiledWorld%60%0A%20%20%20%20%20%2A%2F%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22makeIsoTiledWorld%22%2C%0A%20%20%20%20value%3A%20function%20makeIsoTiledWorld%28jsonTiledMap%2C%20tileset%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis4%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20a%20group%20called%20%60world%60%20to%20contain%20all%20the%20layers%2C%20sprites%0A%20%20%20%20%20%20%2F%2Fand%20objects%20from%20the%20%60tiledMap%60%2E%20The%20%60world%60%20object%20is%20going%20to%20be%0A%20%20%20%20%20%20%2F%2Freturned%20to%20the%20main%20game%20program%0A%20%20%20%20%20%20var%20tiledMap%20%3D%20PIXI%2Eloader%2Eresources%5BjsonTiledMap%5D%2Edata%3B%0A%0A%20%20%20%20%20%20%2F%2FA%2E%20You%20need%20to%20add%20three%20custom%20properties%20to%20your%20Tiled%20Editor%0A%20%20%20%20%20%20%2F%2Fmap%3A%20%60cartTilewidth%60%2C%60cartTileheight%60%20and%20%60tileDepth%60%2E%20They%20define%20the%20Cartesian%0A%20%20%20%20%20%20%2F%2Fdimesions%20of%20the%20tiles%20%2832x32x64%29%2E%0A%20%20%20%20%20%20%2F%2FCheck%20to%20make%20sure%20that%20these%20custom%20properties%20exist%20%0A%20%20%20%20%20%20if%20%28%21tiledMap%2Eproperties%2EcartTilewidth%20%26%26%20%21tiledMap%2Eproperties%2EcartTileheight%20%26%26%20%21tiledMao%2Eproperties%2EtileDepth%29%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28%22Set%20custom%20cartTilewidth%2C%20cartTileheight%20and%20tileDepth%20map%20properties%20in%20Tiled%20Editor%22%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FCreate%20the%20%60world%60%20container%0A%20%20%20%20%20%20var%20world%20%3D%20new%20this%2EContainer%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2FB%2E%20Set%20the%20%60tileHeight%60%20to%20the%20%60tiledMap%60%27s%20%60tileDepth%60%20property%0A%20%20%20%20%20%20%2F%2Fso%20that%20it%20matches%20the%20pixel%20height%20of%20the%20sprite%20tile%20image%0A%20%20%20%20%20%20world%2Etileheight%20%3D%20parseInt%28tiledMap%2Eproperties%2EtileDepth%29%3B%0A%20%20%20%20%20%20world%2Etilewidth%20%3D%20tiledMap%2Etilewidth%3B%0A%0A%20%20%20%20%20%20%2F%2FC%2E%20Define%20the%20Cartesian%20dimesions%20of%20each%20tile%0A%20%20%20%20%20%20world%2EcartTileheight%20%3D%20parseInt%28tiledMap%2Eproperties%2EcartTileheight%29%3B%0A%20%20%20%20%20%20world%2EcartTilewidth%20%3D%20parseInt%28tiledMap%2Eproperties%2EcartTilewidth%29%3B%0A%0A%20%20%20%20%20%20%2F%2FD%2E%20Calculate%20the%20%60width%60%20and%20%60height%60%20of%20the%20world%2C%20in%20pixels%0A%20%20%20%20%20%20%2F%2Fusing%20the%20%60world%2EcartTileHeight%60%20and%20%60world%2EcartTilewidth%60%0A%20%20%20%20%20%20%2F%2Fvalues%0A%20%20%20%20%20%20world%2EworldWidth%20%3D%20tiledMap%2Ewidth%20%2A%20world%2EcartTilewidth%3B%0A%20%20%20%20%20%20world%2EworldHeight%20%3D%20tiledMap%2Eheight%20%2A%20world%2EcartTileheight%3B%0A%0A%20%20%20%20%20%20%2F%2FGet%20a%20reference%20to%20the%20world%27s%20height%20and%20width%20in%0A%20%20%20%20%20%20%2F%2Ftiles%2C%20in%20case%20you%20need%20to%20know%20this%20later%20%28you%20will%21%29%0A%20%20%20%20%20%20world%2EwidthInTiles%20%3D%20tiledMap%2Ewidth%3B%0A%20%20%20%20%20%20world%2EheightInTiles%20%3D%20tiledMap%2Eheight%3B%0A%0A%20%20%20%20%20%20%2F%2FCreate%20an%20%60objects%60%20array%20to%20store%20references%20to%20any%0A%20%20%20%20%20%20%2F%2Fnamed%20objects%20in%20the%20map%2E%20Named%20objects%20all%20have%0A%20%20%20%20%20%20%2F%2Fa%20%60name%60%20property%20that%20was%20assigned%20in%20Tiled%20Editor%0A%20%20%20%20%20%20world%2Eobjects%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20optional%20spacing%20%28padding%29%20around%20each%20tile%0A%20%20%20%20%20%20%2F%2FThis%20is%20to%20account%20for%20spacing%20around%20tiles%0A%20%20%20%20%20%20%2F%2Fthat%27s%20commonly%20used%20with%20texture%20atlas%20tilesets%2E%20Set%20the%0A%20%20%20%20%20%20%2F%2F%60spacing%60%20property%20when%20you%20create%20a%20new%20map%20in%20Tiled%20Editor%0A%20%20%20%20%20%20var%20spacing%20%3D%20tiledMap%2Etilesets%5B0%5D%2Espacing%3B%0A%0A%20%20%20%20%20%20%2F%2FFigure%20out%20how%20many%20columns%20there%20are%20on%20the%20tileset%2E%0A%20%20%20%20%20%20%2F%2FThis%20is%20the%20width%20of%20the%20image%2C%20divided%20by%20the%20width%0A%20%20%20%20%20%20%2F%2Fof%20each%20tile%2C%20plus%20any%20optional%20spacing%20thats%20around%20each%20tile%0A%20%20%20%20%20%20var%20numberOfTilesetColumns%20%3D%20Math%2Efloor%28tiledMap%2Etilesets%5B0%5D%2Eimagewidth%20%2F%20%28tiledMap%2Etilewidth%20%2B%20spacing%29%29%3B%0A%0A%20%20%20%20%20%20%2F%2FE%2E%20A%20%60z%60%20property%20to%20help%20track%20which%20depth%20level%20the%20sprites%20are%20on%0A%20%20%20%20%20%20var%20z%20%3D%200%3B%0A%0A%20%20%20%20%20%20%2F%2FLoop%20through%20all%20the%20map%20layers%0A%20%20%20%20%20%20tiledMap%2Elayers%2EforEach%28function%20%28tiledLayer%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FMake%20a%20group%20for%20this%20layer%20and%20copy%0A%20%20%20%20%20%20%20%20%2F%2Fall%20of%20the%20layer%20properties%20onto%20it%2E%0A%20%20%20%20%20%20%20%20var%20layerGroup%20%3D%20new%20%5Fthis4%2EContainer%28%29%3B%0A%0A%20%20%20%20%20%20%20%20Object%2Ekeys%28tiledLayer%29%2EforEach%28function%20%28key%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20all%20the%20layer%27s%20properties%20to%20the%20group%2C%20except%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fwidth%20and%20height%20%28because%20the%20group%20will%20work%20those%20our%20for%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fitself%20based%20on%20its%20content%29%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28key%20%21%3D%3D%20%22width%22%20%26%26%20key%20%21%3D%3D%20%22height%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20layerGroup%5Bkey%5D%20%3D%20tiledLayer%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FTranslate%20%60opacity%60%20to%20%60alpha%60%0A%20%20%20%20%20%20%20%20layerGroup%2Ealpha%20%3D%20tiledLayer%2Eopacity%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20group%20to%20the%20%60world%60%0A%20%20%20%20%20%20%20%20world%2EaddChild%28layerGroup%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FPush%20the%20group%20into%20the%20world%27s%20%60objects%60%20array%0A%20%20%20%20%20%20%20%20%2F%2FSo%20you%20can%20access%20it%20later%0A%20%20%20%20%20%20%20%20world%2Eobjects%2Epush%28layerGroup%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIs%20this%20current%20layer%20a%20%60tilelayer%60%3F%0A%20%20%20%20%20%20%20%20if%20%28tiledLayer%2Etype%20%3D%3D%3D%20%22tilelayer%22%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FLoop%20through%20the%20%60data%60%20array%20of%20this%20layer%0A%20%20%20%20%20%20%20%20%20%20tiledLayer%2Edata%2EforEach%28function%20%28gid%2C%20index%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20tileSprite%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20texture%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapX%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapY%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetX%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetY%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapColumn%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapRow%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetColumn%20%3D%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetRow%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20grid%20id%20number%20%28%60gid%60%29%20isn%27t%20zero%2C%20create%20a%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28gid%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28function%20%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20the%20map%20column%20and%20row%20number%20that%20we%27re%20on%2C%20and%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fcalculate%20the%20grid%20cell%27s%20x%20and%20y%20pixel%20position%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapColumn%20%3D%20index%20%25%20world%2EwidthInTiles%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapRow%20%3D%20Math%2Efloor%28index%20%2F%20world%2EwidthInTiles%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FF%2E%20Use%20the%20Cartesian%20values%20to%20find%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%60mapX%60%20and%20%60mapY%60%20values%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapX%20%3D%20mapColumn%20%2A%20world%2EcartTilewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapY%20%3D%20mapRow%20%2A%20world%2EcartTileheight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FFigure%20out%20the%20column%20and%20row%20number%20that%20the%20tileset%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fimage%20is%20on%2C%20and%20then%20use%20those%20values%20to%20calculate%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20x%20and%20y%20pixel%20position%20of%20the%20image%20on%20the%20tileset%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetColumn%20%3D%20%28gid%20%2D%201%29%20%25%20numberOfTilesetColumns%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetRow%20%3D%20Math%2Efloor%28%28gid%20%2D%201%29%20%2F%20numberOfTilesetColumns%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetX%20%3D%20tilesetColumn%20%2A%20world%2Etilewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetY%20%3D%20tilesetRow%20%2A%20world%2Etileheight%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCompensate%20for%20any%20optional%20spacing%20%28padding%29%20around%20the%20tiles%20if%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthere%20is%20any%2E%20This%20bit%20of%20code%20accumlates%20the%20spacing%20offsets%20from%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fleft%20side%20of%20the%20tileset%20and%20adds%20them%20to%20the%20current%20tile%27s%20position%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28spacing%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetX%20%2B%3D%20spacing%20%2B%20spacing%20%2A%20%28%28gid%20%2D%201%29%20%25%20numberOfTilesetColumns%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tilesetY%20%2B%3D%20spacing%20%2B%20spacing%20%2A%20Math%2Efloor%28%28gid%20%2D%201%29%20%2F%20numberOfTilesetColumns%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FUse%20the%20above%20values%20to%20create%20the%20sprite%27s%20image%20from%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20tileset%20image%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20texture%20%3D%20g%2Eframe%28tileset%2C%20tilesetX%2C%20tilesetY%2C%20world%2Etilewidth%2C%20world%2Etileheight%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FI%27ve%20dedcided%20that%20any%20tiles%20that%20have%20a%20%60name%60%20property%20are%20important%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fand%20should%20be%20accessible%20in%20the%20%60world%2Eobjects%60%20array%2E%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20tileproperties%20%3D%20tiledMap%2Etilesets%5B0%5D%2Etileproperties%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%20%3D%20String%28gid%20%2D%201%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20JSON%20%60tileproperties%60%20object%20has%20a%20sub%2Dobject%20that%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fmatches%20the%20current%20tile%2C%20and%20that%20sub%2Dobject%20has%20a%20%60name%60%20property%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthen%20create%20a%20sprite%20and%20assign%20the%20tile%20properties%20onto%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28tileproperties%5Bkey%5D%20%26%26%20tileproperties%5Bkey%5D%2Ename%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMake%20a%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%20%3D%20new%20%5Fthis4%2ESprite%28texture%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FCopy%20all%20of%20the%20tile%27s%20properties%20onto%20the%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%28This%20includes%20the%20%60name%60%20property%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Object%2Ekeys%28tileproperties%5Bkey%5D%29%2EforEach%28function%20%28property%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fconsole%2Elog%28tileproperties%5Bkey%5D%5Bproperty%5D%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%5Bproperty%5D%20%3D%20tileproperties%5Bkey%5D%5Bproperty%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FPush%20the%20sprite%20into%20the%20world%27s%20%60objects%60%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fso%20that%20you%20can%20access%20it%20by%20%60name%60%20later%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20world%2Eobjects%2Epush%28tileSprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FIf%20the%20tile%20doesn%27t%20have%20a%20%60name%60%20property%2C%20just%20use%20it%20to%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fcreate%20an%20ordinary%20sprite%20%28it%20will%20only%20need%20one%20texture%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%20%3D%20new%20%5Fthis4%2ESprite%28texture%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FG%2E%20Add%20isometric%20properties%20to%20the%20sprite%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Fthis4%2EaddIsoProperties%28tileSprite%2C%20mapX%2C%20mapY%2C%20world%2EcartTilewidth%2C%20world%2EcartTileheight%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FH%2E%20Use%20the%20isometric%20position%20to%20add%20the%20sprite%20to%20the%20world%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%2Ex%20%3D%20tileSprite%2EisoX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%2Ey%20%3D%20tileSprite%2EisoY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%2Ez%20%3D%20z%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMake%20a%20record%20of%20the%20sprite%27s%20index%20number%20in%20the%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%28We%27ll%20use%20this%20for%20collision%20detection%20later%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%2Eindex%20%3D%20index%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FMake%20a%20record%20of%20the%20sprite%27s%20%60gid%60%20on%20the%20tileset%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThis%20will%20also%20be%20useful%20for%20collision%20detection%20later%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tileSprite%2Egid%20%3D%20gid%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20sprite%20to%20the%20current%20layer%20group%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20layerGroup%2EaddChild%28tileSprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FIs%20this%20layer%20an%20%60objectgroup%60%3F%0A%20%20%20%20%20%20%20%20if%20%28tiledLayer%2Etype%20%3D%3D%3D%20%22objectgroup%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20tiledLayer%2Eobjects%2EforEach%28function%20%28object%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FWe%27re%20just%20going%20to%20capture%20the%20object%27s%20properties%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fso%20that%20we%20can%20decide%20what%20to%20do%20with%20it%20later%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGet%20a%20reference%20to%20the%20layer%20group%20the%20object%20is%20in%0A%20%20%20%20%20%20%20%20%20%20%20%20object%2Egroup%20%3D%20layerGroup%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FPush%20the%20object%20into%20the%20world%27s%20%60objects%60%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20world%2Eobjects%2Epush%28object%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FI%2E%20Add%201%20to%20the%20z%20index%20%28the%20first%20layer%20will%20have%20a%20z%20index%20of%20%601%60%29%0A%20%20%20%20%20%20%20%20z%20%2B%3D%201%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FSearch%20functions%0A%20%20%20%20%20%20%2F%2F%60world%2EgetObject%60%20and%20%60world%2EgetObjects%60%20%20search%20for%20and%20return%0A%20%20%20%20%20%20%2F%2Fany%20sprites%20or%20objects%20in%20the%20%60world%2Eobjects%60%20array%2E%0A%20%20%20%20%20%20%2F%2FAny%20object%20that%20has%20a%20%60name%60%20propery%20in%0A%20%20%20%20%20%20%2F%2FTiled%20Editor%20will%20show%20up%20in%20a%20search%2E%0A%20%20%20%20%20%20%2F%2F%60getObject%60%20gives%20you%20a%20single%20object%2C%20%60getObjects%60%20gives%20you%20an%20array%0A%20%20%20%20%20%20%2F%2Fof%20objects%2E%0A%20%20%20%20%20%20%2F%2F%60getObject%60%20returns%20the%20actual%20search%20function%2C%20so%20you%0A%20%20%20%20%20%20%2F%2Fcan%20use%20the%20following%20format%20to%20directly%20access%20a%20single%20object%3A%0A%20%20%20%20%20%20%2F%2Fsprite%2Ex%20%3D%20world%2EgetObject%28%22anySprite%22%29%2Ex%3B%0A%20%20%20%20%20%20%2F%2Fsprite%2Ey%20%3D%20world%2EgetObject%28%22anySprite%22%29%2Ey%3B%0A%0A%20%20%20%20%20%20world%2EgetObject%20%3D%20function%20%28objectName%29%20%7B%0A%20%20%20%20%20%20%20%20var%20searchForObject%20%3D%20function%20searchForObject%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20foundObject%20%3D%20undefined%3B%0A%20%20%20%20%20%20%20%20%20%20world%2Eobjects%2Esome%28function%20%28object%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28object%2Ename%20%26%26%20object%2Ename%20%3D%3D%3D%20objectName%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20foundObject%20%3D%20object%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28foundObject%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20foundObject%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%22There%20is%20no%20object%20with%20the%20property%20name%3A%20%22%20%2B%20objectName%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FReturn%20the%20search%20function%0A%20%20%20%20%20%20%20%20return%20searchForObject%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20world%2EgetObjects%20%3D%20function%20%28objectNames%29%20%7B%0A%20%20%20%20%20%20%20%20var%20foundObjects%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20world%2Eobjects%2EforEach%28function%20%28object%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28object%2Ename%20%26%26%20objectNames%2EindexOf%28object%2Ename%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20foundObjects%2Epush%28object%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20if%20%28foundObjects%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20foundObjects%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%22I%20could%20not%20find%20those%20objects%22%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20foundObjects%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FThat%27s%20it%2C%20we%27re%20done%21%0A%20%20%20%20%20%20%2F%2FFinally%2C%20return%20the%20%60world%60%20object%20back%20to%20the%20game%20program%0A%20%20%20%20%20%20return%20world%3B%0A%20%20%20%20%7D%0A%20%20%7D%5D%29%3B%0A%0A%20%20return%20TileUtilities%3B%0A%7D%29%28%29%3B%0A%2F%2F%23%20sourceMappingURL%3DtileUtilities%2Ejs%2Emap%22use%20strict%22%3B%0A%0Avar%20%5FcreateClass%20%3D%20%28function%20%28%29%20%7B%20function%20defineProperties%28target%2C%20props%29%20%7B%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20props%2Elength%3B%20i%2B%2B%29%20%7B%20var%20descriptor%20%3D%20props%5Bi%5D%3B%20descriptor%2Eenumerable%20%3D%20descriptor%2Eenumerable%20%7C%7C%20false%3B%20descriptor%2Econfigurable%20%3D%20true%3B%20if%20%28%22value%22%20in%20descriptor%29%20descriptor%2Ewritable%20%3D%20true%3B%20Object%2EdefineProperty%28target%2C%20descriptor%2Ekey%2C%20descriptor%29%3B%20%7D%20%7D%20return%20function%20%28Constructor%2C%20protoProps%2C%20staticProps%29%20%7B%20if%20%28protoProps%29%20defineProperties%28Constructor%2Eprototype%2C%20protoProps%29%3B%20if%20%28staticProps%29%20defineProperties%28Constructor%2C%20staticProps%29%3B%20return%20Constructor%3B%20%7D%3B%20%7D%29%28%29%3B%0A%0Afunction%20%5FclassCallCheck%28instance%2C%20Constructor%29%20%7B%20if%20%28%21%28instance%20instanceof%20Constructor%29%29%20%7B%20throw%20new%20TypeError%28%22Cannot%20call%20a%20class%20as%20a%20function%22%29%3B%20%7D%20%7D%0A%0A%2F%2A%0AHexi%0A%3D%3D%3D%3D%0A%20%20%20%0AWelcome%20to%20Hexi%27s%20source%20code%21%0AThis%20file%2C%20%60core%2Ejs%60%20is%20the%20glue%20that%20holds%20Hexi%20together%2E%20Most%20of%20Hexi%27s%20functionality%20comes%0Afrom%20some%20external%20libraries%2C%20written%20for%20Hexi%2C%20that%20%60core%2Ejs%60%20instantiates%20and%20wires%0Atogether%2E%20Here%20are%20the%20external%20libraries%20that%20Hexi%20is%20currently%20using%3A%0A%0A%2D%20%5BPixi%5D%28https%3A%2F%2Fgithub%2Ecom%2Fpixijs%2Fpixi%2Ejs%2F%29%3A%20The%20world%27s%20fastest%202D%20WebGL%20and%20canvas%20renderer%2E%0A%2D%20%5BBump%5D%28https%3A%2F%2Fgithub%2Ecom%2Fkittykatattack%2Fbump%29%3A%20A%20complete%20suite%20of%202D%20collision%20functions%20for%20games%2E%0A%2D%20%5BTink%5D%28https%3A%2F%2Fgithub%2Ecom%2Fkittykatattack%2Ftink%29%3A%20Drag%2Dand%2Ddrop%2C%20buttons%2C%20a%20universal%20pointer%20and%20other%0A%20%20helpful%20interactivity%20tools%2E%0A%2D%20%5BCharm%5D%28https%3A%2F%2Fgithub%2Ecom%2Fkittykatattack%2Fcharm%29%3A%20Easy%2Dto%2Duse%20tweening%20animation%20effects%20for%20Pixi%20sprites%2E%0A%2D%20%5BDust%5D%28https%3A%2F%2Fgithub%2Ecom%2Fkittykatattack%2Fdust%29%3A%20Particle%20effects%20for%20creating%20things%20like%20explosions%2C%20fire%0A%20%20and%20magic%2E%0A%2D%20%5BSprite%20Utilities%5D%28https%3A%2F%2Fgithub%2Ecom%2Fkittykatattack%2FspriteUtilities%29%3A%20Easier%20and%20more%20intuitive%20ways%20to%0A%20%20create%20and%20use%20Pixi%20sprites%2C%20as%20well%20adding%20a%20state%20machine%20and%20animation%20player%0A%2D%20%5BGame%20Utilities%5D%28https%3A%2F%2Fgithub%2Ecom%2Fkittykatattack%2FgameUtilities%29%3A%20A%20collection%20of%20useful%20methods%20for%20games%2E%0A%2D%20%5BTile%20Utilities%5D%28https%3A%2F%2Fgithub%2Ecom%2Fkittykatattack%2FtileUtilities%29%3A%20A%20collection%20of%20useful%20methods%20for%20making%20tile%2Dbased%20game%20worlds%20with%20%5BTiled%20Editor%5D%28http%3A%2F%2Fwww%2Emapeditor%2Eorg%29%2E%0A%2D%20%5BSound%2Ejs%5D%28https%3A%2F%2Fgithub%2Ecom%2Fkittykatattack%2Fsound%2Ejs%29%3A%20A%20micro%2Dlibrary%20for%20loading%2C%20controlling%20and%20generating%0A%20%20sound%20and%20music%20effects%2E%20Everything%20you%20need%20to%20add%20sound%20to%20games%2E%0A%2D%20%5BfullScreen%2Ejs%5D%28https%3A%2F%2Fgithub%2Ecom%2Fkittykatattack%2FfullScreen%29%3A%20Adds%20an%20easy%2Dto%2Dimplement%20full%20screen%20feature%2E%0A%2D%20%5BSmoothie%5D%28https%3A%2F%2Fgithub%2Ecom%2Fkittykatattack%2Fsmoothie%29%3A%20Ultra%2Dsmooth%20sprite%20animation%20using%20%0A%20%20true%20delta%2Dtime%20interpolation%2E%20It%20also%20lets%20you%20specify%20the%20fps%20%28frames%2Dper%2Dsecond%29%20at%20which%20%0A%20%20your%20game%20or%20application%20runs%2C%20and%20completely%20separates%20your%20sprite%20rendering%20loop%20from%20your%0A%20%20application%20logic%20loop%2E%0A%0AThe%20job%20of%20%60core%2Ejs%60%20%28this%20file%21%29%20is%20to%20instantiate%20Hexi%2C%20load%20the%20assets%2C%20start%20the%20game%20loop%2C%20and%20%0Acreate%20top%2Dlevel%20access%20to%20most%20of%20the%20properties%20and%20methods%20in%20the%20external%20libraries%2E%0AIt%20also%20customizes%20some%20of%20those%20methods%20and%20runs%20them%20with%20some%20useful%20side%2Deffects%2C%20such%20as%20%0Aautomatically%20adding%20sprites%20to%20Hexi%27s%20%60stage%60%2E%20%28Hexi%27s%20%60stage%60%20is%20the%20root%20Pixi%20%60Container%60%20for%20the%20display%20list%2E%29%0A%0AI%27ve%20divided%20this%20%60core%2Ejs%60%20file%20into%20%22Chapters%22%20which%20describes%20what%20each%20major%20section%20of%20code%20does%2E%0AYou%27ll%20find%20a%20%22Table%20of%20Contents%22%20ahead%2C%20which%20is%20your%20guide%20to%20this%20file%2E%0AAll%20this%20code%20is%20fully%20commented%2C%20but%20if%20there%27s%20something%20you%20don%27t%20understand%2C%20please%20ask%20%0Ain%20this%20repository%27s%20Issues%20and%20we%20will%20do%20our%20best%20to%20help%2E%20All%20this%20code%20is%20in%20one%20single%20file%20for%20now%2C%20just%20for%20the%20sake%20of%20simplicity%2C%0Auntil%20the%20total%20scope%20of%20this%20project%20stabilizes%2E%20%0A%0AHexi%27s%20build%20system%0A%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%0AAll%20of%20Hexi%27s%20source%20code%20is%20written%20in%20JavaScript%20ES6%2C%20transpiled%20to%20ES5%20using%20Babel%2C%20and%20minified%20using%20Uglify2%2E%20%0AMake%20is%20currently%20being%20used%20as%20the%20build%0Asystem%2E%20So%2C%20to%20build%20Hexi%2C%20make%20sure%20you%20have%20Node%2C%20Babel%20and%20Uglify2%20installed%2C%20and%20call%20%60make%60%20in%20the%20%0Acommand%20line%20from%20Hexi%27s%20root%20directory%2E%20Make%20will%20compile%20the%20%60core%2Ejs%60%20file%2C%20concatenate%20all%20files%20%28including%0Athe%20modules%29%20and%20produce%20the%20%60hexi%2Emin%2Ejs%60%20file%20using%20Uglify2%2E%0A%0AYou%20can%20also%20use%20Make%20to%20build%20individual%20sections%20of%20Hexi%27s%20code%20base%2E%0AIf%20you%20just%20want%20to%20watch%20and%20compile%20the%20core%2Ejs%20file%20from%20ES6%20to%20ES5%2C%20run%3A%0A%0A%20%20%20make%20watchSrc%0A%0AIf%20you%20want%20to%20concatenate%20all%20the%20modules%2C%20run%3A%0A%0A%20%20make%20concatModules%0A%0AIf%20you%20want%20to%20concatenate%20all%20the%20files%2C%20run%3A%0A%0A%20%20make%20concatAllFiles%0A%0ATo%20watch%20and%20compile%20the%20example%20files%20from%20ES6%20to%20ES5%2C%20run%3A%0A%20%20%0A%20%20make%20watchExamples%0A%0ATo%20watch%20and%20compile%20the%20tutorial%20files%20from%20ES6%20to%20ES5%2C%20run%3A%0A%0A%20%20make%20watchTutorials%0A%0AIf%20anyone%20reading%20this%20wishes%20to%20contribute%20a%20simpler%2C%20more%20automated%20system%20using%20Grunt%20of%20Gulp%2C%20%0Awe%20would%20welcome%20the%20contribution%21%0A%0ATable%20of%20Contents%0A%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%0AHere%27s%20your%20handy%20guide%20to%20this%20%60core%2Ejs%60%20file%2E%0A%0A1%2E%20Setup%20and%20instantiation%2E%0A2%2E%20The%20%60Hexi%60%20class%20constructor%2E%0A3%2E%20Hexi%27s%20engine%3A%20%60start%60%2C%20%60load%60%20and%20%60update%60%20methods%2E%0A4%2E%20Module%20interfaces%3A%20Hexi%27s%20top%2Dlevel%20access%20to%20the%20module%20properties%20and%20methods%2E%0A5%2E%20Sprite%20creation%20methods%3A%20%60sprite%60%2C%20%60tilingSprite%60%2C%20%60text%60%2C%20%60bitmapText%60%2C%20%60rectangle%60%2C%20%60circle%60%2C%20%60line%60%2C%20%60button%60%2E%0A6%2E%20Display%20utilities%3A%20%60group%60%2C%20%60batch%60%2C%20%60grid%60%2C%20%60makeTiledWorld%60%2C%20%60remove%60%2C%20%60flowRight%60%2C%20%60flowDown%60%2C%20%60flowLeft%60%2C%20%60flowUp%60%2E%0A7%2E%20Sprite%20properties%3A%20Hexi%27s%20custom%20sprite%20properties%20%28also%20known%20as%20super%2Dpowers%21%29%2E%0A8%2E%20Utilities%3A%20%60scaleToWindow%60%2C%20%60log%60%2C%20%60makeProgressBar%60%2C%20%60loadingBar%60%2C%20%60compensateForStageSize%60%2C%20%60image%60%2C%20%60id%60%2C%20%60json%60%2C%20%60xml%60%2C%20%60sound%60%0A%0A%2A%2F%0A%0A%2F%2F1%2E%20SETUP%20AND%20INSTANTIATION%0A%2F%2F%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%0A%2F%2FIMPORTANT%3A%20Make%20sure%20to%20load%20Pixi%20and%20the%20modules%20before%20instantiating%20Hexi%21%0A%0A%2F%2FThe%20high%20level%20%60hexi%60%20function%20lets%20you%20quickly%20create%20an%20instance%0A%2F%2Fof%20Hexi%20using%20sensible%20defaults%2E%0Afunction%20hexi%28width%2C%20height%2C%20setup%29%20%7B%0A%20%20var%20thingsToLoad%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B3%5D%3B%0A%20%20var%20load%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B4%5D%3B%0A%0A%20%20%2F%2FIf%20you%20need%20to%2C%20you%20can%20also%20instantiate%20Hexi%20with%20a%20configuration%0A%20%20%2F%2Fobject%2C%20which%20lets%20you%20fine%2Dtune%20the%20options%2E%0A%20%20var%20hexi%20%3D%20new%20Hexi%28%7B%0A%0A%20%20%20%20%2F%2FRequired%20options%3A%0A%20%20%20%20width%3A%20width%2C%20%2F%2FWidth%2C%20in%20pixels%0A%20%20%20%20height%3A%20height%2C%20%2F%2FHeight%2C%20in%20pixels%0A%20%20%20%20setup%3A%20setup%2C%20%2F%2FFunction%20to%20run%20when%20Hexi%20starts%0A%0A%20%20%20%20%2F%2FOptional%20options%3A%0A%20%20%20%20assets%3A%20thingsToLoad%2C%20%2F%2FArray%20of%20assets%20that%20should%20be%20loaded%0A%20%20%20%20load%3A%20load%2C%20%2F%2FFunction%20to%20run%20while%20Hexi%20is%20loading%20asssets%0A%20%20%20%20%2F%2A%0A%20%20%20%20renderer%3A%20%22auto%22%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%22auto%22%2C%20%22canvas%22%20or%20%22webgl%22%0A%20%20%20%20backgroundColor%3A%200xCCCCCC%2C%20%20%20%20%2F%2FHexadecimal%20color%20code%0A%20%20%20%20border%3A%20%221px%20dashed%20black%22%2C%20%20%20%2F%2FCSS%20border%20string%0A%20%20%20%20scaleToWindow%3A%20true%2C%20%20%20%20%20%20%20%20%20%20%2F%2FBoolean%0A%20%20%20%20scaleBorderColor%3A%20%22gray%22%2C%20%20%20%20%20%2F%2FColor%20string%0A%20%20%20%20fps%3A%2030%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FThe%20frames%20per%20second%20the%20logic%20loop%20should%20run%20at%0A%20%20%20%20%20%2F%2FAn%20an%20object%20of%20Boolean%20%28true%2Ffalse%29%20properties%20that%20describe%20which%20sprite%0A%20%20%20%20%2F%2Fproperties%20should%20%20be%20smoothly%20animated%2E%20These%20can%20be%20any%20of%205%0A%20%20%20%20%2F%2Fproperties%3A%20%60position%60%2C%20%60rotation%60%2C%20%60size%60%2C%20%60scale%60%20or%20%60alpha%60%2E%0A%20%20%20%20%2F%2F%28Position%20and%20rotation%20are%20on%20by%20default%2C%20unless%20you%20set%20Hexi%27s%0A%20%20%20%20%2F%2F%60interpolate%60%20property%20to%20%60false%60%29%0A%20%20%20%20%2A%2F%0A%20%20%20%20interpolationProperties%3A%20%7B%0A%20%20%20%20%20%20position%3A%20true%2C%0A%20%20%20%20%20%20rotation%3A%20true%2C%0A%20%20%20%20%20%20size%3A%20true%2C%0A%20%20%20%20%20%20alpha%3A%20true%0A%20%20%20%20%7D%2C%0A%20%20%20%20interpolate%3A%20true%0A%0A%20%20%7D%29%3B%0A%0A%20%20%2F%2FTo%20change%20PIXI%27s%20renderer%2C%20set%20the%20%60renderer%60%20option%20to%0A%20%20%2F%2F%22auto%22%2C%20%22canvas%22%20or%20%22webgl%22%2C%20like%20this%3A%0A%20%20%2F%2Frenderer%3A%20%22auto%22%20%0A%20%20%2F%2FAdd%20any%20other%20Pixi%20initialization%20options%20you%20need%2C%20depending%0A%20%20%2F%2Fon%20which%20Pixi%20renderer%20you%27re%20using%0A%20%20return%20hexi%3B%0A%7D%0A%0A%2F%2FThe%20Hexi%20main%20class%2E%20It%20contains%20all%20of%20Hexi%27s%20properties%20and%0A%2F%2Fmethods%2C%20and%20sets%20up%20bindings%20between%20Hexi%20and%20the%20module%20libraries%2E%0A%2F%2FIf%20you%20need%20more%20find%20control%20over%20Hexi%27s%20initialization%20options%2C%0A%2F%2Fyou%20can%20create%20a%20new%20instance%20of%20the%20Hexi%20class%20directly%20in%20your%20application%0A%2F%2Fcode%2E%20See%20how%20it%27s%20done%20in%20the%20%60hexi%60%20function%20above%20for%20a%20good%20example%0A%2F%2Fof%20how%20to%20do%20that%2E%0A%0A%2F%2F2%2E%20THE%20HEXI%20CLASS%20CONSTRUCTOR%0A%2F%2F%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%0Avar%20Hexi%20%3D%20%28function%20%28%29%20%7B%0A%0A%20%20%2F%2A%0A%20%20Initialize%20Hexi%27s%20constructor%20with%20an%20options%20object%20literal%20called%20%60o%60%2E%20%0A%20%20Here%20are%20the%20required%20options%3A%0A%20%20%20%60width%60%3A%20Value%20in%20pixels%20that%20describes%20the%20canvas%27s%20width%0A%20%20%60height%60%3A%20Value%20in%20pixels%20that%20describes%20the%20canvas%27s%20height%0A%20%20%60setup%60%3A%20A%20function%20that%20should%20run%20as%20soon%20as%20Hexi%20is%20initialized%0A%20%20%20Here%20are%20the%20optional%20options%3A%0A%20%20%20%60assets%60%3A%20Array%20of%20assets%20%28files%29%20that%20should%20be%20loaded%0A%20%20%60load%60%3A%20A%20function%20that%20should%20run%20while%20Hexi%20is%20loading%20assets%0A%20%20%60renderer%60%3A%20The%20type%20of%20renderer%20to%20use%3A%20%22auto%22%20%28the%20default%29%2C%20%22canvas%22%20or%20%22webgl%22%0A%20%20%60backgroundColor%60%3A%20Hexadecimal%20color%20code%20that%20defines%20the%20canvas%20color%0A%20%20%60border%60%3A%20The%20canvas%20border%20style%20as%20a%20CSS%20border%20string%2C%20such%20as%20%221px%20dashed%20black%22%0A%20%20%60scaleToWindow%60%3A%20A%20Boolean%20that%20determines%20whether%20the%20canvas%20should%20scale%20to%20maximum%20window%20size%2E%0A%20%20%60scaleBorderColor%60%3A%20Color%20string%20that%20defines%20the%20color%20of%20the%20border%20around%20a%20scaled%20canvas%2E%0A%20%20%60interpolationProperties%3A%20An%20object%20that%20defines%205%20Boolean%20properties%20that%20determines%20which%20sprite%20properties%20are%20interpolated%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28smoothly%20animated%29%20by%20Hexi%27s%20rendering%20engine%20%28Smoothie%29%3A%20%60position%60%2C%20%60size%60%2C%20%60rotation%60%2C%20%60scale%60%20or%20%60alpha%60%0A%20%20%60interpolate%60%3A%20A%20Boolean%20which%20should%20be%20%60false%60%20if%20you%20%2Adon%27t%2A%20want%20any%20sprite%20animation%20smoothing%2E%0A%20%20%60fps%60%3A%20The%20frames%2Dper%2Dsecond%20the%20engine%27s%20game%20logic%20loop%20should%20run%20at%20%28the%20default%20is%2060%29%2E%0A%20%20%60renderFps%60%3A%20Clamps%20the%20fps%20rendering%20to%20the%20supplied%20frame%20rate%2E%0A%20%20%20You%20can%20also%20add%20any%20of%20Pixi%27s%20initialization%20options%2C%20and%20those%20will%20be%20applied%20%0A%20%20to%20Pixi%27s%20renderer%20when%20Hexi%20creates%20it%2E%0A%20%20%20%2A%2F%0A%0A%20%20function%20Hexi%28o%29%20%7B%0A%20%20%20%20%5FclassCallCheck%28this%2C%20Hexi%29%3B%0A%0A%20%20%20%20%2F%2FInitialize%20all%20the%20helper%20modules%2E%0A%20%20%20%20%2F%2F%28See%20Hexi%27s%20README%2Emd%20on%20information%20about%20these%20libraries%29%0A%20%20%20%20this%2Echarm%20%3D%20new%20Charm%28PIXI%29%3B%0A%20%20%20%20this%2Edust%20%3D%20new%20Dust%28PIXI%29%3B%0A%20%20%20%20this%2Ebump%20%3D%20new%20Bump%28PIXI%29%3B%0A%20%20%20%20this%2Etink%20%3D%20new%20Tink%28PIXI%29%3B%0A%20%20%20%20this%2EspriteUtilities%20%3D%20new%20SpriteUtilities%28PIXI%29%3B%0A%20%20%20%20this%2EtileUtilities%20%3D%20new%20TileUtilities%28PIXI%29%3B%0A%20%20%20%20this%2EgameUtilities%20%3D%20new%20GameUtilities%28%29%3B%0A%0A%20%20%20%20%2F%2FAny%20modules%20that%20have%20an%20%60update%60%20method%20that%20should%20updated%0A%20%20%20%20%2F%2Feach%20frame%20in%20the%20game%20loop%20should%20be%20added%20to%20the%0A%20%20%20%20%2F%2F%60modulesToUpdate%60%20array%2E%20The%20game%20loop%20will%20call%20the%20%60update%60%0A%20%20%20%20%2F%2Fmethod%20on%20each%20of%20these%20modules%20while%20the%20game%20is%20running%2E%0A%20%20%20%20%2F%2FThis%20is%20very%20efficient%20and%20does%20not%20effect%20performance%3A%20no%20modules%20are%20updated%20unless%20they%0A%20%20%20%20%2F%2Fcontain%20objects%20that%20need%20updating%2E%0A%20%20%20%20this%2EmodulesToUpdate%20%3D%20%5B%5D%3B%0A%20%20%20%20this%2EmodulesToUpdate%2Epush%28this%2Echarm%29%3B%0A%20%20%20%20this%2EmodulesToUpdate%2Epush%28this%2Edust%29%3B%0A%20%20%20%20this%2EmodulesToUpdate%2Epush%28this%2Etink%29%3B%0A%20%20%20%20this%2EmodulesToUpdate%2Epush%28this%2EspriteUtilities%29%3B%0A%0A%20%20%20%20%2F%2FCreate%20local%20aliases%20for%20the%20important%20methods%20and%20properties%20of%0A%20%20%20%20%2F%2Fthese%20libraries%2C%20including%20the%20most%20useful%20Pixi%20properties%2E%0A%20%20%20%20%2F%2FTake%20a%20look%20at%20Hexi%27s%20%60createModulePropertyAliases%60%20method%20in%20the%0A%20%20%20%20%2F%2Fsource%20code%20ahead%20to%20see%20how%20this%20works%0A%20%20%20%20this%2EcreateModulePropertyAliases%28%29%3B%0A%0A%20%20%20%20%2F%2FCreate%20the%20stage%20and%20renderer%0A%20%20%20%20%2F%2FAuto%20renderer%20%28default%29%0A%20%20%20%20if%20%28o%2Erenderer%20%3D%3D%3D%20%22auto%22%20%7C%7C%20o%2Erenderer%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20this%2Erenderer%20%3D%20PIXI%2EautoDetectRenderer%28o%2Ewidth%2C%20o%2Eheight%2C%20o%2C%20o%2EnoWebGL%29%3B%0A%0A%20%20%20%20%20%20%2F%2FCanvas%20renderer%0A%20%20%20%20%7D%20else%20if%20%28o%2Erenderer%20%3D%3D%3D%20%22canvas%22%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Erenderer%20%3D%20new%20PIXI%2ECanvasRenderer%28o%2Ewidth%2C%20o%2Eheight%2C%20o%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FWebGL%20renderer%0A%20%20%20%20%20%20%7D%20else%20if%20%28o%2Erenderer%20%3D%3D%3D%20%22webgl%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2Erenderer%20%3D%20new%20PIXI%2EWebGLRenderer%28o%2Ewidth%2C%20o%2Eheight%2C%20o%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FGet%20a%20reference%20to%20the%20%60renderer%2Eview%60%2C%20which%20is%20the%0A%20%20%20%20%2F%2FHTML%20canvas%20element%0A%20%20%20%20this%2Ecanvas%20%3D%20this%2Erenderer%2Eview%3B%0A%0A%20%20%20%20%2F%2FAdd%20%60halfWidth%60%20and%20%60halfHeight%60%20properties%20to%20the%20canvas%0A%20%20%20%20Object%2EdefineProperties%2Ebind%28this%2C%20this%2Ecanvas%2C%20%7B%0A%20%20%20%20%20%20%22halfWidth%22%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2Ecanvas%2Ewidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%22halfHeight%22%3A%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%2Ecanvas%2Eheight%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%2F%2FA%20Boolean%20to%20flag%20whether%20the%20canvas%20has%20been%20scaled%0A%20%20%20%20this%2Ecanvas%2Escaled%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2FAdd%20the%20FullScreen%20module%20and%20supply%20it%20with%20the%20canvas%20element%0A%20%20%20%20this%2EfullScreen%20%3D%20new%20FullScreen%28this%2Ecanvas%29%3B%0A%0A%20%20%20%20%2F%2FNote%3A%20Hexi%27s%20%60update%60%20function%20checks%20whether%20we%27re%20in%20full%20screen%0A%20%20%20%20%2F%2Fmode%20and%20updates%20the%20global%20scale%20value%20accordingly%0A%0A%20%20%20%20%2F%2FSet%20the%20canvas%27s%20optional%20background%20color%20and%20border%20style%0A%20%20%20%20if%20%28o%2EbackgroundColor%29%20%7B%0A%20%20%20%20%20%20this%2Erenderer%2EbackgroundColor%20%3D%20this%2Ecolor%28o%2EbackgroundColor%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this%2Erenderer%2EbackgroundColor%20%3D%200xFFFFFF%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28o%2Eborder%29%20this%2Ecanvas%2Estyle%2Eborder%20%3D%20o%2Eborder%3B%0A%0A%20%20%20%20%2F%2FAdd%20the%20canvas%20to%20the%20HTML%20document%0A%20%20%20%20document%2Ebody%2EappendChild%28this%2Ecanvas%29%3B%0A%0A%20%20%20%20%2F%2FCreate%20a%20container%20object%20called%20the%20%60stage%60%0A%20%20%20%20this%2Estage%20%3D%20new%20this%2EContainer%28%29%3B%0A%0A%20%20%20%20%2F%2FAdd%20Hexi%27s%20special%20sprite%20properties%20to%20the%20stage%0A%20%20%20%20this%2EaddProperties%28this%2Estage%29%3B%0A%20%20%20%20this%2Estage%2E%5Fstage%20%3D%20true%3B%0A%0A%20%20%20%20%2F%2FThe%20game%27s%20scale%0A%20%20%20%20if%20%28o%2EscaleToWindow%29%20%7B%0A%20%20%20%20%20%20this%2EscaleToWindow%28o%2EscaleBorderColor%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this%2Escale%20%3D%201%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FMake%20the%20pointer%0A%20%20%20%20this%2Epointer%20%3D%20this%2EmakePointer%28this%2Ecanvas%2C%20this%2Escale%29%3B%0A%0A%20%20%20%20%2F%2FSet%20the%20game%20%60state%60%0A%20%20%20%20this%2Estate%20%3D%20undefined%3B%0A%0A%20%20%20%20%2F%2FSet%20the%20user%2Ddefined%20%60load%60%20and%20%60setup%60%20states%0A%20%20%20%20if%20%28o%2Eload%20%21%3D%3D%20undefined%29%20this%2EloadState%20%3D%20o%2Eload%3B%0A%0A%20%20%20%20%2F%2FThe%20%60setup%60%20function%20is%20required%2C%20so%20throw%20an%20error%20if%20it%27s%0A%20%20%20%20%2F%2Fmissing%0A%20%20%20%20if%20%28%21o%2Esetup%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Please%20supply%20the%20setup%20option%20in%20the%20constructor%20to%20tell%20Hexi%20which%20function%20should%20run%20first%20when%20it%20starts%2E%22%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this%2EsetupState%20%3D%20o%2Esetup%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FA%20variable%20to%20track%20the%20current%20percentage%20of%20loading%20assets%0A%20%20%20%20this%2EloadingProgress%20%3D%200%3B%0A%0A%20%20%20%20%2F%2FA%20variable%20to%20track%20the%20currently%20loading%20asset%0A%20%20%20%20this%2EloadingFile%20%3D%20%22%22%3B%0A%0A%20%20%20%20%2F%2FLoad%20any%20assets%20if%20they%27ve%20been%20provided%0A%20%20%20%20if%20%28o%2Eassets%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20this%2EassetsToLoad%20%3D%20o%2Eassets%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FTell%20Hexi%20that%20we%27re%20not%20using%20a%20loading%20progress%20bar%2E%0A%20%20%20%20%2F%2F%28This%20will%20be%20set%20to%20%60true%60%20if%20the%20user%20invokes%20the%20%60loadingBar%60%0A%20%20%20%20%2F%2Ffunction%2C%20which%20you%27ll%20see%20ahead%29%0A%20%20%20%20this%2E%5FprogressBarAdded%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2FThe%20%60soundObjects%60%20object%20is%20used%20to%20store%20all%20sounds%0A%20%20%20%20this%2EsoundObjects%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2FCreate%20a%20new%20instance%20of%20Smoothie%2C%20which%20manages%20Hexi%27s%20game%0A%20%20%20%20%2F%2Floop%20and%20adds%20smooth%20sprite%20interpolation%0A%20%20%20%20this%2Esmoothie%20%3D%20new%20Smoothie%28%7B%0A%20%20%20%20%20%20engine%3A%20PIXI%2C%0A%20%20%20%20%20%20renderer%3A%20this%2Erenderer%2C%0A%20%20%20%20%20%20root%3A%20this%2Estage%2C%0A%20%20%20%20%20%20update%3A%20this%2Eupdate%2Ebind%28this%29%2C%0A%20%20%20%20%20%20properties%3A%20o%2EinterpolationProperties%2C%0A%20%20%20%20%20%20interpolate%3A%20o%2Einterpolate%2C%0A%20%20%20%20%20%20fps%3A%20o%2Efps%2C%0A%20%20%20%20%20%20renderFps%3A%20o%2ErenderFps%2C%0A%20%20%20%20%20%20properties%3A%20%7B%0A%20%20%20%20%20%20%20%20position%3A%20true%2C%0A%20%20%20%20%20%20%20%20scale%3A%20true%2C%0A%20%20%20%20%20%20%20%20tile%3A%20true%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2F3%2E%20HEXI%27S%20ENGINE%3A%20START%2C%20LOAD%20AND%20SETUP%0A%20%20%2F%2F%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%0A%20%20%2F%2FThe%20%60start%60%20method%20must%20be%20called%20by%20the%20user%20after%20Hexi%20has%20been%0A%20%20%2F%2Finitialized%20to%20start%20the%20loading%20process%20and%20turn%20on%20the%20engine%2E%0A%0A%20%20%5FcreateClass%28Hexi%2C%20%5B%7B%0A%20%20%20%20key%3A%20%22start%22%2C%0A%20%20%20%20value%3A%20function%20start%28%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FIf%20there%20are%20assets%20to%20load%2C%20load%20them%2C%20and%20set%20the%20game%27s%20state%0A%20%20%20%20%20%20%2F%2Fto%20the%20user%2Ddefined%20%60loadState%60%20%28which%20can%20be%20supplied%20by%20the%20user%20in%20the%0A%20%20%20%20%20%20%2F%2Fconstructor%29%0A%20%20%20%20%20%20if%20%28this%2EassetsToLoad%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCall%20Hexi%27s%20%60load%60%20method%20%28ahead%29%20to%20load%20the%20assets%0A%20%20%20%20%20%20%20%20this%2Eload%28this%2EassetsToLoad%2C%20this%2EvalidateAssets%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FAfter%20the%20assets%20have%20been%20loaded%2C%20a%20method%20called%0A%20%20%20%20%20%20%20%20%2F%2F%60validateAssets%60%20will%20run%20%28see%20%60validateAssets%60%20ahead%2E%29%0A%20%20%20%20%20%20%20%20%2F%2F%60validateAssets%60%20checks%20to%20see%20what%20has%20been%20loaded%20and%2C%0A%20%20%20%20%20%20%20%20%2F%2Fin%20the%20case%20of%20sound%20files%2C%20decodes%20them%20and%20creates%20sound%0A%20%20%20%20%20%20%20%20%2F%2Fobjects%2E%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20user%20has%20supplied%20Hexi%20with%20a%20%60load%60%20function%20%28in%0A%20%20%20%20%20%20%20%20%2F%2FHexi%27s%20constructor%29%2C%20it%20will%20be%20assigned%20to%20Hexi%27s%20current%0A%20%20%20%20%20%20%20%20%2F%2F%60state%60%20and%2C%20as%20you%27ll%20see%20ahead%2C%20called%20in%20a%20loop%20while%20the%0A%20%20%20%20%20%20%20%20%2F%2Fassets%20load%0A%20%20%20%20%20%20%20%20if%20%28this%2EloadState%29%20this%2Estate%20%3D%20this%2EloadState%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20there%27s%20nothing%20to%20load%2C%20run%20the%20%60setup%60%20state%2C%20which%20will%0A%20%20%20%20%20%20%20%20%2F%2Fjust%20run%20once%0A%20%20%20%20%20%20%20%20this%2EsetupState%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FStart%20the%20game%20loop%0A%20%20%20%20%20%20this%2Esmoothie%2Estart%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FUse%20the%20%60load%60%20method%20to%20load%20any%20files%20into%20Hexi%2E%20Pass%20it%20a%0A%20%20%20%20%2F%2Fcallback%20function%20as%20the%20second%20argument%20to%20launch%20a%20function%20that%0A%20%20%20%20%2F%2Fshould%20run%20when%20all%20the%20assets%20have%20finished%20loading%2E%20Hexi%27s%0A%20%20%20%20%2F%2Fdefault%20callback%20function%20is%20%60validateAssets%60%2C%20which%20you%27ll%20find%0A%20%20%20%20%2F%2Fin%20the%20code%20ahead%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22load%22%2C%0A%20%20%20%20value%3A%20function%20load%28assetsToLoad%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis%20%3D%20this%3B%0A%0A%20%20%20%20%20%20var%20callbackFunction%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B1%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FHandle%20special%20file%20types%20that%20Pixi%27s%20loader%20doesn%27t%20understand%0A%20%20%20%20%20%20%2F%2FThe%20%60findAssets%60%20function%20will%20return%20an%20array%20to%20get%20an%20array%20just%0A%20%20%20%20%20%20%2F%2Fcontaining%20those%20file%20source%20paths%20you%27re%20interested%20in%0A%20%20%20%20%20%20var%20findAssets%20%3D%20function%20findAssets%28fileExtensionArray%29%20%7B%0A%20%20%20%20%20%20%20%20var%20fileSourcePaths%20%3D%20assetsToLoad%2Efilter%28function%20%28source%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FFind%20the%20file%20extension%20of%20the%20asset%0A%20%20%20%20%20%20%20%20%20%20var%20extension%20%3D%20source%2Esplit%28%22%2E%22%29%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28fileExtensionArray%2EindexOf%28extension%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20fileSourcePaths%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2A%20Load%20fonts%20%2A%2F%0A%0A%20%20%20%20%20%20%2F%2FFirst%2C%20define%20the%20file%20extensions%20for%20the%20special%20file%20types%0A%20%20%20%20%20%20%2F%2Fyou%27re%20interested%20in%0A%20%20%20%20%20%20%2F%2FFonts%0A%20%20%20%20%20%20var%20fontExtensions%20%3D%20%5B%22ttf%22%2C%20%22otf%22%2C%20%22ttc%22%2C%20%22woff%22%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FGet%20the%20font%20source%20paths%0A%20%20%20%20%20%20var%20fontFiles%20%3D%20findAssets%28fontExtensions%29%3B%0A%0A%20%20%20%20%20%20%2F%2FIf%20there%20are%20any%20font%20files%2C%20load%20them%20into%20the%20browser%20using%20an%0A%20%20%20%20%20%20%2F%2Fold%20trick%20that%20forces%20the%20browser%20to%20load%20them%0A%20%20%20%20%20%20if%20%28fontFiles%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20this%2EspanElements%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20fontFiles%2EforEach%28function%20%28source%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FLoads%20the%20font%20files%20by%20writing%20CSS%20code%20to%20the%20HTML%20document%20head%2E%0A%20%20%20%20%20%20%20%20%20%20%2F%2FUse%20the%20font%27s%20filename%20as%20the%20%60fontFamily%60%20name%2E%20This%20code%20captures%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fthe%20font%20file%27s%20name%20without%20the%20extension%20or%20file%20path%0A%20%20%20%20%20%20%20%20%20%20var%20fontFamily%20%3D%20source%2Esplit%28%22%2F%22%29%2Epop%28%29%2Esplit%28%22%2E%22%29%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FPush%20the%20font%20family%20name%20into%20Hexi%27s%20%60fontFamilies%60%20array%0A%20%20%20%20%20%20%20%20%20%20if%20%28%5Fthis%2EfontFamilies%29%20%5Fthis%2EfontFamilies%2Epush%28fontFamily%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAppend%20an%20%60%40afont%2Dface%60%20style%20rule%20to%20the%20head%20of%20the%20HTML%20document%0A%20%20%20%20%20%20%20%20%20%20var%20newStyle%20%3D%20document%2EcreateElement%28%22style%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20var%20fontFace%20%3D%20%22%40font%2Dface%20%7Bfont%2Dfamily%3A%20%27%22%20%2B%20fontFamily%20%2B%20%22%27%3B%20src%3A%20url%28%27%22%20%2B%20source%20%2B%20%22%27%29%3B%7D%22%3B%0A%20%20%20%20%20%20%20%20%20%20newStyle%2EappendChild%28document%2EcreateTextNode%28fontFace%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20document%2Ehead%2EappendChild%28newStyle%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FTrick%20the%20browser%20into%20loading%20the%20font%20file%20by%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fdisplaying%20an%20invisible%20element%0A%20%20%20%20%20%20%20%20%20%20var%20span%20%3D%20document%2EcreateElement%28%22span%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20span%2Estyle%2EfontFamily%20%3D%20fontFamily%3B%0A%20%20%20%20%20%20%20%20%20%20document%2Ebody%2EappendChild%28span%29%3B%0A%20%20%20%20%20%20%20%20%20%20span%2EinnerHTML%20%3D%20%22%3F%22%3B%0A%20%20%20%20%20%20%20%20%20%20span%2Estyle%2Edisplay%20%3D%20%22block%22%3B%0A%20%20%20%20%20%20%20%20%20%20span%2Estyle%2Eopacity%20%3D%20%220%22%3B%0A%20%20%20%20%20%20%20%20%20%20%5Fthis%2EspanElements%2Epush%28span%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2A%20Load%20sound%20%2A%2F%0A%0A%20%20%20%20%20%20%2F%2FSet%20default%20loading%20mechanism%20for%20sound%20file%20extensions%20to%20use%20XHR%0A%20%20%20%20%20%20var%20Resource%20%3D%20PIXI%2Eloaders%2EResource%3B%0A%20%20%20%20%20%20Resource%2EsetExtensionLoadType%28%22wav%22%2C%20Resource%2ELOAD%5FTYPE%2EXHR%29%3B%0A%20%20%20%20%20%20Resource%2EsetExtensionLoadType%28%22mp3%22%2C%20Resource%2ELOAD%5FTYPE%2EXHR%29%3B%0A%20%20%20%20%20%20Resource%2EsetExtensionLoadType%28%22ogg%22%2C%20Resource%2ELOAD%5FTYPE%2EXHR%29%3B%0A%20%20%20%20%20%20Resource%2EsetExtensionLoadType%28%22webm%22%2C%20Resource%2ELOAD%5FTYPE%2EXHR%29%3B%0A%0A%20%20%20%20%20%20%2F%2FSet%20default%20loading%20type%20for%20sound%20file%20extensions%20to%20be%20arraybuffer%0A%20%20%20%20%20%20Resource%2EsetExtensionXhrType%28%22wav%22%2C%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBUFFER%29%3B%0A%20%20%20%20%20%20Resource%2EsetExtensionXhrType%28%22mp3%22%2C%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBUFFER%29%3B%0A%20%20%20%20%20%20Resource%2EsetExtensionXhrType%28%22ogg%22%2C%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBUFFER%29%3B%0A%20%20%20%20%20%20Resource%2EsetExtensionXhrType%28%22webm%22%2C%20Resource%2EXHR%5FRESPONSE%5FTYPE%2EBUFFER%29%3B%0A%0A%20%20%20%20%20%20%2F%2A%20Load%20ordinary%20assets%20%2A%2F%0A%0A%20%20%20%20%20%20var%20loadProgressHandler%20%3D%20function%20loadProgressHandler%28loader%2C%20resource%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FDisplay%20the%20file%20%60url%60%20currently%20being%20loaded%0A%20%20%20%20%20%20%20%20%5Fthis%2EloadingFile%20%3D%20resource%2Eurl%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FDisplay%20the%20percentage%20of%20files%20currently%20loaded%0A%20%20%20%20%20%20%20%20%5Fthis%2EloadingProgress%20%3D%20loader%2Eprogress%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FLoad%20the%20files%20and%20call%20the%20%60loadProgressHandler%60%20while%20they%27re%0A%20%20%20%20%20%20%2F%2Floading%0A%20%20%20%20%20%20this%2Eloader%2Ereset%28%29%3B%0A%20%20%20%20%20%20this%2EloadingProgress%20%3D%200%3B%0A%20%20%20%20%20%20this%2EloadingFile%20%3D%20%22%22%3B%0A%20%20%20%20%20%20this%2Eloader%2Eadd%28assetsToLoad%29%2Eon%28%22progress%22%2C%20loadProgressHandler%29%2Eload%28callbackFunction%2Ebind%28this%29%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20%60validateAssets%60%20method%20runs%20when%20all%20the%20assets%20have%20finished%0A%20%20%20%20%2F%2Floading%2E%20It%20checks%20to%20see%20if%20there%20are%20any%20sounds%20files%20and%2C%20if%0A%20%20%20%20%2F%2Fthere%20are%2C%20decodes%20them%20and%20turns%20them%20into%20sound%20objects%20using%20the%0A%20%20%20%20%2F%2F%60sounds%2Ejs%60%20module%27s%20%60makeSound%60%20function%2E%20If%20there%20are%20no%20sounds%0A%20%20%20%20%2F%2Fto%20load%2C%20the%20loading%20state%20is%20finished%20and%20the%20setup%20state%20is%20run%2E%0A%20%20%20%20%2F%2FBut%2C%20if%20there%20are%20sounds%20to%20load%2C%20the%20setup%20state%20will%20only%20run%0A%20%20%20%20%2F%2Fafter%20the%20sounds%20have%20been%20decoded%2E%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22validateAssets%22%2C%0A%20%20%20%20value%3A%20function%20validateAssets%28%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis2%20%3D%20this%3B%0A%0A%20%20%20%20%20%20console%2Elog%28%22All%20assets%20loaded%22%29%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60finishLoadingState%60%20method%20will%20be%20called%20if%20everything%20has%0A%20%20%20%20%20%20%2F%2Ffinished%20loading%20and%20any%20possible%20sounds%20have%20been%20decoded%0A%20%20%20%20%20%20var%20finishLoadingState%20%3D%20function%20finishLoadingState%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FReset%20the%20%60assetsToLoad%60%20array%0A%20%20%20%20%20%20%20%20%5Fthis2%2EassetsToLoad%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FClear%20the%20%60loadState%60%0A%20%20%20%20%20%20%20%20%5Fthis2%2EloadState%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FClear%20the%20game%20%60state%60%20function%20for%20now%20to%20stop%20the%20loop%2E%0A%20%20%20%20%20%20%20%20%5Fthis2%2Estate%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FRemove%20the%20loading%20progress%20bar%20if%20the%20user%20invoked%20the%20%60loadingBar%60%0A%20%20%20%20%20%20%20%20%2F%2Ffunction%0A%20%20%20%20%20%20%20%20if%20%28%5Fthis2%2E%5FprogressBarAdded%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%5Fthis2%2EprogressBar%2Eremove%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20any%20fonts%20were%20tricked%20into%20loading%0A%20%20%20%20%20%20%20%20%2F%2Fmake%20the%20%3Cspan%3E%20tags%20that%20use%20them%20invisible%0A%20%20%20%20%20%20%20%20if%20%28%5Fthis2%2EspanElements%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%5Fthis2%2EspanElements%2EforEach%28function%20%28element%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20element%2Estyle%2Edisplay%20%3D%20%22none%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2FCall%20the%20%60setup%60%20state%0A%20%20%20%20%20%20%20%20%5Fthis2%2EsetupState%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FWe%20need%20to%20check%20if%20any%20possible%20sound%20file%20have%20been%20loaded%0A%20%20%20%20%20%20%2F%2Fbecause%2C%20if%20there%20have%2C%20they%20need%20to%20fist%20be%20decoded%20before%20we%0A%20%20%20%20%20%20%2F%2Fcan%20launch%20the%20%60setup%60%20state%2E%0A%0A%20%20%20%20%20%20%2F%2FVariables%20to%20count%20the%20number%20of%20sound%20files%20and%20the%20sound%20files%0A%20%20%20%20%20%20%2F%2Fthat%20have%20been%20decoded%2E%20If%20both%20these%20numbers%20are%20the%20same%20at%0A%20%20%20%20%20%20%2F%2Fsome%20point%2C%20then%20we%20know%20all%20the%20sounds%20have%20been%20decoded%20and%20we%0A%20%20%20%20%20%20%2F%2Fcan%20call%20the%20%60finishLoadingState%60%20function%0A%20%20%20%20%20%20var%20soundsToDecode%20%3D%200%2C%0A%20%20%20%20%20%20%20%20%20%20soundsDecoded%20%3D%200%3B%0A%0A%20%20%20%20%20%20%2F%2FFirst%2C%20create%20a%20list%20of%20the%20kind%20of%20sound%20files%20we%20want%20to%20check%0A%20%20%20%20%20%20var%20soundExtensions%20%3D%20%5B%22wav%22%2C%20%22mp3%22%2C%20%22ogg%22%2C%20%22webm%22%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60decodeHandler%60%20will%20run%20when%20each%20sound%20file%20is%20decoded%0A%20%20%20%20%20%20var%20decodeHandler%20%3D%20function%20decodeHandler%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCount%201%20more%20sound%20as%20having%20been%20decoded%0A%20%20%20%20%20%20%20%20soundsDecoded%20%2B%3D%201%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20the%20decoded%20sounds%20match%20the%20number%20of%20sounds%20to%20decode%2C%0A%20%20%20%20%20%20%20%20%2F%2Fthen%20we%20know%20all%20the%20sounds%20have%20been%20decoded%20and%20we%20can%20call%0A%20%20%20%20%20%20%20%20%2F%2F%60finishLoadingState%60%0A%20%20%20%20%20%20%20%20if%20%28soundsToDecode%20%3D%3D%3D%20soundsDecoded%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20finishLoadingState%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FLoop%20through%20all%20the%20loader%27s%20resources%20and%20look%20for%20sound%20files%0A%20%20%20%20%20%20Object%2Ekeys%28this%2Eloader%2Eresources%29%2EforEach%28function%20%28resource%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FFind%20the%20file%20extension%20of%20the%20asset%0A%20%20%20%20%20%20%20%20var%20extension%20%3D%20resource%2Esplit%28%22%2E%22%29%2Epop%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIf%20one%20of%20the%20resource%20file%20extensions%20matches%20the%20sound%20file%0A%20%20%20%20%20%20%20%20%2F%2Fextensions%2C%20then%20we%20know%20we%20have%20a%20sound%20file%0A%20%20%20%20%20%20%20%20if%20%28soundExtensions%2EindexOf%28extension%29%20%21%3D%3D%20%2D1%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCount%20one%20more%20sound%20to%20load%0A%20%20%20%20%20%20%20%20%20%20soundsToDecode%20%2B%3D%201%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCreate%20aliases%20for%20the%20sound%27s%20%60xhr%60%20object%20and%20%60url%60%20%28its%0A%20%20%20%20%20%20%20%20%20%20%2F%2Ffile%20name%29%0A%20%20%20%20%20%20%20%20%20%20var%20xhr%20%3D%20%5Fthis2%2Eloader%2Eresources%5Bresource%5D%2Exhr%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20url%20%3D%20%5Fthis2%2Eloader%2Eresources%5Bresource%5D%2Eurl%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FCreate%20a%20sound%20sprite%20using%20the%20%60sound%2Ejs%60%20module%27s%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%60makeSound%60%20function%2E%20Notice%20the%204th%20argument%20is%20the%20loaded%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fsound%27s%20%60xhr%60%20object%2E%20Setting%20the%203rd%20argument%20to%20%60false%60%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fmeans%20that%20%60makeSound%60%20won%27t%20attempt%20to%20load%20the%20sounds%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fagain%2E%20When%20the%20sound%20has%20been%20decoded%2C%20the%20%60decodeHandler%60%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%28see%20above%21%29%20will%20be%20run%0A%20%20%20%20%20%20%20%20%20%20var%20soundSprite%20%3D%20makeSound%28url%2C%20decodeHandler%2Ebind%28%5Fthis2%29%2C%20false%2C%20xhr%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FGet%20the%20sound%20file%20name%2E%0A%20%20%20%20%20%20%20%20%20%20soundSprite%2Ename%20%3D%20%5Fthis2%2Eloader%2Eresources%5Bresource%5D%2Ename%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FAdd%20the%20sound%20object%20to%20Hexi%27s%20%60soundObjects%60%20object%2E%0A%20%20%20%20%20%20%20%20%20%20%2F%2FYou%27ll%20be%20able%20to%20access%20them%20in%20your%20application%20through%0A%20%20%20%20%20%20%20%20%20%20%2F%2FHexi%27s%20higher%2Dlevel%20%60sound%60%20method%2C%20like%20this%3A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%60hexi%2Esound%28%22soundFileName%2Ewav%22%29%3B%60%0A%20%20%20%20%20%20%20%20%20%20%5Fthis2%2EsoundObjects%5BsoundSprite%2Ename%5D%20%3D%20soundSprite%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FIf%20there%20are%20no%20sound%20files%2C%20we%20can%20skip%20the%20decoding%20step%20and%0A%20%20%20%20%20%20%2F%2Fjust%20call%20%60finishLoadingState%60%20directly%0A%20%20%20%20%20%20if%20%28soundsToDecode%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20finishLoadingState%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20%60update%60%20method%20is%20run%20by%20Hexi%27s%20game%20loop%20each%20frame%2E%0A%20%20%20%20%2F%2FIt%20manages%20the%20game%20state%20and%20updates%20the%20modules%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22update%22%2C%0A%20%20%20%20value%3A%20function%20update%28%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FUpdate%20all%20the%20modules%20in%20the%20%60modulesToUpdate%60%20array%2E%0A%20%20%20%20%20%20%2F%2FThese%20are%20modules%20that%20contain%20%60update%60%20methods%20that%20need%20to%20be%0A%20%20%20%20%20%20%2F%2Fcalled%20every%20frame%0A%20%20%20%20%20%20this%2EmodulesToUpdate%2EforEach%28function%20%28module%29%20%7B%0A%20%20%20%20%20%20%20%20return%20module%2Eupdate%28%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FIf%20the%20application%20is%20in%20full%20screen%20mode%2C%20make%20sure%20that%20Hexi%0A%20%20%20%20%20%20%2F%2Fis%20using%20the%20correct%20scale%20value%0A%20%20%20%20%20%20if%20%28document%2EfullscreenEnabled%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Escale%20%3D%20this%2EfullScreen%2EfullscreenScale%3B%0A%20%20%20%20%20%20%20%20this%2Epointer%2Escale%20%3D%20this%2EfullScreen%2EfullscreenScale%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21this%2Ecanvas%2Escaled%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2Escale%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20this%2Epointer%2Escale%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FRun%20the%20current%20game%20%60state%60%20function%20if%20it%27s%20been%20defined%20and%0A%20%20%20%20%20%20%2F%2Fthe%20game%20isn%27t%20%60paused%60%0A%20%20%20%20%20%20if%20%28this%2Estate%20%26%26%20%21this%2Epaused%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Estate%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FPause%20and%20resume%20methods%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22pause%22%2C%0A%20%20%20%20value%3A%20function%20pause%28%29%20%7B%0A%20%20%20%20%20%20this%2Epaused%20%3D%20true%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22resume%22%2C%0A%20%20%20%20value%3A%20function%20resume%28%29%20%7B%0A%20%20%20%20%20%20this%2Epaused%20%3D%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F4%2E%20MODULE%20INTERFACES%0A%0A%20%20%20%20%2F%2FA%20method%20that%20helpfully%20creates%20local%2C%20top%2Dlevel%20references%20to%20the%0A%20%20%20%20%2F%2Fmost%20useful%20properties%20and%20methods%20from%20the%20loaded%20modules%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22createModulePropertyAliases%22%2C%0A%20%20%20%20value%3A%20function%20createModulePropertyAliases%28%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis3%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FPixi%20%2D%20Rendering%0A%20%20%20%20%20%20this%2EContainer%20%3D%20PIXI%2EContainer%3B%0A%20%20%20%20%20%20this%2Eloader%20%3D%20PIXI%2Eloader%3B%0A%20%20%20%20%20%20this%2ETextureCache%20%3D%20PIXI%2Eutils%2ETextureCache%3B%0A%20%20%20%20%20%20this%2Efilters%20%3D%20PIXI%2Efilters%3B%0A%20%20%20%20%20%20%2F%2FFilters%0A%20%20%20%20%20%20this%2EdropShadowFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EDropShadowFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EasciiFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EAsciiFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EalphaMaskFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EAlphaMaskFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EbloomFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EBloomFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EblurDirFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EBlurDirFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EblurFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EBlurFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EcolorMatrixFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EColorMatrixFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EcolorStepFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EColorStepFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EcrossHatchFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2ECrossHatchFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EdisplacementFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EDisplacementFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EdotScreenFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EDotScreenFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EgrayFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EGrayFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EinvertFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EInvertFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EpixelateFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EPixelateFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EsepiaFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2ESepiaFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EshockwaveFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2EShockwaveFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EtwistFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2ETwistFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2ErgbSplitFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2ERGBSplitFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EsmartBlurFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2ESmartBlurFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EtiltShiftFilter%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20%5Fthis3%2Efilters%2ETiltShiftFilter%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FTink%20%2D%20Interactivity%0A%20%20%20%20%20%20this%2EdraggableSprites%20%3D%20this%2Etink%2EdraggableSprites%3B%0A%20%20%20%20%20%20this%2Epointers%20%3D%20this%2Etink%2Epointers%3B%0A%20%20%20%20%20%20this%2Ebuttons%20%3D%20this%2Etink%2Ebuttons%3B%0A%20%20%20%20%20%20this%2EmakePointer%20%3D%20function%20%28canvas%2C%20scale%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Etink%2EmakePointer%28canvas%2C%20scale%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EmakeDraggable%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20%5Ftink%3B%0A%0A%20%20%20%20%20%20%20%20return%20%28%5Ftink%20%3D%20%5Fthis3%2Etink%29%2EmakeDraggable%2Eapply%28%5Ftink%2C%20arguments%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EmakeUndraggable%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20%5Ftink2%3B%0A%0A%20%20%20%20%20%20%20%20return%20%28%5Ftink2%20%3D%20%5Fthis3%2Etink%29%2EmakeUndraggable%2Eapply%28%5Ftink2%2C%20arguments%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EmakeInteractive%20%3D%20function%20%28o%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Etink%2EmakeInteractive%28o%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Ekeyboard%20%3D%20this%2Etink%2Ekeyboard%3B%0A%20%20%20%20%20%20this%2EarrowControl%20%3D%20function%20%28sprite%2C%20speed%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Etink%2EarrowControl%28sprite%2C%20speed%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20the%20arrow%20key%20objects%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20this%2EupArrow%20%3D%20this%2Ekeyboard%2838%29%3B%0A%20%20%20%20%20%20this%2ErightArrow%20%3D%20this%2Ekeyboard%2839%29%3B%0A%20%20%20%20%20%20this%2EdownArrow%20%3D%20this%2Ekeyboard%2840%29%3B%0A%20%20%20%20%20%20this%2EleftArrow%20%3D%20this%2Ekeyboard%2837%29%3B%0A%20%20%20%20%20%20this%2EspaceBar%20%3D%20this%2Ekeyboard%2832%29%3B%0A%20%20%20%20%20%20%0A%0A%20%20%20%20%20%20%2F%2FDust%20%2D%20Particle%20effects%0A%20%20%20%20%20%20this%2EcreateParticles%20%3D%20function%20%28x%2C%20y%2C%20spriteFunction%2C%20container%2C%20numberOfParticles%2C%20gravity%2C%20randomSpacing%2C%20minAngle%2C%20maxAngle%2C%20minSize%2C%20maxSize%2C%20minSpeed%2C%20maxSpeed%2C%20minScaleSpeed%2C%20maxScaleSpeed%2C%20minAlphaSpeed%2C%20maxAlphaSpeed%2C%20minRotationSpeed%2C%20maxRotationSpeed%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Edust%2Ecreate%28x%2C%20y%2C%20spriteFunction%2C%20container%2C%20numberOfParticles%2C%20gravity%2C%20randomSpacing%2C%20minAngle%2C%20maxAngle%2C%20minSize%2C%20maxSize%2C%20minSpeed%2C%20maxSpeed%2C%20minScaleSpeed%2C%20maxScaleSpeed%2C%20minAlphaSpeed%2C%20maxAlphaSpeed%2C%20minRotationSpeed%2C%20maxRotationSpeed%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EparticleEmitter%20%3D%20function%20%28interval%2C%20particleFunction%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Edust%2Eemitter%28interval%2C%20particleFunction%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FSpriteUtilities%20%2D%20Sprite%20creation%20tools%0A%20%20%20%20%20%20this%2Efilmstrip%20%3D%20function%20%28texture%2C%20frameWidth%2C%20frameHeight%2C%20spacing%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EspriteUtilities%2Efilmstrip%28texture%2C%20frameWidth%2C%20frameHeight%2C%20spacing%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Eframe%20%3D%20function%20%28source%2C%20x%2C%20y%2C%20width%2C%20height%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EspriteUtilities%2Eframe%28source%2C%20x%2C%20y%2C%20width%2C%20height%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Eframes%20%3D%20function%20%28source%2C%20coordinates%2C%20frameWidth%2C%20frameHeight%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EspriteUtilities%2Eframes%28source%2C%20coordinates%2C%20frameWidth%2C%20frameHeight%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EframeSeries%20%3D%20function%20%28startNumber%2C%20endNumber%2C%20baseName%2C%20extension%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EspriteUtilities%2Eframes%28startNumber%2C%20endNumber%2C%20baseName%2C%20extension%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EcolorToRGBA%20%3D%20function%20%28value%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EspriteUtilities%2EcolorToRGBA%28value%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EcolorToHex%20%3D%20function%20%28value%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EspriteUtilities%2EcolorToHex%28value%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EbyteToHex%20%3D%20function%20%28value%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EspriteUtilities%2EbyteToHex%28value%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Ecolor%20%3D%20function%20%28value%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EspriteUtilities%2Ecolor%28value%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Eshoot%20%3D%20function%20%28shooter%2C%20angle%2C%20x%2C%20y%2C%20container%2C%20bulletSpeed%2C%20bulletArray%2C%20bulletSprite%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EspriteUtilities%2Eshoot%28shooter%2C%20angle%2C%20x%2C%20y%2C%20container%2C%20bulletSpeed%2C%20bulletArray%2C%20bulletSprite%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Eshake%20%3D%20function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20var%20magnitude%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%2016%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20var%20angular%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20console%2Elog%28%22shake%22%29%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EspriteUtilities%2Eshake%28sprite%2C%20magnitude%2C%20angular%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FCharm%20%2D%20Tweening%0A%20%20%20%20%20%20this%2EfadeOut%20%3D%20function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2EfadeOut%28sprite%2C%20frames%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EfadeIn%20%3D%20function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2EfadeIn%28sprite%2C%20frames%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Epulse%20%3D%20function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20var%20minAlpha%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2Epulse%28sprite%2C%20frames%2C%20minAlpha%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Eslide%20%3D%20function%20%28sprite%2C%20endX%2C%20endY%29%20%7B%0A%20%20%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20var%20type%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20%22smoothstep%22%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2Eslide%28sprite%2C%20endX%2C%20endY%2C%20frames%2C%20type%2C%20yoyo%2C%20delayBeforeRepeat%20%3D%200%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Ebreathe%20%3D%20function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20var%20endScaleX%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%2E8%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20var%20endScaleY%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%2E8%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2Ebreathe%28sprite%2C%20endScaleX%2C%20endScaleY%2C%20frames%2C%20yoyo%2C%20delayBeforeRepeat%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Escale%20%3D%20function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20var%20endScaleX%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%2E5%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20var%20endScaleY%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%2E5%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2060%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2Escale%28sprite%2C%20endScaleX%2C%20endScaleY%2C%20frames%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Estrobe%20%3D%20function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20var%20scaleFactor%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%201%2E3%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20var%20startMagnitude%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%2010%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20endMagnitude%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2020%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%2010%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2Estrobe%28sprite%2C%20scaleFactor%2C%20startMagnitude%2C%20endMagnitude%2C%20frames%2C%20yoyo%2C%20delayBeforeRepeat%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Ewobble%20%3D%20function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20var%20scaleFactorX%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%201%2E2%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20var%20scaleFactorY%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%201%2E2%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20frames%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2010%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20var%20xStartMagnitude%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%2010%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20%20%20var%20xEndMagnitude%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%2010%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20%20%20var%20yStartMagnitude%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%20%2D10%20%3A%20arguments%5B6%5D%3B%0A%20%20%20%20%20%20%20%20var%20yEndMagnitude%20%3D%20arguments%2Elength%20%3C%3D%207%20%7C%7C%20arguments%5B7%5D%20%3D%3D%3D%20undefined%20%3F%20%2D10%20%3A%20arguments%5B7%5D%3B%0A%20%20%20%20%20%20%20%20var%20friction%20%3D%20arguments%2Elength%20%3C%3D%208%20%7C%7C%20arguments%5B8%5D%20%3D%3D%3D%20undefined%20%3F%200%2E98%20%3A%20arguments%5B8%5D%3B%0A%20%20%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%209%20%7C%7C%20arguments%5B9%5D%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20arguments%5B9%5D%3B%0A%20%20%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%2010%20%7C%7C%20arguments%5B10%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B10%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2Ewobble%28sprite%2C%20scaleFactorX%20%3D%201%2E2%2C%20scaleFactorY%20%3D%201%2E2%2C%20frames%20%3D%2010%2C%20xStartMagnitude%20%3D%2010%2C%20xEndMagnitude%20%3D%2010%2C%20yStartMagnitude%20%3D%20%2D10%2C%20yEndMagnitude%20%3D%20%2D10%2C%20friction%20%3D%200%2E98%2C%20yoyo%20%3D%20true%2C%20delayBeforeRepeat%20%3D%200%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EfollowCurve%20%3D%20function%20%28sprite%2C%20pointsArray%2C%20totalFrames%29%20%7B%0A%20%20%20%20%20%20%20%20var%20type%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20%22smoothstep%22%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2EfollowCurve%28sprite%2C%20pointsArray%2C%20totalFrames%2C%20type%2C%20yoyo%2C%20delayBeforeRepeat%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EwalkPath%20%3D%20function%20%28sprite%2C%20originalPathArray%29%20%7B%0A%20%20%20%20%20%20%20%20var%20totalFrames%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20300%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20type%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20%22smoothstep%22%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20var%20loop%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20%20%20var%20delayBetweenSections%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2EwalkPath%28sprite%2C%20originalPathArray%2C%20totalFrames%2C%20type%2C%20loop%2C%20yoyo%2C%20delayBetweenSections%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EwalkCurve%20%3D%20function%20%28sprite%2C%20pathArray%29%20%7B%0A%20%20%20%20%20%20%20%20var%20totalFrames%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20300%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20type%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20%22smoothstep%22%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20var%20loop%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20%20%20var%20delayBeforeContinue%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2EwalkCurve%28sprite%2C%20pathArray%2C%20totalFrames%2C%20type%2C%20loop%2C%20yoyo%2C%20delayBeforeContinue%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EremoveTween%20%3D%20function%20%28tweenObject%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2EremoveTween%28tweenObject%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EmakeTween%20%3D%20function%20%28tweensToAdd%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2EmakeTween%28tweensToAdd%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EtweenProperty%20%3D%20function%20%28sprite%2C%20property%2C%20startValue%2C%20endValue%2C%20totalFrames%29%20%7B%0A%20%20%20%20%20%20%20%20var%20type%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20%22smoothstep%22%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20%20%20var%20yoyo%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B6%5D%3B%0A%20%20%20%20%20%20%20%20var%20delayBeforeRepeat%20%3D%20arguments%2Elength%20%3C%3D%207%20%7C%7C%20arguments%5B7%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B7%5D%3B%0A%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Echarm%2EtweenProperty%28sprite%2C%20property%2C%20startValue%2C%20endValue%2C%20totalFrames%2C%20type%2C%20yoyo%2C%20delayBeforeRepeat%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FBump%20%2D%20Collision%0A%20%20%20%20%20%20this%2EhitTestPoint%20%3D%20function%20%28point%2C%20sprite%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EhitTestPoint%28point%2C%20sprite%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EhitTestCircle%20%3D%20function%20%28c1%2C%20c2%29%20%7B%0A%20%20%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EhitTestCircle%28c1%2C%20c2%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EcircleCollision%20%3D%20function%20%28c1%2C%20c2%29%20%7B%0A%20%20%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EcircleCollision%28c1%2C%20c2%2C%20bounce%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EmovingCircleCollision%20%3D%20function%20%28c1%2C%20c2%29%20%7B%0A%20%20%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EmovingCircleCollision%28c1%2C%20c2%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EmultipleCircleCollision%20%3D%20function%20%28arrayOfCircles%29%20%7B%0A%20%20%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EmultipleCircleCollision%28arrayOfCircles%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2ErectangleCollision%20%3D%20function%20%28r1%2C%20r2%29%20%7B%0A%20%20%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2ErectangleCollision%28r1%2C%20r2%2C%20bounce%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EhitTestRectangle%20%3D%20function%20%28r1%2C%20r2%29%20%7B%0A%20%20%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EhitTestRectangle%28r1%2C%20r2%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EhitTestCircleRectangle%20%3D%20function%20%28c1%2C%20r1%29%20%7B%0A%20%20%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EhitTestCircleRectangle%28c1%2C%20r1%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EhitTestCirclePoint%20%3D%20function%20%28c1%2C%20point%29%20%7B%0A%20%20%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EhitTestCirclePoint%28c1%2C%20point%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EcircleRectangleCollision%20%3D%20function%20%28c1%2C%20r1%29%20%7B%0A%20%20%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EcircleRectangleCollision%28c1%2C%20r1%2C%20bounce%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EcirclePointCollision%20%3D%20function%20%28c1%2C%20point%29%20%7B%0A%20%20%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20global%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EcirclePointCollision%28c1%2C%20point%2C%20bounce%2C%20global%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EbounceOffSurface%20%3D%20function%20%28o%2C%20s%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EbounceOffSurface%28o%2C%20s%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Ehit%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20var%20react%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20var%20global%20%3D%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20%20%20var%20extra%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2Ehit%28a%2C%20b%2C%20react%2C%20bounce%2C%20global%2C%20extra%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FIntercept%20the%20Bump%20library%27s%20%60contain%60%20and%20%60outsideBounds%60%20methods%20to%20make%20sure%20that%0A%20%20%20%20%20%20%2F%2Fthe%20stage%20%60width%60%20and%20%60height%60%20match%20the%20canvas%20width%20and%20height%0A%20%20%20%20%20%20this%2Econtain%20%3D%20function%20%28sprite%2C%20container%29%20%7B%0A%20%20%20%20%20%20%20%20var%20bounce%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20%20%20var%20extra%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B3%5D%3B%0A%0A%20%20%20%20%20%20%20%20var%20o%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20if%20%28container%2E%5Fstage%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%20%3D%20%5Fthis3%2EcompensateForStageSize%28container%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%20%3D%20container%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2Econtain%28sprite%2C%20o%2C%20bounce%2C%20extra%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20this%2EoutsideBounds%20%3D%20function%20%28sprite%2C%20container%29%20%7B%0A%20%20%20%20%20%20%20%20var%20extra%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20var%20o%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20if%20%28container%2E%5Fstage%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%20%3D%20%5Fthis3%2EcompensateForStageSize%28container%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%20%3D%20container%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2Ebump%2EoutsideBounds%28sprite%2C%20o%2C%20extra%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FGameUtilities%20%2D%20Useful%20utilities%0A%20%20%20%20%20%20this%2Edistance%20%3D%20function%20%28s1%2C%20s2%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EgameUtilities%2Edistance%28s1%2C%20s2%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EfollowEase%20%3D%20function%20%28follower%2C%20leader%2C%20speed%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EgameUtilities%2EfollowEase%28follower%2C%20leader%2C%20speed%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EfollowConstant%20%3D%20function%20%28follower%2C%20leader%2C%20speed%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EgameUtilities%2EfollowConstant%28follower%2C%20leader%2C%20speed%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2Eangle%20%3D%20function%20%28s1%2C%20s2%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EgameUtilities%2Eangle%28s1%2C%20s2%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2ErotateAroundSprite%20%3D%20function%20%28rotatingSprite%2C%20centerSprite%2C%20distance%2C%20angle%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EgameUtilities%2ErotateAroundSprite%28rotatingSprite%2C%20centerSprite%2C%20distance%2C%20angle%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2ErotateAroundPoint%20%3D%20this%2EgameUtilities%2ErotateAroundPoint%3B%0A%20%20%20%20%20%20this%2ErandomInt%20%3D%20this%2EgameUtilities%2ErandomInt%3B%0A%20%20%20%20%20%20this%2ErandomFloat%20%3D%20this%2EgameUtilities%2ErandomFloat%3B%0A%20%20%20%20%20%20this%2Emove%20%3D%20this%2EgameUtilities%2Emove%3B%0A%20%20%20%20%20%20this%2Ewait%20%3D%20this%2EgameUtilities%2Ewait%3B%0A%20%20%20%20%20%20this%2EworldCamera%20%3D%20function%20%28world%2C%20worldWidth%2C%20worldHeight%29%20%7B%0A%20%20%20%20%20%20%20%20var%20canvas%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20%5Fthis3%2Ecanvas%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EgameUtilities%2EworldCamera%28world%2C%20worldWidth%2C%20worldHeight%2C%20canvas%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FSound%2Ejs%20%2D%20Sound%0A%20%20%20%20%20%20this%2EsoundEffect%20%3D%20function%20%28frequencyValue%2C%20attack%2C%20decay%2C%20type%2C%20volumeValue%2C%20panValue%2C%20wait%2C%20pitchBendAmount%2C%20reverse%2C%20randomValue%2C%20dissonance%2C%20echo%2C%20reverb%29%20%7B%0A%20%20%20%20%20%20%20%20return%20soundEffect%28frequencyValue%2C%20attack%2C%20decay%2C%20type%2C%20volumeValue%2C%20panValue%2C%20wait%2C%20pitchBendAmount%2C%20reverse%2C%20randomValue%2C%20dissonance%2C%20echo%2C%20reverb%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FFullScreen%0A%20%20%20%20%20%20this%2EenableFullScreen%20%3D%20function%20%28exitKeyCodes%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EfullScreen%2EenableFullScreen%28exitKeyCodes%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FTileUtilities%0A%20%20%20%20%20%20this%2EhitTestTile%20%3D%20function%20%28sprite%2C%20mapArray%2C%20gidToCheck%2C%20world%2C%20pointsToCheck%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EtileUtilities%2EhitTestTile%28sprite%2C%20mapArray%2C%20gidToCheck%2C%20world%2C%20pointsToCheck%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EgetIndex%20%3D%20function%20%28x%2C%20y%2C%20tilewidth%2C%20tileheight%2C%20mapWidthInTiles%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EtileUtilities%2EgetIndex%28x%2C%20y%2C%20tilewidth%2C%20tileheight%2C%20mapWidthInTiles%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EgetTile%20%3D%20this%2EtileUtilities%2EgetTile%3B%0A%20%20%20%20%20%20this%2EsurroundingCells%20%3D%20this%2EtileUtilities%2EsurroundingCells%3B%0A%20%20%20%20%20%20this%2EgetPoints%20%3D%20this%2EtileUtilities%2EgetPoints%3B%0A%20%20%20%20%20%20this%2EupdateMap%20%3D%20function%20%28mapArray%2C%20spritesToUpdate%2C%20world%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EtileUtilities%2EupdateMap%28mapArray%2C%20spritesToUpdate%2C%20world%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EbyDepth%20%3D%20this%2EtileUtilities%2EbyDepth%3B%0A%20%20%20%20%20%20this%2EhitTestIsoTile%20%3D%20function%20%28sprite%2C%20mapArray%2C%20gidToCheck%2C%20world%2C%20pointsToCheck%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EtileUtilities%2EhitTestIsoTile%28sprite%2C%20mapArray%2C%20gidToCheck%2C%20world%2C%20pointsToCheck%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EgetIsoPoints%20%3D%20this%2EtileUtilities%2EgetIsoPoints%3B%0A%20%20%20%20%20%20this%2EmakeIsoPointer%20%3D%20function%20%28pointer%2C%20world%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EtileUtilities%2EmakeIsoPointer%28pointer%2C%20world%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EisoRectangle%20%3D%20function%20%28width%2C%20height%2C%20fillStyle%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EtileUtilities%2EisoRectangle%28width%2C%20height%2C%20fillStyle%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EaddIsoProperties%20%3D%20function%20%28sprite%2C%20x%2C%20y%2C%20width%2C%20height%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EtileUtilities%2EaddIsoProperties%28sprite%2C%20x%2C%20y%2C%20width%2C%20height%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this%2EmakeIsoTiledWorld%20%3D%20function%20%28jsonTiledMap%2C%20tileset%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Fthis3%2EtileUtilities%2EmakeIsoTiledWorld%28jsonTiledMap%2C%20tileset%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FGetters%20and%20setters%0A%0A%20%20%20%20%2F%2FPixi%27s%20loader%20resources%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22sprite%22%2C%0A%0A%20%20%20%20%2F%2F5%2E%20SPRITE%20CREATION%20METHODS%0A%0A%20%20%20%20%2F%2FHexi%20uses%20methods%20from%20the%0A%20%20%20%20%2F%2FSpriteUtilities%20module%20to%20help%20create%20sprites%2E%20But%2C%20as%20a%20helpful%20bonus%2C%20Hexi%20automatically%20adds%20sprites%0A%20%20%20%20%2F%2Fto%20the%20%60stage%60%20container%2E%20%28The%20%60stage%60%20is%20Hexi%27s%20root%20container%20for%20all%0A%20%20%20%20%2F%2FHexi%20sprites%2E%29%20Hexi%20also%20adds%20a%20whole%20bunch%20of%0A%20%20%20%20%2F%2Fextra%2C%20useful%20properties%20and%20methods%20to%20sprites%20with%20the%0A%20%20%20%20%2F%2F%60addProperties%60%20method%0A%0A%20%20%20%20%2F%2FUniversal%20sprites%0A%20%20%20%20value%3A%20function%20sprite%28source%29%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20tiling%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20width%20%3D%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20height%20%3D%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20this%2EspriteUtilities%2Esprite%28source%2C%20x%2C%20y%2C%20tiling%2C%20width%2C%20height%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28o%29%3B%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28o%29%3B%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FTiling%20sprites%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22tilingSprite%22%2C%0A%20%20%20%20value%3A%20function%20tilingSprite%28source%2C%20width%2C%20height%29%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B4%5D%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20this%2EspriteUtilities%2EtilingSprite%28source%2C%20width%2C%20height%2C%20x%2C%20y%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28o%29%3B%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28o%29%3B%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FHexi%27s%20%60text%60%20method%20is%20a%20quick%20way%20to%20create%20a%20Pixi%20Text%20sprite%0A%20%20%20%20%2F%2Fand%20add%20it%20to%20the%20stage%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22text%22%2C%0A%20%20%20%20value%3A%20function%20text%28%29%20%7B%0A%20%20%20%20%20%20var%20content%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20%22message%22%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20font%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%20%2216px%20sans%22%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20fillStyle%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%20%22red%22%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B4%5D%3B%0A%0A%20%20%20%20%20%20var%20message%20%3D%20this%2EspriteUtilities%2Etext%28content%2C%20font%2C%20fillStyle%2C%20x%2C%20y%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28message%29%3B%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28message%29%3B%0A%20%20%20%20%20%20return%20message%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20%60bitmapText%60%20method%20is%20a%20quick%20way%20to%20create%20a%20Pixi%20BitmapText%20sprite%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22bitmapText%22%2C%0A%20%20%20%20value%3A%20function%20bitmapText%28%29%20%7B%0A%20%20%20%20%20%20var%20content%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20%22message%22%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20font%20%3D%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20align%20%3D%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20tint%20%3D%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20var%20message%20%3D%20this%2EspriteUtilities%2EbitmapText%28content%2C%20font%2C%20align%2C%20tint%2C%20x%2C%20y%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28message%29%3B%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28message%29%3B%0A%20%20%20%20%20%20return%20message%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FMake%20a%20rectangle%20and%20add%20it%20to%20the%20stage%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22rectangle%22%2C%0A%20%20%20%20value%3A%20function%20rectangle%28%29%20%7B%0A%20%20%20%20%20%20var%20width%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20height%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20fillStyle%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200xFF3300%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20strokeStyle%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%200x0033CC%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20lineWidth%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20this%2EspriteUtilities%2Erectangle%28width%2C%20height%2C%20fillStyle%2C%20strokeStyle%2C%20lineWidth%2C%20x%2C%20y%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28o%29%3B%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28o%29%3B%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FMake%20a%20circle%20and%20add%20it%20to%20the%20stage%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22circle%22%2C%0A%20%20%20%20value%3A%20function%20circle%28%29%20%7B%0A%20%20%20%20%20%20var%20diameter%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20fillStyle%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200xFF3300%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20strokeStyle%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200x0033CC%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20lineWidth%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20x%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20this%2EspriteUtilities%2Ecircle%28diameter%2C%20fillStyle%2C%20strokeStyle%2C%20lineWidth%2C%20x%2C%20y%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28o%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20diameter%20and%20radius%20properties%20to%20the%20circle%0A%20%20%20%20%20%20o%2Ecircular%20%3D%20true%3B%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28o%29%3B%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FDraw%20a%20line%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22line%22%2C%0A%20%20%20%20value%3A%20function%20line%28%29%20%7B%0A%20%20%20%20%20%20var%20strokeStyle%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%200x000000%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20lineWidth%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%201%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20ax%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20ay%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20bx%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20by%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B5%5D%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20this%2EspriteUtilities%2Eline%28strokeStyle%2C%20lineWidth%2C%20ax%2C%20ay%2C%20bx%2C%20by%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28o%29%3B%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28o%29%3B%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FMake%20a%20button%20and%20add%20it%20to%20the%20stage%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22button%22%2C%0A%20%20%20%20value%3A%20function%20button%28source%2C%20x%2C%20y%29%20%7B%0A%20%20%20%20%20%20var%20o%20%3D%20this%2Etink%2Ebutton%28source%2C%20x%2C%20y%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28o%29%3B%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28o%29%3B%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F6%2E%20DISPLAY%20UTILITIES%0A%20%20%20%20%2F%2F%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%0A%0A%20%20%20%20%2F%2FUse%20%60group%60%20to%20create%20a%20Container%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22group%22%2C%0A%20%20%20%20value%3A%20function%20group%28%29%20%7B%0A%20%20%20%20%20%20var%20%5FspriteUtilities%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20%28%5FspriteUtilities%20%3D%20this%2EspriteUtilities%29%2Egroup%2Eapply%28%5FspriteUtilities%2C%20arguments%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28o%29%3B%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28o%29%3B%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60batch%60%20creates%20a%20Pixi%20ParticleContainer%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22batch%22%2C%0A%20%20%20%20value%3A%20function%20batch%28size%2C%20options%29%20%7B%0A%20%20%20%20%20%20var%20o%20%3D%20this%2EspriteUtilities%2Ebatch%28size%2C%20options%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28o%29%3B%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28o%29%3B%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FCreate%20a%20grid%20of%20sprite%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22grid%22%2C%0A%20%20%20%20value%3A%20function%20grid%28%29%20%7B%0A%20%20%20%20%20%20var%20columns%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B0%5D%3B%0A%20%20%20%20%20%20var%20rows%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20var%20cellWidth%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B2%5D%3B%0A%20%20%20%20%20%20var%20cellHeight%20%3D%20arguments%2Elength%20%3C%3D%203%20%7C%7C%20arguments%5B3%5D%20%3D%3D%3D%20undefined%20%3F%2032%20%3A%20arguments%5B3%5D%3B%0A%20%20%20%20%20%20var%20centerCell%20%3D%20arguments%2Elength%20%3C%3D%204%20%7C%7C%20arguments%5B4%5D%20%3D%3D%3D%20undefined%20%3F%20false%20%3A%20arguments%5B4%5D%3B%0A%20%20%20%20%20%20var%20xOffset%20%3D%20arguments%2Elength%20%3C%3D%205%20%7C%7C%20arguments%5B5%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B5%5D%3B%0A%20%20%20%20%20%20var%20yOffset%20%3D%20arguments%2Elength%20%3C%3D%206%20%7C%7C%20arguments%5B6%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B6%5D%3B%0A%20%20%20%20%20%20var%20makeSprite%20%3D%20arguments%2Elength%20%3C%3D%207%20%7C%7C%20arguments%5B7%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B7%5D%3B%0A%20%20%20%20%20%20var%20extra%20%3D%20arguments%2Elength%20%3C%3D%208%20%7C%7C%20arguments%5B8%5D%20%3D%3D%3D%20undefined%20%3F%20undefined%20%3A%20arguments%5B8%5D%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20this%2EspriteUtilities%2Egrid%28columns%2C%20rows%2C%20cellWidth%2C%20cellHeight%2C%20centerCell%2C%20xOffset%2C%20yOffset%2C%20makeSprite%2C%20extra%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28o%29%3B%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28o%29%3B%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%60makeTiledWorld%60%20uses%20a%20Tiled%20Editor%20JSON%20file%20to%20generate%20a%20game%0A%20%20%20%20%2F%2Fworld%2E%20It%20uses%20the%20%60makeTiledWorld%60%20method%20from%20the%0A%20%20%20%20%2F%2F%60tileUtilities%60%20module%20to%20do%20help%20do%20this%2E%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22makeTiledWorld%22%2C%0A%20%20%20%20value%3A%20function%20makeTiledWorld%28jsonTiledMap%2C%20tileset%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis4%20%3D%20this%3B%0A%0A%20%20%20%20%20%20var%20o%20%3D%20this%2EtileUtilities%2EmakeTiledWorld%28jsonTiledMap%2C%20tileset%29%3B%0A%20%20%20%20%20%20this%2EaddProperties%28o%29%3B%0A%0A%20%20%20%20%20%20%2F%2FAdd%20Hexi%27s%20special%20sprite%20properties%20to%20the%20world%20object%20and%20all%0A%20%20%20%20%20%20%2F%2Fits%20child%20objects%0A%20%20%20%20%20%20var%20addHexiSpriteProperties%20%3D%20function%20addHexiSpriteProperties%28object%29%20%7B%0A%20%20%20%20%20%20%20%20%5Fthis4%2EaddProperties%28object%29%3B%0A%20%20%20%20%20%20%20%20if%20%28object%2Echildren%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28object%2Echildren%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20object%2Echildren%2EforEach%28function%20%28child%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20addHexiSpriteProperties%28child%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20if%20%28o%2Echildren%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28o%2Echildren%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%2Echildren%2EforEach%28function%20%28child%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20addHexiSpriteProperties%28child%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FReturn%20the%20world%20object%0A%20%20%20%20%20%20this%2Estage%2EaddChild%28o%29%3B%0A%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FUse%20%60remove%60%20to%20remove%20a%20sprite%20from%20its%20parent%2E%20You%20can%20supply%20a%0A%20%20%20%20%2F%2Fsingle%20sprite%2C%20a%20list%20of%20sprites%2C%20or%20an%20array%20of%20sprites%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22remove%22%2C%0A%20%20%20%20value%3A%20function%20remove%28%29%20%7B%0A%20%20%20%20%20%20var%20%5FspriteUtilities2%3B%0A%0A%20%20%20%20%20%20%28%5FspriteUtilities2%20%3D%20this%2EspriteUtilities%29%2Eremove%2Eapply%28%5FspriteUtilities2%2C%20arguments%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20flow%20methods%3A%20%60flowRight%60%2C%20%60flowDown%60%2C%20%60flowLeft%60%20and%0A%20%20%20%20%2F%2F%60flowUp%60%2E%0A%20%20%20%20%2F%2FUse%20them%20to%20easily%20align%20a%20row%20of%20sprites%20horizontally%20or%0A%20%20%20%20%2F%2Fvertically%2E%20The%20flow%20methods%20take%20two%20arguments%3A%20the%20padding%20%28in%0A%20%20%20%20%2F%2Fpixels%29%20between%20the%20sprites%2C%20and%20list%20of%20sprites%20%28or%20an%20array%0A%20%20%20%20%2F%2Fcontaining%20sprites%29%20that%20you%20want%20to%20align%2E%0A%20%20%20%20%2F%2F%28This%20feature%20was%20inspired%20by%20the%20Elm%20programming%20language%29%0A%0A%20%20%20%20%2F%2FflowRight%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22flowRight%22%2C%0A%20%20%20%20value%3A%20function%20flowRight%28padding%29%20%7B%0A%0A%20%20%20%20%20%20%2F%2FA%20function%20to%20flow%20the%20sprites%0A%20%20%20%20%20%20var%20flowSprites%20%3D%20function%20flowSprites%28spritesToFlow%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28spritesToFlow%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20spritesToFlow%2Elength%20%2D%201%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20spritesToFlow%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EputRight%28spritesToFlow%5Bi%20%2B%201%5D%2C%20%2Bpadding%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FCheck%20if%20%60sprites%60%20is%20a%20an%20array%20of%20sprites%2C%20or%20an%0A%20%20%20%20%20%20%2F%2Farray%20containing%20sprite%20objects%0A%0A%20%20%20%20%20%20for%20%28var%20%5Flen%20%3D%20arguments%2Elength%2C%20sprites%20%3D%20Array%28%5Flen%20%3E%201%20%3F%20%5Flen%20%2D%201%20%3A%200%29%2C%20%5Fkey%20%3D%201%3B%20%5Fkey%20%3C%20%5Flen%3B%20%5Fkey%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20sprites%5B%5Fkey%20%2D%201%5D%20%3D%20arguments%5B%5Fkey%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28%21%28sprites%5B0%5D%20instanceof%20Array%29%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIt%27s%20an%20array%20of%20sprites%0A%20%20%20%20%20%20%20%20flowSprites%28sprites%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FIt%27s%20an%20array%20containing%20sprite%20objects%0A%20%20%20%20%20%20%20%20var%20spritesArray%20%3D%20sprites%5B0%5D%3B%0A%20%20%20%20%20%20%20%20flowSprites%28spritesArray%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FflowDown%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22flowDown%22%2C%0A%20%20%20%20value%3A%20function%20flowDown%28padding%29%20%7B%0A%20%20%20%20%20%20var%20flowSprites%20%3D%20function%20flowSprites%28spritesToFlow%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28spritesToFlow%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20spritesToFlow%2Elength%20%2D%201%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20spritesToFlow%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EputBottom%28spritesToFlow%5Bi%20%2B%201%5D%2C%200%2C%20%2Bpadding%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20for%20%28var%20%5Flen2%20%3D%20arguments%2Elength%2C%20sprites%20%3D%20Array%28%5Flen2%20%3E%201%20%3F%20%5Flen2%20%2D%201%20%3A%200%29%2C%20%5Fkey2%20%3D%201%3B%20%5Fkey2%20%3C%20%5Flen2%3B%20%5Fkey2%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20sprites%5B%5Fkey2%20%2D%201%5D%20%3D%20arguments%5B%5Fkey2%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28%21%28sprites%5B0%5D%20instanceof%20Array%29%29%20%7B%0A%20%20%20%20%20%20%20%20flowSprites%28sprites%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20spritesArray%20%3D%20sprites%5B0%5D%3B%0A%20%20%20%20%20%20%20%20flowSprites%28spritesArray%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FflowLeft%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22flowLeft%22%2C%0A%20%20%20%20value%3A%20function%20flowLeft%28padding%29%20%7B%0A%20%20%20%20%20%20var%20flowSprites%20%3D%20function%20flowSprites%28spritesToFlow%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28spritesToFlow%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20spritesToFlow%2Elength%20%2D%201%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20spritesToFlow%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EputLeft%28spritesToFlow%5Bi%20%2B%201%5D%2C%20%2Dpadding%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20for%20%28var%20%5Flen3%20%3D%20arguments%2Elength%2C%20sprites%20%3D%20Array%28%5Flen3%20%3E%201%20%3F%20%5Flen3%20%2D%201%20%3A%200%29%2C%20%5Fkey3%20%3D%201%3B%20%5Fkey3%20%3C%20%5Flen3%3B%20%5Fkey3%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20sprites%5B%5Fkey3%20%2D%201%5D%20%3D%20arguments%5B%5Fkey3%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28%21%28sprites%5B0%5D%20instanceof%20Array%29%29%20%7B%0A%20%20%20%20%20%20%20%20flowSprites%28sprites%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20spritesArray%20%3D%20sprites%5B0%5D%3B%0A%20%20%20%20%20%20%20%20flowSprites%28spritesArray%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FflowUp%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22flowUp%22%2C%0A%20%20%20%20value%3A%20function%20flowUp%28padding%29%20%7B%0A%20%20%20%20%20%20var%20flowSprites%20%3D%20function%20flowSprites%28spritesToFlow%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28spritesToFlow%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20spritesToFlow%2Elength%20%2D%201%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20sprite%20%3D%20spritesToFlow%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sprite%2EputTop%28spritesToFlow%5Bi%20%2B%201%5D%2C%200%2C%20%2Dpadding%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20for%20%28var%20%5Flen4%20%3D%20arguments%2Elength%2C%20sprites%20%3D%20Array%28%5Flen4%20%3E%201%20%3F%20%5Flen4%20%2D%201%20%3A%200%29%2C%20%5Fkey4%20%3D%201%3B%20%5Fkey4%20%3C%20%5Flen4%3B%20%5Fkey4%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20sprites%5B%5Fkey4%20%2D%201%5D%20%3D%20arguments%5B%5Fkey4%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28%21%28sprites%5B0%5D%20instanceof%20Array%29%29%20%7B%0A%20%20%20%20%20%20%20%20flowSprites%28sprites%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20spritesArray%20%3D%20sprites%5B0%5D%3B%0A%20%20%20%20%20%20%20%20flowSprites%28spritesArray%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F7%2E%20SPRITE%20PROPERTIES%0A%0A%20%20%20%20%2F%2FThe%20sprite%20creation%20methods%20above%20all%20run%20the%20%60addProperties%60%0A%20%20%20%20%2F%2Fmethod%20on%20each%20sprite%20they%20create%2E%20%60addProperties%60%20adds%20special%0A%20%20%20%20%2F%2Fproperties%20and%20methods%20%28super%20powers%21%29%20to%20Hexi%20sprites%2E%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22addProperties%22%2C%0A%20%20%20%20value%3A%20function%20addProperties%28o%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis5%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2FVelocity%0A%20%20%20%20%20%20o%2Evx%20%3D%200%3B%0A%20%20%20%20%20%20o%2Evy%20%3D%200%3B%0A%0A%20%20%20%20%20%20%2F%2FA%20%22private%22%20%60%5Flayer%60%20property%0A%20%20%20%20%20%20o%2E%5Flayer%20%3D%200%3B%0A%0A%20%20%20%20%20%20%2F%2FIs%20the%20sprite%20circular%3F%20If%20it%20is%2C%20it%20will%20be%20given%20a%20%60radius%60%0A%20%20%20%20%20%20%2F%2Fand%20%60diameter%60%0A%20%20%20%20%20%20o%2E%5Fcircular%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%2F%2FIs%20the%20sprite%20interactive%3F%20Setting%20this%20to%20%60true%60%20makes%20the%0A%20%20%20%20%20%20%2F%2Fsprite%20behave%20like%20a%20button%0A%20%20%20%20%20%20o%2E%5Finteract%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%2F%2FIs%20the%20sprite%20draggable%3F%0A%20%20%20%20%20%20o%2E%5Fdraggable%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%2F%2FFlag%20this%20object%20for%20compatibility%20with%20the%20Bump%20collision%0A%20%20%20%20%20%20%2F%2Flibrary%0A%20%20%20%20%20%20o%2E%5FbumpPropertiesAdded%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%2F%2FSwap%20the%20depth%20layer%20positions%20of%20two%20child%20sprites%0A%20%20%20%20%20%20o%2EswapChildren%20%3D%20function%20%28child1%2C%20child2%29%20%7B%0A%20%20%20%20%20%20%20%20var%20index1%20%3D%20o%2Echildren%2EindexOf%28child1%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20index2%20%3D%20o%2Echildren%2EindexOf%28child2%29%3B%0A%20%20%20%20%20%20%20%20if%20%28index1%20%21%3D%3D%20%2D1%20%26%26%20index2%20%21%3D%3D%20%2D1%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FSwap%20the%20indexes%0A%20%20%20%20%20%20%20%20%20%20child1%2EchildIndex%20%3D%20index2%3B%0A%20%20%20%20%20%20%20%20%20%20child2%2EchildIndex%20%3D%20index1%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FSwap%20the%20array%20positions%0A%20%20%20%20%20%20%20%20%20%20o%2Echildren%5Bindex1%5D%20%3D%20child2%3B%0A%20%20%20%20%20%20%20%20%20%20o%2Echildren%5Bindex2%5D%20%3D%20child1%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28child%20%2B%20%22%20Both%20objects%20must%20be%20a%20child%20of%20the%20caller%20%22%20%2B%20o%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2F%60add%60%20and%20%60remove%60%20convenience%20methods%20let%20you%20add%20and%20remove%0A%20%20%20%20%20%20%2F%2Fmany%20sprites%20at%20the%20same%20time%2E%0A%20%20%20%20%20%20o%2Eadd%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20%5Flen5%20%3D%20arguments%2Elength%2C%20sprites%20%3D%20Array%28%5Flen5%29%2C%20%5Fkey5%20%3D%200%3B%20%5Fkey5%20%3C%20%5Flen5%3B%20%5Fkey5%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprites%5B%5Fkey5%5D%20%3D%20arguments%5B%5Fkey5%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28sprites%2Elength%20%3E%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprites%2EforEach%28function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2EaddChild%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%2EaddChild%28sprites%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20o%2Eremove%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20%5Flen6%20%3D%20arguments%2Elength%2C%20sprites%20%3D%20Array%28%5Flen6%29%2C%20%5Fkey6%20%3D%200%3B%20%5Fkey6%20%3C%20%5Flen6%3B%20%5Fkey6%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprites%5B%5Fkey6%5D%20%3D%20arguments%5B%5Fkey6%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28sprites%2Elength%20%3E%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprites%2EforEach%28function%20%28sprite%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2EremoveChild%28sprite%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%2EremoveChild%28sprites%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60put%60%20methods%20are%20conveniences%20that%20help%20you%20position%20a%0A%20%20%20%20%20%20%2F%2Fanother%20sprite%20in%20and%20around%20this%20sprite%2E%0A%20%20%20%20%20%20%2F%2FFirst%2C%20get%20a%20short%20form%20reference%20to%20the%20sprite%20to%20make%20the%20code%0A%20%20%20%20%20%20%2F%2Feasier%20to%20read%0A%20%20%20%20%20%20var%20a%20%3D%20o%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60nudgeAnchor%60%2C%20%60compensateForAnchor%60%20and%0A%20%20%20%20%20%20%2F%2F%60compensateForAnchors%60%20%28with%20an%20%22s%22%21%29%20methods%20are%20used%20by%0A%20%20%20%20%20%20%2F%2Fthe%20%60put%60%20methods%20to%20adjust%20the%20position%20of%20the%20sprite%20based%20on%0A%20%20%20%20%20%20%2F%2Fits%20x%2Fy%20anchor%20point%2E%0A%20%20%20%20%20%20var%20nudgeAnchor%20%3D%20function%20nudgeAnchor%28o%2C%20value%2C%20axis%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%5Baxis%5D%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20value%20%2A%20%281%20%2D%20o%2Eanchor%5Baxis%5D%20%2D%20o%2Eanchor%5Baxis%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20var%20compensateForAnchor%20%3D%20function%20compensateForAnchor%28o%2C%20value%2C%20axis%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%5Baxis%5D%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20value%20%2A%20o%2Eanchor%5Baxis%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20var%20compensateForAnchors%20%3D%20function%20compensateForAnchors%28a%2C%20b%2C%20property1%2C%20property2%29%20%7B%0A%20%20%20%20%20%20%20%20return%20compensateForAnchor%28a%2C%20a%5Bproperty1%5D%2C%20property2%29%20%2B%20compensateForAnchor%28b%2C%20b%5Bproperty1%5D%2C%20property2%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60put%60%20methods%3A%0A%20%20%20%20%20%20%2F%2FCenter%20a%20sprite%20inside%20this%20sprite%2E%20%60xOffset%60%20and%20%60yOffset%60%0A%20%20%20%20%20%20%2F%2Farguments%20determine%20by%20how%20much%20the%20other%20sprite%27s%20position%0A%20%20%20%20%20%20%2F%2Fshould%20be%20offset%20from%20the%20center%2E%20These%20methods%20use%20the%0A%20%20%20%20%20%20%2F%2Fsprites%27%20global%20coordinates%20%28%60gx%60%20and%20%60gy%60%29%2E%0A%20%20%20%20%20%20%2F%2FIn%20all%20these%20functions%2C%20%60b%60%20is%20the%20second%20sprite%20that%20is%20being%0A%20%20%20%20%20%20%2F%2Fpositioned%20relative%20to%20the%20first%20sprite%20%28this%20one%29%2C%20%60a%60%2E%0A%20%20%20%20%20%20%2F%2FCenter%20%60b%60%20inside%20%60a%60%2E%0A%20%20%20%20%20%20o%2EputCenter%20%3D%20function%20%28b%29%20%7B%0A%20%20%20%20%20%20%20%20var%20xOffset%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20var%20yOffset%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28o%2E%5Fstage%29%20a%20%3D%20%5Fthis5%2EcompensateForStageSize%28o%29%3B%0A%20%20%20%20%20%20%20%20%2F%2Fb%2Ex%20%3D%20%28a%2Ex%20%2B%20a%2EhalfWidth%20%2D%20%28b%2EhalfWidth%20%2A%20%28%281%20%2D%20b%2Eanchor%2Ex%29%20%2D%20b%2Eanchor%2Ex%29%29%29%20%2B%20xOffset%3B%0A%20%20%20%20%20%20%20%20b%2Ex%20%3D%20a%2Ex%20%2B%20nudgeAnchor%28a%2C%20a%2EhalfWidth%2C%20%22x%22%29%20%2D%20nudgeAnchor%28b%2C%20b%2EhalfWidth%2C%20%22x%22%29%20%2B%20xOffset%3B%0A%20%20%20%20%20%20%20%20b%2Ey%20%3D%20a%2Ey%20%2B%20nudgeAnchor%28a%2C%20a%2EhalfHeight%2C%20%22y%22%29%20%2D%20nudgeAnchor%28b%2C%20b%2EhalfHeight%2C%20%22y%22%29%20%2B%20yOffset%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCompensate%20for%20the%20parent%27s%20position%0A%20%20%20%20%20%20%20%20if%20%28%21o%2E%5Fstage%29%20o%2EcompensateForParentPosition%28a%2C%20b%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FPosition%20%60b%60%20to%20the%20left%20of%20%60a%60%2E%0A%20%20%20%20%20%20o%2EputLeft%20%3D%20function%20%28b%29%20%7B%0A%20%20%20%20%20%20%20%20var%20xOffset%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20var%20yOffset%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28o%2E%5Fstage%29%20a%20%3D%20%5Fthis5%2EcompensateForStageSize%28o%29%3B%0A%20%20%20%20%20%20%20%20b%2Ex%20%3D%20a%2Ex%20%2D%20nudgeAnchor%28b%2C%20b%2Ewidth%2C%20%22x%22%29%20%2B%20xOffset%20%2D%20compensateForAnchors%28a%2C%20b%2C%20%22width%22%2C%20%22x%22%29%3B%0A%20%20%20%20%20%20%20%20b%2Ey%20%3D%20a%2Ey%20%2B%20nudgeAnchor%28a%2C%20a%2EhalfHeight%2C%20%22y%22%29%20%2D%20nudgeAnchor%28b%2C%20b%2EhalfHeight%2C%20%22y%22%29%20%2B%20yOffset%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCompensate%20for%20the%20parent%27s%20position%0A%20%20%20%20%20%20%20%20if%20%28%21o%2E%5Fstage%29%20o%2EcompensateForParentPosition%28a%2C%20b%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FPosition%20%60b%60%20above%20%60a%60%2E%0A%20%20%20%20%20%20o%2EputTop%20%3D%20function%20%28b%29%20%7B%0A%20%20%20%20%20%20%20%20var%20xOffset%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20var%20yOffset%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28o%2E%5Fstage%29%20a%20%3D%20%5Fthis5%2EcompensateForStageSize%28o%29%3B%0A%20%20%20%20%20%20%20%20b%2Ex%20%3D%20a%2Ex%20%2B%20nudgeAnchor%28a%2C%20a%2EhalfWidth%2C%20%22x%22%29%20%2D%20nudgeAnchor%28b%2C%20b%2EhalfWidth%2C%20%22x%22%29%20%2B%20xOffset%3B%0A%20%20%20%20%20%20%20%20b%2Ey%20%3D%20a%2Ey%20%2D%20nudgeAnchor%28b%2C%20b%2Eheight%2C%20%22y%22%29%20%2B%20yOffset%20%2D%20compensateForAnchors%28a%2C%20b%2C%20%22height%22%2C%20%22y%22%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCompensate%20for%20the%20parent%27s%20position%0A%20%20%20%20%20%20%20%20if%20%28%21o%2E%5Fstage%29%20o%2EcompensateForParentPosition%28a%2C%20b%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FPosition%20%60b%60%20to%20the%20right%20of%20%60a%60%2E%0A%20%20%20%20%20%20o%2EputRight%20%3D%20function%20%28b%29%20%7B%0A%20%20%20%20%20%20%20%20var%20xOffset%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20var%20yOffset%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28o%2E%5Fstage%29%20a%20%3D%20%5Fthis5%2EcompensateForStageSize%28o%29%3B%0A%20%20%20%20%20%20%20%20b%2Ex%20%3D%20a%2Ex%20%2B%20nudgeAnchor%28a%2C%20a%2Ewidth%2C%20%22x%22%29%20%2B%20xOffset%20%2B%20compensateForAnchors%28a%2C%20b%2C%20%22width%22%2C%20%22x%22%29%3B%0A%20%20%20%20%20%20%20%20b%2Ey%20%3D%20a%2Ey%20%2B%20nudgeAnchor%28a%2C%20a%2EhalfHeight%2C%20%22y%22%29%20%2D%20nudgeAnchor%28b%2C%20b%2EhalfHeight%2C%20%22y%22%29%20%2B%20yOffset%3B%0A%20%20%20%20%20%20%20%20%2F%2Fb%2Ex%20%3D%20%28a%2Ex%20%2B%20a%2Ewidth%29%20%2B%20xOffset%3B%0A%20%20%20%20%20%20%20%20%2F%2Fb%2Ey%20%3D%20%28a%2Ey%20%2B%20a%2EhalfHeight%20%2D%20b%2EhalfHeight%29%20%2B%20yOffset%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCompensate%20for%20the%20parent%27s%20position%0A%20%20%20%20%20%20%20%20if%20%28%21o%2E%5Fstage%29%20o%2EcompensateForParentPosition%28a%2C%20b%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FPosition%20%60b%60%20below%20%60a%60%2E%0A%20%20%20%20%20%20o%2EputBottom%20%3D%20function%20%28b%29%20%7B%0A%20%20%20%20%20%20%20%20var%20xOffset%20%3D%20arguments%2Elength%20%3C%3D%201%20%7C%7C%20arguments%5B1%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20var%20yOffset%20%3D%20arguments%2Elength%20%3C%3D%202%20%7C%7C%20arguments%5B2%5D%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20arguments%5B2%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28o%2E%5Fstage%29%20a%20%3D%20%5Fthis5%2EcompensateForStageSize%28o%29%3B%0A%20%20%20%20%20%20%20%20%2F%2Fb%2Ex%20%3D%20%28a%2Ex%20%2B%20a%2EhalfWidth%20%2D%20b%2EhalfWidth%29%20%2B%20xOffset%3B%0A%20%20%20%20%20%20%20%20b%2Ex%20%3D%20a%2Ex%20%2B%20nudgeAnchor%28a%2C%20a%2EhalfWidth%2C%20%22x%22%29%20%2D%20nudgeAnchor%28b%2C%20b%2EhalfWidth%2C%20%22x%22%29%20%2B%20xOffset%3B%0A%20%20%20%20%20%20%20%20%2F%2Fb%2Ey%20%3D%20%28a%2Ey%20%2B%20a%2Eheight%29%20%2B%20yOffset%3B%0A%20%20%20%20%20%20%20%20b%2Ey%20%3D%20a%2Ey%20%2B%20nudgeAnchor%28a%2C%20a%2Eheight%2C%20%22y%22%29%20%2B%20yOffset%20%2B%20compensateForAnchors%28a%2C%20b%2C%20%22height%22%2C%20%22y%22%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCompensate%20for%20the%20parent%27s%20position%0A%20%20%20%20%20%20%20%20if%20%28%21o%2E%5Fstage%29%20o%2EcompensateForParentPosition%28a%2C%20b%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2F%60compensateForParentPosition%60%20is%20a%20helper%20function%20for%20the%20above%0A%20%20%20%20%20%20%2F%2F%60put%60%20methods%20that%20subracts%20the%20parent%27s%20global%20position%20from%0A%20%20%20%20%20%20%2F%2Fthe%20nested%20child%27s%20position%2E%0A%20%20%20%20%20%20o%2EcompensateForParentPosition%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28b%2Eparent%2Egx%20%21%3D%3D%200%20%7C%7C%20b%2Eparent%2Egy%20%21%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%2Ex%20%2D%3D%20a%2Egx%3B%0A%20%20%20%20%20%20%20%20%20%20b%2Ey%20%2D%3D%20a%2Egy%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20Object%2EdefineProperties%28o%2C%20%7B%0A%20%20%20%20%20%20%20%20%22gx%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2EgetGlobalPosition%28%29%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22gy%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2EgetGlobalPosition%28%29%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22centerX%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Ex%20%2B%20o%2Ewidth%20%2F%202%20%2D%20o%2ExAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22centerY%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Ey%20%2B%20o%2Eheight%20%2F%202%20%2D%20o%2EyAnchorOffset%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22halfWidth%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Ewidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22halfHeight%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Eheight%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22scaleModeNearest%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Etexture%2EbaseTexture%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Etexture%2EbaseTexture%2EscaleMode%20%3D%20PIXI%2ESCALE%5FMODES%2ENEAREST%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Etexture%2EbaseTexture%2EscaleMode%20%3D%20PIXI%2ESCALE%5FMODES%2ELINEAR%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%22The%20scale%20mode%20of%20%22%20%2B%20o%20%2B%20%22%20cannot%20be%20modified%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22pivotX%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Eanchor%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28o%20%2B%20%22%20does%20not%20have%20a%20PivotX%20value%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2Eanchor%2Ex%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21o%2E%5FpreviousPivotX%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Ex%20%2B%3D%20value%20%2A%20o%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Ex%20%2B%3D%20%28value%20%2D%20o%2E%5FpreviousPivotX%29%20%2A%20o%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5FpreviousPivotX%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22pivotY%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Eanchor%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%20%3D%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28o%20%2B%20%22%20does%20not%20have%20a%20PivotY%20value%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2Eanchor%2Ey%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21o%2E%5FpreviousPivotY%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Ey%20%2B%3D%20value%20%2A%20o%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Ey%20%2B%3D%20%28value%20%2D%20o%2E%5FpreviousPivotY%29%20%2A%20o%2Eheight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5FpreviousPivotY%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22xAnchorOffset%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Eheight%20%2A%20o%2Eanchor%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22yAnchorOffset%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Eanchor%20%21%3D%3D%20undefined%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Ewidth%20%2A%20o%2Eanchor%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22scaleX%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Escale%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2Escale%2Ex%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22scaleY%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Escale%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2Escale%2Ey%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FDepth%20layer%0A%20%20%20%20%20%20%20%20%22layer%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5Flayer%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Flayer%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Eparent%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FSort%20the%20sprite%E2%80%99s%20parent%E2%80%99s%20%60children%60%20array%20so%20that%20sprites%20with%20a%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fhigher%20%60layer%60%20value%20are%20moved%20to%20the%20end%20of%20the%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Eparent%2Echildren%2Esort%28function%20%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20a%2Elayer%20%2D%20b%2Elayer%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FInteractivity%0A%20%20%20%20%20%20%20%20%22interact%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5Finteract%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3D%3D%3D%20true%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21o%2E%5Finteract%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2EmakeInteractive%28o%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Finteract%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28self%2Etink%2Ebuttons%2EindexOf%28o%29%20%21%3D%3D%20%2D1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2Etink%2Ebuttons%2Esplice%28self%2Etink%2Ebuttons%2EindexOf%28o%29%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Finteract%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FDrag%20and%20drop%0A%20%20%20%20%20%20%20%20%22draggable%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5Fdraggable%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3D%3D%3D%20true%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21o%2E%5Fdraggable%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2EmakeDraggable%28o%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fdraggable%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2EmakeUndraggable%28o%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fdraggable%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20%60localBounds%60%20and%20%60globalBounds%60%20methods%20return%20an%20object%0A%20%20%20%20%20%20%20%20%2F%2Fwith%20%60x%60%2C%20%60y%60%2C%20%60width%60%2C%20and%20%60height%60%20properties%20that%20define%0A%20%20%20%20%20%20%20%20%2F%2Fthe%20dimensions%20and%20position%20of%20the%20sprite%2E%20This%20is%20a%20convenience%0A%20%20%20%20%20%20%20%20%2F%2Fto%20help%20you%20set%20or%20test%20boundaries%20without%20having%20to%20know%0A%20%20%20%20%20%20%20%20%2F%2Fthese%20numbers%20or%20request%20them%20specifically%20in%20your%20code%2E%0A%20%20%20%20%20%20%20%20%22localBounds%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20o%2Ewidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20height%3A%20o%2Eheight%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22globalBounds%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20o%2Egx%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20o%2Egy%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20o%2Egx%20%2B%20o%2Ewidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20height%3A%20o%2Egy%20%2B%20o%2Eheight%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2F%60empty%60%20is%20a%20convenience%20property%20that%20will%20return%20%60true%60%20or%0A%20%20%20%20%20%20%20%20%2F%2F%60false%60%20depending%20on%20whether%20or%20not%20this%20sprite%27s%20%60children%60%0A%20%20%20%20%20%20%20%20%2F%2Farray%20is%20empty%0A%20%20%20%20%20%20%20%20%22empty%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28o%2Echildren%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FThe%20%60circular%60%20property%20lets%20you%20define%20whether%20a%20sprite%0A%20%20%20%20%20%20%20%20%2F%2Fshould%20be%20interpreted%20as%20a%20circular%20object%2E%20If%20you%20set%0A%20%20%20%20%20%20%20%20%2F%2F%60circular%60%20to%20%60true%60%2C%20the%20sprite%20is%20given%20%60radius%60%20and%20%60diameter%60%0A%20%20%20%20%20%20%20%20%2F%2Fproperties%2E%20If%20you%20set%20%60circular%60%20to%20%60false%60%2C%20the%20%60radius%60%0A%20%20%20%20%20%20%20%20%2F%2Fand%20%60diameter%60%20properties%20are%20deleted%20from%20the%20sprite%0A%20%20%20%20%20%20%20%20%22circular%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2E%5Fcircular%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FGive%20the%20sprite%20%60diameter%60%20and%20%60radius%60%20properties%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fif%20%60circular%60%20is%20%60true%60%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3D%3D%3D%20true%20%26%26%20o%2E%5Fcircular%20%3D%3D%3D%20false%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Object%2EdefineProperties%28o%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22diameter%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Ewidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Ewidth%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Eheight%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22radius%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2EhalfWidth%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Ewidth%20%3D%20value%20%2A%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2Eheight%20%3D%20value%20%2A%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FSet%20o%2Esprite%27s%20%60%5Fcircular%60%20property%20to%20%60true%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fcircular%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FRemove%20the%20sprite%27s%20%60diameter%60%20and%20%60radius%60%20properties%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fif%20%60circular%60%20is%20%60false%60%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3D%3D%3D%20false%20%26%26%20o%2E%5Fcircular%20%3D%3D%3D%20true%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete%20o%2Ediameter%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete%20o%2Eradius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20o%2E%5Fcircular%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FA%20%60setPosition%60%20convenience%20method%20to%20let%20you%20set%20the%0A%20%20%20%20%20%20%2F%2Fx%20any%20y%20position%20of%20a%20sprite%20with%20one%20line%20of%20code%2E%0A%20%20%20%20%20%20o%2EsetPosition%20%3D%20function%20%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20%20%20o%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20o%2Ey%20%3D%20y%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FA%20similar%20%60setScale%60%20convenience%20method%0A%20%20%20%20%20%20o%2EsetScale%20%3D%20function%20%28xScale%2C%20yScale%29%20%7B%0A%20%20%20%20%20%20%20%20o%2Escale%2Ex%20%3D%20xScale%3B%0A%20%20%20%20%20%20%20%20o%2Escale%2Ey%20%3D%20yScale%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2FAnd%20a%20matching%20%60setPivot%60%20method%0A%20%20%20%20%20%20o%2EsetPivot%20%3D%20function%20%28xPivot%2C%20yPivot%29%20%7B%0A%20%20%20%20%20%20%20%20o%2EpivotX%20%3D%20xPivot%3B%0A%20%20%20%20%20%20%20%20o%2EpivotY%20%3D%20yPivot%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20if%20%28o%2Ecircular%29%20%7B%0A%20%20%20%20%20%20%20%20Object%2EdefineProperty%28o%2C%20%22radius%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%2Ewidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20enumerable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F8%2E%20Utilities%0A%0A%20%20%20%20%2F%2FA%20method%20to%20scale%20and%20align%20the%20canvas%20in%20the%20browser%0A%20%20%20%20%2F%2Fwindow%20using%20the%20%60scaleToWindow%2Ejs%60%20function%20module%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22scaleToWindow%22%2C%0A%20%20%20%20value%3A%20%28function%20%28%5FscaleToWindow%29%20%7B%0A%20%20%20%20%20%20function%20scaleToWindow%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FscaleToWindow%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20scaleToWindow%2EtoString%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5FscaleToWindow%2EtoString%28%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20return%20scaleToWindow%3B%0A%20%20%20%20%7D%29%28function%20%28%29%20%7B%0A%20%20%20%20%20%20var%20%5Fthis6%20%3D%20this%3B%0A%0A%20%20%20%20%20%20var%20scaleBorderColor%20%3D%20arguments%2Elength%20%3C%3D%200%20%7C%7C%20arguments%5B0%5D%20%3D%3D%3D%20undefined%20%3F%20%22%232C3539%22%20%3A%20arguments%5B0%5D%3B%0A%0A%20%20%20%20%20%20%2F%2FSet%20the%20default%20CSS%20padding%20and%20margins%20of%20HTML%20elements%20to%200%0A%20%20%20%20%20%20%2F%2F%3Cstyle%3E%2A%20%7Bpadding%3A%200%3B%20margin%3A%200%7D%3C%2Fstyle%3E%0A%20%20%20%20%20%20var%20newStyle%20%3D%20document%2EcreateElement%28%22style%22%29%3B%0A%20%20%20%20%20%20var%20style%20%3D%20%22%2A%20%7Bpadding%3A%200%3B%20margin%3A%200%7D%22%3B%0A%20%20%20%20%20%20newStyle%2EappendChild%28document%2EcreateTextNode%28style%29%29%3B%0A%20%20%20%20%20%20document%2Ehead%2EappendChild%28newStyle%29%3B%0A%0A%20%20%20%20%20%20%2F%2FUse%20the%20%60scaleToWindow%60%20function%20module%20to%20scale%20the%20canvas%20to%0A%20%20%20%20%20%20%2F%2Fthe%20maximum%20window%20size%0A%20%20%20%20%20%20this%2Escale%20%3D%20scaleToWindow%28this%2Ecanvas%2C%20scaleBorderColor%29%3B%0A%20%20%20%20%20%20this%2Epointer%2Escale%20%3D%20this%2Escale%3B%0A%0A%20%20%20%20%20%20%2F%2FRe%2Dscale%20on%20each%20browser%20resize%0A%20%20%20%20%20%20window%2EaddEventListener%28%22resize%22%2C%20function%20%28event%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FScale%20the%20canvas%20and%20update%20Hexi%27s%20global%20%60scale%60%20value%20and%0A%20%20%20%20%20%20%20%20%2F%2Fthe%20pointer%27s%20%60scale%60%20value%0A%20%20%20%20%20%20%20%20%5Fthis6%2Escale%20%3D%20scaleToWindow%28%5Fthis6%2Ecanvas%2C%20scaleBorderColor%29%3B%0A%20%20%20%20%20%20%20%20%5Fthis6%2Epointer%2Escale%20%3D%20%5Fthis6%2Escale%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%2F%2FFlag%20that%20the%20canvas%20has%20been%20scaled%0A%20%20%20%20%20%20this%2Ecanvas%2Escaled%20%3D%20true%3B%0A%20%20%20%20%7D%29%0A%0A%20%20%20%20%2F%2F%60log%60%20is%20a%20shortcut%20for%20%60console%2Elog%60%2C%20so%20that%20you%20have%20less%20to%0A%20%20%20%20%2F%2Ftype%20when%20you%27re%20debugging%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22log%22%2C%0A%20%20%20%20value%3A%20function%20log%28value%29%20%7B%0A%20%20%20%20%20%20return%20console%2Elog%28value%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20%60makeProgressBar%60%20method%20creates%20a%20%60progressBar%60%20object%20with%0A%20%20%20%20%2F%2F%60create%60%2C%20%60update%60%20and%20%60remove%60%20methods%2E%20It%27s%20called%20by%20the%0A%20%20%20%20%2F%2F%60loadingBar%60%20method%2C%20which%20should%20be%20run%20inside%20the%20%60load%60%0A%20%20%20%20%2F%2Ffunction%20of%20your%20application%20code%2E%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22makeProgressBar%22%2C%0A%20%20%20%20value%3A%20function%20makeProgressBar%28hexiObject%29%20%7B%0A%0A%20%20%20%20%20%20var%20hexi%20%3D%20hexiObject%3B%0A%0A%20%20%20%20%20%20%2F%2FThe%20%60progressBar%60%20object%0A%20%20%20%20%20%20hexi%2EprogressBar%20%3D%20%7B%0A%20%20%20%20%20%20%20%20maxWidth%3A%200%2C%0A%20%20%20%20%20%20%20%20height%3A%200%2C%0A%20%20%20%20%20%20%20%20backgroundColor%3A%20%220x808080%22%2C%0A%20%20%20%20%20%20%20%20foregroundColor%3A%20%220x00FFFF%22%2C%0A%20%20%20%20%20%20%20%20backBar%3A%20null%2C%0A%20%20%20%20%20%20%20%20frontBar%3A%20null%2C%0A%20%20%20%20%20%20%20%20percentage%3A%20null%2C%0A%20%20%20%20%20%20%20%20assets%3A%20null%2C%0A%20%20%20%20%20%20%20%20initialized%3A%20false%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FUse%20the%20%60create%60%20method%20to%20create%20the%20progress%20bar%0A%20%20%20%20%20%20%20%20create%3A%20function%20create%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FSet%20the%20maximum%20width%20to%20half%20the%20width%20of%20the%20canvas%0A%20%20%20%20%20%20%20%20%20%20this%2EmaxWidth%20%3D%20hexi%2Ecanvas%2Ewidth%20%2F%202%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FBuild%20the%20progress%20bar%20using%20two%20rectangle%20sprites%20and%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fone%20text%20sprite%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F1%2E%20Create%20the%20background%20bar%27s%20gray%20background%0A%20%20%20%20%20%20%20%20%20%20this%2EbackBar%20%3D%20hexi%2Erectangle%28this%2EmaxWidth%2C%2032%2C%20this%2EbackgroundColor%29%3B%0A%20%20%20%20%20%20%20%20%20%20this%2EbackBar%2Ex%20%3D%20hexi%2Ecanvas%2Ewidth%20%2F%202%20%2D%20this%2EmaxWidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20this%2EbackBar%2Ey%20%3D%20hexi%2Ecanvas%2Eheight%20%2F%202%20%2D%2016%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F2%2E%20Create%20the%20blue%20foreground%20bar%2E%20This%20is%20the%20element%20of%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fprogress%20bar%20that%20will%20increase%20in%20width%20as%20assets%20load%0A%20%20%20%20%20%20%20%20%20%20this%2EfrontBar%20%3D%20hexi%2Erectangle%28this%2EmaxWidth%2C%2032%2C%20this%2EforegroundColor%29%3B%0A%20%20%20%20%20%20%20%20%20%20this%2EfrontBar%2Ex%20%3D%20hexi%2Ecanvas%2Ewidth%20%2F%202%20%2D%20this%2EmaxWidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20this%2EfrontBar%2Ey%20%3D%20hexi%2Ecanvas%2Eheight%20%2F%202%20%2D%2016%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F3%2E%20A%20text%20sprite%20that%20will%20display%20the%20percentage%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fof%20assets%20that%20have%20loaded%0A%20%20%20%20%20%20%20%20%20%20this%2Epercentage%20%3D%20hexi%2Etext%28%220%25%22%2C%20%2228px%20sans%2Dserif%22%2C%20%22black%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20this%2Epercentage%2Ex%20%3D%20hexi%2Ecanvas%2Ewidth%20%2F%202%20%2D%20this%2EmaxWidth%20%2F%202%20%2B%2012%3B%0A%20%20%20%20%20%20%20%20%20%20this%2Epercentage%2Ey%20%3D%20hexi%2Ecanvas%2Eheight%20%2F%202%20%2D%2017%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FUse%20the%20%60update%60%20method%20to%20update%20the%20width%20of%20the%20bar%20and%0A%20%20%20%20%20%20%20%20%2F%2Fpercentage%20loaded%20each%20frame%0A%20%20%20%20%20%20%20%20update%3A%20function%20update%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FChange%20the%20width%20of%20the%20blue%20%60frontBar%60%20to%20match%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fratio%20of%20assets%20that%20have%20loaded%2E%0A%20%20%20%20%20%20%20%20%20%20var%20ratio%20%3D%20hexi%2EloadingProgress%20%2F%20100%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fconsole%2Elog%28%60ratio%3A%20%24%7Bratio%7D%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20this%2EfrontBar%2Ewidth%20%3D%20this%2EmaxWidth%20%2A%20ratio%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FDisplay%20the%20percentage%0A%20%20%20%20%20%20%20%20%20%20this%2Epercentage%2Econtent%20%3D%20Math%2Eround%28hexi%2EloadingProgress%29%20%2B%20%22%20%25%22%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F%2FUse%20the%20%60remove%60%20method%20to%20remove%20the%20progress%20bar%20when%20all%20the%0A%20%20%20%20%20%20%20%20%2F%2Fgame%20assets%20have%20finished%20loading%0A%20%20%20%20%20%20%20%20remove%3A%20function%20remove%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2FRemove%20the%20progress%20bar%20using%20the%20universal%20sprite%20%60remove%60%0A%20%20%20%20%20%20%20%20%20%20%2F%2Ffunction%0A%20%20%20%20%20%20%20%20%20%20hexi%2Estage%2EremoveChild%28this%2EfrontBar%29%3B%0A%20%20%20%20%20%20%20%20%20%20hexi%2Estage%2EremoveChild%28this%2EbackBar%29%3B%0A%20%20%20%20%20%20%20%20%20%20hexi%2Estage%2EremoveChild%28this%2Epercentage%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20%60loadingBar%60%20method%20should%20be%20called%20inside%20the%20user%2Ddefinable%0A%20%20%20%20%2F%2F%60load%60%20method%20in%20the%20application%20code%2E%20This%20function%20will%20run%20in%20a%0A%20%20%20%20%2F%2Floop%2E%20It%20will%20create%20the%20loading%20bar%2C%20and%20then%20call%20the%20loading%0A%20%20%20%20%2F%2Fbar%27s%20%60update%60%20method%20each%20frame%2E%20After%20all%20the%20assets%20have%20been%0A%20%20%20%20%2F%2Floaded%2C%20Hexi%27s%20%60validateAssets%60%20method%20removes%20the%20loading%20bar%2E%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22loadingBar%22%2C%0A%20%20%20%20value%3A%20function%20loadingBar%28%29%20%7B%0A%0A%20%20%20%20%20%20if%20%28%21this%2E%5FprogressBarAdded%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FRun%20the%20method%20that%20creates%20the%20progress%20bar%20object%0A%20%20%20%20%20%20%20%20this%2EmakeProgressBar%28this%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FCreate%20the%20loading%20bar%0A%20%20%20%20%20%20%20%20this%2EprogressBar%2Ecreate%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2FTell%20Hexi%20that%20a%20progress%20bar%20has%20been%20added%0A%20%20%20%20%20%20%20%20this%2E%5FprogressBarAdded%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%0A%20%20%20%20%20%20%20%20%2F%2FUpdate%20the%20progress%20bar%20each%20frame%0A%20%20%20%20%20%20%20%20this%2EprogressBar%2Eupdate%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FHexi%27s%20root%20%60stage%60%20object%20will%20have%20a%20width%20and%20height%20equal%20to%0A%20%20%20%20%2F%2Fits%20contents%2C%20not%20the%20size%20of%20the%20canvas%2E%20So%2C%20let%27s%20use%20the%20more%0A%20%20%20%20%2F%2Fuseful%20canvas%20width%20and%20height%20for%20relative%20positioning%20instead%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22compensateForStageSize%22%2C%0A%20%20%20%20value%3A%20function%20compensateForStageSize%28o%29%20%7B%0A%20%20%20%20%20%20if%20%28o%2E%5Fstage%20%3D%3D%3D%20true%29%20%7B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20a%2Ex%20%3D%200%3B%0A%20%20%20%20%20%20%20%20a%2Ey%20%3D%200%3B%0A%20%20%20%20%20%20%20%20a%2Ewidth%20%3D%20this%2Ecanvas%2Ewidth%3B%0A%20%20%20%20%20%20%20%20a%2Eheight%20%3D%20this%2Ecanvas%2Eheight%3B%0A%20%20%20%20%20%20%20%20a%2EhalfWidth%20%3D%20this%2Ecanvas%2Ewidth%20%2F%202%3B%0A%20%20%20%20%20%20%20%20a%2EhalfHeight%20%3D%20this%2Ecanvas%2Eheight%20%2F%202%3B%0A%20%20%20%20%20%20%20%20a%2ExAnchorOffset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20a%2EyAnchorOffset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FHigh%20level%20functions%20for%20accessing%20the%20loaded%20resources%20and%20custom%20parsed%0A%20%20%20%20%2F%2Fobjects%2C%20like%20sounds%2E%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22image%22%2C%0A%20%20%20%20value%3A%20function%20image%28imageFileName%29%20%7B%0A%20%20%20%20%20%20if%20%28this%2ETextureCache%5BimageFileName%5D%29%20%7B%0A%20%20%20%20%20%20%20%20return%20this%2ETextureCache%5BimageFileName%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28imageFileName%20%2B%20%22%20does%20not%20appear%20to%20be%20an%20image%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22id%22%2C%0A%20%20%20%20value%3A%20function%20id%28textureAtlasFrameId%29%20%7B%0A%20%20%20%20%20%20if%20%28this%2ETextureCache%5BtextureAtlasFrameId%5D%29%20%7B%0A%20%20%20%20%20%20%20%20return%20this%2ETextureCache%5BtextureAtlasFrameId%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28textureAtlasFrameId%20%2B%20%22%20does%20not%20appear%20to%20be%20a%20texture%20atlas%20frame%20id%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22json%22%2C%0A%20%20%20%20value%3A%20function%20json%28jsonFileName%29%20%7B%0A%20%20%20%20%20%20if%20%28this%2Eloader%2Eresources%5BjsonFileName%5D%2Edata%29%20%7B%0A%20%20%20%20%20%20%20%20return%20this%2Eresources%5BjsonFileName%5D%2Edata%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28jsonFileName%20%2B%20%22%20does%20not%20appear%20to%20be%20a%20JSON%20data%20file%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22xml%22%2C%0A%20%20%20%20value%3A%20function%20xml%28xmlFileName%29%20%7B%0A%20%20%20%20%20%20if%20%28this%2Eloader%2Eresources%5BxmlFileName%5D%2Edata%29%20%7B%0A%20%20%20%20%20%20%20%20return%20this%2Eresources%5BxmlFileName%5D%2Edata%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error%28xmlFileName%20%2B%20%22%20does%20not%20appear%20to%20be%20a%20XML%20data%20file%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22sound%22%2C%0A%20%20%20%20value%3A%20function%20sound%28soundFileName%29%20%7B%0A%20%20%20%20%20%20if%20%28this%2EsoundObjects%5BsoundFileName%5D%29%20%7B%0A%20%20%20%20%20%20%20%20return%20this%2EsoundObjects%5BsoundFileName%5D%3B%0A%20%20%20%20%20%20%7D%20%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22resources%22%2C%0A%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2Eloader%2Eresources%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FAdd%20Smoothie%20getters%20and%20setters%20to%20access%20the%20%60fps%60%2C%0A%20%20%20%20%2F%2F%60properties%60%2C%20%60renderFps%60%20and%20%60interpolate%60%20properties%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22fps%22%2C%0A%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2Esmoothie%2Efps%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20this%2Esmoothie%2Efps%20%3D%20value%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22renderFps%22%2C%0A%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2Esmoothie%2ErenderFps%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20this%2Esmoothie%2ErenderFps%20%3D%20value%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22interpolate%22%2C%0A%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2Esmoothie%2Einterpolate%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20this%2Esmoothie%2Einterpolate%20%3D%20value%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22interpolationProperties%22%2C%0A%20%20%20%20get%3A%20function%20get%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2Esmoothie%2Eproperties%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20this%2Esmoothie%2Eproperties%20%3D%20value%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20%60border%60%20property%20lets%20you%20set%20the%20border%20style%20on%20the%20canvas%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22border%22%2C%0A%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20this%2Ecanvas%2Estyle%2Eborder%20%3D%20value%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FThe%20%60backgroundColor%60%20property%20lets%20you%20set%20the%20background%20color%0A%20%20%20%20%2F%2Fof%20the%20renderer%0A%0A%20%20%7D%2C%20%7B%0A%20%20%20%20key%3A%20%22backgroundColor%22%2C%0A%20%20%20%20set%3A%20function%20set%28value%29%20%7B%0A%20%20%20%20%20%20this%2Erenderer%2EbackgroundColor%20%3D%20this%2Ecolor%28value%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%5D%29%3B%0A%0A%20%20return%20Hexi%3B%0A%7D%29%28%29%3B%0A%0A%2F%2F%23%20sourceMappingURL%3Dcore%2Ejs%2Emap"></script>

<!-- Main application file -->
<script src="data:application/x-javascript,%2F%2A%21%0A%20%2A%20%20howler%2Ejs%20v2%2E0%2E0%2Drc1%0A%20%2A%20%20howlerjs%2Ecom%0A%20%2A%0A%20%2A%20%20%28c%29%202013%2D2016%2C%20James%20Simpson%20of%20GoldFire%20Studios%0A%20%2A%20%20goldfirestudios%2Ecom%0A%20%2A%0A%20%2A%20%20MIT%20License%0A%20%2A%2F%0A%0A%28function%28%29%20%7B%0A%0A%20%20%27use%20strict%27%3B%0A%0A%20%20%2F%2A%2A%20Global%20Methods%20%2A%2A%2F%0A%20%20%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Create%20the%20global%20controller%2E%20All%20contained%20methods%20and%20properties%20apply%0A%20%20%20%2A%20to%20all%20sounds%20that%20are%20currently%20playing%20or%20will%20be%20in%20the%20future%2E%0A%20%20%20%2A%2F%0A%20%20var%20HowlerGlobal%20%3D%20function%28%29%20%7B%0A%20%20%20%20this%2Einit%28%29%3B%0A%20%20%7D%3B%0A%20%20HowlerGlobal%2Eprototype%20%3D%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Initialize%20the%20global%20Howler%20object%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowler%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20init%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%20%7C%7C%20Howler%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Internal%20properties%2E%0A%20%20%20%20%20%20self%2E%5Fcodecs%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20self%2E%5Fhowls%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fmuted%20%3D%20false%3B%0A%20%20%20%20%20%20self%2E%5Fvolume%20%3D%201%3B%0A%20%20%20%20%20%20self%2E%5FcanPlayEvent%20%3D%20%27canplaythrough%27%3B%0A%20%20%20%20%20%20self%2E%5Fnavigator%20%3D%20%28typeof%20window%20%21%3D%3D%20%27undefined%27%20%26%26%20window%2Enavigator%29%20%3F%20window%2Enavigator%20%3A%20null%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Public%20properties%2E%0A%20%20%20%20%20%20self%2EmasterGain%20%3D%20null%3B%0A%20%20%20%20%20%20self%2EnoAudio%20%3D%20false%3B%0A%20%20%20%20%20%20self%2EusingWebAudio%20%3D%20true%3B%0A%20%20%20%20%20%20self%2EautoSuspend%20%3D%20true%3B%0A%20%20%20%20%20%20self%2Ectx%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Set%20to%20false%20to%20disable%20the%20auto%20iOS%20enabler%2E%0A%20%20%20%20%20%20self%2EmobileAutoEnable%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20the%20various%20state%20values%20for%20global%20tracking%2E%0A%20%20%20%20%20%20self%2E%5Fsetup%28%29%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Get%2Fset%20the%20global%20volume%20for%20all%20sounds%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BFloat%7D%20vol%20Volume%20from%200%2E0%20to%201%2E0%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowler%2FFloat%7D%20%20%20%20%20Returns%20self%20or%20current%20volume%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20volume%3A%20function%28vol%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%20%7C%7C%20Howler%3B%0A%20%20%20%20%20%20vol%20%3D%20parseFloat%28vol%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20we%20don%27t%20have%20an%20AudioContext%20created%20yet%2C%20run%20the%20setup%2E%0A%20%20%20%20%20%20if%20%28%21self%2Ectx%29%20%7B%0A%20%20%20%20%20%20%20%20setupAudioContext%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28typeof%20vol%20%21%3D%3D%20%27undefined%27%20%26%26%20vol%20%3E%3D%200%20%26%26%20vol%20%3C%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fvolume%20%3D%20vol%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don%27t%20update%20any%20of%20the%20nodes%20if%20we%20are%20muted%2E%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5Fmuted%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20When%20using%20Web%20Audio%2C%20we%20just%20need%20to%20adjust%20the%20master%20gain%2E%0A%20%20%20%20%20%20%20%20if%20%28self%2EusingWebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2EmasterGain%2Egain%2Evalue%20%3D%20vol%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Loop%20through%20and%20change%20volume%20for%20all%20HTML5%20audio%20nodes%2E%0A%20%20%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cself%2E%5Fhowls%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21self%2E%5Fhowls%5Bi%5D%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20all%20of%20the%20sounds%20in%20this%20Howl%20group%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20ids%20%3D%20self%2E%5Fhowls%5Bi%5D%2E%5FgetSoundIds%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Loop%20through%20all%20sounds%20and%20change%20the%20volumes%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%3D0%3B%20j%3Cids%2Elength%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5Fhowls%5Bi%5D%2E%5FsoundById%28ids%5Bj%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sound%20%26%26%20sound%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2Evolume%20%3D%20sound%2E%5Fvolume%20%2A%20vol%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%2E%5Fvolume%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Handle%20muting%20and%20unmuting%20globally%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BBoolean%7D%20muted%20Is%20muted%20or%20not%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20mute%3A%20function%28muted%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%20%7C%7C%20Howler%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20we%20don%27t%20have%20an%20AudioContext%20created%20yet%2C%20run%20the%20setup%2E%0A%20%20%20%20%20%20if%20%28%21self%2Ectx%29%20%7B%0A%20%20%20%20%20%20%20%20setupAudioContext%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20self%2E%5Fmuted%20%3D%20muted%3B%0A%0A%20%20%20%20%20%20%2F%2F%20With%20Web%20Audio%2C%20we%20just%20need%20to%20mute%20the%20master%20gain%2E%0A%20%20%20%20%20%20if%20%28self%2EusingWebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20self%2EmasterGain%2Egain%2Evalue%20%3D%20muted%20%3F%200%20%3A%20self%2E%5Fvolume%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Loop%20through%20and%20mute%20all%20HTML5%20Audio%20nodes%2E%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cself%2E%5Fhowls%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21self%2E%5Fhowls%5Bi%5D%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20all%20of%20the%20sounds%20in%20this%20Howl%20group%2E%0A%20%20%20%20%20%20%20%20%20%20var%20ids%20%3D%20self%2E%5Fhowls%5Bi%5D%2E%5FgetSoundIds%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Loop%20through%20all%20sounds%20and%20mark%20the%20audio%20node%20as%20muted%2E%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%3D0%3B%20j%3Cids%2Elength%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5Fhowls%5Bi%5D%2E%5FsoundById%28ids%5Bj%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28sound%20%26%26%20sound%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2Emuted%20%3D%20%28muted%29%20%3F%20true%20%3A%20sound%2E%5Fmuted%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Unload%20and%20destroy%20all%20currently%20loaded%20Howl%20objects%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowler%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20unload%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%20%7C%7C%20Howler%3B%0A%0A%20%20%20%20%20%20for%20%28var%20i%3Dself%2E%5Fhowls%2Elength%2D1%3B%20i%3E%3D0%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fhowls%5Bi%5D%2Eunload%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Create%20a%20new%20AudioContext%20to%20make%20sure%20it%20is%20fully%20reset%2E%0A%20%20%20%20%20%20if%20%28self%2EusingWebAudio%20%26%26%20typeof%20self%2Ectx%2Eclose%20%21%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2Ectx%2Eclose%28%29%3B%0A%20%20%20%20%20%20%20%20self%2Ectx%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20setupAudioContext%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Check%20for%20codec%20support%20of%20specific%20extension%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BString%7D%20ext%20Audio%20file%20extention%2E%0A%20%20%20%20%20%2A%20%40return%20%7BBoolean%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20codecs%3A%20function%28ext%29%20%7B%0A%20%20%20%20%20%20return%20%28this%20%7C%7C%20Howler%29%2E%5Fcodecs%5Bext%5D%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Setup%20various%20state%20values%20for%20global%20tracking%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowler%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5Fsetup%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%20%7C%7C%20Howler%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Keeps%20track%20of%20the%20suspend%2Fresume%20state%20of%20the%20AudioContext%2E%0A%20%20%20%20%20%20self%2Estate%20%3D%20self%2Ectx%20%3F%20self%2Ectx%2Estate%20%7C%7C%20%27running%27%20%3A%20%27running%27%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Automatically%20begin%20the%2030%2Dsecond%20suspend%20process%0A%20%20%20%20%20%20self%2E%5FautoSuspend%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Check%20for%20supported%20codecs%2E%0A%20%20%20%20%20%20if%20%28%21self%2EnoAudio%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5FsetupCodecs%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Check%20for%20browser%20support%20for%20various%20codecs%20and%20cache%20the%20results%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowler%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FsetupCodecs%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%20%7C%7C%20Howler%3B%0A%20%20%20%20%20%20var%20audioTest%20%3D%20%28typeof%20Audio%20%21%3D%3D%20%27undefined%27%29%20%3F%20new%20Audio%28%29%20%3A%20null%3B%0A%0A%20%20%20%20%20%20if%20%28%21audioTest%20%7C%7C%20typeof%20audioTest%2EcanPlayType%20%21%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20var%20mpegTest%20%3D%20audioTest%2EcanPlayType%28%27audio%2Fmpeg%3B%27%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Opera%20version%20%3C33%20has%20mixed%20MP3%20support%2C%20so%20we%20need%20to%20check%20for%20and%20block%20it%2E%0A%20%20%20%20%20%20var%20checkOpera%20%3D%20self%2E%5Fnavigator%20%26%26%20self%2E%5Fnavigator%2EuserAgent%2Ematch%28%2FOPR%5C%2F%28%5B0%2D6%5D%2E%29%2Fg%29%3B%0A%20%20%20%20%20%20var%20isOldOpera%20%3D%20%28checkOpera%20%26%26%20parseInt%28checkOpera%5B0%5D%2Esplit%28%27%2F%27%29%5B1%5D%2C%2010%29%20%3C%2033%29%3B%0A%0A%20%20%20%20%20%20self%2E%5Fcodecs%20%3D%20%7B%0A%20%20%20%20%20%20%20%20mp3%3A%20%21%21%28%21isOldOpera%20%26%26%20%28mpegTest%20%7C%7C%20audioTest%2EcanPlayType%28%27audio%2Fmp3%3B%27%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%29%29%2C%0A%20%20%20%20%20%20%20%20mpeg%3A%20%21%21mpegTest%2C%0A%20%20%20%20%20%20%20%20opus%3A%20%21%21audioTest%2EcanPlayType%28%27audio%2Fogg%3B%20codecs%3D%22opus%22%27%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%2C%0A%20%20%20%20%20%20%20%20ogg%3A%20%21%21audioTest%2EcanPlayType%28%27audio%2Fogg%3B%20codecs%3D%22vorbis%22%27%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%2C%0A%20%20%20%20%20%20%20%20oga%3A%20%21%21audioTest%2EcanPlayType%28%27audio%2Fogg%3B%20codecs%3D%22vorbis%22%27%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%2C%0A%20%20%20%20%20%20%20%20wav%3A%20%21%21audioTest%2EcanPlayType%28%27audio%2Fwav%3B%20codecs%3D%221%22%27%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%2C%0A%20%20%20%20%20%20%20%20aac%3A%20%21%21audioTest%2EcanPlayType%28%27audio%2Faac%3B%27%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%2C%0A%20%20%20%20%20%20%20%20caf%3A%20%21%21audioTest%2EcanPlayType%28%27audio%2Fx%2Dcaf%3B%27%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%2C%0A%20%20%20%20%20%20%20%20m4a%3A%20%21%21%28audioTest%2EcanPlayType%28%27audio%2Fx%2Dm4a%3B%27%29%20%7C%7C%20audioTest%2EcanPlayType%28%27audio%2Fm4a%3B%27%29%20%7C%7C%20audioTest%2EcanPlayType%28%27audio%2Faac%3B%27%29%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%2C%0A%20%20%20%20%20%20%20%20mp4%3A%20%21%21%28audioTest%2EcanPlayType%28%27audio%2Fx%2Dmp4%3B%27%29%20%7C%7C%20audioTest%2EcanPlayType%28%27audio%2Fmp4%3B%27%29%20%7C%7C%20audioTest%2EcanPlayType%28%27audio%2Faac%3B%27%29%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%2C%0A%20%20%20%20%20%20%20%20weba%3A%20%21%21audioTest%2EcanPlayType%28%27audio%2Fwebm%3B%20codecs%3D%22vorbis%22%27%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%2C%0A%20%20%20%20%20%20%20%20webm%3A%20%21%21audioTest%2EcanPlayType%28%27audio%2Fwebm%3B%20codecs%3D%22vorbis%22%27%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%2C%0A%20%20%20%20%20%20%20%20dolby%3A%20%21%21audioTest%2EcanPlayType%28%27audio%2Fmp4%3B%20codecs%3D%22ec%2D3%22%27%29%2Ereplace%28%2F%5Eno%24%2F%2C%20%27%27%29%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Mobile%20browsers%20will%20only%20allow%20audio%20to%20be%20played%20after%20a%20user%20interaction%2E%0A%20%20%20%20%20%2A%20Attempt%20to%20automatically%20unlock%20audio%20on%20the%20first%20user%20interaction%2E%0A%20%20%20%20%20%2A%20Concept%20from%3A%20http%3A%2F%2Fpaulbakaus%2Ecom%2Ftutorials%2Fhtml5%2Fweb%2Daudio%2Don%2Dios%2F%0A%20%20%20%20%20%2A%20%40return%20%7BHowler%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FenableMobileAudio%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%20%7C%7C%20Howler%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Only%20run%20this%20on%20mobile%20devices%20if%20audio%20isn%27t%20already%20eanbled%2E%0A%20%20%20%20%20%20var%20isMobile%20%3D%20%2FiPhone%7CiPad%7CiPod%7CAndroid%7CBlackBerry%7CBB10%7CSilk%7CMobi%2Fi%2Etest%28self%2E%5Fnavigator%20%26%26%20self%2E%5Fnavigator%2EuserAgent%29%3B%0A%20%20%20%20%20%20var%20isTouch%20%3D%20%21%21%28%28%27ontouchend%27%20in%20window%29%20%7C%7C%20%28self%2E%5Fnavigator%20%26%26%20self%2E%5Fnavigator%2EmaxTouchPoints%20%3E%200%29%20%7C%7C%20%28self%2E%5Fnavigator%20%26%26%20self%2E%5Fnavigator%2EmsMaxTouchPoints%20%3E%200%29%29%3B%0A%20%20%20%20%20%20if%20%28self%2E%5FmobileEnabled%20%7C%7C%20%21self%2Ectx%20%7C%7C%20%28%21isMobile%20%26%26%20%21isTouch%29%29%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20self%2E%5FmobileEnabled%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Some%20mobile%20devices%2Fplatforms%20have%20distortion%20issues%20when%20opening%2Fclosing%20tabs%20and%2For%20web%20views%2E%0A%20%20%20%20%20%20%2F%2F%20Bugs%20in%20the%20browser%20%28especially%20Mobile%20Safari%29%20can%20cause%20the%20sampleRate%20to%20change%20from%2044100%20to%2048000%2E%0A%20%20%20%20%20%20%2F%2F%20By%20calling%20Howler%2Eunload%28%29%2C%20we%20create%20a%20new%20AudioContext%20with%20the%20correct%20sampleRate%2E%0A%20%20%20%20%20%20if%20%28%21self%2E%5FmobileUnloaded%20%26%26%20self%2Ectx%2EsampleRate%20%21%3D%3D%2044100%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5FmobileUnloaded%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20self%2Eunload%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Scratch%20buffer%20for%20enabling%20iOS%20to%20dispose%20of%20web%20audio%20buffers%20correctly%2C%20as%20per%3A%0A%20%20%20%20%20%20%2F%2F%20http%3A%2F%2Fstackoverflow%2Ecom%2Fquestions%2F24119684%0A%20%20%20%20%20%20self%2E%5FscratchBuffer%20%3D%20self%2Ectx%2EcreateBuffer%281%2C%201%2C%2022050%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Call%20this%20method%20on%20touch%20start%20to%20create%20and%20play%20a%20buffer%2C%0A%20%20%20%20%20%20%2F%2F%20then%20check%20if%20the%20audio%20actually%20played%20to%20determine%20if%0A%20%20%20%20%20%20%2F%2F%20audio%20has%20now%20been%20unlocked%20on%20iOS%2C%20Android%2C%20etc%2E%0A%20%20%20%20%20%20var%20unlock%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20an%20empty%20buffer%2E%0A%20%20%20%20%20%20%20%20var%20source%20%3D%20self%2Ectx%2EcreateBufferSource%28%29%3B%0A%20%20%20%20%20%20%20%20source%2Ebuffer%20%3D%20self%2E%5FscratchBuffer%3B%0A%20%20%20%20%20%20%20%20source%2Econnect%28self%2Ectx%2Edestination%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Play%20the%20empty%20buffer%2E%0A%20%20%20%20%20%20%20%20if%20%28typeof%20source%2Estart%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20source%2EnoteOn%280%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20source%2Estart%280%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Setup%20a%20timeout%20to%20check%20that%20we%20are%20unlocked%20on%20the%20next%20event%20loop%2E%0A%20%20%20%20%20%20%20%20source%2Eonended%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20source%2Edisconnect%280%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20the%20unlocked%20state%20and%20prevent%20this%20check%20from%20happening%20again%2E%0A%20%20%20%20%20%20%20%20%20%20self%2E%5FmobileEnabled%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20self%2EmobileAutoEnable%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Remove%20the%20touch%20start%20listener%2E%0A%20%20%20%20%20%20%20%20%20%20document%2EremoveEventListener%28%27touchend%27%2C%20unlock%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20a%20touch%20start%20listener%20to%20attempt%20an%20unlock%20in%2E%0A%20%20%20%20%20%20document%2EaddEventListener%28%27touchend%27%2C%20unlock%2C%20true%29%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Automatically%20suspend%20the%20Web%20Audio%20AudioContext%20after%20no%20sound%20has%20played%20for%2030%20seconds%2E%0A%20%20%20%20%20%2A%20This%20saves%20processing%2Fenergy%20and%20fixes%20various%20browser%2Dspecific%20bugs%20with%20audio%20getting%20stuck%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowler%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FautoSuspend%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20if%20%28%21self%2EautoSuspend%20%7C%7C%20%21self%2Ectx%20%7C%7C%20typeof%20self%2Ectx%2Esuspend%20%3D%3D%3D%20%27undefined%27%20%7C%7C%20%21Howler%2EusingWebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Check%20if%20any%20sounds%20are%20playing%2E%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cself%2E%5Fhowls%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5Fhowls%5Bi%5D%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%3D0%3B%20j%3Cself%2E%5Fhowls%5Bi%5D%2E%5Fsounds%2Elength%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21self%2E%5Fhowls%5Bi%5D%2E%5Fsounds%5Bj%5D%2E%5Fpaused%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28self%2E%5FsuspendTimer%29%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout%28self%2E%5FsuspendTimer%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20If%20no%20sound%20has%20played%20after%2030%20seconds%2C%20suspend%20the%20context%2E%0A%20%20%20%20%20%20self%2E%5FsuspendTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21self%2EautoSuspend%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20self%2E%5FsuspendTimer%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20self%2Estate%20%3D%20%27suspending%27%3B%0A%20%20%20%20%20%20%20%20self%2Ectx%2Esuspend%28%29%2Ethen%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2Estate%20%3D%20%27suspended%27%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FresumeAfterSuspend%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20self%2E%5FresumeAfterSuspend%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5FautoResume%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%2C%2030000%29%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Automatically%20resume%20the%20Web%20Audio%20AudioContext%20when%20a%20new%20sound%20is%20played%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowler%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FautoResume%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20if%20%28%21self%2Ectx%20%7C%7C%20typeof%20self%2Ectx%2Eresume%20%3D%3D%3D%20%27undefined%27%20%7C%7C%20%21Howler%2EusingWebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28self%2Estate%20%3D%3D%3D%20%27running%27%20%26%26%20self%2E%5FsuspendTimer%29%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout%28self%2E%5FsuspendTimer%29%3B%0A%20%20%20%20%20%20%20%20self%2E%5FsuspendTimer%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28self%2Estate%20%3D%3D%3D%20%27suspended%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2Estate%20%3D%20%27resuming%27%3B%0A%20%20%20%20%20%20%20%20self%2Ectx%2Eresume%28%29%2Ethen%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2Estate%20%3D%20%27running%27%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5FsuspendTimer%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20clearTimeout%28self%2E%5FsuspendTimer%29%3B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5FsuspendTimer%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20%28self%2Estate%20%3D%3D%3D%20%27suspending%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5FresumeAfterSuspend%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Setup%20the%20global%20audio%20controller%2E%0A%20%20var%20Howler%20%3D%20new%20HowlerGlobal%28%29%3B%0A%0A%20%20%2F%2A%2A%20Group%20Methods%20%2A%2A%2F%0A%20%20%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Create%20an%20audio%20group%20controller%2E%0A%20%20%20%2A%20%40param%20%7BObject%7D%20o%20Passed%20in%20properties%20for%20this%20group%2E%0A%20%20%20%2A%2F%0A%20%20var%20Howl%20%3D%20function%28o%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%2F%2F%20Throw%20an%20error%20if%20no%20source%20is%20provided%2E%0A%20%20%20%20if%20%28%21o%2Esrc%20%7C%7C%20o%2Esrc%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20console%2Eerror%28%27An%20array%20of%20source%20files%20must%20be%20passed%20with%20any%20new%20Howl%2E%27%29%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20self%2Einit%28o%29%3B%0A%20%20%7D%3B%0A%20%20Howl%2Eprototype%20%3D%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Initialize%20a%20new%20Howl%20group%20object%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BObject%7D%20o%20Passed%20in%20properties%20for%20this%20group%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20init%3A%20function%28o%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20we%20don%27t%20have%20an%20AudioContext%20created%20yet%2C%20run%20the%20setup%2E%0A%20%20%20%20%20%20if%20%28%21Howler%2Ectx%29%20%7B%0A%20%20%20%20%20%20%20%20setupAudioContext%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20user%2Ddefined%20default%20properties%2E%0A%20%20%20%20%20%20self%2E%5Fautoplay%20%3D%20o%2Eautoplay%20%7C%7C%20false%3B%0A%20%20%20%20%20%20self%2E%5Fformat%20%3D%20%28typeof%20o%2Eformat%20%21%3D%3D%20%27string%27%29%20%3F%20o%2Eformat%20%3A%20%5Bo%2Eformat%5D%3B%0A%20%20%20%20%20%20self%2E%5Fhtml5%20%3D%20o%2Ehtml5%20%7C%7C%20false%3B%0A%20%20%20%20%20%20self%2E%5Fmuted%20%3D%20o%2Emute%20%7C%7C%20false%3B%0A%20%20%20%20%20%20self%2E%5Floop%20%3D%20o%2Eloop%20%7C%7C%20false%3B%0A%20%20%20%20%20%20self%2E%5Fpool%20%3D%20o%2Epool%20%7C%7C%205%3B%0A%20%20%20%20%20%20self%2E%5Fpreload%20%3D%20%28typeof%20o%2Epreload%20%3D%3D%3D%20%27boolean%27%29%20%3F%20o%2Epreload%20%3A%20true%3B%0A%20%20%20%20%20%20self%2E%5Frate%20%3D%20o%2Erate%20%7C%7C%201%3B%0A%20%20%20%20%20%20self%2E%5Fsprite%20%3D%20o%2Esprite%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20self%2E%5Fsrc%20%3D%20%28typeof%20o%2Esrc%20%21%3D%3D%20%27string%27%29%20%3F%20o%2Esrc%20%3A%20%5Bo%2Esrc%5D%3B%0A%20%20%20%20%20%20self%2E%5Fvolume%20%3D%20o%2Evolume%20%21%3D%3D%20undefined%20%3F%20o%2Evolume%20%3A%201%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20all%20other%20default%20properties%2E%0A%20%20%20%20%20%20self%2E%5Fduration%20%3D%200%3B%0A%20%20%20%20%20%20self%2E%5Fstate%20%3D%20%27unloaded%27%3B%0A%20%20%20%20%20%20self%2E%5Fsounds%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5FendTimers%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20self%2E%5Fqueue%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20event%20listeners%2E%0A%20%20%20%20%20%20self%2E%5Fonend%20%3D%20o%2Eonend%20%3F%20%5B%7Bfn%3A%20o%2Eonend%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonfade%20%3D%20o%2Eonfade%20%3F%20%5B%7Bfn%3A%20o%2Eonfade%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonload%20%3D%20o%2Eonload%20%3F%20%5B%7Bfn%3A%20o%2Eonload%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonloaderror%20%3D%20o%2Eonloaderror%20%3F%20%5B%7Bfn%3A%20o%2Eonloaderror%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonpause%20%3D%20o%2Eonpause%20%3F%20%5B%7Bfn%3A%20o%2Eonpause%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonplay%20%3D%20o%2Eonplay%20%3F%20%5B%7Bfn%3A%20o%2Eonplay%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonstop%20%3D%20o%2Eonstop%20%3F%20%5B%7Bfn%3A%20o%2Eonstop%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonmute%20%3D%20o%2Eonmute%20%3F%20%5B%7Bfn%3A%20o%2Eonmute%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonvolume%20%3D%20o%2Eonvolume%20%3F%20%5B%7Bfn%3A%20o%2Eonvolume%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonrate%20%3D%20o%2Eonrate%20%3F%20%5B%7Bfn%3A%20o%2Eonrate%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonseek%20%3D%20o%2Eonseek%20%3F%20%5B%7Bfn%3A%20o%2Eonseek%7D%5D%20%3A%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Web%20Audio%20or%20HTML5%20Audio%3F%0A%20%20%20%20%20%20self%2E%5FwebAudio%20%3D%20Howler%2EusingWebAudio%20%26%26%20%21self%2E%5Fhtml5%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Automatically%20try%20to%20enable%20audio%20on%20iOS%2E%0A%20%20%20%20%20%20if%20%28typeof%20Howler%2Ectx%20%21%3D%3D%20%27undefined%27%20%26%26%20Howler%2Ectx%20%26%26%20Howler%2EmobileAutoEnable%29%20%7B%0A%20%20%20%20%20%20%20%20Howler%2E%5FenableMobileAudio%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Keep%20track%20of%20this%20Howl%20group%20in%20the%20global%20controller%2E%0A%20%20%20%20%20%20Howler%2E%5Fhowls%2Epush%28self%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Load%20the%20source%20file%20unless%20otherwise%20specified%2E%0A%20%20%20%20%20%20if%20%28self%2E%5Fpreload%29%20%7B%0A%20%20%20%20%20%20%20%20self%2Eload%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Load%20the%20audio%20file%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowler%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20load%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20url%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20no%20audio%20is%20available%2C%20quit%20immediately%2E%0A%20%20%20%20%20%20if%20%28Howler%2EnoAudio%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Femit%28%27loaderror%27%2C%20null%2C%20%27No%20audio%20support%2E%27%29%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Make%20sure%20our%20source%20is%20in%20an%20array%2E%0A%20%20%20%20%20%20if%20%28typeof%20self%2E%5Fsrc%20%3D%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fsrc%20%3D%20%5Bself%2E%5Fsrc%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Loop%20through%20the%20sources%20and%20pick%20the%20first%20one%20that%20is%20compatible%2E%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cself%2E%5Fsrc%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20var%20ext%2C%20str%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5Fformat%20%26%26%20self%2E%5Fformat%5Bi%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20an%20extension%20was%20specified%2C%20use%20that%20instead%2E%0A%20%20%20%20%20%20%20%20%20%20ext%20%3D%20self%2E%5Fformat%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Make%20sure%20the%20source%20is%20a%20string%2E%0A%20%20%20%20%20%20%20%20%20%20str%20%3D%20self%2E%5Fsrc%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20str%20%21%3D%3D%20%27string%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27loaderror%27%2C%20null%2C%20%27Non%2Dstring%20found%20in%20selected%20audio%20sources%20%2D%20ignoring%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Extract%20the%20file%20extension%20from%20the%20URL%20or%20base64%20data%20URI%2E%0A%20%20%20%20%20%20%20%20%20%20ext%20%3D%20%2F%5Edata%3Aaudio%5C%2F%28%5B%5E%3B%2C%5D%2B%29%3B%2Fi%2Eexec%28str%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21ext%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ext%20%3D%20%2F%5C%2E%28%5B%5E%2E%5D%2B%29%24%2F%2Eexec%28str%2Esplit%28%27%3F%27%2C%201%29%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28ext%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ext%20%3D%20ext%5B1%5D%2EtoLowerCase%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20this%20extension%20is%20available%2E%0A%20%20%20%20%20%20%20%20if%20%28Howler%2Ecodecs%28ext%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20url%20%3D%20self%2E%5Fsrc%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28%21url%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Femit%28%27loaderror%27%2C%20null%2C%20%27No%20codec%20support%20for%20selected%20audio%20sources%2E%27%29%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20self%2E%5Fsrc%20%3D%20url%3B%0A%20%20%20%20%20%20self%2E%5Fstate%20%3D%20%27loading%27%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20the%20hosting%20page%20is%20HTTPS%20and%20the%20source%20isn%27t%2C%0A%20%20%20%20%20%20%2F%2F%20drop%20down%20to%20HTML5%20Audio%20to%20avoid%20Mixed%20Content%20errors%2E%0A%20%20%20%20%20%20if%20%28window%2Elocation%2Eprotocol%20%3D%3D%3D%20%27https%3A%27%20%26%26%20url%2Eslice%280%2C%205%29%20%3D%3D%3D%20%27http%3A%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fhtml5%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20self%2E%5FwebAudio%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Create%20a%20new%20sound%20object%20and%20add%20it%20to%20the%20pool%2E%0A%20%20%20%20%20%20new%20Sound%28self%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Load%20and%20decode%20the%20audio%20data%20for%20playback%2E%0A%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20loadBuffer%28self%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Play%20a%20sound%20or%20resume%20previous%20playback%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BString%2FNumber%7D%20sprite%20%20%20Sprite%20name%20for%20sprite%20playback%20or%20sound%20id%20to%20continue%20previous%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BBoolean%7D%20internal%20Internal%20Use%3A%20true%20prevents%20event%20firing%2E%0A%20%20%20%20%20%2A%20%40return%20%7BNumber%7D%20%20%20%20%20%20%20%20%20%20Sound%20ID%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20play%3A%20function%28sprite%2C%20internal%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20id%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Determine%20if%20a%20sprite%2C%20sound%20id%20or%20nothing%20was%20passed%0A%20%20%20%20%20%20if%20%28typeof%20sprite%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20id%20%3D%20sprite%3B%0A%20%20%20%20%20%20%20%20sprite%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20sprite%20%3D%3D%3D%20%27string%27%20%26%26%20self%2E%5Fstate%20%3D%3D%3D%20%27loaded%27%20%26%26%20%21self%2E%5Fsprite%5Bsprite%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20passed%20sprite%20doesn%27t%20exist%2C%20do%20nothing%2E%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20sprite%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Use%20the%20default%20sound%20sprite%20%28plays%20the%20full%20audio%20length%29%2E%0A%20%20%20%20%20%20%20%20sprite%20%3D%20%27%5F%5Fdefault%27%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20there%20is%20a%20single%20paused%20sound%20that%20isn%27t%20ended%2E%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20there%20is%2C%20play%20that%20sound%2E%20If%20not%2C%20continue%20as%20usual%2E%0A%20%20%20%20%20%20%20%20var%20num%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cself%2E%5Fsounds%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5Fsounds%5Bi%5D%2E%5Fpaused%20%26%26%20%21self%2E%5Fsounds%5Bi%5D%2E%5Fended%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20num%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20id%20%3D%20self%2E%5Fsounds%5Bi%5D%2E%5Fid%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28num%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprite%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20id%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Get%20the%20selected%20node%2C%20or%20get%20one%20from%20the%20pool%2E%0A%20%20%20%20%20%20var%20sound%20%3D%20id%20%3F%20self%2E%5FsoundById%28id%29%20%3A%20self%2E%5FinactiveSound%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20the%20sound%20doesn%27t%20exist%2C%20do%20nothing%2E%0A%20%20%20%20%20%20if%20%28%21sound%29%20%7B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Select%20the%20sprite%20definition%2E%0A%20%20%20%20%20%20if%20%28id%20%26%26%20%21sprite%29%20%7B%0A%20%20%20%20%20%20%20%20sprite%20%3D%20sound%2E%5Fsprite%20%7C%7C%20%27%5F%5Fdefault%27%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20If%20we%20have%20no%20sprite%20and%20the%20sound%20hasn%27t%20loaded%2C%20we%20must%20wait%0A%20%20%20%20%20%20%2F%2F%20for%20the%20sound%20to%20load%20to%20get%20our%20audio%27s%20duration%2E%0A%20%20%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%20%26%26%20%21self%2E%5Fsprite%5Bsprite%5D%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fqueue%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20event%3A%20%27play%27%2C%0A%20%20%20%20%20%20%20%20%20%20action%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2Eplay%28self%2E%5FsoundById%28sound%2E%5Fid%29%20%3F%20sound%2E%5Fid%20%3A%20undefined%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20sound%2E%5Fid%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Don%27t%20play%20the%20sound%20if%20an%20id%20was%20passed%20and%20it%20is%20already%20playing%2E%0A%20%20%20%20%20%20if%20%28id%20%26%26%20%21sound%2E%5Fpaused%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Trigger%20the%20play%20event%2C%20in%20order%20to%20keep%20iterating%20through%20queue%2E%0A%20%20%20%20%20%20%20%20if%20%28%21internal%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20setTimeout%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27play%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20sound%2E%5Fid%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Make%20sure%20the%20AudioContext%20isn%27t%20suspended%2C%20and%20resume%20it%20if%20it%20is%2E%0A%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20Howler%2E%5FautoResume%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Determine%20how%20long%20to%20play%20for%20and%20where%20to%20start%20playing%2E%0A%20%20%20%20%20%20var%20seek%20%3D%20sound%2E%5Fseek%20%3E%200%20%3F%20sound%2E%5Fseek%20%3A%20self%2E%5Fsprite%5Bsprite%5D%5B0%5D%20%2F%201000%3B%0A%20%20%20%20%20%20var%20duration%20%3D%20%28%28self%2E%5Fsprite%5Bsprite%5D%5B0%5D%20%2B%20self%2E%5Fsprite%5Bsprite%5D%5B1%5D%29%20%2F%201000%29%20%2D%20seek%3B%0A%20%20%20%20%20%20var%20timeout%20%3D%20%28duration%20%2A%201000%29%20%2F%20Math%2Eabs%28sound%2E%5Frate%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Update%20the%20parameters%20of%20the%20sound%0A%20%20%20%20%20%20sound%2E%5Fpaused%20%3D%20false%3B%0A%20%20%20%20%20%20sound%2E%5Fended%20%3D%20false%3B%0A%20%20%20%20%20%20sound%2E%5Fsprite%20%3D%20sprite%3B%0A%20%20%20%20%20%20sound%2E%5Fseek%20%3D%20seek%3B%0A%20%20%20%20%20%20sound%2E%5Fstart%20%3D%20self%2E%5Fsprite%5Bsprite%5D%5B0%5D%20%2F%201000%3B%0A%20%20%20%20%20%20sound%2E%5Fstop%20%3D%20%28self%2E%5Fsprite%5Bsprite%5D%5B0%5D%20%2B%20self%2E%5Fsprite%5Bsprite%5D%5B1%5D%29%20%2F%201000%3B%0A%20%20%20%20%20%20sound%2E%5Floop%20%3D%20%21%21%28sound%2E%5Floop%20%7C%7C%20self%2E%5Fsprite%5Bsprite%5D%5B2%5D%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Begin%20the%20actual%20playback%2E%0A%20%20%20%20%20%20var%20node%20%3D%20sound%2E%5Fnode%3B%0A%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Fire%20this%20when%20the%20sound%20is%20ready%20to%20play%20to%20begin%20Web%20Audio%20playback%2E%0A%20%20%20%20%20%20%20%20var%20playWebAudio%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5FrefreshBuffer%28sound%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Setup%20the%20playback%20params%2E%0A%20%20%20%20%20%20%20%20%20%20var%20vol%20%3D%20%28sound%2E%5Fmuted%20%7C%7C%20self%2E%5Fmuted%29%20%3F%200%20%3A%20sound%2E%5Fvolume%20%2A%20Howler%2Evolume%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20node%2Egain%2EsetValueAtTime%28vol%2C%20Howler%2Ectx%2EcurrentTime%29%3B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5FplayStart%20%3D%20Howler%2Ectx%2EcurrentTime%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Play%20the%20sound%20using%20the%20supported%20method%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20node%2EbufferSource%2Estart%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Floop%20%3F%20node%2EbufferSource%2EnoteGrainOn%280%2C%20seek%2C%2086400%29%20%3A%20node%2EbufferSource%2EnoteGrainOn%280%2C%20seek%2C%20duration%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Floop%20%3F%20node%2EbufferSource%2Estart%280%2C%20seek%2C%2086400%29%20%3A%20node%2EbufferSource%2Estart%280%2C%20seek%2C%20duration%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Start%20a%20new%20timer%20if%20none%20is%20present%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28timeout%20%21%3D%3D%20Infinity%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5FendTimers%5Bsound%2E%5Fid%5D%20%3D%20setTimeout%28self%2E%5Fended%2Ebind%28self%2C%20sound%29%2C%20timeout%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21internal%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27play%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5Fstate%20%3D%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20playWebAudio%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wait%20for%20the%20audio%20to%20load%20and%20then%20begin%20playback%2E%0A%20%20%20%20%20%20%20%20%20%20self%2Eonce%28%27load%27%2C%20playWebAudio%2C%20sound%2E%5Fid%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Cancel%20the%20end%20timer%2E%0A%20%20%20%20%20%20%20%20%20%20self%2E%5FclearTimer%28sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Fire%20this%20when%20the%20sound%20is%20ready%20to%20play%20to%20begin%20HTML5%20Audio%20playback%2E%0A%20%20%20%20%20%20%20%20var%20playHtml5%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%2EcurrentTime%20%3D%20seek%3B%0A%20%20%20%20%20%20%20%20%20%20node%2Emuted%20%3D%20sound%2E%5Fmuted%20%7C%7C%20self%2E%5Fmuted%20%7C%7C%20Howler%2E%5Fmuted%20%7C%7C%20node%2Emuted%3B%0A%20%20%20%20%20%20%20%20%20%20node%2Evolume%20%3D%20sound%2E%5Fvolume%20%2A%20Howler%2Evolume%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20node%2EplaybackRate%20%3D%20sound%2E%5Frate%3B%0A%0A%20%20%20%20%20%20%20%20%20%20setTimeout%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%2Eplay%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Setup%20the%20new%20end%20timer%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28timeout%20%21%3D%3D%20Infinity%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5FendTimers%5Bsound%2E%5Fid%5D%20%3D%20setTimeout%28self%2E%5Fended%2Ebind%28self%2C%20sound%29%2C%20timeout%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21internal%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27play%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Play%20immediately%20if%20ready%2C%20or%20wait%20for%20the%20%27canplaythrough%27e%20vent%2E%0A%20%20%20%20%20%20%20%20var%20loadedNoReadyState%20%3D%20%28self%2E%5Fstate%20%3D%3D%3D%20%27loaded%27%20%26%26%20%28window%20%26%26%20window%2Eejecta%20%7C%7C%20%21node%2EreadyState%20%26%26%20Howler%2E%5Fnavigator%2EisCocoonJS%29%29%3B%0A%20%20%20%20%20%20%20%20if%20%28node%2EreadyState%20%3D%3D%3D%204%20%7C%7C%20loadedNoReadyState%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20playHtml5%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20listener%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Begin%20playback%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20playHtml5%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Clear%20this%20listener%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20node%2EremoveEventListener%28Howler%2E%5FcanPlayEvent%2C%20listener%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20node%2EaddEventListener%28Howler%2E%5FcanPlayEvent%2C%20listener%2C%20false%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Cancel%20the%20end%20timer%2E%0A%20%20%20%20%20%20%20%20%20%20self%2E%5FclearTimer%28sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20sound%2E%5Fid%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Pause%20playback%20and%20save%20current%20position%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20The%20sound%20ID%20%28empty%20to%20pause%20all%20in%20group%29%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20pause%3A%20function%28id%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20the%20sound%20hasn%27t%20loaded%2C%20add%20it%20to%20the%20load%20queue%20to%20pause%20when%20capable%2E%0A%20%20%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fqueue%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20event%3A%20%27pause%27%2C%0A%20%20%20%20%20%20%20%20%20%20action%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2Epause%28id%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20If%20no%20id%20is%20passed%2C%20get%20all%20ID%27s%20to%20be%20paused%2E%0A%20%20%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28id%29%3B%0A%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cids%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Clear%20the%20end%20timer%2E%0A%20%20%20%20%20%20%20%20self%2E%5FclearTimer%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20the%20sound%2E%0A%20%20%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5FsoundById%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28sound%20%26%26%20%21sound%2E%5Fpaused%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Reset%20the%20seek%20position%2E%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fseek%20%3D%20self%2Eseek%28ids%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5FrateSeek%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fpaused%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Stop%20currently%20running%20fades%2E%0A%20%20%20%20%20%20%20%20%20%20self%2E%5FstopFade%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28sound%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20make%20sure%20the%20sound%20has%20been%20created%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21sound%2E%5Fnode%2EbufferSource%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20sound%2E%5Fnode%2EbufferSource%2Estop%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2EnoteOff%280%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2Estop%280%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Clean%20up%20the%20buffer%20source%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5FcleanBuffer%28sound%2E%5Fnode%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28%21isNaN%28sound%2E%5Fnode%2Eduration%29%20%7C%7C%20sound%2E%5Fnode%2Eduration%20%3D%3D%3D%20Infinity%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2Epause%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Fire%20the%20pause%20event%2C%20unless%20%60true%60%20is%20passed%20as%20the%202nd%20argument%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21arguments%5B1%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27pause%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Stop%20playback%20and%20reset%20to%20start%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20The%20sound%20ID%20%28empty%20to%20stop%20all%20in%20group%29%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BBoolean%7D%20internal%20Internal%20Use%3A%20true%20prevents%20event%20firing%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20stop%3A%20function%28id%2C%20internal%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20the%20sound%20hasn%27t%20loaded%2C%20add%20it%20to%20the%20load%20queue%20to%20stop%20when%20capable%2E%0A%20%20%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fqueue%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20event%3A%20%27stop%27%2C%0A%20%20%20%20%20%20%20%20%20%20action%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2Estop%28id%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20If%20no%20id%20is%20passed%2C%20get%20all%20ID%27s%20to%20be%20stopped%2E%0A%20%20%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28id%29%3B%0A%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cids%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Clear%20the%20end%20timer%2E%0A%20%20%20%20%20%20%20%20self%2E%5FclearTimer%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20the%20sound%2E%0A%20%20%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5FsoundById%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28sound%20%26%26%20%21sound%2E%5Fpaused%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Reset%20the%20seek%20position%2E%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fseek%20%3D%20sound%2E%5Fstart%20%7C%7C%200%3B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5FrateSeek%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fpaused%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fended%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Stop%20currently%20running%20fades%2E%0A%20%20%20%20%20%20%20%20%20%20self%2E%5FstopFade%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28sound%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20make%20sure%20the%20sound%20has%20been%20created%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21sound%2E%5Fnode%2EbufferSource%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20sound%2E%5Fnode%2EbufferSource%2Estop%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2EnoteOff%280%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2Estop%280%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Clean%20up%20the%20buffer%20source%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5FcleanBuffer%28sound%2E%5Fnode%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28%21isNaN%28sound%2E%5Fnode%2Eduration%29%20%7C%7C%20sound%2E%5Fnode%2Eduration%20%3D%3D%3D%20Infinity%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2Epause%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EcurrentTime%20%3D%20sound%2E%5Fstart%20%7C%7C%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28sound%20%26%26%20%21internal%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27stop%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Mute%2Funmute%20a%20single%20sound%20or%20all%20sounds%20in%20this%20Howl%20group%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BBoolean%7D%20muted%20Set%20to%20true%20to%20mute%20and%20false%20to%20unmute%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20%20%20%20The%20sound%20ID%20to%20update%20%28omit%20to%20mute%2Funmute%20all%29%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20mute%3A%20function%28muted%2C%20id%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20the%20sound%20hasn%27t%20loaded%2C%20add%20it%20to%20the%20load%20queue%20to%20mute%20when%20capable%2E%0A%20%20%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fqueue%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20event%3A%20%27mute%27%2C%0A%20%20%20%20%20%20%20%20%20%20action%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2Emute%28muted%2C%20id%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20If%20applying%20mute%2Funmute%20to%20all%20sounds%2C%20update%20the%20group%27s%20value%2E%0A%20%20%20%20%20%20if%20%28typeof%20id%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20muted%20%3D%3D%3D%20%27boolean%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Fmuted%20%3D%20muted%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20self%2E%5Fmuted%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20If%20no%20id%20is%20passed%2C%20get%20all%20ID%27s%20to%20be%20muted%2E%0A%20%20%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28id%29%3B%0A%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cids%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20the%20sound%2E%0A%20%20%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5FsoundById%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28sound%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fmuted%20%3D%20muted%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%20%26%26%20sound%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2Egain%2EsetValueAtTime%28muted%20%3F%200%20%3A%20sound%2E%5Fvolume%20%2A%20Howler%2Evolume%28%29%2C%20Howler%2Ectx%2EcurrentTime%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28sound%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2Emuted%20%3D%20Howler%2E%5Fmuted%20%3F%20true%20%3A%20muted%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27mute%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Get%2Fset%20the%20volume%20of%20this%20sound%20or%20of%20the%20Howl%20group%2E%20This%20method%20can%20optionally%20take%200%2C%201%20or%202%20arguments%2E%0A%20%20%20%20%20%2A%20%20%20volume%28%29%20%2D%3E%20Returns%20the%20group%27s%20volume%20value%2E%0A%20%20%20%20%20%2A%20%20%20volume%28id%29%20%2D%3E%20Returns%20the%20sound%20id%27s%20current%20volume%2E%0A%20%20%20%20%20%2A%20%20%20volume%28vol%29%20%2D%3E%20Sets%20the%20volume%20of%20all%20sounds%20in%20this%20Howl%20group%2E%0A%20%20%20%20%20%2A%20%20%20volume%28vol%2C%20id%29%20%2D%3E%20Sets%20the%20volume%20of%20passed%20sound%20id%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%2FNumber%7D%20Returns%20self%20or%20current%20volume%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20volume%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20args%20%3D%20arguments%3B%0A%20%20%20%20%20%20var%20vol%2C%20id%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Determine%20the%20values%20based%20on%20arguments%2E%0A%20%20%20%20%20%20if%20%28args%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20the%20value%20of%20the%20groups%27%20volume%2E%0A%20%20%20%20%20%20%20%20return%20self%2E%5Fvolume%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28args%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20First%20check%20if%20this%20is%20an%20ID%2C%20and%20if%20not%2C%20assume%20it%20is%20a%20new%20volume%2E%0A%20%20%20%20%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28%29%3B%0A%20%20%20%20%20%20%20%20var%20index%20%3D%20ids%2EindexOf%28args%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20if%20%28index%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20id%20%3D%20parseInt%28args%5B0%5D%2C%2010%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20vol%20%3D%20parseFloat%28args%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20%28args%2Elength%20%3E%3D%202%29%20%7B%0A%20%20%20%20%20%20%20%20vol%20%3D%20parseFloat%28args%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20id%20%3D%20parseInt%28args%5B1%5D%2C%2010%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Update%20the%20volume%20or%20return%20the%20current%20volume%2E%0A%20%20%20%20%20%20var%20sound%3B%0A%20%20%20%20%20%20if%20%28typeof%20vol%20%21%3D%3D%20%27undefined%27%20%26%26%20vol%20%3E%3D%200%20%26%26%20vol%20%3C%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20sound%20hasn%27t%20loaded%2C%20add%20it%20to%20the%20load%20queue%20to%20change%20volume%20when%20capable%2E%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Fqueue%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20event%3A%20%27volume%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20action%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2Evolume%2Eapply%28self%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Set%20the%20group%20volume%2E%0A%20%20%20%20%20%20%20%20if%20%28typeof%20id%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Fvolume%20%3D%20vol%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Update%20one%20or%20all%20volumes%2E%0A%20%20%20%20%20%20%20%20id%20%3D%20self%2E%5FgetSoundIds%28id%29%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cid%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20the%20sound%2E%0A%20%20%20%20%20%20%20%20%20%20sound%20%3D%20self%2E%5FsoundById%28id%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28sound%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fvolume%20%3D%20vol%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Stop%20currently%20running%20fades%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21args%5B2%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5FstopFade%28id%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%20%26%26%20sound%2E%5Fnode%20%26%26%20%21sound%2E%5Fmuted%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2Egain%2EsetValueAtTime%28vol%20%2A%20Howler%2Evolume%28%29%2C%20Howler%2Ectx%2EcurrentTime%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28sound%2E%5Fnode%20%26%26%20%21sound%2E%5Fmuted%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2Evolume%20%3D%20vol%20%2A%20Howler%2Evolume%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27volume%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20sound%20%3D%20id%20%3F%20self%2E%5FsoundById%28id%29%20%3A%20self%2E%5Fsounds%5B0%5D%3B%0A%20%20%20%20%20%20%20%20return%20sound%20%3F%20sound%2E%5Fvolume%20%3A%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Fade%20a%20currently%20playing%20sound%20between%20two%20volumes%20%28if%20no%20id%20is%20passsed%2C%20all%20sounds%20will%20fade%29%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20from%20The%20value%20to%20fade%20from%20%280%2E0%20to%201%2E0%29%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20to%20%20%20The%20volume%20to%20fade%20to%20%280%2E0%20to%201%2E0%29%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20len%20%20Time%20in%20milliseconds%20to%20fade%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20%20%20The%20sound%20id%20%28omit%20to%20fade%20all%20sounds%29%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20fade%3A%20function%28from%2C%20to%2C%20len%2C%20id%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20diff%20%3D%20Math%2Eabs%28from%20%2D%20to%29%3B%0A%20%20%20%20%20%20var%20dir%20%3D%20from%20%3E%20to%20%3F%20%27out%27%20%3A%20%27in%27%3B%0A%20%20%20%20%20%20var%20steps%20%3D%20diff%20%2F%200%2E01%3B%0A%20%20%20%20%20%20var%20stepLen%20%3D%20len%20%2F%20steps%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20the%20sound%20hasn%27t%20loaded%2C%20add%20it%20to%20the%20load%20queue%20to%20fade%20when%20capable%2E%0A%20%20%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fqueue%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20event%3A%20%27fade%27%2C%0A%20%20%20%20%20%20%20%20%20%20action%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2Efade%28from%2C%20to%2C%20len%2C%20id%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Set%20the%20volume%20to%20the%20start%20position%2E%0A%20%20%20%20%20%20self%2Evolume%28from%2C%20id%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Fade%20the%20volume%20of%20one%20or%20all%20sounds%2E%0A%20%20%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28id%29%3B%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cids%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20the%20sound%2E%0A%20%20%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5FsoundById%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20a%20linear%20fade%20or%20fall%20back%20to%20timeouts%20with%20HTML5%20Audio%2E%0A%20%20%20%20%20%20%20%20if%20%28sound%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Stop%20the%20previous%20fade%20if%20no%20sprite%20is%20being%20used%20%28otherwise%2C%20volume%20handles%20this%29%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21id%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5FstopFade%28ids%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20we%20are%20using%20Web%20Audio%2C%20let%20the%20native%20methods%20do%20the%20actual%20fade%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%20%26%26%20%21sound%2E%5Fmuted%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20currentTime%20%3D%20Howler%2Ectx%2EcurrentTime%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20end%20%3D%20currentTime%20%2B%20%28len%20%2F%201000%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fvolume%20%3D%20from%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2Egain%2EsetValueAtTime%28from%20%2A%20Howler%2Evolume%28%29%2C%20currentTime%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2Egain%2ElinearRampToValueAtTime%28to%20%2A%20Howler%2Evolume%28%29%2C%20end%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20var%20vol%20%3D%20from%3B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Finterval%20%3D%20setInterval%28function%28soundId%2C%20sound%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20the%20volume%20amount%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20vol%20%2B%3D%20%28dir%20%3D%3D%3D%20%27in%27%20%3F%200%2E01%20%3A%20%2D0%2E01%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Make%20sure%20the%20volume%20is%20in%20the%20right%20bounds%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20vol%20%3D%20Math%2Emax%280%2C%20vol%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vol%20%3D%20Math%2Emin%281%2C%20vol%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Round%20to%20within%202%20decimal%20points%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20vol%20%3D%20Math%2Eround%28vol%20%2A%20100%29%20%2F%20100%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Change%20the%20volume%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20id%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5Fvolume%20%3D%20vol%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fvolume%20%3D%20vol%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2Evolume%28vol%2C%20soundId%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20When%20the%20fade%20is%20complete%2C%20stop%20it%20and%20fire%20event%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28vol%20%3D%3D%3D%20to%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clearInterval%28sound%2E%5Finterval%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Finterval%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2Evolume%28vol%2C%20soundId%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27fade%27%2C%20soundId%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2Ebind%28self%2C%20ids%5Bi%5D%2C%20sound%29%2C%20stepLen%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Internal%20method%20that%20stops%20the%20currently%20playing%20fade%20when%0A%20%20%20%20%20%2A%20a%20new%20fade%20starts%2C%20volume%20is%20changed%20or%20the%20sound%20is%20stopped%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20The%20sound%20id%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FstopFade%3A%20function%28id%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5FsoundById%28id%29%3B%0A%0A%20%20%20%20%20%20if%20%28sound%20%26%26%20sound%2E%5Finterval%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2Egain%2EcancelScheduledValues%28Howler%2Ectx%2EcurrentTime%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20clearInterval%28sound%2E%5Finterval%29%3B%0A%20%20%20%20%20%20%20%20sound%2E%5Finterval%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20self%2E%5Femit%28%27fade%27%2C%20id%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Get%2Fset%20the%20loop%20parameter%20on%20a%20sound%2E%20This%20method%20can%20optionally%20take%200%2C%201%20or%202%20arguments%2E%0A%20%20%20%20%20%2A%20%20%20loop%28%29%20%2D%3E%20Returns%20the%20group%27s%20loop%20value%2E%0A%20%20%20%20%20%2A%20%20%20loop%28id%29%20%2D%3E%20Returns%20the%20sound%20id%27s%20loop%20value%2E%0A%20%20%20%20%20%2A%20%20%20loop%28loop%29%20%2D%3E%20Sets%20the%20loop%20value%20for%20all%20sounds%20in%20this%20Howl%20group%2E%0A%20%20%20%20%20%2A%20%20%20loop%28loop%2C%20id%29%20%2D%3E%20Sets%20the%20loop%20value%20of%20passed%20sound%20id%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%2FBoolean%7D%20Returns%20self%20or%20current%20loop%20value%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20loop%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20args%20%3D%20arguments%3B%0A%20%20%20%20%20%20var%20loop%2C%20id%2C%20sound%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Determine%20the%20values%20for%20loop%20and%20id%2E%0A%20%20%20%20%20%20if%20%28args%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20the%20grou%27s%20loop%20value%2E%0A%20%20%20%20%20%20%20%20return%20self%2E%5Floop%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28args%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20args%5B0%5D%20%3D%3D%3D%20%27boolean%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20loop%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Floop%20%3D%20loop%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Return%20this%20sound%27s%20loop%20value%2E%0A%20%20%20%20%20%20%20%20%20%20sound%20%3D%20self%2E%5FsoundById%28parseInt%28args%5B0%5D%2C%2010%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20return%20sound%20%3F%20sound%2E%5Floop%20%3A%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20%28args%2Elength%20%3D%3D%3D%202%29%20%7B%0A%20%20%20%20%20%20%20%20loop%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20%20%20id%20%3D%20parseInt%28args%5B1%5D%2C%2010%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20If%20no%20id%20is%20passed%2C%20get%20all%20ID%27s%20to%20be%20looped%2E%0A%20%20%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28id%29%3B%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cids%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20sound%20%3D%20self%2E%5FsoundById%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28sound%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Floop%20%3D%20loop%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%20%26%26%20sound%2E%5Fnode%20%26%26%20sound%2E%5Fnode%2EbufferSource%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2Eloop%20%3D%20loop%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Get%2Fset%20the%20playback%20rate%20of%20a%20sound%2E%20This%20method%20can%20optionally%20take%200%2C%201%20or%202%20arguments%2E%0A%20%20%20%20%20%2A%20%20%20rate%28%29%20%2D%3E%20Returns%20the%20first%20sound%20node%27s%20current%20playback%20rate%2E%0A%20%20%20%20%20%2A%20%20%20rate%28id%29%20%2D%3E%20Returns%20the%20sound%20id%27s%20current%20playback%20rate%2E%0A%20%20%20%20%20%2A%20%20%20rate%28rate%29%20%2D%3E%20Sets%20the%20playback%20rate%20of%20all%20sounds%20in%20this%20Howl%20group%2E%0A%20%20%20%20%20%2A%20%20%20rate%28rate%2C%20id%29%20%2D%3E%20Sets%20the%20playback%20rate%20of%20passed%20sound%20id%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%2FNumber%7D%20Returns%20self%20or%20the%20current%20playback%20rate%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20rate%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20args%20%3D%20arguments%3B%0A%20%20%20%20%20%20var%20rate%2C%20id%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Determine%20the%20values%20based%20on%20arguments%2E%0A%20%20%20%20%20%20if%20%28args%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20We%20will%20simply%20return%20the%20current%20rate%20of%20the%20first%20node%2E%0A%20%20%20%20%20%20%20%20id%20%3D%20self%2E%5Fsounds%5B0%5D%2E%5Fid%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28args%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20First%20check%20if%20this%20is%20an%20ID%2C%20and%20if%20not%2C%20assume%20it%20is%20a%20new%20rate%20value%2E%0A%20%20%20%20%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28%29%3B%0A%20%20%20%20%20%20%20%20var%20index%20%3D%20ids%2EindexOf%28args%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20if%20%28index%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20id%20%3D%20parseInt%28args%5B0%5D%2C%2010%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20rate%20%3D%20parseFloat%28args%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20%28args%2Elength%20%3D%3D%3D%202%29%20%7B%0A%20%20%20%20%20%20%20%20rate%20%3D%20parseFloat%28args%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20id%20%3D%20parseInt%28args%5B1%5D%2C%2010%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Update%20the%20playback%20rate%20or%20return%20the%20current%20value%2E%0A%20%20%20%20%20%20var%20sound%3B%0A%20%20%20%20%20%20if%20%28typeof%20rate%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20the%20sound%20hasn%27t%20loaded%2C%20add%20it%20to%20the%20load%20queue%20to%20change%20playback%20rate%20when%20capable%2E%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Fqueue%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20event%3A%20%27rate%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20action%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2Erate%2Eapply%28self%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Set%20the%20group%20rate%2E%0A%20%20%20%20%20%20%20%20if%20%28typeof%20id%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Frate%20%3D%20rate%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Update%20one%20or%20all%20volumes%2E%0A%20%20%20%20%20%20%20%20id%20%3D%20self%2E%5FgetSoundIds%28id%29%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cid%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20the%20sound%2E%0A%20%20%20%20%20%20%20%20%20%20sound%20%3D%20self%2E%5FsoundById%28id%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28sound%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Keep%20track%20of%20our%20position%20when%20the%20rate%20changed%20and%20update%20the%20playback%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20start%20position%20so%20we%20can%20properly%20adjust%20the%20seek%20position%20for%20time%20elapsed%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5FrateSeek%20%3D%20self%2Eseek%28id%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5FplayStart%20%3D%20self%2E%5FwebAudio%20%3F%20Howler%2Ectx%2EcurrentTime%20%3A%20sound%2E%5FplayStart%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Frate%20%3D%20rate%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Change%20the%20playback%20rate%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%20%26%26%20sound%2E%5Fnode%20%26%26%20sound%2E%5Fnode%2EbufferSource%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2EplaybackRate%2Evalue%20%3D%20rate%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28sound%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EplaybackRate%20%3D%20rate%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Reset%20the%20timers%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20seek%20%3D%20self%2Eseek%28id%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20duration%20%3D%20%28%28self%2E%5Fsprite%5Bsound%2E%5Fsprite%5D%5B0%5D%20%2B%20self%2E%5Fsprite%5Bsound%2E%5Fsprite%5D%5B1%5D%29%20%2F%201000%29%20%2D%20seek%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20timeout%20%3D%20%28duration%20%2A%201000%29%20%2F%20Math%2Eabs%28sound%2E%5Frate%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Start%20a%20new%20end%20timer%20if%20sound%20is%20already%20playing%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FendTimers%5Bid%5Bi%5D%5D%20%7C%7C%20%21sound%2E%5Fpaused%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5FclearTimer%28id%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5FendTimers%5Bid%5Bi%5D%5D%20%3D%20setTimeout%28self%2E%5Fended%2Ebind%28self%2C%20sound%29%2C%20timeout%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27rate%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20sound%20%3D%20self%2E%5FsoundById%28id%29%3B%0A%20%20%20%20%20%20%20%20return%20sound%20%3F%20sound%2E%5Frate%20%3A%20self%2E%5Frate%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Get%2Fset%20the%20seek%20position%20of%20a%20sound%2E%20This%20method%20can%20optionally%20take%200%2C%201%20or%202%20arguments%2E%0A%20%20%20%20%20%2A%20%20%20seek%28%29%20%2D%3E%20Returns%20the%20first%20sound%20node%27s%20current%20seek%20position%2E%0A%20%20%20%20%20%2A%20%20%20seek%28id%29%20%2D%3E%20Returns%20the%20sound%20id%27s%20current%20seek%20position%2E%0A%20%20%20%20%20%2A%20%20%20seek%28seek%29%20%2D%3E%20Sets%20the%20seek%20position%20of%20the%20first%20sound%20node%2E%0A%20%20%20%20%20%2A%20%20%20seek%28seek%2C%20id%29%20%2D%3E%20Sets%20the%20seek%20position%20of%20passed%20sound%20id%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%2FNumber%7D%20Returns%20self%20or%20the%20current%20seek%20position%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20seek%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20args%20%3D%20arguments%3B%0A%20%20%20%20%20%20var%20seek%2C%20id%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Determine%20the%20values%20based%20on%20arguments%2E%0A%20%20%20%20%20%20if%20%28args%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20We%20will%20simply%20return%20the%20current%20position%20of%20the%20first%20node%2E%0A%20%20%20%20%20%20%20%20id%20%3D%20self%2E%5Fsounds%5B0%5D%2E%5Fid%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28args%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20First%20check%20if%20this%20is%20an%20ID%2C%20and%20if%20not%2C%20assume%20it%20is%20a%20new%20seek%20position%2E%0A%20%20%20%20%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28%29%3B%0A%20%20%20%20%20%20%20%20var%20index%20%3D%20ids%2EindexOf%28args%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20if%20%28index%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20id%20%3D%20parseInt%28args%5B0%5D%2C%2010%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20id%20%3D%20self%2E%5Fsounds%5B0%5D%2E%5Fid%3B%0A%20%20%20%20%20%20%20%20%20%20seek%20%3D%20parseFloat%28args%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20%28args%2Elength%20%3D%3D%3D%202%29%20%7B%0A%20%20%20%20%20%20%20%20seek%20%3D%20parseFloat%28args%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20id%20%3D%20parseInt%28args%5B1%5D%2C%2010%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20If%20there%20is%20no%20ID%2C%20bail%20out%2E%0A%20%20%20%20%20%20if%20%28typeof%20id%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20If%20the%20sound%20hasn%27t%20loaded%2C%20add%20it%20to%20the%20load%20queue%20to%20seek%20when%20capable%2E%0A%20%20%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fqueue%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20event%3A%20%27seek%27%2C%0A%20%20%20%20%20%20%20%20%20%20action%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2Eseek%2Eapply%28self%2C%20args%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Get%20the%20sound%2E%0A%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5FsoundById%28id%29%3B%0A%0A%20%20%20%20%20%20if%20%28sound%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20seek%20%3D%3D%3D%20%27number%27%20%26%26%20seek%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Pause%20the%20sound%20and%20update%20position%20for%20restarting%20playback%2E%0A%20%20%20%20%20%20%20%20%20%20var%20playing%20%3D%20self%2Eplaying%28id%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28playing%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2Epause%28id%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Move%20the%20position%20of%20the%20track%20and%20cancel%20timer%2E%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fseek%20%3D%20seek%3B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fended%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5FclearTimer%28id%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Restart%20the%20playback%20if%20the%20sound%20was%20playing%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28playing%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2Eplay%28id%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20the%20seek%20position%20for%20HTML5%20Audio%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21self%2E%5FwebAudio%20%26%26%20sound%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EcurrentTime%20%3D%20seek%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27seek%27%2C%20id%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20realTime%20%3D%20self%2Eplaying%28id%29%20%3F%20Howler%2Ectx%2EcurrentTime%20%2D%20sound%2E%5FplayStart%20%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20rateSeek%20%3D%20sound%2E%5FrateSeek%20%3F%20sound%2E%5FrateSeek%20%2D%20sound%2E%5Fseek%20%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20sound%2E%5Fseek%20%2B%20%28rateSeek%20%2B%20realTime%20%2A%20Math%2Eabs%28sound%2E%5Frate%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20sound%2E%5Fnode%2EcurrentTime%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Check%20if%20a%20specific%20sound%20is%20currently%20playing%20or%20not%20%28if%20id%20is%20provided%29%2C%20or%20check%20if%20at%20least%20one%20of%20the%20sounds%20in%20the%20group%20is%20playing%20or%20not%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20%20id%20The%20sound%20id%20to%20check%2E%20If%20none%20is%20passed%2C%20the%20whole%20sound%20group%20is%20checked%2E%0A%20%20%20%20%20%2A%20%40return%20%7BBoolean%7D%20True%20if%20playing%20and%20false%20if%20not%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20playing%3A%20function%28id%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Check%20the%20passed%20sound%20ID%20%28if%20any%29%2E%0A%20%20%20%20%20%20if%20%28typeof%20id%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5FsoundById%28id%29%3B%0A%20%20%20%20%20%20%20%20return%20sound%20%3F%20%21sound%2E%5Fpaused%20%3A%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Otherwise%2C%20loop%20through%20all%20sounds%20and%20check%20if%20any%20are%20playing%2E%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cself%2E%5Fsounds%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21self%2E%5Fsounds%5Bi%5D%2E%5Fpaused%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Get%20the%20duration%20of%20this%20sound%2E%20Passing%20a%20sound%20id%20will%20return%20the%20sprite%20duration%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20The%20sound%20id%20to%20check%2E%20If%20none%20is%20passed%2C%20return%20full%20source%20duration%2E%0A%20%20%20%20%20%2A%20%40return%20%7BNumber%7D%20Audio%20duration%20in%20seconds%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20duration%3A%20function%28id%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20duration%20%3D%20self%2E%5Fduration%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20we%20pass%20an%20ID%2C%20get%20the%20sound%20and%20return%20the%20sprite%20length%2E%0A%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5FsoundById%28id%29%3B%0A%20%20%20%20%20%20if%20%28sound%29%20%7B%0A%20%20%20%20%20%20%20%20duration%20%3D%20self%2E%5Fsprite%5Bsound%2E%5Fsprite%5D%5B1%5D%20%2F%201000%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20duration%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Returns%20the%20current%20loaded%20state%20of%20this%20Howl%2E%0A%20%20%20%20%20%2A%20%40return%20%7BString%7D%20%27unloaded%27%2C%20%27loading%27%2C%20%27loaded%27%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20state%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5Fstate%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Unload%20and%20destroy%20the%20current%20Howl%20object%2E%0A%20%20%20%20%20%2A%20This%20will%20immediately%20stop%20all%20sound%20instances%20attached%20to%20this%20group%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20unload%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Stop%20playing%20any%20active%20sounds%2E%0A%20%20%20%20%20%20var%20sounds%20%3D%20self%2E%5Fsounds%3B%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Csounds%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Stop%20the%20sound%20if%20it%20is%20currently%20playing%2E%0A%20%20%20%20%20%20%20%20if%20%28%21sounds%5Bi%5D%2E%5Fpaused%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2Estop%28sounds%5Bi%5D%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27end%27%2C%20sounds%5Bi%5D%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Remove%20the%20source%20or%20disconnect%2E%0A%20%20%20%20%20%20%20%20if%20%28%21self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Set%20the%20source%20to%200%2Dsecond%20silence%20to%20stop%20any%20downloading%2E%0A%20%20%20%20%20%20%20%20%20%20sounds%5Bi%5D%2E%5Fnode%2Esrc%20%3D%20%27data%3Aaudio%2Fwav%3Bbase64%2CUklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA%3D%27%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Remove%20any%20event%20listeners%2E%0A%20%20%20%20%20%20%20%20%20%20sounds%5Bi%5D%2E%5Fnode%2EremoveEventListener%28%27error%27%2C%20sounds%5Bi%5D%2E%5FerrorFn%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20sounds%5Bi%5D%2E%5Fnode%2EremoveEventListener%28Howler%2E%5FcanPlayEvent%2C%20sounds%5Bi%5D%2E%5FloadFn%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Empty%20out%20all%20of%20the%20nodes%2E%0A%20%20%20%20%20%20%20%20delete%20sounds%5Bi%5D%2E%5Fnode%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Make%20sure%20all%20timers%20are%20cleared%20out%2E%0A%20%20%20%20%20%20%20%20self%2E%5FclearTimer%28sounds%5Bi%5D%2E%5Fid%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Remove%20the%20references%20in%20the%20global%20Howler%20object%2E%0A%20%20%20%20%20%20%20%20var%20index%20%3D%20Howler%2E%5Fhowls%2EindexOf%28self%29%3B%0A%20%20%20%20%20%20%20%20if%20%28index%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Howler%2E%5Fhowls%2Esplice%28index%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Delete%20this%20sound%20from%20the%20cache%20%28if%20no%20other%20Howl%20is%20using%20it%29%2E%0A%20%20%20%20%20%20var%20remCache%20%3D%20true%3B%0A%20%20%20%20%20%20for%20%28i%3D0%3B%20i%3CHowler%2E%5Fhowls%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28Howler%2E%5Fhowls%5Bi%5D%2E%5Fsrc%20%3D%3D%3D%20self%2E%5Fsrc%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20remCache%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28cache%20%26%26%20remCache%29%20%7B%0A%20%20%20%20%20%20%20%20delete%20cache%5Bself%2E%5Fsrc%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Clear%20out%20%60self%60%2E%0A%20%20%20%20%20%20self%2E%5Fstate%20%3D%20%27unloaded%27%3B%0A%20%20%20%20%20%20self%2E%5Fsounds%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20self%20%3D%20null%3B%0A%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Listen%20to%20a%20custom%20event%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BString%7D%20%20%20event%20Event%20name%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BFunction%7D%20fn%20%20%20%20Listener%20to%20call%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20%20%20id%20%20%20%20%28optional%29%20Only%20listen%20to%20events%20for%20this%20sound%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20%20%20once%20%20%28INTERNAL%29%20Marks%20event%20to%20fire%20only%20once%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20on%3A%20function%28event%2C%20fn%2C%20id%2C%20once%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20events%20%3D%20self%5B%27%5Fon%27%20%2B%20event%5D%3B%0A%0A%20%20%20%20%20%20if%20%28typeof%20fn%20%3D%3D%3D%20%27function%27%29%20%7B%0A%20%20%20%20%20%20%20%20events%2Epush%28once%20%3F%20%7Bid%3A%20id%2C%20fn%3A%20fn%2C%20once%3A%20once%7D%20%3A%20%7Bid%3A%20id%2C%20fn%3A%20fn%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Remove%20a%20custom%20event%2E%20Call%20without%20parameters%20to%20remove%20all%20events%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BString%7D%20%20%20event%20Event%20name%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BFunction%7D%20fn%20%20%20%20Listener%20to%20remove%2E%20Leave%20empty%20to%20remove%20all%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20%20%20id%20%20%20%20%28optional%29%20Only%20remove%20events%20for%20this%20sound%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20off%3A%20function%28event%2C%20fn%2C%20id%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20events%20%3D%20self%5B%27%5Fon%27%20%2B%20event%5D%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%0A%20%20%20%20%20%20if%20%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Loop%20through%20event%20store%20and%20remove%20the%20passed%20function%2E%0A%20%20%20%20%20%20%20%20for%20%28i%3D0%3B%20i%3Cevents%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28fn%20%3D%3D%3D%20events%5Bi%5D%2Efn%20%26%26%20id%20%3D%3D%3D%20events%5Bi%5D%2Eid%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20events%2Esplice%28i%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20%28event%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Clear%20out%20all%20events%20of%20this%20type%2E%0A%20%20%20%20%20%20%20%20self%5B%27%5Fon%27%20%2B%20event%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Clear%20out%20all%20events%20of%20every%20type%2E%0A%20%20%20%20%20%20%20%20var%20keys%20%3D%20Object%2Ekeys%28self%29%3B%0A%20%20%20%20%20%20%20%20for%20%28i%3D0%3B%20i%3Ckeys%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%28keys%5Bi%5D%2EindexOf%28%27%5Fon%27%29%20%3D%3D%3D%200%29%20%26%26%20Array%2EisArray%28self%5Bkeys%5Bi%5D%5D%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%5Bkeys%5Bi%5D%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Listen%20to%20a%20custom%20event%20and%20remove%20it%20once%20fired%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BString%7D%20%20%20event%20Event%20name%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BFunction%7D%20fn%20%20%20%20Listener%20to%20call%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20%20%20id%20%20%20%20%28optional%29%20Only%20listen%20to%20events%20for%20this%20sound%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20once%3A%20function%28event%2C%20fn%2C%20id%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20the%20event%20listener%2E%0A%20%20%20%20%20%20self%2Eon%28event%2C%20fn%2C%20id%2C%201%29%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Emit%20all%20events%20of%20a%20specific%20type%20and%20pass%20the%20sound%20id%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BString%7D%20event%20Event%20name%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20%20%20%20Sound%20ID%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20msg%20%20%20Message%20to%20go%20with%20event%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5Femit%3A%20function%28event%2C%20id%2C%20msg%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20events%20%3D%20self%5B%27%5Fon%27%20%2B%20event%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Loop%20through%20event%20store%20and%20fire%20all%20functions%2E%0A%20%20%20%20%20%20for%20%28var%20i%3Devents%2Elength%2D1%3B%20i%3E%3D0%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21events%5Bi%5D%2Eid%20%7C%7C%20events%5Bi%5D%2Eid%20%3D%3D%3D%20id%20%7C%7C%20event%20%3D%3D%3D%20%27load%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20setTimeout%28function%28fn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%2Ecall%28this%2C%20id%2C%20msg%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2Ebind%28self%2C%20events%5Bi%5D%2Efn%29%2C%200%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20this%20event%20was%20setup%20with%20%60once%60%2C%20remove%20it%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28events%5Bi%5D%2Eonce%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2Eoff%28event%2C%20events%5Bi%5D%2Efn%2C%20events%5Bi%5D%2Eid%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Queue%20of%20actions%20initiated%20before%20the%20sound%20has%20loaded%2E%0A%20%20%20%20%20%2A%20These%20will%20be%20called%20in%20sequence%2C%20with%20the%20next%20only%20firing%0A%20%20%20%20%20%2A%20after%20the%20previous%20has%20finished%20executing%20%28even%20if%20async%20like%20play%29%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FloadQueue%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20if%20%28self%2E%5Fqueue%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20var%20task%20%3D%20self%2E%5Fqueue%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20don%27t%20move%20onto%20the%20next%20task%20until%20this%20one%20is%20done%0A%20%20%20%20%20%20%20%20self%2Eonce%28task%2Eevent%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Fqueue%2Eshift%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5FloadQueue%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20task%2Eaction%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Fired%20when%20playback%20ends%20at%20the%20end%20of%20the%20duration%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BSound%7D%20sound%20The%20sound%20object%20to%20work%20with%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5Fended%3A%20function%28sound%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20sprite%20%3D%20sound%2E%5Fsprite%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Should%20this%20sound%20loop%3F%0A%20%20%20%20%20%20var%20loop%20%3D%20%21%21%28sound%2E%5Floop%20%7C%7C%20self%2E%5Fsprite%5Bsprite%5D%5B2%5D%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Fire%20the%20ended%20event%2E%0A%20%20%20%20%20%20self%2E%5Femit%28%27end%27%2C%20sound%2E%5Fid%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Restart%20the%20playback%20for%20HTML5%20Audio%20loop%2E%0A%20%20%20%20%20%20if%20%28%21self%2E%5FwebAudio%20%26%26%20loop%29%20%7B%0A%20%20%20%20%20%20%20%20self%2Estop%28sound%2E%5Fid%2C%20true%29%2Eplay%28sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Restart%20this%20timer%20if%20on%20a%20Web%20Audio%20loop%2E%0A%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%20%26%26%20loop%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Femit%28%27play%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20sound%2E%5Fseek%20%3D%20sound%2E%5Fstart%20%7C%7C%200%3B%0A%20%20%20%20%20%20%20%20sound%2E%5FrateSeek%20%3D%200%3B%0A%20%20%20%20%20%20%20%20sound%2E%5FplayStart%20%3D%20Howler%2Ectx%2EcurrentTime%3B%0A%0A%20%20%20%20%20%20%20%20var%20timeout%20%3D%20%28%28sound%2E%5Fstop%20%2D%20sound%2E%5Fstart%29%20%2A%201000%29%20%2F%20Math%2Eabs%28sound%2E%5Frate%29%3B%0A%20%20%20%20%20%20%20%20self%2E%5FendTimers%5Bsound%2E%5Fid%5D%20%3D%20setTimeout%28self%2E%5Fended%2Ebind%28self%2C%20sound%29%2C%20timeout%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Mark%20the%20node%20as%20paused%2E%0A%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%20%26%26%20%21loop%29%20%7B%0A%20%20%20%20%20%20%20%20sound%2E%5Fpaused%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20sound%2E%5Fended%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20sound%2E%5Fseek%20%3D%20sound%2E%5Fstart%20%7C%7C%200%3B%0A%20%20%20%20%20%20%20%20sound%2E%5FrateSeek%20%3D%200%3B%0A%20%20%20%20%20%20%20%20self%2E%5FclearTimer%28sound%2E%5Fid%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Clean%20up%20the%20buffer%20source%2E%0A%20%20%20%20%20%20%20%20self%2E%5FcleanBuffer%28sound%2E%5Fnode%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Attempt%20to%20auto%2Dsuspend%20AudioContext%20if%20no%20sounds%20are%20still%20playing%2E%0A%20%20%20%20%20%20%20%20Howler%2E%5FautoSuspend%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20When%20using%20a%20sprite%2C%20end%20the%20track%2E%0A%20%20%20%20%20%20if%20%28%21self%2E%5FwebAudio%20%26%26%20%21loop%29%20%7B%0A%20%20%20%20%20%20%20%20self%2Estop%28sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Clear%20the%20end%20timer%20for%20a%20sound%20playback%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20The%20sound%20ID%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FclearTimer%3A%20function%28id%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20if%20%28self%2E%5FendTimers%5Bid%5D%29%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout%28self%2E%5FendTimers%5Bid%5D%29%3B%0A%20%20%20%20%20%20%20%20delete%20self%2E%5FendTimers%5Bid%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Return%20the%20sound%20identified%20by%20this%20ID%2C%20or%20return%20null%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20Sound%20ID%0A%20%20%20%20%20%2A%20%40return%20%7BObject%7D%20%20%20%20Sound%20object%20or%20null%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FsoundById%3A%20function%28id%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Loop%20through%20all%20sounds%20and%20find%20the%20one%20with%20this%20ID%2E%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cself%2E%5Fsounds%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28id%20%3D%3D%3D%20self%2E%5Fsounds%5Bi%5D%2E%5Fid%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20self%2E%5Fsounds%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Return%20an%20inactive%20sound%20from%20the%20pool%20or%20create%20a%20new%20one%2E%0A%20%20%20%20%20%2A%20%40return%20%7BSound%7D%20Sound%20playback%20object%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FinactiveSound%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20self%2E%5Fdrain%28%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Find%20the%20first%20inactive%20node%20to%20recycle%2E%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cself%2E%5Fsounds%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5Fsounds%5Bi%5D%2E%5Fended%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20self%2E%5Fsounds%5Bi%5D%2Ereset%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20If%20no%20inactive%20node%20was%20found%2C%20create%20a%20new%20one%2E%0A%20%20%20%20%20%20return%20new%20Sound%28self%29%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Drain%20excess%20inactive%20sounds%20from%20the%20pool%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5Fdrain%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20limit%20%3D%20self%2E%5Fpool%3B%0A%20%20%20%20%20%20var%20cnt%20%3D%200%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20there%20are%20less%20sounds%20than%20the%20max%20pool%20size%2C%20we%20are%20done%2E%0A%20%20%20%20%20%20if%20%28self%2E%5Fsounds%2Elength%20%3C%20limit%29%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Count%20the%20number%20of%20inactive%20sounds%2E%0A%20%20%20%20%20%20for%20%28i%3D0%3B%20i%3Cself%2E%5Fsounds%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5Fsounds%5Bi%5D%2E%5Fended%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20cnt%2B%2B%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Remove%20excess%20inactive%20sounds%2C%20going%20in%20reverse%20order%2E%0A%20%20%20%20%20%20for%20%28i%3Dself%2E%5Fsounds%2Elength%20%2D%201%3B%20i%3E%3D0%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28cnt%20%3C%3D%20limit%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5Fsounds%5Bi%5D%2E%5Fended%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Disconnect%20the%20audio%20source%20when%20using%20Web%20Audio%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%20%26%26%20self%2E%5Fsounds%5Bi%5D%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20self%2E%5Fsounds%5Bi%5D%2E%5Fnode%2Edisconnect%280%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Remove%20sounds%20until%20we%20have%20the%20pool%20size%2E%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Fsounds%2Esplice%28i%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20cnt%2D%2D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Get%20all%20ID%27s%20from%20the%20sounds%20pool%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20Only%20return%20one%20ID%20if%20one%20is%20passed%2E%0A%20%20%20%20%20%2A%20%40return%20%7BArray%7D%20%20%20%20Array%20of%20IDs%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FgetSoundIds%3A%20function%28id%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20if%20%28typeof%20id%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20var%20ids%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cself%2E%5Fsounds%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20ids%2Epush%28self%2E%5Fsounds%5Bi%5D%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20ids%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20%5Bid%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Load%20the%20sound%20back%20into%20the%20buffer%20source%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BSound%7D%20sound%20The%20sound%20object%20to%20work%20with%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FrefreshBuffer%3A%20function%28sound%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20the%20buffer%20source%20for%20playback%2E%0A%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%20%3D%20Howler%2Ectx%2EcreateBufferSource%28%29%3B%0A%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2Ebuffer%20%3D%20cache%5Bself%2E%5Fsrc%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Connect%20to%20the%20correct%20node%2E%0A%20%20%20%20%20%20if%20%28sound%2E%5Fpanner%29%20%7B%0A%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2Econnect%28sound%2E%5Fpanner%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2Econnect%28sound%2E%5Fnode%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20looping%20and%20playback%20rate%2E%0A%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2Eloop%20%3D%20sound%2E%5Floop%3B%0A%20%20%20%20%20%20if%20%28sound%2E%5Floop%29%20%7B%0A%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2EloopStart%20%3D%20sound%2E%5Fstart%20%7C%7C%200%3B%0A%20%20%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2EloopEnd%20%3D%20sound%2E%5Fstop%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20sound%2E%5Fnode%2EbufferSource%2EplaybackRate%2Evalue%20%3D%20sound%2E%5Frate%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Prevent%20memory%20leaks%20by%20cleaning%20up%20the%20buffer%20source%20after%20playback%2E%0A%20%20%20%20%20%2A%20%40param%20%20%7BObject%7D%20node%20Sound%27s%20audio%20node%20containing%20the%20buffer%20source%2E%0A%20%20%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FcleanBuffer%3A%20function%28node%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20if%20%28self%2E%5FscratchBuffer%29%20%7B%0A%20%20%20%20%20%20%20%20node%2EbufferSource%2Eonended%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20node%2EbufferSource%2Edisconnect%280%29%3B%0A%20%20%20%20%20%20%20%20try%20%7B%20node%2EbufferSource%2Ebuffer%20%3D%20self%2E%5FscratchBuffer%3B%20%7D%20catch%28e%29%20%7B%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20node%2EbufferSource%20%3D%20null%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%20Single%20Sound%20Methods%20%2A%2A%2F%0A%20%20%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Setup%20the%20sound%20object%2C%20which%20each%20node%20attached%20to%20a%20Howl%20group%20is%20contained%20in%2E%0A%20%20%20%2A%20%40param%20%7BObject%7D%20howl%20The%20Howl%20parent%20group%2E%0A%20%20%20%2A%2F%0A%20%20var%20Sound%20%3D%20function%28howl%29%20%7B%0A%20%20%20%20this%2E%5Fparent%20%3D%20howl%3B%0A%20%20%20%20this%2Einit%28%29%3B%0A%20%20%7D%3B%0A%20%20Sound%2Eprototype%20%3D%20%7B%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Initialize%20a%20new%20Sound%20object%2E%0A%20%20%20%20%20%2A%20%40return%20%7BSound%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20init%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20parent%20%3D%20self%2E%5Fparent%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20the%20default%20parameters%2E%0A%20%20%20%20%20%20self%2E%5Fmuted%20%3D%20parent%2E%5Fmuted%3B%0A%20%20%20%20%20%20self%2E%5Floop%20%3D%20parent%2E%5Floop%3B%0A%20%20%20%20%20%20self%2E%5Fvolume%20%3D%20parent%2E%5Fvolume%3B%0A%20%20%20%20%20%20self%2E%5Fmuted%20%3D%20parent%2E%5Fmuted%3B%0A%20%20%20%20%20%20self%2E%5Frate%20%3D%20parent%2E%5Frate%3B%0A%20%20%20%20%20%20self%2E%5Fseek%20%3D%200%3B%0A%20%20%20%20%20%20self%2E%5Fpaused%20%3D%20true%3B%0A%20%20%20%20%20%20self%2E%5Fended%20%3D%20true%3B%0A%20%20%20%20%20%20self%2E%5Fsprite%20%3D%20%27%5F%5Fdefault%27%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Generate%20a%20unique%20ID%20for%20this%20sound%2E%0A%20%20%20%20%20%20self%2E%5Fid%20%3D%20Math%2Eround%28Date%2Enow%28%29%20%2A%20Math%2Erandom%28%29%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Add%20itself%20to%20the%20parent%27s%20pool%2E%0A%20%20%20%20%20%20parent%2E%5Fsounds%2Epush%28self%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Create%20the%20new%20node%2E%0A%20%20%20%20%20%20self%2Ecreate%28%29%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Create%20and%20setup%20a%20new%20sound%20object%2C%20whether%20HTML5%20Audio%20or%20Web%20Audio%2E%0A%20%20%20%20%20%2A%20%40return%20%7BSound%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20create%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20parent%20%3D%20self%2E%5Fparent%3B%0A%20%20%20%20%20%20var%20volume%20%3D%20%28Howler%2E%5Fmuted%20%7C%7C%20self%2E%5Fmuted%20%7C%7C%20self%2E%5Fparent%2E%5Fmuted%29%20%3F%200%20%3A%20self%2E%5Fvolume%20%2A%20Howler%2Evolume%28%29%3B%0A%0A%20%20%20%20%20%20if%20%28parent%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20gain%20node%20for%20controlling%20volume%20%28the%20source%20will%20connect%20to%20this%29%2E%0A%20%20%20%20%20%20%20%20self%2E%5Fnode%20%3D%20%28typeof%20Howler%2Ectx%2EcreateGain%20%3D%3D%3D%20%27undefined%27%29%20%3F%20Howler%2Ectx%2EcreateGainNode%28%29%20%3A%20Howler%2Ectx%2EcreateGain%28%29%3B%0A%20%20%20%20%20%20%20%20self%2E%5Fnode%2Egain%2EsetValueAtTime%28volume%2C%20Howler%2Ectx%2EcurrentTime%29%3B%0A%20%20%20%20%20%20%20%20self%2E%5Fnode%2Epaused%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20self%2E%5Fnode%2Econnect%28Howler%2EmasterGain%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fnode%20%3D%20new%20Audio%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Listen%20for%20errors%20%28http%3A%2F%2Fdev%2Ew3%2Eorg%2Fhtml5%2Fspec%2Dauthor%2Dview%2Fspec%2Ehtml%23mediaerror%29%2E%0A%20%20%20%20%20%20%20%20self%2E%5FerrorFn%20%3D%20self%2E%5FerrorListener%2Ebind%28self%29%3B%0A%20%20%20%20%20%20%20%20self%2E%5Fnode%2EaddEventListener%28%27error%27%2C%20self%2E%5FerrorFn%2C%20false%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Listen%20for%20%27canplaythrough%27%20event%20to%20let%20us%20know%20the%20sound%20is%20ready%2E%0A%20%20%20%20%20%20%20%20self%2E%5FloadFn%20%3D%20self%2E%5FloadListener%2Ebind%28self%29%3B%0A%20%20%20%20%20%20%20%20self%2E%5Fnode%2EaddEventListener%28Howler%2E%5FcanPlayEvent%2C%20self%2E%5FloadFn%2C%20false%29%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Setup%20the%20new%20audio%20node%2E%0A%20%20%20%20%20%20%20%20self%2E%5Fnode%2Esrc%20%3D%20parent%2E%5Fsrc%3B%0A%20%20%20%20%20%20%20%20self%2E%5Fnode%2Epreload%20%3D%20%27auto%27%3B%0A%20%20%20%20%20%20%20%20self%2E%5Fnode%2Evolume%20%3D%20volume%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Begin%20loading%20the%20source%2E%0A%20%20%20%20%20%20%20%20self%2E%5Fnode%2Eload%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20Reset%20the%20parameters%20of%20this%20sound%20to%20the%20original%20state%20%28for%20recycle%29%2E%0A%20%20%20%20%20%2A%20%40return%20%7BSound%7D%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20reset%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20parent%20%3D%20self%2E%5Fparent%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Reset%20all%20of%20the%20parameters%20of%20this%20sound%2E%0A%20%20%20%20%20%20self%2E%5Fmuted%20%3D%20parent%2E%5Fmuted%3B%0A%20%20%20%20%20%20self%2E%5Floop%20%3D%20parent%2E%5Floop%3B%0A%20%20%20%20%20%20self%2E%5Fvolume%20%3D%20parent%2E%5Fvolume%3B%0A%20%20%20%20%20%20self%2E%5Fmuted%20%3D%20parent%2E%5Fmuted%3B%0A%20%20%20%20%20%20self%2E%5Frate%20%3D%20parent%2E%5Frate%3B%0A%20%20%20%20%20%20self%2E%5Fseek%20%3D%200%3B%0A%20%20%20%20%20%20self%2E%5FrateSeek%20%3D%200%3B%0A%20%20%20%20%20%20self%2E%5Fpaused%20%3D%20true%3B%0A%20%20%20%20%20%20self%2E%5Fended%20%3D%20true%3B%0A%20%20%20%20%20%20self%2E%5Fsprite%20%3D%20%27%5F%5Fdefault%27%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Generate%20a%20new%20ID%20so%20that%20it%20isn%27t%20confused%20with%20the%20previous%20sound%2E%0A%20%20%20%20%20%20self%2E%5Fid%20%3D%20Math%2Eround%28Date%2Enow%28%29%20%2A%20Math%2Erandom%28%29%29%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20HTML5%20Audio%20error%20listener%20callback%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FerrorListener%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20if%20%28self%2E%5Fnode%2Eerror%20%26%26%20self%2E%5Fnode%2Eerror%2Ecode%20%3D%3D%3D%204%29%20%7B%0A%20%20%20%20%20%20%20%20Howler%2EnoAudio%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Fire%20an%20error%20event%20and%20pass%20back%20the%20code%2E%0A%20%20%20%20%20%20self%2E%5Fparent%2E%5Femit%28%27loaderror%27%2C%20self%2E%5Fid%2C%20self%2E%5Fnode%2Eerror%20%3F%20self%2E%5Fnode%2Eerror%2Ecode%20%3A%200%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Clear%20the%20event%20listener%2E%0A%20%20%20%20%20%20self%2E%5Fnode%2EremoveEventListener%28%27error%27%2C%20self%2E%5FerrorListener%2C%20false%29%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F%2A%2A%0A%20%20%20%20%20%2A%20HTML5%20Audio%20canplaythrough%20listener%20callback%2E%0A%20%20%20%20%20%2A%2F%0A%20%20%20%20%5FloadListener%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20parent%20%3D%20self%2E%5Fparent%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Round%20up%20the%20duration%20to%20account%20for%20the%20lower%20precision%20in%20HTML5%20Audio%2E%0A%20%20%20%20%20%20parent%2E%5Fduration%20%3D%20Math%2Eceil%28self%2E%5Fnode%2Eduration%20%2A%2010%29%20%2F%2010%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20a%20sprite%20if%20none%20is%20defined%2E%0A%20%20%20%20%20%20if%20%28Object%2Ekeys%28parent%2E%5Fsprite%29%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20parent%2E%5Fsprite%20%3D%20%7B%5F%5Fdefault%3A%20%5B0%2C%20parent%2E%5Fduration%20%2A%201000%5D%7D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28parent%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20%20%20parent%2E%5Fstate%20%3D%20%27loaded%27%3B%0A%20%20%20%20%20%20%20%20parent%2E%5Femit%28%27load%27%29%3B%0A%20%20%20%20%20%20%20%20parent%2E%5FloadQueue%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20%28parent%2E%5Fautoplay%29%20%7B%0A%20%20%20%20%20%20%20%20parent%2Eplay%28%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Clear%20the%20event%20listener%2E%0A%20%20%20%20%20%20self%2E%5Fnode%2EremoveEventListener%28Howler%2E%5FcanPlayEvent%2C%20self%2E%5FloadFn%2C%20false%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%20Helper%20Methods%20%2A%2A%2F%0A%20%20%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%0A%20%20var%20cache%20%3D%20%7B%7D%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Buffer%20a%20sound%20from%20URL%2C%20Data%20URI%20or%20cache%20and%20decode%20to%20audio%20source%20%28Web%20Audio%20API%29%2E%0A%20%20%20%2A%20%40param%20%20%7BHowl%7D%20self%0A%20%20%20%2A%2F%0A%20%20var%20loadBuffer%20%3D%20function%28self%29%20%7B%0A%20%20%20%20var%20url%20%3D%20self%2E%5Fsrc%3B%0A%0A%20%20%20%20%2F%2F%20Check%20if%20the%20buffer%20has%20already%20been%20cached%20and%20use%20it%20instead%2E%0A%20%20%20%20if%20%28cache%5Burl%5D%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Set%20the%20duration%20from%20the%20cache%2E%0A%20%20%20%20%20%20self%2E%5Fduration%20%3D%20cache%5Burl%5D%2Eduration%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Load%20the%20sound%20into%20this%20Howl%2E%0A%20%20%20%20%20%20loadSound%28self%29%3B%0A%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%2F%5Edata%3A%5B%5E%3B%5D%2B%3Bbase64%2C%2F%2Etest%28url%29%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Decode%20the%20base64%20data%20URI%20without%20XHR%2C%20since%20some%20browsers%20don%27t%20support%20it%2E%0A%20%20%20%20%20%20var%20data%20%3D%20atob%28url%2Esplit%28%27%2C%27%29%5B1%5D%29%3B%0A%20%20%20%20%20%20var%20dataView%20%3D%20new%20Uint8Array%28data%2Elength%29%3B%0A%20%20%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cdata%2Elength%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20dataView%5Bi%5D%20%3D%20data%2EcharCodeAt%28i%29%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20decodeAudioData%28dataView%2Ebuffer%2C%20self%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%2F%2F%20Load%20the%20buffer%20from%20the%20URL%2E%0A%20%20%20%20%20%20var%20xhr%20%3D%20new%20XMLHttpRequest%28%29%3B%0A%20%20%20%20%20%20xhr%2Eopen%28%27GET%27%2C%20url%2C%20true%29%3B%0A%20%20%20%20%20%20xhr%2EresponseType%20%3D%20%27arraybuffer%27%3B%0A%20%20%20%20%20%20xhr%2Eonload%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Make%20sure%20we%20get%20a%20successful%20response%20back%2E%0A%20%20%20%20%20%20%20%20var%20code%20%3D%20%28xhr%2Estatus%20%2B%20%27%27%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28code%20%21%3D%3D%20%270%27%20%26%26%20code%20%21%3D%3D%20%272%27%20%26%26%20code%20%21%3D%3D%20%273%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27loaderror%27%2C%20null%2C%20%27Failed%20loading%20audio%20file%20with%20status%3A%20%27%20%2B%20xhr%2Estatus%20%2B%20%27%2E%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20decodeAudioData%28xhr%2Eresponse%2C%20self%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20xhr%2Eonerror%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20there%20is%20an%20error%2C%20switch%20to%20HTML5%20Audio%2E%0A%20%20%20%20%20%20%20%20if%20%28self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Fhtml5%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5FwebAudio%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Fsounds%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20cache%5Burl%5D%3B%0A%20%20%20%20%20%20%20%20%20%20self%2Eload%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20safeXhrSend%28xhr%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Send%20the%20XHR%20request%20wrapped%20in%20a%20try%2Fcatch%2E%0A%20%20%20%2A%20%40param%20%20%7BObject%7D%20xhr%20XHR%20to%20send%2E%0A%20%20%20%2A%2F%0A%20%20var%20safeXhrSend%20%3D%20function%28xhr%29%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20xhr%2Esend%28%29%3B%0A%20%20%20%20%7D%20catch%20%28e%29%20%7B%0A%20%20%20%20%20%20xhr%2Eonerror%28%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Decode%20audio%20data%20from%20an%20array%20buffer%2E%0A%20%20%20%2A%20%40param%20%20%7BArrayBuffer%7D%20arraybuffer%20The%20audio%20data%2E%0A%20%20%20%2A%20%40param%20%20%7BHowl%7D%20%20%20%20%20%20%20%20self%0A%20%20%20%2A%2F%0A%20%20var%20decodeAudioData%20%3D%20function%28arraybuffer%2C%20self%29%20%7B%0A%20%20%20%20%2F%2F%20Decode%20the%20buffer%20into%20an%20audio%20source%2E%0A%20%20%20%20Howler%2Ectx%2EdecodeAudioData%28arraybuffer%2C%20function%28buffer%29%20%7B%0A%20%20%20%20%20%20if%20%28buffer%20%26%26%20self%2E%5Fsounds%2Elength%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20cache%5Bself%2E%5Fsrc%5D%20%3D%20buffer%3B%0A%20%20%20%20%20%20%20%20loadSound%28self%2C%20buffer%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20self%2E%5Femit%28%27loaderror%27%2C%20null%2C%20%27Decoding%20audio%20data%20failed%2E%27%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Sound%20is%20now%20loaded%2C%20so%20finish%20setting%20everything%20up%20and%20fire%20the%20loaded%20event%2E%0A%20%20%20%2A%20%40param%20%20%7BHowl%7D%20self%0A%20%20%20%2A%20%40param%20%20%7BObject%7D%20buffer%20The%20decoded%20buffer%20sound%20source%2E%0A%20%20%20%2A%2F%0A%20%20var%20loadSound%20%3D%20function%28self%2C%20buffer%29%20%7B%0A%20%20%20%20%2F%2F%20Set%20the%20duration%2E%0A%20%20%20%20if%20%28buffer%20%26%26%20%21self%2E%5Fduration%29%20%7B%0A%20%20%20%20%20%20self%2E%5Fduration%20%3D%20buffer%2Eduration%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Setup%20a%20sprite%20if%20none%20is%20defined%2E%0A%20%20%20%20if%20%28Object%2Ekeys%28self%2E%5Fsprite%29%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20self%2E%5Fsprite%20%3D%20%7B%5F%5Fdefault%3A%20%5B0%2C%20self%2E%5Fduration%20%2A%201000%5D%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Fire%20the%20loaded%20event%2E%0A%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20self%2E%5Fstate%20%3D%20%27loaded%27%3B%0A%20%20%20%20%20%20self%2E%5Femit%28%27load%27%29%3B%0A%20%20%20%20%20%20self%2E%5FloadQueue%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Begin%20playback%20if%20specified%2E%0A%20%20%20%20if%20%28self%2E%5Fautoplay%29%20%7B%0A%20%20%20%20%20%20self%2Eplay%28%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Setup%20the%20audio%20context%20when%20available%2C%20or%20switch%20to%20HTML5%20Audio%20mode%2E%0A%20%20%20%2A%2F%0A%20%20var%20setupAudioContext%20%3D%20function%28%29%20%7B%0A%20%20%20%20Howler%2EnoAudio%20%3D%20false%3B%0A%0A%20%20%20%20%2F%2F%20Check%20if%20we%20are%20using%20Web%20Audio%20and%20setup%20the%20AudioContext%20if%20we%20are%2E%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20if%20%28typeof%20AudioContext%20%21%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20Howler%2Ectx%20%3D%20new%20AudioContext%28%29%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28typeof%20webkitAudioContext%20%21%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20Howler%2Ectx%20%3D%20new%20webkitAudioContext%28%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20Howler%2EusingWebAudio%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20catch%28e%29%20%7B%0A%20%20%20%20%20%20Howler%2EusingWebAudio%20%3D%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28%21Howler%2EusingWebAudio%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20No%20audio%20is%20available%20on%20this%20system%20if%20noAudio%20is%20set%20to%20true%2E%0A%20%20%20%20%20%20if%20%28typeof%20Audio%20%21%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20test%20%3D%20new%20Audio%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20the%20canplaythrough%20event%20is%20available%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20test%2Eoncanplaythrough%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Howler%2E%5FcanPlayEvent%20%3D%20%27canplay%27%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20catch%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20Howler%2EnoAudio%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20Howler%2EnoAudio%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Test%20to%20make%20sure%20audio%20isn%27t%20disabled%20in%20Internet%20Explorer%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20var%20test%20%3D%20new%20Audio%28%29%3B%0A%20%20%20%20%20%20if%20%28test%2Emuted%29%20%7B%0A%20%20%20%20%20%20%20%20Howler%2EnoAudio%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20catch%20%28e%29%20%7B%7D%0A%0A%20%20%20%20%2F%2F%20Check%20if%20a%20webview%20is%20being%20used%20on%20iOS8%20or%20earlier%20%28rather%20than%20the%20browser%29%2E%0A%20%20%20%20%2F%2F%20If%20it%20is%2C%20disable%20Web%20Audio%20as%20it%20causes%20crashing%2E%0A%20%20%20%20var%20iOS%20%3D%20%28%2FiP%28hone%7Cod%7Cad%29%2F%2Etest%28Howler%2E%5Fnavigator%20%26%26%20Howler%2E%5Fnavigator%2Eplatform%29%29%3B%0A%20%20%20%20var%20appVersion%20%3D%20Howler%2E%5Fnavigator%20%26%26%20Howler%2E%5Fnavigator%2EappVersion%2Ematch%28%2FOS%20%28%5Cd%2B%29%5F%28%5Cd%2B%29%5F%3F%28%5Cd%2B%29%3F%2F%29%3B%0A%20%20%20%20var%20version%20%3D%20appVersion%20%3F%20parseInt%28appVersion%5B1%5D%2C%2010%29%20%3A%20null%3B%0A%20%20%20%20if%20%28iOS%20%26%26%20version%20%26%26%20version%20%3C%209%29%20%7B%0A%20%20%20%20%20%20var%20safari%20%3D%20%2Fsafari%2F%2Etest%28Howler%2E%5Fnavigator%20%26%26%20Howler%2E%5Fnavigator%2EuserAgent%2EtoLowerCase%28%29%29%3B%0A%20%20%20%20%20%20if%20%28Howler%2E%5Fnavigator%20%26%26%20Howler%2E%5Fnavigator%2Estandalone%20%26%26%20%21safari%20%7C%7C%20Howler%2E%5Fnavigator%20%26%26%20%21Howler%2E%5Fnavigator%2Estandalone%20%26%26%20%21safari%29%20%7B%0A%20%20%20%20%20%20%20%20Howler%2EusingWebAudio%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20and%20expose%20the%20master%20GainNode%20when%20using%20Web%20Audio%20%28useful%20for%20plugins%20or%20advanced%20usage%29%2E%0A%20%20%20%20if%20%28Howler%2EusingWebAudio%29%20%7B%0A%20%20%20%20%20%20Howler%2EmasterGain%20%3D%20%28typeof%20Howler%2Ectx%2EcreateGain%20%3D%3D%3D%20%27undefined%27%29%20%3F%20Howler%2Ectx%2EcreateGainNode%28%29%20%3A%20Howler%2Ectx%2EcreateGain%28%29%3B%0A%20%20%20%20%20%20Howler%2EmasterGain%2Egain%2Evalue%20%3D%201%3B%0A%20%20%20%20%20%20Howler%2EmasterGain%2Econnect%28Howler%2Ectx%2Edestination%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Re%2Drun%20the%20setup%20on%20Howler%2E%0A%20%20%20%20Howler%2E%5Fsetup%28%29%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Add%20support%20for%20AMD%20%28Asynchronous%20Module%20Definition%29%20libraries%20such%20as%20require%2Ejs%2E%0A%20%20if%20%28typeof%20define%20%3D%3D%3D%20%27function%27%20%26%26%20define%2Eamd%29%20%7B%0A%20%20%20%20define%28%5B%5D%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20Howler%3A%20Howler%2C%0A%20%20%20%20%20%20%20%20Howl%3A%20Howl%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Add%20support%20for%20CommonJS%20libraries%20such%20as%20browserify%2E%0A%20%20if%20%28typeof%20exports%20%21%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20exports%2EHowler%20%3D%20Howler%3B%0A%20%20%20%20exports%2EHowl%20%3D%20Howl%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Define%20globally%20in%20case%20AMD%20is%20not%20available%20or%20unused%2E%0A%20%20if%20%28typeof%20window%20%21%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20window%2EHowlerGlobal%20%3D%20HowlerGlobal%3B%0A%20%20%20%20window%2EHowler%20%3D%20Howler%3B%0A%20%20%20%20window%2EHowl%20%3D%20Howl%3B%0A%20%20%20%20window%2ESound%20%3D%20Sound%3B%0A%20%20%7D%20else%20if%20%28typeof%20global%20%21%3D%3D%20%27undefined%27%29%20%7B%20%2F%2F%20Add%20to%20global%20in%20Node%2Ejs%20%28for%20testing%2C%20etc%29%2E%0A%20%20%20%20global%2EHowlerGlobal%20%3D%20HowlerGlobal%3B%0A%20%20%20%20global%2EHowler%20%3D%20Howler%3B%0A%20%20%20%20global%2EHowl%20%3D%20Howl%3B%0A%20%20%20%20global%2ESound%20%3D%20Sound%3B%0A%20%20%7D%0A%7D%29%28%29%3B%0A%0A%0A%2F%2A%21%0A%20%2A%20%20Spatial%20Plugin%20%2D%20Adds%20support%20for%20stereo%20and%203D%20audio%20where%20Web%20Audio%20is%20supported%2E%0A%20%2A%20%20%0A%20%2A%20%20howler%2Ejs%20v2%2E0%2E0%2Drc1%0A%20%2A%20%20howlerjs%2Ecom%0A%20%2A%0A%20%2A%20%20%28c%29%202013%2D2016%2C%20James%20Simpson%20of%20GoldFire%20Studios%0A%20%2A%20%20goldfirestudios%2Ecom%0A%20%2A%0A%20%2A%20%20MIT%20License%0A%20%2A%2F%0A%0A%28function%28%29%20%7B%0A%0A%20%20%27use%20strict%27%3B%0A%0A%20%20%2F%2F%20Setup%20default%20properties%2E%0A%20%20HowlerGlobal%2Eprototype%2E%5Fpos%20%3D%20%5B0%2C%200%2C%200%5D%3B%0A%20%20HowlerGlobal%2Eprototype%2E%5Forientation%20%3D%20%5B0%2C%200%2C%20%2D1%2C%200%2C%201%2C%200%5D%3B%0A%20%20%0A%20%20%2F%2A%2A%20Global%20Methods%20%2A%2A%2F%0A%20%20%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Helper%20method%20to%20update%20the%20stereo%20panning%20position%20of%20all%20current%20Howls%2E%0A%20%20%20%2A%20Future%20Howls%20will%20not%20use%20this%20value%20unless%20explicitely%20set%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20pan%20A%20value%20of%20%2D1%2E0%20is%20all%20the%20way%20left%20and%201%2E0%20is%20all%20the%20way%20right%2E%0A%20%20%20%2A%20%40return%20%7BHowler%2FNumber%7D%20%20%20%20%20Self%20or%20current%20stereo%20panning%20value%2E%0A%20%20%20%2A%2F%0A%20%20HowlerGlobal%2Eprototype%2Estereo%20%3D%20function%28pan%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%2F%2F%20Stop%20right%20here%20if%20not%20using%20Web%20Audio%2E%0A%20%20%20%20if%20%28%21self%2Ectx%20%7C%7C%20%21self%2Ectx%2Elistener%29%20%7B%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Loop%20through%20all%20Howls%20and%20update%20their%20stereo%20panning%2E%0A%20%20%20%20for%20%28var%20i%3Dself%2E%5Fhowls%2Elength%2D1%3B%20i%3E%3D0%3B%20i%2D%2D%29%20%7B%0A%20%20%20%20%20%20self%2E%5Fhowls%5Bi%5D%2Estereo%28pan%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20self%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Get%2Fset%20the%20position%20of%20the%20listener%20in%203D%20cartesian%20space%2E%20Sounds%20using%0A%20%20%20%2A%203D%20position%20will%20be%20relative%20to%20the%20listener%27s%20position%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20x%20The%20x%2Dposition%20of%20the%20listener%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20y%20The%20y%2Dposition%20of%20the%20listener%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20z%20The%20z%2Dposition%20of%20the%20listener%2E%0A%20%20%20%2A%20%40return%20%7BHowler%2FArray%7D%20%20%20Self%20or%20current%20listener%20position%2E%0A%20%20%20%2A%2F%0A%20%20HowlerGlobal%2Eprototype%2Epos%20%3D%20function%28x%2C%20y%2C%20z%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%2F%2F%20Stop%20right%20here%20if%20not%20using%20Web%20Audio%2E%0A%20%20%20%20if%20%28%21self%2Ectx%20%7C%7C%20%21self%2Ectx%2Elistener%29%20%7B%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Set%20the%20defaults%20for%20optional%20%27y%27%20%26%20%27z%27%2E%0A%20%20%20%20y%20%3D%20%28typeof%20y%20%21%3D%3D%20%27number%27%29%20%3F%20self%2E%5Fpos%5B1%5D%20%3A%20y%3B%0A%20%20%20%20z%20%3D%20%28typeof%20z%20%21%3D%3D%20%27number%27%29%20%3F%20self%2E%5Fpos%5B2%5D%20%3A%20z%3B%0A%0A%20%20%20%20if%20%28typeof%20x%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20self%2E%5Fpos%20%3D%20%5Bx%2C%20y%2C%20z%5D%3B%0A%20%20%20%20%20%20self%2Ectx%2Elistener%2EsetPosition%28self%2E%5Fpos%5B0%5D%2C%20self%2E%5Fpos%5B1%5D%2C%20self%2E%5Fpos%5B2%5D%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20return%20self%2E%5Fpos%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20self%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Get%2Fset%20the%20direction%20the%20listener%20is%20pointing%20in%20the%203D%20cartesian%20space%2E%0A%20%20%20%2A%20A%20front%20and%20up%20vector%20must%20be%20provided%2E%20The%20front%20is%20the%20direction%20the%0A%20%20%20%2A%20face%20of%20the%20listener%20is%20pointing%2C%20and%20up%20is%20the%20direction%20the%20top%20of%20the%0A%20%20%20%2A%20listener%20is%20pointing%2E%20Thus%2C%20these%20values%20are%20expected%20to%20be%20at%20right%20angles%0A%20%20%20%2A%20from%20each%20other%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20x%20%20%20The%20x%2Dorientation%20of%20the%20listener%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20y%20%20%20The%20y%2Dorientation%20of%20the%20listener%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20z%20%20%20The%20z%2Dorientation%20of%20the%20listener%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20xUp%20The%20x%2Dorientation%20of%20the%20top%20of%20the%20listener%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20yUp%20The%20y%2Dorientation%20of%20the%20top%20of%20the%20listener%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20zUp%20The%20z%2Dorientation%20of%20the%20top%20of%20the%20listener%2E%0A%20%20%20%2A%20%40return%20%7BHowler%2FArray%7D%20%20%20%20%20Returns%20self%20or%20the%20current%20orientation%20vectors%2E%0A%20%20%20%2A%2F%0A%20%20HowlerGlobal%2Eprototype%2Eorientation%20%3D%20function%28x%2C%20y%2C%20z%2C%20xUp%2C%20yUp%2C%20zUp%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%2F%2F%20Stop%20right%20here%20if%20not%20using%20Web%20Audio%2E%0A%20%20%20%20if%20%28%21self%2Ectx%20%7C%7C%20%21self%2Ectx%2Elistener%29%20%7B%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Set%20the%20defaults%20for%20optional%20%27y%27%20%26%20%27z%27%2E%0A%20%20%20%20var%20or%20%3D%20self%2E%5Forientation%3B%0A%20%20%20%20y%20%3D%20%28typeof%20y%20%21%3D%3D%20%27number%27%29%20%3F%20or%5B1%5D%20%3A%20y%3B%0A%20%20%20%20z%20%3D%20%28typeof%20z%20%21%3D%3D%20%27number%27%29%20%3F%20or%5B2%5D%20%3A%20z%3B%0A%20%20%20%20xUp%20%3D%20%28typeof%20xUp%20%21%3D%3D%20%27number%27%29%20%3F%20or%5B3%5D%20%3A%20xUp%3B%0A%20%20%20%20yUp%20%3D%20%28typeof%20yUp%20%21%3D%3D%20%27number%27%29%20%3F%20or%5B4%5D%20%3A%20yUp%3B%0A%20%20%20%20zUp%20%3D%20%28typeof%20zUp%20%21%3D%3D%20%27number%27%29%20%3F%20or%5B5%5D%20%3A%20zUp%3B%0A%0A%20%20%20%20if%20%28typeof%20x%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20self%2E%5Forientation%20%3D%20%5Bx%2C%20y%2C%20z%2C%20xUp%2C%20yUp%2C%20zUp%5D%3B%0A%20%20%20%20%20%20self%2Ectx%2Elistener%2EsetOrientation%28x%2C%20y%2C%20z%2C%20xUp%2C%20yUp%2C%20zUp%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20return%20or%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20self%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%20Group%20Methods%20%2A%2A%2F%0A%20%20%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Add%20new%20properties%20to%20the%20core%20init%2E%0A%20%20%20%2A%20%40param%20%20%7BFunction%7D%20%5Fsuper%20Core%20init%20method%2E%0A%20%20%20%2A%20%40return%20%7BHowl%7D%0A%20%20%20%2A%2F%0A%20%20Howl%2Eprototype%2Einit%20%3D%20%28function%28%5Fsuper%29%20%7B%0A%20%20%20%20return%20function%28o%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20user%2Ddefined%20default%20properties%2E%0A%20%20%20%20%20%20self%2E%5Forientation%20%3D%20o%2Eorientation%20%7C%7C%20%5B1%2C%200%2C%200%5D%3B%0A%20%20%20%20%20%20self%2E%5Fstereo%20%3D%20o%2Estereo%20%7C%7C%20null%3B%0A%20%20%20%20%20%20self%2E%5Fpos%20%3D%20o%2Epos%20%7C%7C%20null%3B%0A%20%20%20%20%20%20self%2E%5FpannerAttr%20%3D%20%7B%0A%20%20%20%20%20%20%20%20coneInnerAngle%3A%20typeof%20o%2EconeInnerAngle%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EconeInnerAngle%20%3A%20360%2C%0A%20%20%20%20%20%20%20%20coneOuterAngle%3A%20typeof%20o%2EconeOuterAngle%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EconeOuterAngle%20%3A%20360%2C%0A%20%20%20%20%20%20%20%20coneOuterGain%3A%20typeof%20o%2EconeOuterGain%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EconeOuterGain%20%3A%200%2C%0A%20%20%20%20%20%20%20%20distanceModel%3A%20typeof%20o%2EdistanceModel%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EdistanceModel%20%3A%20%27inverse%27%2C%0A%20%20%20%20%20%20%20%20maxDistance%3A%20typeof%20o%2EmaxDistance%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EmaxDistance%20%3A%2010000%2C%0A%20%20%20%20%20%20%20%20panningModel%3A%20typeof%20o%2EpanningModel%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EpanningModel%20%3A%20%27HRTF%27%2C%0A%20%20%20%20%20%20%20%20refDistance%3A%20typeof%20o%2ErefDistance%20%21%3D%3D%20%27undefined%27%20%3F%20o%2ErefDistance%20%3A%201%2C%0A%20%20%20%20%20%20%20%20rolloffFactor%3A%20typeof%20o%2ErolloffFactor%20%21%3D%3D%20%27undefined%27%20%3F%20o%2ErolloffFactor%20%3A%201%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20event%20listeners%2E%0A%20%20%20%20%20%20self%2E%5Fonstereo%20%3D%20o%2Eonstereo%20%3F%20%5B%7Bfn%3A%20o%2Eonstereo%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonpos%20%3D%20o%2Eonpos%20%3F%20%5B%7Bfn%3A%20o%2Eonpos%7D%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20self%2E%5Fonorientation%20%3D%20o%2Eonorientation%20%3F%20%5B%7Bfn%3A%20o%2Eonorientation%7D%5D%20%3A%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Complete%20initilization%20with%20howler%2Ejs%20core%27s%20init%20function%2E%0A%20%20%20%20%20%20return%20%5Fsuper%2Ecall%28this%2C%20o%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%29%28Howl%2Eprototype%2Einit%29%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Get%2Fset%20the%20stereo%20panning%20of%20the%20audio%20source%20for%20this%20sound%20or%20all%20in%20the%20group%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20pan%20%20A%20value%20of%20%2D1%2E0%20is%20all%20the%20way%20left%20and%201%2E0%20is%20all%20the%20way%20right%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20%28optional%29%20The%20sound%20ID%2E%20If%20none%20is%20passed%2C%20all%20in%20group%20will%20be%20updated%2E%0A%20%20%20%2A%20%40return%20%7BHowl%2FNumber%7D%20%20%20%20Returns%20self%20or%20the%20current%20stereo%20panning%20value%2E%0A%20%20%20%2A%2F%0A%20%20Howl%2Eprototype%2Estereo%20%3D%20function%28pan%2C%20id%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%2F%2F%20Stop%20right%20here%20if%20not%20using%20Web%20Audio%2E%0A%20%20%20%20if%20%28%21self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20If%20the%20sound%20hasn%27t%20loaded%2C%20add%20it%20to%20the%20load%20queue%20to%20change%20stereo%20pan%20when%20capable%2E%0A%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20self%2E%5Fqueue%2Epush%28%7B%0A%20%20%20%20%20%20%20%20event%3A%20%27stereo%27%2C%0A%20%20%20%20%20%20%20%20action%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2Estereo%28pan%2C%20id%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Check%20for%20PannerStereoNode%20support%20and%20fallback%20to%20PannerNode%20if%20it%20doesn%27t%20exist%2E%0A%20%20%20%20var%20pannerType%20%3D%20%28typeof%20Howler%2Ectx%2EcreateStereoPanner%20%3D%3D%3D%20%27undefined%27%29%20%3F%20%27spatial%27%20%3A%20%27stereo%27%3B%0A%0A%20%20%20%20%2F%2F%20Setup%20the%20group%27s%20stereo%20panning%20if%20no%20ID%20is%20passed%2E%0A%20%20%20%20if%20%28typeof%20id%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Return%20the%20group%27s%20stereo%20panning%20if%20no%20parameters%20are%20passed%2E%0A%20%20%20%20%20%20if%20%28typeof%20pan%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fstereo%20%3D%20pan%3B%0A%20%20%20%20%20%20%20%20self%2E%5Fpos%20%3D%20%5Bpan%2C%200%2C%200%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20self%2E%5Fstereo%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Change%20the%20streo%20panning%20of%20one%20or%20all%20sounds%20in%20group%2E%0A%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28id%29%3B%0A%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cids%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Get%20the%20sound%2E%0A%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5FsoundById%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20if%20%28sound%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20pan%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fstereo%20%3D%20pan%3B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fpos%20%3D%20%5Bpan%2C%200%2C%200%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28sound%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20we%20are%20falling%20back%2C%20make%20sure%20the%20panningModel%20is%20equalpower%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5FpannerAttr%2EpanningModel%20%3D%20%27equalpower%27%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20there%20is%20a%20panner%20setup%20and%20create%20a%20new%20one%20if%20not%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21sound%2E%5Fpanner%20%7C%7C%20%21sound%2E%5Fpanner%2Epan%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20setupPanner%28sound%2C%20pannerType%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pannerType%20%3D%3D%3D%20%27spatial%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fpanner%2EsetPosition%28pan%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fpanner%2Epan%2Evalue%20%3D%20pan%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27stereo%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20sound%2E%5Fstereo%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20self%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Get%2Fset%20the%203D%20spatial%20position%20of%20the%20audio%20source%20for%20this%20sound%20or%0A%20%20%20%2A%20all%20in%20the%20group%2E%20The%20most%20common%20usage%20is%20to%20set%20the%20%27x%27%20position%20for%0A%20%20%20%2A%20left%2Fright%20panning%2E%20Setting%20any%20value%20higher%20than%201%2E0%20will%20begin%20to%0A%20%20%20%2A%20decrease%20the%20volume%20of%20the%20sound%20as%20it%20moves%20further%20away%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20x%20%20The%20x%2Dposition%20of%20the%20audio%20from%20%2D1000%2E0%20to%201000%2E0%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20y%20%20The%20y%2Dposition%20of%20the%20audio%20from%20%2D1000%2E0%20to%201000%2E0%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20z%20%20The%20z%2Dposition%20of%20the%20audio%20from%20%2D1000%2E0%20to%201000%2E0%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20%28optional%29%20The%20sound%20ID%2E%20If%20none%20is%20passed%2C%20all%20in%20group%20will%20be%20updated%2E%0A%20%20%20%2A%20%40return%20%7BHowl%2FArray%7D%20%20%20%20Returns%20self%20or%20the%20current%203D%20spatial%20position%3A%20%5Bx%2C%20y%2C%20z%5D%2E%0A%20%20%20%2A%2F%0A%20%20Howl%2Eprototype%2Epos%20%3D%20function%28x%2C%20y%2C%20z%2C%20id%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%2F%2F%20Stop%20right%20here%20if%20not%20using%20Web%20Audio%2E%0A%20%20%20%20if%20%28%21self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20If%20the%20sound%20hasn%27t%20loaded%2C%20add%20it%20to%20the%20load%20queue%20to%20change%20position%20when%20capable%2E%0A%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20self%2E%5Fqueue%2Epush%28%7B%0A%20%20%20%20%20%20%20%20event%3A%20%27pos%27%2C%0A%20%20%20%20%20%20%20%20action%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2Epos%28x%2C%20y%2C%20z%2C%20id%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Set%20the%20defaults%20for%20optional%20%27y%27%20%26%20%27z%27%2E%0A%20%20%20%20y%20%3D%20%28typeof%20y%20%21%3D%3D%20%27number%27%29%20%3F%200%20%3A%20y%3B%0A%20%20%20%20z%20%3D%20%28typeof%20z%20%21%3D%3D%20%27number%27%29%20%3F%20%2D0%2E5%20%3A%20z%3B%0A%0A%20%20%20%20%2F%2F%20Setup%20the%20group%27s%20spatial%20position%20if%20no%20ID%20is%20passed%2E%0A%20%20%20%20if%20%28typeof%20id%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Return%20the%20group%27s%20spatial%20position%20if%20no%20parameters%20are%20passed%2E%0A%20%20%20%20%20%20if%20%28typeof%20x%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Fpos%20%3D%20%5Bx%2C%20y%2C%20z%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20self%2E%5Fpos%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Change%20the%20spatial%20position%20of%20one%20or%20all%20sounds%20in%20group%2E%0A%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28id%29%3B%0A%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cids%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Get%20the%20sound%2E%0A%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5FsoundById%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20if%20%28sound%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20x%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Fpos%20%3D%20%5Bx%2C%20y%2C%20z%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28sound%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20there%20is%20a%20panner%20setup%20and%20create%20a%20new%20one%20if%20not%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21sound%2E%5Fpanner%20%7C%7C%20sound%2E%5Fpanner%2Epan%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20setupPanner%28sound%2C%20%27spatial%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fpanner%2EsetPosition%28x%2C%20y%2C%20z%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27pos%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20sound%2E%5Fpos%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20self%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Get%2Fset%20the%20direction%20the%20audio%20source%20is%20pointing%20in%20the%203D%20cartesian%20coordinate%0A%20%20%20%2A%20space%2E%20Depending%20on%20how%20direction%20the%20sound%20is%2C%20based%20on%20the%20%60cone%60%20attributes%2C%0A%20%20%20%2A%20a%20sound%20pointing%20away%20from%20the%20listener%20can%20be%20quiet%20or%20silent%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20x%20%20The%20x%2Dorientation%20of%20the%20source%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20y%20%20The%20y%2Dorientation%20of%20the%20source%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20z%20%20The%20z%2Dorientation%20of%20the%20source%2E%0A%20%20%20%2A%20%40param%20%20%7BNumber%7D%20id%20%28optional%29%20The%20sound%20ID%2E%20If%20none%20is%20passed%2C%20all%20in%20group%20will%20be%20updated%2E%0A%20%20%20%2A%20%40return%20%7BHowl%2FArray%7D%20%20%20%20Returns%20self%20or%20the%20current%203D%20spatial%20orientation%3A%20%5Bx%2C%20y%2C%20z%5D%2E%0A%20%20%20%2A%2F%0A%20%20Howl%2Eprototype%2Eorientation%20%3D%20function%28x%2C%20y%2C%20z%2C%20id%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%2F%2F%20Stop%20right%20here%20if%20not%20using%20Web%20Audio%2E%0A%20%20%20%20if%20%28%21self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20If%20the%20sound%20hasn%27t%20loaded%2C%20add%20it%20to%20the%20load%20queue%20to%20change%20orientation%20when%20capable%2E%0A%20%20%20%20if%20%28self%2E%5Fstate%20%21%3D%3D%20%27loaded%27%29%20%7B%0A%20%20%20%20%20%20self%2E%5Fqueue%2Epush%28%7B%0A%20%20%20%20%20%20%20%20event%3A%20%27orientation%27%2C%0A%20%20%20%20%20%20%20%20action%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2Eorientation%28x%2C%20y%2C%20z%2C%20id%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Set%20the%20defaults%20for%20optional%20%27y%27%20%26%20%27z%27%2E%0A%20%20%20%20y%20%3D%20%28typeof%20y%20%21%3D%3D%20%27number%27%29%20%3F%20self%2E%5Forientation%5B1%5D%20%3A%20y%3B%0A%20%20%20%20z%20%3D%20%28typeof%20z%20%21%3D%3D%20%27number%27%29%20%3F%20self%2E%5Forientation%5B2%5D%20%3A%20z%3B%0A%0A%20%20%20%20%2F%2F%20Setup%20the%20group%27s%20spatial%20orientation%20if%20no%20ID%20is%20passed%2E%0A%20%20%20%20if%20%28typeof%20id%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Return%20the%20group%27s%20spatial%20orientation%20if%20no%20parameters%20are%20passed%2E%0A%20%20%20%20%20%20if%20%28typeof%20x%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20self%2E%5Forientation%20%3D%20%5Bx%2C%20y%2C%20z%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20self%2E%5Forientation%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Change%20the%20spatial%20orientation%20of%20one%20or%20all%20sounds%20in%20group%2E%0A%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28id%29%3B%0A%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cids%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Get%20the%20sound%2E%0A%20%20%20%20%20%20var%20sound%20%3D%20self%2E%5FsoundById%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20if%20%28sound%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20x%20%3D%3D%3D%20%27number%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sound%2E%5Forientation%20%3D%20%5Bx%2C%20y%2C%20z%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28sound%2E%5Fnode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20there%20is%20a%20panner%20setup%20and%20create%20a%20new%20one%20if%20not%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21sound%2E%5Fpanner%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Make%20sure%20we%20have%20a%20position%20to%20setup%20the%20node%20with%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21sound%2E%5Fpos%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fpos%20%3D%20self%2E%5Fpos%20%7C%7C%20%5B0%2C%200%2C%20%2D0%2E5%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20setupPanner%28sound%2C%20%27spatial%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fpanner%2EsetOrientation%28x%2C%20y%2C%20z%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20self%2E%5Femit%28%27orientation%27%2C%20sound%2E%5Fid%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20sound%2E%5Forientation%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20self%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Get%2Fset%20the%20panner%20node%27s%20attributes%20for%20a%20sound%20or%20group%20of%20sounds%2E%0A%20%20%20%2A%20This%20method%20can%20optionall%20take%200%2C%201%20or%202%20arguments%2E%0A%20%20%20%2A%20%20%20pannerAttr%28%29%20%2D%3E%20Returns%20the%20group%27s%20values%2E%0A%20%20%20%2A%20%20%20pannerAttr%28id%29%20%2D%3E%20Returns%20the%20sound%20id%27s%20values%2E%0A%20%20%20%2A%20%20%20pannerAttr%28o%29%20%2D%3E%20Set%27s%20the%20values%20of%20all%20sounds%20in%20this%20Howl%20group%2E%0A%20%20%20%2A%20%20%20pannerAttr%28o%2C%20id%29%20%2D%3E%20Set%27s%20the%20values%20of%20passed%20sound%20id%2E%0A%20%20%20%2A%0A%20%20%20%2A%20%20%20Attributes%3A%0A%20%20%20%2A%20%20%20%20%20coneInnerAngle%20%2D%20%28360%20by%20default%29%20There%20will%20be%20no%20volume%20reduction%20inside%20this%20angle%2E%0A%20%20%20%2A%20%20%20%20%20coneOuterAngle%20%2D%20%28360%20by%20default%29%20The%20volume%20will%20be%20reduced%20to%20a%20constant%20value%20of%0A%20%20%20%2A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60coneOuterGain%60%20outside%20this%20angle%2E%0A%20%20%20%2A%20%20%20%20%20coneOuterGain%20%2D%20%280%20by%20default%29%20The%20amount%20of%20volume%20reduction%20outside%20of%20%60coneOuterAngle%60%2E%0A%20%20%20%2A%20%20%20%20%20distanceModel%20%2D%20%28%27inverse%27%20by%20default%29%20Determines%20algorithm%20to%20use%20to%20reduce%20volume%20as%20audio%20moves%0A%20%20%20%2A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20away%20from%20listener%2E%20Can%20be%20%60linear%60%2C%20%60inverse%60%20or%20%60exponential%60%2E%0A%20%20%20%2A%20%20%20%20%20maxDistance%20%2D%20%2810000%20by%20default%29%20Volume%20won%27t%20reduce%20between%20source%2Flistener%20beyond%20this%20distance%2E%0A%20%20%20%2A%20%20%20%20%20panningModel%20%2D%20%28%27HRTF%27%20by%20default%29%20Determines%20which%20spatialization%20algorithm%20is%20used%20to%20position%20audio%2E%0A%20%20%20%2A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Can%20be%20%60HRTF%60%20or%20%60equalpower%60%2E%0A%20%20%20%2A%20%20%20%20%20refDistance%20%2D%20%281%20by%20default%29%20A%20reference%20distance%20for%20reducing%20volume%20as%20the%20source%0A%20%20%20%2A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moves%20away%20from%20the%20listener%2E%0A%20%20%20%2A%20%20%20%20%20rolloffFactor%20%2D%20%281%20by%20default%29%20How%20quickly%20the%20volume%20reduces%20as%20source%20moves%20from%20listener%2E%0A%20%20%20%2A%20%0A%20%20%20%2A%20%40return%20%7BHowl%2FObject%7D%20Returns%20self%20or%20current%20panner%20attributes%2E%0A%20%20%20%2A%2F%0A%20%20Howl%2Eprototype%2EpannerAttr%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20var%20args%20%3D%20arguments%3B%0A%20%20%20%20var%20o%2C%20id%2C%20sound%3B%0A%0A%20%20%20%20%2F%2F%20Stop%20right%20here%20if%20not%20using%20Web%20Audio%2E%0A%20%20%20%20if%20%28%21self%2E%5FwebAudio%29%20%7B%0A%20%20%20%20%20%20return%20self%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Determine%20the%20values%20based%20on%20arguments%2E%0A%20%20%20%20if%20%28args%2Elength%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Return%20the%20group%27s%20panner%20attribute%20values%2E%0A%20%20%20%20%20%20return%20self%2E%5FpannerAttr%3B%0A%20%20%20%20%7D%20else%20if%20%28args%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20if%20%28typeof%20args%5B0%5D%20%3D%3D%3D%20%27object%27%29%20%7B%0A%20%20%20%20%20%20%20%20o%20%3D%20args%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Set%20the%20grou%27s%20panner%20attribute%20values%2E%0A%20%20%20%20%20%20%20%20if%20%28typeof%20id%20%3D%3D%3D%20%27undefined%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20self%2E%5FpannerAttr%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20coneInnerAngle%3A%20typeof%20o%2EconeInnerAngle%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EconeInnerAngle%20%3A%20self%2E%5FconeInnerAngle%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20coneOuterAngle%3A%20typeof%20o%2EconeOuterAngle%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EconeOuterAngle%20%3A%20self%2E%5FconeOuterAngle%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20coneOuterGain%3A%20typeof%20o%2EconeOuterGain%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EconeOuterGain%20%3A%20self%2E%5FconeOuterGain%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20distanceModel%3A%20typeof%20o%2EdistanceModel%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EdistanceModel%20%3A%20self%2E%5FdistanceModel%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20maxDistance%3A%20typeof%20o%2EmaxDistance%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EmaxDistance%20%3A%20self%2E%5FmaxDistance%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20panningModel%3A%20typeof%20o%2EpanningModel%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EpanningModel%20%3A%20self%2E%5FpanningModel%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20refDistance%3A%20typeof%20o%2ErefDistance%20%21%3D%3D%20%27undefined%27%20%3F%20o%2ErefDistance%20%3A%20self%2E%5FrefDistance%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20rolloffFactor%3A%20typeof%20o%2ErolloffFactor%20%21%3D%3D%20%27undefined%27%20%3F%20o%2ErolloffFactor%20%3A%20self%2E%5FrolloffFactor%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20this%20sound%27s%20panner%20attribute%20values%2E%0A%20%20%20%20%20%20%20%20sound%20%3D%20self%2E%5FsoundById%28parseInt%28args%5B0%5D%2C%2010%29%29%3B%0A%20%20%20%20%20%20%20%20return%20sound%20%3F%20sound%2E%5FpannerAttr%20%3A%20self%2E%5FpannerAttr%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20if%20%28args%2Elength%20%3D%3D%3D%202%29%20%7B%0A%20%20%20%20%20%20o%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20id%20%3D%20parseInt%28args%5B1%5D%2C%2010%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Update%20the%20values%20of%20the%20specified%20sounds%2E%0A%20%20%20%20var%20ids%20%3D%20self%2E%5FgetSoundIds%28id%29%3B%0A%20%20%20%20for%20%28var%20i%3D0%3B%20i%3Cids%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20sound%20%3D%20self%2E%5FsoundById%28ids%5Bi%5D%29%3B%0A%0A%20%20%20%20%20%20if%20%28sound%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Merge%20the%20new%20values%20into%20the%20sound%2E%0A%20%20%20%20%20%20%20%20var%20pa%20%3D%20sound%2E%5FpannerAttr%3B%0A%20%20%20%20%20%20%20%20pa%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20coneInnerAngle%3A%20typeof%20o%2EconeInnerAngle%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EconeInnerAngle%20%3A%20pa%2EconeInnerAngle%2C%0A%20%20%20%20%20%20%20%20%20%20coneOuterAngle%3A%20typeof%20o%2EconeOuterAngle%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EconeOuterAngle%20%3A%20pa%2EconeOuterAngle%2C%0A%20%20%20%20%20%20%20%20%20%20coneOuterGain%3A%20typeof%20o%2EconeOuterGain%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EconeOuterGain%20%3A%20pa%2EconeOuterGain%2C%0A%20%20%20%20%20%20%20%20%20%20distanceModel%3A%20typeof%20o%2EdistanceModel%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EdistanceModel%20%3A%20pa%2EdistanceModel%2C%0A%20%20%20%20%20%20%20%20%20%20maxDistance%3A%20typeof%20o%2EmaxDistance%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EmaxDistance%20%3A%20pa%2EmaxDistance%2C%0A%20%20%20%20%20%20%20%20%20%20panningModel%3A%20typeof%20o%2EpanningModel%20%21%3D%3D%20%27undefined%27%20%3F%20o%2EpanningModel%20%3A%20pa%2EpanningModel%2C%0A%20%20%20%20%20%20%20%20%20%20refDistance%3A%20typeof%20o%2ErefDistance%20%21%3D%3D%20%27undefined%27%20%3F%20o%2ErefDistance%20%3A%20pa%2ErefDistance%2C%0A%20%20%20%20%20%20%20%20%20%20rolloffFactor%3A%20typeof%20o%2ErolloffFactor%20%21%3D%3D%20%27undefined%27%20%3F%20o%2ErolloffFactor%20%3A%20pa%2ErolloffFactor%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Update%20the%20panner%20values%20or%20create%20a%20new%20panner%20if%20none%20exists%2E%0A%20%20%20%20%20%20%20%20var%20panner%20%3D%20sound%2E%5Fpanner%3B%0A%20%20%20%20%20%20%20%20if%20%28panner%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20panner%2EconeInnerAngle%20%3D%20pa%2EconeInnerAngle%3B%0A%20%20%20%20%20%20%20%20%20%20panner%2EconeOuterAngle%20%3D%20pa%2EconeOuterAngle%3B%0A%20%20%20%20%20%20%20%20%20%20panner%2EconeOuterGain%20%3D%20pa%2EconeOuterGain%3B%0A%20%20%20%20%20%20%20%20%20%20panner%2EdistanceModel%20%3D%20pa%2EdistanceModel%3B%0A%20%20%20%20%20%20%20%20%20%20panner%2EmaxDistance%20%3D%20pa%2EmaxDistance%3B%0A%20%20%20%20%20%20%20%20%20%20panner%2EpanningModel%20%3D%20pa%2EpanningModel%3B%0A%20%20%20%20%20%20%20%20%20%20panner%2ErefDistance%20%3D%20pa%2ErefDistance%3B%0A%20%20%20%20%20%20%20%20%20%20panner%2ErolloffFactor%20%3D%20pa%2ErolloffFactor%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Make%20sure%20we%20have%20a%20position%20to%20setup%20the%20node%20with%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21sound%2E%5Fpos%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sound%2E%5Fpos%20%3D%20self%2E%5Fpos%20%7C%7C%20%5B0%2C%200%2C%20%2D0%2E5%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Create%20a%20new%20panner%20node%2E%0A%20%20%20%20%20%20%20%20%20%20setupPanner%28sound%2C%20%27spatial%27%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20self%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2A%2A%20Single%20Sound%20Methods%20%2A%2A%2F%0A%20%20%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Add%20new%20properties%20to%20the%20core%20Sound%20init%2E%0A%20%20%20%2A%20%40param%20%20%7BFunction%7D%20%5Fsuper%20Core%20Sound%20init%20method%2E%0A%20%20%20%2A%20%40return%20%7BSound%7D%0A%20%20%20%2A%2F%0A%20%20Sound%2Eprototype%2Einit%20%3D%20%28function%28%5Fsuper%29%20%7B%0A%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20parent%20%3D%20self%2E%5Fparent%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Setup%20user%2Ddefined%20default%20properties%2E%0A%20%20%20%20%20%20self%2E%5Forientation%20%3D%20parent%2E%5Forientation%3B%0A%20%20%20%20%20%20self%2E%5Fstereo%20%3D%20parent%2E%5Fstereo%3B%0A%20%20%20%20%20%20self%2E%5Fpos%20%3D%20parent%2E%5Fpos%3B%0A%20%20%20%20%20%20self%2E%5FpannerAttr%20%3D%20parent%2E%5FpannerAttr%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Complete%20initilization%20with%20howler%2Ejs%20core%20Sound%27s%20init%20function%2E%0A%20%20%20%20%20%20%5Fsuper%2Ecall%28this%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20If%20a%20stereo%20or%20position%20was%20specified%2C%20set%20it%20up%2E%0A%20%20%20%20%20%20if%20%28self%2E%5Fstereo%29%20%7B%0A%20%20%20%20%20%20%20%20parent%2Estereo%28self%2E%5Fstereo%29%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28self%2E%5Fpos%29%20%7B%0A%20%20%20%20%20%20%20%20parent%2Epos%28self%2E%5Fpos%5B0%5D%2C%20self%2E%5Fpos%5B1%5D%2C%20self%2E%5Fpos%5B2%5D%2C%20self%2E%5Fid%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%29%28Sound%2Eprototype%2Einit%29%3B%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Override%20the%20Sound%2Ereset%20method%20to%20clean%20up%20properties%20from%20the%20spatial%20plugin%2E%0A%20%20%20%2A%20%40param%20%20%7BFunction%7D%20%5Fsuper%20Sound%20reset%20method%2E%0A%20%20%20%2A%20%40return%20%7BSound%7D%0A%20%20%20%2A%2F%0A%20%20Sound%2Eprototype%2Ereset%20%3D%20%28function%28%5Fsuper%29%20%7B%0A%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%20%20%20%20%20%20var%20parent%20%3D%20self%2E%5Fparent%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Reset%20all%20spatial%20plugin%20properties%20on%20this%20sound%2E%0A%20%20%20%20%20%20self%2E%5Forientation%20%3D%20parent%2E%5Forientation%3B%0A%20%20%20%20%20%20self%2E%5Fpos%20%3D%20parent%2E%5Fpos%3B%0A%20%20%20%20%20%20self%2E%5FpannerAttr%20%3D%20parent%2E%5FpannerAttr%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Complete%20resetting%20of%20the%20sound%2E%0A%20%20%20%20%20%20return%20%5Fsuper%2Ecall%28this%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%29%28Sound%2Eprototype%2Ereset%29%3B%0A%0A%20%20%2F%2A%2A%20Helper%20Methods%20%2A%2A%2F%0A%20%20%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%0A%20%20%2F%2A%2A%0A%20%20%20%2A%20Create%20a%20new%20panner%20node%20and%20save%20it%20on%20the%20sound%2E%0A%20%20%20%2A%20%40param%20%20%7BSound%7D%20sound%20Specific%20sound%20to%20setup%20panning%20on%2E%0A%20%20%20%2A%20%40param%20%7BString%7D%20type%20Type%20of%20panner%20to%20create%3A%20%27stereo%27%20or%20%27spatial%27%2E%0A%20%20%20%2A%2F%0A%20%20var%20setupPanner%20%3D%20function%28sound%2C%20type%29%20%7B%0A%20%20%20%20type%20%3D%20type%20%7C%7C%20%27spatial%27%3B%0A%0A%20%20%20%20%2F%2F%20Create%20the%20new%20panner%20node%2E%0A%20%20%20%20if%20%28type%20%3D%3D%3D%20%27spatial%27%29%20%7B%0A%20%20%20%20%20%20sound%2E%5Fpanner%20%3D%20Howler%2Ectx%2EcreatePanner%28%29%3B%0A%20%20%20%20%20%20sound%2E%5Fpanner%2EconeInnerAngle%20%3D%20sound%2E%5FpannerAttr%2EconeInnerAngle%3B%0A%20%20%20%20%20%20sound%2E%5Fpanner%2EconeOuterAngle%20%3D%20sound%2E%5FpannerAttr%2EconeOuterAngle%3B%0A%20%20%20%20%20%20sound%2E%5Fpanner%2EconeOuterGain%20%3D%20sound%2E%5FpannerAttr%2EconeOuterGain%3B%0A%20%20%20%20%20%20sound%2E%5Fpanner%2EdistanceModel%20%3D%20sound%2E%5FpannerAttr%2EdistanceModel%3B%0A%20%20%20%20%20%20sound%2E%5Fpanner%2EmaxDistance%20%3D%20sound%2E%5FpannerAttr%2EmaxDistance%3B%0A%20%20%20%20%20%20sound%2E%5Fpanner%2EpanningModel%20%3D%20sound%2E%5FpannerAttr%2EpanningModel%3B%0A%20%20%20%20%20%20sound%2E%5Fpanner%2ErefDistance%20%3D%20sound%2E%5FpannerAttr%2ErefDistance%3B%0A%20%20%20%20%20%20sound%2E%5Fpanner%2ErolloffFactor%20%3D%20sound%2E%5FpannerAttr%2ErolloffFactor%3B%0A%20%20%20%20%20%20sound%2E%5Fpanner%2EsetPosition%28sound%2E%5Fpos%5B0%5D%2C%20sound%2E%5Fpos%5B1%5D%2C%20sound%2E%5Fpos%5B2%5D%29%3B%0A%20%20%20%20%20%20sound%2E%5Fpanner%2EsetOrientation%28sound%2E%5Forientation%5B0%5D%2C%20sound%2E%5Forientation%5B1%5D%2C%20sound%2E%5Forientation%5B2%5D%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20sound%2E%5Fpanner%20%3D%20Howler%2Ectx%2EcreateStereoPanner%28%29%3B%0A%20%20%20%20%20%20sound%2E%5Fpanner%2Epan%2Evalue%20%3D%20sound%2E%5Fstereo%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20sound%2E%5Fpanner%2Econnect%28sound%2E%5Fnode%29%3B%0A%0A%20%20%20%20%2F%2F%20Update%20the%20connections%2E%0A%20%20%20%20if%20%28%21sound%2E%5Fpaused%29%20%7B%0A%20%20%20%20%20%20sound%2E%5Fparent%2Epause%28sound%2E%5Fid%2C%20true%29%2Eplay%28sound%2E%5Fid%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%7D%29%28%29%3B%0A"></script>
<script src="data:application/x-javascript,%2F%2A%2A%2A%0A%0A%20%20%20%20MochiKit%2EMochiKit%201%2E4%2E2%20%3A%20PACKED%20VERSION%0A%0A%20%20%20%20THIS%20FILE%20IS%20AUTOMATICALLY%20GENERATED%2E%20%20If%20creating%20patches%2C%20please%0A%20%20%20%20diff%20against%20the%20source%20tree%2C%20not%20this%20file%2E%0A%0A%20%20%20%20See%20%3Chttp%3A%2F%2Fmochikit%2Ecom%2F%3E%20for%20documentation%2C%20downloads%2C%20license%2C%20etc%2E%0A%0A%20%20%20%20%28c%29%202005%20Bob%20Ippolito%2E%20%20All%20rights%20Reserved%2E%0A%0A%2A%2A%2A%2F%0A%0Aif%28typeof%20%28dojo%29%21%3D%22undefined%22%29%7B%0Adojo%2Eprovide%28%22MochiKit%2EBase%22%29%3B%0A%7D%0Aif%28typeof%20%28MochiKit%29%3D%3D%22undefined%22%29%7B%0AMochiKit%3D%7B%7D%3B%0A%7D%0Aif%28typeof%20%28MochiKit%2EBase%29%3D%3D%22undefined%22%29%7B%0AMochiKit%2EBase%3D%7B%7D%3B%0A%7D%0Aif%28typeof%20%28MochiKit%2E%5F%5Fexport%5F%5F%29%3D%3D%22undefined%22%29%7B%0AMochiKit%2E%5F%5Fexport%5F%5F%3D%28MochiKit%2E%5F%5Fcompat%5F%5F%7C%7C%28typeof%20%28JSAN%29%3D%3D%22undefined%22%26%26typeof%20%28dojo%29%3D%3D%22undefined%22%29%29%3B%0A%7D%0AMochiKit%2EBase%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EBase%2ENAME%3D%22MochiKit%2EBase%22%3B%0AMochiKit%2EBase%2Eupdate%3Dfunction%28%5F1%2C%5F2%29%7B%0Aif%28%5F1%3D%3D%3Dnull%7C%7C%5F1%3D%3D%3Dundefined%29%7B%0A%5F1%3D%7B%7D%3B%0A%7D%0Afor%28var%20i%3D1%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20o%3Darguments%5Bi%5D%3B%0Aif%28typeof%20%28o%29%21%3D%22undefined%22%26%26o%21%3D%3Dnull%29%7B%0Afor%28var%20k%20in%20o%29%7B%0A%5F1%5Bk%5D%3Do%5Bk%5D%3B%0A%7D%0A%7D%0A%7D%0Areturn%20%5F1%3B%0A%7D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EBase%2C%7B%5F%5Frepr%5F%5F%3Afunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%2CtoString%3Afunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%2Ccamelize%3Afunction%28%5F6%29%7B%0Avar%20%5F7%3D%5F6%2Esplit%28%22%2D%22%29%3B%0Avar%20cc%3D%5F7%5B0%5D%3B%0Afor%28var%20i%3D1%3Bi%3C%5F7%2Elength%3Bi%2B%2B%29%7B%0Acc%2B%3D%5F7%5Bi%5D%2EcharAt%280%29%2EtoUpperCase%28%29%2B%5F7%5Bi%5D%2Esubstring%281%29%3B%0A%7D%0Areturn%20cc%3B%0A%7D%2Ccounter%3Afunction%28n%29%7B%0Aif%28arguments%2Elength%3D%3D%3D0%29%7B%0An%3D1%3B%0A%7D%0Areturn%20function%28%29%7B%0Areturn%20n%2B%2B%3B%0A%7D%3B%0A%7D%2Cclone%3Afunction%28%5Fb%29%7B%0Avar%20me%3Darguments%2Ecallee%3B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Ame%2Eprototype%3D%5Fb%3B%0Areturn%20new%20me%28%29%3B%0A%7D%0A%7D%2C%5Fdeps%3Afunction%28%5Fd%2C%5Fe%29%7B%0Aif%28%21%28%5Fd%20in%20MochiKit%29%29%7B%0AMochiKit%5B%5Fd%5D%3D%7B%7D%3B%0A%7D%0Aif%28typeof%20%28dojo%29%21%3D%22undefined%22%29%7B%0Adojo%2Eprovide%28%22MochiKit%2E%22%2B%5Fd%29%3B%0A%7D%0Afor%28var%20i%3D0%3Bi%3C%5Fe%2Elength%3Bi%2B%2B%29%7B%0Aif%28typeof%20%28dojo%29%21%3D%22undefined%22%29%7B%0Adojo%2Erequire%28%22MochiKit%2E%22%2B%5Fe%5Bi%5D%29%3B%0A%7D%0Aif%28typeof%20%28JSAN%29%21%3D%22undefined%22%29%7B%0AJSAN%2Euse%28%22MochiKit%2E%22%2B%5Fe%5Bi%5D%2C%5B%5D%29%3B%0A%7D%0Aif%28%21%28%5Fe%5Bi%5D%20in%20MochiKit%29%29%7B%0Athrow%20%22MochiKit%2E%22%2B%5Fd%2B%22%20depends%20on%20MochiKit%2E%22%2B%5Fe%5Bi%5D%2B%22%21%22%3B%0A%7D%0A%7D%0A%7D%2C%5FflattenArray%3Afunction%28res%2Clst%29%7B%0Afor%28var%20i%3D0%3Bi%3Clst%2Elength%3Bi%2B%2B%29%7B%0Avar%20o%3Dlst%5Bi%5D%3B%0Aif%28o%20instanceof%20Array%29%7B%0Aarguments%2Ecallee%28res%2Co%29%3B%0A%7Delse%7B%0Ares%2Epush%28o%29%3B%0A%7D%0A%7D%0Areturn%20res%3B%0A%7D%2CflattenArray%3Afunction%28lst%29%7B%0Areturn%20MochiKit%2EBase%2E%5FflattenArray%28%5B%5D%2Clst%29%3B%0A%7D%2CflattenArguments%3Afunction%28lst%29%7B%0Avar%20res%3D%5B%5D%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20%5F18%3Dm%2Eextend%28null%2Carguments%29%3B%0Awhile%28%5F18%2Elength%29%7B%0Avar%20o%3D%5F18%2Eshift%28%29%3B%0Aif%28o%26%26typeof%20%28o%29%3D%3D%22object%22%26%26typeof%20%28o%2Elength%29%3D%3D%22number%22%29%7B%0Afor%28var%20i%3Do%2Elength%2D1%3Bi%3E%3D0%3Bi%2D%2D%29%7B%0A%5F18%2Eunshift%28o%5Bi%5D%29%3B%0A%7D%0A%7Delse%7B%0Ares%2Epush%28o%29%3B%0A%7D%0A%7D%0Areturn%20res%3B%0A%7D%2Cextend%3Afunction%28%5F1b%2Cobj%2C%5F1d%29%7B%0Aif%28%21%5F1d%29%7B%0A%5F1d%3D0%3B%0A%7D%0Aif%28obj%29%7B%0Avar%20l%3Dobj%2Elength%3B%0Aif%28typeof%20%28l%29%21%3D%22number%22%29%7B%0Aif%28typeof%20%28MochiKit%2EIter%29%21%3D%22undefined%22%29%7B%0Aobj%3DMochiKit%2EIter%2Elist%28obj%29%3B%0Al%3Dobj%2Elength%3B%0A%7Delse%7B%0Athrow%20new%20TypeError%28%22Argument%20not%20an%20array%2Dlike%20and%20MochiKit%2EIter%20not%20present%22%29%3B%0A%7D%0A%7D%0Aif%28%21%5F1b%29%7B%0A%5F1b%3D%5B%5D%3B%0A%7D%0Afor%28var%20i%3D%5F1d%3Bi%3Cl%3Bi%2B%2B%29%7B%0A%5F1b%2Epush%28obj%5Bi%5D%29%3B%0A%7D%0A%7D%0Areturn%20%5F1b%3B%0A%7D%2Cupdatetree%3Afunction%28%5F20%2Cobj%29%7B%0Aif%28%5F20%3D%3D%3Dnull%7C%7C%5F20%3D%3D%3Dundefined%29%7B%0A%5F20%3D%7B%7D%3B%0A%7D%0Afor%28var%20i%3D1%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20o%3Darguments%5Bi%5D%3B%0Aif%28typeof%20%28o%29%21%3D%22undefined%22%26%26o%21%3D%3Dnull%29%7B%0Afor%28var%20k%20in%20o%29%7B%0Avar%20v%3Do%5Bk%5D%3B%0Aif%28typeof%20%28%5F20%5Bk%5D%29%3D%3D%22object%22%26%26typeof%20%28v%29%3D%3D%22object%22%29%7B%0Aarguments%2Ecallee%28%5F20%5Bk%5D%2Cv%29%3B%0A%7Delse%7B%0A%5F20%5Bk%5D%3Dv%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Areturn%20%5F20%3B%0A%7D%2Csetdefault%3Afunction%28%5F26%2Cobj%29%7B%0Aif%28%5F26%3D%3D%3Dnull%7C%7C%5F26%3D%3D%3Dundefined%29%7B%0A%5F26%3D%7B%7D%3B%0A%7D%0Afor%28var%20i%3D1%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20o%3Darguments%5Bi%5D%3B%0Afor%28var%20k%20in%20o%29%7B%0Aif%28%21%28k%20in%20%5F26%29%29%7B%0A%5F26%5Bk%5D%3Do%5Bk%5D%3B%0A%7D%0A%7D%0A%7D%0Areturn%20%5F26%3B%0A%7D%2Ckeys%3Afunction%28obj%29%7B%0Avar%20%5F2c%3D%5B%5D%3B%0Afor%28var%20%5F2d%20in%20obj%29%7B%0A%5F2c%2Epush%28%5F2d%29%3B%0A%7D%0Areturn%20%5F2c%3B%0A%7D%2Cvalues%3Afunction%28obj%29%7B%0Avar%20%5F2f%3D%5B%5D%3B%0Afor%28var%20%5F30%20in%20obj%29%7B%0A%5F2f%2Epush%28obj%5B%5F30%5D%29%3B%0A%7D%0Areturn%20%5F2f%3B%0A%7D%2Citems%3Afunction%28obj%29%7B%0Avar%20%5F32%3D%5B%5D%3B%0Avar%20e%3B%0Afor%28var%20%5F34%20in%20obj%29%7B%0Avar%20v%3B%0Atry%7B%0Av%3Dobj%5B%5F34%5D%3B%0A%7D%0Acatch%28e%29%7B%0Acontinue%3B%0A%7D%0A%5F32%2Epush%28%5B%5F34%2Cv%5D%29%3B%0A%7D%0Areturn%20%5F32%3B%0A%7D%2C%5FnewNamedError%3Afunction%28%5F36%2C%5F37%2C%5F38%29%7B%0A%5F38%2Eprototype%3Dnew%20MochiKit%2EBase%2ENamedError%28%5F36%2ENAME%2B%22%2E%22%2B%5F37%29%3B%0A%5F36%5B%5F37%5D%3D%5F38%3B%0A%7D%2Coperator%3A%7Btruth%3Afunction%28a%29%7B%0Areturn%20%21%21a%3B%0A%7D%2Clognot%3Afunction%28a%29%7B%0Areturn%20%21a%3B%0A%7D%2Cidentity%3Afunction%28a%29%7B%0Areturn%20a%3B%0A%7D%2Cnot%3Afunction%28a%29%7B%0Areturn%20%7Ea%3B%0A%7D%2Cneg%3Afunction%28a%29%7B%0Areturn%20%2Da%3B%0A%7D%2Cadd%3Afunction%28a%2Cb%29%7B%0Areturn%20a%2Bb%3B%0A%7D%2Csub%3Afunction%28a%2Cb%29%7B%0Areturn%20a%2Db%3B%0A%7D%2Cdiv%3Afunction%28a%2Cb%29%7B%0Areturn%20a%2Fb%3B%0A%7D%2Cmod%3Afunction%28a%2Cb%29%7B%0Areturn%20a%25b%3B%0A%7D%2Cmul%3Afunction%28a%2Cb%29%7B%0Areturn%20a%2Ab%3B%0A%7D%2Cand%3Afunction%28a%2Cb%29%7B%0Areturn%20a%26b%3B%0A%7D%2Cor%3Afunction%28a%2Cb%29%7B%0Areturn%20a%7Cb%3B%0A%7D%2Cxor%3Afunction%28a%2Cb%29%7B%0Areturn%20a%5Eb%3B%0A%7D%2Clshift%3Afunction%28a%2Cb%29%7B%0Areturn%20a%3C%3Cb%3B%0A%7D%2Crshift%3Afunction%28a%2Cb%29%7B%0Areturn%20a%3E%3Eb%3B%0A%7D%2Czrshift%3Afunction%28a%2Cb%29%7B%0Areturn%20a%3E%3E%3Eb%3B%0A%7D%2Ceq%3Afunction%28a%2Cb%29%7B%0Areturn%20a%3D%3Db%3B%0A%7D%2Cne%3Afunction%28a%2Cb%29%7B%0Areturn%20a%21%3Db%3B%0A%7D%2Cgt%3Afunction%28a%2Cb%29%7B%0Areturn%20a%3Eb%3B%0A%7D%2Cge%3Afunction%28a%2Cb%29%7B%0Areturn%20a%3E%3Db%3B%0A%7D%2Clt%3Afunction%28a%2Cb%29%7B%0Areturn%20a%3Cb%3B%0A%7D%2Cle%3Afunction%28a%2Cb%29%7B%0Areturn%20a%3C%3Db%3B%0A%7D%2Cseq%3Afunction%28a%2Cb%29%7B%0Areturn%20a%3D%3D%3Db%3B%0A%7D%2Csne%3Afunction%28a%2Cb%29%7B%0Areturn%20a%21%3D%3Db%3B%0A%7D%2Cceq%3Afunction%28a%2Cb%29%7B%0Areturn%20MochiKit%2EBase%2Ecompare%28a%2Cb%29%3D%3D%3D0%3B%0A%7D%2Ccne%3Afunction%28a%2Cb%29%7B%0Areturn%20MochiKit%2EBase%2Ecompare%28a%2Cb%29%21%3D%3D0%3B%0A%7D%2Ccgt%3Afunction%28a%2Cb%29%7B%0Areturn%20MochiKit%2EBase%2Ecompare%28a%2Cb%29%3D%3D1%3B%0A%7D%2Ccge%3Afunction%28a%2Cb%29%7B%0Areturn%20MochiKit%2EBase%2Ecompare%28a%2Cb%29%21%3D%2D1%3B%0A%7D%2Cclt%3Afunction%28a%2Cb%29%7B%0Areturn%20MochiKit%2EBase%2Ecompare%28a%2Cb%29%3D%3D%2D1%3B%0A%7D%2Ccle%3Afunction%28a%2Cb%29%7B%0Areturn%20MochiKit%2EBase%2Ecompare%28a%2Cb%29%21%3D1%3B%0A%7D%2Clogand%3Afunction%28a%2Cb%29%7B%0Areturn%20a%26%26b%3B%0A%7D%2Clogor%3Afunction%28a%2Cb%29%7B%0Areturn%20a%7C%7Cb%3B%0A%7D%2Ccontains%3Afunction%28a%2Cb%29%7B%0Areturn%20b%20in%20a%3B%0A%7D%7D%2CforwardCall%3Afunction%28%5F76%29%7B%0Areturn%20function%28%29%7B%0Areturn%20this%5B%5F76%5D%2Eapply%28this%2Carguments%29%3B%0A%7D%3B%0A%7D%2Citemgetter%3Afunction%28%5F77%29%7B%0Areturn%20function%28arg%29%7B%0Areturn%20arg%5B%5F77%5D%3B%0A%7D%3B%0A%7D%2CtypeMatcher%3Afunction%28%29%7B%0Avar%20%5F79%3D%7B%7D%3B%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20typ%3Darguments%5Bi%5D%3B%0A%5F79%5Btyp%5D%3Dtyp%3B%0A%7D%0Areturn%20function%28%29%7B%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Aif%28%21%28typeof%20%28arguments%5Bi%5D%29%20in%20%5F79%29%29%7B%0Areturn%20false%3B%0A%7D%0A%7D%0Areturn%20true%3B%0A%7D%3B%0A%7D%2CisNull%3Afunction%28%29%7B%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Aif%28arguments%5Bi%5D%21%3D%3Dnull%29%7B%0Areturn%20false%3B%0A%7D%0A%7D%0Areturn%20true%3B%0A%7D%2CisUndefinedOrNull%3Afunction%28%29%7B%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20o%3Darguments%5Bi%5D%3B%0Aif%28%21%28typeof%20%28o%29%3D%3D%22undefined%22%7C%7Co%3D%3D%3Dnull%29%29%7B%0Areturn%20false%3B%0A%7D%0A%7D%0Areturn%20true%3B%0A%7D%2CisEmpty%3Afunction%28obj%29%7B%0Areturn%20%21MochiKit%2EBase%2EisNotEmpty%2Eapply%28this%2Carguments%29%3B%0A%7D%2CisNotEmpty%3Afunction%28obj%29%7B%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20o%3Darguments%5Bi%5D%3B%0Aif%28%21%28o%26%26o%2Elength%29%29%7B%0Areturn%20false%3B%0A%7D%0A%7D%0Areturn%20true%3B%0A%7D%2CisArrayLike%3Afunction%28%29%7B%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20o%3Darguments%5Bi%5D%3B%0Avar%20typ%3Dtypeof%20%28o%29%3B%0Aif%28%28typ%21%3D%22object%22%26%26%21%28typ%3D%3D%22function%22%26%26typeof%20%28o%2Eitem%29%3D%3D%22function%22%29%29%7C%7Co%3D%3D%3Dnull%7C%7Ctypeof%20%28o%2Elength%29%21%3D%22number%22%7C%7Co%2EnodeType%3D%3D%3D3%7C%7Co%2EnodeType%3D%3D%3D4%29%7B%0Areturn%20false%3B%0A%7D%0A%7D%0Areturn%20true%3B%0A%7D%2CisDateLike%3Afunction%28%29%7B%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20o%3Darguments%5Bi%5D%3B%0Aif%28typeof%20%28o%29%21%3D%22object%22%7C%7Co%3D%3D%3Dnull%7C%7Ctypeof%20%28o%2EgetTime%29%21%3D%22function%22%29%7B%0Areturn%20false%3B%0A%7D%0A%7D%0Areturn%20true%3B%0A%7D%2Cxmap%3Afunction%28fn%29%7B%0Aif%28fn%3D%3D%3Dnull%29%7B%0Areturn%20MochiKit%2EBase%2Eextend%28null%2Carguments%2C1%29%3B%0A%7D%0Avar%20%5F8a%3D%5B%5D%3B%0Afor%28var%20i%3D1%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0A%5F8a%2Epush%28fn%28arguments%5Bi%5D%29%29%3B%0A%7D%0Areturn%20%5F8a%3B%0A%7D%2Cmap%3Afunction%28fn%2Clst%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20itr%3DMochiKit%2EIter%3B%0Avar%20%5F90%3Dm%2EisArrayLike%3B%0Aif%28arguments%2Elength%3C%3D2%29%7B%0Aif%28%21%5F90%28lst%29%29%7B%0Aif%28itr%29%7B%0Alst%3Ditr%2Elist%28lst%29%3B%0Aif%28fn%3D%3D%3Dnull%29%7B%0Areturn%20lst%3B%0A%7D%0A%7Delse%7B%0Athrow%20new%20TypeError%28%22Argument%20not%20an%20array%2Dlike%20and%20MochiKit%2EIter%20not%20present%22%29%3B%0A%7D%0A%7D%0Aif%28fn%3D%3D%3Dnull%29%7B%0Areturn%20m%2Eextend%28null%2Clst%29%3B%0A%7D%0Avar%20%5F91%3D%5B%5D%3B%0Afor%28var%20i%3D0%3Bi%3Clst%2Elength%3Bi%2B%2B%29%7B%0A%5F91%2Epush%28fn%28lst%5Bi%5D%29%29%3B%0A%7D%0Areturn%20%5F91%3B%0A%7Delse%7B%0Aif%28fn%3D%3D%3Dnull%29%7B%0Afn%3DArray%3B%0A%7D%0Avar%20%5F93%3Dnull%3B%0Afor%28i%3D1%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Aif%28%21%5F90%28arguments%5Bi%5D%29%29%7B%0Aif%28itr%29%7B%0Areturn%20itr%2Elist%28itr%2Eimap%2Eapply%28null%2Carguments%29%29%3B%0A%7Delse%7B%0Athrow%20new%20TypeError%28%22Argument%20not%20an%20array%2Dlike%20and%20MochiKit%2EIter%20not%20present%22%29%3B%0A%7D%0A%7D%0Avar%20l%3Darguments%5Bi%5D%2Elength%3B%0Aif%28%5F93%3D%3D%3Dnull%7C%7C%5F93%3El%29%7B%0A%5F93%3Dl%3B%0A%7D%0A%7D%0A%5F91%3D%5B%5D%3B%0Afor%28i%3D0%3Bi%3C%5F93%3Bi%2B%2B%29%7B%0Avar%20%5F95%3D%5B%5D%3B%0Afor%28var%20j%3D1%3Bj%3Carguments%2Elength%3Bj%2B%2B%29%7B%0A%5F95%2Epush%28arguments%5Bj%5D%5Bi%5D%29%3B%0A%7D%0A%5F91%2Epush%28fn%2Eapply%28this%2C%5F95%29%29%3B%0A%7D%0Areturn%20%5F91%3B%0A%7D%0A%7D%2Cxfilter%3Afunction%28fn%29%7B%0Avar%20%5F98%3D%5B%5D%3B%0Aif%28fn%3D%3D%3Dnull%29%7B%0Afn%3DMochiKit%2EBase%2Eoperator%2Etruth%3B%0A%7D%0Afor%28var%20i%3D1%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20o%3Darguments%5Bi%5D%3B%0Aif%28fn%28o%29%29%7B%0A%5F98%2Epush%28o%29%3B%0A%7D%0A%7D%0Areturn%20%5F98%3B%0A%7D%2Cfilter%3Afunction%28fn%2Clst%2C%5F9d%29%7B%0Avar%20%5F9e%3D%5B%5D%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28%21m%2EisArrayLike%28lst%29%29%7B%0Aif%28MochiKit%2EIter%29%7B%0Alst%3DMochiKit%2EIter%2Elist%28lst%29%3B%0A%7Delse%7B%0Athrow%20new%20TypeError%28%22Argument%20not%20an%20array%2Dlike%20and%20MochiKit%2EIter%20not%20present%22%29%3B%0A%7D%0A%7D%0Aif%28fn%3D%3D%3Dnull%29%7B%0Afn%3Dm%2Eoperator%2Etruth%3B%0A%7D%0Aif%28typeof%20%28Array%2Eprototype%2Efilter%29%3D%3D%22function%22%29%7B%0Areturn%20Array%2Eprototype%2Efilter%2Ecall%28lst%2Cfn%2C%5F9d%29%3B%0A%7Delse%7B%0Aif%28typeof%20%28%5F9d%29%3D%3D%22undefined%22%7C%7C%5F9d%3D%3D%3Dnull%29%7B%0Afor%28var%20i%3D0%3Bi%3Clst%2Elength%3Bi%2B%2B%29%7B%0Avar%20o%3Dlst%5Bi%5D%3B%0Aif%28fn%28o%29%29%7B%0A%5F9e%2Epush%28o%29%3B%0A%7D%0A%7D%0A%7Delse%7B%0Afor%28i%3D0%3Bi%3Clst%2Elength%3Bi%2B%2B%29%7B%0Ao%3Dlst%5Bi%5D%3B%0Aif%28fn%2Ecall%28%5F9d%2Co%29%29%7B%0A%5F9e%2Epush%28o%29%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Areturn%20%5F9e%3B%0A%7D%2C%5FwrapDumbFunction%3Afunction%28%5Fa2%29%7B%0Areturn%20function%28%29%7B%0Aswitch%28arguments%2Elength%29%7B%0Acase%200%3A%0Areturn%20%5Fa2%28%29%3B%0Acase%201%3A%0Areturn%20%5Fa2%28arguments%5B0%5D%29%3B%0Acase%202%3A%0Areturn%20%5Fa2%28arguments%5B0%5D%2Carguments%5B1%5D%29%3B%0Acase%203%3A%0Areturn%20%5Fa2%28arguments%5B0%5D%2Carguments%5B1%5D%2Carguments%5B2%5D%29%3B%0A%7D%0Avar%20%5Fa3%3D%5B%5D%3B%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0A%5Fa3%2Epush%28%22arguments%5B%22%2Bi%2B%22%5D%22%29%3B%0A%7D%0Areturn%20eval%28%22%28func%28%22%2B%5Fa3%2Ejoin%28%22%2C%22%29%2B%22%29%29%22%29%3B%0A%7D%3B%0A%7D%2Cmethodcaller%3Afunction%28%5Fa5%29%7B%0Avar%20%5Fa6%3DMochiKit%2EBase%2Eextend%28null%2Carguments%2C1%29%3B%0Aif%28typeof%20%28%5Fa5%29%3D%3D%22function%22%29%7B%0Areturn%20function%28obj%29%7B%0Areturn%20%5Fa5%2Eapply%28obj%2C%5Fa6%29%3B%0A%7D%3B%0A%7Delse%7B%0Areturn%20function%28obj%29%7B%0Areturn%20obj%5B%5Fa5%5D%2Eapply%28obj%2C%5Fa6%29%3B%0A%7D%3B%0A%7D%0A%7D%2Cmethod%3Afunction%28%5Fa9%2C%5Faa%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Areturn%20m%2Ebind%2Eapply%28this%2Cm%2Eextend%28%5B%5Faa%2C%5Fa9%5D%2Carguments%2C2%29%29%3B%0A%7D%2Ccompose%3Afunction%28f1%2Cf2%29%7B%0Avar%20%5Fae%3D%5B%5D%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28arguments%2Elength%3D%3D%3D0%29%7B%0Athrow%20new%20TypeError%28%22compose%28%29%20requires%20at%20least%20one%20argument%22%29%3B%0A%7D%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20fn%3Darguments%5Bi%5D%3B%0Aif%28typeof%20%28fn%29%21%3D%22function%22%29%7B%0Athrow%20new%20TypeError%28m%2Erepr%28fn%29%2B%22%20is%20not%20a%20function%22%29%3B%0A%7D%0A%5Fae%2Epush%28fn%29%3B%0A%7D%0Areturn%20function%28%29%7B%0Avar%20%5Fb2%3Darguments%3B%0Afor%28var%20i%3D%5Fae%2Elength%2D1%3Bi%3E%3D0%3Bi%2D%2D%29%7B%0A%5Fb2%3D%5B%5Fae%5Bi%5D%2Eapply%28this%2C%5Fb2%29%5D%3B%0A%7D%0Areturn%20%5Fb2%5B0%5D%3B%0A%7D%3B%0A%7D%2Cbind%3Afunction%28%5Fb4%2C%5Fb5%29%7B%0Aif%28typeof%20%28%5Fb4%29%3D%3D%22string%22%29%7B%0A%5Fb4%3D%5Fb5%5B%5Fb4%5D%3B%0A%7D%0Avar%20%5Fb6%3D%5Fb4%2Eim%5Ffunc%3B%0Avar%20%5Fb7%3D%5Fb4%2Eim%5Fpreargs%3B%0Avar%20%5Fb8%3D%5Fb4%2Eim%5Fself%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28typeof%20%28%5Fb4%29%3D%3D%22function%22%26%26typeof%20%28%5Fb4%2Eapply%29%3D%3D%22undefined%22%29%7B%0A%5Fb4%3Dm%2E%5FwrapDumbFunction%28%5Fb4%29%3B%0A%7D%0Aif%28typeof%20%28%5Fb6%29%21%3D%22function%22%29%7B%0A%5Fb6%3D%5Fb4%3B%0A%7D%0Aif%28typeof%20%28%5Fb5%29%21%3D%22undefined%22%29%7B%0A%5Fb8%3D%5Fb5%3B%0A%7D%0Aif%28typeof%20%28%5Fb7%29%3D%3D%22undefined%22%29%7B%0A%5Fb7%3D%5B%5D%3B%0A%7Delse%7B%0A%5Fb7%3D%5Fb7%2Eslice%28%29%3B%0A%7D%0Am%2Eextend%28%5Fb7%2Carguments%2C2%29%3B%0Avar%20%5Fba%3Dfunction%28%29%7B%0Avar%20%5Fbb%3Darguments%3B%0Avar%20me%3Darguments%2Ecallee%3B%0Aif%28me%2Eim%5Fpreargs%2Elength%3E0%29%7B%0A%5Fbb%3Dm%2Econcat%28me%2Eim%5Fpreargs%2C%5Fbb%29%3B%0A%7D%0Avar%20%5Fbd%3Dme%2Eim%5Fself%3B%0Aif%28%21%5Fbd%29%7B%0A%5Fbd%3Dthis%3B%0A%7D%0Areturn%20me%2Eim%5Ffunc%2Eapply%28%5Fbd%2C%5Fbb%29%3B%0A%7D%3B%0A%5Fba%2Eim%5Fself%3D%5Fb8%3B%0A%5Fba%2Eim%5Ffunc%3D%5Fb6%3B%0A%5Fba%2Eim%5Fpreargs%3D%5Fb7%3B%0Areturn%20%5Fba%3B%0A%7D%2CbindLate%3Afunction%28%5Fbe%2C%5Fbf%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28typeof%20%28%5Fbe%29%21%3D%22string%22%29%7B%0Areturn%20m%2Ebind%2Eapply%28this%2Carguments%29%3B%0A%7D%0Avar%20%5Fc1%3Dm%2Eextend%28%5B%5D%2Carguments%2C2%29%3B%0Avar%20%5Fc2%3Dfunction%28%29%7B%0Avar%20%5Fc3%3Darguments%3B%0Avar%20me%3Darguments%2Ecallee%3B%0Aif%28me%2Eim%5Fpreargs%2Elength%3E0%29%7B%0A%5Fc3%3Dm%2Econcat%28me%2Eim%5Fpreargs%2C%5Fc3%29%3B%0A%7D%0Avar%20%5Fc5%3Dme%2Eim%5Fself%3B%0Aif%28%21%5Fc5%29%7B%0A%5Fc5%3Dthis%3B%0A%7D%0Areturn%20%5Fc5%5Bme%2Eim%5Ffunc%5D%2Eapply%28%5Fc5%2C%5Fc3%29%3B%0A%7D%3B%0A%5Fc2%2Eim%5Fself%3D%5Fbf%3B%0A%5Fc2%2Eim%5Ffunc%3D%5Fbe%3B%0A%5Fc2%2Eim%5Fpreargs%3D%5Fc1%3B%0Areturn%20%5Fc2%3B%0A%7D%2CbindMethods%3Afunction%28%5Fc6%29%7B%0Avar%20%5Fc7%3DMochiKit%2EBase%2Ebind%3B%0Afor%28var%20k%20in%20%5Fc6%29%7B%0Avar%20%5Fc9%3D%5Fc6%5Bk%5D%3B%0Aif%28typeof%20%28%5Fc9%29%3D%3D%22function%22%29%7B%0A%5Fc6%5Bk%5D%3D%5Fc7%28%5Fc9%2C%5Fc6%29%3B%0A%7D%0A%7D%0A%7D%2CregisterComparator%3Afunction%28%5Fca%2C%5Fcb%2C%5Fcc%2C%5Fcd%29%7B%0AMochiKit%2EBase%2EcomparatorRegistry%2Eregister%28%5Fca%2C%5Fcb%2C%5Fcc%2C%5Fcd%29%3B%0A%7D%2C%5Fprimitives%3A%7B%22boolean%22%3Atrue%2C%22string%22%3Atrue%2C%22number%22%3Atrue%7D%2Ccompare%3Afunction%28a%2Cb%29%7B%0Aif%28a%3D%3Db%29%7B%0Areturn%200%3B%0A%7D%0Avar%20%5Fd0%3D%28typeof%20%28a%29%3D%3D%22undefined%22%7C%7Ca%3D%3D%3Dnull%29%3B%0Avar%20%5Fd1%3D%28typeof%20%28b%29%3D%3D%22undefined%22%7C%7Cb%3D%3D%3Dnull%29%3B%0Aif%28%5Fd0%26%26%5Fd1%29%7B%0Areturn%200%3B%0A%7Delse%7B%0Aif%28%5Fd0%29%7B%0Areturn%20%2D1%3B%0A%7Delse%7B%0Aif%28%5Fd1%29%7B%0Areturn%201%3B%0A%7D%0A%7D%0A%7D%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20%5Fd3%3Dm%2E%5Fprimitives%3B%0Aif%28%21%28typeof%20%28a%29%20in%20%5Fd3%26%26typeof%20%28b%29%20in%20%5Fd3%29%29%7B%0Atry%7B%0Areturn%20m%2EcomparatorRegistry%2Ematch%28a%2Cb%29%3B%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dm%2ENotFound%29%7B%0Athrow%20e%3B%0A%7D%0A%7D%0A%7D%0Aif%28a%3Cb%29%7B%0Areturn%20%2D1%3B%0A%7Delse%7B%0Aif%28a%3Eb%29%7B%0Areturn%201%3B%0A%7D%0A%7D%0Avar%20%5Fd4%3Dm%2Erepr%3B%0Athrow%20new%20TypeError%28%5Fd4%28a%29%2B%22%20and%20%22%2B%5Fd4%28b%29%2B%22%20can%20not%20be%20compared%22%29%3B%0A%7D%2CcompareDateLike%3Afunction%28a%2Cb%29%7B%0Areturn%20MochiKit%2EBase%2Ecompare%28a%2EgetTime%28%29%2Cb%2EgetTime%28%29%29%3B%0A%7D%2CcompareArrayLike%3Afunction%28a%2Cb%29%7B%0Avar%20%5Fd9%3DMochiKit%2EBase%2Ecompare%3B%0Avar%20%5Fda%3Da%2Elength%3B%0Avar%20%5Fdb%3D0%3B%0Aif%28%5Fda%3Eb%2Elength%29%7B%0A%5Fdb%3D1%3B%0A%5Fda%3Db%2Elength%3B%0A%7Delse%7B%0Aif%28%5Fda%3Cb%2Elength%29%7B%0A%5Fdb%3D%2D1%3B%0A%7D%0A%7D%0Afor%28var%20i%3D0%3Bi%3C%5Fda%3Bi%2B%2B%29%7B%0Avar%20cmp%3D%5Fd9%28a%5Bi%5D%2Cb%5Bi%5D%29%3B%0Aif%28cmp%29%7B%0Areturn%20cmp%3B%0A%7D%0A%7D%0Areturn%20%5Fdb%3B%0A%7D%2CregisterRepr%3Afunction%28%5Fde%2C%5Fdf%2C%5Fe0%2C%5Fe1%29%7B%0AMochiKit%2EBase%2EreprRegistry%2Eregister%28%5Fde%2C%5Fdf%2C%5Fe0%2C%5Fe1%29%3B%0A%7D%2Crepr%3Afunction%28o%29%7B%0Aif%28typeof%20%28o%29%3D%3D%22undefined%22%29%7B%0Areturn%20%22undefined%22%3B%0A%7Delse%7B%0Aif%28o%3D%3D%3Dnull%29%7B%0Areturn%20%22null%22%3B%0A%7D%0A%7D%0Atry%7B%0Aif%28typeof%20%28o%2E%5F%5Frepr%5F%5F%29%3D%3D%22function%22%29%7B%0Areturn%20o%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7Delse%7B%0Aif%28typeof%20%28o%2Erepr%29%3D%3D%22function%22%26%26o%2Erepr%21%3Darguments%2Ecallee%29%7B%0Areturn%20o%2Erepr%28%29%3B%0A%7D%0A%7D%0Areturn%20MochiKit%2EBase%2EreprRegistry%2Ematch%28o%29%3B%0A%7D%0Acatch%28e%29%7B%0Aif%28typeof%20%28o%2ENAME%29%3D%3D%22string%22%26%26%28o%2EtoString%3D%3DFunction%2Eprototype%2EtoString%7C%7Co%2EtoString%3D%3DObject%2Eprototype%2EtoString%29%29%7B%0Areturn%20o%2ENAME%3B%0A%7D%0A%7D%0Atry%7B%0Avar%20%5Fe3%3D%28o%2B%22%22%29%3B%0A%7D%0Acatch%28e%29%7B%0Areturn%20%22%5B%22%2Btypeof%20%28o%29%2B%22%5D%22%3B%0A%7D%0Aif%28typeof%20%28o%29%3D%3D%22function%22%29%7B%0A%5Fe3%3D%5Fe3%2Ereplace%28%2F%5E%5Cs%2B%2F%2C%22%22%29%2Ereplace%28%2F%5Cs%2B%2Fg%2C%22%20%22%29%3B%0A%5Fe3%3D%5Fe3%2Ereplace%28%2F%2C%28%5CS%29%2F%2C%22%2C%20%241%22%29%3B%0Avar%20idx%3D%5Fe3%2EindexOf%28%22%7B%22%29%3B%0Aif%28idx%21%3D%2D1%29%7B%0A%5Fe3%3D%5Fe3%2Esubstr%280%2Cidx%29%2B%22%7B%2E%2E%2E%7D%22%3B%0A%7D%0A%7D%0Areturn%20%5Fe3%3B%0A%7D%2CreprArrayLike%3Afunction%28o%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Areturn%20%22%5B%22%2Bm%2Emap%28m%2Erepr%2Co%29%2Ejoin%28%22%2C%20%22%29%2B%22%5D%22%3B%0A%7D%2CreprString%3Afunction%28o%29%7B%0Areturn%20%28%22%5C%22%22%2Bo%2Ereplace%28%2F%28%5B%22%5C%5C%5D%29%2Fg%2C%22%5C%5C%241%22%29%2B%22%5C%22%22%29%2Ereplace%28%2F%5B%5Cf%5D%2Fg%2C%22%5C%5Cf%22%29%2Ereplace%28%2F%5B%5Cb%5D%2Fg%2C%22%5C%5Cb%22%29%2Ereplace%28%2F%5B%5Cn%5D%2Fg%2C%22%5C%5Cn%22%29%2Ereplace%28%2F%5B%5Ct%5D%2Fg%2C%22%5C%5Ct%22%29%2Ereplace%28%2F%5B%5Cv%5D%2Fg%2C%22%5C%5Cv%22%29%2Ereplace%28%2F%5B%5Cr%5D%2Fg%2C%22%5C%5Cr%22%29%3B%0A%7D%2CreprNumber%3Afunction%28o%29%7B%0Areturn%20o%2B%22%22%3B%0A%7D%2CregisterJSON%3Afunction%28%5Fe9%2C%5Fea%2C%5Feb%2C%5Fec%29%7B%0AMochiKit%2EBase%2EjsonRegistry%2Eregister%28%5Fe9%2C%5Fea%2C%5Feb%2C%5Fec%29%3B%0A%7D%2CevalJSON%3Afunction%28%29%7B%0Areturn%20eval%28%22%28%22%2BMochiKit%2EBase%2E%5FfilterJSON%28arguments%5B0%5D%29%2B%22%29%22%29%3B%0A%7D%2C%5FfilterJSON%3Afunction%28s%29%7B%0Avar%20m%3Ds%2Ematch%28%2F%5E%5Cs%2A%5C%2F%5C%2A%28%2E%2A%29%5C%2A%5C%2F%5Cs%2A%24%2F%29%3B%0Aif%28m%29%7B%0Areturn%20m%5B1%5D%3B%0A%7D%0Areturn%20s%3B%0A%7D%2CserializeJSON%3Afunction%28o%29%7B%0Avar%20%5Ff0%3Dtypeof%20%28o%29%3B%0Aif%28%5Ff0%3D%3D%22number%22%7C%7C%5Ff0%3D%3D%22boolean%22%29%7B%0Areturn%20o%2B%22%22%3B%0A%7Delse%7B%0Aif%28o%3D%3D%3Dnull%29%7B%0Areturn%20%22null%22%3B%0A%7Delse%7B%0Aif%28%5Ff0%3D%3D%22string%22%29%7B%0Avar%20res%3D%22%22%3B%0Afor%28var%20i%3D0%3Bi%3Co%2Elength%3Bi%2B%2B%29%7B%0Avar%20c%3Do%2EcharAt%28i%29%3B%0Aif%28c%3D%3D%22%5C%22%22%29%7B%0Ares%2B%3D%22%5C%5C%5C%22%22%3B%0A%7Delse%7B%0Aif%28c%3D%3D%22%5C%5C%22%29%7B%0Ares%2B%3D%22%5C%5C%5C%5C%22%3B%0A%7Delse%7B%0Aif%28c%3D%3D%22%5Cb%22%29%7B%0Ares%2B%3D%22%5C%5Cb%22%3B%0A%7Delse%7B%0Aif%28c%3D%3D%22%5Cf%22%29%7B%0Ares%2B%3D%22%5C%5Cf%22%3B%0A%7Delse%7B%0Aif%28c%3D%3D%22%5Cn%22%29%7B%0Ares%2B%3D%22%5C%5Cn%22%3B%0A%7Delse%7B%0Aif%28c%3D%3D%22%5Cr%22%29%7B%0Ares%2B%3D%22%5C%5Cr%22%3B%0A%7Delse%7B%0Aif%28c%3D%3D%22%5Ct%22%29%7B%0Ares%2B%3D%22%5C%5Ct%22%3B%0A%7Delse%7B%0Aif%28o%2EcharCodeAt%28i%29%3C%3D31%29%7B%0Avar%20hex%3Do%2EcharCodeAt%28i%29%2EtoString%2816%29%3B%0Aif%28hex%2Elength%3C2%29%7B%0Ahex%3D%220%22%2Bhex%3B%0A%7D%0Ares%2B%3D%22%5C%5Cu00%22%2Bhex%2EtoUpperCase%28%29%3B%0A%7Delse%7B%0Ares%2B%3Dc%3B%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%0Areturn%20%22%5C%22%22%2Bres%2B%22%5C%22%22%3B%0A%7D%0A%7D%0A%7D%0Avar%20me%3Darguments%2Ecallee%3B%0Avar%20%5Ff6%3B%0Aif%28typeof%20%28o%2E%5F%5Fjson%5F%5F%29%3D%3D%22function%22%29%7B%0A%5Ff6%3Do%2E%5F%5Fjson%5F%5F%28%29%3B%0Aif%28o%21%3D%3D%5Ff6%29%7B%0Areturn%20me%28%5Ff6%29%3B%0A%7D%0A%7D%0Aif%28typeof%20%28o%2Ejson%29%3D%3D%22function%22%29%7B%0A%5Ff6%3Do%2Ejson%28%29%3B%0Aif%28o%21%3D%3D%5Ff6%29%7B%0Areturn%20me%28%5Ff6%29%3B%0A%7D%0A%7D%0Aif%28%5Ff0%21%3D%22function%22%26%26typeof%20%28o%2Elength%29%3D%3D%22number%22%29%7B%0Avar%20res%3D%5B%5D%3B%0Afor%28var%20i%3D0%3Bi%3Co%2Elength%3Bi%2B%2B%29%7B%0Avar%20val%3Dme%28o%5Bi%5D%29%3B%0Aif%28typeof%20%28val%29%21%3D%22string%22%29%7B%0Acontinue%3B%0A%7D%0Ares%2Epush%28val%29%3B%0A%7D%0Areturn%20%22%5B%22%2Bres%2Ejoin%28%22%2C%20%22%29%2B%22%5D%22%3B%0A%7D%0Avar%20m%3DMochiKit%2EBase%3B%0Atry%7B%0A%5Ff6%3Dm%2EjsonRegistry%2Ematch%28o%29%3B%0Aif%28o%21%3D%3D%5Ff6%29%7B%0Areturn%20me%28%5Ff6%29%3B%0A%7D%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dm%2ENotFound%29%7B%0Athrow%20e%3B%0A%7D%0A%7D%0Aif%28%5Ff0%3D%3D%22undefined%22%29%7B%0Athrow%20new%20TypeError%28%22undefined%20can%20not%20be%20serialized%20as%20JSON%22%29%3B%0A%7D%0Aif%28%5Ff0%3D%3D%22function%22%29%7B%0Areturn%20null%3B%0A%7D%0Ares%3D%5B%5D%3B%0Afor%28var%20k%20in%20o%29%7B%0Avar%20%5Ffa%3B%0Aif%28typeof%20%28k%29%3D%3D%22number%22%29%7B%0A%5Ffa%3D%22%5C%22%22%2Bk%2B%22%5C%22%22%3B%0A%7Delse%7B%0Aif%28typeof%20%28k%29%3D%3D%22string%22%29%7B%0A%5Ffa%3Dme%28k%29%3B%0A%7Delse%7B%0Acontinue%3B%0A%7D%0A%7D%0Aval%3Dme%28o%5Bk%5D%29%3B%0Aif%28typeof%20%28val%29%21%3D%22string%22%29%7B%0Acontinue%3B%0A%7D%0Ares%2Epush%28%5Ffa%2B%22%3A%22%2Bval%29%3B%0A%7D%0Areturn%20%22%7B%22%2Bres%2Ejoin%28%22%2C%20%22%29%2B%22%7D%22%3B%0A%7D%2CobjEqual%3Afunction%28a%2Cb%29%7B%0Areturn%20%28MochiKit%2EBase%2Ecompare%28a%2Cb%29%3D%3D%3D0%29%3B%0A%7D%2CarrayEqual%3Afunction%28%5Ffd%2Carr%29%7B%0Aif%28%5Ffd%2Elength%21%3Darr%2Elength%29%7B%0Areturn%20false%3B%0A%7D%0Areturn%20%28MochiKit%2EBase%2Ecompare%28%5Ffd%2Carr%29%3D%3D%3D0%29%3B%0A%7D%2Cconcat%3Afunction%28%29%7B%0Avar%20%5Fff%3D%5B%5D%3B%0Avar%20%5F100%3DMochiKit%2EBase%2Eextend%3B%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0A%5F100%28%5Fff%2Carguments%5Bi%5D%29%3B%0A%7D%0Areturn%20%5Fff%3B%0A%7D%2CkeyComparator%3Afunction%28key%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20%5F104%3Dm%2Ecompare%3B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Areturn%20function%28a%2Cb%29%7B%0Areturn%20%5F104%28a%5Bkey%5D%2Cb%5Bkey%5D%29%3B%0A%7D%3B%0A%7D%0Avar%20%5F107%3Dm%2Eextend%28null%2Carguments%29%3B%0Areturn%20function%28a%2Cb%29%7B%0Avar%20rval%3D0%3B%0Afor%28var%20i%3D0%3B%28rval%3D%3D%3D0%29%26%26%28i%3C%5F107%2Elength%29%3Bi%2B%2B%29%7B%0Avar%20key%3D%5F107%5Bi%5D%3B%0Arval%3D%5F104%28a%5Bkey%5D%2Cb%5Bkey%5D%29%3B%0A%7D%0Areturn%20rval%3B%0A%7D%3B%0A%7D%2CreverseKeyComparator%3Afunction%28key%29%7B%0Avar%20%5F10e%3DMochiKit%2EBase%2EkeyComparator%2Eapply%28this%2Carguments%29%3B%0Areturn%20function%28a%2Cb%29%7B%0Areturn%20%5F10e%28b%2Ca%29%3B%0A%7D%3B%0A%7D%2Cpartial%3Afunction%28func%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Areturn%20m%2Ebind%2Eapply%28this%2Cm%2Eextend%28%5Bfunc%2Cundefined%5D%2Carguments%2C1%29%29%3B%0A%7D%2ClistMinMax%3Afunction%28%5F113%2Clst%29%7B%0Aif%28lst%2Elength%3D%3D%3D0%29%7B%0Areturn%20null%3B%0A%7D%0Avar%20cur%3Dlst%5B0%5D%3B%0Avar%20%5F116%3DMochiKit%2EBase%2Ecompare%3B%0Afor%28var%20i%3D1%3Bi%3Clst%2Elength%3Bi%2B%2B%29%7B%0Avar%20o%3Dlst%5Bi%5D%3B%0Aif%28%5F116%28o%2Ccur%29%3D%3D%5F113%29%7B%0Acur%3Do%3B%0A%7D%0A%7D%0Areturn%20cur%3B%0A%7D%2CobjMax%3Afunction%28%29%7B%0Areturn%20MochiKit%2EBase%2ElistMinMax%281%2Carguments%29%3B%0A%7D%2CobjMin%3Afunction%28%29%7B%0Areturn%20MochiKit%2EBase%2ElistMinMax%28%2D1%2Carguments%29%3B%0A%7D%2CfindIdentical%3Afunction%28lst%2C%5F11a%2C%5F11b%2Cend%29%7B%0Aif%28typeof%20%28end%29%3D%3D%22undefined%22%7C%7Cend%3D%3D%3Dnull%29%7B%0Aend%3Dlst%2Elength%3B%0A%7D%0Aif%28typeof%20%28%5F11b%29%3D%3D%22undefined%22%7C%7C%5F11b%3D%3D%3Dnull%29%7B%0A%5F11b%3D0%3B%0A%7D%0Afor%28var%20i%3D%5F11b%3Bi%3Cend%3Bi%2B%2B%29%7B%0Aif%28lst%5Bi%5D%3D%3D%3D%5F11a%29%7B%0Areturn%20i%3B%0A%7D%0A%7D%0Areturn%20%2D1%3B%0A%7D%2Cmean%3Afunction%28%29%7B%0Avar%20sum%3D0%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20args%3Dm%2Eextend%28null%2Carguments%29%3B%0Avar%20%5F121%3Dargs%2Elength%3B%0Awhile%28args%2Elength%29%7B%0Avar%20o%3Dargs%2Eshift%28%29%3B%0Aif%28o%26%26typeof%20%28o%29%3D%3D%22object%22%26%26typeof%20%28o%2Elength%29%3D%3D%22number%22%29%7B%0A%5F121%2B%3Do%2Elength%2D1%3B%0Afor%28var%20i%3Do%2Elength%2D1%3Bi%3E%3D0%3Bi%2D%2D%29%7B%0Asum%2B%3Do%5Bi%5D%3B%0A%7D%0A%7Delse%7B%0Asum%2B%3Do%3B%0A%7D%0A%7D%0Aif%28%5F121%3C%3D0%29%7B%0Athrow%20new%20TypeError%28%22mean%28%29%20requires%20at%20least%20one%20argument%22%29%3B%0A%7D%0Areturn%20sum%2F%5F121%3B%0A%7D%2Cmedian%3Afunction%28%29%7B%0Avar%20data%3DMochiKit%2EBase%2EflattenArguments%28arguments%29%3B%0Aif%28data%2Elength%3D%3D%3D0%29%7B%0Athrow%20new%20TypeError%28%22median%28%29%20requires%20at%20least%20one%20argument%22%29%3B%0A%7D%0Adata%2Esort%28compare%29%3B%0Aif%28data%2Elength%252%3D%3D0%29%7B%0Avar%20%5F125%3Ddata%2Elength%2F2%3B%0Areturn%20%28data%5B%5F125%5D%2Bdata%5B%5F125%2D1%5D%29%2F2%3B%0A%7Delse%7B%0Areturn%20data%5B%28data%2Elength%2D1%29%2F2%5D%3B%0A%7D%0A%7D%2CfindValue%3Afunction%28lst%2C%5F127%2C%5F128%2Cend%29%7B%0Aif%28typeof%20%28end%29%3D%3D%22undefined%22%7C%7Cend%3D%3D%3Dnull%29%7B%0Aend%3Dlst%2Elength%3B%0A%7D%0Aif%28typeof%20%28%5F128%29%3D%3D%22undefined%22%7C%7C%5F128%3D%3D%3Dnull%29%7B%0A%5F128%3D0%3B%0A%7D%0Avar%20cmp%3DMochiKit%2EBase%2Ecompare%3B%0Afor%28var%20i%3D%5F128%3Bi%3Cend%3Bi%2B%2B%29%7B%0Aif%28cmp%28lst%5Bi%5D%2C%5F127%29%3D%3D%3D0%29%7B%0Areturn%20i%3B%0A%7D%0A%7D%0Areturn%20%2D1%3B%0A%7D%2CnodeWalk%3Afunction%28node%2C%5F12d%29%7B%0Avar%20%5F12e%3D%5Bnode%5D%3B%0Avar%20%5F12f%3DMochiKit%2EBase%2Eextend%3B%0Awhile%28%5F12e%2Elength%29%7B%0Avar%20res%3D%5F12d%28%5F12e%2Eshift%28%29%29%3B%0Aif%28res%29%7B%0A%5F12f%28%5F12e%2Cres%29%3B%0A%7D%0A%7D%0A%7D%2CnameFunctions%3Afunction%28%5F131%29%7B%0Avar%20base%3D%5F131%2ENAME%3B%0Aif%28typeof%20%28base%29%3D%3D%22undefined%22%29%7B%0Abase%3D%22%22%3B%0A%7Delse%7B%0Abase%3Dbase%2B%22%2E%22%3B%0A%7D%0Afor%28var%20name%20in%20%5F131%29%7B%0Avar%20o%3D%5F131%5Bname%5D%3B%0Aif%28typeof%20%28o%29%3D%3D%22function%22%26%26typeof%20%28o%2ENAME%29%3D%3D%22undefined%22%29%7B%0Atry%7B%0Ao%2ENAME%3Dbase%2Bname%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0A%7D%0A%7D%0A%7D%2CqueryString%3Afunction%28%5F135%2C%5F136%29%7B%0Aif%28typeof%20%28MochiKit%2EDOM%29%21%3D%22undefined%22%26%26arguments%2Elength%3D%3D1%26%26%28typeof%20%28%5F135%29%3D%3D%22string%22%7C%7C%28typeof%20%28%5F135%2EnodeType%29%21%3D%22undefined%22%26%26%5F135%2EnodeType%3E0%29%29%29%7B%0Avar%20kv%3DMochiKit%2EDOM%2EformContents%28%5F135%29%3B%0A%5F135%3Dkv%5B0%5D%3B%0A%5F136%3Dkv%5B1%5D%3B%0A%7Delse%7B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Aif%28typeof%20%28%5F135%2Elength%29%3D%3D%22number%22%26%26%5F135%2Elength%3D%3D2%29%7B%0Areturn%20arguments%2Ecallee%28%5F135%5B0%5D%2C%5F135%5B1%5D%29%3B%0A%7D%0Avar%20o%3D%5F135%3B%0A%5F135%3D%5B%5D%3B%0A%5F136%3D%5B%5D%3B%0Afor%28var%20k%20in%20o%29%7B%0Avar%20v%3Do%5Bk%5D%3B%0Aif%28typeof%20%28v%29%3D%3D%22function%22%29%7B%0Acontinue%3B%0A%7Delse%7B%0Aif%28MochiKit%2EBase%2EisArrayLike%28v%29%29%7B%0Afor%28var%20i%3D0%3Bi%3Cv%2Elength%3Bi%2B%2B%29%7B%0A%5F135%2Epush%28k%29%3B%0A%5F136%2Epush%28v%5Bi%5D%29%3B%0A%7D%0A%7Delse%7B%0A%5F135%2Epush%28k%29%3B%0A%5F136%2Epush%28v%29%3B%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%0Avar%20rval%3D%5B%5D%3B%0Avar%20len%3DMath%2Emin%28%5F135%2Elength%2C%5F136%2Elength%29%3B%0Avar%20%5F13e%3DMochiKit%2EBase%2EurlEncode%3B%0Afor%28var%20i%3D0%3Bi%3Clen%3Bi%2B%2B%29%7B%0Av%3D%5F136%5Bi%5D%3B%0Aif%28typeof%20%28v%29%21%3D%22undefined%22%26%26v%21%3D%3Dnull%29%7B%0Arval%2Epush%28%5F13e%28%5F135%5Bi%5D%29%2B%22%3D%22%2B%5F13e%28v%29%29%3B%0A%7D%0A%7D%0Areturn%20rval%2Ejoin%28%22%26%22%29%3B%0A%7D%2CparseQueryString%3Afunction%28%5F13f%2C%5F140%29%7B%0Avar%20qstr%3D%28%5F13f%2EcharAt%280%29%3D%3D%22%3F%22%29%3F%5F13f%2Esubstring%281%29%3A%5F13f%3B%0Avar%20%5F142%3Dqstr%2Ereplace%28%2F%5C%2B%2Fg%2C%22%2520%22%29%2Esplit%28%2F%5C%26amp%5C%3B%7C%5C%26%5C%2338%5C%3B%7C%5C%26%23x26%3B%7C%5C%26%2F%29%3B%0Avar%20o%3D%7B%7D%3B%0Avar%20%5F144%3B%0Aif%28typeof%20%28decodeURIComponent%29%21%3D%22undefined%22%29%7B%0A%5F144%3DdecodeURIComponent%3B%0A%7Delse%7B%0A%5F144%3Dunescape%3B%0A%7D%0Aif%28%5F140%29%7B%0Afor%28var%20i%3D0%3Bi%3C%5F142%2Elength%3Bi%2B%2B%29%7B%0Avar%20pair%3D%5F142%5Bi%5D%2Esplit%28%22%3D%22%29%3B%0Avar%20name%3D%5F144%28pair%2Eshift%28%29%29%3B%0Aif%28%21name%29%7B%0Acontinue%3B%0A%7D%0Avar%20arr%3Do%5Bname%5D%3B%0Aif%28%21%28arr%20instanceof%20Array%29%29%7B%0Aarr%3D%5B%5D%3B%0Ao%5Bname%5D%3Darr%3B%0A%7D%0Aarr%2Epush%28%5F144%28pair%2Ejoin%28%22%3D%22%29%29%29%3B%0A%7D%0A%7Delse%7B%0Afor%28i%3D0%3Bi%3C%5F142%2Elength%3Bi%2B%2B%29%7B%0Apair%3D%5F142%5Bi%5D%2Esplit%28%22%3D%22%29%3B%0Avar%20name%3Dpair%2Eshift%28%29%3B%0Aif%28%21name%29%7B%0Acontinue%3B%0A%7D%0Ao%5B%5F144%28name%29%5D%3D%5F144%28pair%2Ejoin%28%22%3D%22%29%29%3B%0A%7D%0A%7D%0Areturn%20o%3B%0A%7D%7D%29%3B%0AMochiKit%2EBase%2EAdapterRegistry%3Dfunction%28%29%7B%0Athis%2Epairs%3D%5B%5D%3B%0A%7D%3B%0AMochiKit%2EBase%2EAdapterRegistry%2Eprototype%3D%7Bregister%3Afunction%28name%2C%5F14a%2Cwrap%2C%5F14c%29%7B%0Aif%28%5F14c%29%7B%0Athis%2Epairs%2Eunshift%28%5Bname%2C%5F14a%2Cwrap%5D%29%3B%0A%7Delse%7B%0Athis%2Epairs%2Epush%28%5Bname%2C%5F14a%2Cwrap%5D%29%3B%0A%7D%0A%7D%2Cmatch%3Afunction%28%29%7B%0Afor%28var%20i%3D0%3Bi%3Cthis%2Epairs%2Elength%3Bi%2B%2B%29%7B%0Avar%20pair%3Dthis%2Epairs%5Bi%5D%3B%0Aif%28pair%5B1%5D%2Eapply%28this%2Carguments%29%29%7B%0Areturn%20pair%5B2%5D%2Eapply%28this%2Carguments%29%3B%0A%7D%0A%7D%0Athrow%20MochiKit%2EBase%2ENotFound%3B%0A%7D%2Cunregister%3Afunction%28name%29%7B%0Afor%28var%20i%3D0%3Bi%3Cthis%2Epairs%2Elength%3Bi%2B%2B%29%7B%0Avar%20pair%3Dthis%2Epairs%5Bi%5D%3B%0Aif%28pair%5B0%5D%3D%3Dname%29%7B%0Athis%2Epairs%2Esplice%28i%2C1%29%3B%0Areturn%20true%3B%0A%7D%0A%7D%0Areturn%20false%3B%0A%7D%7D%3B%0AMochiKit%2EBase%2EEXPORT%3D%5B%22flattenArray%22%2C%22noop%22%2C%22camelize%22%2C%22counter%22%2C%22clone%22%2C%22extend%22%2C%22update%22%2C%22updatetree%22%2C%22setdefault%22%2C%22keys%22%2C%22values%22%2C%22items%22%2C%22NamedError%22%2C%22operator%22%2C%22forwardCall%22%2C%22itemgetter%22%2C%22typeMatcher%22%2C%22isCallable%22%2C%22isUndefined%22%2C%22isUndefinedOrNull%22%2C%22isNull%22%2C%22isEmpty%22%2C%22isNotEmpty%22%2C%22isArrayLike%22%2C%22isDateLike%22%2C%22xmap%22%2C%22map%22%2C%22xfilter%22%2C%22filter%22%2C%22methodcaller%22%2C%22compose%22%2C%22bind%22%2C%22bindLate%22%2C%22bindMethods%22%2C%22NotFound%22%2C%22AdapterRegistry%22%2C%22registerComparator%22%2C%22compare%22%2C%22registerRepr%22%2C%22repr%22%2C%22objEqual%22%2C%22arrayEqual%22%2C%22concat%22%2C%22keyComparator%22%2C%22reverseKeyComparator%22%2C%22partial%22%2C%22merge%22%2C%22listMinMax%22%2C%22listMax%22%2C%22listMin%22%2C%22objMax%22%2C%22objMin%22%2C%22nodeWalk%22%2C%22zip%22%2C%22urlEncode%22%2C%22queryString%22%2C%22serializeJSON%22%2C%22registerJSON%22%2C%22evalJSON%22%2C%22parseQueryString%22%2C%22findValue%22%2C%22findIdentical%22%2C%22flattenArguments%22%2C%22method%22%2C%22average%22%2C%22mean%22%2C%22median%22%5D%3B%0AMochiKit%2EBase%2EEXPORT%5FOK%3D%5B%22nameFunctions%22%2C%22comparatorRegistry%22%2C%22reprRegistry%22%2C%22jsonRegistry%22%2C%22compareDateLike%22%2C%22compareArrayLike%22%2C%22reprArrayLike%22%2C%22reprString%22%2C%22reprNumber%22%5D%3B%0AMochiKit%2EBase%2E%5FexportSymbols%3Dfunction%28%5F152%2C%5F153%29%7B%0Aif%28%21MochiKit%2E%5F%5Fexport%5F%5F%29%7B%0Areturn%3B%0A%7D%0Avar%20all%3D%5F153%2EEXPORT%5FTAGS%5B%22%3Aall%22%5D%3B%0Afor%28var%20i%3D0%3Bi%3Call%2Elength%3Bi%2B%2B%29%7B%0A%5F152%5Ball%5Bi%5D%5D%3D%5F153%5Ball%5Bi%5D%5D%3B%0A%7D%0A%7D%3B%0AMochiKit%2EBase%2E%5F%5Fnew%5F%5F%3Dfunction%28%29%7B%0Avar%20m%3Dthis%3B%0Am%2Enoop%3Dm%2Eoperator%2Eidentity%3B%0Am%2Eforward%3Dm%2EforwardCall%3B%0Am%2Efind%3Dm%2EfindValue%3B%0Aif%28typeof%20%28encodeURIComponent%29%21%3D%22undefined%22%29%7B%0Am%2EurlEncode%3Dfunction%28%5F157%29%7B%0Areturn%20encodeURIComponent%28%5F157%29%2Ereplace%28%2F%5C%27%2Fg%2C%22%2527%22%29%3B%0A%7D%3B%0A%7Delse%7B%0Am%2EurlEncode%3Dfunction%28%5F158%29%7B%0Areturn%20escape%28%5F158%29%2Ereplace%28%2F%5C%2B%2Fg%2C%22%252B%22%29%2Ereplace%28%2F%5C%22%2Fg%2C%22%2522%22%29%2Erval%2Ereplace%28%2F%5C%27%2Fg%2C%22%2527%22%29%3B%0A%7D%3B%0A%7D%0Am%2ENamedError%3Dfunction%28name%29%7B%0Athis%2Emessage%3Dname%3B%0Athis%2Ename%3Dname%3B%0A%7D%3B%0Am%2ENamedError%2Eprototype%3Dnew%20Error%28%29%3B%0Am%2Eupdate%28m%2ENamedError%2Eprototype%2C%7Brepr%3Afunction%28%29%7B%0Aif%28this%2Emessage%26%26this%2Emessage%21%3Dthis%2Ename%29%7B%0Areturn%20this%2Ename%2B%22%28%22%2Bm%2Erepr%28this%2Emessage%29%2B%22%29%22%3B%0A%7Delse%7B%0Areturn%20this%2Ename%2B%22%28%29%22%3B%0A%7D%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%7D%29%3B%0Am%2ENotFound%3Dnew%20m%2ENamedError%28%22MochiKit%2EBase%2ENotFound%22%29%3B%0Am%2ElistMax%3Dm%2Epartial%28m%2ElistMinMax%2C1%29%3B%0Am%2ElistMin%3Dm%2Epartial%28m%2ElistMinMax%2C%2D1%29%3B%0Am%2EisCallable%3Dm%2EtypeMatcher%28%22function%22%29%3B%0Am%2EisUndefined%3Dm%2EtypeMatcher%28%22undefined%22%29%3B%0Am%2Emerge%3Dm%2Epartial%28m%2Eupdate%2Cnull%29%3B%0Am%2Ezip%3Dm%2Epartial%28m%2Emap%2Cnull%29%3B%0Am%2Eaverage%3Dm%2Emean%3B%0Am%2EcomparatorRegistry%3Dnew%20m%2EAdapterRegistry%28%29%3B%0Am%2EregisterComparator%28%22dateLike%22%2Cm%2EisDateLike%2Cm%2EcompareDateLike%29%3B%0Am%2EregisterComparator%28%22arrayLike%22%2Cm%2EisArrayLike%2Cm%2EcompareArrayLike%29%3B%0Am%2EreprRegistry%3Dnew%20m%2EAdapterRegistry%28%29%3B%0Am%2EregisterRepr%28%22arrayLike%22%2Cm%2EisArrayLike%2Cm%2EreprArrayLike%29%3B%0Am%2EregisterRepr%28%22string%22%2Cm%2EtypeMatcher%28%22string%22%29%2Cm%2EreprString%29%3B%0Am%2EregisterRepr%28%22numbers%22%2Cm%2EtypeMatcher%28%22number%22%2C%22boolean%22%29%2Cm%2EreprNumber%29%3B%0Am%2EjsonRegistry%3Dnew%20m%2EAdapterRegistry%28%29%3B%0Avar%20all%3Dm%2Econcat%28m%2EEXPORT%2Cm%2EEXPORT%5FOK%29%3B%0Am%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Am%2Econcat%28m%2EEXPORT%5FOK%29%2C%22%3Aall%22%3Aall%7D%3B%0Am%2EnameFunctions%28this%29%3B%0A%7D%3B%0AMochiKit%2EBase%2E%5F%5Fnew%5F%5F%28%29%3B%0Aif%28MochiKit%2E%5F%5Fexport%5F%5F%29%7B%0Acompare%3DMochiKit%2EBase%2Ecompare%3B%0Acompose%3DMochiKit%2EBase%2Ecompose%3B%0AserializeJSON%3DMochiKit%2EBase%2EserializeJSON%3B%0Amean%3DMochiKit%2EBase%2Emean%3B%0Amedian%3DMochiKit%2EBase%2Emedian%3B%0A%7D%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2EBase%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22Iter%22%2C%5B%22Base%22%5D%29%3B%0AMochiKit%2EIter%2ENAME%3D%22MochiKit%2EIter%22%3B%0AMochiKit%2EIter%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EIter%2C%7B%5F%5Frepr%5F%5F%3Afunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%2CtoString%3Afunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%2CregisterIteratorFactory%3Afunction%28name%2C%5F15c%2C%5F15d%2C%5F15e%29%7B%0AMochiKit%2EIter%2EiteratorRegistry%2Eregister%28name%2C%5F15c%2C%5F15d%2C%5F15e%29%3B%0A%7D%2CisIterable%3Afunction%28o%29%7B%0Areturn%20o%21%3Dnull%26%26%28typeof%20%28o%2Enext%29%3D%3D%22function%22%7C%7Ctypeof%20%28o%2Eiter%29%3D%3D%22function%22%29%3B%0A%7D%2Citer%3Afunction%28%5F160%2C%5F161%29%7B%0Avar%20self%3DMochiKit%2EIter%3B%0Aif%28arguments%2Elength%3D%3D2%29%7B%0Areturn%20self%2Etakewhile%28function%28a%29%7B%0Areturn%20a%21%3D%5F161%3B%0A%7D%2C%5F160%29%3B%0A%7D%0Aif%28typeof%20%28%5F160%2Enext%29%3D%3D%22function%22%29%7B%0Areturn%20%5F160%3B%0A%7Delse%7B%0Aif%28typeof%20%28%5F160%2Eiter%29%3D%3D%22function%22%29%7B%0Areturn%20%5F160%2Eiter%28%29%3B%0A%7D%0A%7D%0Atry%7B%0Areturn%20self%2EiteratorRegistry%2Ematch%28%5F160%29%3B%0A%7D%0Acatch%28e%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28e%3D%3Dm%2ENotFound%29%7B%0Ae%3Dnew%20TypeError%28typeof%20%28%5F160%29%2B%22%3A%20%22%2Bm%2Erepr%28%5F160%29%2B%22%20is%20not%20iterable%22%29%3B%0A%7D%0Athrow%20e%3B%0A%7D%0A%7D%2Ccount%3Afunction%28n%29%7B%0Aif%28%21n%29%7B%0An%3D0%3B%0A%7D%0Avar%20m%3DMochiKit%2EBase%3B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22count%28%22%2Bn%2B%22%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Am%2Ecounter%28n%29%7D%3B%0A%7D%2Ccycle%3Afunction%28p%29%7B%0Avar%20self%3DMochiKit%2EIter%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20lst%3D%5B%5D%3B%0Avar%20%5F16b%3Dself%2Eiter%28p%29%3B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22cycle%28%2E%2E%2E%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Atry%7B%0Avar%20rval%3D%5F16b%2Enext%28%29%3B%0Alst%2Epush%28rval%29%3B%0Areturn%20rval%3B%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dself%2EStopIteration%29%7B%0Athrow%20e%3B%0A%7D%0Aif%28lst%2Elength%3D%3D%3D0%29%7B%0Athis%2Enext%3Dfunction%28%29%7B%0Athrow%20self%2EStopIteration%3B%0A%7D%3B%0A%7Delse%7B%0Avar%20i%3D%2D1%3B%0Athis%2Enext%3Dfunction%28%29%7B%0Ai%3D%28i%2B1%29%25lst%2Elength%3B%0Areturn%20lst%5Bi%5D%3B%0A%7D%3B%0A%7D%0Areturn%20this%2Enext%28%29%3B%0A%7D%0A%7D%7D%3B%0A%7D%2Crepeat%3Afunction%28elem%2Cn%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28typeof%20%28n%29%3D%3D%22undefined%22%29%7B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22repeat%28%22%2Bm%2Erepr%28elem%29%2B%22%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Areturn%20elem%3B%0A%7D%7D%3B%0A%7D%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22repeat%28%22%2Bm%2Erepr%28elem%29%2B%22%2C%20%22%2Bn%2B%22%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Aif%28n%3C%3D0%29%7B%0Athrow%20MochiKit%2EIter%2EStopIteration%3B%0A%7D%0An%2D%3D1%3B%0Areturn%20elem%3B%0A%7D%7D%3B%0A%7D%2Cnext%3Afunction%28%5F171%29%7B%0Areturn%20%5F171%2Enext%28%29%3B%0A%7D%2Cizip%3Afunction%28p%2Cq%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20self%3DMochiKit%2EIter%3B%0Avar%20next%3Dself%2Enext%3B%0Avar%20%5F177%3Dm%2Emap%28self%2Eiter%2Carguments%29%3B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22izip%28%2E%2E%2E%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Areturn%20m%2Emap%28next%2C%5F177%29%3B%0A%7D%7D%3B%0A%7D%2Cifilter%3Afunction%28pred%2Cseq%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Aseq%3DMochiKit%2EIter%2Eiter%28seq%29%3B%0Aif%28pred%3D%3D%3Dnull%29%7B%0Apred%3Dm%2Eoperator%2Etruth%3B%0A%7D%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22ifilter%28%2E%2E%2E%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Awhile%28true%29%7B%0Avar%20rval%3Dseq%2Enext%28%29%3B%0Aif%28pred%28rval%29%29%7B%0Areturn%20rval%3B%0A%7D%0A%7D%0Areturn%20undefined%3B%0A%7D%7D%3B%0A%7D%2Cifilterfalse%3Afunction%28pred%2Cseq%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Aseq%3DMochiKit%2EIter%2Eiter%28seq%29%3B%0Aif%28pred%3D%3D%3Dnull%29%7B%0Apred%3Dm%2Eoperator%2Etruth%3B%0A%7D%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22ifilterfalse%28%2E%2E%2E%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Awhile%28true%29%7B%0Avar%20rval%3Dseq%2Enext%28%29%3B%0Aif%28%21pred%28rval%29%29%7B%0Areturn%20rval%3B%0A%7D%0A%7D%0Areturn%20undefined%3B%0A%7D%7D%3B%0A%7D%2Cislice%3Afunction%28seq%29%7B%0Avar%20self%3DMochiKit%2EIter%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Aseq%3Dself%2Eiter%28seq%29%3B%0Avar%20%5F183%3D0%3B%0Avar%20stop%3D0%3B%0Avar%20step%3D1%3B%0Avar%20i%3D%2D1%3B%0Aif%28arguments%2Elength%3D%3D2%29%7B%0Astop%3Darguments%5B1%5D%3B%0A%7Delse%7B%0Aif%28arguments%2Elength%3D%3D3%29%7B%0A%5F183%3Darguments%5B1%5D%3B%0Astop%3Darguments%5B2%5D%3B%0A%7Delse%7B%0A%5F183%3Darguments%5B1%5D%3B%0Astop%3Darguments%5B2%5D%3B%0Astep%3Darguments%5B3%5D%3B%0A%7D%0A%7D%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22islice%28%22%2B%5B%22%2E%2E%2E%22%2C%5F183%2Cstop%2Cstep%5D%2Ejoin%28%22%2C%20%22%29%2B%22%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Avar%20rval%3B%0Awhile%28i%3C%5F183%29%7B%0Arval%3Dseq%2Enext%28%29%3B%0Ai%2B%2B%3B%0A%7D%0Aif%28%5F183%3E%3Dstop%29%7B%0Athrow%20self%2EStopIteration%3B%0A%7D%0A%5F183%2B%3Dstep%3B%0Areturn%20rval%3B%0A%7D%7D%3B%0A%7D%2Cimap%3Afunction%28fun%2Cp%2Cq%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20self%3DMochiKit%2EIter%3B%0Avar%20%5F18d%3Dm%2Emap%28self%2Eiter%2Cm%2Eextend%28null%2Carguments%2C1%29%29%3B%0Avar%20map%3Dm%2Emap%3B%0Avar%20next%3Dself%2Enext%3B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22imap%28%2E%2E%2E%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Areturn%20fun%2Eapply%28this%2Cmap%28next%2C%5F18d%29%29%3B%0A%7D%7D%3B%0A%7D%2Capplymap%3Afunction%28fun%2Cseq%2Cself%29%7B%0Aseq%3DMochiKit%2EIter%2Eiter%28seq%29%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22applymap%28%2E%2E%2E%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Areturn%20fun%2Eapply%28self%2Cseq%2Enext%28%29%29%3B%0A%7D%7D%3B%0A%7D%2Cchain%3Afunction%28p%2Cq%29%7B%0Avar%20self%3DMochiKit%2EIter%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Areturn%20self%2Eiter%28arguments%5B0%5D%29%3B%0A%7D%0Avar%20%5F198%3Dm%2Emap%28self%2Eiter%2Carguments%29%3B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22chain%28%2E%2E%2E%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Awhile%28%5F198%2Elength%3E1%29%7B%0Atry%7B%0Avar%20%5F199%3D%5F198%5B0%5D%2Enext%28%29%3B%0Areturn%20%5F199%3B%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dself%2EStopIteration%29%7B%0Athrow%20e%3B%0A%7D%0A%5F198%2Eshift%28%29%3B%0Avar%20%5F199%3D%5F198%5B0%5D%2Enext%28%29%3B%0Areturn%20%5F199%3B%0A%7D%0A%7D%0Aif%28%5F198%2Elength%3D%3D1%29%7B%0Avar%20arg%3D%5F198%2Eshift%28%29%3B%0Athis%2Enext%3Dm%2Ebind%28%22next%22%2Carg%29%3B%0Areturn%20this%2Enext%28%29%3B%0A%7D%0Athrow%20self%2EStopIteration%3B%0A%7D%7D%3B%0A%7D%2Ctakewhile%3Afunction%28pred%2Cseq%29%7B%0Avar%20self%3DMochiKit%2EIter%3B%0Aseq%3Dself%2Eiter%28seq%29%3B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22takewhile%28%2E%2E%2E%29%22%3B%0A%7D%2CtoString%3AMochiKit%2EBase%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Avar%20rval%3Dseq%2Enext%28%29%3B%0Aif%28%21pred%28rval%29%29%7B%0Athis%2Enext%3Dfunction%28%29%7B%0Athrow%20self%2EStopIteration%3B%0A%7D%3B%0Athis%2Enext%28%29%3B%0A%7D%0Areturn%20rval%3B%0A%7D%7D%3B%0A%7D%2Cdropwhile%3Afunction%28pred%2Cseq%29%7B%0Aseq%3DMochiKit%2EIter%2Eiter%28seq%29%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20bind%3Dm%2Ebind%3B%0Areturn%20%7B%22repr%22%3Afunction%28%29%7B%0Areturn%20%22dropwhile%28%2E%2E%2E%29%22%3B%0A%7D%2C%22toString%22%3Am%2EforwardCall%28%22repr%22%29%2C%22next%22%3Afunction%28%29%7B%0Awhile%28true%29%7B%0Avar%20rval%3Dseq%2Enext%28%29%3B%0Aif%28%21pred%28rval%29%29%7B%0Abreak%3B%0A%7D%0A%7D%0Athis%2Enext%3Dbind%28%22next%22%2Cseq%29%3B%0Areturn%20rval%3B%0A%7D%7D%3B%0A%7D%2C%5Ftee%3Afunction%28%5F1a4%2Csync%2C%5F1a6%29%7B%0Async%2Epos%5B%5F1a4%5D%3D%2D1%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20%5F1a8%3Dm%2ElistMin%3B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22tee%28%22%2B%5F1a4%2B%22%2C%20%2E%2E%2E%29%22%3B%0A%7D%2CtoString%3Am%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Avar%20rval%3B%0Avar%20i%3Dsync%2Epos%5B%5F1a4%5D%3B%0Aif%28i%3D%3Dsync%2Emax%29%7B%0Arval%3D%5F1a6%2Enext%28%29%3B%0Async%2Edeque%2Epush%28rval%29%3B%0Async%2Emax%2B%3D1%3B%0Async%2Epos%5B%5F1a4%5D%2B%3D1%3B%0A%7Delse%7B%0Arval%3Dsync%2Edeque%5Bi%2Dsync%2Emin%5D%3B%0Async%2Epos%5B%5F1a4%5D%2B%3D1%3B%0Aif%28i%3D%3Dsync%2Emin%26%26%5F1a8%28sync%2Epos%29%21%3Dsync%2Emin%29%7B%0Async%2Emin%2B%3D1%3B%0Async%2Edeque%2Eshift%28%29%3B%0A%7D%0A%7D%0Areturn%20rval%3B%0A%7D%7D%3B%0A%7D%2Ctee%3Afunction%28%5F1ab%2Cn%29%7B%0Avar%20rval%3D%5B%5D%3B%0Avar%20sync%3D%7B%22pos%22%3A%5B%5D%2C%22deque%22%3A%5B%5D%2C%22max%22%3A%2D1%2C%22min%22%3A%2D1%7D%3B%0Aif%28arguments%2Elength%3D%3D1%7C%7Ctypeof%20%28n%29%3D%3D%22undefined%22%7C%7Cn%3D%3D%3Dnull%29%7B%0An%3D2%3B%0A%7D%0Avar%20self%3DMochiKit%2EIter%3B%0A%5F1ab%3Dself%2Eiter%28%5F1ab%29%3B%0Avar%20%5Ftee%3Dself%2E%5Ftee%3B%0Afor%28var%20i%3D0%3Bi%3Cn%3Bi%2B%2B%29%7B%0Arval%2Epush%28%5Ftee%28i%2Csync%2C%5F1ab%29%29%3B%0A%7D%0Areturn%20rval%3B%0A%7D%2Clist%3Afunction%28%5F1b2%29%7B%0Avar%20rval%3B%0Aif%28%5F1b2%20instanceof%20Array%29%7B%0Areturn%20%5F1b2%2Eslice%28%29%3B%0A%7D%0Aif%28typeof%20%28%5F1b2%29%3D%3D%22function%22%26%26%21%28%5F1b2%20instanceof%20Function%29%26%26typeof%20%28%5F1b2%2Elength%29%3D%3D%22number%22%29%7B%0Arval%3D%5B%5D%3B%0Afor%28var%20i%3D0%3Bi%3C%5F1b2%2Elength%3Bi%2B%2B%29%7B%0Arval%2Epush%28%5F1b2%5Bi%5D%29%3B%0A%7D%0Areturn%20rval%3B%0A%7D%0Avar%20self%3DMochiKit%2EIter%3B%0A%5F1b2%3Dself%2Eiter%28%5F1b2%29%3B%0Avar%20rval%3D%5B%5D%3B%0Avar%20%5F1b6%3B%0Atry%7B%0Awhile%28true%29%7B%0A%5F1b6%3D%5F1b2%2Enext%28%29%3B%0Arval%2Epush%28%5F1b6%29%3B%0A%7D%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dself%2EStopIteration%29%7B%0Athrow%20e%3B%0A%7D%0Areturn%20rval%3B%0A%7D%0Areturn%20undefined%3B%0A%7D%2Creduce%3Afunction%28fn%2C%5F1b8%2C%5F1b9%29%7B%0Avar%20i%3D0%3B%0Avar%20x%3D%5F1b9%3B%0Avar%20self%3DMochiKit%2EIter%3B%0A%5F1b8%3Dself%2Eiter%28%5F1b8%29%3B%0Aif%28arguments%2Elength%3C3%29%7B%0Atry%7B%0Ax%3D%5F1b8%2Enext%28%29%3B%0A%7D%0Acatch%28e%29%7B%0Aif%28e%3D%3Dself%2EStopIteration%29%7B%0Ae%3Dnew%20TypeError%28%22reduce%28%29%20of%20empty%20sequence%20with%20no%20initial%20value%22%29%3B%0A%7D%0Athrow%20e%3B%0A%7D%0Ai%2B%2B%3B%0A%7D%0Atry%7B%0Awhile%28true%29%7B%0Ax%3Dfn%28x%2C%5F1b8%2Enext%28%29%29%3B%0A%7D%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dself%2EStopIteration%29%7B%0Athrow%20e%3B%0A%7D%0A%7D%0Areturn%20x%3B%0A%7D%2Crange%3Afunction%28%29%7B%0Avar%20%5F1bd%3D0%3B%0Avar%20stop%3D0%3B%0Avar%20step%3D1%3B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Astop%3Darguments%5B0%5D%3B%0A%7Delse%7B%0Aif%28arguments%2Elength%3D%3D2%29%7B%0A%5F1bd%3Darguments%5B0%5D%3B%0Astop%3Darguments%5B1%5D%3B%0A%7Delse%7B%0Aif%28arguments%2Elength%3D%3D3%29%7B%0A%5F1bd%3Darguments%5B0%5D%3B%0Astop%3Darguments%5B1%5D%3B%0Astep%3Darguments%5B2%5D%3B%0A%7Delse%7B%0Athrow%20new%20TypeError%28%22range%28%29%20takes%201%2C%202%2C%20or%203%20arguments%21%22%29%3B%0A%7D%0A%7D%0A%7D%0Aif%28step%3D%3D%3D0%29%7B%0Athrow%20new%20TypeError%28%22range%28%29%20step%20must%20not%20be%200%22%29%3B%0A%7D%0Areturn%20%7Bnext%3Afunction%28%29%7B%0Aif%28%28step%3E0%26%26%5F1bd%3E%3Dstop%29%7C%7C%28step%3C0%26%26%5F1bd%3C%3Dstop%29%29%7B%0Athrow%20MochiKit%2EIter%2EStopIteration%3B%0A%7D%0Avar%20rval%3D%5F1bd%3B%0A%5F1bd%2B%3Dstep%3B%0Areturn%20rval%3B%0A%7D%2Crepr%3Afunction%28%29%7B%0Areturn%20%22range%28%22%2B%5B%5F1bd%2Cstop%2Cstep%5D%2Ejoin%28%22%2C%20%22%29%2B%22%29%22%3B%0A%7D%2CtoString%3AMochiKit%2EBase%2EforwardCall%28%22repr%22%29%7D%3B%0A%7D%2Csum%3Afunction%28%5F1c1%2C%5F1c2%29%7B%0Aif%28typeof%20%28%5F1c2%29%3D%3D%22undefined%22%7C%7C%5F1c2%3D%3D%3Dnull%29%7B%0A%5F1c2%3D0%3B%0A%7D%0Avar%20x%3D%5F1c2%3B%0Avar%20self%3DMochiKit%2EIter%3B%0A%5F1c1%3Dself%2Eiter%28%5F1c1%29%3B%0Atry%7B%0Awhile%28true%29%7B%0Ax%2B%3D%5F1c1%2Enext%28%29%3B%0A%7D%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dself%2EStopIteration%29%7B%0Athrow%20e%3B%0A%7D%0A%7D%0Areturn%20x%3B%0A%7D%2Cexhaust%3Afunction%28%5F1c5%29%7B%0Avar%20self%3DMochiKit%2EIter%3B%0A%5F1c5%3Dself%2Eiter%28%5F1c5%29%3B%0Atry%7B%0Awhile%28true%29%7B%0A%5F1c5%2Enext%28%29%3B%0A%7D%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dself%2EStopIteration%29%7B%0Athrow%20e%3B%0A%7D%0A%7D%0A%7D%2CforEach%3Afunction%28%5F1c7%2Cfunc%2Cobj%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20self%3DMochiKit%2EIter%3B%0Aif%28arguments%2Elength%3E2%29%7B%0Afunc%3Dm%2Ebind%28func%2Cobj%29%3B%0A%7D%0Aif%28m%2EisArrayLike%28%5F1c7%29%26%26%21self%2EisIterable%28%5F1c7%29%29%7B%0Atry%7B%0Afor%28var%20i%3D0%3Bi%3C%5F1c7%2Elength%3Bi%2B%2B%29%7B%0Afunc%28%5F1c7%5Bi%5D%29%3B%0A%7D%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dself%2EStopIteration%29%7B%0Athrow%20e%3B%0A%7D%0A%7D%0A%7Delse%7B%0Aself%2Eexhaust%28self%2Eimap%28func%2C%5F1c7%29%29%3B%0A%7D%0A%7D%2Cevery%3Afunction%28%5F1cd%2Cfunc%29%7B%0Avar%20self%3DMochiKit%2EIter%3B%0Atry%7B%0Aself%2Eifilterfalse%28func%2C%5F1cd%29%2Enext%28%29%3B%0Areturn%20false%3B%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dself%2EStopIteration%29%7B%0Athrow%20e%3B%0A%7D%0Areturn%20true%3B%0A%7D%0A%7D%2Csorted%3Afunction%28%5F1d0%2Ccmp%29%7B%0Avar%20rval%3DMochiKit%2EIter%2Elist%28%5F1d0%29%3B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Acmp%3DMochiKit%2EBase%2Ecompare%3B%0A%7D%0Arval%2Esort%28cmp%29%3B%0Areturn%20rval%3B%0A%7D%2Creversed%3Afunction%28%5F1d3%29%7B%0Avar%20rval%3DMochiKit%2EIter%2Elist%28%5F1d3%29%3B%0Arval%2Ereverse%28%29%3B%0Areturn%20rval%3B%0A%7D%2Csome%3Afunction%28%5F1d5%2Cfunc%29%7B%0Avar%20self%3DMochiKit%2EIter%3B%0Atry%7B%0Aself%2Eifilter%28func%2C%5F1d5%29%2Enext%28%29%3B%0Areturn%20true%3B%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dself%2EStopIteration%29%7B%0Athrow%20e%3B%0A%7D%0Areturn%20false%3B%0A%7D%0A%7D%2Ciextend%3Afunction%28lst%2C%5F1d9%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20self%3DMochiKit%2EIter%3B%0Aif%28m%2EisArrayLike%28%5F1d9%29%26%26%21self%2EisIterable%28%5F1d9%29%29%7B%0Afor%28var%20i%3D0%3Bi%3C%5F1d9%2Elength%3Bi%2B%2B%29%7B%0Alst%2Epush%28%5F1d9%5Bi%5D%29%3B%0A%7D%0A%7Delse%7B%0A%5F1d9%3Dself%2Eiter%28%5F1d9%29%3B%0Atry%7B%0Awhile%28true%29%7B%0Alst%2Epush%28%5F1d9%2Enext%28%29%29%3B%0A%7D%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3Dself%2EStopIteration%29%7B%0Athrow%20e%3B%0A%7D%0A%7D%0A%7D%0Areturn%20lst%3B%0A%7D%2Cgroupby%3Afunction%28%5F1dd%2C%5F1de%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20self%3DMochiKit%2EIter%3B%0Aif%28arguments%2Elength%3C2%29%7B%0A%5F1de%3Dm%2Eoperator%2Eidentity%3B%0A%7D%0A%5F1dd%3Dself%2Eiter%28%5F1dd%29%3B%0Avar%20pk%3Dundefined%3B%0Avar%20k%3Dundefined%3B%0Avar%20v%3B%0Afunction%20fetch%28%29%7B%0Av%3D%5F1dd%2Enext%28%29%3B%0Ak%3D%5F1de%28v%29%3B%0A%7D%0Afunction%20eat%28%29%7B%0Avar%20ret%3Dv%3B%0Av%3Dundefined%3B%0Areturn%20ret%3B%0A%7D%0Avar%20%5F1e5%3Dtrue%3B%0Avar%20%5F1e6%3Dm%2Ecompare%3B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22groupby%28%2E%2E%2E%29%22%3B%0A%7D%2Cnext%3Afunction%28%29%7B%0Awhile%28%5F1e6%28k%2Cpk%29%3D%3D%3D0%29%7B%0Afetch%28%29%3B%0Aif%28%5F1e5%29%7B%0A%5F1e5%3Dfalse%3B%0Abreak%3B%0A%7D%0A%7D%0Apk%3Dk%3B%0Areturn%20%5Bk%2C%7Bnext%3Afunction%28%29%7B%0Aif%28v%3D%3Dundefined%29%7B%0Afetch%28%29%3B%0A%7D%0Aif%28%5F1e6%28k%2Cpk%29%21%3D%3D0%29%7B%0Athrow%20self%2EStopIteration%3B%0A%7D%0Areturn%20eat%28%29%3B%0A%7D%7D%5D%3B%0A%7D%7D%3B%0A%7D%2Cgroupby%5Fas%5Farray%3Afunction%28%5F1e7%2C%5F1e8%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20self%3DMochiKit%2EIter%3B%0Aif%28arguments%2Elength%3C2%29%7B%0A%5F1e8%3Dm%2Eoperator%2Eidentity%3B%0A%7D%0A%5F1e7%3Dself%2Eiter%28%5F1e7%29%3B%0Avar%20%5F1eb%3D%5B%5D%3B%0Avar%20%5F1ec%3Dtrue%3B%0Avar%20%5F1ed%3B%0Avar%20%5F1ee%3Dm%2Ecompare%3B%0Awhile%28true%29%7B%0Atry%7B%0Avar%20%5F1ef%3D%5F1e7%2Enext%28%29%3B%0Avar%20key%3D%5F1e8%28%5F1ef%29%3B%0A%7D%0Acatch%28e%29%7B%0Aif%28e%3D%3Dself%2EStopIteration%29%7B%0Abreak%3B%0A%7D%0Athrow%20e%3B%0A%7D%0Aif%28%5F1ec%7C%7C%5F1ee%28key%2C%5F1ed%29%21%3D%3D0%29%7B%0Avar%20%5F1f1%3D%5B%5D%3B%0A%5F1eb%2Epush%28%5Bkey%2C%5F1f1%5D%29%3B%0A%7D%0A%5F1f1%2Epush%28%5F1ef%29%3B%0A%5F1ec%3Dfalse%3B%0A%5F1ed%3Dkey%3B%0A%7D%0Areturn%20%5F1eb%3B%0A%7D%2CarrayLikeIter%3Afunction%28%5F1f2%29%7B%0Avar%20i%3D0%3B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22arrayLikeIter%28%2E%2E%2E%29%22%3B%0A%7D%2CtoString%3AMochiKit%2EBase%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Aif%28i%3E%3D%5F1f2%2Elength%29%7B%0Athrow%20MochiKit%2EIter%2EStopIteration%3B%0A%7D%0Areturn%20%5F1f2%5Bi%2B%2B%5D%3B%0A%7D%7D%3B%0A%7D%2ChasIterateNext%3Afunction%28%5F1f4%29%7B%0Areturn%20%28%5F1f4%26%26typeof%20%28%5F1f4%2EiterateNext%29%3D%3D%22function%22%29%3B%0A%7D%2CiterateNextIter%3Afunction%28%5F1f5%29%7B%0Areturn%20%7Brepr%3Afunction%28%29%7B%0Areturn%20%22iterateNextIter%28%2E%2E%2E%29%22%3B%0A%7D%2CtoString%3AMochiKit%2EBase%2EforwardCall%28%22repr%22%29%2Cnext%3Afunction%28%29%7B%0Avar%20rval%3D%5F1f5%2EiterateNext%28%29%3B%0Aif%28rval%3D%3D%3Dnull%7C%7Crval%3D%3D%3Dundefined%29%7B%0Athrow%20MochiKit%2EIter%2EStopIteration%3B%0A%7D%0Areturn%20rval%3B%0A%7D%7D%3B%0A%7D%7D%29%3B%0AMochiKit%2EIter%2EEXPORT%5FOK%3D%5B%22iteratorRegistry%22%2C%22arrayLikeIter%22%2C%22hasIterateNext%22%2C%22iterateNextIter%22%5D%3B%0AMochiKit%2EIter%2EEXPORT%3D%5B%22StopIteration%22%2C%22registerIteratorFactory%22%2C%22iter%22%2C%22count%22%2C%22cycle%22%2C%22repeat%22%2C%22next%22%2C%22izip%22%2C%22ifilter%22%2C%22ifilterfalse%22%2C%22islice%22%2C%22imap%22%2C%22applymap%22%2C%22chain%22%2C%22takewhile%22%2C%22dropwhile%22%2C%22tee%22%2C%22list%22%2C%22reduce%22%2C%22range%22%2C%22sum%22%2C%22exhaust%22%2C%22forEach%22%2C%22every%22%2C%22sorted%22%2C%22reversed%22%2C%22some%22%2C%22iextend%22%2C%22groupby%22%2C%22groupby%5Fas%5Farray%22%5D%3B%0AMochiKit%2EIter%2E%5F%5Fnew%5F%5F%3Dfunction%28%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28typeof%20%28StopIteration%29%21%3D%22undefined%22%29%7B%0Athis%2EStopIteration%3DStopIteration%3B%0A%7Delse%7B%0Athis%2EStopIteration%3Dnew%20m%2ENamedError%28%22StopIteration%22%29%3B%0A%7D%0Athis%2EiteratorRegistry%3Dnew%20m%2EAdapterRegistry%28%29%3B%0Athis%2EregisterIteratorFactory%28%22arrayLike%22%2Cm%2EisArrayLike%2Cthis%2EarrayLikeIter%29%3B%0Athis%2EregisterIteratorFactory%28%22iterateNext%22%2Cthis%2EhasIterateNext%2Cthis%2EiterateNextIter%29%3B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3Am%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0Am%2EnameFunctions%28this%29%3B%0A%7D%3B%0AMochiKit%2EIter%2E%5F%5Fnew%5F%5F%28%29%3B%0Aif%28MochiKit%2E%5F%5Fexport%5F%5F%29%7B%0Areduce%3DMochiKit%2EIter%2Ereduce%3B%0A%7D%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2EIter%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22Logging%22%2C%5B%22Base%22%5D%29%3B%0AMochiKit%2ELogging%2ENAME%3D%22MochiKit%2ELogging%22%3B%0AMochiKit%2ELogging%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2ELogging%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2ELogging%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2ELogging%2EEXPORT%3D%5B%22LogLevel%22%2C%22LogMessage%22%2C%22Logger%22%2C%22alertListener%22%2C%22logger%22%2C%22log%22%2C%22logError%22%2C%22logDebug%22%2C%22logFatal%22%2C%22logWarning%22%5D%3B%0AMochiKit%2ELogging%2EEXPORT%5FOK%3D%5B%22logLevelAtLeast%22%2C%22isLogMessage%22%2C%22compareLogMessage%22%5D%3B%0AMochiKit%2ELogging%2ELogMessage%3Dfunction%28num%2C%5F1f9%2Cinfo%29%7B%0Athis%2Enum%3Dnum%3B%0Athis%2Elevel%3D%5F1f9%3B%0Athis%2Einfo%3Dinfo%3B%0Athis%2Etimestamp%3Dnew%20Date%28%29%3B%0A%7D%3B%0AMochiKit%2ELogging%2ELogMessage%2Eprototype%3D%7Brepr%3Afunction%28%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Areturn%20%22LogMessage%28%22%2Bm%2Emap%28m%2Erepr%2C%5Bthis%2Enum%2Cthis%2Elevel%2Cthis%2Einfo%5D%29%2Ejoin%28%22%2C%20%22%29%2B%22%29%22%3B%0A%7D%2CtoString%3AMochiKit%2EBase%2EforwardCall%28%22repr%22%29%7D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2ELogging%2C%7BlogLevelAtLeast%3Afunction%28%5F1fc%29%7B%0Avar%20self%3DMochiKit%2ELogging%3B%0Aif%28typeof%20%28%5F1fc%29%3D%3D%22string%22%29%7B%0A%5F1fc%3Dself%2ELogLevel%5B%5F1fc%5D%3B%0A%7D%0Areturn%20function%28msg%29%7B%0Avar%20%5F1ff%3Dmsg%2Elevel%3B%0Aif%28typeof%20%28%5F1ff%29%3D%3D%22string%22%29%7B%0A%5F1ff%3Dself%2ELogLevel%5B%5F1ff%5D%3B%0A%7D%0Areturn%20%5F1ff%3E%3D%5F1fc%3B%0A%7D%3B%0A%7D%2CisLogMessage%3Afunction%28%29%7B%0Avar%20%5F200%3DMochiKit%2ELogging%2ELogMessage%3B%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Aif%28%21%28arguments%5Bi%5D%20instanceof%20%5F200%29%29%7B%0Areturn%20false%3B%0A%7D%0A%7D%0Areturn%20true%3B%0A%7D%2CcompareLogMessage%3Afunction%28a%2Cb%29%7B%0Areturn%20MochiKit%2EBase%2Ecompare%28%5Ba%2Elevel%2Ca%2Einfo%5D%2C%5Bb%2Elevel%2Cb%2Einfo%5D%29%3B%0A%7D%2CalertListener%3Afunction%28msg%29%7B%0Aalert%28%22num%3A%20%22%2Bmsg%2Enum%2B%22%5Cnlevel%3A%20%22%2Bmsg%2Elevel%2B%22%5Cninfo%3A%20%22%2Bmsg%2Einfo%2Ejoin%28%22%20%22%29%29%3B%0A%7D%7D%29%3B%0AMochiKit%2ELogging%2ELogger%3Dfunction%28%5F205%29%7B%0Athis%2Ecounter%3D0%3B%0Aif%28typeof%20%28%5F205%29%3D%3D%22undefined%22%7C%7C%5F205%3D%3D%3Dnull%29%7B%0A%5F205%3D%2D1%3B%0A%7D%0Athis%2EmaxSize%3D%5F205%3B%0Athis%2E%5Fmessages%3D%5B%5D%3B%0Athis%2Elisteners%3D%7B%7D%3B%0Athis%2EuseNativeConsole%3Dfalse%3B%0A%7D%3B%0AMochiKit%2ELogging%2ELogger%2Eprototype%3D%7Bclear%3Afunction%28%29%7B%0Athis%2E%5Fmessages%2Esplice%280%2Cthis%2E%5Fmessages%2Elength%29%3B%0A%7D%2ClogToConsole%3Afunction%28msg%29%7B%0Aif%28typeof%20%28window%29%21%3D%22undefined%22%26%26window%2Econsole%26%26window%2Econsole%2Elog%29%7B%0Awindow%2Econsole%2Elog%28msg%2Ereplace%28%2F%25%2Fg%2C%22%5Cuff05%22%29%29%3B%0A%7Delse%7B%0Aif%28typeof%20%28opera%29%21%3D%22undefined%22%26%26opera%2EpostError%29%7B%0Aopera%2EpostError%28msg%29%3B%0A%7Delse%7B%0Aif%28typeof%20%28printfire%29%3D%3D%22function%22%29%7B%0Aprintfire%28msg%29%3B%0A%7Delse%7B%0Aif%28typeof%20%28Debug%29%21%3D%22undefined%22%26%26Debug%2Ewriteln%29%7B%0ADebug%2Ewriteln%28msg%29%3B%0A%7Delse%7B%0Aif%28typeof%20%28debug%29%21%3D%22undefined%22%26%26debug%2Etrace%29%7B%0Adebug%2Etrace%28msg%29%3B%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%2CdispatchListeners%3Afunction%28msg%29%7B%0Afor%28var%20k%20in%20this%2Elisteners%29%7B%0Avar%20pair%3Dthis%2Elisteners%5Bk%5D%3B%0Aif%28pair%2Eident%21%3Dk%7C%7C%28pair%5B0%5D%26%26%21pair%5B0%5D%28msg%29%29%29%7B%0Acontinue%3B%0A%7D%0Apair%5B1%5D%28msg%29%3B%0A%7D%0A%7D%2CaddListener%3Afunction%28%5F20a%2C%5F20b%2C%5F20c%29%7B%0Aif%28typeof%20%28%5F20b%29%3D%3D%22string%22%29%7B%0A%5F20b%3DMochiKit%2ELogging%2ElogLevelAtLeast%28%5F20b%29%3B%0A%7D%0Avar%20%5F20d%3D%5B%5F20b%2C%5F20c%5D%3B%0A%5F20d%2Eident%3D%5F20a%3B%0Athis%2Elisteners%5B%5F20a%5D%3D%5F20d%3B%0A%7D%2CremoveListener%3Afunction%28%5F20e%29%7B%0Adelete%20this%2Elisteners%5B%5F20e%5D%3B%0A%7D%2CbaseLog%3Afunction%28%5F20f%2C%5F210%29%7B%0Aif%28typeof%20%28%5F20f%29%3D%3D%22number%22%29%7B%0Aif%28%5F20f%3E%3DMochiKit%2ELogging%2ELogLevel%2EFATAL%29%7B%0A%5F20f%3D%22FATAL%22%3B%0A%7Delse%7B%0Aif%28%5F20f%3E%3DMochiKit%2ELogging%2ELogLevel%2EERROR%29%7B%0A%5F20f%3D%22ERROR%22%3B%0A%7Delse%7B%0Aif%28%5F20f%3E%3DMochiKit%2ELogging%2ELogLevel%2EWARNING%29%7B%0A%5F20f%3D%22WARNING%22%3B%0A%7Delse%7B%0Aif%28%5F20f%3E%3DMochiKit%2ELogging%2ELogLevel%2EINFO%29%7B%0A%5F20f%3D%22INFO%22%3B%0A%7Delse%7B%0A%5F20f%3D%22DEBUG%22%3B%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%0Avar%20msg%3Dnew%20MochiKit%2ELogging%2ELogMessage%28this%2Ecounter%2C%5F20f%2CMochiKit%2EBase%2Eextend%28null%2Carguments%2C1%29%29%3B%0Athis%2E%5Fmessages%2Epush%28msg%29%3B%0Athis%2EdispatchListeners%28msg%29%3B%0Aif%28this%2EuseNativeConsole%29%7B%0Athis%2ElogToConsole%28msg%2Elevel%2B%22%3A%20%22%2Bmsg%2Einfo%2Ejoin%28%22%20%22%29%29%3B%0A%7D%0Athis%2Ecounter%2B%3D1%3B%0Awhile%28this%2EmaxSize%3E%3D0%26%26this%2E%5Fmessages%2Elength%3Ethis%2EmaxSize%29%7B%0Athis%2E%5Fmessages%2Eshift%28%29%3B%0A%7D%0A%7D%2CgetMessages%3Afunction%28%5F212%29%7B%0Avar%20%5F213%3D0%3B%0Aif%28%21%28typeof%20%28%5F212%29%3D%3D%22undefined%22%7C%7C%5F212%3D%3D%3Dnull%29%29%7B%0A%5F213%3DMath%2Emax%280%2Cthis%2E%5Fmessages%2Elength%2D%5F212%29%3B%0A%7D%0Areturn%20this%2E%5Fmessages%2Eslice%28%5F213%29%3B%0A%7D%2CgetMessageText%3Afunction%28%5F214%29%7B%0Aif%28typeof%20%28%5F214%29%3D%3D%22undefined%22%7C%7C%5F214%3D%3D%3Dnull%29%7B%0A%5F214%3D30%3B%0A%7D%0Avar%20%5F215%3Dthis%2EgetMessages%28%5F214%29%3B%0Aif%28%5F215%2Elength%29%7B%0Avar%20lst%3Dmap%28function%28m%29%7B%0Areturn%20%22%5Cn%20%20%5B%22%2Bm%2Enum%2B%22%5D%20%22%2Bm%2Elevel%2B%22%3A%20%22%2Bm%2Einfo%2Ejoin%28%22%20%22%29%3B%0A%7D%2C%5F215%29%3B%0Alst%2Eunshift%28%22LAST%20%22%2B%5F215%2Elength%2B%22%20MESSAGES%3A%22%29%3B%0Areturn%20lst%2Ejoin%28%22%22%29%3B%0A%7D%0Areturn%20%22%22%3B%0A%7D%2CdebuggingBookmarklet%3Afunction%28%5F218%29%7B%0Aif%28typeof%20%28MochiKit%2ELoggingPane%29%3D%3D%22undefined%22%29%7B%0Aalert%28this%2EgetMessageText%28%29%29%3B%0A%7Delse%7B%0AMochiKit%2ELoggingPane%2EcreateLoggingPane%28%5F218%7C%7Cfalse%29%3B%0A%7D%0A%7D%7D%3B%0AMochiKit%2ELogging%2E%5F%5Fnew%5F%5F%3Dfunction%28%29%7B%0Athis%2ELogLevel%3D%7BERROR%3A40%2CFATAL%3A50%2CWARNING%3A30%2CINFO%3A20%2CDEBUG%3A10%7D%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Am%2EregisterComparator%28%22LogMessage%22%2Cthis%2EisLogMessage%2Cthis%2EcompareLogMessage%29%3B%0Avar%20%5F21a%3Dm%2Epartial%3B%0Avar%20%5F21b%3Dthis%2ELogger%3B%0Avar%20%5F21c%3D%5F21b%2Eprototype%2EbaseLog%3B%0Am%2Eupdate%28this%2ELogger%2Eprototype%2C%7Bdebug%3A%5F21a%28%5F21c%2C%22DEBUG%22%29%2Clog%3A%5F21a%28%5F21c%2C%22INFO%22%29%2Cerror%3A%5F21a%28%5F21c%2C%22ERROR%22%29%2Cfatal%3A%5F21a%28%5F21c%2C%22FATAL%22%29%2Cwarning%3A%5F21a%28%5F21c%2C%22WARNING%22%29%7D%29%3B%0Avar%20self%3Dthis%3B%0Avar%20%5F21e%3Dfunction%28name%29%7B%0Areturn%20function%28%29%7B%0Aself%2Elogger%5Bname%5D%2Eapply%28self%2Elogger%2Carguments%29%3B%0A%7D%3B%0A%7D%3B%0Athis%2Elog%3D%5F21e%28%22log%22%29%3B%0Athis%2ElogError%3D%5F21e%28%22error%22%29%3B%0Athis%2ElogDebug%3D%5F21e%28%22debug%22%29%3B%0Athis%2ElogFatal%3D%5F21e%28%22fatal%22%29%3B%0Athis%2ElogWarning%3D%5F21e%28%22warning%22%29%3B%0Athis%2Elogger%3Dnew%20%5F21b%28%29%3B%0Athis%2Elogger%2EuseNativeConsole%3Dtrue%3B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3Am%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0Am%2EnameFunctions%28this%29%3B%0A%7D%3B%0Aif%28typeof%20%28printfire%29%3D%3D%22undefined%22%26%26typeof%20%28document%29%21%3D%22undefined%22%26%26document%2EcreateEvent%26%26typeof%20%28dispatchEvent%29%21%3D%22undefined%22%29%7B%0Aprintfire%3Dfunction%28%29%7B%0Aprintfire%2Eargs%3Darguments%3B%0Avar%20ev%3Ddocument%2EcreateEvent%28%22Events%22%29%3B%0Aev%2EinitEvent%28%22printfire%22%2Cfalse%2Ctrue%29%3B%0AdispatchEvent%28ev%29%3B%0A%7D%3B%0A%7D%0AMochiKit%2ELogging%2E%5F%5Fnew%5F%5F%28%29%3B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2ELogging%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22DateTime%22%2C%5B%22Base%22%5D%29%3B%0AMochiKit%2EDateTime%2ENAME%3D%22MochiKit%2EDateTime%22%3B%0AMochiKit%2EDateTime%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EDateTime%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2EDateTime%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EDateTime%2EisoDate%3Dfunction%28str%29%7B%0Astr%3Dstr%2B%22%22%3B%0Aif%28typeof%20%28str%29%21%3D%22string%22%7C%7Cstr%2Elength%3D%3D%3D0%29%7B%0Areturn%20null%3B%0A%7D%0Avar%20iso%3Dstr%2Esplit%28%22%2D%22%29%3B%0Aif%28iso%2Elength%3D%3D%3D0%29%7B%0Areturn%20null%3B%0A%7D%0Avar%20date%3Dnew%20Date%28iso%5B0%5D%2Ciso%5B1%5D%2D1%2Ciso%5B2%5D%29%3B%0Adate%2EsetFullYear%28iso%5B0%5D%29%3B%0Adate%2EsetMonth%28iso%5B1%5D%2D1%29%3B%0Adate%2EsetDate%28iso%5B2%5D%29%3B%0Areturn%20date%3B%0A%7D%3B%0AMochiKit%2EDateTime%2E%5FisoRegexp%3D%2F%28%5Cd%7B4%2C%7D%29%28%3F%3A%2D%28%5Cd%7B1%2C2%7D%29%28%3F%3A%2D%28%5Cd%7B1%2C2%7D%29%28%3F%3A%5BT%20%5D%28%5Cd%7B1%2C2%7D%29%3A%28%5Cd%7B1%2C2%7D%29%28%3F%3A%3A%28%5Cd%7B1%2C2%7D%29%28%3F%3A%5C%2E%28%5Cd%2B%29%29%3F%29%3F%28%3F%3A%28Z%29%7C%28%5B%2B%2D%5D%29%28%5Cd%7B1%2C2%7D%29%28%3F%3A%3A%28%5Cd%7B1%2C2%7D%29%29%3F%29%3F%29%3F%29%3F%29%3F%2F%3B%0AMochiKit%2EDateTime%2EisoTimestamp%3Dfunction%28str%29%7B%0Astr%3Dstr%2B%22%22%3B%0Aif%28typeof%20%28str%29%21%3D%22string%22%7C%7Cstr%2Elength%3D%3D%3D0%29%7B%0Areturn%20null%3B%0A%7D%0Avar%20res%3Dstr%2Ematch%28MochiKit%2EDateTime%2E%5FisoRegexp%29%3B%0Aif%28typeof%20%28res%29%3D%3D%22undefined%22%7C%7Cres%3D%3D%3Dnull%29%7B%0Areturn%20null%3B%0A%7D%0Avar%20year%2C%5F227%2Cday%2Chour%2Cmin%2Csec%2Cmsec%3B%0Ayear%3DparseInt%28res%5B1%5D%2C10%29%3B%0Aif%28typeof%20%28res%5B2%5D%29%3D%3D%22undefined%22%7C%7Cres%5B2%5D%3D%3D%3D%22%22%29%7B%0Areturn%20new%20Date%28year%29%3B%0A%7D%0A%5F227%3DparseInt%28res%5B2%5D%2C10%29%2D1%3B%0Aday%3DparseInt%28res%5B3%5D%2C10%29%3B%0Aif%28typeof%20%28res%5B4%5D%29%3D%3D%22undefined%22%7C%7Cres%5B4%5D%3D%3D%3D%22%22%29%7B%0Areturn%20new%20Date%28year%2C%5F227%2Cday%29%3B%0A%7D%0Ahour%3DparseInt%28res%5B4%5D%2C10%29%3B%0Amin%3DparseInt%28res%5B5%5D%2C10%29%3B%0Asec%3D%28typeof%20%28res%5B6%5D%29%21%3D%22undefined%22%26%26res%5B6%5D%21%3D%3D%22%22%29%3FparseInt%28res%5B6%5D%2C10%29%3A0%3B%0Aif%28typeof%20%28res%5B7%5D%29%21%3D%22undefined%22%26%26res%5B7%5D%21%3D%3D%22%22%29%7B%0Amsec%3DMath%2Eround%281000%2AparseFloat%28%220%2E%22%2Bres%5B7%5D%29%29%3B%0A%7Delse%7B%0Amsec%3D0%3B%0A%7D%0Aif%28%28typeof%20%28res%5B8%5D%29%3D%3D%22undefined%22%7C%7Cres%5B8%5D%3D%3D%3D%22%22%29%26%26%28typeof%20%28res%5B9%5D%29%3D%3D%22undefined%22%7C%7Cres%5B9%5D%3D%3D%3D%22%22%29%29%7B%0Areturn%20new%20Date%28year%2C%5F227%2Cday%2Chour%2Cmin%2Csec%2Cmsec%29%3B%0A%7D%0Avar%20ofs%3B%0Aif%28typeof%20%28res%5B9%5D%29%21%3D%22undefined%22%26%26res%5B9%5D%21%3D%3D%22%22%29%7B%0Aofs%3DparseInt%28res%5B10%5D%2C10%29%2A3600000%3B%0Aif%28typeof%20%28res%5B11%5D%29%21%3D%22undefined%22%26%26res%5B11%5D%21%3D%3D%22%22%29%7B%0Aofs%2B%3DparseInt%28res%5B11%5D%2C10%29%2A60000%3B%0A%7D%0Aif%28res%5B9%5D%3D%3D%22%2D%22%29%7B%0Aofs%3D%2Dofs%3B%0A%7D%0A%7Delse%7B%0Aofs%3D0%3B%0A%7D%0Areturn%20new%20Date%28Date%2EUTC%28year%2C%5F227%2Cday%2Chour%2Cmin%2Csec%2Cmsec%29%2Dofs%29%3B%0A%7D%3B%0AMochiKit%2EDateTime%2EtoISOTime%3Dfunction%28date%2C%5F22f%29%7B%0Aif%28typeof%20%28date%29%3D%3D%22undefined%22%7C%7Cdate%3D%3D%3Dnull%29%7B%0Areturn%20null%3B%0A%7D%0Avar%20hh%3Ddate%2EgetHours%28%29%3B%0Avar%20mm%3Ddate%2EgetMinutes%28%29%3B%0Avar%20ss%3Ddate%2EgetSeconds%28%29%3B%0Avar%20lst%3D%5B%28%28%5F22f%26%26%28hh%3C10%29%29%3F%220%22%2Bhh%3Ahh%29%2C%28%28mm%3C10%29%3F%220%22%2Bmm%3Amm%29%2C%28%28ss%3C10%29%3F%220%22%2Bss%3Ass%29%5D%3B%0Areturn%20lst%2Ejoin%28%22%3A%22%29%3B%0A%7D%3B%0AMochiKit%2EDateTime%2EtoISOTimestamp%3Dfunction%28date%2C%5F235%29%7B%0Aif%28typeof%20%28date%29%3D%3D%22undefined%22%7C%7Cdate%3D%3D%3Dnull%29%7B%0Areturn%20null%3B%0A%7D%0Avar%20sep%3D%5F235%3F%22T%22%3A%22%20%22%3B%0Avar%20foot%3D%5F235%3F%22Z%22%3A%22%22%3B%0Aif%28%5F235%29%7B%0Adate%3Dnew%20Date%28date%2EgetTime%28%29%2B%28date%2EgetTimezoneOffset%28%29%2A60000%29%29%3B%0A%7D%0Areturn%20MochiKit%2EDateTime%2EtoISODate%28date%29%2Bsep%2BMochiKit%2EDateTime%2EtoISOTime%28date%2C%5F235%29%2Bfoot%3B%0A%7D%3B%0AMochiKit%2EDateTime%2EtoISODate%3Dfunction%28date%29%7B%0Aif%28typeof%20%28date%29%3D%3D%22undefined%22%7C%7Cdate%3D%3D%3Dnull%29%7B%0Areturn%20null%3B%0A%7D%0Avar%20%5F239%3DMochiKit%2EDateTime%2E%5FpadTwo%3B%0Avar%20%5F23a%3DMochiKit%2EDateTime%2E%5FpadFour%3B%0Areturn%20%5B%5F23a%28date%2EgetFullYear%28%29%29%2C%5F239%28date%2EgetMonth%28%29%2B1%29%2C%5F239%28date%2EgetDate%28%29%29%5D%2Ejoin%28%22%2D%22%29%3B%0A%7D%3B%0AMochiKit%2EDateTime%2EamericanDate%3Dfunction%28d%29%7B%0Ad%3Dd%2B%22%22%3B%0Aif%28typeof%20%28d%29%21%3D%22string%22%7C%7Cd%2Elength%3D%3D%3D0%29%7B%0Areturn%20null%3B%0A%7D%0Avar%20a%3Dd%2Esplit%28%22%2F%22%29%3B%0Areturn%20new%20Date%28a%5B2%5D%2Ca%5B0%5D%2D1%2Ca%5B1%5D%29%3B%0A%7D%3B%0AMochiKit%2EDateTime%2E%5FpadTwo%3Dfunction%28n%29%7B%0Areturn%20%28n%3E9%29%3Fn%3A%220%22%2Bn%3B%0A%7D%3B%0AMochiKit%2EDateTime%2E%5FpadFour%3Dfunction%28n%29%7B%0Aswitch%28n%2EtoString%28%29%2Elength%29%7B%0Acase%201%3A%0Areturn%20%22000%22%2Bn%3B%0Abreak%3B%0Acase%202%3A%0Areturn%20%2200%22%2Bn%3B%0Abreak%3B%0Acase%203%3A%0Areturn%20%220%22%2Bn%3B%0Abreak%3B%0Acase%204%3A%0Adefault%3A%0Areturn%20n%3B%0A%7D%0A%7D%3B%0AMochiKit%2EDateTime%2EtoPaddedAmericanDate%3Dfunction%28d%29%7B%0Aif%28typeof%20%28d%29%3D%3D%22undefined%22%7C%7Cd%3D%3D%3Dnull%29%7B%0Areturn%20null%3B%0A%7D%0Avar%20%5F240%3DMochiKit%2EDateTime%2E%5FpadTwo%3B%0Areturn%20%5B%5F240%28d%2EgetMonth%28%29%2B1%29%2C%5F240%28d%2EgetDate%28%29%29%2Cd%2EgetFullYear%28%29%5D%2Ejoin%28%22%2F%22%29%3B%0A%7D%3B%0AMochiKit%2EDateTime%2EtoAmericanDate%3Dfunction%28d%29%7B%0Aif%28typeof%20%28d%29%3D%3D%22undefined%22%7C%7Cd%3D%3D%3Dnull%29%7B%0Areturn%20null%3B%0A%7D%0Areturn%20%5Bd%2EgetMonth%28%29%2B1%2Cd%2EgetDate%28%29%2Cd%2EgetFullYear%28%29%5D%2Ejoin%28%22%2F%22%29%3B%0A%7D%3B%0AMochiKit%2EDateTime%2EEXPORT%3D%5B%22isoDate%22%2C%22isoTimestamp%22%2C%22toISOTime%22%2C%22toISOTimestamp%22%2C%22toISODate%22%2C%22americanDate%22%2C%22toPaddedAmericanDate%22%2C%22toAmericanDate%22%5D%3B%0AMochiKit%2EDateTime%2EEXPORT%5FOK%3D%5B%5D%3B%0AMochiKit%2EDateTime%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3AMochiKit%2EDateTime%2EEXPORT%2C%22%3Aall%22%3AMochiKit%2EDateTime%2EEXPORT%7D%3B%0AMochiKit%2EDateTime%2E%5F%5Fnew%5F%5F%3Dfunction%28%29%7B%0Avar%20base%3Dthis%2ENAME%2B%22%2E%22%3B%0Afor%28var%20k%20in%20this%29%7B%0Avar%20o%3Dthis%5Bk%5D%3B%0Aif%28typeof%20%28o%29%3D%3D%22function%22%26%26typeof%20%28o%2ENAME%29%3D%3D%22undefined%22%29%7B%0Atry%7B%0Ao%2ENAME%3Dbase%2Bk%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0A%7D%0A%7D%0A%7D%3B%0AMochiKit%2EDateTime%2E%5F%5Fnew%5F%5F%28%29%3B%0Aif%28typeof%20%28MochiKit%2EBase%29%21%3D%22undefined%22%29%7B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2EDateTime%29%3B%0A%7Delse%7B%0A%28function%28%5F245%2C%5F246%29%7B%0Aif%28%28typeof%20%28JSAN%29%3D%3D%22undefined%22%26%26typeof%20%28dojo%29%3D%3D%22undefined%22%29%7C%7C%28MochiKit%2E%5F%5Fexport%5F%5F%3D%3D%3Dfalse%29%29%7B%0Avar%20all%3D%5F246%2EEXPORT%5FTAGS%5B%22%3Aall%22%5D%3B%0Afor%28var%20i%3D0%3Bi%3Call%2Elength%3Bi%2B%2B%29%7B%0A%5F245%5Ball%5Bi%5D%5D%3D%5F246%5Ball%5Bi%5D%5D%3B%0A%7D%0A%7D%0A%7D%29%28this%2CMochiKit%2EDateTime%29%3B%0A%7D%0AMochiKit%2EBase%2E%5Fdeps%28%22Format%22%2C%5B%22Base%22%5D%29%3B%0AMochiKit%2EFormat%2ENAME%3D%22MochiKit%2EFormat%22%3B%0AMochiKit%2EFormat%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EFormat%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2EFormat%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EFormat%2E%5FnumberFormatter%3Dfunction%28%5F249%2C%5F24a%2C%5F24b%2C%5F24c%2C%5F24d%2C%5F24e%2C%5F24f%2C%5F250%2C%5F251%29%7B%0Areturn%20function%28num%29%7B%0Anum%3DparseFloat%28num%29%3B%0Aif%28typeof%20%28num%29%3D%3D%22undefined%22%7C%7Cnum%3D%3D%3Dnull%7C%7CisNaN%28num%29%29%7B%0Areturn%20%5F249%3B%0A%7D%0Avar%20%5F253%3D%5F24a%3B%0Avar%20%5F254%3D%5F24b%3B%0Aif%28num%3C0%29%7B%0Anum%3D%2Dnum%3B%0A%7Delse%7B%0A%5F253%3D%5F253%2Ereplace%28%2F%2D%2F%2C%22%22%29%3B%0A%7D%0Avar%20me%3Darguments%2Ecallee%3B%0Avar%20fmt%3DMochiKit%2EFormat%2EformatLocale%28%5F24c%29%3B%0Aif%28%5F24d%29%7B%0Anum%3Dnum%2A100%3B%0A%5F254%3Dfmt%2Epercent%2B%5F254%3B%0A%7D%0Anum%3DMochiKit%2EFormat%2EroundToFixed%28num%2C%5F24e%29%3B%0Avar%20%5F257%3Dnum%2Esplit%28%2F%5C%2E%2F%29%3B%0Avar%20%5F258%3D%5F257%5B0%5D%3B%0Avar%20frac%3D%28%5F257%2Elength%3D%3D1%29%3F%22%22%3A%5F257%5B1%5D%3B%0Avar%20res%3D%22%22%3B%0Awhile%28%5F258%2Elength%3C%5F24f%29%7B%0A%5F258%3D%220%22%2B%5F258%3B%0A%7D%0Aif%28%5F250%29%7B%0Awhile%28%5F258%2Elength%3E%5F250%29%7B%0Avar%20i%3D%5F258%2Elength%2D%5F250%3B%0Ares%3Dfmt%2Eseparator%2B%5F258%2Esubstring%28i%2C%5F258%2Elength%29%2Bres%3B%0A%5F258%3D%5F258%2Esubstring%280%2Ci%29%3B%0A%7D%0A%7D%0Ares%3D%5F258%2Bres%3B%0Aif%28%5F24e%3E0%29%7B%0Awhile%28frac%2Elength%3C%5F251%29%7B%0Afrac%3Dfrac%2B%220%22%3B%0A%7D%0Ares%3Dres%2Bfmt%2Edecimal%2Bfrac%3B%0A%7D%0Areturn%20%5F253%2Bres%2B%5F254%3B%0A%7D%3B%0A%7D%3B%0AMochiKit%2EFormat%2EnumberFormatter%3Dfunction%28%5F25c%2C%5F25d%2C%5F25e%29%7B%0Aif%28typeof%20%28%5F25d%29%3D%3D%22undefined%22%29%7B%0A%5F25d%3D%22%22%3B%0A%7D%0Avar%20%5F25f%3D%5F25c%2Ematch%28%2F%28%28%3F%3A%5B0%23%5D%2B%2C%29%3F%5B0%23%5D%2B%29%28%3F%3A%5C%2E%28%5B0%23%5D%2B%29%29%3F%28%25%29%3F%2F%29%3B%0Aif%28%21%5F25f%29%7B%0Athrow%20TypeError%28%22Invalid%20pattern%22%29%3B%0A%7D%0Avar%20%5F260%3D%5F25c%2Esubstr%280%2C%5F25f%2Eindex%29%3B%0Avar%20%5F261%3D%5F25c%2Esubstr%28%5F25f%2Eindex%2B%5F25f%5B0%5D%2Elength%29%3B%0Aif%28%5F260%2Esearch%28%2F%2D%2F%29%3D%3D%2D1%29%7B%0A%5F260%3D%5F260%2B%22%2D%22%3B%0A%7D%0Avar%20%5F262%3D%5F25f%5B1%5D%3B%0Avar%20frac%3D%28typeof%20%28%5F25f%5B2%5D%29%3D%3D%22string%22%26%26%5F25f%5B2%5D%21%3D%22%22%29%3F%5F25f%5B2%5D%3A%22%22%3B%0Avar%20%5F264%3D%28typeof%20%28%5F25f%5B3%5D%29%3D%3D%22string%22%26%26%5F25f%5B3%5D%21%3D%22%22%29%3B%0Avar%20tmp%3D%5F262%2Esplit%28%2F%2C%2F%29%3B%0Avar%20%5F266%3B%0Aif%28typeof%20%28%5F25e%29%3D%3D%22undefined%22%29%7B%0A%5F25e%3D%22default%22%3B%0A%7D%0Aif%28tmp%2Elength%3D%3D1%29%7B%0A%5F266%3Dnull%3B%0A%7Delse%7B%0A%5F266%3Dtmp%5B1%5D%2Elength%3B%0A%7D%0Avar%20%5F267%3D%5F262%2Elength%2D%5F262%2Ereplace%28%2F0%2Fg%2C%22%22%29%2Elength%3B%0Avar%20%5F268%3Dfrac%2Elength%2Dfrac%2Ereplace%28%2F0%2Fg%2C%22%22%29%2Elength%3B%0Avar%20%5F269%3Dfrac%2Elength%3B%0Avar%20rval%3DMochiKit%2EFormat%2E%5FnumberFormatter%28%5F25d%2C%5F260%2C%5F261%2C%5F25e%2C%5F264%2C%5F269%2C%5F267%2C%5F266%2C%5F268%29%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28m%29%7B%0Avar%20fn%3Darguments%2Ecallee%3B%0Avar%20args%3Dm%2Econcat%28arguments%29%3B%0Arval%2Erepr%3Dfunction%28%29%7B%0Areturn%20%5Bself%2ENAME%2C%22%28%22%2Cmap%28m%2Erepr%2Cargs%29%2Ejoin%28%22%2C%20%22%29%2C%22%29%22%5D%2Ejoin%28%22%22%29%3B%0A%7D%3B%0A%7D%0Areturn%20rval%3B%0A%7D%3B%0AMochiKit%2EFormat%2EformatLocale%3Dfunction%28%5F26e%29%7B%0Aif%28typeof%20%28%5F26e%29%3D%3D%22undefined%22%7C%7C%5F26e%3D%3D%3Dnull%29%7B%0A%5F26e%3D%22default%22%3B%0A%7D%0Aif%28typeof%20%28%5F26e%29%3D%3D%22string%22%29%7B%0Avar%20rval%3DMochiKit%2EFormat%2ELOCALE%5B%5F26e%5D%3B%0Aif%28typeof%20%28rval%29%3D%3D%22string%22%29%7B%0Arval%3Darguments%2Ecallee%28rval%29%3B%0AMochiKit%2EFormat%2ELOCALE%5B%5F26e%5D%3Drval%3B%0A%7D%0Areturn%20rval%3B%0A%7Delse%7B%0Areturn%20%5F26e%3B%0A%7D%0A%7D%3B%0AMochiKit%2EFormat%2EtwoDigitAverage%3Dfunction%28%5F270%2C%5F271%29%7B%0Aif%28%5F271%29%7B%0Avar%20res%3D%5F270%2F%5F271%3B%0Aif%28%21isNaN%28res%29%29%7B%0Areturn%20MochiKit%2EFormat%2EtwoDigitFloat%28res%29%3B%0A%7D%0A%7D%0Areturn%20%220%22%3B%0A%7D%3B%0AMochiKit%2EFormat%2EtwoDigitFloat%3Dfunction%28%5F273%29%7B%0Avar%20res%3DroundToFixed%28%5F273%2C2%29%3B%0Aif%28res%2EindexOf%28%22%2E00%22%29%3E0%29%7B%0Areturn%20res%2Esubstring%280%2Cres%2Elength%2D3%29%3B%0A%7Delse%7B%0Aif%28res%2EcharAt%28res%2Elength%2D1%29%3D%3D%220%22%29%7B%0Areturn%20res%2Esubstring%280%2Cres%2Elength%2D1%29%3B%0A%7Delse%7B%0Areturn%20res%3B%0A%7D%0A%7D%0A%7D%3B%0AMochiKit%2EFormat%2Elstrip%3Dfunction%28str%2C%5F276%29%7B%0Astr%3Dstr%2B%22%22%3B%0Aif%28typeof%20%28str%29%21%3D%22string%22%29%7B%0Areturn%20null%3B%0A%7D%0Aif%28%21%5F276%29%7B%0Areturn%20str%2Ereplace%28%2F%5E%5Cs%2B%2F%2C%22%22%29%3B%0A%7Delse%7B%0Areturn%20str%2Ereplace%28new%20RegExp%28%22%5E%5B%22%2B%5F276%2B%22%5D%2B%22%29%2C%22%22%29%3B%0A%7D%0A%7D%3B%0AMochiKit%2EFormat%2Erstrip%3Dfunction%28str%2C%5F278%29%7B%0Astr%3Dstr%2B%22%22%3B%0Aif%28typeof%20%28str%29%21%3D%22string%22%29%7B%0Areturn%20null%3B%0A%7D%0Aif%28%21%5F278%29%7B%0Areturn%20str%2Ereplace%28%2F%5Cs%2B%24%2F%2C%22%22%29%3B%0A%7Delse%7B%0Areturn%20str%2Ereplace%28new%20RegExp%28%22%5B%22%2B%5F278%2B%22%5D%2B%24%22%29%2C%22%22%29%3B%0A%7D%0A%7D%3B%0AMochiKit%2EFormat%2Estrip%3Dfunction%28str%2C%5F27a%29%7B%0Avar%20self%3DMochiKit%2EFormat%3B%0Areturn%20self%2Erstrip%28self%2Elstrip%28str%2C%5F27a%29%2C%5F27a%29%3B%0A%7D%3B%0AMochiKit%2EFormat%2EtruncToFixed%3Dfunction%28%5F27c%2C%5F27d%29%7B%0Avar%20res%3DMath%2Efloor%28%5F27c%29%2EtoFixed%280%29%3B%0Aif%28%5F27c%3C0%29%7B%0Ares%3DMath%2Eceil%28%5F27c%29%2EtoFixed%280%29%3B%0Aif%28res%2EcharAt%280%29%21%3D%22%2D%22%26%26%5F27d%3E0%29%7B%0Ares%3D%22%2D%22%2Bres%3B%0A%7D%0A%7D%0Aif%28res%2EindexOf%28%22e%22%29%3C0%26%26%5F27d%3E0%29%7B%0Avar%20tail%3D%5F27c%2EtoString%28%29%3B%0Aif%28tail%2EindexOf%28%22e%22%29%3E0%29%7B%0Atail%3D%22%2E%22%3B%0A%7Delse%7B%0Aif%28tail%2EindexOf%28%22%2E%22%29%3C0%29%7B%0Atail%3D%22%2E%22%3B%0A%7Delse%7B%0Atail%3Dtail%2Esubstring%28tail%2EindexOf%28%22%2E%22%29%29%3B%0A%7D%0A%7D%0Aif%28tail%2Elength%2D1%3E%5F27d%29%7B%0Atail%3Dtail%2Esubstring%280%2C%5F27d%2B1%29%3B%0A%7D%0Awhile%28tail%2Elength%2D1%3C%5F27d%29%7B%0Atail%2B%3D%220%22%3B%0A%7D%0Ares%2B%3Dtail%3B%0A%7D%0Areturn%20res%3B%0A%7D%3B%0AMochiKit%2EFormat%2EroundToFixed%3Dfunction%28%5F280%2C%5F281%29%7B%0Avar%20%5F282%3DMath%2Eabs%28%5F280%29%2B0%2E5%2AMath%2Epow%2810%2C%2D%5F281%29%3B%0Avar%20res%3DMochiKit%2EFormat%2EtruncToFixed%28%5F282%2C%5F281%29%3B%0Aif%28%5F280%3C0%29%7B%0Ares%3D%22%2D%22%2Bres%3B%0A%7D%0Areturn%20res%3B%0A%7D%3B%0AMochiKit%2EFormat%2EpercentFormat%3Dfunction%28%5F284%29%7B%0Areturn%20MochiKit%2EFormat%2EtwoDigitFloat%28100%2A%5F284%29%2B%22%25%22%3B%0A%7D%3B%0AMochiKit%2EFormat%2EEXPORT%3D%5B%22truncToFixed%22%2C%22roundToFixed%22%2C%22numberFormatter%22%2C%22formatLocale%22%2C%22twoDigitAverage%22%2C%22twoDigitFloat%22%2C%22percentFormat%22%2C%22lstrip%22%2C%22rstrip%22%2C%22strip%22%5D%3B%0AMochiKit%2EFormat%2ELOCALE%3D%7Ben%5FUS%3A%7Bseparator%3A%22%2C%22%2Cdecimal%3A%22%2E%22%2Cpercent%3A%22%25%22%7D%2Cde%5FDE%3A%7Bseparator%3A%22%2E%22%2Cdecimal%3A%22%2C%22%2Cpercent%3A%22%25%22%7D%2Cpt%5FBR%3A%7Bseparator%3A%22%2E%22%2Cdecimal%3A%22%2C%22%2Cpercent%3A%22%25%22%7D%2Cfr%5FFR%3A%7Bseparator%3A%22%20%22%2Cdecimal%3A%22%2C%22%2Cpercent%3A%22%25%22%7D%2C%22default%22%3A%22en%5FUS%22%7D%3B%0AMochiKit%2EFormat%2EEXPORT%5FOK%3D%5B%5D%3B%0AMochiKit%2EFormat%2EEXPORT%5FTAGS%3D%7B%22%3Aall%22%3AMochiKit%2EFormat%2EEXPORT%2C%22%3Acommon%22%3AMochiKit%2EFormat%2EEXPORT%7D%3B%0AMochiKit%2EFormat%2E%5F%5Fnew%5F%5F%3Dfunction%28%29%7B%0Avar%20base%3Dthis%2ENAME%2B%22%2E%22%3B%0Avar%20k%2Cv%2Co%3B%0Afor%28k%20in%20this%2ELOCALE%29%7B%0Ao%3Dthis%2ELOCALE%5Bk%5D%3B%0Aif%28typeof%20%28o%29%3D%3D%22object%22%29%7B%0Ao%2Erepr%3Dfunction%28%29%7B%0Areturn%20this%2ENAME%3B%0A%7D%3B%0Ao%2ENAME%3Dbase%2B%22LOCALE%2E%22%2Bk%3B%0A%7D%0A%7D%0Afor%28k%20in%20this%29%7B%0Ao%3Dthis%5Bk%5D%3B%0Aif%28typeof%20%28o%29%3D%3D%22function%22%26%26typeof%20%28o%2ENAME%29%3D%3D%22undefined%22%29%7B%0Atry%7B%0Ao%2ENAME%3Dbase%2Bk%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0A%7D%0A%7D%0A%7D%3B%0AMochiKit%2EFormat%2E%5F%5Fnew%5F%5F%28%29%3B%0Aif%28typeof%20%28MochiKit%2EBase%29%21%3D%22undefined%22%29%7B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2EFormat%29%3B%0A%7Delse%7B%0A%28function%28%5F289%2C%5F28a%29%7B%0Aif%28%28typeof%20%28JSAN%29%3D%3D%22undefined%22%26%26typeof%20%28dojo%29%3D%3D%22undefined%22%29%7C%7C%28MochiKit%2E%5F%5Fexport%5F%5F%3D%3D%3Dfalse%29%29%7B%0Avar%20all%3D%5F28a%2EEXPORT%5FTAGS%5B%22%3Aall%22%5D%3B%0Afor%28var%20i%3D0%3Bi%3Call%2Elength%3Bi%2B%2B%29%7B%0A%5F289%5Ball%5Bi%5D%5D%3D%5F28a%5Ball%5Bi%5D%5D%3B%0A%7D%0A%7D%0A%7D%29%28this%2CMochiKit%2EFormat%29%3B%0A%7D%0AMochiKit%2EBase%2E%5Fdeps%28%22Async%22%2C%5B%22Base%22%5D%29%3B%0AMochiKit%2EAsync%2ENAME%3D%22MochiKit%2EAsync%22%3B%0AMochiKit%2EAsync%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EAsync%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2EAsync%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EAsync%2EDeferred%3Dfunction%28%5F28d%29%7B%0Athis%2Echain%3D%5B%5D%3B%0Athis%2Eid%3Dthis%2E%5FnextId%28%29%3B%0Athis%2Efired%3D%2D1%3B%0Athis%2Epaused%3D0%3B%0Athis%2Eresults%3D%5Bnull%2Cnull%5D%3B%0Athis%2Ecanceller%3D%5F28d%3B%0Athis%2EsilentlyCancelled%3Dfalse%3B%0Athis%2Echained%3Dfalse%3B%0A%7D%3B%0AMochiKit%2EAsync%2EDeferred%2Eprototype%3D%7Brepr%3Afunction%28%29%7B%0Avar%20%5F28e%3B%0Aif%28this%2Efired%3D%3D%2D1%29%7B%0A%5F28e%3D%22unfired%22%3B%0A%7Delse%7B%0Aif%28this%2Efired%3D%3D%3D0%29%7B%0A%5F28e%3D%22success%22%3B%0A%7Delse%7B%0A%5F28e%3D%22error%22%3B%0A%7D%0A%7D%0Areturn%20%22Deferred%28%22%2Bthis%2Eid%2B%22%2C%20%22%2B%5F28e%2B%22%29%22%3B%0A%7D%2CtoString%3AMochiKit%2EBase%2EforwardCall%28%22repr%22%29%2C%5FnextId%3AMochiKit%2EBase%2Ecounter%28%29%2Ccancel%3Afunction%28%29%7B%0Avar%20self%3DMochiKit%2EAsync%3B%0Aif%28this%2Efired%3D%3D%2D1%29%7B%0Aif%28this%2Ecanceller%29%7B%0Athis%2Ecanceller%28this%29%3B%0A%7Delse%7B%0Athis%2EsilentlyCancelled%3Dtrue%3B%0A%7D%0Aif%28this%2Efired%3D%3D%2D1%29%7B%0Athis%2Eerrback%28new%20self%2ECancelledError%28this%29%29%3B%0A%7D%0A%7Delse%7B%0Aif%28%28this%2Efired%3D%3D%3D0%29%26%26%28this%2Eresults%5B0%5D%20instanceof%20self%2EDeferred%29%29%7B%0Athis%2Eresults%5B0%5D%2Ecancel%28%29%3B%0A%7D%0A%7D%0A%7D%2C%5Fresback%3Afunction%28res%29%7B%0Athis%2Efired%3D%28%28res%20instanceof%20Error%29%3F1%3A0%29%3B%0Athis%2Eresults%5Bthis%2Efired%5D%3Dres%3B%0Athis%2E%5Ffire%28%29%3B%0A%7D%2C%5Fcheck%3Afunction%28%29%7B%0Aif%28this%2Efired%21%3D%2D1%29%7B%0Aif%28%21this%2EsilentlyCancelled%29%7B%0Athrow%20new%20MochiKit%2EAsync%2EAlreadyCalledError%28this%29%3B%0A%7D%0Athis%2EsilentlyCancelled%3Dfalse%3B%0Areturn%3B%0A%7D%0A%7D%2Ccallback%3Afunction%28res%29%7B%0Athis%2E%5Fcheck%28%29%3B%0Aif%28res%20instanceof%20MochiKit%2EAsync%2EDeferred%29%7B%0Athrow%20new%20Error%28%22Deferred%20instances%20can%20only%20be%20chained%20if%20they%20are%20the%20result%20of%20a%20callback%22%29%3B%0A%7D%0Athis%2E%5Fresback%28res%29%3B%0A%7D%2Cerrback%3Afunction%28res%29%7B%0Athis%2E%5Fcheck%28%29%3B%0Avar%20self%3DMochiKit%2EAsync%3B%0Aif%28res%20instanceof%20self%2EDeferred%29%7B%0Athrow%20new%20Error%28%22Deferred%20instances%20can%20only%20be%20chained%20if%20they%20are%20the%20result%20of%20a%20callback%22%29%3B%0A%7D%0Aif%28%21%28res%20instanceof%20Error%29%29%7B%0Ares%3Dnew%20self%2EGenericError%28res%29%3B%0A%7D%0Athis%2E%5Fresback%28res%29%3B%0A%7D%2CaddBoth%3Afunction%28fn%29%7B%0Aif%28arguments%2Elength%3E1%29%7B%0Afn%3DMochiKit%2EBase%2Epartial%2Eapply%28null%2Carguments%29%3B%0A%7D%0Areturn%20this%2EaddCallbacks%28fn%2Cfn%29%3B%0A%7D%2CaddCallback%3Afunction%28fn%29%7B%0Aif%28arguments%2Elength%3E1%29%7B%0Afn%3DMochiKit%2EBase%2Epartial%2Eapply%28null%2Carguments%29%3B%0A%7D%0Areturn%20this%2EaddCallbacks%28fn%2Cnull%29%3B%0A%7D%2CaddErrback%3Afunction%28fn%29%7B%0Aif%28arguments%2Elength%3E1%29%7B%0Afn%3DMochiKit%2EBase%2Epartial%2Eapply%28null%2Carguments%29%3B%0A%7D%0Areturn%20this%2EaddCallbacks%28null%2Cfn%29%3B%0A%7D%2CaddCallbacks%3Afunction%28cb%2Ceb%29%7B%0Aif%28this%2Echained%29%7B%0Athrow%20new%20Error%28%22Chained%20Deferreds%20can%20not%20be%20re%2Dused%22%29%3B%0A%7D%0Athis%2Echain%2Epush%28%5Bcb%2Ceb%5D%29%3B%0Aif%28this%2Efired%3E%3D0%29%7B%0Athis%2E%5Ffire%28%29%3B%0A%7D%0Areturn%20this%3B%0A%7D%2C%5Ffire%3Afunction%28%29%7B%0Avar%20%5F299%3Dthis%2Echain%3B%0Avar%20%5F29a%3Dthis%2Efired%3B%0Avar%20res%3Dthis%2Eresults%5B%5F29a%5D%3B%0Avar%20self%3Dthis%3B%0Avar%20cb%3Dnull%3B%0Awhile%28%5F299%2Elength%3E0%26%26this%2Epaused%3D%3D%3D0%29%7B%0Avar%20pair%3D%5F299%2Eshift%28%29%3B%0Avar%20f%3Dpair%5B%5F29a%5D%3B%0Aif%28f%3D%3D%3Dnull%29%7B%0Acontinue%3B%0A%7D%0Atry%7B%0Ares%3Df%28res%29%3B%0A%5F29a%3D%28%28res%20instanceof%20Error%29%3F1%3A0%29%3B%0Aif%28res%20instanceof%20MochiKit%2EAsync%2EDeferred%29%7B%0Acb%3Dfunction%28res%29%7B%0Aself%2E%5Fresback%28res%29%3B%0Aself%2Epaused%2D%2D%3B%0Aif%28%28self%2Epaused%3D%3D%3D0%29%26%26%28self%2Efired%3E%3D0%29%29%7B%0Aself%2E%5Ffire%28%29%3B%0A%7D%0A%7D%3B%0Athis%2Epaused%2B%2B%3B%0A%7D%0A%7D%0Acatch%28err%29%7B%0A%5F29a%3D1%3B%0Aif%28%21%28err%20instanceof%20Error%29%29%7B%0Aerr%3Dnew%20MochiKit%2EAsync%2EGenericError%28err%29%3B%0A%7D%0Ares%3Derr%3B%0A%7D%0A%7D%0Athis%2Efired%3D%5F29a%3B%0Athis%2Eresults%5B%5F29a%5D%3Dres%3B%0Aif%28cb%26%26this%2Epaused%29%7B%0Ares%2EaddBoth%28cb%29%3B%0Ares%2Echained%3Dtrue%3B%0A%7D%0A%7D%7D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EAsync%2C%7BevalJSONRequest%3Afunction%28req%29%7B%0Areturn%20MochiKit%2EBase%2EevalJSON%28req%2EresponseText%29%3B%0A%7D%2Csucceed%3Afunction%28%5F2a2%29%7B%0Avar%20d%3Dnew%20MochiKit%2EAsync%2EDeferred%28%29%3B%0Ad%2Ecallback%2Eapply%28d%2Carguments%29%3B%0Areturn%20d%3B%0A%7D%2Cfail%3Afunction%28%5F2a4%29%7B%0Avar%20d%3Dnew%20MochiKit%2EAsync%2EDeferred%28%29%3B%0Ad%2Eerrback%2Eapply%28d%2Carguments%29%3B%0Areturn%20d%3B%0A%7D%2CgetXMLHttpRequest%3Afunction%28%29%7B%0Avar%20self%3Darguments%2Ecallee%3B%0Aif%28%21self%2EXMLHttpRequest%29%7B%0Avar%20%5F2a7%3D%5Bfunction%28%29%7B%0Areturn%20new%20XMLHttpRequest%28%29%3B%0A%7D%2Cfunction%28%29%7B%0Areturn%20new%20ActiveXObject%28%22Msxml2%2EXMLHTTP%22%29%3B%0A%7D%2Cfunction%28%29%7B%0Areturn%20new%20ActiveXObject%28%22Microsoft%2EXMLHTTP%22%29%3B%0A%7D%2Cfunction%28%29%7B%0Areturn%20new%20ActiveXObject%28%22Msxml2%2EXMLHTTP%2E4%2E0%22%29%3B%0A%7D%2Cfunction%28%29%7B%0Athrow%20new%20MochiKit%2EAsync%2EBrowserComplianceError%28%22Browser%20does%20not%20support%20XMLHttpRequest%22%29%3B%0A%7D%5D%3B%0Afor%28var%20i%3D0%3Bi%3C%5F2a7%2Elength%3Bi%2B%2B%29%7B%0Avar%20func%3D%5F2a7%5Bi%5D%3B%0Atry%7B%0Aself%2EXMLHttpRequest%3Dfunc%3B%0Areturn%20func%28%29%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0A%7D%0A%7D%0Areturn%20self%2EXMLHttpRequest%28%29%3B%0A%7D%2C%5Fxhr%5Fonreadystatechange%3Afunction%28d%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28this%2EreadyState%3D%3D4%29%7B%0Atry%7B%0Athis%2Eonreadystatechange%3Dnull%3B%0A%7D%0Acatch%28e%29%7B%0Atry%7B%0Athis%2Eonreadystatechange%3Dm%2Enoop%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0A%7D%0Avar%20%5F2ac%3Dnull%3B%0Atry%7B%0A%5F2ac%3Dthis%2Estatus%3B%0Aif%28%21%5F2ac%26%26m%2EisNotEmpty%28this%2EresponseText%29%29%7B%0A%5F2ac%3D304%3B%0A%7D%0A%7D%0Acatch%28e%29%7B%0A%7D%0Aif%28%5F2ac%3D%3D200%7C%7C%5F2ac%3D%3D201%7C%7C%5F2ac%3D%3D204%7C%7C%5F2ac%3D%3D304%7C%7C%5F2ac%3D%3D1223%29%7B%0Ad%2Ecallback%28this%29%3B%0A%7Delse%7B%0Avar%20err%3Dnew%20MochiKit%2EAsync%2EXMLHttpRequestError%28this%2C%22Request%20failed%22%29%3B%0Aif%28err%2Enumber%29%7B%0Ad%2Eerrback%28err%29%3B%0A%7Delse%7B%0Ad%2Eerrback%28err%29%3B%0A%7D%0A%7D%0A%7D%0A%7D%2C%5Fxhr%5Fcanceller%3Afunction%28req%29%7B%0Atry%7B%0Areq%2Eonreadystatechange%3Dnull%3B%0A%7D%0Acatch%28e%29%7B%0Atry%7B%0Areq%2Eonreadystatechange%3DMochiKit%2EBase%2Enoop%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0A%7D%0Areq%2Eabort%28%29%3B%0A%7D%2CsendXMLHttpRequest%3Afunction%28req%2C%5F2b0%29%7B%0Aif%28typeof%20%28%5F2b0%29%3D%3D%22undefined%22%7C%7C%5F2b0%3D%3D%3Dnull%29%7B%0A%5F2b0%3D%22%22%3B%0A%7D%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20self%3DMochiKit%2EAsync%3B%0Avar%20d%3Dnew%20self%2EDeferred%28m%2Epartial%28self%2E%5Fxhr%5Fcanceller%2Creq%29%29%3B%0Atry%7B%0Areq%2Eonreadystatechange%3Dm%2Ebind%28self%2E%5Fxhr%5Fonreadystatechange%2Creq%2Cd%29%3B%0Areq%2Esend%28%5F2b0%29%3B%0A%7D%0Acatch%28e%29%7B%0Atry%7B%0Areq%2Eonreadystatechange%3Dnull%3B%0A%7D%0Acatch%28ignore%29%7B%0A%7D%0Ad%2Eerrback%28e%29%3B%0A%7D%0Areturn%20d%3B%0A%7D%2CdoXHR%3Afunction%28url%2Copts%29%7B%0Avar%20self%3DMochiKit%2EAsync%3B%0Areturn%20self%2EcallLater%280%2Cself%2E%5FdoXHR%2Curl%2Copts%29%3B%0A%7D%2C%5FdoXHR%3Afunction%28url%2Copts%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Aopts%3Dm%2Eupdate%28%7Bmethod%3A%22GET%22%2CsendContent%3A%22%22%7D%2Copts%29%3B%0Avar%20self%3DMochiKit%2EAsync%3B%0Avar%20req%3Dself%2EgetXMLHttpRequest%28%29%3B%0Aif%28opts%2EqueryString%29%7B%0Avar%20qs%3Dm%2EqueryString%28opts%2EqueryString%29%3B%0Aif%28qs%29%7B%0Aurl%2B%3D%22%3F%22%2Bqs%3B%0A%7D%0A%7D%0Aif%28%22username%22%20in%20opts%29%7B%0Areq%2Eopen%28opts%2Emethod%2Curl%2Ctrue%2Copts%2Eusername%2Copts%2Epassword%29%3B%0A%7Delse%7B%0Areq%2Eopen%28opts%2Emethod%2Curl%2Ctrue%29%3B%0A%7D%0Aif%28req%2EoverrideMimeType%26%26opts%2EmimeType%29%7B%0Areq%2EoverrideMimeType%28opts%2EmimeType%29%3B%0A%7D%0Areq%2EsetRequestHeader%28%22X%2DRequested%2DWith%22%2C%22XMLHttpRequest%22%29%3B%0Aif%28opts%2Eheaders%29%7B%0Avar%20%5F2bd%3Dopts%2Eheaders%3B%0Aif%28%21m%2EisArrayLike%28%5F2bd%29%29%7B%0A%5F2bd%3Dm%2Eitems%28%5F2bd%29%3B%0A%7D%0Afor%28var%20i%3D0%3Bi%3C%5F2bd%2Elength%3Bi%2B%2B%29%7B%0Avar%20%5F2bf%3D%5F2bd%5Bi%5D%3B%0Avar%20name%3D%5F2bf%5B0%5D%3B%0Avar%20%5F2c1%3D%5F2bf%5B1%5D%3B%0Areq%2EsetRequestHeader%28name%2C%5F2c1%29%3B%0A%7D%0A%7D%0Areturn%20self%2EsendXMLHttpRequest%28req%2Copts%2EsendContent%29%3B%0A%7D%2C%5FbuildURL%3Afunction%28url%29%7B%0Aif%28arguments%2Elength%3E1%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20qs%3Dm%2EqueryString%2Eapply%28null%2Cm%2Eextend%28null%2Carguments%2C1%29%29%3B%0Aif%28qs%29%7B%0Areturn%20url%2B%22%3F%22%2Bqs%3B%0A%7D%0A%7D%0Areturn%20url%3B%0A%7D%2CdoSimpleXMLHttpRequest%3Afunction%28url%29%7B%0Avar%20self%3DMochiKit%2EAsync%3B%0Aurl%3Dself%2E%5FbuildURL%2Eapply%28self%2Carguments%29%3B%0Areturn%20self%2EdoXHR%28url%29%3B%0A%7D%2CloadJSONDoc%3Afunction%28url%29%7B%0Avar%20self%3DMochiKit%2EAsync%3B%0Aurl%3Dself%2E%5FbuildURL%2Eapply%28self%2Carguments%29%3B%0Avar%20d%3Dself%2EdoXHR%28url%2C%7B%22mimeType%22%3A%22text%2Fplain%22%2C%22headers%22%3A%5B%5B%22Accept%22%2C%22application%2Fjson%22%5D%5D%7D%29%3B%0Ad%3Dd%2EaddCallback%28self%2EevalJSONRequest%29%3B%0Areturn%20d%3B%0A%7D%2Cwait%3Afunction%28%5F2ca%2C%5F2cb%29%7B%0Avar%20d%3Dnew%20MochiKit%2EAsync%2EDeferred%28%29%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28typeof%20%28%5F2cb%29%21%3D%22undefined%22%29%7B%0Ad%2EaddCallback%28function%28%29%7B%0Areturn%20%5F2cb%3B%0A%7D%29%3B%0A%7D%0Avar%20%5F2ce%3DsetTimeout%28m%2Ebind%28%22callback%22%2Cd%29%2CMath%2Efloor%28%5F2ca%2A1000%29%29%3B%0Ad%2Ecanceller%3Dfunction%28%29%7B%0Atry%7B%0AclearTimeout%28%5F2ce%29%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0A%7D%3B%0Areturn%20d%3B%0A%7D%2CcallLater%3Afunction%28%5F2cf%2Cfunc%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20%5F2d2%3Dm%2Epartial%2Eapply%28m%2Cm%2Eextend%28null%2Carguments%2C1%29%29%3B%0Areturn%20MochiKit%2EAsync%2Ewait%28%5F2cf%29%2EaddCallback%28function%28res%29%7B%0Areturn%20%5F2d2%28%29%3B%0A%7D%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EAsync%2EDeferredLock%3Dfunction%28%29%7B%0Athis%2Ewaiting%3D%5B%5D%3B%0Athis%2Elocked%3Dfalse%3B%0Athis%2Eid%3Dthis%2E%5FnextId%28%29%3B%0A%7D%3B%0AMochiKit%2EAsync%2EDeferredLock%2Eprototype%3D%7B%5F%5Fclass%5F%5F%3AMochiKit%2EAsync%2EDeferredLock%2Cacquire%3Afunction%28%29%7B%0Avar%20d%3Dnew%20MochiKit%2EAsync%2EDeferred%28%29%3B%0Aif%28this%2Elocked%29%7B%0Athis%2Ewaiting%2Epush%28d%29%3B%0A%7Delse%7B%0Athis%2Elocked%3Dtrue%3B%0Ad%2Ecallback%28this%29%3B%0A%7D%0Areturn%20d%3B%0A%7D%2Crelease%3Afunction%28%29%7B%0Aif%28%21this%2Elocked%29%7B%0Athrow%20TypeError%28%22Tried%20to%20release%20an%20unlocked%20DeferredLock%22%29%3B%0A%7D%0Athis%2Elocked%3Dfalse%3B%0Aif%28this%2Ewaiting%2Elength%3E0%29%7B%0Athis%2Elocked%3Dtrue%3B%0Athis%2Ewaiting%2Eshift%28%29%2Ecallback%28this%29%3B%0A%7D%0A%7D%2C%5FnextId%3AMochiKit%2EBase%2Ecounter%28%29%2Crepr%3Afunction%28%29%7B%0Avar%20%5F2d5%3B%0Aif%28this%2Elocked%29%7B%0A%5F2d5%3D%22locked%2C%20%22%2Bthis%2Ewaiting%2Elength%2B%22%20waiting%22%3B%0A%7Delse%7B%0A%5F2d5%3D%22unlocked%22%3B%0A%7D%0Areturn%20%22DeferredLock%28%22%2Bthis%2Eid%2B%22%2C%20%22%2B%5F2d5%2B%22%29%22%3B%0A%7D%2CtoString%3AMochiKit%2EBase%2EforwardCall%28%22repr%22%29%7D%3B%0AMochiKit%2EAsync%2EDeferredList%3Dfunction%28list%2C%5F2d7%2C%5F2d8%2C%5F2d9%2C%5F2da%29%7B%0AMochiKit%2EAsync%2EDeferred%2Eapply%28this%2C%5B%5F2da%5D%29%3B%0Athis%2Elist%3Dlist%3B%0Avar%20%5F2db%3D%5B%5D%3B%0Athis%2EresultList%3D%5F2db%3B%0Athis%2EfinishedCount%3D0%3B%0Athis%2EfireOnOneCallback%3D%5F2d7%3B%0Athis%2EfireOnOneErrback%3D%5F2d8%3B%0Athis%2EconsumeErrors%3D%5F2d9%3B%0Avar%20cb%3DMochiKit%2EBase%2Ebind%28this%2E%5FcbDeferred%2Cthis%29%3B%0Afor%28var%20i%3D0%3Bi%3Clist%2Elength%3Bi%2B%2B%29%7B%0Avar%20d%3Dlist%5Bi%5D%3B%0A%5F2db%2Epush%28undefined%29%3B%0Ad%2EaddCallback%28cb%2Ci%2Ctrue%29%3B%0Ad%2EaddErrback%28cb%2Ci%2Cfalse%29%3B%0A%7D%0Aif%28list%2Elength%3D%3D%3D0%26%26%21%5F2d7%29%7B%0Athis%2Ecallback%28this%2EresultList%29%3B%0A%7D%0A%7D%3B%0AMochiKit%2EAsync%2EDeferredList%2Eprototype%3Dnew%20MochiKit%2EAsync%2EDeferred%28%29%3B%0AMochiKit%2EAsync%2EDeferredList%2Eprototype%2E%5FcbDeferred%3Dfunction%28%5F2df%2C%5F2e0%2C%5F2e1%29%7B%0Athis%2EresultList%5B%5F2df%5D%3D%5B%5F2e0%2C%5F2e1%5D%3B%0Athis%2EfinishedCount%2B%3D1%3B%0Aif%28this%2Efired%3D%3D%2D1%29%7B%0Aif%28%5F2e0%26%26this%2EfireOnOneCallback%29%7B%0Athis%2Ecallback%28%5B%5F2df%2C%5F2e1%5D%29%3B%0A%7Delse%7B%0Aif%28%21%5F2e0%26%26this%2EfireOnOneErrback%29%7B%0Athis%2Eerrback%28%5F2e1%29%3B%0A%7Delse%7B%0Aif%28this%2EfinishedCount%3D%3Dthis%2Elist%2Elength%29%7B%0Athis%2Ecallback%28this%2EresultList%29%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Aif%28%21%5F2e0%26%26this%2EconsumeErrors%29%7B%0A%5F2e1%3Dnull%3B%0A%7D%0Areturn%20%5F2e1%3B%0A%7D%3B%0AMochiKit%2EAsync%2EgatherResults%3Dfunction%28%5F2e2%29%7B%0Avar%20d%3Dnew%20MochiKit%2EAsync%2EDeferredList%28%5F2e2%2Cfalse%2Ctrue%2Cfalse%29%3B%0Ad%2EaddCallback%28function%28%5F2e4%29%7B%0Avar%20ret%3D%5B%5D%3B%0Afor%28var%20i%3D0%3Bi%3C%5F2e4%2Elength%3Bi%2B%2B%29%7B%0Aret%2Epush%28%5F2e4%5Bi%5D%5B1%5D%29%3B%0A%7D%0Areturn%20ret%3B%0A%7D%29%3B%0Areturn%20d%3B%0A%7D%3B%0AMochiKit%2EAsync%2EmaybeDeferred%3Dfunction%28func%29%7B%0Avar%20self%3DMochiKit%2EAsync%3B%0Avar%20%5F2e9%3B%0Atry%7B%0Avar%20r%3Dfunc%2Eapply%28null%2CMochiKit%2EBase%2Eextend%28%5B%5D%2Carguments%2C1%29%29%3B%0Aif%28r%20instanceof%20self%2EDeferred%29%7B%0A%5F2e9%3Dr%3B%0A%7Delse%7B%0Aif%28r%20instanceof%20Error%29%7B%0A%5F2e9%3Dself%2Efail%28r%29%3B%0A%7Delse%7B%0A%5F2e9%3Dself%2Esucceed%28r%29%3B%0A%7D%0A%7D%0A%7D%0Acatch%28e%29%7B%0A%5F2e9%3Dself%2Efail%28e%29%3B%0A%7D%0Areturn%20%5F2e9%3B%0A%7D%3B%0AMochiKit%2EAsync%2EEXPORT%3D%5B%22AlreadyCalledError%22%2C%22CancelledError%22%2C%22BrowserComplianceError%22%2C%22GenericError%22%2C%22XMLHttpRequestError%22%2C%22Deferred%22%2C%22succeed%22%2C%22fail%22%2C%22getXMLHttpRequest%22%2C%22doSimpleXMLHttpRequest%22%2C%22loadJSONDoc%22%2C%22wait%22%2C%22callLater%22%2C%22sendXMLHttpRequest%22%2C%22DeferredLock%22%2C%22DeferredList%22%2C%22gatherResults%22%2C%22maybeDeferred%22%2C%22doXHR%22%5D%3B%0AMochiKit%2EAsync%2EEXPORT%5FOK%3D%5B%22evalJSONRequest%22%5D%3B%0AMochiKit%2EAsync%2E%5F%5Fnew%5F%5F%3Dfunction%28%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20ne%3Dm%2Epartial%28m%2E%5FnewNamedError%2Cthis%29%3B%0Ane%28%22AlreadyCalledError%22%2Cfunction%28%5F2ed%29%7B%0Athis%2Edeferred%3D%5F2ed%3B%0A%7D%29%3B%0Ane%28%22CancelledError%22%2Cfunction%28%5F2ee%29%7B%0Athis%2Edeferred%3D%5F2ee%3B%0A%7D%29%3B%0Ane%28%22BrowserComplianceError%22%2Cfunction%28msg%29%7B%0Athis%2Emessage%3Dmsg%3B%0A%7D%29%3B%0Ane%28%22GenericError%22%2Cfunction%28msg%29%7B%0Athis%2Emessage%3Dmsg%3B%0A%7D%29%3B%0Ane%28%22XMLHttpRequestError%22%2Cfunction%28req%2Cmsg%29%7B%0Athis%2Ereq%3Dreq%3B%0Athis%2Emessage%3Dmsg%3B%0Atry%7B%0Athis%2Enumber%3Dreq%2Estatus%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0A%7D%29%3B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3Am%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0Am%2EnameFunctions%28this%29%3B%0A%7D%3B%0AMochiKit%2EAsync%2E%5F%5Fnew%5F%5F%28%29%3B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2EAsync%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22DOM%22%2C%5B%22Base%22%5D%29%3B%0AMochiKit%2EDOM%2ENAME%3D%22MochiKit%2EDOM%22%3B%0AMochiKit%2EDOM%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EDOM%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2EDOM%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EDOM%2EEXPORT%3D%5B%22removeEmptyTextNodes%22%2C%22formContents%22%2C%22currentWindow%22%2C%22currentDocument%22%2C%22withWindow%22%2C%22withDocument%22%2C%22registerDOMConverter%22%2C%22coerceToDOM%22%2C%22createDOM%22%2C%22createDOMFunc%22%2C%22isChildNode%22%2C%22getNodeAttribute%22%2C%22removeNodeAttribute%22%2C%22setNodeAttribute%22%2C%22updateNodeAttributes%22%2C%22appendChildNodes%22%2C%22insertSiblingNodesAfter%22%2C%22insertSiblingNodesBefore%22%2C%22replaceChildNodes%22%2C%22removeElement%22%2C%22swapDOM%22%2C%22BUTTON%22%2C%22TT%22%2C%22PRE%22%2C%22H1%22%2C%22H2%22%2C%22H3%22%2C%22H4%22%2C%22H5%22%2C%22H6%22%2C%22BR%22%2C%22CANVAS%22%2C%22HR%22%2C%22LABEL%22%2C%22TEXTAREA%22%2C%22FORM%22%2C%22STRONG%22%2C%22SELECT%22%2C%22OPTION%22%2C%22OPTGROUP%22%2C%22LEGEND%22%2C%22FIELDSET%22%2C%22P%22%2C%22UL%22%2C%22OL%22%2C%22LI%22%2C%22DL%22%2C%22DT%22%2C%22DD%22%2C%22TD%22%2C%22TR%22%2C%22THEAD%22%2C%22TBODY%22%2C%22TFOOT%22%2C%22TABLE%22%2C%22TH%22%2C%22INPUT%22%2C%22SPAN%22%2C%22A%22%2C%22DIV%22%2C%22IMG%22%2C%22getElement%22%2C%22%24%22%2C%22getElementsByTagAndClassName%22%2C%22addToCallStack%22%2C%22addLoadEvent%22%2C%22focusOnLoad%22%2C%22setElementClass%22%2C%22toggleElementClass%22%2C%22addElementClass%22%2C%22removeElementClass%22%2C%22swapElementClass%22%2C%22hasElementClass%22%2C%22computedStyle%22%2C%22escapeHTML%22%2C%22toHTML%22%2C%22emitHTML%22%2C%22scrapeText%22%2C%22getFirstParentByTagAndClassName%22%2C%22getFirstElementByTagAndClassName%22%5D%3B%0AMochiKit%2EDOM%2EEXPORT%5FOK%3D%5B%22domConverters%22%5D%3B%0AMochiKit%2EDOM%2EDEPRECATED%3D%5B%5B%22computedStyle%22%2C%22MochiKit%2EStyle%2EgetStyle%22%2C%221%2E4%22%5D%2C%5B%22elementDimensions%22%2C%22MochiKit%2EStyle%2EgetElementDimensions%22%2C%221%2E4%22%5D%2C%5B%22elementPosition%22%2C%22MochiKit%2EStyle%2EgetElementPosition%22%2C%221%2E4%22%5D%2C%5B%22getViewportDimensions%22%2C%22MochiKit%2EStyle%2EgetViewportDimensions%22%2C%221%2E4%22%5D%2C%5B%22hideElement%22%2C%22MochiKit%2EStyle%2EhideElement%22%2C%221%2E4%22%5D%2C%5B%22makeClipping%22%2C%22MochiKit%2EStyle%2EmakeClipping%22%2C%221%2E4%2E1%22%5D%2C%5B%22makePositioned%22%2C%22MochiKit%2EStyle%2EmakePositioned%22%2C%221%2E4%2E1%22%5D%2C%5B%22setElementDimensions%22%2C%22MochiKit%2EStyle%2EsetElementDimensions%22%2C%221%2E4%22%5D%2C%5B%22setElementPosition%22%2C%22MochiKit%2EStyle%2EsetElementPosition%22%2C%221%2E4%22%5D%2C%5B%22setDisplayForElement%22%2C%22MochiKit%2EStyle%2EsetDisplayForElement%22%2C%221%2E4%22%5D%2C%5B%22setOpacity%22%2C%22MochiKit%2EStyle%2EsetOpacity%22%2C%221%2E4%22%5D%2C%5B%22showElement%22%2C%22MochiKit%2EStyle%2EshowElement%22%2C%221%2E4%22%5D%2C%5B%22undoClipping%22%2C%22MochiKit%2EStyle%2EundoClipping%22%2C%221%2E4%2E1%22%5D%2C%5B%22undoPositioned%22%2C%22MochiKit%2EStyle%2EundoPositioned%22%2C%221%2E4%2E1%22%5D%2C%5B%22Coordinates%22%2C%22MochiKit%2EStyle%2ECoordinates%22%2C%221%2E4%22%5D%2C%5B%22Dimensions%22%2C%22MochiKit%2EStyle%2EDimensions%22%2C%221%2E4%22%5D%5D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EDOM%2C%7BcurrentWindow%3Afunction%28%29%7B%0Areturn%20MochiKit%2EDOM%2E%5Fwindow%3B%0A%7D%2CcurrentDocument%3Afunction%28%29%7B%0Areturn%20MochiKit%2EDOM%2E%5Fdocument%3B%0A%7D%2CwithWindow%3Afunction%28win%2Cfunc%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Avar%20%5F2f6%3Dself%2E%5Fdocument%3B%0Avar%20%5F2f7%3Dself%2E%5Fwindow%3B%0Avar%20rval%3B%0Atry%7B%0Aself%2E%5Fwindow%3Dwin%3B%0Aself%2E%5Fdocument%3Dwin%2Edocument%3B%0Arval%3Dfunc%28%29%3B%0A%7D%0Acatch%28e%29%7B%0Aself%2E%5Fwindow%3D%5F2f7%3B%0Aself%2E%5Fdocument%3D%5F2f6%3B%0Athrow%20e%3B%0A%7D%0Aself%2E%5Fwindow%3D%5F2f7%3B%0Aself%2E%5Fdocument%3D%5F2f6%3B%0Areturn%20rval%3B%0A%7D%2CformContents%3Afunction%28elem%29%7B%0Avar%20%5F2fa%3D%5B%5D%3B%0Avar%20%5F2fb%3D%5B%5D%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aif%28typeof%20%28elem%29%3D%3D%22undefined%22%7C%7Celem%3D%3D%3Dnull%29%7B%0Aelem%3Dself%2E%5Fdocument%2Ebody%3B%0A%7Delse%7B%0Aelem%3Dself%2EgetElement%28elem%29%3B%0A%7D%0Am%2EnodeWalk%28elem%2Cfunction%28elem%29%7B%0Avar%20name%3Delem%2Ename%3B%0Aif%28m%2EisNotEmpty%28name%29%29%7B%0Avar%20%5F300%3Delem%2EtagName%2EtoUpperCase%28%29%3B%0Aif%28%5F300%3D%3D%3D%22INPUT%22%26%26%28elem%2Etype%3D%3D%22radio%22%7C%7Celem%2Etype%3D%3D%22checkbox%22%29%26%26%21elem%2Echecked%29%7B%0Areturn%20null%3B%0A%7D%0Aif%28%5F300%3D%3D%3D%22SELECT%22%29%7B%0Aif%28elem%2Etype%3D%3D%22select%2Done%22%29%7B%0Aif%28elem%2EselectedIndex%3E%3D0%29%7B%0Avar%20opt%3Delem%2Eoptions%5Belem%2EselectedIndex%5D%3B%0Avar%20v%3Dopt%2Evalue%3B%0Aif%28%21v%29%7B%0Avar%20h%3Dopt%2EouterHTML%3B%0Aif%28h%26%26%21h%2Ematch%28%2F%5E%5B%5E%3E%5D%2B%5Csvalue%5Cs%2A%3D%2Fi%29%29%7B%0Av%3Dopt%2Etext%3B%0A%7D%0A%7D%0A%5F2fa%2Epush%28name%29%3B%0A%5F2fb%2Epush%28v%29%3B%0Areturn%20null%3B%0A%7D%0A%5F2fa%2Epush%28name%29%3B%0A%5F2fb%2Epush%28%22%22%29%3B%0Areturn%20null%3B%0A%7Delse%7B%0Avar%20opts%3Delem%2Eoptions%3B%0Aif%28%21opts%2Elength%29%7B%0A%5F2fa%2Epush%28name%29%3B%0A%5F2fb%2Epush%28%22%22%29%3B%0Areturn%20null%3B%0A%7D%0Afor%28var%20i%3D0%3Bi%3Copts%2Elength%3Bi%2B%2B%29%7B%0Avar%20opt%3Dopts%5Bi%5D%3B%0Aif%28%21opt%2Eselected%29%7B%0Acontinue%3B%0A%7D%0Avar%20v%3Dopt%2Evalue%3B%0Aif%28%21v%29%7B%0Avar%20h%3Dopt%2EouterHTML%3B%0Aif%28h%26%26%21h%2Ematch%28%2F%5E%5B%5E%3E%5D%2B%5Csvalue%5Cs%2A%3D%2Fi%29%29%7B%0Av%3Dopt%2Etext%3B%0A%7D%0A%7D%0A%5F2fa%2Epush%28name%29%3B%0A%5F2fb%2Epush%28v%29%3B%0A%7D%0Areturn%20null%3B%0A%7D%0A%7D%0Aif%28%5F300%3D%3D%3D%22FORM%22%7C%7C%5F300%3D%3D%3D%22P%22%7C%7C%5F300%3D%3D%3D%22SPAN%22%7C%7C%5F300%3D%3D%3D%22DIV%22%29%7B%0Areturn%20elem%2EchildNodes%3B%0A%7D%0A%5F2fa%2Epush%28name%29%3B%0A%5F2fb%2Epush%28elem%2Evalue%7C%7C%22%22%29%3B%0Areturn%20null%3B%0A%7D%0Areturn%20elem%2EchildNodes%3B%0A%7D%29%3B%0Areturn%20%5B%5F2fa%2C%5F2fb%5D%3B%0A%7D%2CwithDocument%3Afunction%28doc%2Cfunc%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Avar%20%5F309%3Dself%2E%5Fdocument%3B%0Avar%20rval%3B%0Atry%7B%0Aself%2E%5Fdocument%3Ddoc%3B%0Arval%3Dfunc%28%29%3B%0A%7D%0Acatch%28e%29%7B%0Aself%2E%5Fdocument%3D%5F309%3B%0Athrow%20e%3B%0A%7D%0Aself%2E%5Fdocument%3D%5F309%3B%0Areturn%20rval%3B%0A%7D%2CregisterDOMConverter%3Afunction%28name%2C%5F30c%2Cwrap%2C%5F30e%29%7B%0AMochiKit%2EDOM%2EdomConverters%2Eregister%28name%2C%5F30c%2Cwrap%2C%5F30e%29%3B%0A%7D%2CcoerceToDOM%3Afunction%28node%2Cctx%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20im%3DMochiKit%2EIter%3B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aif%28im%29%7B%0Avar%20iter%3Dim%2Eiter%3B%0Avar%20%5F315%3Dim%2Erepeat%3B%0A%7D%0Avar%20map%3Dm%2Emap%3B%0Avar%20%5F317%3Dself%2EdomConverters%3B%0Avar%20%5F318%3Darguments%2Ecallee%3B%0Avar%20%5F319%3Dm%2ENotFound%3B%0Awhile%28true%29%7B%0Aif%28typeof%20%28node%29%3D%3D%22undefined%22%7C%7Cnode%3D%3D%3Dnull%29%7B%0Areturn%20null%3B%0A%7D%0Aif%28typeof%20%28node%29%3D%3D%22function%22%26%26typeof%20%28node%2Elength%29%3D%3D%22number%22%26%26%21%28node%20instanceof%20Function%29%29%7B%0Anode%3Dim%3Fim%2Elist%28node%29%3Am%2Eextend%28null%2Cnode%29%3B%0A%7D%0Aif%28typeof%20%28node%2EnodeType%29%21%3D%22undefined%22%26%26node%2EnodeType%3E0%29%7B%0Areturn%20node%3B%0A%7D%0Aif%28typeof%20%28node%29%3D%3D%22number%22%7C%7Ctypeof%20%28node%29%3D%3D%22boolean%22%29%7B%0Anode%3Dnode%2EtoString%28%29%3B%0A%7D%0Aif%28typeof%20%28node%29%3D%3D%22string%22%29%7B%0Areturn%20self%2E%5Fdocument%2EcreateTextNode%28node%29%3B%0A%7D%0Aif%28typeof%20%28node%2E%5F%5Fdom%5F%5F%29%3D%3D%22function%22%29%7B%0Anode%3Dnode%2E%5F%5Fdom%5F%5F%28ctx%29%3B%0Acontinue%3B%0A%7D%0Aif%28typeof%20%28node%2Edom%29%3D%3D%22function%22%29%7B%0Anode%3Dnode%2Edom%28ctx%29%3B%0Acontinue%3B%0A%7D%0Aif%28typeof%20%28node%29%3D%3D%22function%22%29%7B%0Anode%3Dnode%2Eapply%28ctx%2C%5Bctx%5D%29%3B%0Acontinue%3B%0A%7D%0Aif%28im%29%7B%0Avar%20%5F31a%3Dnull%3B%0Atry%7B%0A%5F31a%3Diter%28node%29%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0Aif%28%5F31a%29%7B%0Areturn%20map%28%5F318%2C%5F31a%2C%5F315%28ctx%29%29%3B%0A%7D%0A%7Delse%7B%0Aif%28m%2EisArrayLike%28node%29%29%7B%0Avar%20func%3Dfunction%28n%29%7B%0Areturn%20%5F318%28n%2Cctx%29%3B%0A%7D%3B%0Areturn%20map%28func%2Cnode%29%3B%0A%7D%0A%7D%0Atry%7B%0Anode%3D%5F317%2Ematch%28node%2Cctx%29%3B%0Acontinue%3B%0A%7D%0Acatch%28e%29%7B%0Aif%28e%21%3D%5F319%29%7B%0Athrow%20e%3B%0A%7D%0A%7D%0Areturn%20self%2E%5Fdocument%2EcreateTextNode%28node%2EtoString%28%29%29%3B%0A%7D%0Areturn%20undefined%3B%0A%7D%2CisChildNode%3Afunction%28node%2C%5F31e%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aif%28typeof%20%28node%29%3D%3D%22string%22%29%7B%0Anode%3Dself%2EgetElement%28node%29%3B%0A%7D%0Aif%28typeof%20%28%5F31e%29%3D%3D%22string%22%29%7B%0A%5F31e%3Dself%2EgetElement%28%5F31e%29%3B%0A%7D%0Aif%28typeof%20%28node%29%3D%3D%22undefined%22%7C%7Cnode%3D%3D%3Dnull%29%7B%0Areturn%20false%3B%0A%7D%0Awhile%28node%21%3Dnull%26%26node%21%3D%3Dself%2E%5Fdocument%29%7B%0Aif%28node%3D%3D%3D%5F31e%29%7B%0Areturn%20true%3B%0A%7D%0Anode%3Dnode%2EparentNode%3B%0A%7D%0Areturn%20false%3B%0A%7D%2CsetNodeAttribute%3Afunction%28node%2Cattr%2C%5F322%29%7B%0Avar%20o%3D%7B%7D%3B%0Ao%5Battr%5D%3D%5F322%3B%0Atry%7B%0Areturn%20MochiKit%2EDOM%2EupdateNodeAttributes%28node%2Co%29%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0Areturn%20null%3B%0A%7D%2CgetNodeAttribute%3Afunction%28node%2Cattr%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Avar%20%5F327%3Dself%2EattributeArray%2Erenames%5Battr%5D%3B%0Avar%20%5F328%3Dself%2EattributeArray%2EignoreAttr%5Battr%5D%3B%0Anode%3Dself%2EgetElement%28node%29%3B%0Atry%7B%0Aif%28%5F327%29%7B%0Areturn%20node%5B%5F327%5D%3B%0A%7D%0Avar%20%5F329%3Dnode%2EgetAttribute%28attr%29%3B%0Aif%28%5F329%21%3D%5F328%29%7B%0Areturn%20%5F329%3B%0A%7D%0A%7D%0Acatch%28e%29%7B%0A%7D%0Areturn%20null%3B%0A%7D%2CremoveNodeAttribute%3Afunction%28node%2Cattr%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Avar%20%5F32d%3Dself%2EattributeArray%2Erenames%5Battr%5D%3B%0Anode%3Dself%2EgetElement%28node%29%3B%0Atry%7B%0Aif%28%5F32d%29%7B%0Areturn%20node%5B%5F32d%5D%3B%0A%7D%0Areturn%20node%2EremoveAttribute%28attr%29%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0Areturn%20null%3B%0A%7D%2CupdateNodeAttributes%3Afunction%28node%2C%5F32f%29%7B%0Avar%20elem%3Dnode%3B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aif%28typeof%20%28node%29%3D%3D%22string%22%29%7B%0Aelem%3Dself%2EgetElement%28node%29%3B%0A%7D%0Aif%28%5F32f%29%7B%0Avar%20%5F332%3DMochiKit%2EBase%2Eupdatetree%3B%0Aif%28self%2EattributeArray%2Ecompliant%29%7B%0Afor%28var%20k%20in%20%5F32f%29%7B%0Avar%20v%3D%5F32f%5Bk%5D%3B%0Aif%28typeof%20%28v%29%3D%3D%22object%22%26%26typeof%20%28elem%5Bk%5D%29%3D%3D%22object%22%29%7B%0Aif%28k%3D%3D%22style%22%26%26MochiKit%2EStyle%29%7B%0AMochiKit%2EStyle%2EsetStyle%28elem%2Cv%29%3B%0A%7Delse%7B%0A%5F332%28elem%5Bk%5D%2Cv%29%3B%0A%7D%0A%7Delse%7B%0Aif%28k%2Esubstring%280%2C2%29%3D%3D%22on%22%29%7B%0Aif%28typeof%20%28v%29%3D%3D%22string%22%29%7B%0Av%3Dnew%20Function%28v%29%3B%0A%7D%0Aelem%5Bk%5D%3Dv%3B%0A%7Delse%7B%0Aelem%2EsetAttribute%28k%2Cv%29%3B%0A%7D%0A%7D%0Aif%28typeof%20%28elem%5Bk%5D%29%3D%3D%22string%22%26%26elem%5Bk%5D%21%3Dv%29%7B%0Aelem%5Bk%5D%3Dv%3B%0A%7D%0A%7D%0A%7Delse%7B%0Avar%20%5F335%3Dself%2EattributeArray%2Erenames%3B%0Afor%28var%20k%20in%20%5F32f%29%7B%0Av%3D%5F32f%5Bk%5D%3B%0Avar%20%5F336%3D%5F335%5Bk%5D%3B%0Aif%28k%3D%3D%22style%22%26%26typeof%20%28v%29%3D%3D%22string%22%29%7B%0Aelem%2Estyle%2EcssText%3Dv%3B%0A%7Delse%7B%0Aif%28typeof%20%28%5F336%29%3D%3D%22string%22%29%7B%0Aelem%5B%5F336%5D%3Dv%3B%0A%7Delse%7B%0Aif%28typeof%20%28elem%5Bk%5D%29%3D%3D%22object%22%26%26typeof%20%28v%29%3D%3D%22object%22%29%7B%0Aif%28k%3D%3D%22style%22%26%26MochiKit%2EStyle%29%7B%0AMochiKit%2EStyle%2EsetStyle%28elem%2Cv%29%3B%0A%7Delse%7B%0A%5F332%28elem%5Bk%5D%2Cv%29%3B%0A%7D%0A%7Delse%7B%0Aif%28k%2Esubstring%280%2C2%29%3D%3D%22on%22%29%7B%0Aif%28typeof%20%28v%29%3D%3D%22string%22%29%7B%0Av%3Dnew%20Function%28v%29%3B%0A%7D%0Aelem%5Bk%5D%3Dv%3B%0A%7Delse%7B%0Aelem%2EsetAttribute%28k%2Cv%29%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Aif%28typeof%20%28elem%5Bk%5D%29%3D%3D%22string%22%26%26elem%5Bk%5D%21%3Dv%29%7B%0Aelem%5Bk%5D%3Dv%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Areturn%20elem%3B%0A%7D%2CappendChildNodes%3Afunction%28node%29%7B%0Avar%20elem%3Dnode%3B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aif%28typeof%20%28node%29%3D%3D%22string%22%29%7B%0Aelem%3Dself%2EgetElement%28node%29%3B%0A%7D%0Avar%20%5F33a%3D%5Bself%2EcoerceToDOM%28MochiKit%2EBase%2Eextend%28null%2Carguments%2C1%29%2Celem%29%5D%3B%0Avar%20%5F33b%3DMochiKit%2EBase%2Econcat%3B%0Awhile%28%5F33a%2Elength%29%7B%0Avar%20n%3D%5F33a%2Eshift%28%29%3B%0Aif%28typeof%20%28n%29%3D%3D%22undefined%22%7C%7Cn%3D%3D%3Dnull%29%7B%0A%7Delse%7B%0Aif%28typeof%20%28n%2EnodeType%29%3D%3D%22number%22%29%7B%0Aelem%2EappendChild%28n%29%3B%0A%7Delse%7B%0A%5F33a%3D%5F33b%28n%2C%5F33a%29%3B%0A%7D%0A%7D%0A%7D%0Areturn%20elem%3B%0A%7D%2CinsertSiblingNodesBefore%3Afunction%28node%29%7B%0Avar%20elem%3Dnode%3B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aif%28typeof%20%28node%29%3D%3D%22string%22%29%7B%0Aelem%3Dself%2EgetElement%28node%29%3B%0A%7D%0Avar%20%5F340%3D%5Bself%2EcoerceToDOM%28MochiKit%2EBase%2Eextend%28null%2Carguments%2C1%29%2Celem%29%5D%3B%0Avar%20%5F341%3Delem%2EparentNode%3B%0Avar%20%5F342%3DMochiKit%2EBase%2Econcat%3B%0Awhile%28%5F340%2Elength%29%7B%0Avar%20n%3D%5F340%2Eshift%28%29%3B%0Aif%28typeof%20%28n%29%3D%3D%22undefined%22%7C%7Cn%3D%3D%3Dnull%29%7B%0A%7Delse%7B%0Aif%28typeof%20%28n%2EnodeType%29%3D%3D%22number%22%29%7B%0A%5F341%2EinsertBefore%28n%2Celem%29%3B%0A%7Delse%7B%0A%5F340%3D%5F342%28n%2C%5F340%29%3B%0A%7D%0A%7D%0A%7D%0Areturn%20%5F341%3B%0A%7D%2CinsertSiblingNodesAfter%3Afunction%28node%29%7B%0Avar%20elem%3Dnode%3B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aif%28typeof%20%28node%29%3D%3D%22string%22%29%7B%0Aelem%3Dself%2EgetElement%28node%29%3B%0A%7D%0Avar%20%5F347%3D%5Bself%2EcoerceToDOM%28MochiKit%2EBase%2Eextend%28null%2Carguments%2C1%29%2Celem%29%5D%3B%0Aif%28elem%2EnextSibling%29%7B%0Areturn%20self%2EinsertSiblingNodesBefore%28elem%2EnextSibling%2C%5F347%29%3B%0A%7Delse%7B%0Areturn%20self%2EappendChildNodes%28elem%2EparentNode%2C%5F347%29%3B%0A%7D%0A%7D%2CreplaceChildNodes%3Afunction%28node%29%7B%0Avar%20elem%3Dnode%3B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aif%28typeof%20%28node%29%3D%3D%22string%22%29%7B%0Aelem%3Dself%2EgetElement%28node%29%3B%0Aarguments%5B0%5D%3Delem%3B%0A%7D%0Avar%20%5F34b%3B%0Awhile%28%28%5F34b%3Delem%2EfirstChild%29%29%7B%0Aelem%2EremoveChild%28%5F34b%29%3B%0A%7D%0Aif%28arguments%2Elength%3C2%29%7B%0Areturn%20elem%3B%0A%7Delse%7B%0Areturn%20self%2EappendChildNodes%2Eapply%28this%2Carguments%29%3B%0A%7D%0A%7D%2CcreateDOM%3Afunction%28name%2C%5F34d%29%7B%0Avar%20elem%3B%0Avar%20self%3DMochiKit%2EDOM%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28typeof%20%28%5F34d%29%3D%3D%22string%22%7C%7Ctypeof%20%28%5F34d%29%3D%3D%22number%22%29%7B%0Avar%20args%3Dm%2Eextend%28%5Bname%2Cnull%5D%2Carguments%2C1%29%3B%0Areturn%20arguments%2Ecallee%2Eapply%28this%2Cargs%29%3B%0A%7D%0Aif%28typeof%20%28name%29%3D%3D%22string%22%29%7B%0Avar%20%5F352%3Dself%2E%5Fxhtml%3B%0Aif%28%5F34d%26%26%21self%2EattributeArray%2Ecompliant%29%7B%0Avar%20%5F353%3D%22%22%3B%0Aif%28%22name%22%20in%20%5F34d%29%7B%0A%5F353%2B%3D%22%20name%3D%5C%22%22%2Bself%2EescapeHTML%28%5F34d%2Ename%29%2B%22%5C%22%22%3B%0A%7D%0Aif%28name%3D%3D%22input%22%26%26%22type%22%20in%20%5F34d%29%7B%0A%5F353%2B%3D%22%20type%3D%5C%22%22%2Bself%2EescapeHTML%28%5F34d%2Etype%29%2B%22%5C%22%22%3B%0A%7D%0Aif%28%5F353%29%7B%0Aname%3D%22%3C%22%2Bname%2B%5F353%2B%22%3E%22%3B%0A%5F352%3Dfalse%3B%0A%7D%0A%7D%0Avar%20d%3Dself%2E%5Fdocument%3B%0Aif%28%5F352%26%26d%3D%3D%3Ddocument%29%7B%0Aelem%3Dd%2EcreateElementNS%28%22http%3A%2F%2Fwww%2Ew3%2Eorg%2F1999%2Fxhtml%22%2Cname%29%3B%0A%7Delse%7B%0Aelem%3Dd%2EcreateElement%28name%29%3B%0A%7D%0A%7Delse%7B%0Aelem%3Dname%3B%0A%7D%0Aif%28%5F34d%29%7B%0Aself%2EupdateNodeAttributes%28elem%2C%5F34d%29%3B%0A%7D%0Aif%28arguments%2Elength%3C%3D2%29%7B%0Areturn%20elem%3B%0A%7Delse%7B%0Avar%20args%3Dm%2Eextend%28%5Belem%5D%2Carguments%2C2%29%3B%0Areturn%20self%2EappendChildNodes%2Eapply%28this%2Cargs%29%3B%0A%7D%0A%7D%2CcreateDOMFunc%3Afunction%28%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Areturn%20m%2Epartial%2Eapply%28this%2Cm%2Eextend%28%5BMochiKit%2EDOM%2EcreateDOM%5D%2Carguments%29%29%3B%0A%7D%2CremoveElement%3Afunction%28elem%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Avar%20e%3Dself%2EcoerceToDOM%28self%2EgetElement%28elem%29%29%3B%0Ae%2EparentNode%2EremoveChild%28e%29%3B%0Areturn%20e%3B%0A%7D%2CswapDOM%3Afunction%28dest%2Csrc%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Adest%3Dself%2EgetElement%28dest%29%3B%0Avar%20%5F35c%3Ddest%2EparentNode%3B%0Aif%28src%29%7B%0Asrc%3Dself%2EcoerceToDOM%28self%2EgetElement%28src%29%2C%5F35c%29%3B%0A%5F35c%2EreplaceChild%28src%2Cdest%29%3B%0A%7Delse%7B%0A%5F35c%2EremoveChild%28dest%29%3B%0A%7D%0Areturn%20src%3B%0A%7D%2CgetElement%3Afunction%28id%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Areturn%20%28%28typeof%20%28id%29%3D%3D%22string%22%29%3Fself%2E%5Fdocument%2EgetElementById%28id%29%3Aid%29%3B%0A%7Delse%7B%0Areturn%20MochiKit%2EBase%2Emap%28self%2EgetElement%2Carguments%29%3B%0A%7D%0A%7D%2CgetElementsByTagAndClassName%3Afunction%28%5F35f%2C%5F360%2C%5F361%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aif%28typeof%20%28%5F35f%29%3D%3D%22undefined%22%7C%7C%5F35f%3D%3D%3Dnull%29%7B%0A%5F35f%3D%22%2A%22%3B%0A%7D%0Aif%28typeof%20%28%5F361%29%3D%3D%22undefined%22%7C%7C%5F361%3D%3D%3Dnull%29%7B%0A%5F361%3Dself%2E%5Fdocument%3B%0A%7D%0A%5F361%3Dself%2EgetElement%28%5F361%29%3B%0Aif%28%5F361%3D%3Dnull%29%7B%0Areturn%20%5B%5D%3B%0A%7D%0Avar%20%5F363%3D%28%5F361%2EgetElementsByTagName%28%5F35f%29%7C%7Cself%2E%5Fdocument%2Eall%29%3B%0Aif%28typeof%20%28%5F360%29%3D%3D%22undefined%22%7C%7C%5F360%3D%3D%3Dnull%29%7B%0Areturn%20MochiKit%2EBase%2Eextend%28null%2C%5F363%29%3B%0A%7D%0Avar%20%5F364%3D%5B%5D%3B%0Afor%28var%20i%3D0%3Bi%3C%5F363%2Elength%3Bi%2B%2B%29%7B%0Avar%20%5F366%3D%5F363%5Bi%5D%3B%0Avar%20cls%3D%5F366%2EclassName%3B%0Aif%28typeof%20%28cls%29%21%3D%22string%22%29%7B%0Acls%3D%5F366%2EgetAttribute%28%22class%22%29%3B%0A%7D%0Aif%28typeof%20%28cls%29%3D%3D%22string%22%29%7B%0Avar%20%5F368%3Dcls%2Esplit%28%22%20%22%29%3B%0Afor%28var%20j%3D0%3Bj%3C%5F368%2Elength%3Bj%2B%2B%29%7B%0Aif%28%5F368%5Bj%5D%3D%3D%5F360%29%7B%0A%5F364%2Epush%28%5F366%29%3B%0Abreak%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Areturn%20%5F364%3B%0A%7D%2C%5FnewCallStack%3Afunction%28path%2Conce%29%7B%0Avar%20rval%3Dfunction%28%29%7B%0Avar%20%5F36d%3Darguments%2Ecallee%2EcallStack%3B%0Afor%28var%20i%3D0%3Bi%3C%5F36d%2Elength%3Bi%2B%2B%29%7B%0Aif%28%5F36d%5Bi%5D%2Eapply%28this%2Carguments%29%3D%3D%3Dfalse%29%7B%0Abreak%3B%0A%7D%0A%7D%0Aif%28once%29%7B%0Atry%7B%0Athis%5Bpath%5D%3Dnull%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0A%7D%0A%7D%3B%0Arval%2EcallStack%3D%5B%5D%3B%0Areturn%20rval%3B%0A%7D%2CaddToCallStack%3Afunction%28%5F36f%2Cpath%2Cfunc%2Conce%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Avar%20%5F374%3D%5F36f%5Bpath%5D%3B%0Avar%20%5F375%3D%5F374%3B%0Aif%28%21%28typeof%20%28%5F374%29%3D%3D%22function%22%26%26typeof%20%28%5F374%2EcallStack%29%3D%3D%22object%22%26%26%5F374%2EcallStack%21%3D%3Dnull%29%29%7B%0A%5F375%3Dself%2E%5FnewCallStack%28path%2Conce%29%3B%0Aif%28typeof%20%28%5F374%29%3D%3D%22function%22%29%7B%0A%5F375%2EcallStack%2Epush%28%5F374%29%3B%0A%7D%0A%5F36f%5Bpath%5D%3D%5F375%3B%0A%7D%0A%5F375%2EcallStack%2Epush%28func%29%3B%0A%7D%2CaddLoadEvent%3Afunction%28func%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aself%2EaddToCallStack%28self%2E%5Fwindow%2C%22onload%22%2Cfunc%2Ctrue%29%3B%0A%7D%2CfocusOnLoad%3Afunction%28%5F378%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aself%2EaddLoadEvent%28function%28%29%7B%0A%5F378%3Dself%2EgetElement%28%5F378%29%3B%0Aif%28%5F378%29%7B%0A%5F378%2Efocus%28%29%3B%0A%7D%0A%7D%29%3B%0A%7D%2CsetElementClass%3Afunction%28%5F37a%2C%5F37b%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Avar%20obj%3Dself%2EgetElement%28%5F37a%29%3B%0Aif%28self%2EattributeArray%2Ecompliant%29%7B%0Aobj%2EsetAttribute%28%22class%22%2C%5F37b%29%3B%0A%7Delse%7B%0Aobj%2EsetAttribute%28%22className%22%2C%5F37b%29%3B%0A%7D%0A%7D%2CtoggleElementClass%3Afunction%28%5F37e%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Afor%28var%20i%3D1%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20obj%3Dself%2EgetElement%28arguments%5Bi%5D%29%3B%0Aif%28%21self%2EaddElementClass%28obj%2C%5F37e%29%29%7B%0Aself%2EremoveElementClass%28obj%2C%5F37e%29%3B%0A%7D%0A%7D%0A%7D%2CaddElementClass%3Afunction%28%5F382%2C%5F383%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Avar%20obj%3Dself%2EgetElement%28%5F382%29%3B%0Avar%20cls%3Dobj%2EclassName%3B%0Aif%28typeof%20%28cls%29%21%3D%22string%22%29%7B%0Acls%3Dobj%2EgetAttribute%28%22class%22%29%3B%0A%7D%0Aif%28typeof%20%28cls%29%21%3D%22string%22%7C%7Ccls%2Elength%3D%3D%3D0%29%7B%0Aself%2EsetElementClass%28obj%2C%5F383%29%3B%0Areturn%20true%3B%0A%7D%0Aif%28cls%3D%3D%5F383%29%7B%0Areturn%20false%3B%0A%7D%0Avar%20%5F387%3Dcls%2Esplit%28%22%20%22%29%3B%0Afor%28var%20i%3D0%3Bi%3C%5F387%2Elength%3Bi%2B%2B%29%7B%0Aif%28%5F387%5Bi%5D%3D%3D%5F383%29%7B%0Areturn%20false%3B%0A%7D%0A%7D%0Aself%2EsetElementClass%28obj%2Ccls%2B%22%20%22%2B%5F383%29%3B%0Areturn%20true%3B%0A%7D%2CremoveElementClass%3Afunction%28%5F389%2C%5F38a%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Avar%20obj%3Dself%2EgetElement%28%5F389%29%3B%0Avar%20cls%3Dobj%2EclassName%3B%0Aif%28typeof%20%28cls%29%21%3D%22string%22%29%7B%0Acls%3Dobj%2EgetAttribute%28%22class%22%29%3B%0A%7D%0Aif%28typeof%20%28cls%29%21%3D%22string%22%7C%7Ccls%2Elength%3D%3D%3D0%29%7B%0Areturn%20false%3B%0A%7D%0Aif%28cls%3D%3D%5F38a%29%7B%0Aself%2EsetElementClass%28obj%2C%22%22%29%3B%0Areturn%20true%3B%0A%7D%0Avar%20%5F38e%3Dcls%2Esplit%28%22%20%22%29%3B%0Afor%28var%20i%3D0%3Bi%3C%5F38e%2Elength%3Bi%2B%2B%29%7B%0Aif%28%5F38e%5Bi%5D%3D%3D%5F38a%29%7B%0A%5F38e%2Esplice%28i%2C1%29%3B%0Aself%2EsetElementClass%28obj%2C%5F38e%2Ejoin%28%22%20%22%29%29%3B%0Areturn%20true%3B%0A%7D%0A%7D%0Areturn%20false%3B%0A%7D%2CswapElementClass%3Afunction%28%5F390%2C%5F391%2C%5F392%29%7B%0Avar%20obj%3DMochiKit%2EDOM%2EgetElement%28%5F390%29%3B%0Avar%20res%3DMochiKit%2EDOM%2EremoveElementClass%28obj%2C%5F391%29%3B%0Aif%28res%29%7B%0AMochiKit%2EDOM%2EaddElementClass%28obj%2C%5F392%29%3B%0A%7D%0Areturn%20res%3B%0A%7D%2ChasElementClass%3Afunction%28%5F395%2C%5F396%29%7B%0Avar%20obj%3DMochiKit%2EDOM%2EgetElement%28%5F395%29%3B%0Aif%28obj%3D%3Dnull%29%7B%0Areturn%20false%3B%0A%7D%0Avar%20cls%3Dobj%2EclassName%3B%0Aif%28typeof%20%28cls%29%21%3D%22string%22%29%7B%0Acls%3Dobj%2EgetAttribute%28%22class%22%29%3B%0A%7D%0Aif%28typeof%20%28cls%29%21%3D%22string%22%29%7B%0Areturn%20false%3B%0A%7D%0Avar%20%5F399%3Dcls%2Esplit%28%22%20%22%29%3B%0Afor%28var%20i%3D1%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Avar%20good%3Dfalse%3B%0Afor%28var%20j%3D0%3Bj%3C%5F399%2Elength%3Bj%2B%2B%29%7B%0Aif%28%5F399%5Bj%5D%3D%3Darguments%5Bi%5D%29%7B%0Agood%3Dtrue%3B%0Abreak%3B%0A%7D%0A%7D%0Aif%28%21good%29%7B%0Areturn%20false%3B%0A%7D%0A%7D%0Areturn%20true%3B%0A%7D%2CescapeHTML%3Afunction%28s%29%7B%0Areturn%20s%2Ereplace%28%2F%26%2Fg%2C%22%26amp%3B%22%29%2Ereplace%28%2F%22%2Fg%2C%22%26quot%3B%22%29%2Ereplace%28%2F%3C%2Fg%2C%22%26lt%3B%22%29%2Ereplace%28%2F%3E%2Fg%2C%22%26gt%3B%22%29%3B%0A%7D%2CtoHTML%3Afunction%28dom%29%7B%0Areturn%20MochiKit%2EDOM%2EemitHTML%28dom%29%2Ejoin%28%22%22%29%3B%0A%7D%2CemitHTML%3Afunction%28dom%2Clst%29%7B%0Aif%28typeof%20%28lst%29%3D%3D%22undefined%22%7C%7Clst%3D%3D%3Dnull%29%7B%0Alst%3D%5B%5D%3B%0A%7D%0Avar%20%5F3a1%3D%5Bdom%5D%3B%0Avar%20self%3DMochiKit%2EDOM%3B%0Avar%20%5F3a3%3Dself%2EescapeHTML%3B%0Avar%20%5F3a4%3Dself%2EattributeArray%3B%0Awhile%28%5F3a1%2Elength%29%7B%0Adom%3D%5F3a1%2Epop%28%29%3B%0Aif%28typeof%20%28dom%29%3D%3D%22string%22%29%7B%0Alst%2Epush%28dom%29%3B%0A%7Delse%7B%0Aif%28dom%2EnodeType%3D%3D1%29%7B%0Alst%2Epush%28%22%3C%22%2Bdom%2EtagName%2EtoLowerCase%28%29%29%3B%0Avar%20%5F3a5%3D%5B%5D%3B%0Avar%20%5F3a6%3D%5F3a4%28dom%29%3B%0Afor%28var%20i%3D0%3Bi%3C%5F3a6%2Elength%3Bi%2B%2B%29%7B%0Avar%20a%3D%5F3a6%5Bi%5D%3B%0A%5F3a5%2Epush%28%5B%22%20%22%2Ca%2Ename%2C%22%3D%5C%22%22%2C%5F3a3%28a%2Evalue%29%2C%22%5C%22%22%5D%29%3B%0A%7D%0A%5F3a5%2Esort%28%29%3B%0Afor%28i%3D0%3Bi%3C%5F3a5%2Elength%3Bi%2B%2B%29%7B%0Avar%20%5F3a9%3D%5F3a5%5Bi%5D%3B%0Afor%28var%20j%3D0%3Bj%3C%5F3a9%2Elength%3Bj%2B%2B%29%7B%0Alst%2Epush%28%5F3a9%5Bj%5D%29%3B%0A%7D%0A%7D%0Aif%28dom%2EhasChildNodes%28%29%29%7B%0Alst%2Epush%28%22%3E%22%29%3B%0A%5F3a1%2Epush%28%22%3C%2F%22%2Bdom%2EtagName%2EtoLowerCase%28%29%2B%22%3E%22%29%3B%0Avar%20%5F3ab%3Ddom%2EchildNodes%3B%0Afor%28i%3D%5F3ab%2Elength%2D1%3Bi%3E%3D0%3Bi%2D%2D%29%7B%0A%5F3a1%2Epush%28%5F3ab%5Bi%5D%29%3B%0A%7D%0A%7Delse%7B%0Alst%2Epush%28%22%2F%3E%22%29%3B%0A%7D%0A%7Delse%7B%0Aif%28dom%2EnodeType%3D%3D3%29%7B%0Alst%2Epush%28%5F3a3%28dom%2EnodeValue%29%29%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Areturn%20lst%3B%0A%7D%2CscrapeText%3Afunction%28node%2C%5F3ad%29%7B%0Avar%20rval%3D%5B%5D%3B%0A%28function%28node%29%7B%0Avar%20cn%3Dnode%2EchildNodes%3B%0Aif%28cn%29%7B%0Afor%28var%20i%3D0%3Bi%3Ccn%2Elength%3Bi%2B%2B%29%7B%0Aarguments%2Ecallee%2Ecall%28this%2Ccn%5Bi%5D%29%3B%0A%7D%0A%7D%0Avar%20%5F3b2%3Dnode%2EnodeValue%3B%0Aif%28typeof%20%28%5F3b2%29%3D%3D%22string%22%29%7B%0Arval%2Epush%28%5F3b2%29%3B%0A%7D%0A%7D%29%28MochiKit%2EDOM%2EgetElement%28node%29%29%3B%0Aif%28%5F3ad%29%7B%0Areturn%20rval%3B%0A%7Delse%7B%0Areturn%20rval%2Ejoin%28%22%22%29%3B%0A%7D%0A%7D%2CremoveEmptyTextNodes%3Afunction%28%5F3b3%29%7B%0A%5F3b3%3DMochiKit%2EDOM%2EgetElement%28%5F3b3%29%3B%0Afor%28var%20i%3D0%3Bi%3C%5F3b3%2EchildNodes%2Elength%3Bi%2B%2B%29%7B%0Avar%20node%3D%5F3b3%2EchildNodes%5Bi%5D%3B%0Aif%28node%2EnodeType%3D%3D3%26%26%21%2F%5CS%2F%2Etest%28node%2EnodeValue%29%29%7B%0Anode%2EparentNode%2EremoveChild%28node%29%3B%0A%7D%0A%7D%0A%7D%2CgetFirstElementByTagAndClassName%3Afunction%28%5F3b6%2C%5F3b7%2C%5F3b8%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aif%28typeof%20%28%5F3b6%29%3D%3D%22undefined%22%7C%7C%5F3b6%3D%3D%3Dnull%29%7B%0A%5F3b6%3D%22%2A%22%3B%0A%7D%0Aif%28typeof%20%28%5F3b8%29%3D%3D%22undefined%22%7C%7C%5F3b8%3D%3D%3Dnull%29%7B%0A%5F3b8%3Dself%2E%5Fdocument%3B%0A%7D%0A%5F3b8%3Dself%2EgetElement%28%5F3b8%29%3B%0Aif%28%5F3b8%3D%3Dnull%29%7B%0Areturn%20null%3B%0A%7D%0Avar%20%5F3ba%3D%28%5F3b8%2EgetElementsByTagName%28%5F3b6%29%7C%7Cself%2E%5Fdocument%2Eall%29%3B%0Aif%28%5F3ba%2Elength%3C%3D0%29%7B%0Areturn%20null%3B%0A%7Delse%7B%0Aif%28typeof%20%28%5F3b7%29%3D%3D%22undefined%22%7C%7C%5F3b7%3D%3D%3Dnull%29%7B%0Areturn%20%5F3ba%5B0%5D%3B%0A%7D%0A%7D%0Afor%28var%20i%3D0%3Bi%3C%5F3ba%2Elength%3Bi%2B%2B%29%7B%0Avar%20%5F3bc%3D%5F3ba%5Bi%5D%3B%0Avar%20cls%3D%5F3bc%2EclassName%3B%0Aif%28typeof%20%28cls%29%21%3D%22string%22%29%7B%0Acls%3D%5F3bc%2EgetAttribute%28%22class%22%29%3B%0A%7D%0Aif%28typeof%20%28cls%29%3D%3D%22string%22%29%7B%0Avar%20%5F3be%3Dcls%2Esplit%28%22%20%22%29%3B%0Afor%28var%20j%3D0%3Bj%3C%5F3be%2Elength%3Bj%2B%2B%29%7B%0Aif%28%5F3be%5Bj%5D%3D%3D%5F3b7%29%7B%0Areturn%20%5F3bc%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Areturn%20null%3B%0A%7D%2CgetFirstParentByTagAndClassName%3Afunction%28elem%2C%5F3c1%2C%5F3c2%29%7B%0Avar%20self%3DMochiKit%2EDOM%3B%0Aelem%3Dself%2EgetElement%28elem%29%3B%0Aif%28typeof%20%28%5F3c1%29%3D%3D%22undefined%22%7C%7C%5F3c1%3D%3D%3Dnull%29%7B%0A%5F3c1%3D%22%2A%22%3B%0A%7Delse%7B%0A%5F3c1%3D%5F3c1%2EtoUpperCase%28%29%3B%0A%7D%0Aif%28typeof%20%28%5F3c2%29%3D%3D%22undefined%22%7C%7C%5F3c2%3D%3D%3Dnull%29%7B%0A%5F3c2%3Dnull%3B%0A%7D%0Aif%28elem%29%7B%0Aelem%3Delem%2EparentNode%3B%0A%7D%0Awhile%28elem%26%26elem%2EtagName%29%7B%0Avar%20%5F3c4%3Delem%2EtagName%2EtoUpperCase%28%29%3B%0Aif%28%28%5F3c1%3D%3D%3D%22%2A%22%7C%7C%5F3c1%3D%3D%5F3c4%29%26%26%28%5F3c2%3D%3D%3Dnull%7C%7Cself%2EhasElementClass%28elem%2C%5F3c2%29%29%29%7B%0Areturn%20elem%3B%0A%7D%0Aelem%3Delem%2EparentNode%3B%0A%7D%0Areturn%20null%3B%0A%7D%2C%5F%5Fnew%5F%5F%3Afunction%28win%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28typeof%20%28document%29%21%3D%22undefined%22%29%7B%0Athis%2E%5Fdocument%3Ddocument%3B%0Avar%20%5F3c7%3D%22http%3A%2F%2Fwww%2Emozilla%2Eorg%2Fkeymaster%2Fgatekeeper%2Fthere%2Eis%2Eonly%2Exul%22%3B%0Athis%2E%5Fxhtml%3D%28document%2EdocumentElement%26%26document%2EcreateElementNS%26%26document%2EdocumentElement%2EnamespaceURI%3D%3D%3D%5F3c7%29%3B%0A%7Delse%7B%0Aif%28MochiKit%2EMockDOM%29%7B%0Athis%2E%5Fdocument%3DMochiKit%2EMockDOM%2Edocument%3B%0A%7D%0A%7D%0Athis%2E%5Fwindow%3Dwin%3B%0Athis%2EdomConverters%3Dnew%20m%2EAdapterRegistry%28%29%3B%0Avar%20%5F3c8%3Dthis%2E%5Fdocument%2EcreateElement%28%22span%22%29%3B%0Avar%20%5F3c9%3B%0Aif%28%5F3c8%26%26%5F3c8%2Eattributes%26%26%5F3c8%2Eattributes%2Elength%3E0%29%7B%0Avar%20%5F3ca%3Dm%2Efilter%3B%0A%5F3c9%3Dfunction%28node%29%7B%0Areturn%20%5F3ca%28%5F3c9%2EignoreAttrFilter%2Cnode%2Eattributes%29%3B%0A%7D%3B%0A%5F3c9%2EignoreAttr%3D%7B%7D%3B%0Avar%20%5F3cc%3D%5F3c8%2Eattributes%3B%0Avar%20%5F3cd%3D%5F3c9%2EignoreAttr%3B%0Afor%28var%20i%3D0%3Bi%3C%5F3cc%2Elength%3Bi%2B%2B%29%7B%0Avar%20a%3D%5F3cc%5Bi%5D%3B%0A%5F3cd%5Ba%2Ename%5D%3Da%2Evalue%3B%0A%7D%0A%5F3c9%2EignoreAttrFilter%3Dfunction%28a%29%7B%0Areturn%20%28%5F3c9%2EignoreAttr%5Ba%2Ename%5D%21%3Da%2Evalue%29%3B%0A%7D%3B%0A%5F3c9%2Ecompliant%3Dfalse%3B%0A%5F3c9%2Erenames%3D%7B%22class%22%3A%22className%22%2C%22checked%22%3A%22defaultChecked%22%2C%22usemap%22%3A%22useMap%22%2C%22for%22%3A%22htmlFor%22%2C%22readonly%22%3A%22readOnly%22%2C%22colspan%22%3A%22colSpan%22%2C%22bgcolor%22%3A%22bgColor%22%2C%22cellspacing%22%3A%22cellSpacing%22%2C%22cellpadding%22%3A%22cellPadding%22%7D%3B%0A%7Delse%7B%0A%5F3c9%3Dfunction%28node%29%7B%0Areturn%20node%2Eattributes%3B%0A%7D%3B%0A%5F3c9%2Ecompliant%3Dtrue%3B%0A%5F3c9%2EignoreAttr%3D%7B%7D%3B%0A%5F3c9%2Erenames%3D%7B%7D%3B%0A%7D%0Athis%2EattributeArray%3D%5F3c9%3B%0Avar%20%5F3d2%3Dfunction%28%5F3d3%2Carr%29%7B%0Avar%20%5F3d5%3Darr%5B0%5D%3B%0Avar%20%5F3d6%3Darr%5B1%5D%3B%0Avar%20%5F3d7%3D%5F3d6%2Esplit%28%22%2E%22%29%5B1%5D%3B%0Avar%20str%3D%22%22%3B%0Astr%2B%3D%22if%20%28%21MochiKit%2E%22%2B%5F3d7%2B%22%29%20%7B%20throw%20new%20Error%28%5C%22%22%3B%0Astr%2B%3D%22This%20function%20has%20been%20deprecated%20and%20depends%20on%20MochiKit%2E%22%3B%0Astr%2B%3D%5F3d7%2B%22%2E%5C%22%29%3B%7D%22%3B%0Astr%2B%3D%22return%20%22%2B%5F3d6%2B%22%2Eapply%28this%2C%20arguments%29%3B%22%3B%0AMochiKit%5B%5F3d3%5D%5B%5F3d5%5D%3Dnew%20Function%28str%29%3B%0A%7D%3B%0Afor%28var%20i%3D0%3Bi%3CMochiKit%2EDOM%2EDEPRECATED%2Elength%3Bi%2B%2B%29%7B%0A%5F3d2%28%22DOM%22%2CMochiKit%2EDOM%2EDEPRECATED%5Bi%5D%29%3B%0A%7D%0Avar%20%5F3d9%3Dthis%2EcreateDOMFunc%3B%0Athis%2EUL%3D%5F3d9%28%22ul%22%29%3B%0Athis%2EOL%3D%5F3d9%28%22ol%22%29%3B%0Athis%2ELI%3D%5F3d9%28%22li%22%29%3B%0Athis%2EDL%3D%5F3d9%28%22dl%22%29%3B%0Athis%2EDT%3D%5F3d9%28%22dt%22%29%3B%0Athis%2EDD%3D%5F3d9%28%22dd%22%29%3B%0Athis%2ETD%3D%5F3d9%28%22td%22%29%3B%0Athis%2ETR%3D%5F3d9%28%22tr%22%29%3B%0Athis%2ETBODY%3D%5F3d9%28%22tbody%22%29%3B%0Athis%2ETHEAD%3D%5F3d9%28%22thead%22%29%3B%0Athis%2ETFOOT%3D%5F3d9%28%22tfoot%22%29%3B%0Athis%2ETABLE%3D%5F3d9%28%22table%22%29%3B%0Athis%2ETH%3D%5F3d9%28%22th%22%29%3B%0Athis%2EINPUT%3D%5F3d9%28%22input%22%29%3B%0Athis%2ESPAN%3D%5F3d9%28%22span%22%29%3B%0Athis%2EA%3D%5F3d9%28%22a%22%29%3B%0Athis%2EDIV%3D%5F3d9%28%22div%22%29%3B%0Athis%2EIMG%3D%5F3d9%28%22img%22%29%3B%0Athis%2EBUTTON%3D%5F3d9%28%22button%22%29%3B%0Athis%2ETT%3D%5F3d9%28%22tt%22%29%3B%0Athis%2EPRE%3D%5F3d9%28%22pre%22%29%3B%0Athis%2EH1%3D%5F3d9%28%22h1%22%29%3B%0Athis%2EH2%3D%5F3d9%28%22h2%22%29%3B%0Athis%2EH3%3D%5F3d9%28%22h3%22%29%3B%0Athis%2EH4%3D%5F3d9%28%22h4%22%29%3B%0Athis%2EH5%3D%5F3d9%28%22h5%22%29%3B%0Athis%2EH6%3D%5F3d9%28%22h6%22%29%3B%0Athis%2EBR%3D%5F3d9%28%22br%22%29%3B%0Athis%2EHR%3D%5F3d9%28%22hr%22%29%3B%0Athis%2ELABEL%3D%5F3d9%28%22label%22%29%3B%0Athis%2ETEXTAREA%3D%5F3d9%28%22textarea%22%29%3B%0Athis%2EFORM%3D%5F3d9%28%22form%22%29%3B%0Athis%2EP%3D%5F3d9%28%22p%22%29%3B%0Athis%2ESELECT%3D%5F3d9%28%22select%22%29%3B%0Athis%2EOPTION%3D%5F3d9%28%22option%22%29%3B%0Athis%2EOPTGROUP%3D%5F3d9%28%22optgroup%22%29%3B%0Athis%2ELEGEND%3D%5F3d9%28%22legend%22%29%3B%0Athis%2EFIELDSET%3D%5F3d9%28%22fieldset%22%29%3B%0Athis%2ESTRONG%3D%5F3d9%28%22strong%22%29%3B%0Athis%2ECANVAS%3D%5F3d9%28%22canvas%22%29%3B%0Athis%2E%24%3Dthis%2EgetElement%3B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3Am%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0Am%2EnameFunctions%28this%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EDOM%2E%5F%5Fnew%5F%5F%28%28%28typeof%20%28window%29%3D%3D%22undefined%22%29%3Fthis%3Awindow%29%29%3B%0Aif%28MochiKit%2E%5F%5Fexport%5F%5F%29%7B%0AwithWindow%3DMochiKit%2EDOM%2EwithWindow%3B%0AwithDocument%3DMochiKit%2EDOM%2EwithDocument%3B%0A%7D%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2EDOM%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22Selector%22%2C%5B%22Base%22%2C%22DOM%22%2C%22Iter%22%5D%29%3B%0AMochiKit%2ESelector%2ENAME%3D%22MochiKit%2ESelector%22%3B%0AMochiKit%2ESelector%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2ESelector%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2ESelector%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2ESelector%2EEXPORT%3D%5B%22Selector%22%2C%22findChildElements%22%2C%22findDocElements%22%2C%22%24%24%22%5D%3B%0AMochiKit%2ESelector%2EEXPORT%5FOK%3D%5B%5D%3B%0AMochiKit%2ESelector%2ESelector%3Dfunction%28%5F3da%29%7B%0Athis%2Eparams%3D%7BclassNames%3A%5B%5D%2CpseudoClassNames%3A%5B%5D%7D%3B%0Athis%2Eexpression%3D%5F3da%2EtoString%28%29%2Ereplace%28%2F%28%5E%5Cs%2B%7C%5Cs%2B%24%29%2Fg%2C%22%22%29%3B%0Athis%2EparseExpression%28%29%3B%0Athis%2EcompileMatcher%28%29%3B%0A%7D%3B%0AMochiKit%2ESelector%2ESelector%2Eprototype%3D%7B%5F%5Fclass%5F%5F%3AMochiKit%2ESelector%2ESelector%2CparseExpression%3Afunction%28%29%7B%0Afunction%20abort%28%5F3db%29%7B%0Athrow%20%22Parse%20error%20in%20selector%3A%20%22%2B%5F3db%3B%0A%7D%0Aif%28this%2Eexpression%3D%3D%22%22%29%7B%0Aabort%28%22empty%20expression%22%29%3B%0A%7D%0Avar%20repr%3DMochiKit%2EBase%2Erepr%3B%0Avar%20%5F3dd%3Dthis%2Eparams%3B%0Avar%20expr%3Dthis%2Eexpression%3B%0Avar%20%5F3df%2C%5F3e0%2C%5F3e1%2Crest%3B%0Awhile%28%5F3df%3Dexpr%2Ematch%28%2F%5E%28%2E%2A%29%5C%5B%28%5Ba%2Dz0%2D9%5F%3A%2D%5D%2B%3F%29%28%3F%3A%28%5B%7E%5C%7C%21%5E%24%2A%5D%3F%3D%29%28%3F%3A%22%28%5B%5E%22%5D%2A%29%22%7C%28%5B%5E%5C%5D%5Cs%5D%2A%29%29%29%3F%5C%5D%24%2Fi%29%29%7B%0A%5F3dd%2Eattributes%3D%5F3dd%2Eattributes%7C%7C%5B%5D%3B%0A%5F3dd%2Eattributes%2Epush%28%7Bname%3A%5F3df%5B2%5D%2Coperator%3A%5F3df%5B3%5D%2Cvalue%3A%5F3df%5B4%5D%7C%7C%5F3df%5B5%5D%7C%7C%22%22%7D%29%3B%0Aexpr%3D%5F3df%5B1%5D%3B%0A%7D%0Aif%28expr%3D%3D%22%2A%22%29%7B%0Areturn%20this%2Eparams%2Ewildcard%3Dtrue%3B%0A%7D%0Awhile%28%5F3df%3Dexpr%2Ematch%28%2F%5E%28%5B%5Ea%2Dz0%2D9%5F%2D%5D%29%3F%28%5Ba%2Dz0%2D9%5F%2D%5D%2B%28%3F%3A%5C%28%5B%5E%29%5D%2A%5C%29%29%3F%29%28%2E%2A%29%2Fi%29%29%7B%0A%5F3e0%3D%5F3df%5B1%5D%3B%0A%5F3e1%3D%5F3df%5B2%5D%3B%0Arest%3D%5F3df%5B3%5D%3B%0Aswitch%28%5F3e0%29%7B%0Acase%20%22%23%22%3A%0A%5F3dd%2Eid%3D%5F3e1%3B%0Abreak%3B%0Acase%20%22%2E%22%3A%0A%5F3dd%2EclassNames%2Epush%28%5F3e1%29%3B%0Abreak%3B%0Acase%20%22%3A%22%3A%0A%5F3dd%2EpseudoClassNames%2Epush%28%5F3e1%29%3B%0Abreak%3B%0Acase%20%22%22%3A%0Acase%20undefined%3A%0A%5F3dd%2EtagName%3D%5F3e1%2EtoUpperCase%28%29%3B%0Abreak%3B%0Adefault%3A%0Aabort%28repr%28expr%29%29%3B%0A%7D%0Aexpr%3Drest%3B%0A%7D%0Aif%28expr%2Elength%3E0%29%7B%0Aabort%28repr%28expr%29%29%3B%0A%7D%0A%7D%2CbuildMatchExpression%3Afunction%28%29%7B%0Avar%20repr%3DMochiKit%2EBase%2Erepr%3B%0Avar%20%5F3e4%3Dthis%2Eparams%3B%0Avar%20%5F3e5%3D%5B%5D%3B%0Avar%20%5F3e6%2Ci%3B%0Afunction%20childElements%28%5F3e8%29%7B%0Areturn%20%22MochiKit%2EBase%2Efilter%28function%20%28node%29%20%7B%20return%20node%2EnodeType%20%3D%3D%201%3B%20%7D%2C%20%22%2B%5F3e8%2B%22%2EchildNodes%29%22%3B%0A%7D%0Aif%28%5F3e4%2Ewildcard%29%7B%0A%5F3e5%2Epush%28%22true%22%29%3B%0A%7D%0Aif%28%5F3e6%3D%5F3e4%2Eid%29%7B%0A%5F3e5%2Epush%28%22element%2Eid%20%3D%3D%20%22%2Brepr%28%5F3e6%29%29%3B%0A%7D%0Aif%28%5F3e6%3D%5F3e4%2EtagName%29%7B%0A%5F3e5%2Epush%28%22element%2EtagName%2EtoUpperCase%28%29%20%3D%3D%20%22%2Brepr%28%5F3e6%29%29%3B%0A%7D%0Aif%28%28%5F3e6%3D%5F3e4%2EclassNames%29%2Elength%3E0%29%7B%0Afor%28i%3D0%3Bi%3C%5F3e6%2Elength%3Bi%2B%2B%29%7B%0A%5F3e5%2Epush%28%22MochiKit%2EDOM%2EhasElementClass%28element%2C%20%22%2Brepr%28%5F3e6%5Bi%5D%29%2B%22%29%22%29%3B%0A%7D%0A%7D%0Aif%28%28%5F3e6%3D%5F3e4%2EpseudoClassNames%29%2Elength%3E0%29%7B%0Afor%28i%3D0%3Bi%3C%5F3e6%2Elength%3Bi%2B%2B%29%7B%0Avar%20%5F3e9%3D%5F3e6%5Bi%5D%2Ematch%28%2F%5E%28%5B%5E%28%5D%2B%29%28%3F%3A%5C%28%28%2E%2A%29%5C%29%29%3F%24%2F%29%3B%0Avar%20%5F3ea%3D%5F3e9%5B1%5D%3B%0Avar%20%5F3eb%3D%5F3e9%5B2%5D%3B%0Aswitch%28%5F3ea%29%7B%0Acase%20%22root%22%3A%0A%5F3e5%2Epush%28%22element%2EnodeType%20%3D%3D%209%20%7C%7C%20element%20%3D%3D%3D%20element%2EownerDocument%2EdocumentElement%22%29%3B%0Abreak%3B%0Acase%20%22nth%2Dchild%22%3A%0Acase%20%22nth%2Dlast%2Dchild%22%3A%0Acase%20%22nth%2Dof%2Dtype%22%3A%0Acase%20%22nth%2Dlast%2Dof%2Dtype%22%3A%0A%5F3e9%3D%5F3eb%2Ematch%28%2F%5E%28%28%3F%3A%28%5Cd%2B%29n%5C%2B%29%3F%28%5Cd%2B%29%7Codd%7Ceven%29%24%2F%29%3B%0Aif%28%21%5F3e9%29%7B%0Athrow%20%22Invalid%20argument%20to%20pseudo%20element%20nth%2Dchild%3A%20%22%2B%5F3eb%3B%0A%7D%0Avar%20a%2Cb%3B%0Aif%28%5F3e9%5B0%5D%3D%3D%22odd%22%29%7B%0Aa%3D2%3B%0Ab%3D1%3B%0A%7Delse%7B%0Aif%28%5F3e9%5B0%5D%3D%3D%22even%22%29%7B%0Aa%3D2%3B%0Ab%3D0%3B%0A%7Delse%7B%0Aa%3D%5F3e9%5B2%5D%26%26parseInt%28%5F3e9%29%7C%7Cnull%3B%0Ab%3DparseInt%28%5F3e9%5B3%5D%29%3B%0A%7D%0A%7D%0A%5F3e5%2Epush%28%22this%2EnthChild%28element%2C%22%2Ba%2B%22%2C%22%2Bb%2B%22%2C%22%2B%21%21%5F3ea%2Ematch%28%22%5Enth%2Dlast%22%29%2B%22%2C%22%2B%21%21%5F3ea%2Ematch%28%22of%2Dtype%24%22%29%2B%22%29%22%29%3B%0Abreak%3B%0Acase%20%22first%2Dchild%22%3A%0A%5F3e5%2Epush%28%22this%2EnthChild%28element%2C%20null%2C%201%29%22%29%3B%0Abreak%3B%0Acase%20%22last%2Dchild%22%3A%0A%5F3e5%2Epush%28%22this%2EnthChild%28element%2C%20null%2C%201%2C%20true%29%22%29%3B%0Abreak%3B%0Acase%20%22first%2Dof%2Dtype%22%3A%0A%5F3e5%2Epush%28%22this%2EnthChild%28element%2C%20null%2C%201%2C%20false%2C%20true%29%22%29%3B%0Abreak%3B%0Acase%20%22last%2Dof%2Dtype%22%3A%0A%5F3e5%2Epush%28%22this%2EnthChild%28element%2C%20null%2C%201%2C%20true%2C%20true%29%22%29%3B%0Abreak%3B%0Acase%20%22only%2Dchild%22%3A%0A%5F3e5%2Epush%28childElements%28%22element%2EparentNode%22%29%2B%22%2Elength%20%3D%3D%201%22%29%3B%0Abreak%3B%0Acase%20%22only%2Dof%2Dtype%22%3A%0A%5F3e5%2Epush%28%22MochiKit%2EBase%2Efilter%28function%20%28node%29%20%7B%20return%20node%2EtagName%20%3D%3D%20element%2EtagName%3B%20%7D%2C%20%22%2BchildElements%28%22element%2EparentNode%22%29%2B%22%29%2Elength%20%3D%3D%201%22%29%3B%0Abreak%3B%0Acase%20%22empty%22%3A%0A%5F3e5%2Epush%28%22element%2EchildNodes%2Elength%20%3D%3D%200%22%29%3B%0Abreak%3B%0Acase%20%22enabled%22%3A%0A%5F3e5%2Epush%28%22%28this%2EisUIElement%28element%29%20%26%26%20element%2Edisabled%20%3D%3D%3D%20false%29%22%29%3B%0Abreak%3B%0Acase%20%22disabled%22%3A%0A%5F3e5%2Epush%28%22%28this%2EisUIElement%28element%29%20%26%26%20element%2Edisabled%20%3D%3D%3D%20true%29%22%29%3B%0Abreak%3B%0Acase%20%22checked%22%3A%0A%5F3e5%2Epush%28%22%28this%2EisUIElement%28element%29%20%26%26%20element%2Echecked%20%3D%3D%3D%20true%29%22%29%3B%0Abreak%3B%0Acase%20%22not%22%3A%0Avar%20%5F3ee%3Dnew%20MochiKit%2ESelector%2ESelector%28%5F3eb%29%3B%0A%5F3e5%2Epush%28%22%21%28%20%22%2B%5F3ee%2EbuildMatchExpression%28%29%2B%22%29%22%29%3B%0Abreak%3B%0A%7D%0A%7D%0A%7D%0Aif%28%5F3e6%3D%5F3e4%2Eattributes%29%7B%0AMochiKit%2EBase%2Emap%28function%28%5F3ef%29%7B%0Avar%20%5F3f0%3D%22MochiKit%2EDOM%2EgetNodeAttribute%28element%2C%20%22%2Brepr%28%5F3ef%2Ename%29%2B%22%29%22%3B%0Avar%20%5F3f1%3Dfunction%28%5F3f2%29%7B%0Areturn%20%5F3f0%2B%22%2Esplit%28%22%2Brepr%28%5F3f2%29%2B%22%29%22%3B%0A%7D%3B%0A%5F3e5%2Epush%28%5F3f0%2B%22%20%21%3D%20null%22%29%3B%0Aswitch%28%5F3ef%2Eoperator%29%7B%0Acase%20%22%3D%22%3A%0A%5F3e5%2Epush%28%5F3f0%2B%22%20%3D%3D%20%22%2Brepr%28%5F3ef%2Evalue%29%29%3B%0Abreak%3B%0Acase%20%22%7E%3D%22%3A%0A%5F3e5%2Epush%28%22MochiKit%2EBase%2EfindValue%28%22%2B%5F3f1%28%22%20%22%29%2B%22%2C%20%22%2Brepr%28%5F3ef%2Evalue%29%2B%22%29%20%3E%20%2D1%22%29%3B%0Abreak%3B%0Acase%20%22%5E%3D%22%3A%0A%5F3e5%2Epush%28%5F3f0%2B%22%2Esubstring%280%2C%20%22%2B%5F3ef%2Evalue%2Elength%2B%22%29%20%3D%3D%20%22%2Brepr%28%5F3ef%2Evalue%29%29%3B%0Abreak%3B%0Acase%20%22%24%3D%22%3A%0A%5F3e5%2Epush%28%5F3f0%2B%22%2Esubstring%28%22%2B%5F3f0%2B%22%2Elength%20%2D%20%22%2B%5F3ef%2Evalue%2Elength%2B%22%29%20%3D%3D%20%22%2Brepr%28%5F3ef%2Evalue%29%29%3B%0Abreak%3B%0Acase%20%22%2A%3D%22%3A%0A%5F3e5%2Epush%28%5F3f0%2B%22%2Ematch%28%22%2Brepr%28%5F3ef%2Evalue%29%2B%22%29%22%29%3B%0Abreak%3B%0Acase%20%22%7C%3D%22%3A%0A%5F3e5%2Epush%28%5F3f1%28%22%2D%22%29%2B%22%5B0%5D%2EtoUpperCase%28%29%20%3D%3D%20%22%2Brepr%28%5F3ef%2Evalue%2EtoUpperCase%28%29%29%29%3B%0Abreak%3B%0Acase%20%22%21%3D%22%3A%0A%5F3e5%2Epush%28%5F3f0%2B%22%20%21%3D%20%22%2Brepr%28%5F3ef%2Evalue%29%29%3B%0Abreak%3B%0Acase%20%22%22%3A%0Acase%20undefined%3A%0Abreak%3B%0Adefault%3A%0Athrow%20%22Unknown%20operator%20%22%2B%5F3ef%2Eoperator%2B%22%20in%20selector%22%3B%0A%7D%0A%7D%2C%5F3e6%29%3B%0A%7D%0Areturn%20%5F3e5%2Ejoin%28%22%20%26%26%20%22%29%3B%0A%7D%2CcompileMatcher%3Afunction%28%29%7B%0Avar%20code%3D%22return%20%28%21element%2EtagName%29%20%3F%20false%20%3A%20%22%2Bthis%2EbuildMatchExpression%28%29%2B%22%3B%22%3B%0Athis%2Ematch%3Dnew%20Function%28%22element%22%2Ccode%29%3B%0A%7D%2CnthChild%3Afunction%28%5F3f4%2Ca%2Cb%2C%5F3f7%2C%5F3f8%29%7B%0Avar%20%5F3f9%3DMochiKit%2EBase%2Efilter%28function%28node%29%7B%0Areturn%20node%2EnodeType%3D%3D1%3B%0A%7D%2C%5F3f4%2EparentNode%2EchildNodes%29%3B%0Aif%28%5F3f8%29%7B%0A%5F3f9%3DMochiKit%2EBase%2Efilter%28function%28node%29%7B%0Areturn%20node%2EtagName%3D%3D%5F3f4%2EtagName%3B%0A%7D%2C%5F3f9%29%3B%0A%7D%0Aif%28%5F3f7%29%7B%0A%5F3f9%3DMochiKit%2EIter%2Ereversed%28%5F3f9%29%3B%0A%7D%0Aif%28a%29%7B%0Avar%20%5F3fc%3DMochiKit%2EBase%2EfindIdentical%28%5F3f9%2C%5F3f4%29%3B%0Areturn%20%28%28%5F3fc%2B1%2Db%29%2Fa%29%251%3D%3D0%3B%0A%7Delse%7B%0Areturn%20b%3D%3DMochiKit%2EBase%2EfindIdentical%28%5F3f9%2C%5F3f4%29%2B1%3B%0A%7D%0A%7D%2CisUIElement%3Afunction%28%5F3fd%29%7B%0Areturn%20MochiKit%2EBase%2EfindValue%28%5B%22input%22%2C%22button%22%2C%22select%22%2C%22option%22%2C%22textarea%22%2C%22object%22%5D%2C%5F3fd%2EtagName%2EtoLowerCase%28%29%29%3E%2D1%3B%0A%7D%2CfindElements%3Afunction%28%5F3fe%2Caxis%29%7B%0Avar%20%5F400%3B%0Aif%28axis%3D%3Dundefined%29%7B%0Aaxis%3D%22%22%3B%0A%7D%0Afunction%20inScope%28%5F401%2C%5F402%29%7B%0Aif%28axis%3D%3D%22%22%29%7B%0Areturn%20MochiKit%2EDOM%2EisChildNode%28%5F401%2C%5F402%29%3B%0A%7Delse%7B%0Aif%28axis%3D%3D%22%3E%22%29%7B%0Areturn%20%5F401%2EparentNode%3D%3D%3D%5F402%3B%0A%7Delse%7B%0Aif%28axis%3D%3D%22%2B%22%29%7B%0Areturn%20%5F401%3D%3D%3DnextSiblingElement%28%5F402%29%3B%0A%7Delse%7B%0Aif%28axis%3D%3D%22%7E%22%29%7B%0Avar%20%5F403%3D%5F402%3B%0Awhile%28%5F403%3DnextSiblingElement%28%5F403%29%29%7B%0Aif%28%5F401%3D%3D%3D%5F403%29%7B%0Areturn%20true%3B%0A%7D%0A%7D%0Areturn%20false%3B%0A%7Delse%7B%0Athrow%20%22Invalid%20axis%3A%20%22%2Baxis%3B%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%0Aif%28%5F400%3DMochiKit%2EDOM%2EgetElement%28this%2Eparams%2Eid%29%29%7B%0Aif%28this%2Ematch%28%5F400%29%29%7B%0Aif%28%21%5F3fe%7C%7CinScope%28%5F400%2C%5F3fe%29%29%7B%0Areturn%20%5B%5F400%5D%3B%0A%7D%0A%7D%0A%7D%0Afunction%20nextSiblingElement%28node%29%7B%0Anode%3Dnode%2EnextSibling%3B%0Awhile%28node%26%26node%2EnodeType%21%3D1%29%7B%0Anode%3Dnode%2EnextSibling%3B%0A%7D%0Areturn%20node%3B%0A%7D%0Aif%28axis%3D%3D%22%22%29%7B%0A%5F3fe%3D%28%5F3fe%7C%7CMochiKit%2EDOM%2EcurrentDocument%28%29%29%2EgetElementsByTagName%28this%2Eparams%2EtagName%7C%7C%22%2A%22%29%3B%0A%7Delse%7B%0Aif%28axis%3D%3D%22%3E%22%29%7B%0Aif%28%21%5F3fe%29%7B%0Athrow%20%22%3E%20combinator%20not%20allowed%20without%20preceeding%20expression%22%3B%0A%7D%0A%5F3fe%3DMochiKit%2EBase%2Efilter%28function%28node%29%7B%0Areturn%20node%2EnodeType%3D%3D1%3B%0A%7D%2C%5F3fe%2EchildNodes%29%3B%0A%7Delse%7B%0Aif%28axis%3D%3D%22%2B%22%29%7B%0Aif%28%21%5F3fe%29%7B%0Athrow%20%22%2B%20combinator%20not%20allowed%20without%20preceeding%20expression%22%3B%0A%7D%0A%5F3fe%3DnextSiblingElement%28%5F3fe%29%26%26%5BnextSiblingElement%28%5F3fe%29%5D%3B%0A%7Delse%7B%0Aif%28axis%3D%3D%22%7E%22%29%7B%0Aif%28%21%5F3fe%29%7B%0Athrow%20%22%7E%20combinator%20not%20allowed%20without%20preceeding%20expression%22%3B%0A%7D%0Avar%20%5F406%3D%5B%5D%3B%0Awhile%28nextSiblingElement%28%5F3fe%29%29%7B%0A%5F3fe%3DnextSiblingElement%28%5F3fe%29%3B%0A%5F406%2Epush%28%5F3fe%29%3B%0A%7D%0A%5F3fe%3D%5F406%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Aif%28%21%5F3fe%29%7B%0Areturn%20%5B%5D%3B%0A%7D%0Avar%20%5F407%3DMochiKit%2EBase%2Efilter%28MochiKit%2EBase%2Ebind%28function%28%5F408%29%7B%0Areturn%20this%2Ematch%28%5F408%29%3B%0A%7D%2Cthis%29%2C%5F3fe%29%3B%0Areturn%20%5F407%3B%0A%7D%2Crepr%3Afunction%28%29%7B%0Areturn%20%22Selector%28%22%2Bthis%2Eexpression%2B%22%29%22%3B%0A%7D%2CtoString%3AMochiKit%2EBase%2EforwardCall%28%22repr%22%29%7D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2ESelector%2C%7BfindChildElements%3Afunction%28%5F409%2C%5F40a%29%7B%0Avar%20uniq%3Dfunction%28arr%29%7B%0Avar%20res%3D%5B%5D%3B%0Afor%28var%20i%3D0%3Bi%3Carr%2Elength%3Bi%2B%2B%29%7B%0Aif%28MochiKit%2EBase%2EfindIdentical%28res%2Carr%5Bi%5D%29%3C0%29%7B%0Ares%2Epush%28arr%5Bi%5D%29%3B%0A%7D%0A%7D%0Areturn%20res%3B%0A%7D%3B%0Areturn%20MochiKit%2EBase%2EflattenArray%28MochiKit%2EBase%2Emap%28function%28%5F40f%29%7B%0Avar%20%5F410%3D%22%22%3B%0Avar%20%5F411%3Dfunction%28%5F412%2Cexpr%29%7B%0Aif%28match%3Dexpr%2Ematch%28%2F%5E%5B%3E%2B%7E%5D%24%2F%29%29%7B%0A%5F410%3Dmatch%5B0%5D%3B%0Areturn%20%5F412%3B%0A%7Delse%7B%0Avar%20%5F414%3Dnew%20MochiKit%2ESelector%2ESelector%28expr%29%3B%0Avar%20%5F415%3DMochiKit%2EIter%2Ereduce%28function%28%5F416%2C%5F417%29%7B%0Areturn%20MochiKit%2EBase%2Eextend%28%5F416%2C%5F414%2EfindElements%28%5F417%7C%7C%5F409%2C%5F410%29%29%3B%0A%7D%2C%5F412%2C%5B%5D%29%3B%0A%5F410%3D%22%22%3B%0Areturn%20%5F415%3B%0A%7D%0A%7D%3B%0Avar%20%5F418%3D%5F40f%2Ereplace%28%2F%28%5E%5Cs%2B%7C%5Cs%2B%24%29%2Fg%2C%22%22%29%2Esplit%28%2F%5Cs%2B%2F%29%3B%0Areturn%20uniq%28MochiKit%2EIter%2Ereduce%28%5F411%2C%5F418%2C%5Bnull%5D%29%29%3B%0A%7D%2C%5F40a%29%29%3B%0A%7D%2CfindDocElements%3Afunction%28%29%7B%0Areturn%20MochiKit%2ESelector%2EfindChildElements%28MochiKit%2EDOM%2EcurrentDocument%28%29%2Carguments%29%3B%0A%7D%2C%5F%5Fnew%5F%5F%3Afunction%28%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Athis%2E%24%24%3Dthis%2EfindDocElements%3B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3Am%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0Am%2EnameFunctions%28this%29%3B%0A%7D%7D%29%3B%0AMochiKit%2ESelector%2E%5F%5Fnew%5F%5F%28%29%3B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2ESelector%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22Style%22%2C%5B%22Base%22%2C%22DOM%22%5D%29%3B%0AMochiKit%2EStyle%2ENAME%3D%22MochiKit%2EStyle%22%3B%0AMochiKit%2EStyle%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EStyle%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2EStyle%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EStyle%2EEXPORT%5FOK%3D%5B%5D%3B%0AMochiKit%2EStyle%2EEXPORT%3D%5B%22setStyle%22%2C%22setOpacity%22%2C%22getStyle%22%2C%22getElementDimensions%22%2C%22elementDimensions%22%2C%22setElementDimensions%22%2C%22getElementPosition%22%2C%22elementPosition%22%2C%22setElementPosition%22%2C%22makePositioned%22%2C%22undoPositioned%22%2C%22makeClipping%22%2C%22undoClipping%22%2C%22setDisplayForElement%22%2C%22hideElement%22%2C%22showElement%22%2C%22getViewportDimensions%22%2C%22getViewportPosition%22%2C%22Dimensions%22%2C%22Coordinates%22%5D%3B%0AMochiKit%2EStyle%2EDimensions%3Dfunction%28w%2Ch%29%7B%0Athis%2Ew%3Dw%3B%0Athis%2Eh%3Dh%3B%0A%7D%3B%0AMochiKit%2EStyle%2EDimensions%2Eprototype%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Avar%20repr%3DMochiKit%2EBase%2Erepr%3B%0Areturn%20%22%7Bw%3A%20%22%2Brepr%28this%2Ew%29%2B%22%2C%20h%3A%20%22%2Brepr%28this%2Eh%29%2B%22%7D%22%3B%0A%7D%3B%0AMochiKit%2EStyle%2EDimensions%2Eprototype%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EStyle%2ECoordinates%3Dfunction%28x%2Cy%29%7B%0Athis%2Ex%3Dx%3B%0Athis%2Ey%3Dy%3B%0A%7D%3B%0AMochiKit%2EStyle%2ECoordinates%2Eprototype%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Avar%20repr%3DMochiKit%2EBase%2Erepr%3B%0Areturn%20%22%7Bx%3A%20%22%2Brepr%28this%2Ex%29%2B%22%2C%20y%3A%20%22%2Brepr%28this%2Ey%29%2B%22%7D%22%3B%0A%7D%3B%0AMochiKit%2EStyle%2ECoordinates%2Eprototype%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EStyle%2C%7BgetStyle%3Afunction%28elem%2C%5F421%29%7B%0Avar%20dom%3DMochiKit%2EDOM%3B%0Avar%20d%3Ddom%2E%5Fdocument%3B%0Aelem%3Ddom%2EgetElement%28elem%29%3B%0A%5F421%3DMochiKit%2EBase%2Ecamelize%28%5F421%29%3B%0Aif%28%21elem%7C%7Celem%3D%3Dd%29%7B%0Areturn%20undefined%3B%0A%7D%0Aif%28%5F421%3D%3D%22opacity%22%26%26typeof%20%28elem%2Efilters%29%21%3D%22undefined%22%29%7B%0Avar%20%5F424%3D%28MochiKit%2EStyle%2EgetStyle%28elem%2C%22filter%22%29%7C%7C%22%22%29%2Ematch%28%2Falpha%5C%28opacity%3D%28%2E%2A%29%5C%29%2F%29%3B%0Aif%28%5F424%26%26%5F424%5B1%5D%29%7B%0Areturn%20parseFloat%28%5F424%5B1%5D%29%2F100%3B%0A%7D%0Areturn%201%3B%0A%7D%0Aif%28%5F421%3D%3D%22float%22%7C%7C%5F421%3D%3D%22cssFloat%22%7C%7C%5F421%3D%3D%22styleFloat%22%29%7B%0Aif%28elem%2Estyle%5B%22float%22%5D%29%7B%0Areturn%20elem%2Estyle%5B%22float%22%5D%3B%0A%7Delse%7B%0Aif%28elem%2Estyle%2EcssFloat%29%7B%0Areturn%20elem%2Estyle%2EcssFloat%3B%0A%7Delse%7B%0Aif%28elem%2Estyle%2EstyleFloat%29%7B%0Areturn%20elem%2Estyle%2EstyleFloat%3B%0A%7Delse%7B%0Areturn%20%22none%22%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Avar%20%5F425%3Delem%2Estyle%3Felem%2Estyle%5B%5F421%5D%3Anull%3B%0Aif%28%21%5F425%29%7B%0Aif%28d%2EdefaultView%26%26d%2EdefaultView%2EgetComputedStyle%29%7B%0Avar%20css%3Dd%2EdefaultView%2EgetComputedStyle%28elem%2Cnull%29%3B%0A%5F421%3D%5F421%2Ereplace%28%2F%28%5BA%2DZ%5D%29%2Fg%2C%22%2D%241%22%29%2EtoLowerCase%28%29%3B%0A%5F425%3Dcss%3Fcss%2EgetPropertyValue%28%5F421%29%3Anull%3B%0A%7Delse%7B%0Aif%28elem%2EcurrentStyle%29%7B%0A%5F425%3Delem%2EcurrentStyle%5B%5F421%5D%3B%0Aif%28%2F%5E%5Cd%2F%2Etest%28%5F425%29%26%26%21%2Fpx%24%2F%2Etest%28%5F425%29%26%26%5F421%21%3D%22fontWeight%22%29%7B%0Avar%20left%3Delem%2Estyle%2Eleft%3B%0Avar%20%5F428%3Delem%2EruntimeStyle%2Eleft%3B%0Aelem%2EruntimeStyle%2Eleft%3Delem%2EcurrentStyle%2Eleft%3B%0Aelem%2Estyle%2Eleft%3D%5F425%7C%7C0%3B%0A%5F425%3Delem%2Estyle%2EpixelLeft%2B%22px%22%3B%0Aelem%2Estyle%2Eleft%3Dleft%3B%0Aelem%2EruntimeStyle%2Eleft%3D%5F428%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Aif%28%5F421%3D%3D%22opacity%22%29%7B%0A%5F425%3DparseFloat%28%5F425%29%3B%0A%7D%0Aif%28%2FOpera%2F%2Etest%28navigator%2EuserAgent%29%26%26%28MochiKit%2EBase%2EfindValue%28%5B%22left%22%2C%22top%22%2C%22right%22%2C%22bottom%22%5D%2C%5F421%29%21%3D%2D1%29%29%7B%0Aif%28MochiKit%2EStyle%2EgetStyle%28elem%2C%22position%22%29%3D%3D%22static%22%29%7B%0A%5F425%3D%22auto%22%3B%0A%7D%0A%7D%0Areturn%20%5F425%3D%3D%22auto%22%3Fnull%3A%5F425%3B%0A%7D%2CsetStyle%3Afunction%28elem%2C%5F42a%29%7B%0Aelem%3DMochiKit%2EDOM%2EgetElement%28elem%29%3B%0Afor%28var%20name%20in%20%5F42a%29%7B%0Aswitch%28name%29%7B%0Acase%20%22opacity%22%3A%0AMochiKit%2EStyle%2EsetOpacity%28elem%2C%5F42a%5Bname%5D%29%3B%0Abreak%3B%0Acase%20%22float%22%3A%0Acase%20%22cssFloat%22%3A%0Acase%20%22styleFloat%22%3A%0Aif%28typeof%20%28elem%2Estyle%5B%22float%22%5D%29%21%3D%22undefined%22%29%7B%0Aelem%2Estyle%5B%22float%22%5D%3D%5F42a%5Bname%5D%3B%0A%7Delse%7B%0Aif%28typeof%20%28elem%2Estyle%2EcssFloat%29%21%3D%22undefined%22%29%7B%0Aelem%2Estyle%2EcssFloat%3D%5F42a%5Bname%5D%3B%0A%7Delse%7B%0Aelem%2Estyle%2EstyleFloat%3D%5F42a%5Bname%5D%3B%0A%7D%0A%7D%0Abreak%3B%0Adefault%3A%0Aelem%2Estyle%5BMochiKit%2EBase%2Ecamelize%28name%29%5D%3D%5F42a%5Bname%5D%3B%0A%7D%0A%7D%0A%7D%2CsetOpacity%3Afunction%28elem%2Co%29%7B%0Aelem%3DMochiKit%2EDOM%2EgetElement%28elem%29%3B%0Avar%20self%3DMochiKit%2EStyle%3B%0Aif%28o%3D%3D1%29%7B%0Avar%20%5F42f%3D%2FGecko%2F%2Etest%28navigator%2EuserAgent%29%26%26%21%28%2FKonqueror%7CAppleWebKit%7CKHTML%2F%2Etest%28navigator%2EuserAgent%29%29%3B%0Aelem%2Estyle%5B%22opacity%22%5D%3D%5F42f%3F0%2E999999%3A1%3B%0Aif%28%2FMSIE%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0Aelem%2Estyle%5B%22filter%22%5D%3Dself%2EgetStyle%28elem%2C%22filter%22%29%2Ereplace%28%2Falpha%5C%28%5B%5E%5C%29%5D%2A%5C%29%2Fgi%2C%22%22%29%3B%0A%7D%0A%7Delse%7B%0Aif%28o%3C0%2E00001%29%7B%0Ao%3D0%3B%0A%7D%0Aelem%2Estyle%5B%22opacity%22%5D%3Do%3B%0Aif%28%2FMSIE%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0Aelem%2Estyle%5B%22filter%22%5D%3Dself%2EgetStyle%28elem%2C%22filter%22%29%2Ereplace%28%2Falpha%5C%28%5B%5E%5C%29%5D%2A%5C%29%2Fgi%2C%22%22%29%2B%22alpha%28opacity%3D%22%2Bo%2A100%2B%22%29%22%3B%0A%7D%0A%7D%0A%7D%2CgetElementPosition%3Afunction%28elem%2C%5F431%29%7B%0Avar%20self%3DMochiKit%2EStyle%3B%0Avar%20dom%3DMochiKit%2EDOM%3B%0Aelem%3Ddom%2EgetElement%28elem%29%3B%0Aif%28%21elem%7C%7C%28%21%28elem%2Ex%26%26elem%2Ey%29%26%26%28%21elem%2EparentNode%3D%3D%3Dnull%7C%7Cself%2EgetStyle%28elem%2C%22display%22%29%3D%3D%22none%22%29%29%29%7B%0Areturn%20undefined%3B%0A%7D%0Avar%20c%3Dnew%20self%2ECoordinates%280%2C0%29%3B%0Avar%20box%3Dnull%3B%0Avar%20%5F436%3Dnull%3B%0Avar%20d%3DMochiKit%2EDOM%2E%5Fdocument%3B%0Avar%20de%3Dd%2EdocumentElement%3B%0Avar%20b%3Dd%2Ebody%3B%0Aif%28%21elem%2EparentNode%26%26elem%2Ex%26%26elem%2Ey%29%7B%0Ac%2Ex%2B%3Delem%2Ex%7C%7C0%3B%0Ac%2Ey%2B%3Delem%2Ey%7C%7C0%3B%0A%7Delse%7B%0Aif%28elem%2EgetBoundingClientRect%29%7B%0Abox%3Delem%2EgetBoundingClientRect%28%29%3B%0Ac%2Ex%2B%3Dbox%2Eleft%2B%28de%2EscrollLeft%7C%7Cb%2EscrollLeft%29%2D%28de%2EclientLeft%7C%7C0%29%3B%0Ac%2Ey%2B%3Dbox%2Etop%2B%28de%2EscrollTop%7C%7Cb%2EscrollTop%29%2D%28de%2EclientTop%7C%7C0%29%3B%0A%7Delse%7B%0Aif%28elem%2EoffsetParent%29%7B%0Ac%2Ex%2B%3Delem%2EoffsetLeft%3B%0Ac%2Ey%2B%3Delem%2EoffsetTop%3B%0A%5F436%3Delem%2EoffsetParent%3B%0Aif%28%5F436%21%3Delem%29%7B%0Awhile%28%5F436%29%7B%0Ac%2Ex%2B%3DparseInt%28%5F436%2Estyle%2EborderLeftWidth%29%7C%7C0%3B%0Ac%2Ey%2B%3DparseInt%28%5F436%2Estyle%2EborderTopWidth%29%7C%7C0%3B%0Ac%2Ex%2B%3D%5F436%2EoffsetLeft%3B%0Ac%2Ey%2B%3D%5F436%2EoffsetTop%3B%0A%5F436%3D%5F436%2EoffsetParent%3B%0A%7D%0A%7D%0Avar%20ua%3Dnavigator%2EuserAgent%2EtoLowerCase%28%29%3B%0Aif%28%28typeof%20%28opera%29%21%3D%22undefined%22%26%26parseFloat%28opera%2Eversion%28%29%29%3C9%29%7C%7C%28ua%2EindexOf%28%22AppleWebKit%22%29%21%3D%2D1%26%26self%2EgetStyle%28elem%2C%22position%22%29%3D%3D%22absolute%22%29%29%7B%0Ac%2Ex%2D%3Db%2EoffsetLeft%3B%0Ac%2Ey%2D%3Db%2EoffsetTop%3B%0A%7D%0Aif%28elem%2EparentNode%29%7B%0A%5F436%3Delem%2EparentNode%3B%0A%7Delse%7B%0A%5F436%3Dnull%3B%0A%7D%0Awhile%28%5F436%29%7B%0Avar%20%5F43b%3D%5F436%2EtagName%2EtoUpperCase%28%29%3B%0Aif%28%5F43b%3D%3D%3D%22BODY%22%7C%7C%5F43b%3D%3D%3D%22HTML%22%29%7B%0Abreak%3B%0A%7D%0Avar%20disp%3Dself%2EgetStyle%28%5F436%2C%22display%22%29%3B%0Aif%28disp%2Esearch%28%2F%5Einline%7Ctable%2Drow%2E%2A%24%2Fi%29%29%7B%0Ac%2Ex%2D%3D%5F436%2EscrollLeft%3B%0Ac%2Ey%2D%3D%5F436%2EscrollTop%3B%0A%7D%0Aif%28%5F436%2EparentNode%29%7B%0A%5F436%3D%5F436%2EparentNode%3B%0A%7Delse%7B%0A%5F436%3Dnull%3B%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%0Aif%28typeof%20%28%5F431%29%21%3D%22undefined%22%29%7B%0A%5F431%3Darguments%2Ecallee%28%5F431%29%3B%0Aif%28%5F431%29%7B%0Ac%2Ex%2D%3D%28%5F431%2Ex%7C%7C0%29%3B%0Ac%2Ey%2D%3D%28%5F431%2Ey%7C%7C0%29%3B%0A%7D%0A%7D%0Areturn%20c%3B%0A%7D%2CsetElementPosition%3Afunction%28elem%2C%5F43e%2C%5F43f%29%7B%0Aelem%3DMochiKit%2EDOM%2EgetElement%28elem%29%3B%0Aif%28typeof%20%28%5F43f%29%3D%3D%22undefined%22%29%7B%0A%5F43f%3D%22px%22%3B%0A%7D%0Avar%20%5F440%3D%7B%7D%3B%0Avar%20%5F441%3DMochiKit%2EBase%2EisUndefinedOrNull%3B%0Aif%28%21%5F441%28%5F43e%2Ex%29%29%7B%0A%5F440%5B%22left%22%5D%3D%5F43e%2Ex%2B%5F43f%3B%0A%7D%0Aif%28%21%5F441%28%5F43e%2Ey%29%29%7B%0A%5F440%5B%22top%22%5D%3D%5F43e%2Ey%2B%5F43f%3B%0A%7D%0AMochiKit%2EDOM%2EupdateNodeAttributes%28elem%2C%7B%22style%22%3A%5F440%7D%29%3B%0A%7D%2CmakePositioned%3Afunction%28%5F442%29%7B%0A%5F442%3DMochiKit%2EDOM%2EgetElement%28%5F442%29%3B%0Avar%20pos%3DMochiKit%2EStyle%2EgetStyle%28%5F442%2C%22position%22%29%3B%0Aif%28pos%3D%3D%22static%22%7C%7C%21pos%29%7B%0A%5F442%2Estyle%2Eposition%3D%22relative%22%3B%0Aif%28%2FOpera%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0A%5F442%2Estyle%2Etop%3D0%3B%0A%5F442%2Estyle%2Eleft%3D0%3B%0A%7D%0A%7D%0A%7D%2CundoPositioned%3Afunction%28%5F444%29%7B%0A%5F444%3DMochiKit%2EDOM%2EgetElement%28%5F444%29%3B%0Aif%28%5F444%2Estyle%2Eposition%3D%3D%22relative%22%29%7B%0A%5F444%2Estyle%2Eposition%3D%5F444%2Estyle%2Etop%3D%5F444%2Estyle%2Eleft%3D%5F444%2Estyle%2Ebottom%3D%5F444%2Estyle%2Eright%3D%22%22%3B%0A%7D%0A%7D%2CmakeClipping%3Afunction%28%5F445%29%7B%0A%5F445%3DMochiKit%2EDOM%2EgetElement%28%5F445%29%3B%0Avar%20s%3D%5F445%2Estyle%3B%0Avar%20%5F447%3D%7B%22overflow%22%3As%2Eoverflow%2C%22overflow%2Dx%22%3As%2EoverflowX%2C%22overflow%2Dy%22%3As%2EoverflowY%7D%3B%0Aif%28%28MochiKit%2EStyle%2EgetStyle%28%5F445%2C%22overflow%22%29%7C%7C%22visible%22%29%21%3D%22hidden%22%29%7B%0A%5F445%2Estyle%2Eoverflow%3D%22hidden%22%3B%0A%5F445%2Estyle%2EoverflowX%3D%22hidden%22%3B%0A%5F445%2Estyle%2EoverflowY%3D%22hidden%22%3B%0A%7D%0Areturn%20%5F447%3B%0A%7D%2CundoClipping%3Afunction%28%5F448%2C%5F449%29%7B%0A%5F448%3DMochiKit%2EDOM%2EgetElement%28%5F448%29%3B%0Aif%28typeof%20%28%5F449%29%3D%3D%22string%22%29%7B%0A%5F448%2Estyle%2Eoverflow%3D%5F449%3B%0A%7Delse%7B%0Aif%28%5F449%21%3Dnull%29%7B%0A%5F448%2Estyle%2Eoverflow%3D%5F449%5B%22overflow%22%5D%3B%0A%5F448%2Estyle%2EoverflowX%3D%5F449%5B%22overflow%2Dx%22%5D%3B%0A%5F448%2Estyle%2EoverflowY%3D%5F449%5B%22overflow%2Dy%22%5D%3B%0A%7D%0A%7D%0A%7D%2CgetElementDimensions%3Afunction%28elem%2C%5F44b%29%7B%0Avar%20self%3DMochiKit%2EStyle%3B%0Avar%20dom%3DMochiKit%2EDOM%3B%0Aif%28typeof%20%28elem%2Ew%29%3D%3D%22number%22%7C%7Ctypeof%20%28elem%2Eh%29%3D%3D%22number%22%29%7B%0Areturn%20new%20self%2EDimensions%28elem%2Ew%7C%7C0%2Celem%2Eh%7C%7C0%29%3B%0A%7D%0Aelem%3Ddom%2EgetElement%28elem%29%3B%0Aif%28%21elem%29%7B%0Areturn%20undefined%3B%0A%7D%0Avar%20disp%3Dself%2EgetStyle%28elem%2C%22display%22%29%3B%0Aif%28disp%3D%3D%22none%22%7C%7Cdisp%3D%3D%22%22%7C%7Ctypeof%20%28disp%29%3D%3D%22undefined%22%29%7B%0Avar%20s%3Delem%2Estyle%3B%0Avar%20%5F450%3Ds%2Evisibility%3B%0Avar%20%5F451%3Ds%2Eposition%3B%0Avar%20%5F452%3Ds%2Edisplay%3B%0As%2Evisibility%3D%22hidden%22%3B%0As%2Eposition%3D%22absolute%22%3B%0As%2Edisplay%3Dself%2E%5FgetDefaultDisplay%28elem%29%3B%0Avar%20%5F453%3Delem%2EoffsetWidth%3B%0Avar%20%5F454%3Delem%2EoffsetHeight%3B%0As%2Edisplay%3D%5F452%3B%0As%2Eposition%3D%5F451%3B%0As%2Evisibility%3D%5F450%3B%0A%7Delse%7B%0A%5F453%3Delem%2EoffsetWidth%7C%7C0%3B%0A%5F454%3Delem%2EoffsetHeight%7C%7C0%3B%0A%7D%0Aif%28%5F44b%29%7B%0Avar%20%5F455%3D%22colSpan%22%20in%20elem%26%26%22rowSpan%22%20in%20elem%3B%0Avar%20%5F456%3D%28%5F455%26%26elem%2EparentNode%26%26self%2EgetStyle%28elem%2EparentNode%2C%22borderCollapse%22%29%3D%3D%22collapse%22%29%3B%0Aif%28%5F456%29%7B%0Aif%28%2FMSIE%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0Avar%20%5F457%3Delem%2EpreviousSibling%3F0%2E5%3A1%3B%0Avar%20%5F458%3Delem%2EnextSibling%3F0%2E5%3A1%3B%0A%7Delse%7B%0Avar%20%5F457%3D0%2E5%3B%0Avar%20%5F458%3D0%2E5%3B%0A%7D%0A%7Delse%7B%0Avar%20%5F457%3D1%3B%0Avar%20%5F458%3D1%3B%0A%7D%0A%5F453%2D%3DMath%2Eround%28%28parseFloat%28self%2EgetStyle%28elem%2C%22paddingLeft%22%29%29%7C%7C0%29%2B%28parseFloat%28self%2EgetStyle%28elem%2C%22paddingRight%22%29%29%7C%7C0%29%2B%5F457%2A%28parseFloat%28self%2EgetStyle%28elem%2C%22borderLeftWidth%22%29%29%7C%7C0%29%2B%5F458%2A%28parseFloat%28self%2EgetStyle%28elem%2C%22borderRightWidth%22%29%29%7C%7C0%29%29%3B%0Aif%28%5F455%29%7B%0Aif%28%2FGecko%7COpera%2F%2Etest%28navigator%2EuserAgent%29%26%26%21%2FKonqueror%7CAppleWebKit%7CKHTML%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0Avar%20%5F459%3D0%3B%0A%7Delse%7B%0Aif%28%2FMSIE%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0Avar%20%5F459%3D1%3B%0A%7Delse%7B%0Avar%20%5F459%3D%5F456%3F0%2E5%3A1%3B%0A%7D%0A%7D%0A%7Delse%7B%0Avar%20%5F459%3D1%3B%0A%7D%0A%5F454%2D%3DMath%2Eround%28%28parseFloat%28self%2EgetStyle%28elem%2C%22paddingTop%22%29%29%7C%7C0%29%2B%28parseFloat%28self%2EgetStyle%28elem%2C%22paddingBottom%22%29%29%7C%7C0%29%2B%5F459%2A%28%28parseFloat%28self%2EgetStyle%28elem%2C%22borderTopWidth%22%29%29%7C%7C0%29%2B%28parseFloat%28self%2EgetStyle%28elem%2C%22borderBottomWidth%22%29%29%7C%7C0%29%29%29%3B%0A%7D%0Areturn%20new%20self%2EDimensions%28%5F453%2C%5F454%29%3B%0A%7D%2CsetElementDimensions%3Afunction%28elem%2C%5F45b%2C%5F45c%29%7B%0Aelem%3DMochiKit%2EDOM%2EgetElement%28elem%29%3B%0Aif%28typeof%20%28%5F45c%29%3D%3D%22undefined%22%29%7B%0A%5F45c%3D%22px%22%3B%0A%7D%0Avar%20%5F45d%3D%7B%7D%3B%0Avar%20%5F45e%3DMochiKit%2EBase%2EisUndefinedOrNull%3B%0Aif%28%21%5F45e%28%5F45b%2Ew%29%29%7B%0A%5F45d%5B%22width%22%5D%3D%5F45b%2Ew%2B%5F45c%3B%0A%7D%0Aif%28%21%5F45e%28%5F45b%2Eh%29%29%7B%0A%5F45d%5B%22height%22%5D%3D%5F45b%2Eh%2B%5F45c%3B%0A%7D%0AMochiKit%2EDOM%2EupdateNodeAttributes%28elem%2C%7B%22style%22%3A%5F45d%7D%29%3B%0A%7D%2C%5FgetDefaultDisplay%3Afunction%28elem%29%7B%0Avar%20self%3DMochiKit%2EStyle%3B%0Avar%20dom%3DMochiKit%2EDOM%3B%0Aelem%3Ddom%2EgetElement%28elem%29%3B%0Aif%28%21elem%29%7B%0Areturn%20undefined%3B%0A%7D%0Avar%20%5F462%3Delem%2EtagName%2EtoUpperCase%28%29%3B%0Areturn%20self%2E%5FdefaultDisplay%5B%5F462%5D%7C%7C%22block%22%3B%0A%7D%2CsetDisplayForElement%3Afunction%28%5F463%2C%5F464%29%7B%0Avar%20%5F465%3DMochiKit%2EBase%2Eextend%28null%2Carguments%2C1%29%3B%0Avar%20%5F466%3DMochiKit%2EDOM%2EgetElement%3B%0Afor%28var%20i%3D0%3Bi%3C%5F465%2Elength%3Bi%2B%2B%29%7B%0A%5F464%3D%5F466%28%5F465%5Bi%5D%29%3B%0Aif%28%5F464%29%7B%0A%5F464%2Estyle%2Edisplay%3D%5F463%3B%0A%7D%0A%7D%0A%7D%2CgetViewportDimensions%3Afunction%28%29%7B%0Avar%20d%3Dnew%20MochiKit%2EStyle%2EDimensions%28%29%3B%0Avar%20w%3DMochiKit%2EDOM%2E%5Fwindow%3B%0Avar%20b%3DMochiKit%2EDOM%2E%5Fdocument%2Ebody%3B%0Aif%28w%2EinnerWidth%29%7B%0Ad%2Ew%3Dw%2EinnerWidth%3B%0Ad%2Eh%3Dw%2EinnerHeight%3B%0A%7Delse%7B%0Aif%28b%26%26b%2EparentElement%26%26b%2EparentElement%2EclientWidth%29%7B%0Ad%2Ew%3Db%2EparentElement%2EclientWidth%3B%0Ad%2Eh%3Db%2EparentElement%2EclientHeight%3B%0A%7Delse%7B%0Aif%28b%26%26b%2EclientWidth%29%7B%0Ad%2Ew%3Db%2EclientWidth%3B%0Ad%2Eh%3Db%2EclientHeight%3B%0A%7D%0A%7D%0A%7D%0Areturn%20d%3B%0A%7D%2CgetViewportPosition%3Afunction%28%29%7B%0Avar%20c%3Dnew%20MochiKit%2EStyle%2ECoordinates%280%2C0%29%3B%0Avar%20d%3DMochiKit%2EDOM%2E%5Fdocument%3B%0Avar%20de%3Dd%2EdocumentElement%3B%0Avar%20db%3Dd%2Ebody%3B%0Aif%28de%26%26%28de%2EscrollTop%7C%7Cde%2EscrollLeft%29%29%7B%0Ac%2Ex%3Dde%2EscrollLeft%3B%0Ac%2Ey%3Dde%2EscrollTop%3B%0A%7Delse%7B%0Aif%28db%29%7B%0Ac%2Ex%3Ddb%2EscrollLeft%3B%0Ac%2Ey%3Ddb%2EscrollTop%3B%0A%7D%0A%7D%0Areturn%20c%3B%0A%7D%2C%5F%5Fnew%5F%5F%3Afunction%28%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20%5F470%3D%5B%22A%22%2C%22ABBR%22%2C%22ACRONYM%22%2C%22B%22%2C%22BASEFONT%22%2C%22BDO%22%2C%22BIG%22%2C%22BR%22%2C%22CITE%22%2C%22CODE%22%2C%22DFN%22%2C%22EM%22%2C%22FONT%22%2C%22I%22%2C%22IMG%22%2C%22KBD%22%2C%22LABEL%22%2C%22Q%22%2C%22S%22%2C%22SAMP%22%2C%22SMALL%22%2C%22SPAN%22%2C%22STRIKE%22%2C%22STRONG%22%2C%22SUB%22%2C%22SUP%22%2C%22TEXTAREA%22%2C%22TT%22%2C%22U%22%2C%22VAR%22%5D%3B%0Athis%2E%5FdefaultDisplay%3D%7B%22TABLE%22%3A%22table%22%2C%22THEAD%22%3A%22table%2Dheader%2Dgroup%22%2C%22TBODY%22%3A%22table%2Drow%2Dgroup%22%2C%22TFOOT%22%3A%22table%2Dfooter%2Dgroup%22%2C%22COLGROUP%22%3A%22table%2Dcolumn%2Dgroup%22%2C%22COL%22%3A%22table%2Dcolumn%22%2C%22TR%22%3A%22table%2Drow%22%2C%22TD%22%3A%22table%2Dcell%22%2C%22TH%22%3A%22table%2Dcell%22%2C%22CAPTION%22%3A%22table%2Dcaption%22%2C%22LI%22%3A%22list%2Ditem%22%2C%22INPUT%22%3A%22inline%2Dblock%22%2C%22SELECT%22%3A%22inline%2Dblock%22%7D%3B%0Aif%28%2FMSIE%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0Afor%28var%20k%20in%20this%2E%5FdefaultDisplay%29%7B%0Avar%20v%3Dthis%2E%5FdefaultDisplay%5Bk%5D%3B%0Aif%28v%2EindexOf%28%22table%22%29%3D%3D0%29%7B%0Athis%2E%5FdefaultDisplay%5Bk%5D%3D%22block%22%3B%0A%7D%0A%7D%0A%7D%0Afor%28var%20i%3D0%3Bi%3C%5F470%2Elength%3Bi%2B%2B%29%7B%0Athis%2E%5FdefaultDisplay%5B%5F470%5Bi%5D%5D%3D%22inline%22%3B%0A%7D%0Athis%2EelementPosition%3Dthis%2EgetElementPosition%3B%0Athis%2EelementDimensions%3Dthis%2EgetElementDimensions%3B%0Athis%2EhideElement%3Dm%2Epartial%28this%2EsetDisplayForElement%2C%22none%22%29%3B%0Athis%2EshowElement%3Dm%2Epartial%28this%2EsetDisplayForElement%2C%22block%22%29%3B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3Am%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0Am%2EnameFunctions%28this%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EStyle%2E%5F%5Fnew%5F%5F%28%29%3B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2EStyle%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22LoggingPane%22%2C%5B%22Base%22%2C%22Logging%22%5D%29%3B%0AMochiKit%2ELoggingPane%2ENAME%3D%22MochiKit%2ELoggingPane%22%3B%0AMochiKit%2ELoggingPane%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2ELoggingPane%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2ELoggingPane%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2ELoggingPane%2EcreateLoggingPane%3Dfunction%28%5F474%29%7B%0Avar%20m%3DMochiKit%2ELoggingPane%3B%0A%5F474%3D%21%28%21%5F474%29%3B%0Aif%28m%2E%5FloggingPane%26%26m%2E%5FloggingPane%2Einline%21%3D%5F474%29%7B%0Am%2E%5FloggingPane%2EclosePane%28%29%3B%0Am%2E%5FloggingPane%3Dnull%3B%0A%7D%0Aif%28%21m%2E%5FloggingPane%7C%7Cm%2E%5FloggingPane%2Eclosed%29%7B%0Am%2E%5FloggingPane%3Dnew%20m%2ELoggingPane%28%5F474%2CMochiKit%2ELogging%2Elogger%29%3B%0A%7D%0Areturn%20m%2E%5FloggingPane%3B%0A%7D%3B%0AMochiKit%2ELoggingPane%2ELoggingPane%3Dfunction%28%5F476%2C%5F477%29%7B%0Aif%28typeof%20%28%5F477%29%3D%3D%22undefined%22%7C%7C%5F477%3D%3D%3Dnull%29%7B%0A%5F477%3DMochiKit%2ELogging%2Elogger%3B%0A%7D%0Athis%2Elogger%3D%5F477%3B%0Avar%20%5F478%3DMochiKit%2EBase%2Eupdate%3B%0Avar%20%5F479%3DMochiKit%2EBase%2Eupdatetree%3B%0Avar%20bind%3DMochiKit%2EBase%2Ebind%3B%0Avar%20%5F47b%3DMochiKit%2EBase%2Eclone%3B%0Avar%20win%3Dwindow%3B%0Avar%20uid%3D%22%5FMochiKit%5FLoggingPane%22%3B%0Aif%28typeof%20%28MochiKit%2EDOM%29%21%3D%22undefined%22%29%7B%0Awin%3DMochiKit%2EDOM%2EcurrentWindow%28%29%3B%0A%7D%0Aif%28%21%5F476%29%7B%0Avar%20url%3Dwin%2Elocation%2Ehref%2Esplit%28%22%3F%22%29%5B0%5D%2Ereplace%28%2F%5B%23%3A%5C%2F%2E%3E%3C%26%25%2D%5D%2Fg%2C%22%5F%22%29%3B%0Avar%20name%3Duid%2B%22%5F%22%2Burl%3B%0Avar%20nwin%3Dwin%2Eopen%28%22%22%2Cname%2C%22dependent%2Cresizable%2Cheight%3D200%22%29%3B%0Aif%28%21nwin%29%7B%0Aalert%28%22Not%20able%20to%20open%20debugging%20window%20due%20to%20pop%2Dup%20blocking%2E%22%29%3B%0Areturn%20undefined%3B%0A%7D%0Anwin%2Edocument%2Ewrite%28%22%3C%21DOCTYPE%20HTML%20PUBLIC%20%5C%22%2D%2F%2FW3C%2F%2FDTD%20HTML%204%2E0%20Transitional%2F%2FEN%5C%22%20%22%2B%22%5C%22http%3A%2F%2Fwww%2Ew3%2Eorg%2FTR%2Fhtml4%2Floose%2Edtd%5C%22%3E%22%2B%22%3Chtml%3E%3Chead%3E%3Ctitle%3E%5BMochiKit%2ELoggingPane%5D%3C%2Ftitle%3E%3C%2Fhead%3E%22%2B%22%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E%22%29%3B%0Anwin%2Edocument%2Eclose%28%29%3B%0Anwin%2Edocument%2Etitle%2B%3D%22%20%22%2Bwin%2Edocument%2Etitle%3B%0Awin%3Dnwin%3B%0A%7D%0Avar%20doc%3Dwin%2Edocument%3B%0Athis%2Edoc%3Ddoc%3B%0Avar%20%5F482%3Ddoc%2EgetElementById%28uid%29%3B%0Avar%20%5F483%3D%21%21%5F482%3B%0Aif%28%5F482%26%26typeof%20%28%5F482%2EloggingPane%29%21%3D%22undefined%22%29%7B%0A%5F482%2EloggingPane%2Elogger%3Dthis%2Elogger%3B%0A%5F482%2EloggingPane%2EbuildAndApplyFilter%28%29%3B%0Areturn%20%5F482%2EloggingPane%3B%0A%7D%0Aif%28%5F483%29%7B%0Avar%20%5F484%3B%0Awhile%28%28%5F484%3D%5F482%2EfirstChild%29%29%7B%0A%5F482%2EremoveChild%28%5F484%29%3B%0A%7D%0A%7Delse%7B%0A%5F482%3Ddoc%2EcreateElement%28%22div%22%29%3B%0A%5F482%2Eid%3Duid%3B%0A%7D%0A%5F482%2EloggingPane%3Dthis%3B%0Avar%20%5F485%3Ddoc%2EcreateElement%28%22input%22%29%3B%0Avar%20%5F486%3Ddoc%2EcreateElement%28%22input%22%29%3B%0Avar%20%5F487%3Ddoc%2EcreateElement%28%22button%22%29%3B%0Avar%20%5F488%3Ddoc%2EcreateElement%28%22button%22%29%3B%0Avar%20%5F489%3Ddoc%2EcreateElement%28%22button%22%29%3B%0Avar%20%5F48a%3Ddoc%2EcreateElement%28%22button%22%29%3B%0Avar%20%5F48b%3Ddoc%2EcreateElement%28%22div%22%29%3B%0Avar%20%5F48c%3Ddoc%2EcreateElement%28%22div%22%29%3B%0Avar%20%5F48d%3Duid%2B%22%5FListener%22%3B%0Athis%2EcolorTable%3D%5F47b%28this%2EcolorTable%29%3B%0Avar%20%5F48e%3D%5B%5D%3B%0Avar%20%5F48f%3Dnull%3B%0Avar%20%5F490%3Dfunction%28msg%29%7B%0Avar%20%5F492%3Dmsg%2Elevel%3B%0Aif%28typeof%20%28%5F492%29%3D%3D%22number%22%29%7B%0A%5F492%3DMochiKit%2ELogging%2ELogLevel%5B%5F492%5D%3B%0A%7D%0Areturn%20%5F492%3B%0A%7D%3B%0Avar%20%5F493%3Dfunction%28msg%29%7B%0Areturn%20msg%2Einfo%2Ejoin%28%22%20%22%29%3B%0A%7D%3B%0Avar%20%5F495%3Dbind%28function%28msg%29%7B%0Avar%20%5F497%3D%5F490%28msg%29%3B%0Avar%20text%3D%5F493%28msg%29%3B%0Avar%20c%3Dthis%2EcolorTable%5B%5F497%5D%3B%0Avar%20p%3Ddoc%2EcreateElement%28%22span%22%29%3B%0Ap%2EclassName%3D%22MochiKit%2DLogMessage%20MochiKit%2DLogLevel%2D%22%2B%5F497%3B%0Ap%2Estyle%2EcssText%3D%22margin%3A%200px%3B%20white%2Dspace%3A%20%2Dmoz%2Dpre%2Dwrap%3B%20white%2Dspace%3A%20%2Do%2Dpre%2Dwrap%3B%20white%2Dspace%3A%20pre%2Dwrap%3B%20white%2Dspace%3A%20pre%2Dline%3B%20word%2Dwrap%3A%20break%2Dword%3B%20wrap%2Doption%3A%20emergency%3B%20color%3A%20%22%2Bc%3B%0Ap%2EappendChild%28doc%2EcreateTextNode%28%5F497%2B%22%3A%20%22%2Btext%29%29%3B%0A%5F48c%2EappendChild%28p%29%3B%0A%5F48c%2EappendChild%28doc%2EcreateElement%28%22br%22%29%29%3B%0Aif%28%5F48b%2EoffsetHeight%3E%5F48b%2EscrollHeight%29%7B%0A%5F48b%2EscrollTop%3D0%3B%0A%7Delse%7B%0A%5F48b%2EscrollTop%3D%5F48b%2EscrollHeight%3B%0A%7D%0A%7D%2Cthis%29%3B%0Avar%20%5F49b%3Dfunction%28msg%29%7B%0A%5F48e%5B%5F48e%2Elength%5D%3Dmsg%3B%0A%5F495%28msg%29%3B%0A%7D%3B%0Avar%20%5F49d%3Dfunction%28%29%7B%0Avar%20%5F49e%2C%5F49f%3B%0Atry%7B%0A%5F49e%3Dnew%20RegExp%28%5F485%2Evalue%29%3B%0A%5F49f%3Dnew%20RegExp%28%5F486%2Evalue%29%3B%0A%7D%0Acatch%28e%29%7B%0AlogDebug%28%22Error%20in%20filter%20regex%3A%20%22%2Be%2Emessage%29%3B%0Areturn%20null%3B%0A%7D%0Areturn%20function%28msg%29%7B%0Areturn%20%28%5F49e%2Etest%28%5F490%28msg%29%29%26%26%5F49f%2Etest%28%5F493%28msg%29%29%29%3B%0A%7D%3B%0A%7D%3B%0Avar%20%5F4a1%3Dfunction%28%29%7B%0Awhile%28%5F48c%2EfirstChild%29%7B%0A%5F48c%2EremoveChild%28%5F48c%2EfirstChild%29%3B%0A%7D%0A%7D%3B%0Avar%20%5F4a2%3Dfunction%28%29%7B%0A%5F48e%3D%5B%5D%3B%0A%5F4a1%28%29%3B%0A%7D%3B%0Avar%20%5F4a3%3Dbind%28function%28%29%7B%0Aif%28this%2Eclosed%29%7B%0Areturn%3B%0A%7D%0Athis%2Eclosed%3Dtrue%3B%0Aif%28MochiKit%2ELoggingPane%2E%5FloggingPane%3D%3Dthis%29%7B%0AMochiKit%2ELoggingPane%2E%5FloggingPane%3Dnull%3B%0A%7D%0Athis%2Elogger%2EremoveListener%28%5F48d%29%3B%0Atry%7B%0Atry%7B%0A%5F482%2EloggingPane%3Dnull%3B%0A%7D%0Acatch%28e%29%7B%0AlogFatal%28%22Bookmarklet%20was%20closed%20incorrectly%2E%22%29%3B%0A%7D%0Aif%28%5F476%29%7B%0A%5F482%2EparentNode%2EremoveChild%28%5F482%29%3B%0A%7Delse%7B%0Athis%2Ewin%2Eclose%28%29%3B%0A%7D%0A%7D%0Acatch%28e%29%7B%0A%7D%0A%7D%2Cthis%29%3B%0Avar%20%5F4a4%3Dfunction%28%29%7B%0A%5F4a1%28%29%3B%0Afor%28var%20i%3D0%3Bi%3C%5F48e%2Elength%3Bi%2B%2B%29%7B%0Avar%20msg%3D%5F48e%5Bi%5D%3B%0Aif%28%5F48f%3D%3D%3Dnull%7C%7C%5F48f%28msg%29%29%7B%0A%5F495%28msg%29%3B%0A%7D%0A%7D%0A%7D%3B%0Athis%2EbuildAndApplyFilter%3Dfunction%28%29%7B%0A%5F48f%3D%5F49d%28%29%3B%0A%5F4a4%28%29%3B%0Athis%2Elogger%2EremoveListener%28%5F48d%29%3B%0Athis%2Elogger%2EaddListener%28%5F48d%2C%5F48f%2C%5F49b%29%3B%0A%7D%3B%0Avar%20%5F4a7%3Dbind%28function%28%29%7B%0A%5F48e%3Dthis%2Elogger%2EgetMessages%28%29%3B%0A%5F4a4%28%29%3B%0A%7D%2Cthis%29%3B%0Avar%20%5F4a8%3Dbind%28function%28%5F4a9%29%7B%0A%5F4a9%3D%5F4a9%7C%7Cwindow%2Eevent%3B%0Akey%3D%5F4a9%2Ewhich%7C%7C%5F4a9%2EkeyCode%3B%0Aif%28key%3D%3D13%29%7B%0Athis%2EbuildAndApplyFilter%28%29%3B%0A%7D%0A%7D%2Cthis%29%3B%0Avar%20%5F4aa%3D%22display%3A%20block%3B%20z%2Dindex%3A%201000%3B%20left%3A%200px%3B%20bottom%3A%200px%3B%20position%3A%20fixed%3B%20width%3A%20100%25%3B%20background%2Dcolor%3A%20white%3B%20font%3A%20%22%2Bthis%2ElogFont%3B%0Aif%28%5F476%29%7B%0A%5F4aa%2B%3D%22%3B%20height%3A%2010em%3B%20border%2Dtop%3A%202px%20solid%20black%22%3B%0A%7Delse%7B%0A%5F4aa%2B%3D%22%3B%20height%3A%20100%25%3B%22%3B%0A%7D%0A%5F482%2Estyle%2EcssText%3D%5F4aa%3B%0Aif%28%21%5F483%29%7B%0Adoc%2Ebody%2EappendChild%28%5F482%29%3B%0A%7D%0A%5F4aa%3D%7B%22cssText%22%3A%22width%3A%2033%25%3B%20display%3A%20inline%3B%20font%3A%20%22%2Bthis%2ElogFont%7D%3B%0A%5F479%28%5F485%2C%7B%22value%22%3A%22FATAL%7CERROR%7CWARNING%7CINFO%7CDEBUG%22%2C%22onkeypress%22%3A%5F4a8%2C%22style%22%3A%5F4aa%7D%29%3B%0A%5F482%2EappendChild%28%5F485%29%3B%0A%5F479%28%5F486%2C%7B%22value%22%3A%22%2E%2A%22%2C%22onkeypress%22%3A%5F4a8%2C%22style%22%3A%5F4aa%7D%29%3B%0A%5F482%2EappendChild%28%5F486%29%3B%0A%5F4aa%3D%22width%3A%208%25%3B%20display%3Ainline%3B%20font%3A%20%22%2Bthis%2ElogFont%3B%0A%5F487%2EappendChild%28doc%2EcreateTextNode%28%22Filter%22%29%29%3B%0A%5F487%2Eonclick%3Dbind%28%22buildAndApplyFilter%22%2Cthis%29%3B%0A%5F487%2Estyle%2EcssText%3D%5F4aa%3B%0A%5F482%2EappendChild%28%5F487%29%3B%0A%5F488%2EappendChild%28doc%2EcreateTextNode%28%22Load%22%29%29%3B%0A%5F488%2Eonclick%3D%5F4a7%3B%0A%5F488%2Estyle%2EcssText%3D%5F4aa%3B%0A%5F482%2EappendChild%28%5F488%29%3B%0A%5F489%2EappendChild%28doc%2EcreateTextNode%28%22Clear%22%29%29%3B%0A%5F489%2Eonclick%3D%5F4a2%3B%0A%5F489%2Estyle%2EcssText%3D%5F4aa%3B%0A%5F482%2EappendChild%28%5F489%29%3B%0A%5F48a%2EappendChild%28doc%2EcreateTextNode%28%22Close%22%29%29%3B%0A%5F48a%2Eonclick%3D%5F4a3%3B%0A%5F48a%2Estyle%2EcssText%3D%5F4aa%3B%0A%5F482%2EappendChild%28%5F48a%29%3B%0A%5F48b%2Estyle%2EcssText%3D%22overflow%3A%20auto%3B%20width%3A%20100%25%22%3B%0A%5F48c%2Estyle%2EcssText%3D%22width%3A%20100%25%3B%20height%3A%20%22%2B%28%5F476%3F%228em%22%3A%22100%25%22%29%3B%0A%5F48b%2EappendChild%28%5F48c%29%3B%0A%5F482%2EappendChild%28%5F48b%29%3B%0Athis%2EbuildAndApplyFilter%28%29%3B%0A%5F4a7%28%29%3B%0Aif%28%5F476%29%7B%0Athis%2Ewin%3Dundefined%3B%0A%7Delse%7B%0Athis%2Ewin%3Dwin%3B%0A%7D%0Athis%2Einline%3D%5F476%3B%0Athis%2EclosePane%3D%5F4a3%3B%0Athis%2Eclosed%3Dfalse%3B%0Areturn%20this%3B%0A%7D%3B%0AMochiKit%2ELoggingPane%2ELoggingPane%2Eprototype%3D%7B%22logFont%22%3A%228pt%20Verdana%2Csans%2Dserif%22%2C%22colorTable%22%3A%7B%22ERROR%22%3A%22red%22%2C%22FATAL%22%3A%22darkred%22%2C%22WARNING%22%3A%22blue%22%2C%22INFO%22%3A%22black%22%2C%22DEBUG%22%3A%22green%22%7D%7D%3B%0AMochiKit%2ELoggingPane%2EEXPORT%5FOK%3D%5B%22LoggingPane%22%5D%3B%0AMochiKit%2ELoggingPane%2EEXPORT%3D%5B%22createLoggingPane%22%5D%3B%0AMochiKit%2ELoggingPane%2E%5F%5Fnew%5F%5F%3Dfunction%28%29%7B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3AMochiKit%2EBase%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0AMochiKit%2EBase%2EnameFunctions%28this%29%3B%0AMochiKit%2ELoggingPane%2E%5FloggingPane%3Dnull%3B%0A%7D%3B%0AMochiKit%2ELoggingPane%2E%5F%5Fnew%5F%5F%28%29%3B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2ELoggingPane%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22Color%22%2C%5B%22Base%22%2C%22DOM%22%2C%22Style%22%5D%29%3B%0AMochiKit%2EColor%2ENAME%3D%22MochiKit%2EColor%22%3B%0AMochiKit%2EColor%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EColor%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2EColor%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EColor%2EColor%3Dfunction%28red%2C%5F4ac%2Cblue%2C%5F4ae%29%7B%0Aif%28typeof%20%28%5F4ae%29%3D%3D%22undefined%22%7C%7C%5F4ae%3D%3D%3Dnull%29%7B%0A%5F4ae%3D1%3B%0A%7D%0Athis%2Ergb%3D%7Br%3Ared%2Cg%3A%5F4ac%2Cb%3Ablue%2Ca%3A%5F4ae%7D%3B%0A%7D%3B%0AMochiKit%2EColor%2EColor%2Eprototype%3D%7B%5F%5Fclass%5F%5F%3AMochiKit%2EColor%2EColor%2CcolorWithAlpha%3Afunction%28%5F4af%29%7B%0Avar%20rgb%3Dthis%2Ergb%3B%0Avar%20m%3DMochiKit%2EColor%3B%0Areturn%20m%2EColor%2EfromRGB%28rgb%2Er%2Crgb%2Eg%2Crgb%2Eb%2C%5F4af%29%3B%0A%7D%2CcolorWithHue%3Afunction%28hue%29%7B%0Avar%20hsl%3Dthis%2EasHSL%28%29%3B%0Ahsl%2Eh%3Dhue%3B%0Avar%20m%3DMochiKit%2EColor%3B%0Areturn%20m%2EColor%2EfromHSL%28hsl%29%3B%0A%7D%2CcolorWithSaturation%3Afunction%28%5F4b5%29%7B%0Avar%20hsl%3Dthis%2EasHSL%28%29%3B%0Ahsl%2Es%3D%5F4b5%3B%0Avar%20m%3DMochiKit%2EColor%3B%0Areturn%20m%2EColor%2EfromHSL%28hsl%29%3B%0A%7D%2CcolorWithLightness%3Afunction%28%5F4b8%29%7B%0Avar%20hsl%3Dthis%2EasHSL%28%29%3B%0Ahsl%2El%3D%5F4b8%3B%0Avar%20m%3DMochiKit%2EColor%3B%0Areturn%20m%2EColor%2EfromHSL%28hsl%29%3B%0A%7D%2CdarkerColorWithLevel%3Afunction%28%5F4bb%29%7B%0Avar%20hsl%3Dthis%2EasHSL%28%29%3B%0Ahsl%2El%3DMath%2Emax%28hsl%2El%2D%5F4bb%2C0%29%3B%0Avar%20m%3DMochiKit%2EColor%3B%0Areturn%20m%2EColor%2EfromHSL%28hsl%29%3B%0A%7D%2ClighterColorWithLevel%3Afunction%28%5F4be%29%7B%0Avar%20hsl%3Dthis%2EasHSL%28%29%3B%0Ahsl%2El%3DMath%2Emin%28hsl%2El%2B%5F4be%2C1%29%3B%0Avar%20m%3DMochiKit%2EColor%3B%0Areturn%20m%2EColor%2EfromHSL%28hsl%29%3B%0A%7D%2CblendedColor%3Afunction%28%5F4c1%2C%5F4c2%29%7B%0Aif%28typeof%20%28%5F4c2%29%3D%3D%22undefined%22%7C%7C%5F4c2%3D%3D%3Dnull%29%7B%0A%5F4c2%3D0%2E5%3B%0A%7D%0Avar%20sf%3D1%2D%5F4c2%3B%0Avar%20s%3Dthis%2Ergb%3B%0Avar%20d%3D%5F4c1%2Ergb%3B%0Avar%20df%3D%5F4c2%3B%0Areturn%20MochiKit%2EColor%2EColor%2EfromRGB%28%28s%2Er%2Asf%29%2B%28d%2Er%2Adf%29%2C%28s%2Eg%2Asf%29%2B%28d%2Eg%2Adf%29%2C%28s%2Eb%2Asf%29%2B%28d%2Eb%2Adf%29%2C%28s%2Ea%2Asf%29%2B%28d%2Ea%2Adf%29%29%3B%0A%7D%2CcompareRGB%3Afunction%28%5F4c7%29%7B%0Avar%20a%3Dthis%2EasRGB%28%29%3B%0Avar%20b%3D%5F4c7%2EasRGB%28%29%3B%0Areturn%20MochiKit%2EBase%2Ecompare%28%5Ba%2Er%2Ca%2Eg%2Ca%2Eb%2Ca%2Ea%5D%2C%5Bb%2Er%2Cb%2Eg%2Cb%2Eb%2Cb%2Ea%5D%29%3B%0A%7D%2CisLight%3Afunction%28%29%7B%0Areturn%20this%2EasHSL%28%29%2Eb%3E0%2E5%3B%0A%7D%2CisDark%3Afunction%28%29%7B%0Areturn%20%28%21this%2EisLight%28%29%29%3B%0A%7D%2CtoHSLString%3Afunction%28%29%7B%0Avar%20c%3Dthis%2EasHSL%28%29%3B%0Avar%20ccc%3DMochiKit%2EColor%2EclampColorComponent%3B%0Avar%20rval%3Dthis%2E%5FhslString%3B%0Aif%28%21rval%29%7B%0Avar%20mid%3D%28ccc%28c%2Eh%2C360%29%2EtoFixed%280%29%2B%22%2C%22%2Bccc%28c%2Es%2C100%29%2EtoPrecision%284%29%2B%22%25%22%2B%22%2C%22%2Bccc%28c%2El%2C100%29%2EtoPrecision%284%29%2B%22%25%22%29%3B%0Avar%20a%3Dc%2Ea%3B%0Aif%28a%3E%3D1%29%7B%0Aa%3D1%3B%0Arval%3D%22hsl%28%22%2Bmid%2B%22%29%22%3B%0A%7Delse%7B%0Aif%28a%3C%3D0%29%7B%0Aa%3D0%3B%0A%7D%0Arval%3D%22hsla%28%22%2Bmid%2B%22%2C%22%2Ba%2B%22%29%22%3B%0A%7D%0Athis%2E%5FhslString%3Drval%3B%0A%7D%0Areturn%20rval%3B%0A%7D%2CtoRGBString%3Afunction%28%29%7B%0Avar%20c%3Dthis%2Ergb%3B%0Avar%20ccc%3DMochiKit%2EColor%2EclampColorComponent%3B%0Avar%20rval%3Dthis%2E%5FrgbString%3B%0Aif%28%21rval%29%7B%0Avar%20mid%3D%28ccc%28c%2Er%2C255%29%2EtoFixed%280%29%2B%22%2C%22%2Bccc%28c%2Eg%2C255%29%2EtoFixed%280%29%2B%22%2C%22%2Bccc%28c%2Eb%2C255%29%2EtoFixed%280%29%29%3B%0Aif%28c%2Ea%21%3D1%29%7B%0Arval%3D%22rgba%28%22%2Bmid%2B%22%2C%22%2Bc%2Ea%2B%22%29%22%3B%0A%7Delse%7B%0Arval%3D%22rgb%28%22%2Bmid%2B%22%29%22%3B%0A%7D%0Athis%2E%5FrgbString%3Drval%3B%0A%7D%0Areturn%20rval%3B%0A%7D%2CasRGB%3Afunction%28%29%7B%0Areturn%20MochiKit%2EBase%2Eclone%28this%2Ergb%29%3B%0A%7D%2CtoHexString%3Afunction%28%29%7B%0Avar%20m%3DMochiKit%2EColor%3B%0Avar%20c%3Dthis%2Ergb%3B%0Avar%20ccc%3DMochiKit%2EColor%2EclampColorComponent%3B%0Avar%20rval%3Dthis%2E%5FhexString%3B%0Aif%28%21rval%29%7B%0Arval%3D%28%22%23%22%2Bm%2EtoColorPart%28ccc%28c%2Er%2C255%29%29%2Bm%2EtoColorPart%28ccc%28c%2Eg%2C255%29%29%2Bm%2EtoColorPart%28ccc%28c%2Eb%2C255%29%29%29%3B%0Athis%2E%5FhexString%3Drval%3B%0A%7D%0Areturn%20rval%3B%0A%7D%2CasHSV%3Afunction%28%29%7B%0Avar%20hsv%3Dthis%2Ehsv%3B%0Avar%20c%3Dthis%2Ergb%3B%0Aif%28typeof%20%28hsv%29%3D%3D%22undefined%22%7C%7Chsv%3D%3D%3Dnull%29%7B%0Ahsv%3DMochiKit%2EColor%2ErgbToHSV%28this%2Ergb%29%3B%0Athis%2Ehsv%3Dhsv%3B%0A%7D%0Areturn%20MochiKit%2EBase%2Eclone%28hsv%29%3B%0A%7D%2CasHSL%3Afunction%28%29%7B%0Avar%20hsl%3Dthis%2Ehsl%3B%0Avar%20c%3Dthis%2Ergb%3B%0Aif%28typeof%20%28hsl%29%3D%3D%22undefined%22%7C%7Chsl%3D%3D%3Dnull%29%7B%0Ahsl%3DMochiKit%2EColor%2ErgbToHSL%28this%2Ergb%29%3B%0Athis%2Ehsl%3Dhsl%3B%0A%7D%0Areturn%20MochiKit%2EBase%2Eclone%28hsl%29%3B%0A%7D%2CtoString%3Afunction%28%29%7B%0Areturn%20this%2EtoRGBString%28%29%3B%0A%7D%2Crepr%3Afunction%28%29%7B%0Avar%20c%3Dthis%2Ergb%3B%0Avar%20col%3D%5Bc%2Er%2Cc%2Eg%2Cc%2Eb%2Cc%2Ea%5D%3B%0Areturn%20this%2E%5F%5Fclass%5F%5F%2ENAME%2B%22%28%22%2Bcol%2Ejoin%28%22%2C%20%22%29%2B%22%29%22%3B%0A%7D%7D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EColor%2EColor%2C%7BfromRGB%3Afunction%28red%2C%5F4de%2Cblue%2C%5F4e0%29%7B%0Avar%20%5F4e1%3DMochiKit%2EColor%2EColor%3B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Avar%20rgb%3Dred%3B%0Ared%3Drgb%2Er%3B%0A%5F4de%3Drgb%2Eg%3B%0Ablue%3Drgb%2Eb%3B%0Aif%28typeof%20%28rgb%2Ea%29%3D%3D%22undefined%22%29%7B%0A%5F4e0%3Dundefined%3B%0A%7Delse%7B%0A%5F4e0%3Drgb%2Ea%3B%0A%7D%0A%7D%0Areturn%20new%20%5F4e1%28red%2C%5F4de%2Cblue%2C%5F4e0%29%3B%0A%7D%2CfromHSL%3Afunction%28hue%2C%5F4e4%2C%5F4e5%2C%5F4e6%29%7B%0Avar%20m%3DMochiKit%2EColor%3B%0Areturn%20m%2EColor%2EfromRGB%28m%2EhslToRGB%2Eapply%28m%2Carguments%29%29%3B%0A%7D%2CfromHSV%3Afunction%28hue%2C%5F4e9%2C%5F4ea%2C%5F4eb%29%7B%0Avar%20m%3DMochiKit%2EColor%3B%0Areturn%20m%2EColor%2EfromRGB%28m%2EhsvToRGB%2Eapply%28m%2Carguments%29%29%3B%0A%7D%2CfromName%3Afunction%28name%29%7B%0Avar%20%5F4ee%3DMochiKit%2EColor%2EColor%3B%0Aif%28name%2EcharAt%280%29%3D%3D%22%5C%22%22%29%7B%0Aname%3Dname%2Esubstr%281%2Cname%2Elength%2D2%29%3B%0A%7D%0Avar%20%5F4ef%3D%5F4ee%2E%5FnamedColors%5Bname%2EtoLowerCase%28%29%5D%3B%0Aif%28typeof%20%28%5F4ef%29%3D%3D%22string%22%29%7B%0Areturn%20%5F4ee%2EfromHexString%28%5F4ef%29%3B%0A%7Delse%7B%0Aif%28name%3D%3D%22transparent%22%29%7B%0Areturn%20%5F4ee%2EtransparentColor%28%29%3B%0A%7D%0A%7D%0Areturn%20null%3B%0A%7D%2CfromString%3Afunction%28%5F4f0%29%7B%0Avar%20self%3DMochiKit%2EColor%2EColor%3B%0Avar%20%5F4f2%3D%5F4f0%2Esubstr%280%2C3%29%3B%0Aif%28%5F4f2%3D%3D%22rgb%22%29%7B%0Areturn%20self%2EfromRGBString%28%5F4f0%29%3B%0A%7Delse%7B%0Aif%28%5F4f2%3D%3D%22hsl%22%29%7B%0Areturn%20self%2EfromHSLString%28%5F4f0%29%3B%0A%7Delse%7B%0Aif%28%5F4f0%2EcharAt%280%29%3D%3D%22%23%22%29%7B%0Areturn%20self%2EfromHexString%28%5F4f0%29%3B%0A%7D%0A%7D%0A%7D%0Areturn%20self%2EfromName%28%5F4f0%29%3B%0A%7D%2CfromHexString%3Afunction%28%5F4f3%29%7B%0Aif%28%5F4f3%2EcharAt%280%29%3D%3D%22%23%22%29%7B%0A%5F4f3%3D%5F4f3%2Esubstring%281%29%3B%0A%7D%0Avar%20%5F4f4%3D%5B%5D%3B%0Avar%20i%2Chex%3B%0Aif%28%5F4f3%2Elength%3D%3D3%29%7B%0Afor%28i%3D0%3Bi%3C3%3Bi%2B%2B%29%7B%0Ahex%3D%5F4f3%2Esubstr%28i%2C1%29%3B%0A%5F4f4%2Epush%28parseInt%28hex%2Bhex%2C16%29%2F255%29%3B%0A%7D%0A%7Delse%7B%0Afor%28i%3D0%3Bi%3C6%3Bi%2B%3D2%29%7B%0Ahex%3D%5F4f3%2Esubstr%28i%2C2%29%3B%0A%5F4f4%2Epush%28parseInt%28hex%2C16%29%2F255%29%3B%0A%7D%0A%7D%0Avar%20%5F4f7%3DMochiKit%2EColor%2EColor%3B%0Areturn%20%5F4f7%2EfromRGB%2Eapply%28%5F4f7%2C%5F4f4%29%3B%0A%7D%2C%5FfromColorString%3Afunction%28pre%2C%5F4f9%2C%5F4fa%2C%5F4fb%29%7B%0Aif%28%5F4fb%2EindexOf%28pre%29%3D%3D%3D0%29%7B%0A%5F4fb%3D%5F4fb%2Esubstring%28%5F4fb%2EindexOf%28%22%28%22%2C3%29%2B1%2C%5F4fb%2Elength%2D1%29%3B%0A%7D%0Avar%20%5F4fc%3D%5F4fb%2Esplit%28%2F%5Cs%2A%2C%5Cs%2A%2F%29%3B%0Avar%20%5F4fd%3D%5B%5D%3B%0Afor%28var%20i%3D0%3Bi%3C%5F4fc%2Elength%3Bi%2B%2B%29%7B%0Avar%20c%3D%5F4fc%5Bi%5D%3B%0Avar%20val%3B%0Avar%20%5F501%3Dc%2Esubstring%28c%2Elength%2D3%29%3B%0Aif%28c%2EcharAt%28c%2Elength%2D1%29%3D%3D%22%25%22%29%7B%0Aval%3D0%2E01%2AparseFloat%28c%2Esubstring%280%2Cc%2Elength%2D1%29%29%3B%0A%7Delse%7B%0Aif%28%5F501%3D%3D%22deg%22%29%7B%0Aval%3DparseFloat%28c%29%2F360%3B%0A%7Delse%7B%0Aif%28%5F501%3D%3D%22rad%22%29%7B%0Aval%3DparseFloat%28c%29%2F%28Math%2EPI%2A2%29%3B%0A%7Delse%7B%0Aval%3D%5F4fa%5Bi%5D%2AparseFloat%28c%29%3B%0A%7D%0A%7D%0A%7D%0A%5F4fd%2Epush%28val%29%3B%0A%7D%0Areturn%20this%5B%5F4f9%5D%2Eapply%28this%2C%5F4fd%29%3B%0A%7D%2CfromComputedStyle%3Afunction%28elem%2C%5F503%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20cls%3DMochiKit%2EColor%2EColor%3B%0Afor%28elem%3Dd%2EgetElement%28elem%29%3Belem%3Belem%3Delem%2EparentNode%29%7B%0Avar%20%5F506%3DMochiKit%2EStyle%2EgetStyle%2Eapply%28d%2Carguments%29%3B%0Aif%28%21%5F506%29%7B%0Acontinue%3B%0A%7D%0Avar%20%5F507%3Dcls%2EfromString%28%5F506%29%3B%0Aif%28%21%5F507%29%7B%0Abreak%3B%0A%7D%0Aif%28%5F507%2EasRGB%28%29%2Ea%3E0%29%7B%0Areturn%20%5F507%3B%0A%7D%0A%7D%0Areturn%20null%3B%0A%7D%2CfromBackground%3Afunction%28elem%29%7B%0Avar%20cls%3DMochiKit%2EColor%2EColor%3B%0Areturn%20cls%2EfromComputedStyle%28elem%2C%22backgroundColor%22%2C%22background%2Dcolor%22%29%7C%7Ccls%2EwhiteColor%28%29%3B%0A%7D%2CfromText%3Afunction%28elem%29%7B%0Avar%20cls%3DMochiKit%2EColor%2EColor%3B%0Areturn%20cls%2EfromComputedStyle%28elem%2C%22color%22%2C%22color%22%29%7C%7Ccls%2EblackColor%28%29%3B%0A%7D%2CnamedColors%3Afunction%28%29%7B%0Areturn%20MochiKit%2EBase%2Eclone%28MochiKit%2EColor%2EColor%2E%5FnamedColors%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EColor%2C%7BclampColorComponent%3Afunction%28v%2C%5F50d%29%7B%0Av%2A%3D%5F50d%3B%0Aif%28v%3C0%29%7B%0Areturn%200%3B%0A%7Delse%7B%0Aif%28v%3E%5F50d%29%7B%0Areturn%20%5F50d%3B%0A%7Delse%7B%0Areturn%20v%3B%0A%7D%0A%7D%0A%7D%2C%5FhslValue%3Afunction%28n1%2Cn2%2Chue%29%7B%0Aif%28hue%3E6%29%7B%0Ahue%2D%3D6%3B%0A%7Delse%7B%0Aif%28hue%3C0%29%7B%0Ahue%2B%3D6%3B%0A%7D%0A%7D%0Avar%20val%3B%0Aif%28hue%3C1%29%7B%0Aval%3Dn1%2B%28n2%2Dn1%29%2Ahue%3B%0A%7Delse%7B%0Aif%28hue%3C3%29%7B%0Aval%3Dn2%3B%0A%7Delse%7B%0Aif%28hue%3C4%29%7B%0Aval%3Dn1%2B%28n2%2Dn1%29%2A%284%2Dhue%29%3B%0A%7Delse%7B%0Aval%3Dn1%3B%0A%7D%0A%7D%0A%7D%0Areturn%20val%3B%0A%7D%2ChsvToRGB%3Afunction%28hue%2C%5F513%2C%5F514%2C%5F515%29%7B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Avar%20hsv%3Dhue%3B%0Ahue%3Dhsv%2Eh%3B%0A%5F513%3Dhsv%2Es%3B%0A%5F514%3Dhsv%2Ev%3B%0A%5F515%3Dhsv%2Ea%3B%0A%7D%0Avar%20red%3B%0Avar%20%5F518%3B%0Avar%20blue%3B%0Aif%28%5F513%3D%3D%3D0%29%7B%0Ared%3D%5F514%3B%0A%5F518%3D%5F514%3B%0Ablue%3D%5F514%3B%0A%7Delse%7B%0Avar%20i%3DMath%2Efloor%28hue%2A6%29%3B%0Avar%20f%3D%28hue%2A6%29%2Di%3B%0Avar%20p%3D%5F514%2A%281%2D%5F513%29%3B%0Avar%20q%3D%5F514%2A%281%2D%28%5F513%2Af%29%29%3B%0Avar%20t%3D%5F514%2A%281%2D%28%5F513%2A%281%2Df%29%29%29%3B%0Aswitch%28i%29%7B%0Acase%201%3A%0Ared%3Dq%3B%0A%5F518%3D%5F514%3B%0Ablue%3Dp%3B%0Abreak%3B%0Acase%202%3A%0Ared%3Dp%3B%0A%5F518%3D%5F514%3B%0Ablue%3Dt%3B%0Abreak%3B%0Acase%203%3A%0Ared%3Dp%3B%0A%5F518%3Dq%3B%0Ablue%3D%5F514%3B%0Abreak%3B%0Acase%204%3A%0Ared%3Dt%3B%0A%5F518%3Dp%3B%0Ablue%3D%5F514%3B%0Abreak%3B%0Acase%205%3A%0Ared%3D%5F514%3B%0A%5F518%3Dp%3B%0Ablue%3Dq%3B%0Abreak%3B%0Acase%206%3A%0Acase%200%3A%0Ared%3D%5F514%3B%0A%5F518%3Dt%3B%0Ablue%3Dp%3B%0Abreak%3B%0A%7D%0A%7D%0Areturn%20%7Br%3Ared%2Cg%3A%5F518%2Cb%3Ablue%2Ca%3A%5F515%7D%3B%0A%7D%2ChslToRGB%3Afunction%28hue%2C%5F520%2C%5F521%2C%5F522%29%7B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Avar%20hsl%3Dhue%3B%0Ahue%3Dhsl%2Eh%3B%0A%5F520%3Dhsl%2Es%3B%0A%5F521%3Dhsl%2El%3B%0A%5F522%3Dhsl%2Ea%3B%0A%7D%0Avar%20red%3B%0Avar%20%5F525%3B%0Avar%20blue%3B%0Aif%28%5F520%3D%3D%3D0%29%7B%0Ared%3D%5F521%3B%0A%5F525%3D%5F521%3B%0Ablue%3D%5F521%3B%0A%7Delse%7B%0Avar%20m2%3B%0Aif%28%5F521%3C%3D0%2E5%29%7B%0Am2%3D%5F521%2A%281%2B%5F520%29%3B%0A%7Delse%7B%0Am2%3D%5F521%2B%5F520%2D%28%5F521%2A%5F520%29%3B%0A%7D%0Avar%20m1%3D%282%2A%5F521%29%2Dm2%3B%0Avar%20f%3DMochiKit%2EColor%2E%5FhslValue%3B%0Avar%20h6%3Dhue%2A6%3B%0Ared%3Df%28m1%2Cm2%2Ch6%2B2%29%3B%0A%5F525%3Df%28m1%2Cm2%2Ch6%29%3B%0Ablue%3Df%28m1%2Cm2%2Ch6%2D2%29%3B%0A%7D%0Areturn%20%7Br%3Ared%2Cg%3A%5F525%2Cb%3Ablue%2Ca%3A%5F522%7D%3B%0A%7D%2CrgbToHSV%3Afunction%28red%2C%5F52c%2Cblue%2C%5F52e%29%7B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Avar%20rgb%3Dred%3B%0Ared%3Drgb%2Er%3B%0A%5F52c%3Drgb%2Eg%3B%0Ablue%3Drgb%2Eb%3B%0A%5F52e%3Drgb%2Ea%3B%0A%7D%0Avar%20max%3DMath%2Emax%28Math%2Emax%28red%2C%5F52c%29%2Cblue%29%3B%0Avar%20min%3DMath%2Emin%28Math%2Emin%28red%2C%5F52c%29%2Cblue%29%3B%0Avar%20hue%3B%0Avar%20%5F533%3B%0Avar%20%5F534%3Dmax%3B%0Aif%28min%3D%3Dmax%29%7B%0Ahue%3D0%3B%0A%5F533%3D0%3B%0A%7Delse%7B%0Avar%20%5F535%3D%28max%2Dmin%29%3B%0A%5F533%3D%5F535%2Fmax%3B%0Aif%28red%3D%3Dmax%29%7B%0Ahue%3D%28%5F52c%2Dblue%29%2F%5F535%3B%0A%7Delse%7B%0Aif%28%5F52c%3D%3Dmax%29%7B%0Ahue%3D2%2B%28%28blue%2Dred%29%2F%5F535%29%3B%0A%7Delse%7B%0Ahue%3D4%2B%28%28red%2D%5F52c%29%2F%5F535%29%3B%0A%7D%0A%7D%0Ahue%2F%3D6%3B%0Aif%28hue%3C0%29%7B%0Ahue%2B%3D1%3B%0A%7D%0Aif%28hue%3E1%29%7B%0Ahue%2D%3D1%3B%0A%7D%0A%7D%0Areturn%20%7Bh%3Ahue%2Cs%3A%5F533%2Cv%3A%5F534%2Ca%3A%5F52e%7D%3B%0A%7D%2CrgbToHSL%3Afunction%28red%2C%5F537%2Cblue%2C%5F539%29%7B%0Aif%28arguments%2Elength%3D%3D1%29%7B%0Avar%20rgb%3Dred%3B%0Ared%3Drgb%2Er%3B%0A%5F537%3Drgb%2Eg%3B%0Ablue%3Drgb%2Eb%3B%0A%5F539%3Drgb%2Ea%3B%0A%7D%0Avar%20max%3DMath%2Emax%28red%2CMath%2Emax%28%5F537%2Cblue%29%29%3B%0Avar%20min%3DMath%2Emin%28red%2CMath%2Emin%28%5F537%2Cblue%29%29%3B%0Avar%20hue%3B%0Avar%20%5F53e%3B%0Avar%20%5F53f%3D%28max%2Bmin%29%2F2%3B%0Avar%20%5F540%3Dmax%2Dmin%3B%0Aif%28%5F540%3D%3D%3D0%29%7B%0Ahue%3D0%3B%0A%5F53e%3D0%3B%0A%7Delse%7B%0Aif%28%5F53f%3C%3D0%2E5%29%7B%0A%5F53e%3D%5F540%2F%28max%2Bmin%29%3B%0A%7Delse%7B%0A%5F53e%3D%5F540%2F%282%2Dmax%2Dmin%29%3B%0A%7D%0Aif%28red%3D%3Dmax%29%7B%0Ahue%3D%28%5F537%2Dblue%29%2F%5F540%3B%0A%7Delse%7B%0Aif%28%5F537%3D%3Dmax%29%7B%0Ahue%3D2%2B%28%28blue%2Dred%29%2F%5F540%29%3B%0A%7Delse%7B%0Ahue%3D4%2B%28%28red%2D%5F537%29%2F%5F540%29%3B%0A%7D%0A%7D%0Ahue%2F%3D6%3B%0Aif%28hue%3C0%29%7B%0Ahue%2B%3D1%3B%0A%7D%0Aif%28hue%3E1%29%7B%0Ahue%2D%3D1%3B%0A%7D%0A%7D%0Areturn%20%7Bh%3Ahue%2Cs%3A%5F53e%2Cl%3A%5F53f%2Ca%3A%5F539%7D%3B%0A%7D%2CtoColorPart%3Afunction%28num%29%7B%0Anum%3DMath%2Eround%28num%29%3B%0Avar%20%5F542%3Dnum%2EtoString%2816%29%3B%0Aif%28num%3C16%29%7B%0Areturn%20%220%22%2B%5F542%3B%0A%7D%0Areturn%20%5F542%3B%0A%7D%2C%5F%5Fnew%5F%5F%3Afunction%28%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Athis%2EColor%2EfromRGBString%3Dm%2Ebind%28this%2EColor%2E%5FfromColorString%2Cthis%2EColor%2C%22rgb%22%2C%22fromRGB%22%2C%5B1%2F255%2C1%2F255%2C1%2F255%2C1%5D%29%3B%0Athis%2EColor%2EfromHSLString%3Dm%2Ebind%28this%2EColor%2E%5FfromColorString%2Cthis%2EColor%2C%22hsl%22%2C%22fromHSL%22%2C%5B1%2F360%2C0%2E01%2C0%2E01%2C1%5D%29%3B%0Avar%20%5F544%3D1%2F3%3B%0Avar%20%5F545%3D%7Bblack%3A%5B0%2C0%2C0%5D%2Cblue%3A%5B0%2C0%2C1%5D%2Cbrown%3A%5B0%2E6%2C0%2E4%2C0%2E2%5D%2Ccyan%3A%5B0%2C1%2C1%5D%2CdarkGray%3A%5B%5F544%2C%5F544%2C%5F544%5D%2Cgray%3A%5B0%2E5%2C0%2E5%2C0%2E5%5D%2Cgreen%3A%5B0%2C1%2C0%5D%2ClightGray%3A%5B2%2A%5F544%2C2%2A%5F544%2C2%2A%5F544%5D%2Cmagenta%3A%5B1%2C0%2C1%5D%2Corange%3A%5B1%2C0%2E5%2C0%5D%2Cpurple%3A%5B0%2E5%2C0%2C0%2E5%5D%2Cred%3A%5B1%2C0%2C0%5D%2Ctransparent%3A%5B0%2C0%2C0%2C0%5D%2Cwhite%3A%5B1%2C1%2C1%5D%2Cyellow%3A%5B1%2C1%2C0%5D%7D%3B%0Avar%20%5F546%3Dfunction%28name%2Cr%2Cg%2Cb%2Ca%29%7B%0Avar%20rval%3Dthis%2EfromRGB%28r%2Cg%2Cb%2Ca%29%3B%0Athis%5Bname%5D%3Dfunction%28%29%7B%0Areturn%20rval%3B%0A%7D%3B%0Areturn%20rval%3B%0A%7D%3B%0Afor%28var%20k%20in%20%5F545%29%7B%0Avar%20name%3Dk%2B%22Color%22%3B%0Avar%20%5F54f%3Dm%2Econcat%28%5B%5F546%2Cthis%2EColor%2Cname%5D%2C%5F545%5Bk%5D%29%3B%0Athis%2EColor%5Bname%5D%3Dm%2Ebind%2Eapply%28null%2C%5F54f%29%3B%0A%7D%0Avar%20%5F550%3Dfunction%28%29%7B%0Afor%28var%20i%3D0%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Aif%28%21%28arguments%5Bi%5D%20instanceof%20MochiKit%2EColor%2EColor%29%29%7B%0Areturn%20false%3B%0A%7D%0A%7D%0Areturn%20true%3B%0A%7D%3B%0Avar%20%5F552%3Dfunction%28a%2Cb%29%7B%0Areturn%20a%2EcompareRGB%28b%29%3B%0A%7D%3B%0Am%2EnameFunctions%28this%29%3B%0Am%2EregisterComparator%28this%2EColor%2ENAME%2C%5F550%2C%5F552%29%3B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3Am%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0A%7D%7D%29%3B%0AMochiKit%2EColor%2EEXPORT%3D%5B%22Color%22%5D%3B%0AMochiKit%2EColor%2EEXPORT%5FOK%3D%5B%22clampColorComponent%22%2C%22rgbToHSL%22%2C%22hslToRGB%22%2C%22rgbToHSV%22%2C%22hsvToRGB%22%2C%22toColorPart%22%5D%3B%0AMochiKit%2EColor%2E%5F%5Fnew%5F%5F%28%29%3B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2EColor%29%3B%0AMochiKit%2EColor%2EColor%2E%5FnamedColors%3D%7Baliceblue%3A%22%23f0f8ff%22%2Cantiquewhite%3A%22%23faebd7%22%2Caqua%3A%22%2300ffff%22%2Caquamarine%3A%22%237fffd4%22%2Cazure%3A%22%23f0ffff%22%2Cbeige%3A%22%23f5f5dc%22%2Cbisque%3A%22%23ffe4c4%22%2Cblack%3A%22%23000000%22%2Cblanchedalmond%3A%22%23ffebcd%22%2Cblue%3A%22%230000ff%22%2Cblueviolet%3A%22%238a2be2%22%2Cbrown%3A%22%23a52a2a%22%2Cburlywood%3A%22%23deb887%22%2Ccadetblue%3A%22%235f9ea0%22%2Cchartreuse%3A%22%237fff00%22%2Cchocolate%3A%22%23d2691e%22%2Ccoral%3A%22%23ff7f50%22%2Ccornflowerblue%3A%22%236495ed%22%2Ccornsilk%3A%22%23fff8dc%22%2Ccrimson%3A%22%23dc143c%22%2Ccyan%3A%22%2300ffff%22%2Cdarkblue%3A%22%2300008b%22%2Cdarkcyan%3A%22%23008b8b%22%2Cdarkgoldenrod%3A%22%23b8860b%22%2Cdarkgray%3A%22%23a9a9a9%22%2Cdarkgreen%3A%22%23006400%22%2Cdarkgrey%3A%22%23a9a9a9%22%2Cdarkkhaki%3A%22%23bdb76b%22%2Cdarkmagenta%3A%22%238b008b%22%2Cdarkolivegreen%3A%22%23556b2f%22%2Cdarkorange%3A%22%23ff8c00%22%2Cdarkorchid%3A%22%239932cc%22%2Cdarkred%3A%22%238b0000%22%2Cdarksalmon%3A%22%23e9967a%22%2Cdarkseagreen%3A%22%238fbc8f%22%2Cdarkslateblue%3A%22%23483d8b%22%2Cdarkslategray%3A%22%232f4f4f%22%2Cdarkslategrey%3A%22%232f4f4f%22%2Cdarkturquoise%3A%22%2300ced1%22%2Cdarkviolet%3A%22%239400d3%22%2Cdeeppink%3A%22%23ff1493%22%2Cdeepskyblue%3A%22%2300bfff%22%2Cdimgray%3A%22%23696969%22%2Cdimgrey%3A%22%23696969%22%2Cdodgerblue%3A%22%231e90ff%22%2Cfirebrick%3A%22%23b22222%22%2Cfloralwhite%3A%22%23fffaf0%22%2Cforestgreen%3A%22%23228b22%22%2Cfuchsia%3A%22%23ff00ff%22%2Cgainsboro%3A%22%23dcdcdc%22%2Cghostwhite%3A%22%23f8f8ff%22%2Cgold%3A%22%23ffd700%22%2Cgoldenrod%3A%22%23daa520%22%2Cgray%3A%22%23808080%22%2Cgreen%3A%22%23008000%22%2Cgreenyellow%3A%22%23adff2f%22%2Cgrey%3A%22%23808080%22%2Choneydew%3A%22%23f0fff0%22%2Chotpink%3A%22%23ff69b4%22%2Cindianred%3A%22%23cd5c5c%22%2Cindigo%3A%22%234b0082%22%2Civory%3A%22%23fffff0%22%2Ckhaki%3A%22%23f0e68c%22%2Clavender%3A%22%23e6e6fa%22%2Clavenderblush%3A%22%23fff0f5%22%2Clawngreen%3A%22%237cfc00%22%2Clemonchiffon%3A%22%23fffacd%22%2Clightblue%3A%22%23add8e6%22%2Clightcoral%3A%22%23f08080%22%2Clightcyan%3A%22%23e0ffff%22%2Clightgoldenrodyellow%3A%22%23fafad2%22%2Clightgray%3A%22%23d3d3d3%22%2Clightgreen%3A%22%2390ee90%22%2Clightgrey%3A%22%23d3d3d3%22%2Clightpink%3A%22%23ffb6c1%22%2Clightsalmon%3A%22%23ffa07a%22%2Clightseagreen%3A%22%2320b2aa%22%2Clightskyblue%3A%22%2387cefa%22%2Clightslategray%3A%22%23778899%22%2Clightslategrey%3A%22%23778899%22%2Clightsteelblue%3A%22%23b0c4de%22%2Clightyellow%3A%22%23ffffe0%22%2Clime%3A%22%2300ff00%22%2Climegreen%3A%22%2332cd32%22%2Clinen%3A%22%23faf0e6%22%2Cmagenta%3A%22%23ff00ff%22%2Cmaroon%3A%22%23800000%22%2Cmediumaquamarine%3A%22%2366cdaa%22%2Cmediumblue%3A%22%230000cd%22%2Cmediumorchid%3A%22%23ba55d3%22%2Cmediumpurple%3A%22%239370db%22%2Cmediumseagreen%3A%22%233cb371%22%2Cmediumslateblue%3A%22%237b68ee%22%2Cmediumspringgreen%3A%22%2300fa9a%22%2Cmediumturquoise%3A%22%2348d1cc%22%2Cmediumvioletred%3A%22%23c71585%22%2Cmidnightblue%3A%22%23191970%22%2Cmintcream%3A%22%23f5fffa%22%2Cmistyrose%3A%22%23ffe4e1%22%2Cmoccasin%3A%22%23ffe4b5%22%2Cnavajowhite%3A%22%23ffdead%22%2Cnavy%3A%22%23000080%22%2Coldlace%3A%22%23fdf5e6%22%2Colive%3A%22%23808000%22%2Colivedrab%3A%22%236b8e23%22%2Corange%3A%22%23ffa500%22%2Corangered%3A%22%23ff4500%22%2Corchid%3A%22%23da70d6%22%2Cpalegoldenrod%3A%22%23eee8aa%22%2Cpalegreen%3A%22%2398fb98%22%2Cpaleturquoise%3A%22%23afeeee%22%2Cpalevioletred%3A%22%23db7093%22%2Cpapayawhip%3A%22%23ffefd5%22%2Cpeachpuff%3A%22%23ffdab9%22%2Cperu%3A%22%23cd853f%22%2Cpink%3A%22%23ffc0cb%22%2Cplum%3A%22%23dda0dd%22%2Cpowderblue%3A%22%23b0e0e6%22%2Cpurple%3A%22%23800080%22%2Cred%3A%22%23ff0000%22%2Crosybrown%3A%22%23bc8f8f%22%2Croyalblue%3A%22%234169e1%22%2Csaddlebrown%3A%22%238b4513%22%2Csalmon%3A%22%23fa8072%22%2Csandybrown%3A%22%23f4a460%22%2Cseagreen%3A%22%232e8b57%22%2Cseashell%3A%22%23fff5ee%22%2Csienna%3A%22%23a0522d%22%2Csilver%3A%22%23c0c0c0%22%2Cskyblue%3A%22%2387ceeb%22%2Cslateblue%3A%22%236a5acd%22%2Cslategray%3A%22%23708090%22%2Cslategrey%3A%22%23708090%22%2Csnow%3A%22%23fffafa%22%2Cspringgreen%3A%22%2300ff7f%22%2Csteelblue%3A%22%234682b4%22%2Ctan%3A%22%23d2b48c%22%2Cteal%3A%22%23008080%22%2Cthistle%3A%22%23d8bfd8%22%2Ctomato%3A%22%23ff6347%22%2Cturquoise%3A%22%2340e0d0%22%2Cviolet%3A%22%23ee82ee%22%2Cwheat%3A%22%23f5deb3%22%2Cwhite%3A%22%23ffffff%22%2Cwhitesmoke%3A%22%23f5f5f5%22%2Cyellow%3A%22%23ffff00%22%2Cyellowgreen%3A%22%239acd32%22%7D%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22Signal%22%2C%5B%22Base%22%2C%22DOM%22%2C%22Style%22%5D%29%3B%0AMochiKit%2ESignal%2ENAME%3D%22MochiKit%2ESignal%22%3B%0AMochiKit%2ESignal%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2ESignal%2E%5Fobservers%3D%5B%5D%3B%0AMochiKit%2ESignal%2EEvent%3Dfunction%28src%2Ce%29%7B%0Athis%2E%5Fevent%3De%7C%7Cwindow%2Eevent%3B%0Athis%2E%5Fsrc%3Dsrc%3B%0A%7D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2ESignal%2EEvent%2Eprototype%2C%7B%5F%5Frepr%5F%5F%3Afunction%28%29%7B%0Avar%20repr%3DMochiKit%2EBase%2Erepr%3B%0Avar%20str%3D%22%7Bevent%28%29%3A%20%22%2Brepr%28this%2Eevent%28%29%29%2B%22%2C%20src%28%29%3A%20%22%2Brepr%28this%2Esrc%28%29%29%2B%22%2C%20type%28%29%3A%20%22%2Brepr%28this%2Etype%28%29%29%2B%22%2C%20target%28%29%3A%20%22%2Brepr%28this%2Etarget%28%29%29%3B%0Aif%28this%2Etype%28%29%26%26this%2Etype%28%29%2EindexOf%28%22key%22%29%3D%3D%3D0%7C%7Cthis%2Etype%28%29%2EindexOf%28%22mouse%22%29%3D%3D%3D0%7C%7Cthis%2Etype%28%29%2EindexOf%28%22click%22%29%21%3D%2D1%7C%7Cthis%2Etype%28%29%3D%3D%22contextmenu%22%29%7B%0Astr%2B%3D%22%2C%20modifier%28%29%3A%20%22%2B%22%7Balt%3A%20%22%2Brepr%28this%2Emodifier%28%29%2Ealt%29%2B%22%2C%20ctrl%3A%20%22%2Brepr%28this%2Emodifier%28%29%2Ectrl%29%2B%22%2C%20meta%3A%20%22%2Brepr%28this%2Emodifier%28%29%2Emeta%29%2B%22%2C%20shift%3A%20%22%2Brepr%28this%2Emodifier%28%29%2Eshift%29%2B%22%2C%20any%3A%20%22%2Brepr%28this%2Emodifier%28%29%2Eany%29%2B%22%7D%22%3B%0A%7D%0Aif%28this%2Etype%28%29%26%26this%2Etype%28%29%2EindexOf%28%22key%22%29%3D%3D%3D0%29%7B%0Astr%2B%3D%22%2C%20key%28%29%3A%20%7Bcode%3A%20%22%2Brepr%28this%2Ekey%28%29%2Ecode%29%2B%22%2C%20string%3A%20%22%2Brepr%28this%2Ekey%28%29%2Estring%29%2B%22%7D%22%3B%0A%7D%0Aif%28this%2Etype%28%29%26%26%28this%2Etype%28%29%2EindexOf%28%22mouse%22%29%3D%3D%3D0%7C%7Cthis%2Etype%28%29%2EindexOf%28%22click%22%29%21%3D%2D1%7C%7Cthis%2Etype%28%29%3D%3D%22contextmenu%22%29%29%7B%0Astr%2B%3D%22%2C%20mouse%28%29%3A%20%7Bpage%3A%20%22%2Brepr%28this%2Emouse%28%29%2Epage%29%2B%22%2C%20client%3A%20%22%2Brepr%28this%2Emouse%28%29%2Eclient%29%3B%0Aif%28this%2Etype%28%29%21%3D%22mousemove%22%26%26this%2Etype%28%29%21%3D%22mousewheel%22%29%7B%0Astr%2B%3D%22%2C%20button%3A%20%7Bleft%3A%20%22%2Brepr%28this%2Emouse%28%29%2Ebutton%2Eleft%29%2B%22%2C%20middle%3A%20%22%2Brepr%28this%2Emouse%28%29%2Ebutton%2Emiddle%29%2B%22%2C%20right%3A%20%22%2Brepr%28this%2Emouse%28%29%2Ebutton%2Eright%29%2B%22%7D%22%3B%0A%7D%0Aif%28this%2Etype%28%29%3D%3D%22mousewheel%22%29%7B%0Astr%2B%3D%22%2C%20wheel%3A%20%22%2Brepr%28this%2Emouse%28%29%2Ewheel%29%3B%0A%7D%0Astr%2B%3D%22%7D%22%3B%0A%7D%0Aif%28this%2Etype%28%29%3D%3D%22mouseover%22%7C%7Cthis%2Etype%28%29%3D%3D%22mouseout%22%7C%7Cthis%2Etype%28%29%3D%3D%22mouseenter%22%7C%7Cthis%2Etype%28%29%3D%3D%22mouseleave%22%29%7B%0Astr%2B%3D%22%2C%20relatedTarget%28%29%3A%20%22%2Brepr%28this%2ErelatedTarget%28%29%29%3B%0A%7D%0Astr%2B%3D%22%7D%22%3B%0Areturn%20str%3B%0A%7D%2CtoString%3Afunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%2Csrc%3Afunction%28%29%7B%0Areturn%20this%2E%5Fsrc%3B%0A%7D%2Cevent%3Afunction%28%29%7B%0Areturn%20this%2E%5Fevent%3B%0A%7D%2Ctype%3Afunction%28%29%7B%0Aif%28this%2E%5Fevent%2Etype%3D%3D%3D%22DOMMouseScroll%22%29%7B%0Areturn%20%22mousewheel%22%3B%0A%7Delse%7B%0Areturn%20this%2E%5Fevent%2Etype%7C%7Cundefined%3B%0A%7D%0A%7D%2Ctarget%3Afunction%28%29%7B%0Areturn%20this%2E%5Fevent%2Etarget%7C%7Cthis%2E%5Fevent%2EsrcElement%3B%0A%7D%2C%5FrelatedTarget%3Anull%2CrelatedTarget%3Afunction%28%29%7B%0Aif%28this%2E%5FrelatedTarget%21%3D%3Dnull%29%7B%0Areturn%20this%2E%5FrelatedTarget%3B%0A%7D%0Avar%20elem%3Dnull%3B%0Aif%28this%2Etype%28%29%3D%3D%22mouseover%22%7C%7Cthis%2Etype%28%29%3D%3D%22mouseenter%22%29%7B%0Aelem%3D%28this%2E%5Fevent%2ErelatedTarget%7C%7Cthis%2E%5Fevent%2EfromElement%29%3B%0A%7Delse%7B%0Aif%28this%2Etype%28%29%3D%3D%22mouseout%22%7C%7Cthis%2Etype%28%29%3D%3D%22mouseleave%22%29%7B%0Aelem%3D%28this%2E%5Fevent%2ErelatedTarget%7C%7Cthis%2E%5Fevent%2EtoElement%29%3B%0A%7D%0A%7D%0Atry%7B%0Aif%28elem%21%3D%3Dnull%26%26elem%2EnodeType%21%3D%3Dnull%29%7B%0Athis%2E%5FrelatedTarget%3Delem%3B%0Areturn%20elem%3B%0A%7D%0A%7D%0Acatch%28ignore%29%7B%0A%7D%0Areturn%20undefined%3B%0A%7D%2C%5Fmodifier%3Anull%2Cmodifier%3Afunction%28%29%7B%0Aif%28this%2E%5Fmodifier%21%3D%3Dnull%29%7B%0Areturn%20this%2E%5Fmodifier%3B%0A%7D%0Avar%20m%3D%7B%7D%3B%0Am%2Ealt%3Dthis%2E%5Fevent%2EaltKey%3B%0Am%2Ectrl%3Dthis%2E%5Fevent%2EctrlKey%3B%0Am%2Emeta%3Dthis%2E%5Fevent%2EmetaKey%7C%7Cfalse%3B%0Am%2Eshift%3Dthis%2E%5Fevent%2EshiftKey%3B%0Am%2Eany%3Dm%2Ealt%7C%7Cm%2Ectrl%7C%7Cm%2Eshift%7C%7Cm%2Emeta%3B%0Athis%2E%5Fmodifier%3Dm%3B%0Areturn%20m%3B%0A%7D%2C%5Fkey%3Anull%2Ckey%3Afunction%28%29%7B%0Aif%28this%2E%5Fkey%21%3D%3Dnull%29%7B%0Areturn%20this%2E%5Fkey%3B%0A%7D%0Avar%20k%3D%7B%7D%3B%0Aif%28this%2Etype%28%29%26%26this%2Etype%28%29%2EindexOf%28%22key%22%29%3D%3D%3D0%29%7B%0Aif%28this%2Etype%28%29%3D%3D%22keydown%22%7C%7Cthis%2Etype%28%29%3D%3D%22keyup%22%29%7B%0Ak%2Ecode%3Dthis%2E%5Fevent%2EkeyCode%3B%0Ak%2Estring%3D%28MochiKit%2ESignal%2E%5FspecialKeys%5Bk%2Ecode%5D%7C%7C%22KEY%5FUNKNOWN%22%29%3B%0Athis%2E%5Fkey%3Dk%3B%0Areturn%20k%3B%0A%7Delse%7B%0Aif%28this%2Etype%28%29%3D%3D%22keypress%22%29%7B%0Ak%2Ecode%3D0%3B%0Ak%2Estring%3D%22%22%3B%0Aif%28typeof%20%28this%2E%5Fevent%2EcharCode%29%21%3D%22undefined%22%26%26this%2E%5Fevent%2EcharCode%21%3D%3D0%26%26%21MochiKit%2ESignal%2E%5FspecialMacKeys%5Bthis%2E%5Fevent%2EcharCode%5D%29%7B%0Ak%2Ecode%3Dthis%2E%5Fevent%2EcharCode%3B%0Ak%2Estring%3DString%2EfromCharCode%28k%2Ecode%29%3B%0A%7Delse%7B%0Aif%28this%2E%5Fevent%2EkeyCode%26%26typeof%20%28this%2E%5Fevent%2EcharCode%29%3D%3D%22undefined%22%29%7B%0Ak%2Ecode%3Dthis%2E%5Fevent%2EkeyCode%3B%0Ak%2Estring%3DString%2EfromCharCode%28k%2Ecode%29%3B%0A%7D%0A%7D%0Athis%2E%5Fkey%3Dk%3B%0Areturn%20k%3B%0A%7D%0A%7D%0A%7D%0Areturn%20undefined%3B%0A%7D%2C%5Fmouse%3Anull%2Cmouse%3Afunction%28%29%7B%0Aif%28this%2E%5Fmouse%21%3D%3Dnull%29%7B%0Areturn%20this%2E%5Fmouse%3B%0A%7D%0Avar%20m%3D%7B%7D%3B%0Avar%20e%3Dthis%2E%5Fevent%3B%0Aif%28this%2Etype%28%29%26%26%28this%2Etype%28%29%2EindexOf%28%22mouse%22%29%3D%3D%3D0%7C%7Cthis%2Etype%28%29%2EindexOf%28%22click%22%29%21%3D%2D1%7C%7Cthis%2Etype%28%29%3D%3D%22contextmenu%22%29%29%7B%0Am%2Eclient%3Dnew%20MochiKit%2EStyle%2ECoordinates%280%2C0%29%3B%0Aif%28e%2EclientX%7C%7Ce%2EclientY%29%7B%0Am%2Eclient%2Ex%3D%28%21e%2EclientX%7C%7Ce%2EclientX%3C0%29%3F0%3Ae%2EclientX%3B%0Am%2Eclient%2Ey%3D%28%21e%2EclientY%7C%7Ce%2EclientY%3C0%29%3F0%3Ae%2EclientY%3B%0A%7D%0Am%2Epage%3Dnew%20MochiKit%2EStyle%2ECoordinates%280%2C0%29%3B%0Aif%28e%2EpageX%7C%7Ce%2EpageY%29%7B%0Am%2Epage%2Ex%3D%28%21e%2EpageX%7C%7Ce%2EpageX%3C0%29%3F0%3Ae%2EpageX%3B%0Am%2Epage%2Ey%3D%28%21e%2EpageY%7C%7Ce%2EpageY%3C0%29%3F0%3Ae%2EpageY%3B%0A%7Delse%7B%0Avar%20de%3DMochiKit%2EDOM%2E%5Fdocument%2EdocumentElement%3B%0Avar%20b%3DMochiKit%2EDOM%2E%5Fdocument%2Ebody%3B%0Am%2Epage%2Ex%3De%2EclientX%2B%28de%2EscrollLeft%7C%7Cb%2EscrollLeft%29%2D%28de%2EclientLeft%7C%7C0%29%3B%0Am%2Epage%2Ey%3De%2EclientY%2B%28de%2EscrollTop%7C%7Cb%2EscrollTop%29%2D%28de%2EclientTop%7C%7C0%29%3B%0A%7D%0Aif%28this%2Etype%28%29%21%3D%22mousemove%22%26%26this%2Etype%28%29%21%3D%22mousewheel%22%29%7B%0Am%2Ebutton%3D%7B%7D%3B%0Am%2Ebutton%2Eleft%3Dfalse%3B%0Am%2Ebutton%2Eright%3Dfalse%3B%0Am%2Ebutton%2Emiddle%3Dfalse%3B%0Aif%28e%2Ewhich%29%7B%0Am%2Ebutton%2Eleft%3D%28e%2Ewhich%3D%3D1%29%3B%0Am%2Ebutton%2Emiddle%3D%28e%2Ewhich%3D%3D2%29%3B%0Am%2Ebutton%2Eright%3D%28e%2Ewhich%3D%3D3%29%3B%0A%7Delse%7B%0Am%2Ebutton%2Eleft%3D%21%21%28e%2Ebutton%261%29%3B%0Am%2Ebutton%2Eright%3D%21%21%28e%2Ebutton%262%29%3B%0Am%2Ebutton%2Emiddle%3D%21%21%28e%2Ebutton%264%29%3B%0A%7D%0A%7D%0Aif%28this%2Etype%28%29%3D%3D%22mousewheel%22%29%7B%0Am%2Ewheel%3Dnew%20MochiKit%2EStyle%2ECoordinates%280%2C0%29%3B%0Aif%28e%2EwheelDeltaX%7C%7Ce%2EwheelDeltaY%29%7B%0Am%2Ewheel%2Ex%3De%2EwheelDeltaX%2F%2D40%7C%7C0%3B%0Am%2Ewheel%2Ey%3De%2EwheelDeltaY%2F%2D40%7C%7C0%3B%0A%7Delse%7B%0Aif%28e%2EwheelDelta%29%7B%0Am%2Ewheel%2Ey%3De%2EwheelDelta%2F%2D40%3B%0A%7Delse%7B%0Am%2Ewheel%2Ey%3De%2Edetail%7C%7C0%3B%0A%7D%0A%7D%0A%7D%0Athis%2E%5Fmouse%3Dm%3B%0Areturn%20m%3B%0A%7D%0Areturn%20undefined%3B%0A%7D%2Cstop%3Afunction%28%29%7B%0Athis%2EstopPropagation%28%29%3B%0Athis%2EpreventDefault%28%29%3B%0A%7D%2CstopPropagation%3Afunction%28%29%7B%0Aif%28this%2E%5Fevent%2EstopPropagation%29%7B%0Athis%2E%5Fevent%2EstopPropagation%28%29%3B%0A%7Delse%7B%0Athis%2E%5Fevent%2EcancelBubble%3Dtrue%3B%0A%7D%0A%7D%2CpreventDefault%3Afunction%28%29%7B%0Aif%28this%2E%5Fevent%2EpreventDefault%29%7B%0Athis%2E%5Fevent%2EpreventDefault%28%29%3B%0A%7Delse%7B%0Aif%28this%2E%5FconfirmUnload%3D%3D%3Dnull%29%7B%0Athis%2E%5Fevent%2EreturnValue%3Dfalse%3B%0A%7D%0A%7D%0A%7D%2C%5FconfirmUnload%3Anull%2CconfirmUnload%3Afunction%28msg%29%7B%0Aif%28this%2Etype%28%29%3D%3D%22beforeunload%22%29%7B%0Athis%2E%5FconfirmUnload%3Dmsg%3B%0Athis%2E%5Fevent%2EreturnValue%3Dmsg%3B%0A%7D%0A%7D%7D%29%3B%0AMochiKit%2ESignal%2E%5FspecialMacKeys%3D%7B3%3A%22KEY%5FENTER%22%2C63289%3A%22KEY%5FNUM%5FPAD%5FCLEAR%22%2C63276%3A%22KEY%5FPAGE%5FUP%22%2C63277%3A%22KEY%5FPAGE%5FDOWN%22%2C63275%3A%22KEY%5FEND%22%2C63273%3A%22KEY%5FHOME%22%2C63234%3A%22KEY%5FARROW%5FLEFT%22%2C63232%3A%22KEY%5FARROW%5FUP%22%2C63235%3A%22KEY%5FARROW%5FRIGHT%22%2C63233%3A%22KEY%5FARROW%5FDOWN%22%2C63302%3A%22KEY%5FINSERT%22%2C63272%3A%22KEY%5FDELETE%22%7D%3B%0A%28function%28%29%7B%0Avar%20%5F561%3DMochiKit%2ESignal%2E%5FspecialMacKeys%3B%0Afor%28i%3D63236%3Bi%3C%3D63242%3Bi%2B%2B%29%7B%0A%5F561%5Bi%5D%3D%22KEY%5FF%22%2B%28i%2D63236%2B1%29%3B%0A%7D%0A%7D%29%28%29%3B%0AMochiKit%2ESignal%2E%5FspecialKeys%3D%7B8%3A%22KEY%5FBACKSPACE%22%2C9%3A%22KEY%5FTAB%22%2C12%3A%22KEY%5FNUM%5FPAD%5FCLEAR%22%2C13%3A%22KEY%5FENTER%22%2C16%3A%22KEY%5FSHIFT%22%2C17%3A%22KEY%5FCTRL%22%2C18%3A%22KEY%5FALT%22%2C19%3A%22KEY%5FPAUSE%22%2C20%3A%22KEY%5FCAPS%5FLOCK%22%2C27%3A%22KEY%5FESCAPE%22%2C32%3A%22KEY%5FSPACEBAR%22%2C33%3A%22KEY%5FPAGE%5FUP%22%2C34%3A%22KEY%5FPAGE%5FDOWN%22%2C35%3A%22KEY%5FEND%22%2C36%3A%22KEY%5FHOME%22%2C37%3A%22KEY%5FARROW%5FLEFT%22%2C38%3A%22KEY%5FARROW%5FUP%22%2C39%3A%22KEY%5FARROW%5FRIGHT%22%2C40%3A%22KEY%5FARROW%5FDOWN%22%2C44%3A%22KEY%5FPRINT%5FSCREEN%22%2C45%3A%22KEY%5FINSERT%22%2C46%3A%22KEY%5FDELETE%22%2C59%3A%22KEY%5FSEMICOLON%22%2C91%3A%22KEY%5FWINDOWS%5FLEFT%22%2C92%3A%22KEY%5FWINDOWS%5FRIGHT%22%2C93%3A%22KEY%5FSELECT%22%2C106%3A%22KEY%5FNUM%5FPAD%5FASTERISK%22%2C107%3A%22KEY%5FNUM%5FPAD%5FPLUS%5FSIGN%22%2C109%3A%22KEY%5FNUM%5FPAD%5FHYPHEN%2DMINUS%22%2C110%3A%22KEY%5FNUM%5FPAD%5FFULL%5FSTOP%22%2C111%3A%22KEY%5FNUM%5FPAD%5FSOLIDUS%22%2C144%3A%22KEY%5FNUM%5FLOCK%22%2C145%3A%22KEY%5FSCROLL%5FLOCK%22%2C186%3A%22KEY%5FSEMICOLON%22%2C187%3A%22KEY%5FEQUALS%5FSIGN%22%2C188%3A%22KEY%5FCOMMA%22%2C189%3A%22KEY%5FHYPHEN%2DMINUS%22%2C190%3A%22KEY%5FFULL%5FSTOP%22%2C191%3A%22KEY%5FSOLIDUS%22%2C192%3A%22KEY%5FGRAVE%5FACCENT%22%2C219%3A%22KEY%5FLEFT%5FSQUARE%5FBRACKET%22%2C220%3A%22KEY%5FREVERSE%5FSOLIDUS%22%2C221%3A%22KEY%5FRIGHT%5FSQUARE%5FBRACKET%22%2C222%3A%22KEY%5FAPOSTROPHE%22%7D%3B%0A%28function%28%29%7B%0Avar%20%5F562%3DMochiKit%2ESignal%2E%5FspecialKeys%3B%0Afor%28var%20i%3D48%3Bi%3C%3D57%3Bi%2B%2B%29%7B%0A%5F562%5Bi%5D%3D%22KEY%5F%22%2B%28i%2D48%29%3B%0A%7D%0Afor%28i%3D65%3Bi%3C%3D90%3Bi%2B%2B%29%7B%0A%5F562%5Bi%5D%3D%22KEY%5F%22%2BString%2EfromCharCode%28i%29%3B%0A%7D%0Afor%28i%3D96%3Bi%3C%3D105%3Bi%2B%2B%29%7B%0A%5F562%5Bi%5D%3D%22KEY%5FNUM%5FPAD%5F%22%2B%28i%2D96%29%3B%0A%7D%0Afor%28i%3D112%3Bi%3C%3D123%3Bi%2B%2B%29%7B%0A%5F562%5Bi%5D%3D%22KEY%5FF%22%2B%28i%2D112%2B1%29%3B%0A%7D%0A%7D%29%28%29%3B%0AMochiKit%2ESignal%2EIdent%3Dfunction%28%5F564%29%7B%0Athis%2Esource%3D%5F564%2Esource%3B%0Athis%2Esignal%3D%5F564%2Esignal%3B%0Athis%2Elistener%3D%5F564%2Elistener%3B%0Athis%2EisDOM%3D%5F564%2EisDOM%3B%0Athis%2EobjOrFunc%3D%5F564%2EobjOrFunc%3B%0Athis%2EfuncOrStr%3D%5F564%2EfuncOrStr%3B%0Athis%2Econnected%3D%5F564%2Econnected%3B%0A%7D%3B%0AMochiKit%2ESignal%2EIdent%2Eprototype%3D%7B%7D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2ESignal%2C%7B%5F%5Frepr%5F%5F%3Afunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%2CtoString%3Afunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%2C%5FunloadCache%3Afunction%28%29%7B%0Avar%20self%3DMochiKit%2ESignal%3B%0Avar%20%5F566%3Dself%2E%5Fobservers%3B%0Afor%28var%20i%3D0%3Bi%3C%5F566%2Elength%3Bi%2B%2B%29%7B%0Aif%28%5F566%5Bi%5D%2Esignal%21%3D%3D%22onload%22%26%26%5F566%5Bi%5D%2Esignal%21%3D%3D%22onunload%22%29%7B%0Aself%2E%5Fdisconnect%28%5F566%5Bi%5D%29%3B%0A%7D%0A%7D%0A%7D%2C%5Flistener%3Afunction%28src%2Csig%2Cfunc%2Cobj%2C%5F56c%29%7B%0Avar%20self%3DMochiKit%2ESignal%3B%0Avar%20E%3Dself%2EEvent%3B%0Aif%28%21%5F56c%29%7B%0Aif%28typeof%20%28func%2Eim%5Fself%29%3D%3D%22undefined%22%29%7B%0Areturn%20MochiKit%2EBase%2EbindLate%28func%2Cobj%29%3B%0A%7Delse%7B%0Areturn%20func%3B%0A%7D%0A%7D%0Aobj%3Dobj%7C%7Csrc%3B%0Aif%28typeof%20%28func%29%3D%3D%22string%22%29%7B%0Aif%28sig%3D%3D%3D%22onload%22%7C%7Csig%3D%3D%3D%22onunload%22%29%7B%0Areturn%20function%28%5F56f%29%7B%0Aobj%5Bfunc%5D%2Eapply%28obj%2C%5Bnew%20E%28src%2C%5F56f%29%5D%29%3B%0Avar%20%5F570%3Dnew%20MochiKit%2ESignal%2EIdent%28%7Bsource%3Asrc%2Csignal%3Asig%2CobjOrFunc%3Aobj%2CfuncOrStr%3Afunc%7D%29%3B%0AMochiKit%2ESignal%2E%5Fdisconnect%28%5F570%29%3B%0A%7D%3B%0A%7Delse%7B%0Areturn%20function%28%5F571%29%7B%0Aobj%5Bfunc%5D%2Eapply%28obj%2C%5Bnew%20E%28src%2C%5F571%29%5D%29%3B%0A%7D%3B%0A%7D%0A%7Delse%7B%0Aif%28sig%3D%3D%3D%22onload%22%7C%7Csig%3D%3D%3D%22onunload%22%29%7B%0Areturn%20function%28%5F572%29%7B%0Afunc%2Eapply%28obj%2C%5Bnew%20E%28src%2C%5F572%29%5D%29%3B%0Avar%20%5F573%3Dnew%20MochiKit%2ESignal%2EIdent%28%7Bsource%3Asrc%2Csignal%3Asig%2CobjOrFunc%3Afunc%7D%29%3B%0AMochiKit%2ESignal%2E%5Fdisconnect%28%5F573%29%3B%0A%7D%3B%0A%7Delse%7B%0Areturn%20function%28%5F574%29%7B%0Afunc%2Eapply%28obj%2C%5Bnew%20E%28src%2C%5F574%29%5D%29%3B%0A%7D%3B%0A%7D%0A%7D%0A%7D%2C%5FbrowserAlreadyHasMouseEnterAndLeave%3Afunction%28%29%7B%0Areturn%20%2FMSIE%2F%2Etest%28navigator%2EuserAgent%29%3B%0A%7D%2C%5FbrowserLacksMouseWheelEvent%3Afunction%28%29%7B%0Areturn%20%2FGecko%5C%2F%2F%2Etest%28navigator%2EuserAgent%29%3B%0A%7D%2C%5FmouseEnterListener%3Afunction%28src%2Csig%2Cfunc%2Cobj%29%7B%0Avar%20E%3DMochiKit%2ESignal%2EEvent%3B%0Areturn%20function%28%5F57a%29%7B%0Avar%20e%3Dnew%20E%28src%2C%5F57a%29%3B%0Atry%7B%0Ae%2ErelatedTarget%28%29%2EnodeName%3B%0A%7D%0Acatch%28err%29%7B%0Areturn%3B%0A%7D%0Ae%2Estop%28%29%3B%0Aif%28MochiKit%2EDOM%2EisChildNode%28e%2ErelatedTarget%28%29%2Csrc%29%29%7B%0Areturn%3B%0A%7D%0Ae%2Etype%3Dfunction%28%29%7B%0Areturn%20sig%3B%0A%7D%3B%0Aif%28typeof%20%28func%29%3D%3D%22string%22%29%7B%0Areturn%20obj%5Bfunc%5D%2Eapply%28obj%2C%5Be%5D%29%3B%0A%7Delse%7B%0Areturn%20func%2Eapply%28obj%2C%5Be%5D%29%3B%0A%7D%0A%7D%3B%0A%7D%2C%5FgetDestPair%3Afunction%28%5F57c%2C%5F57d%29%7B%0Avar%20obj%3Dnull%3B%0Avar%20func%3Dnull%3B%0Aif%28typeof%20%28%5F57d%29%21%3D%22undefined%22%29%7B%0Aobj%3D%5F57c%3B%0Afunc%3D%5F57d%3B%0Aif%28typeof%20%28%5F57d%29%3D%3D%22string%22%29%7B%0Aif%28typeof%20%28%5F57c%5B%5F57d%5D%29%21%3D%22function%22%29%7B%0Athrow%20new%20Error%28%22%27funcOrStr%27%20must%20be%20a%20function%20on%20%27objOrFunc%27%22%29%3B%0A%7D%0A%7Delse%7B%0Aif%28typeof%20%28%5F57d%29%21%3D%22function%22%29%7B%0Athrow%20new%20Error%28%22%27funcOrStr%27%20must%20be%20a%20function%20or%20string%22%29%3B%0A%7D%0A%7D%0A%7Delse%7B%0Aif%28typeof%20%28%5F57c%29%21%3D%22function%22%29%7B%0Athrow%20new%20Error%28%22%27objOrFunc%27%20must%20be%20a%20function%20if%20%27funcOrStr%27%20is%20not%20given%22%29%3B%0A%7Delse%7B%0Afunc%3D%5F57c%3B%0A%7D%0A%7D%0Areturn%20%5Bobj%2Cfunc%5D%3B%0A%7D%2Cconnect%3Afunction%28src%2Csig%2C%5F582%2C%5F583%29%7B%0Asrc%3DMochiKit%2EDOM%2EgetElement%28src%29%3B%0Avar%20self%3DMochiKit%2ESignal%3B%0Aif%28typeof%20%28sig%29%21%3D%22string%22%29%7B%0Athrow%20new%20Error%28%22%27sig%27%20must%20be%20a%20string%22%29%3B%0A%7D%0Avar%20%5F585%3Dself%2E%5FgetDestPair%28%5F582%2C%5F583%29%3B%0Avar%20obj%3D%5F585%5B0%5D%3B%0Avar%20func%3D%5F585%5B1%5D%3B%0Aif%28typeof%20%28obj%29%3D%3D%22undefined%22%7C%7Cobj%3D%3D%3Dnull%29%7B%0Aobj%3Dsrc%3B%0A%7D%0Avar%20%5F588%3D%21%21%28src%2EaddEventListener%7C%7Csrc%2EattachEvent%29%3B%0Aif%28%5F588%26%26%28sig%3D%3D%3D%22onmouseenter%22%7C%7Csig%3D%3D%3D%22onmouseleave%22%29%26%26%21self%2E%5FbrowserAlreadyHasMouseEnterAndLeave%28%29%29%7B%0Avar%20%5F589%3Dself%2E%5FmouseEnterListener%28src%2Csig%2Esubstr%282%29%2Cfunc%2Cobj%29%3B%0Aif%28sig%3D%3D%3D%22onmouseenter%22%29%7B%0Asig%3D%22onmouseover%22%3B%0A%7Delse%7B%0Asig%3D%22onmouseout%22%3B%0A%7D%0A%7Delse%7B%0Aif%28%5F588%26%26sig%3D%3D%22onmousewheel%22%26%26self%2E%5FbrowserLacksMouseWheelEvent%28%29%29%7B%0Avar%20%5F589%3Dself%2E%5Flistener%28src%2Csig%2Cfunc%2Cobj%2C%5F588%29%3B%0Asig%3D%22onDOMMouseScroll%22%3B%0A%7Delse%7B%0Avar%20%5F589%3Dself%2E%5Flistener%28src%2Csig%2Cfunc%2Cobj%2C%5F588%29%3B%0A%7D%0A%7D%0Aif%28src%2EaddEventListener%29%7B%0Asrc%2EaddEventListener%28sig%2Esubstr%282%29%2C%5F589%2Cfalse%29%3B%0A%7Delse%7B%0Aif%28src%2EattachEvent%29%7B%0Asrc%2EattachEvent%28sig%2C%5F589%29%3B%0A%7D%0A%7D%0Avar%20%5F58a%3Dnew%20MochiKit%2ESignal%2EIdent%28%7Bsource%3Asrc%2Csignal%3Asig%2Clistener%3A%5F589%2CisDOM%3A%5F588%2CobjOrFunc%3A%5F582%2CfuncOrStr%3A%5F583%2Cconnected%3Atrue%7D%29%3B%0Aself%2E%5Fobservers%2Epush%28%5F58a%29%3B%0Aif%28%21%5F588%26%26typeof%20%28src%2E%5F%5Fconnect%5F%5F%29%3D%3D%22function%22%29%7B%0Avar%20args%3DMochiKit%2EBase%2Eextend%28%5B%5F58a%5D%2Carguments%2C1%29%3B%0Asrc%2E%5F%5Fconnect%5F%5F%2Eapply%28src%2Cargs%29%3B%0A%7D%0Areturn%20%5F58a%3B%0A%7D%2C%5Fdisconnect%3Afunction%28%5F58c%29%7B%0Aif%28%21%5F58c%2Econnected%29%7B%0Areturn%3B%0A%7D%0A%5F58c%2Econnected%3Dfalse%3B%0Avar%20src%3D%5F58c%2Esource%3B%0Avar%20sig%3D%5F58c%2Esignal%3B%0Avar%20%5F58f%3D%5F58c%2Elistener%3B%0Aif%28%21%5F58c%2EisDOM%29%7B%0Aif%28typeof%20%28src%2E%5F%5Fdisconnect%5F%5F%29%3D%3D%22function%22%29%7B%0Asrc%2E%5F%5Fdisconnect%5F%5F%28%5F58c%2Csig%2C%5F58c%2EobjOrFunc%2C%5F58c%2EfuncOrStr%29%3B%0A%7D%0Areturn%3B%0A%7D%0Aif%28src%2EremoveEventListener%29%7B%0Asrc%2EremoveEventListener%28sig%2Esubstr%282%29%2C%5F58f%2Cfalse%29%3B%0A%7Delse%7B%0Aif%28src%2EdetachEvent%29%7B%0Asrc%2EdetachEvent%28sig%2C%5F58f%29%3B%0A%7Delse%7B%0Athrow%20new%20Error%28%22%27src%27%20must%20be%20a%20DOM%20element%22%29%3B%0A%7D%0A%7D%0A%7D%2Cdisconnect%3Afunction%28%5F590%29%7B%0Avar%20self%3DMochiKit%2ESignal%3B%0Avar%20%5F592%3Dself%2E%5Fobservers%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Aif%28arguments%2Elength%3E1%29%7B%0Avar%20src%3DMochiKit%2EDOM%2EgetElement%28arguments%5B0%5D%29%3B%0Avar%20sig%3Darguments%5B1%5D%3B%0Avar%20obj%3Darguments%5B2%5D%3B%0Avar%20func%3Darguments%5B3%5D%3B%0Afor%28var%20i%3D%5F592%2Elength%2D1%3Bi%3E%3D0%3Bi%2D%2D%29%7B%0Avar%20o%3D%5F592%5Bi%5D%3B%0Aif%28o%2Esource%3D%3D%3Dsrc%26%26o%2Esignal%3D%3D%3Dsig%26%26o%2EobjOrFunc%3D%3D%3Dobj%26%26o%2EfuncOrStr%3D%3D%3Dfunc%29%7B%0Aself%2E%5Fdisconnect%28o%29%3B%0Aif%28%21self%2E%5Flock%29%7B%0A%5F592%2Esplice%28i%2C1%29%3B%0A%7Delse%7B%0Aself%2E%5Fdirty%3Dtrue%3B%0A%7D%0Areturn%20true%3B%0A%7D%0A%7D%0A%7Delse%7B%0Avar%20idx%3Dm%2EfindIdentical%28%5F592%2C%5F590%29%3B%0Aif%28idx%3E%3D0%29%7B%0Aself%2E%5Fdisconnect%28%5F590%29%3B%0Aif%28%21self%2E%5Flock%29%7B%0A%5F592%2Esplice%28idx%2C1%29%3B%0A%7Delse%7B%0Aself%2E%5Fdirty%3Dtrue%3B%0A%7D%0Areturn%20true%3B%0A%7D%0A%7D%0Areturn%20false%3B%0A%7D%2CdisconnectAllTo%3Afunction%28%5F59b%2C%5F59c%29%7B%0Avar%20self%3DMochiKit%2ESignal%3B%0Avar%20%5F59e%3Dself%2E%5Fobservers%3B%0Avar%20%5F59f%3Dself%2E%5Fdisconnect%3B%0Avar%20%5F5a0%3Dself%2E%5Flock%3B%0Avar%20%5F5a1%3Dself%2E%5Fdirty%3B%0Aif%28typeof%20%28%5F59c%29%3D%3D%3D%22undefined%22%29%7B%0A%5F59c%3Dnull%3B%0A%7D%0Afor%28var%20i%3D%5F59e%2Elength%2D1%3Bi%3E%3D0%3Bi%2D%2D%29%7B%0Avar%20%5F5a3%3D%5F59e%5Bi%5D%3B%0Aif%28%5F5a3%2EobjOrFunc%3D%3D%3D%5F59b%26%26%28%5F59c%3D%3D%3Dnull%7C%7C%5F5a3%2EfuncOrStr%3D%3D%3D%5F59c%29%29%7B%0A%5F59f%28%5F5a3%29%3B%0Aif%28%5F5a0%29%7B%0A%5F5a1%3Dtrue%3B%0A%7Delse%7B%0A%5F59e%2Esplice%28i%2C1%29%3B%0A%7D%0A%7D%0A%7D%0Aself%2E%5Fdirty%3D%5F5a1%3B%0A%7D%2CdisconnectAll%3Afunction%28src%2Csig%29%7B%0Asrc%3DMochiKit%2EDOM%2EgetElement%28src%29%3B%0Avar%20m%3DMochiKit%2EBase%3B%0Avar%20%5F5a7%3Dm%2EflattenArguments%28m%2Eextend%28null%2Carguments%2C1%29%29%3B%0Avar%20self%3DMochiKit%2ESignal%3B%0Avar%20%5F5a9%3Dself%2E%5Fdisconnect%3B%0Avar%20%5F5aa%3Dself%2E%5Fobservers%3B%0Avar%20i%2C%5F5ac%3B%0Avar%20%5F5ad%3Dself%2E%5Flock%3B%0Avar%20%5F5ae%3Dself%2E%5Fdirty%3B%0Aif%28%5F5a7%2Elength%3D%3D%3D0%29%7B%0Afor%28i%3D%5F5aa%2Elength%2D1%3Bi%3E%3D0%3Bi%2D%2D%29%7B%0A%5F5ac%3D%5F5aa%5Bi%5D%3B%0Aif%28%5F5ac%2Esource%3D%3D%3Dsrc%29%7B%0A%5F5a9%28%5F5ac%29%3B%0Aif%28%21%5F5ad%29%7B%0A%5F5aa%2Esplice%28i%2C1%29%3B%0A%7Delse%7B%0A%5F5ae%3Dtrue%3B%0A%7D%0A%7D%0A%7D%0A%7Delse%7B%0Avar%20sigs%3D%7B%7D%3B%0Afor%28i%3D0%3Bi%3C%5F5a7%2Elength%3Bi%2B%2B%29%7B%0Asigs%5B%5F5a7%5Bi%5D%5D%3Dtrue%3B%0A%7D%0Afor%28i%3D%5F5aa%2Elength%2D1%3Bi%3E%3D0%3Bi%2D%2D%29%7B%0A%5F5ac%3D%5F5aa%5Bi%5D%3B%0Aif%28%5F5ac%2Esource%3D%3D%3Dsrc%26%26%5F5ac%2Esignal%20in%20sigs%29%7B%0A%5F5a9%28%5F5ac%29%3B%0Aif%28%21%5F5ad%29%7B%0A%5F5aa%2Esplice%28i%2C1%29%3B%0A%7Delse%7B%0A%5F5ae%3Dtrue%3B%0A%7D%0A%7D%0A%7D%0A%7D%0Aself%2E%5Fdirty%3D%5F5ae%3B%0A%7D%2Csignal%3Afunction%28src%2Csig%29%7B%0Avar%20self%3DMochiKit%2ESignal%3B%0Avar%20%5F5b3%3Dself%2E%5Fobservers%3B%0Asrc%3DMochiKit%2EDOM%2EgetElement%28src%29%3B%0Avar%20args%3DMochiKit%2EBase%2Eextend%28null%2Carguments%2C2%29%3B%0Avar%20%5F5b5%3D%5B%5D%3B%0Aself%2E%5Flock%3Dtrue%3B%0Afor%28var%20i%3D0%3Bi%3C%5F5b3%2Elength%3Bi%2B%2B%29%7B%0Avar%20%5F5b7%3D%5F5b3%5Bi%5D%3B%0Aif%28%5F5b7%2Esource%3D%3D%3Dsrc%26%26%5F5b7%2Esignal%3D%3D%3Dsig%26%26%5F5b7%2Econnected%29%7B%0Atry%7B%0A%5F5b7%2Elistener%2Eapply%28src%2Cargs%29%3B%0A%7D%0Acatch%28e%29%7B%0A%5F5b5%2Epush%28e%29%3B%0A%7D%0A%7D%0A%7D%0Aself%2E%5Flock%3Dfalse%3B%0Aif%28self%2E%5Fdirty%29%7B%0Aself%2E%5Fdirty%3Dfalse%3B%0Afor%28var%20i%3D%5F5b3%2Elength%2D1%3Bi%3E%3D0%3Bi%2D%2D%29%7B%0Aif%28%21%5F5b3%5Bi%5D%2Econnected%29%7B%0A%5F5b3%2Esplice%28i%2C1%29%3B%0A%7D%0A%7D%0A%7D%0Aif%28%5F5b5%2Elength%3D%3D1%29%7B%0Athrow%20%5F5b5%5B0%5D%3B%0A%7Delse%7B%0Aif%28%5F5b5%2Elength%3E1%29%7B%0Avar%20e%3Dnew%20Error%28%22Multiple%20errors%20thrown%20in%20handling%20%27sig%27%2C%20see%20errors%20property%22%29%3B%0Ae%2Eerrors%3D%5F5b5%3B%0Athrow%20e%3B%0A%7D%0A%7D%0A%7D%7D%29%3B%0AMochiKit%2ESignal%2EEXPORT%5FOK%3D%5B%5D%3B%0AMochiKit%2ESignal%2EEXPORT%3D%5B%22connect%22%2C%22disconnect%22%2C%22signal%22%2C%22disconnectAll%22%2C%22disconnectAllTo%22%5D%3B%0AMochiKit%2ESignal%2E%5F%5Fnew%5F%5F%3Dfunction%28win%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Athis%2E%5Fdocument%3Ddocument%3B%0Athis%2E%5Fwindow%3Dwin%3B%0Athis%2E%5Flock%3Dfalse%3B%0Athis%2E%5Fdirty%3Dfalse%3B%0Atry%7B%0Athis%2Econnect%28window%2C%22onunload%22%2Cthis%2E%5FunloadCache%29%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3Am%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0Am%2EnameFunctions%28this%29%3B%0A%7D%3B%0AMochiKit%2ESignal%2E%5F%5Fnew%5F%5F%28this%29%3B%0Aif%28MochiKit%2E%5F%5Fexport%5F%5F%29%7B%0Aconnect%3DMochiKit%2ESignal%2Econnect%3B%0Adisconnect%3DMochiKit%2ESignal%2Edisconnect%3B%0AdisconnectAll%3DMochiKit%2ESignal%2EdisconnectAll%3B%0Asignal%3DMochiKit%2ESignal%2Esignal%3B%0A%7D%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2ESignal%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22Position%22%2C%5B%22Base%22%2C%22DOM%22%2C%22Style%22%5D%29%3B%0AMochiKit%2EPosition%2ENAME%3D%22MochiKit%2EPosition%22%3B%0AMochiKit%2EPosition%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EPosition%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2EPosition%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EPosition%2EEXPORT%5FOK%3D%5B%5D%3B%0AMochiKit%2EPosition%2EEXPORT%3D%5B%5D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EPosition%2C%7BincludeScrollOffsets%3Afalse%2Cprepare%3Afunction%28%29%7B%0Avar%20%5F5bb%3Dwindow%2EpageXOffset%7C%7Cdocument%2EdocumentElement%2EscrollLeft%7C%7Cdocument%2Ebody%2EscrollLeft%7C%7C0%3B%0Avar%20%5F5bc%3Dwindow%2EpageYOffset%7C%7Cdocument%2EdocumentElement%2EscrollTop%7C%7Cdocument%2Ebody%2EscrollTop%7C%7C0%3B%0Athis%2EwindowOffset%3Dnew%20MochiKit%2EStyle%2ECoordinates%28%5F5bb%2C%5F5bc%29%3B%0A%7D%2CcumulativeOffset%3Afunction%28%5F5bd%29%7B%0Avar%20%5F5be%3D0%3B%0Avar%20%5F5bf%3D0%3B%0Ado%7B%0A%5F5be%2B%3D%5F5bd%2EoffsetTop%7C%7C0%3B%0A%5F5bf%2B%3D%5F5bd%2EoffsetLeft%7C%7C0%3B%0A%5F5bd%3D%5F5bd%2EoffsetParent%3B%0A%7Dwhile%28%5F5bd%29%3B%0Areturn%20new%20MochiKit%2EStyle%2ECoordinates%28%5F5bf%2C%5F5be%29%3B%0A%7D%2CrealOffset%3Afunction%28%5F5c0%29%7B%0Avar%20%5F5c1%3D0%3B%0Avar%20%5F5c2%3D0%3B%0Ado%7B%0A%5F5c1%2B%3D%5F5c0%2EscrollTop%7C%7C0%3B%0A%5F5c2%2B%3D%5F5c0%2EscrollLeft%7C%7C0%3B%0A%5F5c0%3D%5F5c0%2EparentNode%3B%0A%7Dwhile%28%5F5c0%29%3B%0Areturn%20new%20MochiKit%2EStyle%2ECoordinates%28%5F5c2%2C%5F5c1%29%3B%0A%7D%2Cwithin%3Afunction%28%5F5c3%2Cx%2Cy%29%7B%0Aif%28this%2EincludeScrollOffsets%29%7B%0Areturn%20this%2EwithinIncludingScrolloffsets%28%5F5c3%2Cx%2Cy%29%3B%0A%7D%0Athis%2Excomp%3Dx%3B%0Athis%2Eycomp%3Dy%3B%0Athis%2Eoffset%3Dthis%2EcumulativeOffset%28%5F5c3%29%3B%0Aif%28%5F5c3%2Estyle%2Eposition%3D%3D%22fixed%22%29%7B%0Athis%2Eoffset%2Ex%2B%3Dthis%2EwindowOffset%2Ex%3B%0Athis%2Eoffset%2Ey%2B%3Dthis%2EwindowOffset%2Ey%3B%0A%7D%0Areturn%20%28y%3E%3Dthis%2Eoffset%2Ey%26%26y%3Cthis%2Eoffset%2Ey%2B%5F5c3%2EoffsetHeight%26%26x%3E%3Dthis%2Eoffset%2Ex%26%26x%3Cthis%2Eoffset%2Ex%2B%5F5c3%2EoffsetWidth%29%3B%0A%7D%2CwithinIncludingScrolloffsets%3Afunction%28%5F5c6%2Cx%2Cy%29%7B%0Avar%20%5F5c9%3Dthis%2ErealOffset%28%5F5c6%29%3B%0Athis%2Excomp%3Dx%2B%5F5c9%2Ex%2Dthis%2EwindowOffset%2Ex%3B%0Athis%2Eycomp%3Dy%2B%5F5c9%2Ey%2Dthis%2EwindowOffset%2Ey%3B%0Athis%2Eoffset%3Dthis%2EcumulativeOffset%28%5F5c6%29%3B%0Areturn%20%28this%2Eycomp%3E%3Dthis%2Eoffset%2Ey%26%26this%2Eycomp%3Cthis%2Eoffset%2Ey%2B%5F5c6%2EoffsetHeight%26%26this%2Excomp%3E%3Dthis%2Eoffset%2Ex%26%26this%2Excomp%3Cthis%2Eoffset%2Ex%2B%5F5c6%2EoffsetWidth%29%3B%0A%7D%2Coverlap%3Afunction%28mode%2C%5F5cb%29%7B%0Aif%28%21mode%29%7B%0Areturn%200%3B%0A%7D%0Aif%28mode%3D%3D%22vertical%22%29%7B%0Areturn%20%28%28this%2Eoffset%2Ey%2B%5F5cb%2EoffsetHeight%29%2Dthis%2Eycomp%29%2F%5F5cb%2EoffsetHeight%3B%0A%7D%0Aif%28mode%3D%3D%22horizontal%22%29%7B%0Areturn%20%28%28this%2Eoffset%2Ex%2B%5F5cb%2EoffsetWidth%29%2Dthis%2Excomp%29%2F%5F5cb%2EoffsetWidth%3B%0A%7D%0A%7D%2Cabsolutize%3Afunction%28%5F5cc%29%7B%0A%5F5cc%3DMochiKit%2EDOM%2EgetElement%28%5F5cc%29%3B%0Aif%28%5F5cc%2Estyle%2Eposition%3D%3D%22absolute%22%29%7B%0Areturn%3B%0A%7D%0AMochiKit%2EPosition%2Eprepare%28%29%3B%0Avar%20%5F5cd%3DMochiKit%2EPosition%2EpositionedOffset%28%5F5cc%29%3B%0Avar%20%5F5ce%3D%5F5cc%2EclientWidth%3B%0Avar%20%5F5cf%3D%5F5cc%2EclientHeight%3B%0Avar%20%5F5d0%3D%7B%22position%22%3A%5F5cc%2Estyle%2Eposition%2C%22left%22%3A%5F5cd%2Ex%2DparseFloat%28%5F5cc%2Estyle%2Eleft%7C%7C0%29%2C%22top%22%3A%5F5cd%2Ey%2DparseFloat%28%5F5cc%2Estyle%2Etop%7C%7C0%29%2C%22width%22%3A%5F5cc%2Estyle%2Ewidth%2C%22height%22%3A%5F5cc%2Estyle%2Eheight%7D%3B%0A%5F5cc%2Estyle%2Eposition%3D%22absolute%22%3B%0A%5F5cc%2Estyle%2Etop%3D%5F5cd%2Ey%2B%22px%22%3B%0A%5F5cc%2Estyle%2Eleft%3D%5F5cd%2Ex%2B%22px%22%3B%0A%5F5cc%2Estyle%2Ewidth%3D%5F5ce%2B%22px%22%3B%0A%5F5cc%2Estyle%2Eheight%3D%5F5cf%2B%22px%22%3B%0Areturn%20%5F5d0%3B%0A%7D%2CpositionedOffset%3Afunction%28%5F5d1%29%7B%0Avar%20%5F5d2%3D0%2C%5F5d3%3D0%3B%0Ado%7B%0A%5F5d2%2B%3D%5F5d1%2EoffsetTop%7C%7C0%3B%0A%5F5d3%2B%3D%5F5d1%2EoffsetLeft%7C%7C0%3B%0A%5F5d1%3D%5F5d1%2EoffsetParent%3B%0Aif%28%5F5d1%29%7B%0Ap%3DMochiKit%2EStyle%2EgetStyle%28%5F5d1%2C%22position%22%29%3B%0Aif%28p%3D%3D%22relative%22%7C%7Cp%3D%3D%22absolute%22%29%7B%0Abreak%3B%0A%7D%0A%7D%0A%7Dwhile%28%5F5d1%29%3B%0Areturn%20new%20MochiKit%2EStyle%2ECoordinates%28%5F5d3%2C%5F5d2%29%3B%0A%7D%2Crelativize%3Afunction%28%5F5d4%2C%5F5d5%29%7B%0A%5F5d4%3DMochiKit%2EDOM%2EgetElement%28%5F5d4%29%3B%0Aif%28%5F5d4%2Estyle%2Eposition%3D%3D%22relative%22%29%7B%0Areturn%3B%0A%7D%0AMochiKit%2EPosition%2Eprepare%28%29%3B%0Avar%20top%3DparseFloat%28%5F5d4%2Estyle%2Etop%7C%7C0%29%2D%28%5F5d5%5B%22top%22%5D%7C%7C0%29%3B%0Avar%20left%3DparseFloat%28%5F5d4%2Estyle%2Eleft%7C%7C0%29%2D%28%5F5d5%5B%22left%22%5D%7C%7C0%29%3B%0A%5F5d4%2Estyle%2Eposition%3D%5F5d5%5B%22position%22%5D%3B%0A%5F5d4%2Estyle%2Etop%3Dtop%2B%22px%22%3B%0A%5F5d4%2Estyle%2Eleft%3Dleft%2B%22px%22%3B%0A%5F5d4%2Estyle%2Ewidth%3D%5F5d5%5B%22width%22%5D%3B%0A%5F5d4%2Estyle%2Eheight%3D%5F5d5%5B%22height%22%5D%3B%0A%7D%2Cclone%3Afunction%28%5F5d8%2C%5F5d9%29%7B%0A%5F5d8%3DMochiKit%2EDOM%2EgetElement%28%5F5d8%29%3B%0A%5F5d9%3DMochiKit%2EDOM%2EgetElement%28%5F5d9%29%3B%0A%5F5d9%2Estyle%2Eposition%3D%22absolute%22%3B%0Avar%20%5F5da%3Dthis%2EcumulativeOffset%28%5F5d8%29%3B%0A%5F5d9%2Estyle%2Etop%3D%5F5da%2Ey%2B%22px%22%3B%0A%5F5d9%2Estyle%2Eleft%3D%5F5da%2Ex%2B%22px%22%3B%0A%5F5d9%2Estyle%2Ewidth%3D%5F5d8%2EoffsetWidth%2B%22px%22%3B%0A%5F5d9%2Estyle%2Eheight%3D%5F5d8%2EoffsetHeight%2B%22px%22%3B%0A%7D%2Cpage%3Afunction%28%5F5db%29%7B%0Avar%20%5F5dc%3D0%3B%0Avar%20%5F5dd%3D0%3B%0Avar%20%5F5de%3D%5F5db%3B%0Ado%7B%0A%5F5dc%2B%3D%5F5de%2EoffsetTop%7C%7C0%3B%0A%5F5dd%2B%3D%5F5de%2EoffsetLeft%7C%7C0%3B%0Aif%28%5F5de%2EoffsetParent%3D%3Ddocument%2Ebody%26%26MochiKit%2EStyle%2EgetStyle%28%5F5de%2C%22position%22%29%3D%3D%22absolute%22%29%7B%0Abreak%3B%0A%7D%0A%7Dwhile%28%5F5de%3D%5F5de%2EoffsetParent%29%3B%0A%5F5de%3D%5F5db%3B%0Ado%7B%0A%5F5dc%2D%3D%5F5de%2EscrollTop%7C%7C0%3B%0A%5F5dd%2D%3D%5F5de%2EscrollLeft%7C%7C0%3B%0A%7Dwhile%28%5F5de%3D%5F5de%2EparentNode%29%3B%0Areturn%20new%20MochiKit%2EStyle%2ECoordinates%28%5F5dd%2C%5F5dc%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EPosition%2E%5F%5Fnew%5F%5F%3Dfunction%28win%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3Am%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0Am%2EnameFunctions%28this%29%3B%0A%7D%3B%0AMochiKit%2EPosition%2E%5F%5Fnew%5F%5F%28this%29%3B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2EPosition%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22Visual%22%2C%5B%22Base%22%2C%22DOM%22%2C%22Style%22%2C%22Color%22%2C%22Position%22%5D%29%3B%0AMochiKit%2EVisual%2ENAME%3D%22MochiKit%2EVisual%22%3B%0AMochiKit%2EVisual%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EVisual%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2EVisual%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2E%5FRoundCorners%3Dfunction%28e%2C%5F5e2%29%7B%0Ae%3DMochiKit%2EDOM%2EgetElement%28e%29%3B%0Athis%2E%5FsetOptions%28%5F5e2%29%3B%0Aif%28this%2Eoptions%2E%5F%5Funstable%5F%5FwrapElement%29%7B%0Ae%3Dthis%2E%5FdoWrap%28e%29%3B%0A%7D%0Avar%20%5F5e3%3Dthis%2Eoptions%2Ecolor%3B%0Avar%20C%3DMochiKit%2EColor%2EColor%3B%0Aif%28this%2Eoptions%2Ecolor%3D%3D%3D%22fromElement%22%29%7B%0A%5F5e3%3DC%2EfromBackground%28e%29%3B%0A%7Delse%7B%0Aif%28%21%28%5F5e3%20instanceof%20C%29%29%7B%0A%5F5e3%3DC%2EfromString%28%5F5e3%29%3B%0A%7D%0A%7D%0Athis%2EisTransparent%3D%28%5F5e3%2EasRGB%28%29%2Ea%3C%3D0%29%3B%0Avar%20%5F5e5%3Dthis%2Eoptions%2EbgColor%3B%0Aif%28this%2Eoptions%2EbgColor%3D%3D%3D%22fromParent%22%29%7B%0A%5F5e5%3DC%2EfromBackground%28e%2EoffsetParent%29%3B%0A%7Delse%7B%0Aif%28%21%28%5F5e5%20instanceof%20C%29%29%7B%0A%5F5e5%3DC%2EfromString%28%5F5e5%29%3B%0A%7D%0A%7D%0Athis%2E%5FroundCornersImpl%28e%2C%5F5e3%2C%5F5e5%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2E%5FRoundCorners%2Eprototype%3D%7B%5FdoWrap%3Afunction%28e%29%7B%0Avar%20%5F5e7%3De%2EparentNode%3B%0Avar%20doc%3DMochiKit%2EDOM%2EcurrentDocument%28%29%3B%0Aif%28typeof%20%28doc%2EdefaultView%29%3D%3D%3D%22undefined%22%7C%7Cdoc%2EdefaultView%3D%3D%3Dnull%29%7B%0Areturn%20e%3B%0A%7D%0Avar%20%5F5e9%3Ddoc%2EdefaultView%2EgetComputedStyle%28e%2Cnull%29%3B%0Aif%28typeof%20%28%5F5e9%29%3D%3D%3D%22undefined%22%7C%7C%5F5e9%3D%3D%3Dnull%29%7B%0Areturn%20e%3B%0A%7D%0Avar%20%5F5ea%3DMochiKit%2EDOM%2EDIV%28%7B%22style%22%3A%7Bdisplay%3A%22block%22%2CmarginTop%3A%5F5e9%2EgetPropertyValue%28%22padding%2Dtop%22%29%2CmarginRight%3A%5F5e9%2EgetPropertyValue%28%22padding%2Dright%22%29%2CmarginBottom%3A%5F5e9%2EgetPropertyValue%28%22padding%2Dbottom%22%29%2CmarginLeft%3A%5F5e9%2EgetPropertyValue%28%22padding%2Dleft%22%29%2Cpadding%3A%220px%22%7D%7D%29%3B%0A%5F5ea%2EinnerHTML%3De%2EinnerHTML%3B%0Ae%2EinnerHTML%3D%22%22%3B%0Ae%2EappendChild%28%5F5ea%29%3B%0Areturn%20e%3B%0A%7D%2C%5FroundCornersImpl%3Afunction%28e%2C%5F5ec%2C%5F5ed%29%7B%0Aif%28this%2Eoptions%2Eborder%29%7B%0Athis%2E%5FrenderBorder%28e%2C%5F5ed%29%3B%0A%7D%0Aif%28this%2E%5FisTopRounded%28%29%29%7B%0Athis%2E%5FroundTopCorners%28e%2C%5F5ec%2C%5F5ed%29%3B%0A%7D%0Aif%28this%2E%5FisBottomRounded%28%29%29%7B%0Athis%2E%5FroundBottomCorners%28e%2C%5F5ec%2C%5F5ed%29%3B%0A%7D%0A%7D%2C%5FrenderBorder%3Afunction%28el%2C%5F5ef%29%7B%0Avar%20%5F5f0%3D%221px%20solid%20%22%2Bthis%2E%5FborderColor%28%5F5ef%29%3B%0Avar%20%5F5f1%3D%22border%2Dleft%3A%20%22%2B%5F5f0%3B%0Avar%20%5F5f2%3D%22border%2Dright%3A%20%22%2B%5F5f0%3B%0Avar%20%5F5f3%3D%22style%3D%27%22%2B%5F5f1%2B%22%3B%22%2B%5F5f2%2B%22%27%22%3B%0Ael%2EinnerHTML%3D%22%3Cdiv%20%22%2B%5F5f3%2B%22%3E%22%2Bel%2EinnerHTML%2B%22%3C%2Fdiv%3E%22%3B%0A%7D%2C%5FroundTopCorners%3Afunction%28el%2C%5F5f5%2C%5F5f6%29%7B%0Avar%20%5F5f7%3Dthis%2E%5FcreateCorner%28%5F5f6%29%3B%0Afor%28var%20i%3D0%3Bi%3Cthis%2Eoptions%2EnumSlices%3Bi%2B%2B%29%7B%0A%5F5f7%2EappendChild%28this%2E%5FcreateCornerSlice%28%5F5f5%2C%5F5f6%2Ci%2C%22top%22%29%29%3B%0A%7D%0Ael%2Estyle%2EpaddingTop%3D0%3B%0Ael%2EinsertBefore%28%5F5f7%2Cel%2EfirstChild%29%3B%0A%7D%2C%5FroundBottomCorners%3Afunction%28el%2C%5F5fa%2C%5F5fb%29%7B%0Avar%20%5F5fc%3Dthis%2E%5FcreateCorner%28%5F5fb%29%3B%0Afor%28var%20i%3D%28this%2Eoptions%2EnumSlices%2D1%29%3Bi%3E%3D0%3Bi%2D%2D%29%7B%0A%5F5fc%2EappendChild%28this%2E%5FcreateCornerSlice%28%5F5fa%2C%5F5fb%2Ci%2C%22bottom%22%29%29%3B%0A%7D%0Ael%2Estyle%2EpaddingBottom%3D0%3B%0Ael%2EappendChild%28%5F5fc%29%3B%0A%7D%2C%5FcreateCorner%3Afunction%28%5F5fe%29%7B%0Avar%20dom%3DMochiKit%2EDOM%3B%0Areturn%20dom%2EDIV%28%7Bstyle%3A%7BbackgroundColor%3A%5F5fe%2EtoString%28%29%7D%7D%29%3B%0A%7D%2C%5FcreateCornerSlice%3Afunction%28%5F600%2C%5F601%2Cn%2C%5F603%29%7B%0Avar%20%5F604%3DMochiKit%2EDOM%2ESPAN%28%29%3B%0Avar%20%5F605%3D%5F604%2Estyle%3B%0A%5F605%2EbackgroundColor%3D%5F600%2EtoString%28%29%3B%0A%5F605%2Edisplay%3D%22block%22%3B%0A%5F605%2Eheight%3D%221px%22%3B%0A%5F605%2Eoverflow%3D%22hidden%22%3B%0A%5F605%2EfontSize%3D%221px%22%3B%0Avar%20%5F606%3Dthis%2E%5FborderColor%28%5F600%2C%5F601%29%3B%0Aif%28this%2Eoptions%2Eborder%26%26n%3D%3D%3D0%29%7B%0A%5F605%2EborderTopStyle%3D%22solid%22%3B%0A%5F605%2EborderTopWidth%3D%221px%22%3B%0A%5F605%2EborderLeftWidth%3D%220px%22%3B%0A%5F605%2EborderRightWidth%3D%220px%22%3B%0A%5F605%2EborderBottomWidth%3D%220px%22%3B%0A%5F605%2Eheight%3D%220px%22%3B%0A%5F605%2EborderColor%3D%5F606%2EtoString%28%29%3B%0A%7Delse%7B%0Aif%28%5F606%29%7B%0A%5F605%2EborderColor%3D%5F606%2EtoString%28%29%3B%0A%5F605%2EborderStyle%3D%22solid%22%3B%0A%5F605%2EborderWidth%3D%220px%201px%22%3B%0A%7D%0A%7D%0Aif%28%21this%2Eoptions%2Ecompact%26%26%28n%3D%3D%28this%2Eoptions%2EnumSlices%2D1%29%29%29%7B%0A%5F605%2Eheight%3D%222px%22%3B%0A%7D%0Athis%2E%5FsetMargin%28%5F604%2Cn%2C%5F603%29%3B%0Athis%2E%5FsetBorder%28%5F604%2Cn%2C%5F603%29%3B%0Areturn%20%5F604%3B%0A%7D%2C%5FsetOptions%3Afunction%28%5F607%29%7B%0Athis%2Eoptions%3D%7Bcorners%3A%22all%22%2Ccolor%3A%22fromElement%22%2CbgColor%3A%22fromParent%22%2Cblend%3Atrue%2Cborder%3Afalse%2Ccompact%3Afalse%2C%5F%5Funstable%5F%5FwrapElement%3Afalse%7D%3B%0AMochiKit%2EBase%2Eupdate%28this%2Eoptions%2C%5F607%29%3B%0Athis%2Eoptions%2EnumSlices%3D%28this%2Eoptions%2Ecompact%3F2%3A4%29%3B%0A%7D%2C%5FwhichSideTop%3Afunction%28%29%7B%0Avar%20%5F608%3Dthis%2Eoptions%2Ecorners%3B%0Aif%28this%2E%5FhasString%28%5F608%2C%22all%22%2C%22top%22%29%29%7B%0Areturn%20%22%22%3B%0A%7D%0Avar%20%5F609%3D%28%5F608%2EindexOf%28%22tl%22%29%21%3D%2D1%29%3B%0Avar%20%5F60a%3D%28%5F608%2EindexOf%28%22tr%22%29%21%3D%2D1%29%3B%0Aif%28%5F609%26%26%5F60a%29%7B%0Areturn%20%22%22%3B%0A%7D%0Aif%28%5F609%29%7B%0Areturn%20%22left%22%3B%0A%7D%0Aif%28%5F60a%29%7B%0Areturn%20%22right%22%3B%0A%7D%0Areturn%20%22%22%3B%0A%7D%2C%5FwhichSideBottom%3Afunction%28%29%7B%0Avar%20%5F60b%3Dthis%2Eoptions%2Ecorners%3B%0Aif%28this%2E%5FhasString%28%5F60b%2C%22all%22%2C%22bottom%22%29%29%7B%0Areturn%20%22%22%3B%0A%7D%0Avar%20%5F60c%3D%28%5F60b%2EindexOf%28%22bl%22%29%21%3D%2D1%29%3B%0Avar%20%5F60d%3D%28%5F60b%2EindexOf%28%22br%22%29%21%3D%2D1%29%3B%0Aif%28%5F60c%26%26%5F60d%29%7B%0Areturn%20%22%22%3B%0A%7D%0Aif%28%5F60c%29%7B%0Areturn%20%22left%22%3B%0A%7D%0Aif%28%5F60d%29%7B%0Areturn%20%22right%22%3B%0A%7D%0Areturn%20%22%22%3B%0A%7D%2C%5FborderColor%3Afunction%28%5F60e%2C%5F60f%29%7B%0Aif%28%5F60e%3D%3D%22transparent%22%29%7B%0Areturn%20%5F60f%3B%0A%7Delse%7B%0Aif%28this%2Eoptions%2Eborder%29%7B%0Areturn%20this%2Eoptions%2Eborder%3B%0A%7Delse%7B%0Aif%28this%2Eoptions%2Eblend%29%7B%0Areturn%20%5F60f%2EblendedColor%28%5F60e%29%3B%0A%7D%0A%7D%0A%7D%0Areturn%20%22%22%3B%0A%7D%2C%5FsetMargin%3Afunction%28el%2Cn%2C%5F612%29%7B%0Avar%20%5F613%3Dthis%2E%5FmarginSize%28n%29%2B%22px%22%3B%0Avar%20%5F614%3D%28%5F612%3D%3D%22top%22%3Fthis%2E%5FwhichSideTop%28%29%3Athis%2E%5FwhichSideBottom%28%29%29%3B%0Avar%20%5F615%3Del%2Estyle%3B%0Aif%28%5F614%3D%3D%22left%22%29%7B%0A%5F615%2EmarginLeft%3D%5F613%3B%0A%5F615%2EmarginRight%3D%220px%22%3B%0A%7Delse%7B%0Aif%28%5F614%3D%3D%22right%22%29%7B%0A%5F615%2EmarginRight%3D%5F613%3B%0A%5F615%2EmarginLeft%3D%220px%22%3B%0A%7Delse%7B%0A%5F615%2EmarginLeft%3D%5F613%3B%0A%5F615%2EmarginRight%3D%5F613%3B%0A%7D%0A%7D%0A%7D%2C%5FsetBorder%3Afunction%28el%2Cn%2C%5F618%29%7B%0Avar%20%5F619%3Dthis%2E%5FborderSize%28n%29%2B%22px%22%3B%0Avar%20%5F61a%3D%28%5F618%3D%3D%22top%22%3Fthis%2E%5FwhichSideTop%28%29%3Athis%2E%5FwhichSideBottom%28%29%29%3B%0Avar%20%5F61b%3Del%2Estyle%3B%0Aif%28%5F61a%3D%3D%22left%22%29%7B%0A%5F61b%2EborderLeftWidth%3D%5F619%3B%0A%5F61b%2EborderRightWidth%3D%220px%22%3B%0A%7Delse%7B%0Aif%28%5F61a%3D%3D%22right%22%29%7B%0A%5F61b%2EborderRightWidth%3D%5F619%3B%0A%5F61b%2EborderLeftWidth%3D%220px%22%3B%0A%7Delse%7B%0A%5F61b%2EborderLeftWidth%3D%5F619%3B%0A%5F61b%2EborderRightWidth%3D%5F619%3B%0A%7D%0A%7D%0A%7D%2C%5FmarginSize%3Afunction%28n%29%7B%0Aif%28this%2EisTransparent%29%7B%0Areturn%200%3B%0A%7D%0Avar%20o%3Dthis%2Eoptions%3B%0Aif%28o%2Ecompact%26%26o%2Eblend%29%7B%0Avar%20%5F61e%3D%5B1%2C0%5D%3B%0Areturn%20%5F61e%5Bn%5D%3B%0A%7Delse%7B%0Aif%28o%2Ecompact%29%7B%0Avar%20%5F61f%3D%5B2%2C1%5D%3B%0Areturn%20%5F61f%5Bn%5D%3B%0A%7Delse%7B%0Aif%28o%2Eblend%29%7B%0Avar%20%5F620%3D%5B3%2C2%2C1%2C0%5D%3B%0Areturn%20%5F620%5Bn%5D%3B%0A%7Delse%7B%0Avar%20%5F621%3D%5B5%2C3%2C2%2C1%5D%3B%0Areturn%20%5F621%5Bn%5D%3B%0A%7D%0A%7D%0A%7D%0A%7D%2C%5FborderSize%3Afunction%28n%29%7B%0Avar%20o%3Dthis%2Eoptions%3B%0Avar%20%5F624%3B%0Aif%28o%2Ecompact%26%26%28o%2Eblend%7C%7Cthis%2EisTransparent%29%29%7B%0Areturn%201%3B%0A%7Delse%7B%0Aif%28o%2Ecompact%29%7B%0A%5F624%3D%5B1%2C0%5D%3B%0A%7Delse%7B%0Aif%28o%2Eblend%29%7B%0A%5F624%3D%5B2%2C1%2C1%2C1%5D%3B%0A%7Delse%7B%0Aif%28o%2Eborder%29%7B%0A%5F624%3D%5B0%2C2%2C0%2C0%5D%3B%0A%7Delse%7B%0Aif%28this%2EisTransparent%29%7B%0A%5F624%3D%5B5%2C3%2C2%2C1%5D%3B%0A%7Delse%7B%0Areturn%200%3B%0A%7D%0A%7D%0A%7D%0A%7D%0A%7D%0Areturn%20%5F624%5Bn%5D%3B%0A%7D%2C%5FhasString%3Afunction%28str%29%7B%0Afor%28var%20i%3D1%3Bi%3Carguments%2Elength%3Bi%2B%2B%29%7B%0Aif%28str%2EindexOf%28arguments%5Bi%5D%29%21%3D%2D1%29%7B%0Areturn%20true%3B%0A%7D%0A%7D%0Areturn%20false%3B%0A%7D%2C%5FisTopRounded%3Afunction%28%29%7B%0Areturn%20this%2E%5FhasString%28this%2Eoptions%2Ecorners%2C%22all%22%2C%22top%22%2C%22tl%22%2C%22tr%22%29%3B%0A%7D%2C%5FisBottomRounded%3Afunction%28%29%7B%0Areturn%20this%2E%5FhasString%28this%2Eoptions%2Ecorners%2C%22all%22%2C%22bottom%22%2C%22bl%22%2C%22br%22%29%3B%0A%7D%2C%5FhasSingleTextChild%3Afunction%28el%29%7B%0Areturn%20%28el%2EchildNodes%2Elength%3D%3D1%26%26el%2EchildNodes%5B0%5D%2EnodeType%3D%3D3%29%3B%0A%7D%7D%3B%0AMochiKit%2EVisual%2EroundElement%3Dfunction%28e%2C%5F629%29%7B%0Anew%20MochiKit%2EVisual%2E%5FRoundCorners%28e%2C%5F629%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EroundClass%3Dfunction%28%5F62a%2C%5F62b%2C%5F62c%29%7B%0Avar%20%5F62d%3DMochiKit%2EDOM%2EgetElementsByTagAndClassName%28%5F62a%2C%5F62b%29%3B%0Afor%28var%20i%3D0%3Bi%3C%5F62d%2Elength%3Bi%2B%2B%29%7B%0AMochiKit%2EVisual%2EroundElement%28%5F62d%5Bi%5D%2C%5F62c%29%3B%0A%7D%0A%7D%3B%0AMochiKit%2EVisual%2EtagifyText%3Dfunction%28%5F62f%2C%5F630%29%7B%0A%5F630%3D%5F630%7C%7C%22position%3Arelative%22%3B%0Aif%28%2FMSIE%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0A%5F630%2B%3D%22%3Bzoom%3A1%22%3B%0A%7D%0A%5F62f%3DMochiKit%2EDOM%2EgetElement%28%5F62f%29%3B%0Avar%20ma%3DMochiKit%2EBase%2Emap%3B%0Ama%28function%28%5F632%29%7B%0Aif%28%5F632%2EnodeType%3D%3D3%29%7B%0Ama%28function%28%5F633%29%7B%0A%5F62f%2EinsertBefore%28MochiKit%2EDOM%2ESPAN%28%7Bstyle%3A%5F630%7D%2C%5F633%3D%3D%22%20%22%3FString%2EfromCharCode%28160%29%3A%5F633%29%2C%5F632%29%3B%0A%7D%2C%5F632%2EnodeValue%2Esplit%28%22%22%29%29%3B%0AMochiKit%2EDOM%2EremoveElement%28%5F632%29%3B%0A%7D%0A%7D%2C%5F62f%2EchildNodes%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EforceRerendering%3Dfunction%28%5F634%29%7B%0Atry%7B%0A%5F634%3DMochiKit%2EDOM%2EgetElement%28%5F634%29%3B%0Avar%20n%3Ddocument%2EcreateTextNode%28%22%20%22%29%3B%0A%5F634%2EappendChild%28n%29%3B%0A%5F634%2EremoveChild%28n%29%3B%0A%7D%0Acatch%28e%29%7B%0A%7D%0A%7D%3B%0AMochiKit%2EVisual%2Emultiple%3Dfunction%28%5F636%2C%5F637%2C%5F638%29%7B%0A%5F638%3DMochiKit%2EBase%2Eupdate%28%7Bspeed%3A0%2E1%2Cdelay%3A0%7D%2C%5F638%29%3B%0Avar%20%5F639%3D%5F638%2Edelay%3B%0Avar%20%5F63a%3D0%3B%0AMochiKit%2EBase%2Emap%28function%28%5F63b%29%7B%0A%5F638%2Edelay%3D%5F63a%2A%5F638%2Espeed%2B%5F639%3B%0Anew%20%5F637%28%5F63b%2C%5F638%29%3B%0A%5F63a%2B%3D1%3B%0A%7D%2C%5F636%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EPAIRS%3D%7B%22slide%22%3A%5B%22slideDown%22%2C%22slideUp%22%5D%2C%22blind%22%3A%5B%22blindDown%22%2C%22blindUp%22%5D%2C%22appear%22%3A%5B%22appear%22%2C%22fade%22%5D%2C%22size%22%3A%5B%22grow%22%2C%22shrink%22%5D%7D%3B%0AMochiKit%2EVisual%2Etoggle%3Dfunction%28%5F63c%2C%5F63d%2C%5F63e%29%7B%0A%5F63c%3DMochiKit%2EDOM%2EgetElement%28%5F63c%29%3B%0A%5F63d%3D%28%5F63d%7C%7C%22appear%22%29%2EtoLowerCase%28%29%3B%0A%5F63e%3DMochiKit%2EBase%2Eupdate%28%7Bqueue%3A%7Bposition%3A%22end%22%2Cscope%3A%28%5F63c%2Eid%7C%7C%22global%22%29%2Climit%3A1%7D%7D%2C%5F63e%29%3B%0Avar%20v%3DMochiKit%2EVisual%3B%0Av%5BMochiKit%2EStyle%2EgetStyle%28%5F63c%2C%22display%22%29%21%3D%22none%22%3Fv%2EPAIRS%5B%5F63d%5D%5B1%5D%3Av%2EPAIRS%5B%5F63d%5D%5B0%5D%5D%28%5F63c%2C%5F63e%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2ETransitions%3D%7B%7D%3B%0AMochiKit%2EVisual%2ETransitions%2Elinear%3Dfunction%28pos%29%7B%0Areturn%20pos%3B%0A%7D%3B%0AMochiKit%2EVisual%2ETransitions%2Esinoidal%3Dfunction%28pos%29%7B%0Areturn%200%2E5%2DMath%2Ecos%28pos%2AMath%2EPI%29%2F2%3B%0A%7D%3B%0AMochiKit%2EVisual%2ETransitions%2Ereverse%3Dfunction%28pos%29%7B%0Areturn%201%2Dpos%3B%0A%7D%3B%0AMochiKit%2EVisual%2ETransitions%2Eflicker%3Dfunction%28pos%29%7B%0Areturn%200%2E25%2DMath%2Ecos%28pos%2AMath%2EPI%29%2F4%2BMath%2Erandom%28%29%2F2%3B%0A%7D%3B%0AMochiKit%2EVisual%2ETransitions%2Ewobble%3Dfunction%28pos%29%7B%0Areturn%200%2E5%2DMath%2Ecos%289%2Apos%2AMath%2EPI%29%2F2%3B%0A%7D%3B%0AMochiKit%2EVisual%2ETransitions%2Epulse%3Dfunction%28pos%2C%5F646%29%7B%0Aif%28%5F646%29%7B%0Apos%2A%3D2%2A%5F646%3B%0A%7Delse%7B%0Apos%2A%3D10%3B%0A%7D%0Avar%20%5F647%3Dpos%2DMath%2Efloor%28pos%29%3B%0Areturn%20%28Math%2Efloor%28pos%29%252%3D%3D0%29%3F%5F647%3A1%2D%5F647%3B%0A%7D%3B%0AMochiKit%2EVisual%2ETransitions%2Eparabolic%3Dfunction%28pos%29%7B%0Areturn%20pos%2Apos%3B%0A%7D%3B%0AMochiKit%2EVisual%2ETransitions%2Enone%3Dfunction%28pos%29%7B%0Areturn%200%3B%0A%7D%3B%0AMochiKit%2EVisual%2ETransitions%2Efull%3Dfunction%28pos%29%7B%0Areturn%201%3B%0A%7D%3B%0AMochiKit%2EVisual%2EScopedQueue%3Dfunction%28%29%7B%0Avar%20cls%3Darguments%2Ecallee%3B%0Aif%28%21%28this%20instanceof%20cls%29%29%7B%0Areturn%20new%20cls%28%29%3B%0A%7D%0Athis%2E%5F%5Finit%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EVisual%2EScopedQueue%2Eprototype%2C%7B%5F%5Finit%5F%5F%3Afunction%28%29%7B%0Athis%2Eeffects%3D%5B%5D%3B%0Athis%2Einterval%3Dnull%3B%0A%7D%2Cadd%3Afunction%28%5F64c%29%7B%0Avar%20%5F64d%3Dnew%20Date%28%29%2EgetTime%28%29%3B%0Avar%20%5F64e%3D%28typeof%20%28%5F64c%2Eoptions%2Equeue%29%3D%3D%22string%22%29%3F%5F64c%2Eoptions%2Equeue%3A%5F64c%2Eoptions%2Equeue%2Eposition%3B%0Avar%20ma%3DMochiKit%2EBase%2Emap%3B%0Aswitch%28%5F64e%29%7B%0Acase%20%22front%22%3A%0Ama%28function%28e%29%7B%0Aif%28e%2Estate%3D%3D%22idle%22%29%7B%0Ae%2EstartOn%2B%3D%5F64c%2EfinishOn%3B%0Ae%2EfinishOn%2B%3D%5F64c%2EfinishOn%3B%0A%7D%0A%7D%2Cthis%2Eeffects%29%3B%0Abreak%3B%0Acase%20%22end%22%3A%0Avar%20%5F651%3B%0Ama%28function%28e%29%7B%0Avar%20i%3De%2EfinishOn%3B%0Aif%28i%3E%3D%28%5F651%7C%7Ci%29%29%7B%0A%5F651%3Di%3B%0A%7D%0A%7D%2Cthis%2Eeffects%29%3B%0A%5F64d%3D%5F651%7C%7C%5F64d%3B%0Abreak%3B%0Acase%20%22break%22%3A%0Ama%28function%28e%29%7B%0Ae%2Efinalize%28%29%3B%0A%7D%2Cthis%2Eeffects%29%3B%0Abreak%3B%0A%7D%0A%5F64c%2EstartOn%2B%3D%5F64d%3B%0A%5F64c%2EfinishOn%2B%3D%5F64d%3B%0Aif%28%21%5F64c%2Eoptions%2Equeue%2Elimit%7C%7Cthis%2Eeffects%2Elength%3C%5F64c%2Eoptions%2Equeue%2Elimit%29%7B%0Athis%2Eeffects%2Epush%28%5F64c%29%3B%0A%7D%0Aif%28%21this%2Einterval%29%7B%0Athis%2Einterval%3Dthis%2EstartLoop%28MochiKit%2EBase%2Ebind%28this%2Eloop%2Cthis%29%2C40%29%3B%0A%7D%0A%7D%2CstartLoop%3Afunction%28func%2C%5F656%29%7B%0Areturn%20setInterval%28func%2C%5F656%29%3B%0A%7D%2Cremove%3Afunction%28%5F657%29%7B%0Athis%2Eeffects%3DMochiKit%2EBase%2Efilter%28function%28e%29%7B%0Areturn%20e%21%3D%5F657%3B%0A%7D%2Cthis%2Eeffects%29%3B%0Aif%28%21this%2Eeffects%2Elength%29%7B%0Athis%2EstopLoop%28this%2Einterval%29%3B%0Athis%2Einterval%3Dnull%3B%0A%7D%0A%7D%2CstopLoop%3Afunction%28%5F659%29%7B%0AclearInterval%28%5F659%29%3B%0A%7D%2Cloop%3Afunction%28%29%7B%0Avar%20%5F65a%3Dnew%20Date%28%29%2EgetTime%28%29%3B%0AMochiKit%2EBase%2Emap%28function%28%5F65b%29%7B%0A%5F65b%2Eloop%28%5F65a%29%3B%0A%7D%2Cthis%2Eeffects%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EVisual%2EQueues%3D%7Binstances%3A%7B%7D%2Cget%3Afunction%28%5F65c%29%7B%0Aif%28typeof%20%28%5F65c%29%21%3D%22string%22%29%7B%0Areturn%20%5F65c%3B%0A%7D%0Aif%28%21this%2Einstances%5B%5F65c%5D%29%7B%0Athis%2Einstances%5B%5F65c%5D%3Dnew%20MochiKit%2EVisual%2EScopedQueue%28%29%3B%0A%7D%0Areturn%20this%2Einstances%5B%5F65c%5D%3B%0A%7D%7D%3B%0AMochiKit%2EVisual%2EQueue%3DMochiKit%2EVisual%2EQueues%2Eget%28%22global%22%29%3B%0AMochiKit%2EVisual%2EDefaultOptions%3D%7Btransition%3AMochiKit%2EVisual%2ETransitions%2Esinoidal%2Cduration%3A1%2Cfps%3A25%2Csync%3Afalse%2Cfrom%3A0%2Cto%3A1%2Cdelay%3A0%2Cqueue%3A%22parallel%22%7D%3B%0AMochiKit%2EVisual%2EBase%3Dfunction%28%29%7B%0A%7D%3B%0AMochiKit%2EVisual%2EBase%2Eprototype%3D%7B%5F%5Fclass%5F%5F%3AMochiKit%2EVisual%2EBase%2Cstart%3Afunction%28%5F65d%29%7B%0Avar%20v%3DMochiKit%2EVisual%3B%0Athis%2Eoptions%3DMochiKit%2EBase%2Esetdefault%28%5F65d%2Cv%2EDefaultOptions%29%3B%0Athis%2EcurrentFrame%3D0%3B%0Athis%2Estate%3D%22idle%22%3B%0Athis%2EstartOn%3Dthis%2Eoptions%2Edelay%2A1000%3B%0Athis%2EfinishOn%3Dthis%2EstartOn%2B%28this%2Eoptions%2Eduration%2A1000%29%3B%0Athis%2Eevent%28%22beforeStart%22%29%3B%0Aif%28%21this%2Eoptions%2Esync%29%7B%0Av%2EQueues%2Eget%28typeof%20%28this%2Eoptions%2Equeue%29%3D%3D%22string%22%3F%22global%22%3Athis%2Eoptions%2Equeue%2Escope%29%2Eadd%28this%29%3B%0A%7D%0A%7D%2Cloop%3Afunction%28%5F65f%29%7B%0Aif%28%5F65f%3E%3Dthis%2EstartOn%29%7B%0Aif%28%5F65f%3E%3Dthis%2EfinishOn%29%7B%0Areturn%20this%2Efinalize%28%29%3B%0A%7D%0Avar%20pos%3D%28%5F65f%2Dthis%2EstartOn%29%2F%28this%2EfinishOn%2Dthis%2EstartOn%29%3B%0Avar%20%5F661%3DMath%2Eround%28pos%2Athis%2Eoptions%2Efps%2Athis%2Eoptions%2Eduration%29%3B%0Aif%28%5F661%3Ethis%2EcurrentFrame%29%7B%0Athis%2Erender%28pos%29%3B%0Athis%2EcurrentFrame%3D%5F661%3B%0A%7D%0A%7D%0A%7D%2Crender%3Afunction%28pos%29%7B%0Aif%28this%2Estate%3D%3D%22idle%22%29%7B%0Athis%2Estate%3D%22running%22%3B%0Athis%2Eevent%28%22beforeSetup%22%29%3B%0Athis%2Esetup%28%29%3B%0Athis%2Eevent%28%22afterSetup%22%29%3B%0A%7D%0Aif%28this%2Estate%3D%3D%22running%22%29%7B%0Aif%28this%2Eoptions%2Etransition%29%7B%0Apos%3Dthis%2Eoptions%2Etransition%28pos%29%3B%0A%7D%0Apos%2A%3D%28this%2Eoptions%2Eto%2Dthis%2Eoptions%2Efrom%29%3B%0Apos%2B%3Dthis%2Eoptions%2Efrom%3B%0Athis%2Eevent%28%22beforeUpdate%22%29%3B%0Athis%2Eupdate%28pos%29%3B%0Athis%2Eevent%28%22afterUpdate%22%29%3B%0A%7D%0A%7D%2Ccancel%3Afunction%28%29%7B%0Aif%28%21this%2Eoptions%2Esync%29%7B%0AMochiKit%2EVisual%2EQueues%2Eget%28typeof%20%28this%2Eoptions%2Equeue%29%3D%3D%22string%22%3F%22global%22%3Athis%2Eoptions%2Equeue%2Escope%29%2Eremove%28this%29%3B%0A%7D%0Athis%2Estate%3D%22finished%22%3B%0A%7D%2Cfinalize%3Afunction%28%29%7B%0Athis%2Erender%281%29%3B%0Athis%2Ecancel%28%29%3B%0Athis%2Eevent%28%22beforeFinish%22%29%3B%0Athis%2Efinish%28%29%3B%0Athis%2Eevent%28%22afterFinish%22%29%3B%0A%7D%2Csetup%3Afunction%28%29%7B%0A%7D%2Cfinish%3Afunction%28%29%7B%0A%7D%2Cupdate%3Afunction%28%5F663%29%7B%0A%7D%2Cevent%3Afunction%28%5F664%29%7B%0Aif%28this%2Eoptions%5B%5F664%2B%22Internal%22%5D%29%7B%0Athis%2Eoptions%5B%5F664%2B%22Internal%22%5D%28this%29%3B%0A%7D%0Aif%28this%2Eoptions%5B%5F664%5D%29%7B%0Athis%2Eoptions%5B%5F664%5D%28this%29%3B%0A%7D%0A%7D%2Crepr%3Afunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2E%5F%5Fclass%5F%5F%2ENAME%2B%22%2C%20options%3A%22%2BMochiKit%2EBase%2Erepr%28this%2Eoptions%29%2B%22%5D%22%3B%0A%7D%7D%3B%0AMochiKit%2EVisual%2EParallel%3Dfunction%28%5F665%2C%5F666%29%7B%0Avar%20cls%3Darguments%2Ecallee%3B%0Aif%28%21%28this%20instanceof%20cls%29%29%7B%0Areturn%20new%20cls%28%5F665%2C%5F666%29%3B%0A%7D%0Athis%2E%5F%5Finit%5F%5F%28%5F665%2C%5F666%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EParallel%2Eprototype%3Dnew%20MochiKit%2EVisual%2EBase%28%29%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EVisual%2EParallel%2Eprototype%2C%7B%5F%5Fclass%5F%5F%3AMochiKit%2EVisual%2EParallel%2C%5F%5Finit%5F%5F%3Afunction%28%5F668%2C%5F669%29%7B%0Athis%2Eeffects%3D%5F668%7C%7C%5B%5D%3B%0Athis%2Estart%28%5F669%29%3B%0A%7D%2Cupdate%3Afunction%28%5F66a%29%7B%0AMochiKit%2EBase%2Emap%28function%28%5F66b%29%7B%0A%5F66b%2Erender%28%5F66a%29%3B%0A%7D%2Cthis%2Eeffects%29%3B%0A%7D%2Cfinish%3Afunction%28%29%7B%0AMochiKit%2EBase%2Emap%28function%28%5F66c%29%7B%0A%5F66c%2Efinalize%28%29%3B%0A%7D%2Cthis%2Eeffects%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EVisual%2ESequence%3Dfunction%28%5F66d%2C%5F66e%29%7B%0Avar%20cls%3Darguments%2Ecallee%3B%0Aif%28%21%28this%20instanceof%20cls%29%29%7B%0Areturn%20new%20cls%28%5F66d%2C%5F66e%29%3B%0A%7D%0Athis%2E%5F%5Finit%5F%5F%28%5F66d%2C%5F66e%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2ESequence%2Eprototype%3Dnew%20MochiKit%2EVisual%2EBase%28%29%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EVisual%2ESequence%2Eprototype%2C%7B%5F%5Fclass%5F%5F%3AMochiKit%2EVisual%2ESequence%2C%5F%5Finit%5F%5F%3Afunction%28%5F670%2C%5F671%29%7B%0Avar%20defs%3D%7Btransition%3AMochiKit%2EVisual%2ETransitions%2Elinear%2Cduration%3A0%7D%3B%0Athis%2Eeffects%3D%5F670%7C%7C%5B%5D%3B%0AMochiKit%2EBase%2Emap%28function%28%5F673%29%7B%0Adefs%2Eduration%2B%3D%5F673%2Eoptions%2Eduration%3B%0A%7D%2Cthis%2Eeffects%29%3B%0AMochiKit%2EBase%2Esetdefault%28%5F671%2Cdefs%29%3B%0Athis%2Estart%28%5F671%29%3B%0A%7D%2Cupdate%3Afunction%28%5F674%29%7B%0Avar%20time%3D%5F674%2Athis%2Eoptions%2Eduration%3B%0Afor%28var%20i%3D0%3Bi%3Cthis%2Eeffects%2Elength%3Bi%2B%2B%29%7B%0Avar%20%5F677%3Dthis%2Eeffects%5Bi%5D%3B%0Aif%28time%3C%3D%5F677%2Eoptions%2Eduration%29%7B%0A%5F677%2Erender%28time%2F%5F677%2Eoptions%2Eduration%29%3B%0Abreak%3B%0A%7Delse%7B%0Atime%2D%3D%5F677%2Eoptions%2Eduration%3B%0A%7D%0A%7D%0A%7D%2Cfinish%3Afunction%28%29%7B%0AMochiKit%2EBase%2Emap%28function%28%5F678%29%7B%0A%5F678%2Efinalize%28%29%3B%0A%7D%2Cthis%2Eeffects%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EVisual%2EOpacity%3Dfunction%28%5F679%2C%5F67a%29%7B%0Avar%20cls%3Darguments%2Ecallee%3B%0Aif%28%21%28this%20instanceof%20cls%29%29%7B%0Areturn%20new%20cls%28%5F679%2C%5F67a%29%3B%0A%7D%0Athis%2E%5F%5Finit%5F%5F%28%5F679%2C%5F67a%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EOpacity%2Eprototype%3Dnew%20MochiKit%2EVisual%2EBase%28%29%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EVisual%2EOpacity%2Eprototype%2C%7B%5F%5Fclass%5F%5F%3AMochiKit%2EVisual%2EOpacity%2C%5F%5Finit%5F%5F%3Afunction%28%5F67c%2C%5F67d%29%7B%0Avar%20b%3DMochiKit%2EBase%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0Athis%2Eelement%3DMochiKit%2EDOM%2EgetElement%28%5F67c%29%3B%0Aif%28this%2Eelement%2EcurrentStyle%26%26%28%21this%2Eelement%2EcurrentStyle%2EhasLayout%29%29%7B%0As%2EsetStyle%28this%2Eelement%2C%7Bzoom%3A1%7D%29%3B%0A%7D%0A%5F67d%3Db%2Eupdate%28%7Bfrom%3As%2EgetStyle%28this%2Eelement%2C%22opacity%22%29%7C%7C0%2Cto%3A1%7D%2C%5F67d%29%3B%0Athis%2Estart%28%5F67d%29%3B%0A%7D%2Cupdate%3Afunction%28%5F680%29%7B%0AMochiKit%2EStyle%2EsetStyle%28this%2Eelement%2C%7B%22opacity%22%3A%5F680%7D%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EVisual%2EMove%3Dfunction%28%5F681%2C%5F682%29%7B%0Avar%20cls%3Darguments%2Ecallee%3B%0Aif%28%21%28this%20instanceof%20cls%29%29%7B%0Areturn%20new%20cls%28%5F681%2C%5F682%29%3B%0A%7D%0Athis%2E%5F%5Finit%5F%5F%28%5F681%2C%5F682%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EMove%2Eprototype%3Dnew%20MochiKit%2EVisual%2EBase%28%29%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EVisual%2EMove%2Eprototype%2C%7B%5F%5Fclass%5F%5F%3AMochiKit%2EVisual%2EMove%2C%5F%5Finit%5F%5F%3Afunction%28%5F684%2C%5F685%29%7B%0Athis%2Eelement%3DMochiKit%2EDOM%2EgetElement%28%5F684%29%3B%0A%5F685%3DMochiKit%2EBase%2Eupdate%28%7Bx%3A0%2Cy%3A0%2Cmode%3A%22relative%22%7D%2C%5F685%29%3B%0Athis%2Estart%28%5F685%29%3B%0A%7D%2Csetup%3Afunction%28%29%7B%0AMochiKit%2EStyle%2EmakePositioned%28this%2Eelement%29%3B%0Avar%20s%3Dthis%2Eelement%2Estyle%3B%0Avar%20%5F687%3Ds%2Evisibility%3B%0Avar%20%5F688%3Ds%2Edisplay%3B%0Aif%28%5F688%3D%3D%22none%22%29%7B%0As%2Evisibility%3D%22hidden%22%3B%0As%2Edisplay%3D%22%22%3B%0A%7D%0Athis%2EoriginalLeft%3DparseFloat%28MochiKit%2EStyle%2EgetStyle%28this%2Eelement%2C%22left%22%29%7C%7C%220%22%29%3B%0Athis%2EoriginalTop%3DparseFloat%28MochiKit%2EStyle%2EgetStyle%28this%2Eelement%2C%22top%22%29%7C%7C%220%22%29%3B%0Aif%28this%2Eoptions%2Emode%3D%3D%22absolute%22%29%7B%0Athis%2Eoptions%2Ex%2D%3Dthis%2EoriginalLeft%3B%0Athis%2Eoptions%2Ey%2D%3Dthis%2EoriginalTop%3B%0A%7D%0Aif%28%5F688%3D%3D%22none%22%29%7B%0As%2Evisibility%3D%5F687%3B%0As%2Edisplay%3D%5F688%3B%0A%7D%0A%7D%2Cupdate%3Afunction%28%5F689%29%7B%0AMochiKit%2EStyle%2EsetStyle%28this%2Eelement%2C%7Bleft%3AMath%2Eround%28this%2Eoptions%2Ex%2A%5F689%2Bthis%2EoriginalLeft%29%2B%22px%22%2Ctop%3AMath%2Eround%28this%2Eoptions%2Ey%2A%5F689%2Bthis%2EoriginalTop%29%2B%22px%22%7D%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EVisual%2EScale%3Dfunction%28%5F68a%2C%5F68b%2C%5F68c%29%7B%0Avar%20cls%3Darguments%2Ecallee%3B%0Aif%28%21%28this%20instanceof%20cls%29%29%7B%0Areturn%20new%20cls%28%5F68a%2C%5F68b%2C%5F68c%29%3B%0A%7D%0Athis%2E%5F%5Finit%5F%5F%28%5F68a%2C%5F68b%2C%5F68c%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EScale%2Eprototype%3Dnew%20MochiKit%2EVisual%2EBase%28%29%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EVisual%2EScale%2Eprototype%2C%7B%5F%5Fclass%5F%5F%3AMochiKit%2EVisual%2EScale%2C%5F%5Finit%5F%5F%3Afunction%28%5F68e%2C%5F68f%2C%5F690%29%7B%0Athis%2Eelement%3DMochiKit%2EDOM%2EgetElement%28%5F68e%29%3B%0A%5F690%3DMochiKit%2EBase%2Eupdate%28%7BscaleX%3Atrue%2CscaleY%3Atrue%2CscaleContent%3Atrue%2CscaleFromCenter%3Afalse%2CscaleMode%3A%22box%22%2CscaleFrom%3A100%2CscaleTo%3A%5F68f%7D%2C%5F690%29%3B%0Athis%2Estart%28%5F690%29%3B%0A%7D%2Csetup%3Afunction%28%29%7B%0Athis%2ErestoreAfterFinish%3Dthis%2Eoptions%2ErestoreAfterFinish%7C%7Cfalse%3B%0Athis%2EelementPositioning%3DMochiKit%2EStyle%2EgetStyle%28this%2Eelement%2C%22position%22%29%3B%0Avar%20ma%3DMochiKit%2EBase%2Emap%3B%0Avar%20b%3DMochiKit%2EBase%2Ebind%3B%0Athis%2EoriginalStyle%3D%7B%7D%3B%0Ama%28b%28function%28k%29%7B%0Athis%2EoriginalStyle%5Bk%5D%3Dthis%2Eelement%2Estyle%5Bk%5D%3B%0A%7D%2Cthis%29%2C%5B%22top%22%2C%22left%22%2C%22width%22%2C%22height%22%2C%22fontSize%22%5D%29%3B%0Athis%2EoriginalTop%3Dthis%2Eelement%2EoffsetTop%3B%0Athis%2EoriginalLeft%3Dthis%2Eelement%2EoffsetLeft%3B%0Avar%20%5F694%3DMochiKit%2EStyle%2EgetStyle%28this%2Eelement%2C%22font%2Dsize%22%29%7C%7C%22100%25%22%3B%0Ama%28b%28function%28%5F695%29%7B%0Aif%28%5F694%2EindexOf%28%5F695%29%3E0%29%7B%0Athis%2EfontSize%3DparseFloat%28%5F694%29%3B%0Athis%2EfontSizeType%3D%5F695%3B%0A%7D%0A%7D%2Cthis%29%2C%5B%22em%22%2C%22px%22%2C%22%25%22%5D%29%3B%0Athis%2Efactor%3D%28this%2Eoptions%2EscaleTo%2Dthis%2Eoptions%2EscaleFrom%29%2F100%3B%0Aif%28%2F%5Econtent%2F%2Etest%28this%2Eoptions%2EscaleMode%29%29%7B%0Athis%2Edims%3D%5Bthis%2Eelement%2EscrollHeight%2Cthis%2Eelement%2EscrollWidth%5D%3B%0A%7Delse%7B%0Aif%28this%2Eoptions%2EscaleMode%3D%3D%22box%22%29%7B%0Athis%2Edims%3D%5Bthis%2Eelement%2EoffsetHeight%2Cthis%2Eelement%2EoffsetWidth%5D%3B%0A%7Delse%7B%0Athis%2Edims%3D%5Bthis%2Eoptions%2EscaleMode%2EoriginalHeight%2Cthis%2Eoptions%2EscaleMode%2EoriginalWidth%5D%3B%0A%7D%0A%7D%0A%7D%2Cupdate%3Afunction%28%5F696%29%7B%0Avar%20%5F697%3D%28this%2Eoptions%2EscaleFrom%2F100%29%2B%28this%2Efactor%2A%5F696%29%3B%0Aif%28this%2Eoptions%2EscaleContent%26%26this%2EfontSize%29%7B%0AMochiKit%2EStyle%2EsetStyle%28this%2Eelement%2C%7BfontSize%3Athis%2EfontSize%2A%5F697%2Bthis%2EfontSizeType%7D%29%3B%0A%7D%0Athis%2EsetDimensions%28this%2Edims%5B0%5D%2A%5F697%2Cthis%2Edims%5B1%5D%2A%5F697%29%3B%0A%7D%2Cfinish%3Afunction%28%29%7B%0Aif%28this%2ErestoreAfterFinish%29%7B%0AMochiKit%2EStyle%2EsetStyle%28this%2Eelement%2Cthis%2EoriginalStyle%29%3B%0A%7D%0A%7D%2CsetDimensions%3Afunction%28%5F698%2C%5F699%29%7B%0Avar%20d%3D%7B%7D%3B%0Avar%20r%3DMath%2Eround%3B%0Aif%28%2FMSIE%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0Ar%3DMath%2Eceil%3B%0A%7D%0Aif%28this%2Eoptions%2EscaleX%29%7B%0Ad%2Ewidth%3Dr%28%5F699%29%2B%22px%22%3B%0A%7D%0Aif%28this%2Eoptions%2EscaleY%29%7B%0Ad%2Eheight%3Dr%28%5F698%29%2B%22px%22%3B%0A%7D%0Aif%28this%2Eoptions%2EscaleFromCenter%29%7B%0Avar%20topd%3D%28%5F698%2Dthis%2Edims%5B0%5D%29%2F2%3B%0Avar%20%5F69d%3D%28%5F699%2Dthis%2Edims%5B1%5D%29%2F2%3B%0Aif%28this%2EelementPositioning%3D%3D%22absolute%22%29%7B%0Aif%28this%2Eoptions%2EscaleY%29%7B%0Ad%2Etop%3Dthis%2EoriginalTop%2Dtopd%2B%22px%22%3B%0A%7D%0Aif%28this%2Eoptions%2EscaleX%29%7B%0Ad%2Eleft%3Dthis%2EoriginalLeft%2D%5F69d%2B%22px%22%3B%0A%7D%0A%7Delse%7B%0Aif%28this%2Eoptions%2EscaleY%29%7B%0Ad%2Etop%3D%2Dtopd%2B%22px%22%3B%0A%7D%0Aif%28this%2Eoptions%2EscaleX%29%7B%0Ad%2Eleft%3D%2D%5F69d%2B%22px%22%3B%0A%7D%0A%7D%0A%7D%0AMochiKit%2EStyle%2EsetStyle%28this%2Eelement%2Cd%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EVisual%2EHighlight%3Dfunction%28%5F69e%2C%5F69f%29%7B%0Avar%20cls%3Darguments%2Ecallee%3B%0Aif%28%21%28this%20instanceof%20cls%29%29%7B%0Areturn%20new%20cls%28%5F69e%2C%5F69f%29%3B%0A%7D%0Athis%2E%5F%5Finit%5F%5F%28%5F69e%2C%5F69f%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EHighlight%2Eprototype%3Dnew%20MochiKit%2EVisual%2EBase%28%29%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EVisual%2EHighlight%2Eprototype%2C%7B%5F%5Fclass%5F%5F%3AMochiKit%2EVisual%2EHighlight%2C%5F%5Finit%5F%5F%3Afunction%28%5F6a1%2C%5F6a2%29%7B%0Athis%2Eelement%3DMochiKit%2EDOM%2EgetElement%28%5F6a1%29%3B%0A%5F6a2%3DMochiKit%2EBase%2Eupdate%28%7Bstartcolor%3A%22%23ffff99%22%7D%2C%5F6a2%29%3B%0Athis%2Estart%28%5F6a2%29%3B%0A%7D%2Csetup%3Afunction%28%29%7B%0Avar%20b%3DMochiKit%2EBase%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0Aif%28s%2EgetStyle%28this%2Eelement%2C%22display%22%29%3D%3D%22none%22%29%7B%0Athis%2Ecancel%28%29%3B%0Areturn%3B%0A%7D%0Athis%2EoldStyle%3D%7BbackgroundImage%3As%2EgetStyle%28this%2Eelement%2C%22background%2Dimage%22%29%7D%3B%0As%2EsetStyle%28this%2Eelement%2C%7BbackgroundImage%3A%22none%22%7D%29%3B%0Aif%28%21this%2Eoptions%2Eendcolor%29%7B%0Athis%2Eoptions%2Eendcolor%3DMochiKit%2EColor%2EColor%2EfromBackground%28this%2Eelement%29%2EtoHexString%28%29%3B%0A%7D%0Aif%28b%2EisUndefinedOrNull%28this%2Eoptions%2Erestorecolor%29%29%7B%0Athis%2Eoptions%2Erestorecolor%3Ds%2EgetStyle%28this%2Eelement%2C%22background%2Dcolor%22%29%3B%0A%7D%0Athis%2E%5Fbase%3Db%2Emap%28b%2Ebind%28function%28i%29%7B%0Areturn%20parseInt%28this%2Eoptions%2Estartcolor%2Eslice%28i%2A2%2B1%2Ci%2A2%2B3%29%2C16%29%3B%0A%7D%2Cthis%29%2C%5B0%2C1%2C2%5D%29%3B%0Athis%2E%5Fdelta%3Db%2Emap%28b%2Ebind%28function%28i%29%7B%0Areturn%20parseInt%28this%2Eoptions%2Eendcolor%2Eslice%28i%2A2%2B1%2Ci%2A2%2B3%29%2C16%29%2Dthis%2E%5Fbase%5Bi%5D%3B%0A%7D%2Cthis%29%2C%5B0%2C1%2C2%5D%29%3B%0A%7D%2Cupdate%3Afunction%28%5F6a7%29%7B%0Avar%20m%3D%22%23%22%3B%0AMochiKit%2EBase%2Emap%28MochiKit%2EBase%2Ebind%28function%28i%29%7B%0Am%2B%3DMochiKit%2EColor%2EtoColorPart%28Math%2Eround%28this%2E%5Fbase%5Bi%5D%2Bthis%2E%5Fdelta%5Bi%5D%2A%5F6a7%29%29%3B%0A%7D%2Cthis%29%2C%5B0%2C1%2C2%5D%29%3B%0AMochiKit%2EStyle%2EsetStyle%28this%2Eelement%2C%7BbackgroundColor%3Am%7D%29%3B%0A%7D%2Cfinish%3Afunction%28%29%7B%0AMochiKit%2EStyle%2EsetStyle%28this%2Eelement%2CMochiKit%2EBase%2Eupdate%28this%2EoldStyle%2C%7BbackgroundColor%3Athis%2Eoptions%2Erestorecolor%7D%29%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EVisual%2EScrollTo%3Dfunction%28%5F6aa%2C%5F6ab%29%7B%0Avar%20cls%3Darguments%2Ecallee%3B%0Aif%28%21%28this%20instanceof%20cls%29%29%7B%0Areturn%20new%20cls%28%5F6aa%2C%5F6ab%29%3B%0A%7D%0Athis%2E%5F%5Finit%5F%5F%28%5F6aa%2C%5F6ab%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EScrollTo%2Eprototype%3Dnew%20MochiKit%2EVisual%2EBase%28%29%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EVisual%2EScrollTo%2Eprototype%2C%7B%5F%5Fclass%5F%5F%3AMochiKit%2EVisual%2EScrollTo%2C%5F%5Finit%5F%5F%3Afunction%28%5F6ad%2C%5F6ae%29%7B%0Athis%2Eelement%3DMochiKit%2EDOM%2EgetElement%28%5F6ad%29%3B%0Athis%2Estart%28%5F6ae%29%3B%0A%7D%2Csetup%3Afunction%28%29%7B%0Avar%20p%3DMochiKit%2EPosition%3B%0Ap%2Eprepare%28%29%3B%0Avar%20%5F6b0%3Dp%2EcumulativeOffset%28this%2Eelement%29%3B%0Aif%28this%2Eoptions%2Eoffset%29%7B%0A%5F6b0%2Ey%2B%3Dthis%2Eoptions%2Eoffset%3B%0A%7D%0Avar%20max%3B%0Aif%28window%2EinnerHeight%29%7B%0Amax%3Dwindow%2EinnerHeight%2Dwindow%2Eheight%3B%0A%7Delse%7B%0Aif%28document%2EdocumentElement%26%26document%2EdocumentElement%2EclientHeight%29%7B%0Amax%3Ddocument%2EdocumentElement%2EclientHeight%2Ddocument%2Ebody%2EscrollHeight%3B%0A%7Delse%7B%0Aif%28document%2Ebody%29%7B%0Amax%3Ddocument%2Ebody%2EclientHeight%2Ddocument%2Ebody%2EscrollHeight%3B%0A%7D%0A%7D%0A%7D%0Athis%2EscrollStart%3Dp%2EwindowOffset%2Ey%3B%0Athis%2Edelta%3D%28%5F6b0%2Ey%3Emax%3Fmax%3A%5F6b0%2Ey%29%2Dthis%2EscrollStart%3B%0A%7D%2Cupdate%3Afunction%28%5F6b2%29%7B%0Avar%20p%3DMochiKit%2EPosition%3B%0Ap%2Eprepare%28%29%3B%0Awindow%2EscrollTo%28p%2EwindowOffset%2Ex%2Cthis%2EscrollStart%2B%28%5F6b2%2Athis%2Edelta%29%29%3B%0A%7D%7D%29%3B%0AMochiKit%2EVisual%2ECSS%5FLENGTH%3D%2F%5E%28%28%5B%5C%2B%5C%2D%5D%3F%5B0%2D9%5C%2E%5D%2B%29%28em%7Cex%7Cpx%7Cin%7Ccm%7Cmm%7Cpt%7Cpc%7C%5C%25%29%29%7C0%24%2F%3B%0AMochiKit%2EVisual%2EMorph%3Dfunction%28%5F6b4%2C%5F6b5%29%7B%0Avar%20cls%3Darguments%2Ecallee%3B%0Aif%28%21%28this%20instanceof%20cls%29%29%7B%0Areturn%20new%20cls%28%5F6b4%2C%5F6b5%29%3B%0A%7D%0Athis%2E%5F%5Finit%5F%5F%28%5F6b4%2C%5F6b5%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EMorph%2Eprototype%3Dnew%20MochiKit%2EVisual%2EBase%28%29%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2EVisual%2EMorph%2Eprototype%2C%7B%5F%5Fclass%5F%5F%3AMochiKit%2EVisual%2EMorph%2C%5F%5Finit%5F%5F%3Afunction%28%5F6b7%2C%5F6b8%29%7B%0Athis%2Eelement%3DMochiKit%2EDOM%2EgetElement%28%5F6b7%29%3B%0Athis%2Estart%28%5F6b8%29%3B%0A%7D%2Csetup%3Afunction%28%29%7B%0Avar%20b%3DMochiKit%2EBase%3B%0Avar%20%5F6ba%3Dthis%2Eoptions%2Estyle%3B%0Athis%2EstyleStart%3D%7B%7D%3B%0Athis%2EstyleEnd%3D%7B%7D%3B%0Athis%2Eunits%3D%7B%7D%3B%0Avar%20%5F6bb%2Cunit%3B%0Afor%28var%20s%20in%20%5F6ba%29%7B%0A%5F6bb%3D%5F6ba%5Bs%5D%3B%0As%3Db%2Ecamelize%28s%29%3B%0Aif%28MochiKit%2EVisual%2ECSS%5FLENGTH%2Etest%28%5F6bb%29%29%7B%0Avar%20%5F6be%3D%5F6bb%2Ematch%28%2F%5E%28%5B%5C%2B%5C%2D%5D%3F%5B0%2D9%5C%2E%5D%2B%29%28%2E%2A%29%24%2F%29%3B%0A%5F6bb%3DparseFloat%28%5F6be%5B1%5D%29%3B%0Aunit%3D%28%5F6be%2Elength%3D%3D3%29%3F%5F6be%5B2%5D%3Anull%3B%0Athis%2EstyleEnd%5Bs%5D%3D%5F6bb%3B%0Athis%2Eunits%5Bs%5D%3Dunit%3B%0A%5F6bb%3DMochiKit%2EStyle%2EgetStyle%28this%2Eelement%2Cs%29%3B%0A%5F6be%3D%5F6bb%2Ematch%28%2F%5E%28%5B%5C%2B%5C%2D%5D%3F%5B0%2D9%5C%2E%5D%2B%29%28%2E%2A%29%24%2F%29%3B%0A%5F6bb%3DparseFloat%28%5F6be%5B1%5D%29%3B%0Athis%2EstyleStart%5Bs%5D%3D%5F6bb%3B%0A%7Delse%7B%0Aif%28%2F%5BCc%5Dolor%24%2F%2Etest%28s%29%29%7B%0Avar%20c%3DMochiKit%2EColor%2EColor%3B%0A%5F6bb%3Dc%2EfromString%28%5F6bb%29%3B%0Aif%28%5F6bb%29%7B%0Athis%2Eunits%5Bs%5D%3D%22color%22%3B%0Athis%2EstyleEnd%5Bs%5D%3D%5F6bb%2EtoHexString%28%29%3B%0A%5F6bb%3DMochiKit%2EStyle%2EgetStyle%28this%2Eelement%2Cs%29%3B%0Athis%2EstyleStart%5Bs%5D%3Dc%2EfromString%28%5F6bb%29%2EtoHexString%28%29%3B%0Athis%2EstyleStart%5Bs%5D%3Db%2Emap%28b%2Ebind%28function%28i%29%7B%0Areturn%20parseInt%28this%2EstyleStart%5Bs%5D%2Eslice%28i%2A2%2B1%2Ci%2A2%2B3%29%2C16%29%3B%0A%7D%2Cthis%29%2C%5B0%2C1%2C2%5D%29%3B%0Athis%2EstyleEnd%5Bs%5D%3Db%2Emap%28b%2Ebind%28function%28i%29%7B%0Areturn%20parseInt%28this%2EstyleEnd%5Bs%5D%2Eslice%28i%2A2%2B1%2Ci%2A2%2B3%29%2C16%29%3B%0A%7D%2Cthis%29%2C%5B0%2C1%2C2%5D%29%3B%0A%7D%0A%7Delse%7B%0Athis%2Eelement%2Estyle%5Bs%5D%3D%5F6bb%3B%0A%7D%0A%7D%0A%7D%0A%7D%2Cupdate%3Afunction%28%5F6c2%29%7B%0Avar%20%5F6c3%3B%0Afor%28var%20s%20in%20this%2EstyleStart%29%7B%0Aif%28this%2Eunits%5Bs%5D%3D%3D%22color%22%29%7B%0Avar%20m%3D%22%23%22%3B%0Avar%20%5F6c6%3Dthis%2EstyleStart%5Bs%5D%3B%0Avar%20end%3Dthis%2EstyleEnd%5Bs%5D%3B%0AMochiKit%2EBase%2Emap%28MochiKit%2EBase%2Ebind%28function%28i%29%7B%0Am%2B%3DMochiKit%2EColor%2EtoColorPart%28Math%2Eround%28%5F6c6%5Bi%5D%2B%28end%5Bi%5D%2D%5F6c6%5Bi%5D%29%2A%5F6c2%29%29%3B%0A%7D%2Cthis%29%2C%5B0%2C1%2C2%5D%29%3B%0Athis%2Eelement%2Estyle%5Bs%5D%3Dm%3B%0A%7Delse%7B%0A%5F6c3%3Dthis%2EstyleStart%5Bs%5D%2BMath%2Eround%28%28this%2EstyleEnd%5Bs%5D%2Dthis%2EstyleStart%5Bs%5D%29%2A%5F6c2%2A1000%29%2F1000%2Bthis%2Eunits%5Bs%5D%3B%0Athis%2Eelement%2Estyle%5Bs%5D%3D%5F6c3%3B%0A%7D%0A%7D%0A%7D%7D%29%3B%0AMochiKit%2EVisual%2Efade%3Dfunction%28%5F6c9%2C%5F6ca%29%7B%0Avar%20s%3DMochiKit%2EStyle%3B%0Avar%20%5F6cc%3Ds%2EgetStyle%28%5F6c9%2C%22opacity%22%29%3B%0A%5F6ca%3DMochiKit%2EBase%2Eupdate%28%7Bfrom%3As%2EgetStyle%28%5F6c9%2C%22opacity%22%29%7C%7C1%2Cto%3A0%2CafterFinishInternal%3Afunction%28%5F6cd%29%7B%0Aif%28%5F6cd%2Eoptions%2Eto%21%3D%3D0%29%7B%0Areturn%3B%0A%7D%0As%2EhideElement%28%5F6cd%2Eelement%29%3B%0As%2EsetStyle%28%5F6cd%2Eelement%2C%7B%22opacity%22%3A%5F6cc%7D%29%3B%0A%7D%7D%2C%5F6ca%29%3B%0Areturn%20new%20MochiKit%2EVisual%2EOpacity%28%5F6c9%2C%5F6ca%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2Eappear%3Dfunction%28%5F6ce%2C%5F6cf%29%7B%0Avar%20s%3DMochiKit%2EStyle%3B%0Avar%20v%3DMochiKit%2EVisual%3B%0A%5F6cf%3DMochiKit%2EBase%2Eupdate%28%7Bfrom%3A%28s%2EgetStyle%28%5F6ce%2C%22display%22%29%3D%3D%22none%22%3F0%3As%2EgetStyle%28%5F6ce%2C%22opacity%22%29%7C%7C0%29%2Cto%3A1%2CafterFinishInternal%3Afunction%28%5F6d2%29%7B%0Av%2EforceRerendering%28%5F6d2%2Eelement%29%3B%0A%7D%2CbeforeSetupInternal%3Afunction%28%5F6d3%29%7B%0As%2EsetStyle%28%5F6d3%2Eelement%2C%7B%22opacity%22%3A%5F6d3%2Eoptions%2Efrom%7D%29%3B%0As%2EshowElement%28%5F6d3%2Eelement%29%3B%0A%7D%7D%2C%5F6cf%29%3B%0Areturn%20new%20v%2EOpacity%28%5F6ce%2C%5F6cf%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2Epuff%3Dfunction%28%5F6d4%2C%5F6d5%29%7B%0Avar%20s%3DMochiKit%2EStyle%3B%0Avar%20v%3DMochiKit%2EVisual%3B%0A%5F6d4%3DMochiKit%2EDOM%2EgetElement%28%5F6d4%29%3B%0Avar%20%5F6d8%3DMochiKit%2EStyle%2EgetElementDimensions%28%5F6d4%2Ctrue%29%3B%0Avar%20%5F6d9%3D%7Bposition%3As%2EgetStyle%28%5F6d4%2C%22position%22%29%2Ctop%3A%5F6d4%2Estyle%2Etop%2Cleft%3A%5F6d4%2Estyle%2Eleft%2Cwidth%3A%5F6d4%2Estyle%2Ewidth%2Cheight%3A%5F6d4%2Estyle%2Eheight%2Copacity%3As%2EgetStyle%28%5F6d4%2C%22opacity%22%29%7D%3B%0A%5F6d5%3DMochiKit%2EBase%2Eupdate%28%7BbeforeSetupInternal%3Afunction%28%5F6da%29%7B%0AMochiKit%2EPosition%2Eabsolutize%28%5F6da%2Eeffects%5B0%5D%2Eelement%29%3B%0A%7D%2CafterFinishInternal%3Afunction%28%5F6db%29%7B%0As%2EhideElement%28%5F6db%2Eeffects%5B0%5D%2Eelement%29%3B%0As%2EsetStyle%28%5F6db%2Eeffects%5B0%5D%2Eelement%2C%5F6d9%29%3B%0A%7D%2CscaleContent%3Atrue%2CscaleFromCenter%3Atrue%7D%2C%5F6d5%29%3B%0Areturn%20new%20v%2EParallel%28%5Bnew%20v%2EScale%28%5F6d4%2C200%2C%7Bsync%3Atrue%2CscaleFromCenter%3A%5F6d5%2EscaleFromCenter%2CscaleMode%3A%7BoriginalHeight%3A%5F6d8%2Eh%2CoriginalWidth%3A%5F6d8%2Ew%7D%2CscaleContent%3A%5F6d5%2EscaleContent%2CrestoreAfterFinish%3Atrue%7D%29%2Cnew%20v%2EOpacity%28%5F6d4%2C%7Bsync%3Atrue%2Cto%3A0%7D%29%5D%2C%5F6d5%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EblindUp%3Dfunction%28%5F6dc%2C%5F6dd%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0A%5F6dc%3Dd%2EgetElement%28%5F6dc%29%3B%0Avar%20%5F6e0%3Ds%2EgetElementDimensions%28%5F6dc%2Ctrue%29%3B%0Avar%20%5F6e1%3Ds%2EmakeClipping%28%5F6dc%29%3B%0A%5F6dd%3DMochiKit%2EBase%2Eupdate%28%7BscaleContent%3Afalse%2CscaleX%3Afalse%2CscaleMode%3A%7BoriginalHeight%3A%5F6e0%2Eh%2CoriginalWidth%3A%5F6e0%2Ew%7D%2CrestoreAfterFinish%3Atrue%2CafterFinishInternal%3Afunction%28%5F6e2%29%7B%0As%2EhideElement%28%5F6e2%2Eelement%29%3B%0As%2EundoClipping%28%5F6e2%2Eelement%2C%5F6e1%29%3B%0A%7D%7D%2C%5F6dd%29%3B%0Areturn%20new%20MochiKit%2EVisual%2EScale%28%5F6dc%2C0%2C%5F6dd%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EblindDown%3Dfunction%28%5F6e3%2C%5F6e4%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0A%5F6e3%3Dd%2EgetElement%28%5F6e3%29%3B%0Avar%20%5F6e7%3Ds%2EgetElementDimensions%28%5F6e3%2Ctrue%29%3B%0Avar%20%5F6e8%3B%0A%5F6e4%3DMochiKit%2EBase%2Eupdate%28%7BscaleContent%3Afalse%2CscaleX%3Afalse%2CscaleFrom%3A0%2CscaleMode%3A%7BoriginalHeight%3A%5F6e7%2Eh%2CoriginalWidth%3A%5F6e7%2Ew%7D%2CrestoreAfterFinish%3Atrue%2CafterSetupInternal%3Afunction%28%5F6e9%29%7B%0A%5F6e8%3Ds%2EmakeClipping%28%5F6e9%2Eelement%29%3B%0As%2EsetStyle%28%5F6e9%2Eelement%2C%7Bheight%3A%220px%22%7D%29%3B%0As%2EshowElement%28%5F6e9%2Eelement%29%3B%0A%7D%2CafterFinishInternal%3Afunction%28%5F6ea%29%7B%0As%2EundoClipping%28%5F6ea%2Eelement%2C%5F6e8%29%3B%0A%7D%7D%2C%5F6e4%29%3B%0Areturn%20new%20MochiKit%2EVisual%2EScale%28%5F6e3%2C100%2C%5F6e4%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EswitchOff%3Dfunction%28%5F6eb%2C%5F6ec%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0A%5F6eb%3Dd%2EgetElement%28%5F6eb%29%3B%0Avar%20%5F6ef%3Ds%2EgetElementDimensions%28%5F6eb%2Ctrue%29%3B%0Avar%20%5F6f0%3Ds%2EgetStyle%28%5F6eb%2C%22opacity%22%29%3B%0Avar%20%5F6f1%3B%0A%5F6ec%3DMochiKit%2EBase%2Eupdate%28%7Bduration%3A0%2E7%2CrestoreAfterFinish%3Atrue%2CbeforeSetupInternal%3Afunction%28%5F6f2%29%7B%0As%2EmakePositioned%28%5F6eb%29%3B%0A%5F6f1%3Ds%2EmakeClipping%28%5F6eb%29%3B%0A%7D%2CafterFinishInternal%3Afunction%28%5F6f3%29%7B%0As%2EhideElement%28%5F6eb%29%3B%0As%2EundoClipping%28%5F6eb%2C%5F6f1%29%3B%0As%2EundoPositioned%28%5F6eb%29%3B%0As%2EsetStyle%28%5F6eb%2C%7B%22opacity%22%3A%5F6f0%7D%29%3B%0A%7D%7D%2C%5F6ec%29%3B%0Avar%20v%3DMochiKit%2EVisual%3B%0Areturn%20new%20v%2ESequence%28%5Bnew%20v%2Eappear%28%5F6eb%2C%7Bsync%3Atrue%2Cduration%3A0%2E57%2A%5F6ec%2Eduration%2Cfrom%3A0%2Ctransition%3Av%2ETransitions%2Eflicker%7D%29%2Cnew%20v%2EScale%28%5F6eb%2C1%2C%7Bsync%3Atrue%2Cduration%3A0%2E43%2A%5F6ec%2Eduration%2CscaleFromCenter%3Atrue%2CscaleX%3Afalse%2CscaleMode%3A%7BoriginalHeight%3A%5F6ef%2Eh%2CoriginalWidth%3A%5F6ef%2Ew%7D%2CscaleContent%3Afalse%2CrestoreAfterFinish%3Atrue%7D%29%5D%2C%5F6ec%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EdropOut%3Dfunction%28%5F6f5%2C%5F6f6%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0A%5F6f5%3Dd%2EgetElement%28%5F6f5%29%3B%0Avar%20%5F6f9%3D%7Btop%3As%2EgetStyle%28%5F6f5%2C%22top%22%29%2Cleft%3As%2EgetStyle%28%5F6f5%2C%22left%22%29%2Copacity%3As%2EgetStyle%28%5F6f5%2C%22opacity%22%29%7D%3B%0A%5F6f6%3DMochiKit%2EBase%2Eupdate%28%7Bduration%3A0%2E5%2Cdistance%3A100%2CbeforeSetupInternal%3Afunction%28%5F6fa%29%7B%0As%2EmakePositioned%28%5F6fa%2Eeffects%5B0%5D%2Eelement%29%3B%0A%7D%2CafterFinishInternal%3Afunction%28%5F6fb%29%7B%0As%2EhideElement%28%5F6fb%2Eeffects%5B0%5D%2Eelement%29%3B%0As%2EundoPositioned%28%5F6fb%2Eeffects%5B0%5D%2Eelement%29%3B%0As%2EsetStyle%28%5F6fb%2Eeffects%5B0%5D%2Eelement%2C%5F6f9%29%3B%0A%7D%7D%2C%5F6f6%29%3B%0Avar%20v%3DMochiKit%2EVisual%3B%0Areturn%20new%20v%2EParallel%28%5Bnew%20v%2EMove%28%5F6f5%2C%7Bx%3A0%2Cy%3A%5F6f6%2Edistance%2Csync%3Atrue%7D%29%2Cnew%20v%2EOpacity%28%5F6f5%2C%7Bsync%3Atrue%2Cto%3A0%7D%29%5D%2C%5F6f6%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2Eshake%3Dfunction%28%5F6fd%2C%5F6fe%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20v%3DMochiKit%2EVisual%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0A%5F6fd%3Dd%2EgetElement%28%5F6fd%29%3B%0Avar%20%5F702%3D%7Btop%3As%2EgetStyle%28%5F6fd%2C%22top%22%29%2Cleft%3As%2EgetStyle%28%5F6fd%2C%22left%22%29%7D%3B%0A%5F6fe%3DMochiKit%2EBase%2Eupdate%28%7Bduration%3A0%2E5%2CafterFinishInternal%3Afunction%28%5F703%29%7B%0As%2EundoPositioned%28%5F6fd%29%3B%0As%2EsetStyle%28%5F6fd%2C%5F702%29%3B%0A%7D%7D%2C%5F6fe%29%3B%0Areturn%20new%20v%2ESequence%28%5Bnew%20v%2EMove%28%5F6fd%2C%7Bsync%3Atrue%2Cduration%3A0%2E1%2A%5F6fe%2Eduration%2Cx%3A20%2Cy%3A0%7D%29%2Cnew%20v%2EMove%28%5F6fd%2C%7Bsync%3Atrue%2Cduration%3A0%2E2%2A%5F6fe%2Eduration%2Cx%3A%2D40%2Cy%3A0%7D%29%2Cnew%20v%2EMove%28%5F6fd%2C%7Bsync%3Atrue%2Cduration%3A0%2E2%2A%5F6fe%2Eduration%2Cx%3A40%2Cy%3A0%7D%29%2Cnew%20v%2EMove%28%5F6fd%2C%7Bsync%3Atrue%2Cduration%3A0%2E2%2A%5F6fe%2Eduration%2Cx%3A%2D40%2Cy%3A0%7D%29%2Cnew%20v%2EMove%28%5F6fd%2C%7Bsync%3Atrue%2Cduration%3A0%2E2%2A%5F6fe%2Eduration%2Cx%3A40%2Cy%3A0%7D%29%2Cnew%20v%2EMove%28%5F6fd%2C%7Bsync%3Atrue%2Cduration%3A0%2E1%2A%5F6fe%2Eduration%2Cx%3A%2D20%2Cy%3A0%7D%29%5D%2C%5F6fe%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EslideDown%3Dfunction%28%5F704%2C%5F705%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20b%3DMochiKit%2EBase%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0A%5F704%3Dd%2EgetElement%28%5F704%29%3B%0Aif%28%21%5F704%2EfirstChild%29%7B%0Athrow%20new%20Error%28%22MochiKit%2EVisual%2EslideDown%20must%20be%20used%20on%20a%20element%20with%20a%20child%22%29%3B%0A%7D%0Ad%2EremoveEmptyTextNodes%28%5F704%29%3B%0Avar%20%5F709%3Ds%2EgetStyle%28%5F704%2EfirstChild%2C%22bottom%22%29%7C%7C0%3B%0Avar%20%5F70a%3Ds%2EgetElementDimensions%28%5F704%2Ctrue%29%3B%0Avar%20%5F70b%3B%0A%5F705%3Db%2Eupdate%28%7BscaleContent%3Afalse%2CscaleX%3Afalse%2CscaleFrom%3A0%2CscaleMode%3A%7BoriginalHeight%3A%5F70a%2Eh%2CoriginalWidth%3A%5F70a%2Ew%7D%2CrestoreAfterFinish%3Atrue%2CafterSetupInternal%3Afunction%28%5F70c%29%7B%0As%2EmakePositioned%28%5F70c%2Eelement%29%3B%0As%2EmakePositioned%28%5F70c%2Eelement%2EfirstChild%29%3B%0Aif%28%2FOpera%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0As%2EsetStyle%28%5F70c%2Eelement%2C%7Btop%3A%22%22%7D%29%3B%0A%7D%0A%5F70b%3Ds%2EmakeClipping%28%5F70c%2Eelement%29%3B%0As%2EsetStyle%28%5F70c%2Eelement%2C%7Bheight%3A%220px%22%7D%29%3B%0As%2EshowElement%28%5F70c%2Eelement%29%3B%0A%7D%2CafterUpdateInternal%3Afunction%28%5F70d%29%7B%0Avar%20%5F70e%3Ds%2EgetElementDimensions%28%5F70d%2Eelement%2Ctrue%29%3B%0As%2EsetStyle%28%5F70d%2Eelement%2EfirstChild%2C%7Bbottom%3A%28%5F70d%2Edims%5B0%5D%2D%5F70e%2Eh%29%2B%22px%22%7D%29%3B%0A%7D%2CafterFinishInternal%3Afunction%28%5F70f%29%7B%0As%2EundoClipping%28%5F70f%2Eelement%2C%5F70b%29%3B%0Aif%28%2FMSIE%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0As%2EundoPositioned%28%5F70f%2Eelement%29%3B%0As%2EundoPositioned%28%5F70f%2Eelement%2EfirstChild%29%3B%0A%7Delse%7B%0As%2EundoPositioned%28%5F70f%2Eelement%2EfirstChild%29%3B%0As%2EundoPositioned%28%5F70f%2Eelement%29%3B%0A%7D%0As%2EsetStyle%28%5F70f%2Eelement%2EfirstChild%2C%7Bbottom%3A%5F709%7D%29%3B%0A%7D%7D%2C%5F705%29%3B%0Areturn%20new%20MochiKit%2EVisual%2EScale%28%5F704%2C100%2C%5F705%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EslideUp%3Dfunction%28%5F710%2C%5F711%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20b%3DMochiKit%2EBase%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0A%5F710%3Dd%2EgetElement%28%5F710%29%3B%0Aif%28%21%5F710%2EfirstChild%29%7B%0Athrow%20new%20Error%28%22MochiKit%2EVisual%2EslideUp%20must%20be%20used%20on%20a%20element%20with%20a%20child%22%29%3B%0A%7D%0Ad%2EremoveEmptyTextNodes%28%5F710%29%3B%0Avar%20%5F715%3Ds%2EgetStyle%28%5F710%2EfirstChild%2C%22bottom%22%29%3B%0Avar%20%5F716%3Ds%2EgetElementDimensions%28%5F710%2Ctrue%29%3B%0Avar%20%5F717%3B%0A%5F711%3Db%2Eupdate%28%7BscaleContent%3Afalse%2CscaleX%3Afalse%2CscaleMode%3A%7BoriginalHeight%3A%5F716%2Eh%2CoriginalWidth%3A%5F716%2Ew%7D%2CscaleFrom%3A100%2CrestoreAfterFinish%3Atrue%2CbeforeStartInternal%3Afunction%28%5F718%29%7B%0As%2EmakePositioned%28%5F718%2Eelement%29%3B%0As%2EmakePositioned%28%5F718%2Eelement%2EfirstChild%29%3B%0Aif%28%2FOpera%2F%2Etest%28navigator%2EuserAgent%29%29%7B%0As%2EsetStyle%28%5F718%2Eelement%2C%7Btop%3A%22%22%7D%29%3B%0A%7D%0A%5F717%3Ds%2EmakeClipping%28%5F718%2Eelement%29%3B%0As%2EshowElement%28%5F718%2Eelement%29%3B%0A%7D%2CafterUpdateInternal%3Afunction%28%5F719%29%7B%0Avar%20%5F71a%3Ds%2EgetElementDimensions%28%5F719%2Eelement%2Ctrue%29%3B%0As%2EsetStyle%28%5F719%2Eelement%2EfirstChild%2C%7Bbottom%3A%28%5F719%2Edims%5B0%5D%2D%5F71a%2Eh%29%2B%22px%22%7D%29%3B%0A%7D%2CafterFinishInternal%3Afunction%28%5F71b%29%7B%0As%2EhideElement%28%5F71b%2Eelement%29%3B%0As%2EundoClipping%28%5F71b%2Eelement%2C%5F717%29%3B%0As%2EundoPositioned%28%5F71b%2Eelement%2EfirstChild%29%3B%0As%2EundoPositioned%28%5F71b%2Eelement%29%3B%0As%2EsetStyle%28%5F71b%2Eelement%2EfirstChild%2C%7Bbottom%3A%5F715%7D%29%3B%0A%7D%7D%2C%5F711%29%3B%0Areturn%20new%20MochiKit%2EVisual%2EScale%28%5F710%2C0%2C%5F711%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2Esquish%3Dfunction%28%5F71c%2C%5F71d%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20b%3DMochiKit%2EBase%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0Avar%20%5F721%3Ds%2EgetElementDimensions%28%5F71c%2Ctrue%29%3B%0Avar%20%5F722%3B%0A%5F71d%3Db%2Eupdate%28%7BrestoreAfterFinish%3Atrue%2CscaleMode%3A%7BoriginalHeight%3A%5F721%2Ew%2CoriginalWidth%3A%5F721%2Eh%7D%2CbeforeSetupInternal%3Afunction%28%5F723%29%7B%0A%5F722%3Ds%2EmakeClipping%28%5F723%2Eelement%29%3B%0A%7D%2CafterFinishInternal%3Afunction%28%5F724%29%7B%0As%2EhideElement%28%5F724%2Eelement%29%3B%0As%2EundoClipping%28%5F724%2Eelement%2C%5F722%29%3B%0A%7D%7D%2C%5F71d%29%3B%0Areturn%20new%20MochiKit%2EVisual%2EScale%28%5F71c%2C%2FOpera%2F%2Etest%28navigator%2EuserAgent%29%3F1%3A0%2C%5F71d%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2Egrow%3Dfunction%28%5F725%2C%5F726%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20v%3DMochiKit%2EVisual%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0A%5F725%3Dd%2EgetElement%28%5F725%29%3B%0A%5F726%3DMochiKit%2EBase%2Eupdate%28%7Bdirection%3A%22center%22%2CmoveTransition%3Av%2ETransitions%2Esinoidal%2CscaleTransition%3Av%2ETransitions%2Esinoidal%2CopacityTransition%3Av%2ETransitions%2Efull%2CscaleContent%3Atrue%2CscaleFromCenter%3Afalse%7D%2C%5F726%29%3B%0Avar%20%5F72a%3D%7Btop%3A%5F725%2Estyle%2Etop%2Cleft%3A%5F725%2Estyle%2Eleft%2Cheight%3A%5F725%2Estyle%2Eheight%2Cwidth%3A%5F725%2Estyle%2Ewidth%2Copacity%3As%2EgetStyle%28%5F725%2C%22opacity%22%29%7D%3B%0Avar%20dims%3Ds%2EgetElementDimensions%28%5F725%2Ctrue%29%3B%0Avar%20%5F72c%2C%5F72d%3B%0Avar%20%5F72e%2C%5F72f%3B%0Aswitch%28%5F726%2Edirection%29%7B%0Acase%20%22top%2Dleft%22%3A%0A%5F72c%3D%5F72d%3D%5F72e%3D%5F72f%3D0%3B%0Abreak%3B%0Acase%20%22top%2Dright%22%3A%0A%5F72c%3Ddims%2Ew%3B%0A%5F72d%3D%5F72f%3D0%3B%0A%5F72e%3D%2Ddims%2Ew%3B%0Abreak%3B%0Acase%20%22bottom%2Dleft%22%3A%0A%5F72c%3D%5F72e%3D0%3B%0A%5F72d%3Ddims%2Eh%3B%0A%5F72f%3D%2Ddims%2Eh%3B%0Abreak%3B%0Acase%20%22bottom%2Dright%22%3A%0A%5F72c%3Ddims%2Ew%3B%0A%5F72d%3Ddims%2Eh%3B%0A%5F72e%3D%2Ddims%2Ew%3B%0A%5F72f%3D%2Ddims%2Eh%3B%0Abreak%3B%0Acase%20%22center%22%3A%0A%5F72c%3Ddims%2Ew%2F2%3B%0A%5F72d%3Ddims%2Eh%2F2%3B%0A%5F72e%3D%2Ddims%2Ew%2F2%3B%0A%5F72f%3D%2Ddims%2Eh%2F2%3B%0Abreak%3B%0A%7D%0Avar%20%5F730%3DMochiKit%2EBase%2Eupdate%28%7BbeforeSetupInternal%3Afunction%28%5F731%29%7B%0As%2EsetStyle%28%5F731%2Eeffects%5B0%5D%2Eelement%2C%7Bheight%3A%220px%22%7D%29%3B%0As%2EshowElement%28%5F731%2Eeffects%5B0%5D%2Eelement%29%3B%0A%7D%2CafterFinishInternal%3Afunction%28%5F732%29%7B%0As%2EundoClipping%28%5F732%2Eeffects%5B0%5D%2Eelement%29%3B%0As%2EundoPositioned%28%5F732%2Eeffects%5B0%5D%2Eelement%29%3B%0As%2EsetStyle%28%5F732%2Eeffects%5B0%5D%2Eelement%2C%5F72a%29%3B%0A%7D%7D%2C%5F726%29%3B%0Areturn%20new%20v%2EMove%28%5F725%2C%7Bx%3A%5F72c%2Cy%3A%5F72d%2Cduration%3A0%2E01%2CbeforeSetupInternal%3Afunction%28%5F733%29%7B%0As%2EhideElement%28%5F733%2Eelement%29%3B%0As%2EmakeClipping%28%5F733%2Eelement%29%3B%0As%2EmakePositioned%28%5F733%2Eelement%29%3B%0A%7D%2CafterFinishInternal%3Afunction%28%5F734%29%7B%0Anew%20v%2EParallel%28%5Bnew%20v%2EOpacity%28%5F734%2Eelement%2C%7Bsync%3Atrue%2Cto%3A1%2Cfrom%3A0%2Ctransition%3A%5F726%2EopacityTransition%7D%29%2Cnew%20v%2EMove%28%5F734%2Eelement%2C%7Bx%3A%5F72e%2Cy%3A%5F72f%2Csync%3Atrue%2Ctransition%3A%5F726%2EmoveTransition%7D%29%2Cnew%20v%2EScale%28%5F734%2Eelement%2C100%2C%7BscaleMode%3A%7BoriginalHeight%3Adims%2Eh%2CoriginalWidth%3Adims%2Ew%7D%2Csync%3Atrue%2CscaleFrom%3A%2FOpera%2F%2Etest%28navigator%2EuserAgent%29%3F1%3A0%2Ctransition%3A%5F726%2EscaleTransition%2CscaleContent%3A%5F726%2EscaleContent%2CscaleFromCenter%3A%5F726%2EscaleFromCenter%2CrestoreAfterFinish%3Atrue%7D%29%5D%2C%5F730%29%3B%0A%7D%7D%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2Eshrink%3Dfunction%28%5F735%2C%5F736%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20v%3DMochiKit%2EVisual%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0A%5F735%3Dd%2EgetElement%28%5F735%29%3B%0A%5F736%3DMochiKit%2EBase%2Eupdate%28%7Bdirection%3A%22center%22%2CmoveTransition%3Av%2ETransitions%2Esinoidal%2CscaleTransition%3Av%2ETransitions%2Esinoidal%2CopacityTransition%3Av%2ETransitions%2Enone%2CscaleContent%3Atrue%2CscaleFromCenter%3Afalse%7D%2C%5F736%29%3B%0Avar%20%5F73a%3D%7Btop%3A%5F735%2Estyle%2Etop%2Cleft%3A%5F735%2Estyle%2Eleft%2Cheight%3A%5F735%2Estyle%2Eheight%2Cwidth%3A%5F735%2Estyle%2Ewidth%2Copacity%3As%2EgetStyle%28%5F735%2C%22opacity%22%29%7D%3B%0Avar%20dims%3Ds%2EgetElementDimensions%28%5F735%2Ctrue%29%3B%0Avar%20%5F73c%2C%5F73d%3B%0Aswitch%28%5F736%2Edirection%29%7B%0Acase%20%22top%2Dleft%22%3A%0A%5F73c%3D%5F73d%3D0%3B%0Abreak%3B%0Acase%20%22top%2Dright%22%3A%0A%5F73c%3Ddims%2Ew%3B%0A%5F73d%3D0%3B%0Abreak%3B%0Acase%20%22bottom%2Dleft%22%3A%0A%5F73c%3D0%3B%0A%5F73d%3Ddims%2Eh%3B%0Abreak%3B%0Acase%20%22bottom%2Dright%22%3A%0A%5F73c%3Ddims%2Ew%3B%0A%5F73d%3Ddims%2Eh%3B%0Abreak%3B%0Acase%20%22center%22%3A%0A%5F73c%3Ddims%2Ew%2F2%3B%0A%5F73d%3Ddims%2Eh%2F2%3B%0Abreak%3B%0A%7D%0Avar%20%5F73e%3B%0Avar%20%5F73f%3DMochiKit%2EBase%2Eupdate%28%7BbeforeStartInternal%3Afunction%28%5F740%29%7B%0As%2EmakePositioned%28%5F740%2Eeffects%5B0%5D%2Eelement%29%3B%0A%5F73e%3Ds%2EmakeClipping%28%5F740%2Eeffects%5B0%5D%2Eelement%29%3B%0A%7D%2CafterFinishInternal%3Afunction%28%5F741%29%7B%0As%2EhideElement%28%5F741%2Eeffects%5B0%5D%2Eelement%29%3B%0As%2EundoClipping%28%5F741%2Eeffects%5B0%5D%2Eelement%2C%5F73e%29%3B%0As%2EundoPositioned%28%5F741%2Eeffects%5B0%5D%2Eelement%29%3B%0As%2EsetStyle%28%5F741%2Eeffects%5B0%5D%2Eelement%2C%5F73a%29%3B%0A%7D%7D%2C%5F736%29%3B%0Areturn%20new%20v%2EParallel%28%5Bnew%20v%2EOpacity%28%5F735%2C%7Bsync%3Atrue%2Cto%3A0%2Cfrom%3A1%2Ctransition%3A%5F736%2EopacityTransition%7D%29%2Cnew%20v%2EScale%28%5F735%2C%2FOpera%2F%2Etest%28navigator%2EuserAgent%29%3F1%3A0%2C%7BscaleMode%3A%7BoriginalHeight%3Adims%2Eh%2CoriginalWidth%3Adims%2Ew%7D%2Csync%3Atrue%2Ctransition%3A%5F736%2EscaleTransition%2CscaleContent%3A%5F736%2EscaleContent%2CscaleFromCenter%3A%5F736%2EscaleFromCenter%2CrestoreAfterFinish%3Atrue%7D%29%2Cnew%20v%2EMove%28%5F735%2C%7Bx%3A%5F73c%2Cy%3A%5F73d%2Csync%3Atrue%2Ctransition%3A%5F736%2EmoveTransition%7D%29%5D%2C%5F73f%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2Epulsate%3Dfunction%28%5F742%2C%5F743%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20v%3DMochiKit%2EVisual%3B%0Avar%20b%3DMochiKit%2EBase%3B%0Avar%20%5F747%3DMochiKit%2EStyle%2EgetStyle%28%5F742%2C%22opacity%22%29%3B%0A%5F743%3Db%2Eupdate%28%7Bduration%3A3%2Cfrom%3A0%2CafterFinishInternal%3Afunction%28%5F748%29%7B%0AMochiKit%2EStyle%2EsetStyle%28%5F748%2Eelement%2C%7B%22opacity%22%3A%5F747%7D%29%3B%0A%7D%7D%2C%5F743%29%3B%0Avar%20%5F749%3D%5F743%2Etransition%7C%7Cv%2ETransitions%2Esinoidal%3B%0A%5F743%2Etransition%3Dfunction%28pos%29%7B%0Areturn%20%5F749%281%2Dv%2ETransitions%2Epulse%28pos%2C%5F743%2Epulses%29%29%3B%0A%7D%3B%0Areturn%20new%20v%2EOpacity%28%5F742%2C%5F743%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2Efold%3Dfunction%28%5F74b%2C%5F74c%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20v%3DMochiKit%2EVisual%3B%0Avar%20s%3DMochiKit%2EStyle%3B%0A%5F74b%3Dd%2EgetElement%28%5F74b%29%3B%0Avar%20%5F750%3Ds%2EgetElementDimensions%28%5F74b%2Ctrue%29%3B%0Avar%20%5F751%3D%7Btop%3A%5F74b%2Estyle%2Etop%2Cleft%3A%5F74b%2Estyle%2Eleft%2Cwidth%3A%5F74b%2Estyle%2Ewidth%2Cheight%3A%5F74b%2Estyle%2Eheight%7D%3B%0Avar%20%5F752%3Ds%2EmakeClipping%28%5F74b%29%3B%0A%5F74c%3DMochiKit%2EBase%2Eupdate%28%7BscaleContent%3Afalse%2CscaleX%3Afalse%2CscaleMode%3A%7BoriginalHeight%3A%5F750%2Eh%2CoriginalWidth%3A%5F750%2Ew%7D%2CafterFinishInternal%3Afunction%28%5F753%29%7B%0Anew%20v%2EScale%28%5F74b%2C1%2C%7BscaleContent%3Afalse%2CscaleY%3Afalse%2CscaleMode%3A%7BoriginalHeight%3A%5F750%2Eh%2CoriginalWidth%3A%5F750%2Ew%7D%2CafterFinishInternal%3Afunction%28%5F754%29%7B%0As%2EhideElement%28%5F754%2Eelement%29%3B%0As%2EundoClipping%28%5F754%2Eelement%2C%5F752%29%3B%0As%2EsetStyle%28%5F754%2Eelement%2C%5F751%29%3B%0A%7D%7D%29%3B%0A%7D%7D%2C%5F74c%29%3B%0Areturn%20new%20v%2EScale%28%5F74b%2C5%2C%5F74c%29%3B%0A%7D%3B%0AMochiKit%2EVisual%2EColor%3DMochiKit%2EColor%2EColor%3B%0AMochiKit%2EVisual%2EgetElementsComputedStyle%3DMochiKit%2EDOM%2EcomputedStyle%3B%0AMochiKit%2EVisual%2E%5F%5Fnew%5F%5F%3Dfunction%28%29%7B%0Avar%20m%3DMochiKit%2EBase%3B%0Am%2EnameFunctions%28this%29%3B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3Am%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0A%7D%3B%0AMochiKit%2EVisual%2EEXPORT%3D%5B%22roundElement%22%2C%22roundClass%22%2C%22tagifyText%22%2C%22multiple%22%2C%22toggle%22%2C%22Parallel%22%2C%22Sequence%22%2C%22Opacity%22%2C%22Move%22%2C%22Scale%22%2C%22Highlight%22%2C%22ScrollTo%22%2C%22Morph%22%2C%22fade%22%2C%22appear%22%2C%22puff%22%2C%22blindUp%22%2C%22blindDown%22%2C%22switchOff%22%2C%22dropOut%22%2C%22shake%22%2C%22slideDown%22%2C%22slideUp%22%2C%22squish%22%2C%22grow%22%2C%22shrink%22%2C%22pulsate%22%2C%22fold%22%5D%3B%0AMochiKit%2EVisual%2EEXPORT%5FOK%3D%5B%22Base%22%2C%22PAIRS%22%5D%3B%0AMochiKit%2EVisual%2E%5F%5Fnew%5F%5F%28%29%3B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2EVisual%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22DragAndDrop%22%2C%5B%22Base%22%2C%22Iter%22%2C%22DOM%22%2C%22Signal%22%2C%22Visual%22%2C%22Position%22%5D%29%3B%0AMochiKit%2EDragAndDrop%2ENAME%3D%22MochiKit%2EDragAndDrop%22%3B%0AMochiKit%2EDragAndDrop%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EDragAndDrop%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2EDragAndDrop%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EDragAndDrop%2EEXPORT%3D%5B%22Droppable%22%2C%22Draggable%22%5D%3B%0AMochiKit%2EDragAndDrop%2EEXPORT%5FOK%3D%5B%22Droppables%22%2C%22Draggables%22%5D%3B%0AMochiKit%2EDragAndDrop%2EDroppables%3D%7Bdrops%3A%5B%5D%2Cremove%3Afunction%28%5F756%29%7B%0Athis%2Edrops%3DMochiKit%2EBase%2Efilter%28function%28d%29%7B%0Areturn%20d%2Eelement%21%3DMochiKit%2EDOM%2EgetElement%28%5F756%29%3B%0A%7D%2Cthis%2Edrops%29%3B%0A%7D%2Cregister%3Afunction%28drop%29%7B%0Athis%2Edrops%2Epush%28drop%29%3B%0A%7D%2Cunregister%3Afunction%28drop%29%7B%0Athis%2Edrops%3DMochiKit%2EBase%2Efilter%28function%28d%29%7B%0Areturn%20d%21%3Ddrop%3B%0A%7D%2Cthis%2Edrops%29%3B%0A%7D%2Cprepare%3Afunction%28%5F75b%29%7B%0AMochiKit%2EBase%2Emap%28function%28drop%29%7B%0Aif%28drop%2EisAccepted%28%5F75b%29%29%7B%0Aif%28drop%2Eoptions%2Eactiveclass%29%7B%0AMochiKit%2EDOM%2EaddElementClass%28drop%2Eelement%2Cdrop%2Eoptions%2Eactiveclass%29%3B%0A%7D%0Adrop%2Eoptions%2Eonactive%28drop%2Eelement%2C%5F75b%29%3B%0A%7D%0A%7D%2Cthis%2Edrops%29%3B%0A%7D%2CfindDeepestChild%3Afunction%28%5F75d%29%7B%0Adeepest%3D%5F75d%5B0%5D%3B%0Afor%28i%3D1%3Bi%3C%5F75d%2Elength%3B%2B%2Bi%29%7B%0Aif%28MochiKit%2EDOM%2EisChildNode%28%5F75d%5Bi%5D%2Eelement%2Cdeepest%2Eelement%29%29%7B%0Adeepest%3D%5F75d%5Bi%5D%3B%0A%7D%0A%7D%0Areturn%20deepest%3B%0A%7D%2Cshow%3Afunction%28%5F75e%2C%5F75f%29%7B%0Aif%28%21this%2Edrops%2Elength%29%7B%0Areturn%3B%0A%7D%0Avar%20%5F760%3D%5B%5D%3B%0Aif%28this%2Elast%5Factive%29%7B%0Athis%2Elast%5Factive%2Edeactivate%28%29%3B%0A%7D%0AMochiKit%2EIter%2EforEach%28this%2Edrops%2Cfunction%28drop%29%7B%0Aif%28drop%2EisAffected%28%5F75e%2C%5F75f%29%29%7B%0A%5F760%2Epush%28drop%29%3B%0A%7D%0A%7D%29%3B%0Aif%28%5F760%2Elength%3E0%29%7B%0Adrop%3Dthis%2EfindDeepestChild%28%5F760%29%3B%0AMochiKit%2EPosition%2Ewithin%28drop%2Eelement%2C%5F75e%2Epage%2Ex%2C%5F75e%2Epage%2Ey%29%3B%0Adrop%2Eoptions%2Eonhover%28%5F75f%2Cdrop%2Eelement%2CMochiKit%2EPosition%2Eoverlap%28drop%2Eoptions%2Eoverlap%2Cdrop%2Eelement%29%29%3B%0Adrop%2Eactivate%28%29%3B%0A%7D%0A%7D%2Cfire%3Afunction%28%5F762%2C%5F763%29%7B%0Aif%28%21this%2Elast%5Factive%29%7B%0Areturn%3B%0A%7D%0AMochiKit%2EPosition%2Eprepare%28%29%3B%0Aif%28this%2Elast%5Factive%2EisAffected%28%5F762%2Emouse%28%29%2C%5F763%29%29%7B%0Athis%2Elast%5Factive%2Eoptions%2Eondrop%28%5F763%2Cthis%2Elast%5Factive%2Eelement%2C%5F762%29%3B%0A%7D%0A%7D%2Creset%3Afunction%28%5F764%29%7B%0AMochiKit%2EBase%2Emap%28function%28drop%29%7B%0Aif%28drop%2Eoptions%2Eactiveclass%29%7B%0AMochiKit%2EDOM%2EremoveElementClass%28drop%2Eelement%2Cdrop%2Eoptions%2Eactiveclass%29%3B%0A%7D%0Adrop%2Eoptions%2Eondesactive%28drop%2Eelement%2C%5F764%29%3B%0A%7D%2Cthis%2Edrops%29%3B%0Aif%28this%2Elast%5Factive%29%7B%0Athis%2Elast%5Factive%2Edeactivate%28%29%3B%0A%7D%0A%7D%7D%3B%0AMochiKit%2EDragAndDrop%2EDroppable%3Dfunction%28%5F766%2C%5F767%29%7B%0Avar%20cls%3Darguments%2Ecallee%3B%0Aif%28%21%28this%20instanceof%20cls%29%29%7B%0Areturn%20new%20cls%28%5F766%2C%5F767%29%3B%0A%7D%0Athis%2E%5F%5Finit%5F%5F%28%5F766%2C%5F767%29%3B%0A%7D%3B%0AMochiKit%2EDragAndDrop%2EDroppable%2Eprototype%3D%7B%5F%5Fclass%5F%5F%3AMochiKit%2EDragAndDrop%2EDroppable%2C%5F%5Finit%5F%5F%3Afunction%28%5F769%2C%5F76a%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20b%3DMochiKit%2EBase%3B%0Athis%2Eelement%3Dd%2EgetElement%28%5F769%29%3B%0Athis%2Eoptions%3Db%2Eupdate%28%7Bgreedy%3Atrue%2Choverclass%3Anull%2Cactiveclass%3Anull%2Choverfunc%3Ab%2Enoop%2Caccept%3Anull%2Conactive%3Ab%2Enoop%2Condesactive%3Ab%2Enoop%2Conhover%3Ab%2Enoop%2Condrop%3Ab%2Enoop%2Ccontainment%3A%5B%5D%2Ctree%3Afalse%7D%2C%5F76a%29%3B%0Athis%2Eoptions%2E%5Fcontainers%3D%5B%5D%3B%0Ab%2Emap%28MochiKit%2EBase%2Ebind%28function%28c%29%7B%0Athis%2Eoptions%2E%5Fcontainers%2Epush%28d%2EgetElement%28c%29%29%3B%0A%7D%2Cthis%29%2Cthis%2Eoptions%2Econtainment%29%3B%0AMochiKit%2EStyle%2EmakePositioned%28this%2Eelement%29%3B%0AMochiKit%2EDragAndDrop%2EDroppables%2Eregister%28this%29%3B%0A%7D%2CisContained%3Afunction%28%5F76e%29%7B%0Aif%28this%2Eoptions%2E%5Fcontainers%2Elength%29%7B%0Avar%20%5F76f%3B%0Aif%28this%2Eoptions%2Etree%29%7B%0A%5F76f%3D%5F76e%2EtreeNode%3B%0A%7Delse%7B%0A%5F76f%3D%5F76e%2EparentNode%3B%0A%7D%0Areturn%20MochiKit%2EIter%2Esome%28this%2Eoptions%2E%5Fcontainers%2Cfunction%28c%29%7B%0Areturn%20%5F76f%3D%3Dc%3B%0A%7D%29%3B%0A%7Delse%7B%0Areturn%20true%3B%0A%7D%0A%7D%2CisAccepted%3Afunction%28%5F771%29%7B%0Areturn%20%28%28%21this%2Eoptions%2Eaccept%29%7C%7CMochiKit%2EIter%2Esome%28this%2Eoptions%2Eaccept%2Cfunction%28c%29%7B%0Areturn%20MochiKit%2EDOM%2EhasElementClass%28%5F771%2Cc%29%3B%0A%7D%29%29%3B%0A%7D%2CisAffected%3Afunction%28%5F773%2C%5F774%29%7B%0Areturn%20%28%28this%2Eelement%21%3D%5F774%29%26%26this%2EisContained%28%5F774%29%26%26this%2EisAccepted%28%5F774%29%26%26MochiKit%2EPosition%2Ewithin%28this%2Eelement%2C%5F773%2Epage%2Ex%2C%5F773%2Epage%2Ey%29%29%3B%0A%7D%2Cdeactivate%3Afunction%28%29%7B%0Aif%28this%2Eoptions%2Ehoverclass%29%7B%0AMochiKit%2EDOM%2EremoveElementClass%28this%2Eelement%2Cthis%2Eoptions%2Ehoverclass%29%3B%0A%7D%0Athis%2Eoptions%2Ehoverfunc%28this%2Eelement%2Cfalse%29%3B%0AMochiKit%2EDragAndDrop%2EDroppables%2Elast%5Factive%3Dnull%3B%0A%7D%2Cactivate%3Afunction%28%29%7B%0Aif%28this%2Eoptions%2Ehoverclass%29%7B%0AMochiKit%2EDOM%2EaddElementClass%28this%2Eelement%2Cthis%2Eoptions%2Ehoverclass%29%3B%0A%7D%0Athis%2Eoptions%2Ehoverfunc%28this%2Eelement%2Ctrue%29%3B%0AMochiKit%2EDragAndDrop%2EDroppables%2Elast%5Factive%3Dthis%3B%0A%7D%2Cdestroy%3Afunction%28%29%7B%0AMochiKit%2EDragAndDrop%2EDroppables%2Eunregister%28this%29%3B%0A%7D%2Crepr%3Afunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2E%5F%5Fclass%5F%5F%2ENAME%2B%22%2C%20options%3A%22%2BMochiKit%2EBase%2Erepr%28this%2Eoptions%29%2B%22%5D%22%3B%0A%7D%7D%3B%0AMochiKit%2EDragAndDrop%2EDraggables%3D%7Bdrags%3A%5B%5D%2Cregister%3Afunction%28%5F775%29%7B%0Aif%28this%2Edrags%2Elength%3D%3D%3D0%29%7B%0Avar%20conn%3DMochiKit%2ESignal%2Econnect%3B%0Athis%2EeventMouseUp%3Dconn%28document%2C%22onmouseup%22%2Cthis%2Cthis%2EendDrag%29%3B%0Athis%2EeventMouseMove%3Dconn%28document%2C%22onmousemove%22%2Cthis%2Cthis%2EupdateDrag%29%3B%0Athis%2EeventKeypress%3Dconn%28document%2C%22onkeypress%22%2Cthis%2Cthis%2EkeyPress%29%3B%0A%7D%0Athis%2Edrags%2Epush%28%5F775%29%3B%0A%7D%2Cunregister%3Afunction%28%5F777%29%7B%0Athis%2Edrags%3DMochiKit%2EBase%2Efilter%28function%28d%29%7B%0Areturn%20d%21%3D%5F777%3B%0A%7D%2Cthis%2Edrags%29%3B%0Aif%28this%2Edrags%2Elength%3D%3D%3D0%29%7B%0Avar%20disc%3DMochiKit%2ESignal%2Edisconnect%3B%0Adisc%28this%2EeventMouseUp%29%3B%0Adisc%28this%2EeventMouseMove%29%3B%0Adisc%28this%2EeventKeypress%29%3B%0A%7D%0A%7D%2Cactivate%3Afunction%28%5F77a%29%7B%0Awindow%2Efocus%28%29%3B%0Athis%2EactiveDraggable%3D%5F77a%3B%0A%7D%2Cdeactivate%3Afunction%28%29%7B%0Athis%2EactiveDraggable%3Dnull%3B%0A%7D%2CupdateDrag%3Afunction%28%5F77b%29%7B%0Aif%28%21this%2EactiveDraggable%29%7B%0Areturn%3B%0A%7D%0Avar%20%5F77c%3D%5F77b%2Emouse%28%29%3B%0Aif%28this%2E%5FlastPointer%26%26%28MochiKit%2EBase%2Erepr%28this%2E%5FlastPointer%2Epage%29%3D%3DMochiKit%2EBase%2Erepr%28%5F77c%2Epage%29%29%29%7B%0Areturn%3B%0A%7D%0Athis%2E%5FlastPointer%3D%5F77c%3B%0Athis%2EactiveDraggable%2EupdateDrag%28%5F77b%2C%5F77c%29%3B%0A%7D%2CendDrag%3Afunction%28%5F77d%29%7B%0Aif%28%21this%2EactiveDraggable%29%7B%0Areturn%3B%0A%7D%0Athis%2E%5FlastPointer%3Dnull%3B%0Athis%2EactiveDraggable%2EendDrag%28%5F77d%29%3B%0Athis%2EactiveDraggable%3Dnull%3B%0A%7D%2CkeyPress%3Afunction%28%5F77e%29%7B%0Aif%28this%2EactiveDraggable%29%7B%0Athis%2EactiveDraggable%2EkeyPress%28%5F77e%29%3B%0A%7D%0A%7D%2Cnotify%3Afunction%28%5F77f%2C%5F780%2C%5F781%29%7B%0AMochiKit%2ESignal%2Esignal%28this%2C%5F77f%2C%5F780%2C%5F781%29%3B%0A%7D%7D%3B%0AMochiKit%2EDragAndDrop%2EDraggable%3Dfunction%28%5F782%2C%5F783%29%7B%0Avar%20cls%3Darguments%2Ecallee%3B%0Aif%28%21%28this%20instanceof%20cls%29%29%7B%0Areturn%20new%20cls%28%5F782%2C%5F783%29%3B%0A%7D%0Athis%2E%5F%5Finit%5F%5F%28%5F782%2C%5F783%29%3B%0A%7D%3B%0AMochiKit%2EDragAndDrop%2EDraggable%2Eprototype%3D%7B%5F%5Fclass%5F%5F%3AMochiKit%2EDragAndDrop%2EDraggable%2C%5F%5Finit%5F%5F%3Afunction%28%5F785%2C%5F786%29%7B%0Avar%20v%3DMochiKit%2EVisual%3B%0Avar%20b%3DMochiKit%2EBase%3B%0A%5F786%3Db%2Eupdate%28%7Bhandle%3Afalse%2Cstarteffect%3Afunction%28%5F789%29%7B%0Athis%2E%5FsavedOpacity%3DMochiKit%2EStyle%2EgetStyle%28%5F789%2C%22opacity%22%29%7C%7C1%3B%0Anew%20v%2EOpacity%28%5F789%2C%7Bduration%3A0%2E2%2Cfrom%3Athis%2E%5FsavedOpacity%2Cto%3A0%2E7%7D%29%3B%0A%7D%2Creverteffect%3Afunction%28%5F78a%2C%5F78b%2C%5F78c%29%7B%0Avar%20dur%3DMath%2Esqrt%28Math%2Eabs%28%5F78b%5E2%29%2BMath%2Eabs%28%5F78c%5E2%29%29%2A0%2E02%3B%0Areturn%20new%20v%2EMove%28%5F78a%2C%7Bx%3A%2D%5F78c%2Cy%3A%2D%5F78b%2Cduration%3Adur%7D%29%3B%0A%7D%2Cendeffect%3Afunction%28%5F78e%29%7B%0Anew%20v%2EOpacity%28%5F78e%2C%7Bduration%3A0%2E2%2Cfrom%3A0%2E7%2Cto%3Athis%2E%5FsavedOpacity%7D%29%3B%0A%7D%2Conchange%3Ab%2Enoop%2Czindex%3A1000%2Crevert%3Afalse%2Cscroll%3Afalse%2CscrollSensitivity%3A20%2CscrollSpeed%3A15%2Csnap%3Afalse%7D%2C%5F786%29%3B%0Avar%20d%3DMochiKit%2EDOM%3B%0Athis%2Eelement%3Dd%2EgetElement%28%5F785%29%3B%0Aif%28%5F786%2Ehandle%26%26%28typeof%20%28%5F786%2Ehandle%29%3D%3D%22string%22%29%29%7B%0Athis%2Ehandle%3Dd%2EgetFirstElementByTagAndClassName%28null%2C%5F786%2Ehandle%2Cthis%2Eelement%29%3B%0A%7D%0Aif%28%21this%2Ehandle%29%7B%0Athis%2Ehandle%3Dd%2EgetElement%28%5F786%2Ehandle%29%3B%0A%7D%0Aif%28%21this%2Ehandle%29%7B%0Athis%2Ehandle%3Dthis%2Eelement%3B%0A%7D%0Aif%28%5F786%2Escroll%26%26%21%5F786%2Escroll%2EscrollTo%26%26%21%5F786%2Escroll%2EouterHTML%29%7B%0A%5F786%2Escroll%3Dd%2EgetElement%28%5F786%2Escroll%29%3B%0Athis%2E%5FisScrollChild%3DMochiKit%2EDOM%2EisChildNode%28this%2Eelement%2C%5F786%2Escroll%29%3B%0A%7D%0AMochiKit%2EStyle%2EmakePositioned%28this%2Eelement%29%3B%0Athis%2Edelta%3Dthis%2EcurrentDelta%28%29%3B%0Athis%2Eoptions%3D%5F786%3B%0Athis%2Edragging%3Dfalse%3B%0Athis%2EeventMouseDown%3DMochiKit%2ESignal%2Econnect%28this%2Ehandle%2C%22onmousedown%22%2Cthis%2Cthis%2EinitDrag%29%3B%0AMochiKit%2EDragAndDrop%2EDraggables%2Eregister%28this%29%3B%0A%7D%2Cdestroy%3Afunction%28%29%7B%0AMochiKit%2ESignal%2Edisconnect%28this%2EeventMouseDown%29%3B%0AMochiKit%2EDragAndDrop%2EDraggables%2Eunregister%28this%29%3B%0A%7D%2CcurrentDelta%3Afunction%28%29%7B%0Avar%20s%3DMochiKit%2EStyle%2EgetStyle%3B%0Areturn%20%5BparseInt%28s%28this%2Eelement%2C%22left%22%29%7C%7C%220%22%29%2CparseInt%28s%28this%2Eelement%2C%22top%22%29%7C%7C%220%22%29%5D%3B%0A%7D%2CinitDrag%3Afunction%28%5F791%29%7B%0Aif%28%21%5F791%2Emouse%28%29%2Ebutton%2Eleft%29%7B%0Areturn%3B%0A%7D%0Avar%20src%3D%5F791%2Etarget%28%29%3B%0Avar%20%5F793%3D%28src%2EtagName%7C%7C%22%22%29%2EtoUpperCase%28%29%3B%0Aif%28%5F793%3D%3D%3D%22INPUT%22%7C%7C%5F793%3D%3D%3D%22SELECT%22%7C%7C%5F793%3D%3D%3D%22OPTION%22%7C%7C%5F793%3D%3D%3D%22BUTTON%22%7C%7C%5F793%3D%3D%3D%22TEXTAREA%22%29%7B%0Areturn%3B%0A%7D%0Aif%28this%2E%5Frevert%29%7B%0Athis%2E%5Frevert%2Ecancel%28%29%3B%0Athis%2E%5Frevert%3Dnull%3B%0A%7D%0Avar%20%5F794%3D%5F791%2Emouse%28%29%3B%0Avar%20pos%3DMochiKit%2EPosition%2EcumulativeOffset%28this%2Eelement%29%3B%0Athis%2Eoffset%3D%5B%5F794%2Epage%2Ex%2Dpos%2Ex%2C%5F794%2Epage%2Ey%2Dpos%2Ey%5D%3B%0AMochiKit%2EDragAndDrop%2EDraggables%2Eactivate%28this%29%3B%0A%5F791%2Estop%28%29%3B%0A%7D%2CstartDrag%3Afunction%28%5F796%29%7B%0Athis%2Edragging%3Dtrue%3B%0Aif%28this%2Eoptions%2Eselectclass%29%7B%0AMochiKit%2EDOM%2EaddElementClass%28this%2Eelement%2Cthis%2Eoptions%2Eselectclass%29%3B%0A%7D%0Aif%28this%2Eoptions%2Ezindex%29%7B%0Athis%2EoriginalZ%3DparseInt%28MochiKit%2EStyle%2EgetStyle%28this%2Eelement%2C%22z%2Dindex%22%29%7C%7C%220%22%29%3B%0Athis%2Eelement%2Estyle%2EzIndex%3Dthis%2Eoptions%2Ezindex%3B%0A%7D%0Aif%28this%2Eoptions%2Eghosting%29%7B%0Athis%2E%5Fclone%3Dthis%2Eelement%2EcloneNode%28true%29%3B%0Athis%2EghostPosition%3DMochiKit%2EPosition%2Eabsolutize%28this%2Eelement%29%3B%0Athis%2Eelement%2EparentNode%2EinsertBefore%28this%2E%5Fclone%2Cthis%2Eelement%29%3B%0A%7D%0Aif%28this%2Eoptions%2Escroll%29%7B%0Aif%28this%2Eoptions%2Escroll%3D%3Dwindow%29%7B%0Avar%20%5F797%3Dthis%2E%5FgetWindowScroll%28this%2Eoptions%2Escroll%29%3B%0Athis%2EoriginalScrollLeft%3D%5F797%2Eleft%3B%0Athis%2EoriginalScrollTop%3D%5F797%2Etop%3B%0A%7Delse%7B%0Athis%2EoriginalScrollLeft%3Dthis%2Eoptions%2Escroll%2EscrollLeft%3B%0Athis%2EoriginalScrollTop%3Dthis%2Eoptions%2Escroll%2EscrollTop%3B%0A%7D%0A%7D%0AMochiKit%2EDragAndDrop%2EDroppables%2Eprepare%28this%2Eelement%29%3B%0AMochiKit%2EDragAndDrop%2EDraggables%2Enotify%28%22start%22%2Cthis%2C%5F796%29%3B%0Aif%28this%2Eoptions%2Estarteffect%29%7B%0Athis%2Eoptions%2Estarteffect%28this%2Eelement%29%3B%0A%7D%0A%7D%2CupdateDrag%3Afunction%28%5F798%2C%5F799%29%7B%0Aif%28%21this%2Edragging%29%7B%0Athis%2EstartDrag%28%5F798%29%3B%0A%7D%0AMochiKit%2EPosition%2Eprepare%28%29%3B%0AMochiKit%2EDragAndDrop%2EDroppables%2Eshow%28%5F799%2Cthis%2Eelement%29%3B%0AMochiKit%2EDragAndDrop%2EDraggables%2Enotify%28%22drag%22%2Cthis%2C%5F798%29%3B%0Athis%2Edraw%28%5F799%29%3B%0Athis%2Eoptions%2Eonchange%28this%29%3B%0Aif%28this%2Eoptions%2Escroll%29%7B%0Athis%2EstopScrolling%28%29%3B%0Avar%20p%2Cq%3B%0Aif%28this%2Eoptions%2Escroll%3D%3Dwindow%29%7B%0Avar%20s%3Dthis%2E%5FgetWindowScroll%28this%2Eoptions%2Escroll%29%3B%0Ap%3Dnew%20MochiKit%2EStyle%2ECoordinates%28s%2Eleft%2Cs%2Etop%29%3B%0Aq%3Dnew%20MochiKit%2EStyle%2ECoordinates%28s%2Eleft%2Bs%2Ewidth%2Cs%2Etop%2Bs%2Eheight%29%3B%0A%7Delse%7B%0Ap%3DMochiKit%2EPosition%2Epage%28this%2Eoptions%2Escroll%29%3B%0Ap%2Ex%2B%3Dthis%2Eoptions%2Escroll%2EscrollLeft%3B%0Ap%2Ey%2B%3Dthis%2Eoptions%2Escroll%2EscrollTop%3B%0Ap%2Ex%2B%3D%28window%2EpageXOffset%7C%7Cdocument%2EdocumentElement%2EscrollLeft%7C%7Cdocument%2Ebody%2EscrollLeft%7C%7C0%29%3B%0Ap%2Ey%2B%3D%28window%2EpageYOffset%7C%7Cdocument%2EdocumentElement%2EscrollTop%7C%7Cdocument%2Ebody%2EscrollTop%7C%7C0%29%3B%0Aq%3Dnew%20MochiKit%2EStyle%2ECoordinates%28p%2Ex%2Bthis%2Eoptions%2Escroll%2EoffsetWidth%2Cp%2Ey%2Bthis%2Eoptions%2Escroll%2EoffsetHeight%29%3B%0A%7D%0Avar%20%5F79d%3D%5B0%2C0%5D%3B%0Aif%28%5F799%2Epage%2Ex%3E%28q%2Ex%2Dthis%2Eoptions%2EscrollSensitivity%29%29%7B%0A%5F79d%5B0%5D%3D%5F799%2Epage%2Ex%2D%28q%2Ex%2Dthis%2Eoptions%2EscrollSensitivity%29%3B%0A%7Delse%7B%0Aif%28%5F799%2Epage%2Ex%3C%28p%2Ex%2Bthis%2Eoptions%2EscrollSensitivity%29%29%7B%0A%5F79d%5B0%5D%3D%5F799%2Epage%2Ex%2D%28p%2Ex%2Bthis%2Eoptions%2EscrollSensitivity%29%3B%0A%7D%0A%7D%0Aif%28%5F799%2Epage%2Ey%3E%28q%2Ey%2Dthis%2Eoptions%2EscrollSensitivity%29%29%7B%0A%5F79d%5B1%5D%3D%5F799%2Epage%2Ey%2D%28q%2Ey%2Dthis%2Eoptions%2EscrollSensitivity%29%3B%0A%7Delse%7B%0Aif%28%5F799%2Epage%2Ey%3C%28p%2Ey%2Bthis%2Eoptions%2EscrollSensitivity%29%29%7B%0A%5F79d%5B1%5D%3D%5F799%2Epage%2Ey%2D%28p%2Ey%2Bthis%2Eoptions%2EscrollSensitivity%29%3B%0A%7D%0A%7D%0Athis%2EstartScrolling%28%5F79d%29%3B%0A%7D%0Aif%28%2FAppleWebKit%2F%2Etest%28navigator%2EappVersion%29%29%7B%0Awindow%2EscrollBy%280%2C0%29%3B%0A%7D%0A%5F798%2Estop%28%29%3B%0A%7D%2CfinishDrag%3Afunction%28%5F79e%2C%5F79f%29%7B%0Avar%20dr%3DMochiKit%2EDragAndDrop%3B%0Athis%2Edragging%3Dfalse%3B%0Aif%28this%2Eoptions%2Eselectclass%29%7B%0AMochiKit%2EDOM%2EremoveElementClass%28this%2Eelement%2Cthis%2Eoptions%2Eselectclass%29%3B%0A%7D%0Aif%28this%2Eoptions%2Eghosting%29%7B%0AMochiKit%2EPosition%2Erelativize%28this%2Eelement%2Cthis%2EghostPosition%29%3B%0AMochiKit%2EDOM%2EremoveElement%28this%2E%5Fclone%29%3B%0Athis%2E%5Fclone%3Dnull%3B%0A%7D%0Aif%28%5F79f%29%7B%0Adr%2EDroppables%2Efire%28%5F79e%2Cthis%2Eelement%29%3B%0A%7D%0Adr%2EDraggables%2Enotify%28%22end%22%2Cthis%2C%5F79e%29%3B%0Avar%20%5F7a1%3Dthis%2Eoptions%2Erevert%3B%0Aif%28%5F7a1%26%26typeof%20%28%5F7a1%29%3D%3D%22function%22%29%7B%0A%5F7a1%3D%5F7a1%28this%2Eelement%29%3B%0A%7D%0Avar%20d%3Dthis%2EcurrentDelta%28%29%3B%0Aif%28%5F7a1%26%26this%2Eoptions%2Ereverteffect%29%7B%0Athis%2E%5Frevert%3Dthis%2Eoptions%2Ereverteffect%28this%2Eelement%2Cd%5B1%5D%2Dthis%2Edelta%5B1%5D%2Cd%5B0%5D%2Dthis%2Edelta%5B0%5D%29%3B%0A%7Delse%7B%0Athis%2Edelta%3Dd%3B%0A%7D%0Aif%28this%2Eoptions%2Ezindex%29%7B%0Athis%2Eelement%2Estyle%2EzIndex%3Dthis%2EoriginalZ%3B%0A%7D%0Aif%28this%2Eoptions%2Eendeffect%29%7B%0Athis%2Eoptions%2Eendeffect%28this%2Eelement%29%3B%0A%7D%0Adr%2EDraggables%2Edeactivate%28%29%3B%0Adr%2EDroppables%2Ereset%28this%2Eelement%29%3B%0A%7D%2CkeyPress%3Afunction%28%5F7a3%29%7B%0Aif%28%5F7a3%2Ekey%28%29%2Estring%21%3D%22KEY%5FESCAPE%22%29%7B%0Areturn%3B%0A%7D%0Athis%2EfinishDrag%28%5F7a3%2Cfalse%29%3B%0A%5F7a3%2Estop%28%29%3B%0A%7D%2CendDrag%3Afunction%28%5F7a4%29%7B%0Aif%28%21this%2Edragging%29%7B%0Areturn%3B%0A%7D%0Athis%2EstopScrolling%28%29%3B%0Athis%2EfinishDrag%28%5F7a4%2Ctrue%29%3B%0A%5F7a4%2Estop%28%29%3B%0A%7D%2Cdraw%3Afunction%28%5F7a5%29%7B%0Avar%20pos%3DMochiKit%2EPosition%2EcumulativeOffset%28this%2Eelement%29%3B%0Avar%20d%3Dthis%2EcurrentDelta%28%29%3B%0Apos%2Ex%2D%3Dd%5B0%5D%3B%0Apos%2Ey%2D%3Dd%5B1%5D%3B%0Aif%28this%2Eoptions%2Escroll%26%26%28this%2Eoptions%2Escroll%21%3Dwindow%26%26this%2E%5FisScrollChild%29%29%7B%0Apos%2Ex%2D%3Dthis%2Eoptions%2Escroll%2EscrollLeft%2Dthis%2EoriginalScrollLeft%3B%0Apos%2Ey%2D%3Dthis%2Eoptions%2Escroll%2EscrollTop%2Dthis%2EoriginalScrollTop%3B%0A%7D%0Avar%20p%3D%5B%5F7a5%2Epage%2Ex%2Dpos%2Ex%2Dthis%2Eoffset%5B0%5D%2C%5F7a5%2Epage%2Ey%2Dpos%2Ey%2Dthis%2Eoffset%5B1%5D%5D%3B%0Aif%28this%2Eoptions%2Esnap%29%7B%0Aif%28typeof%20%28this%2Eoptions%2Esnap%29%3D%3D%22function%22%29%7B%0Ap%3Dthis%2Eoptions%2Esnap%28p%5B0%5D%2Cp%5B1%5D%29%3B%0A%7Delse%7B%0Aif%28this%2Eoptions%2Esnap%20instanceof%20Array%29%7B%0Avar%20i%3D%2D1%3B%0Ap%3DMochiKit%2EBase%2Emap%28MochiKit%2EBase%2Ebind%28function%28v%29%7B%0Ai%2B%3D1%3B%0Areturn%20Math%2Eround%28v%2Fthis%2Eoptions%2Esnap%5Bi%5D%29%2Athis%2Eoptions%2Esnap%5Bi%5D%3B%0A%7D%2Cthis%29%2Cp%29%3B%0A%7Delse%7B%0Ap%3DMochiKit%2EBase%2Emap%28MochiKit%2EBase%2Ebind%28function%28v%29%7B%0Areturn%20Math%2Eround%28v%2Fthis%2Eoptions%2Esnap%29%2Athis%2Eoptions%2Esnap%3B%0A%7D%2Cthis%29%2Cp%29%3B%0A%7D%0A%7D%0A%7D%0Avar%20%5F7ac%3Dthis%2Eelement%2Estyle%3B%0Aif%28%28%21this%2Eoptions%2Econstraint%29%7C%7C%28this%2Eoptions%2Econstraint%3D%3D%22horizontal%22%29%29%7B%0A%5F7ac%2Eleft%3Dp%5B0%5D%2B%22px%22%3B%0A%7D%0Aif%28%28%21this%2Eoptions%2Econstraint%29%7C%7C%28this%2Eoptions%2Econstraint%3D%3D%22vertical%22%29%29%7B%0A%5F7ac%2Etop%3Dp%5B1%5D%2B%22px%22%3B%0A%7D%0Aif%28%5F7ac%2Evisibility%3D%3D%22hidden%22%29%7B%0A%5F7ac%2Evisibility%3D%22%22%3B%0A%7D%0A%7D%2CstopScrolling%3Afunction%28%29%7B%0Aif%28this%2EscrollInterval%29%7B%0AclearInterval%28this%2EscrollInterval%29%3B%0Athis%2EscrollInterval%3Dnull%3B%0AMochiKit%2EDragAndDrop%2EDraggables%2E%5FlastScrollPointer%3Dnull%3B%0A%7D%0A%7D%2CstartScrolling%3Afunction%28%5F7ad%29%7B%0Aif%28%21%5F7ad%5B0%5D%26%26%21%5F7ad%5B1%5D%29%7B%0Areturn%3B%0A%7D%0Athis%2EscrollSpeed%3D%5B%5F7ad%5B0%5D%2Athis%2Eoptions%2EscrollSpeed%2C%5F7ad%5B1%5D%2Athis%2Eoptions%2EscrollSpeed%5D%3B%0Athis%2ElastScrolled%3Dnew%20Date%28%29%3B%0Athis%2EscrollInterval%3DsetInterval%28MochiKit%2EBase%2Ebind%28this%2Escroll%2Cthis%29%2C10%29%3B%0A%7D%2Cscroll%3Afunction%28%29%7B%0Avar%20%5F7ae%3Dnew%20Date%28%29%3B%0Avar%20%5F7af%3D%5F7ae%2Dthis%2ElastScrolled%3B%0Athis%2ElastScrolled%3D%5F7ae%3B%0Aif%28this%2Eoptions%2Escroll%3D%3Dwindow%29%7B%0Avar%20s%3Dthis%2E%5FgetWindowScroll%28this%2Eoptions%2Escroll%29%3B%0Aif%28this%2EscrollSpeed%5B0%5D%7C%7Cthis%2EscrollSpeed%5B1%5D%29%7B%0Avar%20dm%3D%5F7af%2F1000%3B%0Athis%2Eoptions%2Escroll%2EscrollTo%28s%2Eleft%2Bdm%2Athis%2EscrollSpeed%5B0%5D%2Cs%2Etop%2Bdm%2Athis%2EscrollSpeed%5B1%5D%29%3B%0A%7D%0A%7Delse%7B%0Athis%2Eoptions%2Escroll%2EscrollLeft%2B%3Dthis%2EscrollSpeed%5B0%5D%2A%5F7af%2F1000%3B%0Athis%2Eoptions%2Escroll%2EscrollTop%2B%3Dthis%2EscrollSpeed%5B1%5D%2A%5F7af%2F1000%3B%0A%7D%0Avar%20d%3DMochiKit%2EDragAndDrop%3B%0AMochiKit%2EPosition%2Eprepare%28%29%3B%0Ad%2EDroppables%2Eshow%28d%2EDraggables%2E%5FlastPointer%2Cthis%2Eelement%29%3B%0Ad%2EDraggables%2Enotify%28%22drag%22%2Cthis%29%3B%0Aif%28this%2E%5FisScrollChild%29%7B%0Ad%2EDraggables%2E%5FlastScrollPointer%3Dd%2EDraggables%2E%5FlastScrollPointer%7C%7Cd%2EDraggables%2E%5FlastPointer%3B%0Ad%2EDraggables%2E%5FlastScrollPointer%2Ex%2B%3Dthis%2EscrollSpeed%5B0%5D%2A%5F7af%2F1000%3B%0Ad%2EDraggables%2E%5FlastScrollPointer%2Ey%2B%3Dthis%2EscrollSpeed%5B1%5D%2A%5F7af%2F1000%3B%0Aif%28d%2EDraggables%2E%5FlastScrollPointer%2Ex%3C0%29%7B%0Ad%2EDraggables%2E%5FlastScrollPointer%2Ex%3D0%3B%0A%7D%0Aif%28d%2EDraggables%2E%5FlastScrollPointer%2Ey%3C0%29%7B%0Ad%2EDraggables%2E%5FlastScrollPointer%2Ey%3D0%3B%0A%7D%0Athis%2Edraw%28d%2EDraggables%2E%5FlastScrollPointer%29%3B%0A%7D%0Athis%2Eoptions%2Eonchange%28this%29%3B%0A%7D%2C%5FgetWindowScroll%3Afunction%28win%29%7B%0Avar%20vp%2Cw%2Ch%3B%0AMochiKit%2EDOM%2EwithWindow%28win%2Cfunction%28%29%7B%0Avp%3DMochiKit%2EStyle%2EgetViewportPosition%28win%2Edocument%29%3B%0A%7D%29%3B%0Aif%28win%2EinnerWidth%29%7B%0Aw%3Dwin%2EinnerWidth%3B%0Ah%3Dwin%2EinnerHeight%3B%0A%7Delse%7B%0Aif%28win%2Edocument%2EdocumentElement%26%26win%2Edocument%2EdocumentElement%2EclientWidth%29%7B%0Aw%3Dwin%2Edocument%2EdocumentElement%2EclientWidth%3B%0Ah%3Dwin%2Edocument%2EdocumentElement%2EclientHeight%3B%0A%7Delse%7B%0Aw%3Dwin%2Edocument%2Ebody%2EoffsetWidth%3B%0Ah%3Dwin%2Edocument%2Ebody%2EoffsetHeight%3B%0A%7D%0A%7D%0Areturn%20%7Btop%3Avp%2Ey%2Cleft%3Avp%2Ex%2Cwidth%3Aw%2Cheight%3Ah%7D%3B%0A%7D%2Crepr%3Afunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2E%5F%5Fclass%5F%5F%2ENAME%2B%22%2C%20options%3A%22%2BMochiKit%2EBase%2Erepr%28this%2Eoptions%29%2B%22%5D%22%3B%0A%7D%7D%3B%0AMochiKit%2EDragAndDrop%2E%5F%5Fnew%5F%5F%3Dfunction%28%29%7B%0AMochiKit%2EBase%2EnameFunctions%28this%29%3B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3AMochiKit%2EBase%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0A%7D%3B%0AMochiKit%2EDragAndDrop%2E%5F%5Fnew%5F%5F%28%29%3B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2EDragAndDrop%29%3B%0AMochiKit%2EBase%2E%5Fdeps%28%22Sortable%22%2C%5B%22Base%22%2C%22Iter%22%2C%22DOM%22%2C%22Position%22%2C%22DragAndDrop%22%5D%29%3B%0AMochiKit%2ESortable%2ENAME%3D%22MochiKit%2ESortable%22%3B%0AMochiKit%2ESortable%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2ESortable%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2ESortable%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2ESortable%2EEXPORT%3D%5B%5D%3B%0AMochiKit%2ESortable%2EEXPORT%5FOK%3D%5B%5D%3B%0AMochiKit%2EBase%2Eupdate%28MochiKit%2ESortable%2C%7Bsortables%3A%7B%7D%2C%5FfindRootElement%3Afunction%28%5F7b7%29%7B%0Awhile%28%5F7b7%2EtagName%2EtoUpperCase%28%29%21%3D%22BODY%22%29%7B%0Aif%28%5F7b7%2Eid%26%26MochiKit%2ESortable%2Esortables%5B%5F7b7%2Eid%5D%29%7B%0Areturn%20%5F7b7%3B%0A%7D%0A%5F7b7%3D%5F7b7%2EparentNode%3B%0A%7D%0A%7D%2C%5FcreateElementId%3Afunction%28%5F7b8%29%7B%0Aif%28%5F7b8%2Eid%3D%3Dnull%7C%7C%5F7b8%2Eid%3D%3D%22%22%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20id%3B%0Avar%20%5F7bb%3D1%3B%0Awhile%28d%2EgetElement%28id%3D%22sortable%22%2B%5F7bb%29%21%3Dnull%29%7B%0A%5F7bb%2B%3D1%3B%0A%7D%0Ad%2EsetNodeAttribute%28%5F7b8%2C%22id%22%2Cid%29%3B%0A%7D%0A%7D%2Coptions%3Afunction%28%5F7bc%29%7B%0A%5F7bc%3DMochiKit%2ESortable%2E%5FfindRootElement%28MochiKit%2EDOM%2EgetElement%28%5F7bc%29%29%3B%0Aif%28%21%5F7bc%29%7B%0Areturn%3B%0A%7D%0Areturn%20MochiKit%2ESortable%2Esortables%5B%5F7bc%2Eid%5D%3B%0A%7D%2Cdestroy%3Afunction%28%5F7bd%29%7B%0Avar%20s%3DMochiKit%2ESortable%2Eoptions%28%5F7bd%29%3B%0Avar%20b%3DMochiKit%2EBase%3B%0Avar%20d%3DMochiKit%2EDragAndDrop%3B%0Aif%28s%29%7B%0AMochiKit%2ESignal%2Edisconnect%28s%2EstartHandle%29%3B%0AMochiKit%2ESignal%2Edisconnect%28s%2EendHandle%29%3B%0Ab%2Emap%28function%28dr%29%7B%0Ad%2EDroppables%2Eremove%28dr%29%3B%0A%7D%2Cs%2Edroppables%29%3B%0Ab%2Emap%28function%28dr%29%7B%0Adr%2Edestroy%28%29%3B%0A%7D%2Cs%2Edraggables%29%3B%0Adelete%20MochiKit%2ESortable%2Esortables%5Bs%2Eelement%2Eid%5D%3B%0A%7D%0A%7D%2Ccreate%3Afunction%28%5F7c3%2C%5F7c4%29%7B%0A%5F7c3%3DMochiKit%2EDOM%2EgetElement%28%5F7c3%29%3B%0Avar%20self%3DMochiKit%2ESortable%3B%0Aself%2E%5FcreateElementId%28%5F7c3%29%3B%0A%5F7c4%3DMochiKit%2EBase%2Eupdate%28%7Belement%3A%5F7c3%2Ctag%3A%22li%22%2CdropOnEmpty%3Afalse%2Ctree%3Afalse%2CtreeTag%3A%22ul%22%2Coverlap%3A%22vertical%22%2Cconstraint%3A%22vertical%22%2Ccontainment%3A%5B%5F7c3%5D%2Chandle%3Afalse%2Conly%3Afalse%2Choverclass%3Anull%2Cghosting%3Afalse%2Cscroll%3Afalse%2CscrollSensitivity%3A20%2CscrollSpeed%3A15%2Cformat%3A%2F%5E%5B%5E%5F%5D%2A%5F%28%2E%2A%29%24%2F%2ConChange%3AMochiKit%2EBase%2Enoop%2ConUpdate%3AMochiKit%2EBase%2Enoop%2Caccept%3Anull%7D%2C%5F7c4%29%3B%0Aself%2Edestroy%28%5F7c3%29%3B%0Avar%20%5F7c6%3D%7Brevert%3Atrue%2Cghosting%3A%5F7c4%2Eghosting%2Cscroll%3A%5F7c4%2Escroll%2CscrollSensitivity%3A%5F7c4%2EscrollSensitivity%2CscrollSpeed%3A%5F7c4%2EscrollSpeed%2Cconstraint%3A%5F7c4%2Econstraint%2Chandle%3A%5F7c4%2Ehandle%7D%3B%0Aif%28%5F7c4%2Estarteffect%29%7B%0A%5F7c6%2Estarteffect%3D%5F7c4%2Estarteffect%3B%0A%7D%0Aif%28%5F7c4%2Ereverteffect%29%7B%0A%5F7c6%2Ereverteffect%3D%5F7c4%2Ereverteffect%3B%0A%7Delse%7B%0Aif%28%5F7c4%2Eghosting%29%7B%0A%5F7c6%2Ereverteffect%3Dfunction%28%5F7c7%29%7B%0A%5F7c7%2Estyle%2Etop%3D0%3B%0A%5F7c7%2Estyle%2Eleft%3D0%3B%0A%7D%3B%0A%7D%0A%7D%0Aif%28%5F7c4%2Eendeffect%29%7B%0A%5F7c6%2Eendeffect%3D%5F7c4%2Eendeffect%3B%0A%7D%0Aif%28%5F7c4%2Ezindex%29%7B%0A%5F7c6%2Ezindex%3D%5F7c4%2Ezindex%3B%0A%7D%0Avar%20%5F7c8%3D%7Boverlap%3A%5F7c4%2Eoverlap%2Ccontainment%3A%5F7c4%2Econtainment%2Choverclass%3A%5F7c4%2Ehoverclass%2Conhover%3Aself%2EonHover%2Ctree%3A%5F7c4%2Etree%2Caccept%3A%5F7c4%2Eaccept%7D%3B%0Avar%20%5F7c9%3D%7Bonhover%3Aself%2EonEmptyHover%2Coverlap%3A%5F7c4%2Eoverlap%2Ccontainment%3A%5F7c4%2Econtainment%2Choverclass%3A%5F7c4%2Ehoverclass%2Caccept%3A%5F7c4%2Eaccept%7D%3B%0AMochiKit%2EDOM%2EremoveEmptyTextNodes%28%5F7c3%29%3B%0A%5F7c4%2Edraggables%3D%5B%5D%3B%0A%5F7c4%2Edroppables%3D%5B%5D%3B%0Aif%28%5F7c4%2EdropOnEmpty%7C%7C%5F7c4%2Etree%29%7B%0Anew%20MochiKit%2EDragAndDrop%2EDroppable%28%5F7c3%2C%5F7c9%29%3B%0A%5F7c4%2Edroppables%2Epush%28%5F7c3%29%3B%0A%7D%0AMochiKit%2EBase%2Emap%28function%28e%29%7B%0Avar%20%5F7cb%3D%5F7c4%2Ehandle%3FMochiKit%2EDOM%2EgetFirstElementByTagAndClassName%28null%2C%5F7c4%2Ehandle%2Ce%29%3Ae%3B%0A%5F7c4%2Edraggables%2Epush%28new%20MochiKit%2EDragAndDrop%2EDraggable%28e%2CMochiKit%2EBase%2Eupdate%28%5F7c6%2C%7Bhandle%3A%5F7cb%7D%29%29%29%3B%0Anew%20MochiKit%2EDragAndDrop%2EDroppable%28e%2C%5F7c8%29%3B%0Aif%28%5F7c4%2Etree%29%7B%0Ae%2EtreeNode%3D%5F7c3%3B%0A%7D%0A%5F7c4%2Edroppables%2Epush%28e%29%3B%0A%7D%2C%28self%2EfindElements%28%5F7c3%2C%5F7c4%29%7C%7C%5B%5D%29%29%3B%0Aif%28%5F7c4%2Etree%29%7B%0AMochiKit%2EBase%2Emap%28function%28e%29%7B%0Anew%20MochiKit%2EDragAndDrop%2EDroppable%28e%2C%5F7c9%29%3B%0Ae%2EtreeNode%3D%5F7c3%3B%0A%5F7c4%2Edroppables%2Epush%28e%29%3B%0A%7D%2C%28self%2EfindTreeElements%28%5F7c3%2C%5F7c4%29%7C%7C%5B%5D%29%29%3B%0A%7D%0Aself%2Esortables%5B%5F7c3%2Eid%5D%3D%5F7c4%3B%0A%5F7c4%2ElastValue%3Dself%2Eserialize%28%5F7c3%29%3B%0A%5F7c4%2EstartHandle%3DMochiKit%2ESignal%2Econnect%28MochiKit%2EDragAndDrop%2EDraggables%2C%22start%22%2CMochiKit%2EBase%2Epartial%28self%2EonStart%2C%5F7c3%29%29%3B%0A%5F7c4%2EendHandle%3DMochiKit%2ESignal%2Econnect%28MochiKit%2EDragAndDrop%2EDraggables%2C%22end%22%2CMochiKit%2EBase%2Epartial%28self%2EonEnd%2C%5F7c3%29%29%3B%0A%7D%2ConStart%3Afunction%28%5F7cd%2C%5F7ce%29%7B%0Avar%20self%3DMochiKit%2ESortable%3B%0Avar%20%5F7d0%3Dself%2Eoptions%28%5F7cd%29%3B%0A%5F7d0%2ElastValue%3Dself%2Eserialize%28%5F7d0%2Eelement%29%3B%0A%7D%2ConEnd%3Afunction%28%5F7d1%2C%5F7d2%29%7B%0Avar%20self%3DMochiKit%2ESortable%3B%0Aself%2Eunmark%28%29%3B%0Avar%20%5F7d4%3Dself%2Eoptions%28%5F7d1%29%3B%0Aif%28%5F7d4%2ElastValue%21%3Dself%2Eserialize%28%5F7d4%2Eelement%29%29%7B%0A%5F7d4%2EonUpdate%28%5F7d4%2Eelement%29%3B%0A%7D%0A%7D%2CfindElements%3Afunction%28%5F7d5%2C%5F7d6%29%7B%0Areturn%20MochiKit%2ESortable%2EfindChildren%28%5F7d5%2C%5F7d6%2Eonly%2C%5F7d6%2Etree%2C%5F7d6%2Etag%29%3B%0A%7D%2CfindTreeElements%3Afunction%28%5F7d7%2C%5F7d8%29%7B%0Areturn%20MochiKit%2ESortable%2EfindChildren%28%5F7d7%2C%5F7d8%2Eonly%2C%5F7d8%2Etree%3Ftrue%3Afalse%2C%5F7d8%2EtreeTag%29%3B%0A%7D%2CfindChildren%3Afunction%28%5F7d9%2Conly%2C%5F7db%2C%5F7dc%29%7B%0Aif%28%21%5F7d9%2EhasChildNodes%28%29%29%7B%0Areturn%20null%3B%0A%7D%0A%5F7dc%3D%5F7dc%2EtoUpperCase%28%29%3B%0Aif%28only%29%7B%0Aonly%3DMochiKit%2EBase%2EflattenArray%28%5Bonly%5D%29%3B%0A%7D%0Avar%20%5F7dd%3D%5B%5D%3B%0AMochiKit%2EBase%2Emap%28function%28e%29%7B%0Aif%28e%2EtagName%26%26e%2EtagName%2EtoUpperCase%28%29%3D%3D%5F7dc%26%26%28%21only%7C%7CMochiKit%2EIter%2Esome%28only%2Cfunction%28c%29%7B%0Areturn%20MochiKit%2EDOM%2EhasElementClass%28e%2Cc%29%3B%0A%7D%29%29%29%7B%0A%5F7dd%2Epush%28e%29%3B%0A%7D%0Aif%28%5F7db%29%7B%0Avar%20%5F7e0%3DMochiKit%2ESortable%2EfindChildren%28e%2Conly%2C%5F7db%2C%5F7dc%29%3B%0Aif%28%5F7e0%26%26%5F7e0%2Elength%3E0%29%7B%0A%5F7dd%3D%5F7dd%2Econcat%28%5F7e0%29%3B%0A%7D%0A%7D%0A%7D%2C%5F7d9%2EchildNodes%29%3B%0Areturn%20%5F7dd%3B%0A%7D%2ConHover%3Afunction%28%5F7e1%2C%5F7e2%2C%5F7e3%29%7B%0Aif%28MochiKit%2EDOM%2EisChildNode%28%5F7e2%2C%5F7e1%29%29%7B%0Areturn%3B%0A%7D%0Avar%20self%3DMochiKit%2ESortable%3B%0Aif%28%5F7e3%3E0%2E33%26%26%5F7e3%3C0%2E66%26%26self%2Eoptions%28%5F7e2%29%2Etree%29%7B%0Areturn%3B%0A%7Delse%7B%0Aif%28%5F7e3%3E0%2E5%29%7B%0Aself%2Emark%28%5F7e2%2C%22before%22%29%3B%0Aif%28%5F7e2%2EpreviousSibling%21%3D%5F7e1%29%7B%0Avar%20%5F7e5%3D%5F7e1%2EparentNode%3B%0A%5F7e1%2Estyle%2Evisibility%3D%22hidden%22%3B%0A%5F7e2%2EparentNode%2EinsertBefore%28%5F7e1%2C%5F7e2%29%3B%0Aif%28%5F7e2%2EparentNode%21%3D%5F7e5%29%7B%0Aself%2Eoptions%28%5F7e5%29%2EonChange%28%5F7e1%29%3B%0A%7D%0Aself%2Eoptions%28%5F7e2%2EparentNode%29%2EonChange%28%5F7e1%29%3B%0A%7D%0A%7Delse%7B%0Aself%2Emark%28%5F7e2%2C%22after%22%29%3B%0Avar%20%5F7e6%3D%5F7e2%2EnextSibling%7C%7Cnull%3B%0Aif%28%5F7e6%21%3D%5F7e1%29%7B%0Avar%20%5F7e5%3D%5F7e1%2EparentNode%3B%0A%5F7e1%2Estyle%2Evisibility%3D%22hidden%22%3B%0A%5F7e2%2EparentNode%2EinsertBefore%28%5F7e1%2C%5F7e6%29%3B%0Aif%28%5F7e2%2EparentNode%21%3D%5F7e5%29%7B%0Aself%2Eoptions%28%5F7e5%29%2EonChange%28%5F7e1%29%3B%0A%7D%0Aself%2Eoptions%28%5F7e2%2EparentNode%29%2EonChange%28%5F7e1%29%3B%0A%7D%0A%7D%0A%7D%0A%7D%2C%5FoffsetSize%3Afunction%28%5F7e7%2Ctype%29%7B%0Aif%28type%3D%3D%22vertical%22%7C%7Ctype%3D%3D%22height%22%29%7B%0Areturn%20%5F7e7%2EoffsetHeight%3B%0A%7Delse%7B%0Areturn%20%5F7e7%2EoffsetWidth%3B%0A%7D%0A%7D%2ConEmptyHover%3Afunction%28%5F7e9%2C%5F7ea%2C%5F7eb%29%7B%0Avar%20%5F7ec%3D%5F7e9%2EparentNode%3B%0Avar%20self%3DMochiKit%2ESortable%3B%0Avar%20%5F7ee%3Dself%2Eoptions%28%5F7ea%29%3B%0Aif%28%21MochiKit%2EDOM%2EisChildNode%28%5F7ea%2C%5F7e9%29%29%7B%0Avar%20%5F7ef%3B%0Avar%20%5F7f0%3Dself%2EfindElements%28%5F7ea%2C%7Btag%3A%5F7ee%2Etag%2Conly%3A%5F7ee%2Eonly%7D%29%3B%0Avar%20%5F7f1%3Dnull%3B%0Aif%28%5F7f0%29%7B%0Avar%20%5F7f2%3Dself%2E%5FoffsetSize%28%5F7ea%2C%5F7ee%2Eoverlap%29%2A%281%2D%5F7eb%29%3B%0Afor%28%5F7ef%3D0%3B%5F7ef%3C%5F7f0%2Elength%3B%5F7ef%2B%3D1%29%7B%0Aif%28%5F7f2%2Dself%2E%5FoffsetSize%28%5F7f0%5B%5F7ef%5D%2C%5F7ee%2Eoverlap%29%3E%3D0%29%7B%0A%5F7f2%2D%3Dself%2E%5FoffsetSize%28%5F7f0%5B%5F7ef%5D%2C%5F7ee%2Eoverlap%29%3B%0A%7Delse%7B%0Aif%28%5F7f2%2D%28self%2E%5FoffsetSize%28%5F7f0%5B%5F7ef%5D%2C%5F7ee%2Eoverlap%29%2F2%29%3E%3D0%29%7B%0A%5F7f1%3D%5F7ef%2B1%3C%5F7f0%2Elength%3F%5F7f0%5B%5F7ef%2B1%5D%3Anull%3B%0Abreak%3B%0A%7Delse%7B%0A%5F7f1%3D%5F7f0%5B%5F7ef%5D%3B%0Abreak%3B%0A%7D%0A%7D%0A%7D%0A%7D%0A%5F7ea%2EinsertBefore%28%5F7e9%2C%5F7f1%29%3B%0Aself%2Eoptions%28%5F7ec%29%2EonChange%28%5F7e9%29%3B%0A%5F7ee%2EonChange%28%5F7e9%29%3B%0A%7D%0A%7D%2Cunmark%3Afunction%28%29%7B%0Avar%20m%3DMochiKit%2ESortable%2E%5Fmarker%3B%0Aif%28m%29%7B%0AMochiKit%2EStyle%2EhideElement%28m%29%3B%0A%7D%0A%7D%2Cmark%3Afunction%28%5F7f4%2C%5F7f5%29%7B%0Avar%20d%3DMochiKit%2EDOM%3B%0Avar%20self%3DMochiKit%2ESortable%3B%0Avar%20%5F7f8%3Dself%2Eoptions%28%5F7f4%2EparentNode%29%3B%0Aif%28%5F7f8%26%26%21%5F7f8%2Eghosting%29%7B%0Areturn%3B%0A%7D%0Aif%28%21self%2E%5Fmarker%29%7B%0Aself%2E%5Fmarker%3Dd%2EgetElement%28%22dropmarker%22%29%7C%7Cdocument%2EcreateElement%28%22DIV%22%29%3B%0AMochiKit%2EStyle%2EhideElement%28self%2E%5Fmarker%29%3B%0Ad%2EaddElementClass%28self%2E%5Fmarker%2C%22dropmarker%22%29%3B%0Aself%2E%5Fmarker%2Estyle%2Eposition%3D%22absolute%22%3B%0Adocument%2EgetElementsByTagName%28%22body%22%29%2Eitem%280%29%2EappendChild%28self%2E%5Fmarker%29%3B%0A%7D%0Avar%20%5F7f9%3DMochiKit%2EPosition%2EcumulativeOffset%28%5F7f4%29%3B%0Aself%2E%5Fmarker%2Estyle%2Eleft%3D%5F7f9%2Ex%2B%22px%22%3B%0Aself%2E%5Fmarker%2Estyle%2Etop%3D%5F7f9%2Ey%2B%22px%22%3B%0Aif%28%5F7f5%3D%3D%22after%22%29%7B%0Aif%28%5F7f8%2Eoverlap%3D%3D%22horizontal%22%29%7B%0Aself%2E%5Fmarker%2Estyle%2Eleft%3D%28%5F7f9%2Ex%2B%5F7f4%2EclientWidth%29%2B%22px%22%3B%0A%7Delse%7B%0Aself%2E%5Fmarker%2Estyle%2Etop%3D%28%5F7f9%2Ey%2B%5F7f4%2EclientHeight%29%2B%22px%22%3B%0A%7D%0A%7D%0AMochiKit%2EStyle%2EshowElement%28self%2E%5Fmarker%29%3B%0A%7D%2C%5Ftree%3Afunction%28%5F7fa%2C%5F7fb%2C%5F7fc%29%7B%0Avar%20self%3DMochiKit%2ESortable%3B%0Avar%20%5F7fe%3Dself%2EfindElements%28%5F7fa%2C%5F7fb%29%7C%7C%5B%5D%3B%0Afor%28var%20i%3D0%3Bi%3C%5F7fe%2Elength%3B%2B%2Bi%29%7B%0Avar%20%5F800%3D%5F7fe%5Bi%5D%2Eid%2Ematch%28%5F7fb%2Eformat%29%3B%0Aif%28%21%5F800%29%7B%0Acontinue%3B%0A%7D%0Avar%20%5F801%3D%7Bid%3AencodeURIComponent%28%5F800%3F%5F800%5B1%5D%3Anull%29%2Celement%3A%5F7fa%2Cparent%3A%5F7fc%2Cchildren%3A%5B%5D%2Cposition%3A%5F7fc%2Echildren%2Elength%2Ccontainer%3Aself%2E%5FfindChildrenElement%28%5F7fe%5Bi%5D%2C%5F7fb%2EtreeTag%2EtoUpperCase%28%29%29%7D%3B%0Aif%28%5F801%2Econtainer%29%7B%0Aself%2E%5Ftree%28%5F801%2Econtainer%2C%5F7fb%2C%5F801%29%3B%0A%7D%0A%5F7fc%2Echildren%2Epush%28%5F801%29%3B%0A%7D%0Areturn%20%5F7fc%3B%0A%7D%2C%5FfindChildrenElement%3Afunction%28%5F802%2C%5F803%29%7B%0Aif%28%5F802%26%26%5F802%2EhasChildNodes%29%7B%0A%5F803%3D%5F803%2EtoUpperCase%28%29%3B%0Afor%28var%20i%3D0%3Bi%3C%5F802%2EchildNodes%2Elength%3B%2B%2Bi%29%7B%0Aif%28%5F802%2EchildNodes%5Bi%5D%2EtagName%2EtoUpperCase%28%29%3D%3D%5F803%29%7B%0Areturn%20%5F802%2EchildNodes%5Bi%5D%3B%0A%7D%0A%7D%0A%7D%0Areturn%20null%3B%0A%7D%2Ctree%3Afunction%28%5F805%2C%5F806%29%7B%0A%5F805%3DMochiKit%2EDOM%2EgetElement%28%5F805%29%3B%0Avar%20%5F807%3DMochiKit%2ESortable%2Eoptions%28%5F805%29%3B%0A%5F806%3DMochiKit%2EBase%2Eupdate%28%7Btag%3A%5F807%2Etag%2CtreeTag%3A%5F807%2EtreeTag%2Conly%3A%5F807%2Eonly%2Cname%3A%5F805%2Eid%2Cformat%3A%5F807%2Eformat%7D%2C%5F806%7C%7C%7B%7D%29%3B%0Avar%20root%3D%7Bid%3Anull%2Cparent%3Anull%2Cchildren%3Anew%20Array%2Ccontainer%3A%5F805%2Cposition%3A0%7D%3B%0Areturn%20MochiKit%2ESortable%2E%5Ftree%28%5F805%2C%5F806%2Croot%29%3B%0A%7D%2CsetSequence%3Afunction%28%5F809%2C%5F80a%2C%5F80b%29%7B%0Avar%20self%3DMochiKit%2ESortable%3B%0Avar%20b%3DMochiKit%2EBase%3B%0A%5F809%3DMochiKit%2EDOM%2EgetElement%28%5F809%29%3B%0A%5F80b%3Db%2Eupdate%28self%2Eoptions%28%5F809%29%2C%5F80b%7C%7C%7B%7D%29%3B%0Avar%20%5F80e%3D%7B%7D%3B%0Ab%2Emap%28function%28n%29%7B%0Avar%20m%3Dn%2Eid%2Ematch%28%5F80b%2Eformat%29%3B%0Aif%28m%29%7B%0A%5F80e%5Bm%5B1%5D%5D%3D%5Bn%2Cn%2EparentNode%5D%3B%0A%7D%0An%2EparentNode%2EremoveChild%28n%29%3B%0A%7D%2Cself%2EfindElements%28%5F809%2C%5F80b%29%29%3B%0Ab%2Emap%28function%28%5F811%29%7B%0Avar%20n%3D%5F80e%5B%5F811%5D%3B%0Aif%28n%29%7B%0An%5B1%5D%2EappendChild%28n%5B0%5D%29%3B%0Adelete%20%5F80e%5B%5F811%5D%3B%0A%7D%0A%7D%2C%5F80a%29%3B%0A%7D%2C%5FconstructIndex%3Afunction%28node%29%7B%0Avar%20%5F814%3D%22%22%3B%0Ado%7B%0Aif%28node%2Eid%29%7B%0A%5F814%3D%22%5B%22%2Bnode%2Eposition%2B%22%5D%22%2B%5F814%3B%0A%7D%0A%7Dwhile%28%28node%3Dnode%2Eparent%29%21%3Dnull%29%3B%0Areturn%20%5F814%3B%0A%7D%2Csequence%3Afunction%28%5F815%2C%5F816%29%7B%0A%5F815%3DMochiKit%2EDOM%2EgetElement%28%5F815%29%3B%0Avar%20self%3DMochiKit%2ESortable%3B%0Avar%20%5F816%3DMochiKit%2EBase%2Eupdate%28self%2Eoptions%28%5F815%29%2C%5F816%7C%7C%7B%7D%29%3B%0Areturn%20MochiKit%2EBase%2Emap%28function%28item%29%7B%0Areturn%20item%2Eid%2Ematch%28%5F816%2Eformat%29%3Fitem%2Eid%2Ematch%28%5F816%2Eformat%29%5B1%5D%3A%22%22%3B%0A%7D%2CMochiKit%2EDOM%2EgetElement%28self%2EfindElements%28%5F815%2C%5F816%29%7C%7C%5B%5D%29%29%3B%0A%7D%2Cserialize%3Afunction%28%5F819%2C%5F81a%29%7B%0A%5F819%3DMochiKit%2EDOM%2EgetElement%28%5F819%29%3B%0Avar%20self%3DMochiKit%2ESortable%3B%0A%5F81a%3DMochiKit%2EBase%2Eupdate%28self%2Eoptions%28%5F819%29%2C%5F81a%7C%7C%7B%7D%29%3B%0Avar%20name%3DencodeURIComponent%28%5F81a%2Ename%7C%7C%5F819%2Eid%29%3B%0Aif%28%5F81a%2Etree%29%7B%0Areturn%20MochiKit%2EBase%2EflattenArray%28MochiKit%2EBase%2Emap%28function%28item%29%7B%0Areturn%20%5Bname%2Bself%2E%5FconstructIndex%28item%29%2B%22%5Bid%5D%3D%22%2BencodeURIComponent%28item%2Eid%29%5D%2Econcat%28item%2Echildren%2Emap%28arguments%2Ecallee%29%29%3B%0A%7D%2Cself%2Etree%28%5F819%2C%5F81a%29%2Echildren%29%29%2Ejoin%28%22%26%22%29%3B%0A%7Delse%7B%0Areturn%20MochiKit%2EBase%2Emap%28function%28item%29%7B%0Areturn%20name%2B%22%5B%5D%3D%22%2BencodeURIComponent%28item%29%3B%0A%7D%2Cself%2Esequence%28%5F819%2C%5F81a%29%29%2Ejoin%28%22%26%22%29%3B%0A%7D%0A%7D%7D%29%3B%0AMochiKit%2ESortable%2ESortable%3DMochiKit%2ESortable%3B%0AMochiKit%2ESortable%2E%5F%5Fnew%5F%5F%3Dfunction%28%29%7B%0AMochiKit%2EBase%2EnameFunctions%28this%29%3B%0Athis%2EEXPORT%5FTAGS%3D%7B%22%3Acommon%22%3Athis%2EEXPORT%2C%22%3Aall%22%3AMochiKit%2EBase%2Econcat%28this%2EEXPORT%2Cthis%2EEXPORT%5FOK%29%7D%3B%0A%7D%3B%0AMochiKit%2ESortable%2E%5F%5Fnew%5F%5F%28%29%3B%0AMochiKit%2EBase%2E%5FexportSymbols%28this%2CMochiKit%2ESortable%29%3B%0Aif%28typeof%20%28MochiKit%29%3D%3D%22undefined%22%29%7B%0AMochiKit%3D%7B%7D%3B%0A%7D%0Aif%28typeof%20%28MochiKit%2EMochiKit%29%3D%3D%22undefined%22%29%7B%0AMochiKit%2EMochiKit%3D%7B%7D%3B%0A%7D%0AMochiKit%2EMochiKit%2ENAME%3D%22MochiKit%2EMochiKit%22%3B%0AMochiKit%2EMochiKit%2EVERSION%3D%221%2E4%2E2%22%3B%0AMochiKit%2EMochiKit%2E%5F%5Frepr%5F%5F%3Dfunction%28%29%7B%0Areturn%20%22%5B%22%2Bthis%2ENAME%2B%22%20%22%2Bthis%2EVERSION%2B%22%5D%22%3B%0A%7D%3B%0AMochiKit%2EMochiKit%2EtoString%3Dfunction%28%29%7B%0Areturn%20this%2E%5F%5Frepr%5F%5F%28%29%3B%0A%7D%3B%0AMochiKit%2EMochiKit%2ESUBMODULES%3D%5B%22Base%22%2C%22Iter%22%2C%22Logging%22%2C%22DateTime%22%2C%22Format%22%2C%22Async%22%2C%22DOM%22%2C%22Selector%22%2C%22Style%22%2C%22LoggingPane%22%2C%22Color%22%2C%22Signal%22%2C%22Position%22%2C%22Visual%22%2C%22DragAndDrop%22%2C%22Sortable%22%5D%3B%0Aif%28typeof%20%28JSAN%29%21%3D%22undefined%22%7C%7Ctypeof%20%28dojo%29%21%3D%22undefined%22%29%7B%0Aif%28typeof%20%28dojo%29%21%3D%22undefined%22%29%7B%0Adojo%2Eprovide%28%22MochiKit%2EMochiKit%22%29%3B%0A%28function%28lst%29%7B%0Afor%28var%20i%3D0%3Bi%3Clst%2Elength%3Bi%2B%2B%29%7B%0Adojo%2Erequire%28%22MochiKit%2E%22%2Blst%5Bi%5D%29%3B%0A%7D%0A%7D%29%28MochiKit%2EMochiKit%2ESUBMODULES%29%3B%0A%7D%0Aif%28typeof%20%28JSAN%29%21%3D%22undefined%22%29%7B%0A%28function%28lst%29%7B%0Afor%28var%20i%3D0%3Bi%3Clst%2Elength%3Bi%2B%2B%29%7B%0AJSAN%2Euse%28%22MochiKit%2E%22%2Blst%5Bi%5D%2C%5B%5D%29%3B%0A%7D%0A%7D%29%28MochiKit%2EMochiKit%2ESUBMODULES%29%3B%0A%7D%0A%28function%28%29%7B%0Avar%20%5F823%3DMochiKit%2EBase%2Eextend%3B%0Avar%20self%3DMochiKit%2EMochiKit%3B%0Avar%20%5F825%3Dself%2ESUBMODULES%3B%0Avar%20%5F826%3D%5B%5D%3B%0Avar%20%5F827%3D%5B%5D%3B%0Avar%20%5F828%3D%7B%7D%3B%0Avar%20i%2Ck%2Cm%2Call%3B%0Afor%28i%3D0%3Bi%3C%5F825%2Elength%3Bi%2B%2B%29%7B%0Am%3DMochiKit%5B%5F825%5Bi%5D%5D%3B%0A%5F823%28%5F826%2Cm%2EEXPORT%29%3B%0A%5F823%28%5F827%2Cm%2EEXPORT%5FOK%29%3B%0Afor%28k%20in%20m%2EEXPORT%5FTAGS%29%7B%0A%5F828%5Bk%5D%3D%5F823%28%5F828%5Bk%5D%2Cm%2EEXPORT%5FTAGS%5Bk%5D%29%3B%0A%7D%0Aall%3Dm%2EEXPORT%5FTAGS%5B%22%3Aall%22%5D%3B%0Aif%28%21all%29%7B%0Aall%3D%5F823%28null%2Cm%2EEXPORT%2Cm%2EEXPORT%5FOK%29%3B%0A%7D%0Avar%20j%3B%0Afor%28j%3D0%3Bj%3Call%2Elength%3Bj%2B%2B%29%7B%0Ak%3Dall%5Bj%5D%3B%0Aself%5Bk%5D%3Dm%5Bk%5D%3B%0A%7D%0A%7D%0Aself%2EEXPORT%3D%5F826%3B%0Aself%2EEXPORT%5FOK%3D%5F827%3B%0Aself%2EEXPORT%5FTAGS%3D%5F828%3B%0A%7D%28%29%29%3B%0A%7Delse%7B%0Aif%28typeof%20%28MochiKit%2E%5F%5Fcompat%5F%5F%29%3D%3D%22undefined%22%29%7B%0AMochiKit%2E%5F%5Fcompat%5F%5F%3Dtrue%3B%0A%7D%0A%28function%28%29%7B%0Aif%28typeof%20%28document%29%3D%3D%22undefined%22%29%7B%0Areturn%3B%0A%7D%0Avar%20%5F82e%3Ddocument%2EgetElementsByTagName%28%22script%22%29%3B%0Avar%20%5F82f%3D%22http%3A%2F%2Fwww%2Ew3%2Eorg%2F1999%2Fxhtml%22%3B%0Avar%20%5F830%3D%22http%3A%2F%2Fwww%2Ew3%2Eorg%2F2000%2Fsvg%22%3B%0Avar%20%5F831%3D%22http%3A%2F%2Fwww%2Ew3%2Eorg%2F1999%2Fxlink%22%3B%0Avar%20%5F832%3D%22http%3A%2F%2Fwww%2Emozilla%2Eorg%2Fkeymaster%2Fgatekeeper%2Fthere%2Eis%2Eonly%2Exul%22%3B%0Avar%20base%3Dnull%3B%0Avar%20%5F834%3Dnull%3B%0Avar%20%5F835%3D%7B%7D%3B%0Avar%20i%3B%0Avar%20src%3B%0Afor%28i%3D0%3Bi%3C%5F82e%2Elength%3Bi%2B%2B%29%7B%0Asrc%3Dnull%3B%0Aswitch%28%5F82e%5Bi%5D%2EnamespaceURI%29%7B%0Acase%20%5F830%3A%0Asrc%3D%5F82e%5Bi%5D%2EgetAttributeNS%28%5F831%2C%22href%22%29%3B%0Abreak%3B%0Adefault%3A%0Asrc%3D%5F82e%5Bi%5D%2EgetAttribute%28%22src%22%29%3B%0Abreak%3B%0A%7D%0Aif%28%21src%29%7B%0Acontinue%3B%0A%7D%0A%5F835%5Bsrc%5D%3Dtrue%3B%0Aif%28src%2Ematch%28%2FMochiKit%2Ejs%28%5C%3F%2E%2A%29%3F%24%2F%29%29%7B%0Abase%3Dsrc%2Esubstring%280%2Csrc%2ElastIndexOf%28%22MochiKit%2Ejs%22%29%29%3B%0A%5F834%3D%5F82e%5Bi%5D%3B%0A%7D%0A%7D%0Aif%28base%3D%3D%3Dnull%29%7B%0Areturn%3B%0A%7D%0Avar%20%5F838%3DMochiKit%2EMochiKit%2ESUBMODULES%3B%0Afor%28var%20i%3D0%3Bi%3C%5F838%2Elength%3Bi%2B%2B%29%7B%0Aif%28MochiKit%5B%5F838%5Bi%5D%5D%29%7B%0Acontinue%3B%0A%7D%0Avar%20uri%3Dbase%2B%5F838%5Bi%5D%2B%22%2Ejs%22%3B%0Aif%28uri%20in%20%5F835%29%7B%0Acontinue%3B%0A%7D%0Aif%28%5F834%2EnamespaceURI%3D%3D%5F830%7C%7C%5F834%2EnamespaceURI%3D%3D%5F832%29%7B%0Avar%20s%3Ddocument%2EcreateElementNS%28%5F834%2EnamespaceURI%2C%22script%22%29%3B%0As%2EsetAttribute%28%22id%22%2C%22MochiKit%5F%22%2Bbase%2B%5F838%5Bi%5D%29%3B%0Aif%28%5F834%2EnamespaceURI%3D%3D%5F830%29%7B%0As%2EsetAttributeNS%28%5F831%2C%22href%22%2Curi%29%3B%0A%7Delse%7B%0As%2EsetAttribute%28%22src%22%2Curi%29%3B%0A%7D%0As%2EsetAttribute%28%22type%22%2C%22application%2Fx%2Djavascript%22%29%3B%0A%5F834%2EparentNode%2EappendChild%28s%29%3B%0A%7Delse%7B%0Adocument%2Ewrite%28%22%3C%22%2B%5F834%2EnodeName%2B%22%20src%3D%5C%22%22%2Buri%2B%22%5C%22%20type%3D%5C%22text%2Fjavascript%5C%22%3E%3C%2Fscript%3E%22%29%3B%0A%7D%0A%7D%0A%7D%29%28%29%3B%0A%7D%0A%0A%0A"></script>
<script src="data:application/x-javascript,var%20JS%20%20%3D%20JS%20%7C%7C%20%7B%7D%3B%0A%0AJS%20%3D%20%28function%20%28%29%20%7B%0A%20%20%20%20function%20shuffle%28a%29%20%7B%0A%20%20%20%20%20%20%20%20var%20j%2C%20x%2C%20i%3B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%20a%2Elength%3B%20i%3B%20i%20%2D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20j%20%3D%20Math%2Efloor%28Math%2Erandom%28%29%20%2A%20i%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20a%5Bi%20%2D%201%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20a%5Bi%20%2D%201%5D%20%3D%20a%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20a%5Bj%5D%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2FFunction%20to%20convert%20hex%20format%20to%20a%20rgb%20color%0A%20%20%20%20function%20rgb2hex%28rgb%29%7B%0A%20%20%20%20%20rgb%20%3D%20rgb%2Ematch%28%2F%5Ergba%3F%5B%5Cs%2B%5D%3F%5C%28%5B%5Cs%2B%5D%3F%28%5Cd%2B%29%5B%5Cs%2B%5D%3F%2C%5B%5Cs%2B%5D%3F%28%5Cd%2B%29%5B%5Cs%2B%5D%3F%2C%5B%5Cs%2B%5D%3F%28%5Cd%2B%29%5B%5Cs%2B%5D%3F%2Fi%29%3B%0A%20%20%20%20%20return%20%28rgb%20%26%26%20rgb%2Elength%20%3D%3D%3D%204%29%20%3F%20%22%23%22%20%2B%0A%20%20%20%20%20%20%28%220%22%20%2B%20parseInt%28rgb%5B1%5D%2C10%29%2EtoString%2816%29%29%2Eslice%28%2D2%29%20%2B%0A%20%20%20%20%20%20%28%220%22%20%2B%20parseInt%28rgb%5B2%5D%2C10%29%2EtoString%2816%29%29%2Eslice%28%2D2%29%20%2B%0A%20%20%20%20%20%20%28%220%22%20%2B%20parseInt%28rgb%5B3%5D%2C10%29%2EtoString%2816%29%29%2Eslice%28%2D2%29%20%3A%20%27%27%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20randhexcol%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%27%23%27%20%2B%20%28%22000000%22%20%2B%20Math%2Erandom%28%29%2EtoString%2816%29%2Eslice%282%2C%208%29%2EtoUpperCase%28%29%29%2Eslice%28%2D6%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20shuffle%20%3A%20shuffle%2C%0A%20%20%20%20%20%20rgb2hex%20%3A%20rgb2hex%2C%0A%20%20%20%20%20%20iter%20%3A%20MochiKit%2EIter%2Eiter%2C%0A%20%20%20%20%20%20log%20%3A%20MochiKit%2ELogging%2Elog%2C%0A%20%20%20%20%20%20logpane%20%3A%20MochiKit%2ELoggingPane%2EcreateLoggingPane%0A%20%20%20%20%7D%0A%0A%7D%29%28%29%3B"></script>
<script src="data:application/x-javascript,%22use%20strict%22%3B%0A%2F%2F%20Transcrypt%27ed%20from%20Python%2C%202016%2D06%2D28%2018%3A56%3A52%0Afunction%20memory%20%28%29%20%7B%0A%09var%20%5F%5Fall%5F%5F%20%3D%20%7B%7D%3B%0A%09var%20%5F%5Fworld%5F%5F%20%3D%20%5F%5Fall%5F%5F%3B%0A%09%0A%09%2F%2F%20Nested%20object%20creator%2C%20part%20of%20the%20nesting%20may%20already%20exist%20and%20have%20attributes%0A%09var%20%5F%5Fnest%5F%5F%20%3D%20function%20%28headObject%2C%20tailNames%2C%20value%29%20%7B%0A%09%09%2F%2F%20In%20some%20cases%20this%20will%20be%20a%20global%20object%2C%20e%2Eg%2E%20%27window%27%0A%09%09var%20current%20%3D%20headObject%3B%0A%09%09%0A%09%09if%20%28tailNames%20%21%3D%20%27%27%29%20%7B%09%2F%2F%20Split%20on%20empty%20string%20doesn%27t%20give%20empty%20list%0A%09%09%09%2F%2F%20Find%20the%20last%20already%20created%20object%20in%20tailNames%0A%09%09%09var%20tailChain%20%3D%20tailNames%2Esplit%20%28%27%2E%27%29%3B%0A%09%09%09var%20firstNewIndex%20%3D%20tailChain%2Elength%3B%0A%09%09%09for%20%28var%20index%20%3D%200%3B%20index%20%3C%20tailChain%2Elength%3B%20index%2B%2B%29%20%7B%0A%09%09%09%09if%20%28%21current%2EhasOwnProperty%20%28tailChain%20%5Bindex%5D%29%29%20%7B%0A%09%09%09%09%09firstNewIndex%20%3D%20index%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%09current%20%3D%20current%20%5BtailChain%20%5Bindex%5D%5D%3B%0A%09%09%09%7D%0A%09%09%09%0A%09%09%09%2F%2F%20Create%20the%20rest%20of%20the%20objects%2C%20if%20any%0A%09%09%09for%20%28var%20index%20%3D%20firstNewIndex%3B%20index%20%3C%20tailChain%2Elength%3B%20index%2B%2B%29%20%7B%0A%09%09%09%09current%20%5BtailChain%20%5Bindex%5D%5D%20%3D%20%7B%7D%3B%0A%09%09%09%09current%20%3D%20current%20%5BtailChain%20%5Bindex%5D%5D%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09%0A%09%09%2F%2F%20Insert%20it%20new%20attributes%2C%20it%20may%20have%20been%20created%20earlier%20and%20have%20other%20attributes%0A%09%09for%20%28var%20attrib%20in%20value%29%20%7B%0A%09%09%09current%20%5Battrib%5D%20%3D%20value%20%5Battrib%5D%3B%09%09%09%0A%09%09%7D%09%09%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fnest%5F%5F%20%3D%20%5F%5Fnest%5F%5F%3B%0A%09%0A%09%2F%2F%20Initialize%20module%20if%20not%20yet%20done%20and%20return%20its%20globals%0A%09var%20%5F%5Finit%5F%5F%20%3D%20function%20%28module%29%20%7B%0A%09%09if%20%28%21module%2E%5F%5Finited%5F%5F%29%20%7B%0A%09%09%09module%2E%5F%5Fall%5F%5F%2E%5F%5Finit%5F%5F%20%28module%2E%5F%5Fall%5F%5F%29%3B%0A%09%09%09module%2E%5F%5Finited%5F%5F%20%3D%20true%3B%0A%09%09%7D%0A%09%09return%20module%2E%5F%5Fall%5F%5F%3B%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Finit%5F%5F%20%3D%20%5F%5Finit%5F%5F%3B%0A%09%0A%09%2F%2F%20Since%20we%20want%20to%20assign%20functions%2C%20a%20%3D%20b%2Ef%20should%20make%20b%2Ef%20produce%20a%20bound%20function%0A%09%2F%2F%20So%20%5F%5Fget%5F%5F%20should%20be%20called%20by%20a%20property%20rather%20then%20a%20function%0A%09%2F%2F%20Factory%20%5F%5Fget%5F%5F%20creates%20one%20of%20three%20curried%20functions%20for%20func%0A%09%2F%2F%20Which%20one%20is%20produced%20depends%20on%20what%27s%20to%20the%20left%20of%20the%20dot%20of%20the%20corresponding%20JavaScript%20property%0A%09var%20%5F%5Fget%5F%5F%20%3D%20function%20%28self%2C%20func%2C%20quotedFuncName%29%20%7B%0A%09%09if%20%28self%29%20%7B%0A%09%09%09if%20%28self%2EhasOwnProperty%20%28%27%5F%5Fclass%5F%5F%27%29%20%7C%7C%20typeof%20self%20%3D%3D%20%27string%27%20%7C%7C%20self%20instanceof%20String%29%20%7B%09%09%09%2F%2F%20Object%20before%20the%20dot%0A%09%09%09%09if%20%28quotedFuncName%29%20%7B%09%09%09%09%09%09%09%09%09%2F%2F%20Memoize%20call%20since%20fcall%20is%20on%2C%20by%20installing%20bound%20function%20in%20instance%0A%09%09%09%09%09Object%2EdefineProperty%20%28self%2C%20quotedFuncName%2C%20%7B%09%09%2F%2F%20Will%20override%20the%20non%2Down%20property%2C%20next%20time%20it%20will%20be%20called%20directly%0A%09%09%09%09%09%09value%3A%20function%20%28%29%20%7B%09%09%09%09%09%09%09%2F%2F%20So%20next%20time%20just%20call%20curry%20function%20that%20calls%20function%0A%09%09%09%09%09%09%09var%20args%20%3D%20%5B%5D%20%2Eslice%2Eapply%20%28arguments%29%3B%0A%09%09%09%09%09%09%09return%20func%2Eapply%20%28null%2C%20%5Bself%5D%20%2Econcat%20%28args%29%29%3B%0A%09%09%09%09%09%09%7D%2C%09%09%09%09%0A%09%09%09%09%09%09writable%3A%20true%2C%0A%09%09%09%09%09%09enumerable%3A%20true%2C%0A%09%09%09%09%09%09configurable%3A%20true%0A%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%7D%0A%09%09%09%09return%20function%20%28%29%20%7B%09%09%09%09%09%09%09%09%09%2F%2F%20Return%20bound%20function%2C%20code%20dupplication%20for%20efficiency%20if%20no%20memoizing%0A%09%09%09%09%09var%20args%20%3D%20%5B%5D%20%2Eslice%2Eapply%20%28arguments%29%3B%09%09%09%09%2F%2F%20So%20multilayer%20search%20prototype%2C%20apply%20%5F%5Fget%5F%5F%2C%20call%20curry%20func%20that%20calls%20func%0A%09%09%09%09%09return%20func%2Eapply%20%28null%2C%20%5Bself%5D%20%2Econcat%20%28args%29%29%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%7D%0A%09%09%09else%20%7B%09%09%09%09%09%09%09%09%09%09%09%09%09%09%2F%2F%20Class%20before%20the%20dot%0A%09%09%09%09return%20func%3B%09%09%09%09%09%09%09%09%09%09%09%2F%2F%20Return%20static%20method%0A%09%09%09%7D%0A%09%09%7D%0A%09%09else%20%7B%09%09%09%09%09%09%09%09%09%09%09%09%09%09%09%2F%2F%20Nothing%20before%20the%20dot%0A%09%09%09return%20func%3B%09%09%09%09%09%09%09%09%09%09%09%09%2F%2F%20Return%20free%20function%0A%09%09%7D%0A%09%7D%0A%09%5F%5Fall%5F%5F%2E%5F%5Fget%5F%5F%20%3D%20%5F%5Fget%5F%5F%3B%0A%09%09%09%0A%09%2F%2F%20Class%20creator%20function%0A%09var%20%5F%5Fclass%5F%5F%20%3D%20function%20%28name%2C%20bases%2C%20extra%29%20%7B%0A%09%09%2F%2F%20Create%20class%20functor%0A%09%09var%20cls%20%3D%20function%20%28%29%20%7B%0A%09%09%09var%20args%20%3D%20%5B%5D%20%2Eslice%2Eapply%20%28arguments%29%3B%0A%09%09%09return%20cls%2E%5F%5Fnew%5F%5F%20%28args%29%3B%0A%09%09%7D%3B%0A%09%09%0A%09%09%2F%2F%20Copy%20methods%2C%20properties%20and%20static%20attributes%20from%20base%20classes%20to%20new%20class%20object%0A%09%09for%20%28var%20index%20%3D%20bases%2Elength%20%2D%201%3B%20index%20%3E%3D%200%3B%20index%2D%2D%29%20%7B%09%2F%2F%20Reversed%20order%2C%20since%20class%20vars%20of%20first%20base%20should%20win%0A%09%09%09var%20base%20%3D%20bases%20%5Bindex%5D%3B%0A%09%09%09for%20%28var%20attrib%20in%20base%29%20%7B%0A%09%09%09%09var%20descrip%20%3D%20Object%2EgetOwnPropertyDescriptor%20%28base%2C%20attrib%29%3B%0A%09%09%09%09Object%2EdefineProperty%20%28cls%2C%20attrib%2C%20descrip%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09%0A%09%09%2F%2F%20Add%20class%20specific%20attributes%20to%20class%20object%0A%09%09cls%2E%5F%5Fname%5F%5F%20%3D%20name%3B%0A%09%09cls%2E%5F%5Fbases%5F%5F%20%3D%20bases%3B%0A%09%09%0A%09%09%2F%2F%20Add%20own%20methods%2C%20properties%20and%20static%20attributes%20to%20class%20object%0A%09%09for%20%28var%20attrib%20in%20extra%29%20%7B%0A%09%09%09var%20descrip%20%3D%20Object%2EgetOwnPropertyDescriptor%20%28extra%2C%20attrib%29%3B%0A%09%09%09Object%2EdefineProperty%20%28cls%2C%20attrib%2C%20descrip%29%3B%0A%09%09%7D%0A%09%09%09%09%0A%09%09%2F%2F%20Return%20class%20object%0A%09%09return%20cls%3B%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fclass%5F%5F%20%3D%20%5F%5Fclass%5F%5F%3B%0A%0A%09%2F%2F%20Create%20mother%20of%20all%20classes%09%09%0A%09var%20object%20%3D%20%5F%5Fall%5F%5F%2E%5F%5Fclass%5F%5F%20%28%27object%27%2C%20%5B%5D%2C%20%7B%0A%09%09%5F%5Finit%5F%5F%3A%20function%20%28self%29%20%7B%7D%2C%0A%09%09%09%0A%09%09%5F%5Fname%5F%5F%3A%20%27object%27%2C%0A%09%09%5F%5Fbases%5F%5F%3A%20%5B%5D%2C%0A%09%09%09%0A%09%09%2F%2F%20Object%20creator%20function%20is%20inherited%20by%20all%20classes%20%28%3F%3F%3F%20Make%20global%3F%29%0A%09%09%5F%5Fnew%5F%5F%3A%20function%20%28args%29%20%7B%09%2F%2F%20Args%20are%20just%20the%20constructor%20args%09%09%0A%09%09%09%2F%2F%20In%20JavaScript%20the%20Python%20class%20is%20the%20prototype%20of%20the%20Python%20object%0A%09%09%09%2F%2F%20In%20this%20way%20methods%20and%20static%20attributes%20will%20be%20available%20both%20with%20a%20class%20and%20an%20object%20before%20the%20dot%0A%09%09%09%2F%2F%20The%20descriptor%20produced%20by%20%5F%5Fget%5F%5F%20will%20return%20the%20right%20method%20flavor%0A%09%09%09var%20instance%20%3D%20Object%2Ecreate%20%28this%2C%20%7B%5F%5Fclass%5F%5F%3A%20%7Bvalue%3A%20this%2C%20enumerable%3A%20true%7D%7D%29%3B%0A%09%09%09%0A%09%09%09%2F%2F%20Call%20constructor%0A%09%09%09this%2E%5F%5Finit%5F%5F%2Eapply%20%28null%2C%20%5Binstance%5D%20%2Econcat%20%28args%29%29%3B%0A%09%09%09%0A%09%09%09%2F%2F%20Return%20instance%09%09%09%0A%09%09%09return%20instance%3B%0A%09%09%7D%09%0A%09%7D%29%3B%0A%09%5F%5Fall%5F%5F%2Eobject%20%3D%20object%3B%0A%09%0A%09%2F%2F%20Define%20%5F%5Fpragma%5F%5F%20to%20preserve%20%27%3Call%3E%27%20and%20%27%3C%2Fall%3E%27%2C%20since%20it%27s%20never%20generated%20as%20a%20function%2C%20must%20be%20done%20early%2C%20so%20here%0A%09var%20%5F%5Fpragma%5F%5F%20%3D%20function%20%28%29%20%7B%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fpragma%5F%5F%20%3D%20%5F%5Fpragma%5F%5F%3B%0A%09%5F%5Fnest%5F%5F%20%28%0A%09%09%5F%5Fall%5F%5F%2C%0A%09%09%27org%2Etranscrypt%2E%5F%5Fbase%5F%5F%27%2C%20%7B%0A%09%09%09%5F%5Fall%5F%5F%3A%20%7B%0A%09%09%09%09%5F%5Finited%5F%5F%3A%20false%2C%0A%09%09%09%09%5F%5Finit%5F%5F%3A%20function%20%28%5F%5Fall%5F%5F%29%20%7B%0A%09%09%09%09%09var%20%5F%5FEnvir%5F%5F%20%3D%20%5F%5Fclass%5F%5F%20%28%27%5F%5FEnvir%5F%5F%27%2C%20%5Bobject%5D%2C%20%7B%0A%09%09%09%09%09%09get%20%5F%5Finit%5F%5F%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09%09%09%09self%2Etranspiler%5Fname%20%3D%20%27transcrypt%27%3B%0A%09%09%09%09%09%09%09self%2Etranspiler%5Fversion%20%3D%20%273%2E5%2E193%27%3B%0A%09%09%09%09%09%09%09self%2Etarget%5Fsubdir%20%3D%20%27%5F%5Fjavascript%5F%5F%27%3B%0A%09%09%09%09%09%09%7D%29%3B%7D%0A%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09var%20%5F%5Fenvir%5F%5F%20%3D%20%5F%5FEnvir%5F%5F%20%28%29%3B%0A%09%09%09%09%09%5F%5Fpragma%5F%5F%20%28%27%3Call%3E%27%29%0A%09%09%09%09%09%09%5F%5Fall%5F%5F%2E%5F%5FEnvir%5F%5F%20%3D%20%5F%5FEnvir%5F%5F%3B%0A%09%09%09%09%09%09%5F%5Fall%5F%5F%2E%5F%5Fenvir%5F%5F%20%3D%20%5F%5Fenvir%5F%5F%3B%0A%09%09%09%09%09%5F%5Fpragma%5F%5F%20%28%27%3C%2Fall%3E%27%29%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%29%3B%0A%09%5F%5Fnest%5F%5F%20%28%0A%09%09%5F%5Fall%5F%5F%2C%0A%09%09%27org%2Etranscrypt%2E%5F%5Fstandard%5F%5F%27%2C%20%7B%0A%09%09%09%5F%5Fall%5F%5F%3A%20%7B%0A%09%09%09%09%5F%5Finited%5F%5F%3A%20false%2C%0A%09%09%09%09%5F%5Finit%5F%5F%3A%20function%20%28%5F%5Fall%5F%5F%29%20%7B%0A%09%09%09%09%09var%20Exception%20%3D%20%5F%5Fclass%5F%5F%20%28%27Exception%27%2C%20%5Bobject%5D%2C%20%7B%0A%09%09%09%09%09%09get%20%5F%5Finit%5F%5F%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09%09%09%09var%20args%20%3D%20tuple%20%28%5B%5D%2Eslice%2Eapply%20%28arguments%29%2Eslice%20%281%29%29%3B%0A%09%09%09%09%09%09%09self%2Eargs%20%3D%20args%3B%0A%09%09%09%09%09%09%7D%29%3B%7D%2C%0A%09%09%09%09%09%09get%20%5F%5Frepr%5F%5F%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09%09%09%09if%20%28len%20%28self%2Eargs%29%29%20%7B%0A%09%09%09%09%09%09%09%09return%20%27%7B%7D%7B%7D%27%2Eformat%20%28self%2E%5F%5Fclass%5F%5F%2E%5F%5Fname%5F%5F%2C%20repr%20%28tuple%20%28self%2Eargs%29%29%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09else%20%7B%0A%09%09%09%09%09%09%09%09return%20%27%3F%3F%3F%27%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%29%3B%7D%2C%0A%09%09%09%09%09%09get%20%5F%5Fstr%5F%5F%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09%09%09%09if%20%28len%20%28self%2Eargs%29%20%3E%201%29%20%7B%0A%09%09%09%09%09%09%09%09return%20str%20%28tuple%20%28self%2Eargs%29%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09else%20%7B%0A%09%09%09%09%09%09%09%09if%20%28len%20%28self%2Eargs%29%29%20%7B%0A%09%09%09%09%09%09%09%09%09return%20str%20%28self%2Eargs%20%5B0%5D%29%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09else%20%7B%0A%09%09%09%09%09%09%09%09%09return%20%27%3F%3F%3F%27%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%29%3B%7D%0A%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09var%20ValueError%20%3D%20%5F%5Fclass%5F%5F%20%28%27ValueError%27%2C%20%5BException%5D%2C%20%7B%0A%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09var%20%5F%5Fsort%5F%5F%20%3D%20function%20%28iterable%2C%20key%2C%20reverse%29%20%7B%0A%09%09%09%09%09%09if%20%28typeof%20key%20%3D%3D%20%27undefined%27%20%7C%7C%20%28key%20%21%3D%20null%20%26%26%20key%20%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%29%20%7B%3B%0A%09%09%09%09%09%09%09var%20key%20%3D%20null%3B%0A%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09if%20%28typeof%20reverse%20%3D%3D%20%27undefined%27%20%7C%7C%20%28reverse%20%21%3D%20null%20%26%26%20reverse%20%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%29%20%7B%3B%0A%09%09%09%09%09%09%09var%20reverse%20%3D%20false%3B%0A%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09if%20%28arguments%2Elength%29%20%7B%0A%09%09%09%09%09%09%09var%20%5F%5Filastarg0%5F%5F%20%3D%20arguments%2Elength%20%2D%201%3B%0A%09%09%09%09%09%09%09if%20%28arguments%20%5B%5F%5Filastarg0%5F%5F%5D%20%26%26%20arguments%20%5B%5F%5Filastarg0%5F%5F%5D%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09var%20%5F%5Fallkwargs0%5F%5F%20%3D%20arguments%20%5B%5F%5Filastarg0%5F%5F%2D%2D%5D%3B%0A%09%09%09%09%09%09%09%09for%20%28var%20%5F%5Fattrib0%5F%5F%20in%20%5F%5Fallkwargs0%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09switch%20%28%5F%5Fattrib0%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09%09case%20%27iterable%27%3A%20var%20iterable%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%09case%20%27key%27%3A%20var%20key%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%09case%20%27reverse%27%3A%20var%20reverse%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20%28key%29%20%7B%0A%09%09%09%09%09%09%09iterable%2Esort%20%28%28function%20%5F%5Flambda%5F%5F%20%28a%2C%20b%29%20%7B%0A%09%09%09%09%09%09%09%09if%20%28arguments%2Elength%29%20%7B%0A%09%09%09%09%09%09%09%09%09var%20%5F%5Filastarg0%5F%5F%20%3D%20arguments%2Elength%20%2D%201%3B%0A%09%09%09%09%09%09%09%09%09if%20%28arguments%20%5B%5F%5Filastarg0%5F%5F%5D%20%26%26%20arguments%20%5B%5F%5Filastarg0%5F%5F%5D%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09%09var%20%5F%5Fallkwargs0%5F%5F%20%3D%20arguments%20%5B%5F%5Filastarg0%5F%5F%2D%2D%5D%3B%0A%09%09%09%09%09%09%09%09%09%09for%20%28var%20%5F%5Fattrib0%5F%5F%20in%20%5F%5Fallkwargs0%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09%09%09switch%20%28%5F%5Fattrib0%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09%09%09%09case%20%27a%27%3A%20var%20a%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%09%09%09case%20%27b%27%3A%20var%20b%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09return%20key%20%28a%29%20%3E%20key%20%28b%29%3B%0A%09%09%09%09%09%09%09%7D%29%29%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09else%20%7B%0A%09%09%09%09%09%09%09iterable%2Esort%20%28%29%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20%28reverse%29%20%7B%0A%09%09%09%09%09%09%09iterable%2Ereverse%20%28%29%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09var%20sorted%20%3D%20function%20%28iterable%2C%20key%2C%20reverse%29%20%7B%0A%09%09%09%09%09%09if%20%28typeof%20key%20%3D%3D%20%27undefined%27%20%7C%7C%20%28key%20%21%3D%20null%20%26%26%20key%20%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%29%20%7B%3B%0A%09%09%09%09%09%09%09var%20key%20%3D%20null%3B%0A%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09if%20%28typeof%20reverse%20%3D%3D%20%27undefined%27%20%7C%7C%20%28reverse%20%21%3D%20null%20%26%26%20reverse%20%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%29%20%7B%3B%0A%09%09%09%09%09%09%09var%20reverse%20%3D%20false%3B%0A%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09if%20%28arguments%2Elength%29%20%7B%0A%09%09%09%09%09%09%09var%20%5F%5Filastarg0%5F%5F%20%3D%20arguments%2Elength%20%2D%201%3B%0A%09%09%09%09%09%09%09if%20%28arguments%20%5B%5F%5Filastarg0%5F%5F%5D%20%26%26%20arguments%20%5B%5F%5Filastarg0%5F%5F%5D%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09var%20%5F%5Fallkwargs0%5F%5F%20%3D%20arguments%20%5B%5F%5Filastarg0%5F%5F%2D%2D%5D%3B%0A%09%09%09%09%09%09%09%09for%20%28var%20%5F%5Fattrib0%5F%5F%20in%20%5F%5Fallkwargs0%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09switch%20%28%5F%5Fattrib0%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09%09case%20%27iterable%27%3A%20var%20iterable%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%09case%20%27key%27%3A%20var%20key%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%09case%20%27reverse%27%3A%20var%20reverse%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20%28type%20%28iterable%29%20%3D%3D%20dict%29%20%7B%0A%09%09%09%09%09%09%09var%20result%20%3D%20copy%20%28iterable%2Ekeys%20%28%29%29%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09else%20%7B%0A%09%09%09%09%09%09%09var%20result%20%3D%20copy%20%28iterable%29%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%5F%5Fsort%5F%5F%20%28result%2C%20key%2C%20reverse%29%3B%0A%09%09%09%09%09%09return%20result%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09var%20map%20%3D%20function%20%28func%2C%20iterable%29%20%7B%0A%09%09%09%09%09%09return%20function%20%28%29%20%7B%0A%09%09%09%09%09%09%09var%20%5F%5Faccu0%5F%5F%20%3D%20%5B%5D%3B%0A%09%09%09%09%09%09%09var%20%5F%5Fiter0%5F%5F%20%3D%20iterable%3B%0A%09%09%09%09%09%09%09for%20%28var%20%5F%5Findex0%5F%5F%20%3D%200%3B%20%5F%5Findex0%5F%5F%20%3C%20%5F%5Fiter0%5F%5F%2Elength%3B%20%5F%5Findex0%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09%09%09%09%09var%20item%20%3D%20%5F%5Fiter0%5F%5F%20%5B%5F%5Findex0%5F%5F%5D%3B%0A%09%09%09%09%09%09%09%09%5F%5Faccu0%5F%5F%2Eappend%20%28func%20%28item%29%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09return%20%5F%5Faccu0%5F%5F%3B%0A%09%09%09%09%09%09%7D%20%28%29%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09var%20filter%20%3D%20function%20%28func%2C%20iterable%29%20%7B%0A%09%09%09%09%09%09return%20function%20%28%29%20%7B%0A%09%09%09%09%09%09%09var%20%5F%5Faccu0%5F%5F%20%3D%20%5B%5D%3B%0A%09%09%09%09%09%09%09var%20%5F%5Fiter0%5F%5F%20%3D%20iterable%3B%0A%09%09%09%09%09%09%09for%20%28var%20%5F%5Findex0%5F%5F%20%3D%200%3B%20%5F%5Findex0%5F%5F%20%3C%20%5F%5Fiter0%5F%5F%2Elength%3B%20%5F%5Findex0%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09%09%09%09%09var%20item%20%3D%20%5F%5Fiter0%5F%5F%20%5B%5F%5Findex0%5F%5F%5D%3B%0A%09%09%09%09%09%09%09%09if%20%28func%20%28item%29%29%20%7B%0A%09%09%09%09%09%09%09%09%09%5F%5Faccu0%5F%5F%2Eappend%20%28item%29%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09return%20%5F%5Faccu0%5F%5F%3B%0A%09%09%09%09%09%09%7D%20%28%29%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09var%20%5F%5FTerminal%5F%5F%20%3D%20%5F%5Fclass%5F%5F%20%28%27%5F%5FTerminal%5F%5F%27%2C%20%5Bobject%5D%2C%20%7B%0A%09%09%09%09%09%09get%20%5F%5Finit%5F%5F%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09%09%09%09self%2Eelement%20%3D%20document%2EgetElementById%20%28%27%5F%5Fterminal%5F%5F%27%29%3B%0A%09%09%09%09%09%09%09if%20%28self%2Eelement%29%20%7B%0A%09%09%09%09%09%09%09%09self%2Ebuffer%20%3D%20%27%27%3B%0A%09%09%09%09%09%09%09%09self%2Eelement%2Estyle%2EoverflowX%20%3D%20%27auto%27%3B%0A%09%09%09%09%09%09%09%09self%2Eelement%2Estyle%2Epadding%20%3D%20%275px%27%3B%0A%09%09%09%09%09%09%09%09self%2Eelement%2EinnerHTML%20%3D%20%27%5F%27%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%29%3B%7D%2C%0A%09%09%09%09%09%09get%20print%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09%09%09%09var%20sep%20%3D%20%27%20%27%3B%0A%09%09%09%09%09%09%09var%20end%20%3D%20%27%5Cn%27%3B%0A%09%09%09%09%09%09%09if%20%28arguments%2Elength%29%20%7B%0A%09%09%09%09%09%09%09%09var%20%5F%5Filastarg0%5F%5F%20%3D%20arguments%2Elength%20%2D%201%3B%0A%09%09%09%09%09%09%09%09if%20%28arguments%20%5B%5F%5Filastarg0%5F%5F%5D%20%26%26%20arguments%20%5B%5F%5Filastarg0%5F%5F%5D%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09var%20%5F%5Fallkwargs0%5F%5F%20%3D%20arguments%20%5B%5F%5Filastarg0%5F%5F%2D%2D%5D%3B%0A%09%09%09%09%09%09%09%09%09for%20%28var%20%5F%5Fattrib0%5F%5F%20in%20%5F%5Fallkwargs0%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09%09switch%20%28%5F%5Fattrib0%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09%09%09case%20%27self%27%3A%20var%20self%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%09%09case%20%27sep%27%3A%20var%20sep%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%09%09case%20%27end%27%3A%20var%20end%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09var%20args%20%3D%20tuple%20%28%5B%5D%2Eslice%2Eapply%20%28arguments%29%2Eslice%20%281%2C%20%5F%5Filastarg0%5F%5F%20%2B%201%29%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09if%20%28self%2Eelement%29%20%7B%0A%09%09%09%09%09%09%09%09self%2Ebuffer%20%3D%20%27%7B%7D%7B%7D%7B%7D%27%2Eformat%20%28self%2Ebuffer%2C%20sep%2Ejoin%20%28function%20%28%29%20%7B%0A%09%09%09%09%09%09%09%09%09var%20%5F%5Faccu0%5F%5F%20%3D%20%5B%5D%3B%0A%09%09%09%09%09%09%09%09%09var%20%5F%5Fiter0%5F%5F%20%3D%20args%3B%0A%09%09%09%09%09%09%09%09%09for%20%28var%20%5F%5Findex0%5F%5F%20%3D%200%3B%20%5F%5Findex0%5F%5F%20%3C%20%5F%5Fiter0%5F%5F%2Elength%3B%20%5F%5Findex0%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09%09%09%09%09%09%09var%20arg%20%3D%20%5F%5Fiter0%5F%5F%20%5B%5F%5Findex0%5F%5F%5D%3B%0A%09%09%09%09%09%09%09%09%09%09%5F%5Faccu0%5F%5F%2Eappend%20%28str%20%28arg%29%29%3B%0A%09%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09%09return%20%5F%5Faccu0%5F%5F%3B%0A%09%09%09%09%09%09%09%09%7D%20%28%29%29%2C%20end%29%2E%5F%5Fgetslice%5F%5F%20%28%2D%284096%29%2C%20null%2C%201%29%3B%0A%09%09%09%09%09%09%09%09self%2Eelement%2EinnerHTML%20%3D%20self%2Ebuffer%2Epy%5Freplace%20%28%27%5Cn%27%2C%20%27%3Cbr%3E%27%29%3B%0A%09%09%09%09%09%09%09%09self%2Eelement%2EscrollTop%20%3D%20self%2Eelement%2EscrollHeight%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09else%20%7B%0A%09%09%09%09%09%09%09%09console%2Elog%20%28sep%2Ejoin%20%28args%29%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%29%3B%7D%2C%0A%09%09%09%09%09%09get%20input%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%2C%20question%29%20%7B%0A%09%09%09%09%09%09%09if%20%28arguments%2Elength%29%20%7B%0A%09%09%09%09%09%09%09%09var%20%5F%5Filastarg0%5F%5F%20%3D%20arguments%2Elength%20%2D%201%3B%0A%09%09%09%09%09%09%09%09if%20%28arguments%20%5B%5F%5Filastarg0%5F%5F%5D%20%26%26%20arguments%20%5B%5F%5Filastarg0%5F%5F%5D%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09var%20%5F%5Fallkwargs0%5F%5F%20%3D%20arguments%20%5B%5F%5Filastarg0%5F%5F%2D%2D%5D%3B%0A%09%09%09%09%09%09%09%09%09for%20%28var%20%5F%5Fattrib0%5F%5F%20in%20%5F%5Fallkwargs0%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09%09switch%20%28%5F%5Fattrib0%5F%5F%29%20%7B%0A%09%09%09%09%09%09%09%09%09%09%09case%20%27self%27%3A%20var%20self%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%09%09case%20%27question%27%3A%20var%20question%20%3D%20%5F%5Fallkwargs0%5F%5F%20%5B%5F%5Fattrib0%5F%5F%5D%3B%20break%3B%0A%09%09%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09self%2Eprint%20%28%27%7B%7D%5F%27%2Eformat%20%28question%29%2C%20%5F%5Fkwargdict%5F%5F%20%28%7Bend%3A%20%27%27%7D%29%29%3B%0A%09%09%09%09%09%09%09var%20answer%20%3D%20window%2Eprompt%20%28question%29%3B%0A%09%09%09%09%09%09%09self%2Ebuffer%20%3D%20self%2Ebuffer%2E%5F%5Fgetslice%5F%5F%20%280%2C%20%2D%281%29%2C%201%29%3B%0A%09%09%09%09%09%09%09self%2Eprint%20%28answer%29%3B%0A%09%09%09%09%09%09%09return%20answer%3B%0A%09%09%09%09%09%09%7D%29%3B%7D%0A%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09var%20%5F%5Fterminal%5F%5F%20%3D%20%5F%5FTerminal%5F%5F%20%28%29%3B%0A%09%09%09%09%09%5F%5Fpragma%5F%5F%20%28%27%3Call%3E%27%29%0A%09%09%09%09%09%09%5F%5Fall%5F%5F%2EException%20%3D%20Exception%3B%0A%09%09%09%09%09%09%5F%5Fall%5F%5F%2EValueError%20%3D%20ValueError%3B%0A%09%09%09%09%09%09%5F%5Fall%5F%5F%2E%5F%5FTerminal%5F%5F%20%3D%20%5F%5FTerminal%5F%5F%3B%0A%09%09%09%09%09%09%5F%5Fall%5F%5F%2E%5F%5Fsort%5F%5F%20%3D%20%5F%5Fsort%5F%5F%3B%0A%09%09%09%09%09%09%5F%5Fall%5F%5F%2E%5F%5Fterminal%5F%5F%20%3D%20%5F%5Fterminal%5F%5F%3B%0A%09%09%09%09%09%09%5F%5Fall%5F%5F%2Efilter%20%3D%20filter%3B%0A%09%09%09%09%09%09%5F%5Fall%5F%5F%2Emap%20%3D%20map%3B%0A%09%09%09%09%09%09%5F%5Fall%5F%5F%2Esorted%20%3D%20sorted%3B%0A%09%09%09%09%09%5F%5Fpragma%5F%5F%20%28%27%3C%2Fall%3E%27%29%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%29%3B%0A%0A%09%2F%2F%20Initialize%20non%2Dnested%20modules%20%5F%5Fbase%5F%5F%20and%20%5F%5Fstandard%5F%5F%20and%20make%20its%20names%20available%20directly%20and%20via%20%5F%5Fall%5F%5F%0A%09%2F%2F%20It%20can%27t%20do%20that%20itself%2C%20because%20it%20is%20a%20regular%20Python%20module%0A%09%2F%2F%20The%20compiler%20recognizes%20its%20their%20namesand%20generates%20them%20inline%20rather%20than%20nesting%20them%0A%09%2F%2F%20In%20this%20way%20it%20isn%27t%20needed%20to%20import%20them%20everywhere%0A%09%20%09%0A%09%2F%2F%20%5F%5Fbase%5F%5F%0A%09%0A%09%5F%5Fnest%5F%5F%20%28%5F%5Fall%5F%5F%2C%20%27%27%2C%20%5F%5Finit%5F%5F%20%28%5F%5Fall%5F%5F%2Eorg%2Etranscrypt%2E%5F%5Fbase%5F%5F%29%29%3B%0A%09var%20%5F%5Fenvir%5F%5F%20%3D%20%5F%5Fall%5F%5F%2E%5F%5Fenvir%5F%5F%3B%0A%0A%09%2F%2F%20%5F%5Fstandard%5F%5F%0A%09%0A%09%5F%5Fnest%5F%5F%20%28%5F%5Fall%5F%5F%2C%20%27%27%2C%20%5F%5Finit%5F%5F%20%28%5F%5Fall%5F%5F%2Eorg%2Etranscrypt%2E%5F%5Fstandard%5F%5F%29%29%3B%0A%09%0A%09var%20Exception%20%3D%20%5F%5Fall%5F%5F%2EException%3B%0A%09%0A%09var%20%5F%5Fsort%5F%5F%20%3D%20%5F%5Fall%5F%5F%2E%5F%5Fsort%5F%5F%3B%0A%09var%20sorted%20%3D%20%5F%5Fall%5F%5F%2Esorted%3B%0A%09%0A%09var%20map%20%3D%20%5F%5Fall%5F%5F%2Emap%3B%0A%09var%20filter%20%3D%20%5F%5Fall%5F%5F%2Efilter%3B%0A%09%0A%09%5F%5Fall%5F%5F%2Eprint%20%3D%20%5F%5Fall%5F%5F%2E%5F%5Fterminal%5F%5F%2Eprint%3B%0A%09%5F%5Fall%5F%5F%2Einput%20%3D%20%5F%5Fall%5F%5F%2E%5F%5Fterminal%5F%5F%2Einput%3B%0A%09%0A%09var%20print%20%3D%20%5F%5Fall%5F%5F%2Eprint%3B%0A%09var%20input%20%3D%20%5F%5Fall%5F%5F%2Einput%3B%0A%0A%09%2F%2F%20Complete%20%5F%5Fenvir%5F%5F%2C%20that%20was%20created%20in%20%5F%5Fbase%5F%5F%2C%20for%20non%2Dstub%20mode%0A%09%5F%5Fenvir%5F%5F%2Eexecutor%5Fname%20%3D%20%5F%5Fenvir%5F%5F%2Etranspiler%5Fname%3B%0A%09%0A%09%2F%2F%20Make%20make%20%5F%5Fmain%5F%5F%20available%20in%20browser%0A%09var%20%5F%5Fmain%5F%5F%20%3D%20%7B%5F%5Ffile%5F%5F%3A%20%27%27%7D%3B%0A%09%5F%5Fall%5F%5F%2Emain%20%3D%20%5F%5Fmain%5F%5F%3B%0A%09%0A%09%2F%2F%20Define%20current%20exception%2C%20there%27s%20at%20most%20one%20exception%20in%20the%20air%20at%20any%20time%0A%09var%20%5F%5Fexcept%5F%5F%20%3D%20null%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fexcept%5F%5F%20%3D%20%5F%5Fexcept%5F%5F%3B%0A%09%09%0A%09%2F%2F%20Define%20recognizable%20dictionary%20for%20%2A%2Akwargs%20parameter%0A%09var%20%5F%5Fkwargdict%5F%5F%20%3D%20function%20%28anObject%29%20%7B%0A%09%09anObject%2E%5F%5Fclass%5F%5F%20%3D%20%5F%5Fkwargdict%5F%5F%3B%09%2F%2F%20This%20class%20needs%20no%20%5F%5Fname%5F%5F%0A%09%09anObject%2Econstructor%20%3D%20Object%3B%0A%09%09return%20anObject%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2E%5F%5F%5Fkwargdict%5F%5F%20%3D%20%5F%5Fkwargdict%5F%5F%3B%0A%09%0A%09%2F%2F%20Property%20installer%20function%2C%20no%20member%20since%20that%20would%20bloat%20classes%0A%09var%20property%20%3D%20function%20%28getter%2C%20setter%29%20%7B%09%2F%2F%20Returns%20a%20property%20descriptor%20rather%20than%20a%20property%0A%09%09if%20%28%21setter%29%20%7B%09%2F%2F%20%3F%3F%3F%20Make%20setter%20optional%20instead%20of%20dummy%3F%0A%09%09%09setter%20%3D%20function%20%28%29%20%7B%7D%3B%0A%09%09%7D%0A%09%09return%20%7Bget%3A%20function%20%28%29%20%7Breturn%20getter%20%28this%29%7D%2C%20set%3A%20function%20%28value%29%20%7Bsetter%20%28this%2C%20value%29%7D%2C%20enumerable%3A%20true%7D%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Eproperty%20%3D%20property%3B%0A%09%0A%09var%20%5F%5Fmerge%5F%5F%20%3D%20function%20%28object0%2C%20object1%29%20%7B%0A%09%09var%20result%20%3D%20%7B%7D%3B%0A%09%09for%20%28var%20attrib%20in%20object0%29%20%7B%0A%09%09%09result%20%5Battrib%5D%20%3D%20object0%20%5Battrib%5D%3B%0A%09%09%7D%0A%09%09for%20%28var%20attrib%20in%20object1%29%20%7B%0A%09%09%09result%20%5Battrib%5D%20%3D%20object1%20%5Battrib%5D%3B%0A%09%09%7D%0A%09%09return%20result%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2E%5F%5Fmerge%5F%5F%20%3D%20%5F%5Fmerge%5F%5F%3B%0A%09%0A%09%2F%2F%20Make%20console%2Elog%20understand%20apply%0A%09console%2Elog%2Eapply%20%3D%20function%20%28%29%20%7B%0A%09%09print%20%28%5B%5D%20%2Eslice%2Eapply%20%28arguments%29%20%2Eslice%20%281%29%29%3B%0A%09%7D%3B%0A%0A%09%2F%2F%20Manipulating%20attributes%20by%20name%0A%09%0A%09var%20setattr%20%3D%20function%20%28obj%2C%20name%2C%20value%29%20%7B%0A%09%09obj%20%5Bname%5D%20%3D%20value%3B%0A%09%7D%3B%0A%09%09%0A%09%5F%5Fall%5F%5F%2Esetattr%20%3D%20setattr%3B%0A%09%0A%09var%20getattr%20%3D%20function%20%28obj%2C%20name%29%20%7B%0A%09%09return%20obj%20%5Bname%5D%3B%0A%09%7D%3B%0A%09%0A%09%5F%5Fall%5F%5F%2Egetattr%3D%20getattr%0A%09%0A%09var%20hasattr%20%3D%20function%20%28obj%2C%20name%29%20%7B%0A%09%09return%20name%20in%20obj%3B%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2Ehasattr%20%3D%20hasattr%3B%0A%09%0A%09var%20delattr%20%3D%20function%20%28obj%2C%20name%29%20%7B%0A%09%09delete%20obj%20%5Bname%5D%3B%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2Edelattr%20%3D%20%28delattr%29%3B%0A%09%0A%09%2F%2F%20In%20function%2C%20used%20to%20mimic%20Python%27s%20in%20operator%0A%09var%20%5F%5Fin%5F%5F%20%3D%20function%20%28element%2C%20container%29%20%7B%0A%09%09if%20%28type%20%28container%29%20%3D%3D%20dict%29%20%7B%0A%09%09%09return%20container%2Ekeys%20%28%29%20%2EindexOf%20%28element%29%20%3E%20%2D1%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20container%2EindexOf%20%28element%29%20%3E%20%2D1%3B%0A%09%09%7D%0A%09%7D%0A%09%5F%5Fall%5F%5F%2E%5F%5Fin%5F%5F%20%3D%20%5F%5Fin%5F%5F%3B%0A%09%0A%09%2F%2F%20Find%20out%20if%20an%20attribute%20is%20special%0A%09var%20%5F%5Fspecialattrib%5F%5F%20%3D%20function%20%28attrib%29%20%7B%0A%09%09return%20%28attrib%2Estartswith%20%28%27%5F%5F%27%29%20%26%26%20attrib%2Eendswith%20%28%27%5F%5F%27%29%29%20%7C%7C%20attrib%20%3D%3D%20%27constructor%27%20%7C%7C%20attrib%2Estartswith%20%28%27py%5F%27%29%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2E%5F%5Fspecialattrib%5F%5F%20%3D%20%5F%5Fspecialattrib%5F%5F%3B%0A%09%09%0A%09%2F%2F%20Len%20function%20for%20any%20object%0A%09var%20len%20%3D%20function%20%28anObject%29%20%7B%0A%09%09if%20%28anObject%29%20%7B%0A%09%09%09var%20l%20%3D%20anObject%2Elength%3B%0A%09%09%09if%20%28l%20%3D%3D%20undefined%29%20%7B%0A%09%09%09%09var%20result%20%3D%200%3B%0A%09%09%09%09for%20%28var%20attrib%20in%20anObject%29%20%7B%0A%09%09%09%09%09if%20%28%21%5F%5Fspecialattrib%5F%5F%20%28attrib%29%29%20%7B%0A%09%09%09%09%09%09result%2B%2B%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20result%3B%0A%09%09%09%7D%0A%09%09%09else%20%7B%0A%09%09%09%09return%20l%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%200%3B%0A%09%09%7D%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Elen%20%3D%20len%3B%0A%09%0A%09var%20bool%20%3D%20function%20%28any%29%20%7B%09%2F%2F%20Subtly%20different%20from%20%5F%5F%20%28any%29%2C%20always%20truly%20returns%20a%20bool%2C%20rather%20than%20something%20truthy%20or%20falsy%0A%09%09return%20typeof%20any%20%3D%3D%20%27boolean%27%20%3F%20any%20%3A%20typeof%20any%20%3D%3D%20%27number%27%20%3F%20any%20%21%3D%200%20%3A%20len%20%28any%29%20%3F%20true%20%3A%20false%3B%0A%09%7D%0A%09bool%2E%5F%5Fname%5F%5F%20%3D%20%27bool%27%09%2F%2F%20So%20it%20can%20be%20used%20as%20a%20type%20with%20a%20name%0A%09%5F%5Fall%5F%5F%2Ebool%20%3D%20bool%3B%0A%09%0A%09var%20float%20%3D%20function%20%28any%29%20%7B%0A%09%09if%20%28isNaN%20%28any%29%29%20%7B%0A%09%09%09throw%20%28%27ValueError%27%29%3B%09%2F%2F%20%21%21%21%20Turn%20into%20real%20value%20error%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20%2Bany%3B%0A%09%09%7D%0A%09%7D%0A%09float%2E%5F%5Fname%5F%5F%20%3D%20%27float%27%0A%09%5F%5Fall%5F%5F%2Efloat%20%3D%20float%3B%0A%09%0A%09var%20int%20%3D%20function%20%28any%29%20%7B%0A%09%09return%20float%20%28any%29%20%7C%200%0A%09%7D%0A%09int%2E%5F%5Fname%5F%5F%20%3D%20%27int%27%3B%0A%09%5F%5Fall%5F%5F%2Eint%20%3D%20int%3B%0A%09%0A%09var%20type%20%3D%20function%20%28anObject%29%20%7B%0A%09%09try%20%7B%0A%09%09%09return%20anObject%2E%5F%5Fclass%5F%5F%3B%0A%09%09%7D%0A%09%09catch%20%28exception%29%20%7B%0A%09%09%09var%20aType%20%3D%20typeof%20anObject%3B%0A%09%09%09if%20%28aType%20%3D%3D%20%27boolean%27%29%20%7B%0A%09%09%09%09return%20bool%3B%0A%09%09%09%7D%0A%09%09%09else%20if%20%28aType%20%3D%3D%20%27number%27%29%20%7B%0A%09%09%09%09if%20%28anObject%20%25%201%20%3D%3D%200%29%20%7B%0A%09%09%09%09%09return%20int%3B%0A%09%09%09%09%7D%0A%09%09%09%09else%20%7B%0A%09%09%09%09%09return%20float%3B%0A%09%09%09%09%7D%09%09%09%09%0A%09%09%09%7D%0A%09%09%09else%20%7B%0A%09%09%09%09return%20aType%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Etype%20%3D%20type%3B%0A%09%0A%09var%20isinstance%20%3D%20function%20%28anObject%2C%20classinfo%29%20%7B%0A%09%09function%20isA%20%28queryClass%29%20%7B%0A%09%09%09if%20%28queryClass%20%3D%3D%20classinfo%29%20%7B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%09%09%09for%20%28var%20index%20%3D%200%3B%20index%20%3C%20queryClass%2E%5F%5Fbases%5F%5F%2Elength%3B%20index%2B%2B%29%20%7B%0A%09%09%09%09if%20%28isA%20%28queryClass%2E%5F%5Fbases%5F%5F%20%5Bindex%5D%2C%20classinfo%29%29%20%7B%0A%09%09%09%09%09return%20true%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09return%20false%3B%0A%09%09%7D%0A%09%09return%20isA%20%28anObject%2E%5F%5Fclass%5F%5F%29%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2Eisinstance%20%3D%20isinstance%3B%0A%09%0A%09%2F%2F%20Truthyness%20conversion%0A%09function%20%5F%5F%20%28any%29%20%7B%09%2F%2F%20Subtly%20different%20from%20bool%20%28any%29%2C%20%5F%5F%20%28%5B1%2C%202%2C%203%5D%29%20returns%20%5B1%2C%202%2C%203%5D%2C%20needed%20for%20nonempty%20selection%3A%20l%20%3D%20list1%20or%20list2%0A%09%09return%20%5B%27boolean%27%2C%20%27number%27%5D%20%2EindexOf%20%28typeof%20%28any%29%29%20%3E%3D%200%20%3F%20any%20%3A%20len%20%28any%29%20%3F%20any%20%3A%20false%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2E%5F%5F%20%3D%20%5F%5F%3B%0A%09%0A%09%2F%2F%20Repr%20function%20uses%20%5F%5Frepr%5F%5F%20method%2C%20then%20%5F%5Fstr%5F%5F%20then%20toString%0A%09var%20repr%20%3D%20function%20%28anObject%29%20%7B%0A%09%09try%20%7B%0A%09%09%09return%20anObject%2E%5F%5Frepr%5F%5F%20%28%29%3B%0A%09%09%7D%0A%09%09catch%20%28exception%29%20%7B%0A%09%09%09try%20%7B%0A%09%09%09%09return%20anObject%2E%5F%5Fstr%5F%5F%20%28%29%3B%0A%09%09%09%7D%0A%09%09%09catch%20%28exception%29%20%7B%09%2F%2F%20It%20was%20a%20dict%20in%20Python%2C%20so%20an%20Object%20in%20JavaScript%0A%09%09%09%09try%20%7B%0A%09%09%09%09%09if%20%28anObject%2Econstructor%20%3D%3D%20Object%29%20%7B%0A%09%09%09%09%09%09var%20result%20%3D%20%27%7B%27%3B%0A%09%09%09%09%09%09var%20comma%20%3D%20false%3B%0A%09%09%09%09%09%09for%20%28var%20attrib%20in%20anObject%29%20%7B%0A%09%09%09%09%09%09%09if%20%28%21%5F%5Fspecialattrib%5F%5F%20%28attrib%29%29%20%7B%0A%09%09%09%09%09%09%09%09if%20%28attrib%2Eisnumeric%20%28%29%29%20%7B%0A%09%09%09%09%09%09%09%09%09var%20attribRepr%20%3D%20attrib%3B%09%09%09%09%2F%2F%20If%20key%20can%20be%20interpreted%20as%20numerical%2C%20we%20make%20it%20numerical%20%0A%09%09%09%09%09%09%09%09%7D%09%09%09%09%09%09%09%09%09%09%09%2F%2F%20So%20we%20accept%20that%20%271%27%20is%20misrepresented%20as%201%0A%09%09%09%09%09%09%09%09else%20%7B%0A%09%09%09%09%09%09%09%09%09var%20attribRepr%20%3D%20%27%5C%27%27%20%2B%20attrib%20%2B%20%27%5C%27%27%3B%09%2F%2F%20Alpha%20key%20in%20dict%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09%0A%09%09%09%09%09%09%09%09if%20%28comma%29%20%7B%0A%09%09%09%09%09%09%09%09%09result%20%2B%3D%20%27%2C%20%27%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09else%20%7B%0A%09%09%09%09%09%09%09%09%09comma%20%3D%20true%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09%09%09%09result%20%2B%3D%20attribRepr%20%2B%20%27%3A%20%27%20%2B%20anObject%20%5Battrib%5D%20%2E%5F%5Frepr%5F%5F%20%28%29%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%09catch%20%28exception%29%20%7B%0A%09%09%09%09%09%09%09%09%09result%20%2B%3D%20attribRepr%20%2B%20%27%3A%20%27%20%2B%20anObject%20%5Battrib%5D%20%2EtoString%20%28%29%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09result%20%2B%3D%20%27%7D%27%3B%0A%09%09%09%09%09%09return%20result%3B%09%09%09%09%09%0A%09%09%09%09%09%7D%0A%09%09%09%09%09else%20%7B%0A%09%09%09%09%09%09return%20typeof%20anObject%20%3D%3D%20%27boolean%27%20%3F%20anObject%2EtoString%20%28%29%20%2Ecapitalize%20%28%29%20%3A%20anObject%2EtoString%20%28%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09catch%20%28exception%29%20%7B%0A%09%09%09%09%09console%2Elog%20%28%27ERROR%3A%20Could%20not%20evaluate%20repr%20%28%3Cobject%20of%20type%20%27%20%2B%20typeof%20anObject%20%2B%20%27%3E%29%27%29%3B%0A%09%09%09%09%09return%20%27%3F%3F%3F%27%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Erepr%20%3D%20repr%3B%0A%09%0A%09%2F%2F%20Char%20from%20Unicode%20or%20ASCII%0A%09var%20chr%20%3D%20function%20%28charCode%29%20%7B%0A%09%09return%20String%2EfromCharCode%20%28charCode%29%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Echr%20%3D%20chr%3B%0A%0A%09%2F%2F%20Unicode%20or%20ASCII%20from%20char%0A%09var%20ord%20%3D%20function%20%28aChar%29%20%7B%0A%09%09return%20aChar%2EcharCodeAt%20%280%29%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Eorg%20%3D%20ord%3B%0A%09%0A%09%2F%2F%20Maximum%20of%20n%20numbers%0A%09var%20max%20%3D%20Math%2Emax%3B%0A%09%5F%5Fall%5F%5F%2Emax%20%3D%20max%3B%0A%09%0A%09%2F%2F%20Minimum%20of%20n%20numbers%0A%09var%20min%20%3D%20Math%2Emin%3B%0A%09%5F%5Fall%5F%5F%2Emin%20%3D%20min%3B%0A%09%0A%09%2F%2F%20Absolute%20value%0A%09var%20abs%20%3D%20Math%2Eabs%3B%0A%09%5F%5Fall%5F%5F%2Eabs%20%3D%20abs%3B%0A%09%0A%09%2F%2F%20Reversed%20function%20for%20arrays%0A%09var%20reversed%20%3D%20function%20%28iterable%29%20%7B%0A%09%09iterable%20%3D%20iterable%2Eslice%20%28%29%3B%0A%09%09iterable%2Ereverse%20%28%29%3B%0A%09%09return%20iterable%3B%0A%09%7D%0A%09%0A%09%2F%2F%20Zip%20method%20for%20arrays%0A%09var%20zip%20%3D%20function%20%28%29%20%7B%0A%09%09var%20args%20%3D%20%5B%5D%20%2Eslice%2Ecall%20%28arguments%29%3B%0A%09%09var%20shortest%20%3D%20args%2Elength%20%3D%3D%200%20%3F%20%5B%5D%20%3A%20args%2Ereduce%20%28%09%2F%2F%20Find%20shortest%20array%20in%20arguments%0A%09%09%09function%20%28array0%2C%20array1%29%20%7B%0A%09%09%09%09return%20array0%2Elength%20%3C%20array1%2Elength%20%3F%20array0%20%3A%20array1%3B%0A%09%09%09%7D%0A%09%09%29%3B%0A%09%09return%20shortest%2Emap%20%28%09%09%09%09%09%2F%2F%20Map%20each%20element%20of%20shortest%20array%0A%09%09%09function%20%28current%2C%20index%29%20%7B%09%09%09%2F%2F%20To%20the%20result%20of%20this%20function%0A%09%09%09%09return%20args%2Emap%20%28%09%09%09%09%2F%2F%20Map%20each%20array%20in%20arguments%0A%09%09%09%09%09function%20%28current%29%20%7B%09%09%2F%2F%20To%20the%20result%20of%20this%20function%0A%09%09%09%09%09%09return%20current%20%5Bindex%5D%3B%20%2F%2F%20Namely%20it%27s%20index%27t%20entry%0A%09%09%09%09%09%7D%0A%09%09%09%09%29%3B%0A%09%09%09%7D%0A%09%09%29%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Ezip%20%3D%20zip%3B%0A%09%0A%09%2F%2F%20Range%20method%2C%20returning%20an%20array%0A%09function%20range%20%28start%2C%20stop%2C%20step%29%20%7B%0A%09%09if%20%28typeof%20stop%20%3D%3D%20%27undefined%27%29%20%7B%0A%09%09%09%2F%2F%20one%20param%20defined%0A%09%09%09stop%20%3D%20start%3B%0A%09%09%09start%20%3D%200%3B%0A%09%09%7D%0A%09%09if%20%28typeof%20step%20%3D%3D%20%27undefined%27%29%20%7B%0A%09%09%09step%20%3D%201%3B%0A%09%09%7D%0A%09%09if%20%28%28step%20%3E%200%20%26%26%20start%20%3E%3D%20stop%29%20%7C%7C%20%28step%20%3C%200%20%26%26%20start%20%3C%3D%20stop%29%29%20%7B%0A%09%09%09return%20%5B%5D%3B%0A%09%09%7D%0A%09%09var%20result%20%3D%20%5B%5D%3B%0A%09%09for%20%28var%20i%20%3D%20start%3B%20step%20%3E%200%20%3F%20i%20%3C%20stop%20%3A%20i%20%3E%20stop%3B%20i%20%2B%3D%20step%29%20%7B%0A%09%09%09result%2Epush%28i%29%3B%0A%09%09%7D%0A%09%09return%20result%3B%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2Erange%20%3D%20range%3B%0A%09%0A%09%2F%2F%20Enumerate%20method%2C%20returning%20a%20zipped%20list%0A%09function%20enumerate%20%28iterable%29%20%7B%0A%09%09return%20zip%20%28range%20%28len%20%28iterable%29%29%2C%20iterable%29%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Eenumerate%20%3D%20enumerate%3B%0A%09%09%0A%09%2F%2F%20Shallow%20and%20deepcopy%0A%09%0A%09function%20copy%20%28anObject%29%20%7B%0A%09%09if%20%28anObject%20%3D%3D%20null%20%7C%7C%20typeof%20anObject%20%3D%3D%20%22object%22%29%20%7B%0A%09%09%09return%20anObject%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09var%20result%20%3D%20%7B%7D%0A%09%09%09for%20%28var%20attrib%20in%20obj%29%20%7B%0A%09%09%09%09if%20%28anObject%2EhasOwnProperty%20%28attrib%29%29%20%7B%0A%09%09%09%09%09result%20%5Battrib%5D%20%3D%20anObject%20%5Battrib%5D%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09return%20result%3B%0A%09%09%7D%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Ecopy%20%3D%20copy%3B%0A%09%0A%09function%20deepcopy%20%28anObject%29%20%7B%0A%09%09if%20%28anObject%20%3D%3D%20null%20%7C%7C%20typeof%20anObject%20%3D%3D%20%22object%22%29%20%7B%0A%09%09%09return%20anObject%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09var%20result%20%3D%20%7B%7D%0A%09%09%09for%20%28var%20attrib%20in%20obj%29%20%7B%0A%09%09%09%09if%20%28anObject%2EhasOwnProperty%20%28attrib%29%29%20%7B%0A%09%09%09%09%09result%20%5Battrib%5D%20%3D%20deepcopy%20%28anObject%20%5Battrib%5D%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09return%20result%3B%0A%09%09%7D%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Edeepcopy%20%3D%20deepcopy%3B%0A%09%09%0A%09%2F%2F%20List%20extensions%20to%20Array%0A%09%0A%09function%20list%20%28iterable%29%20%7B%09%09%09%09%09%09%09%09%09%09%2F%2F%20All%20such%20creators%20should%20be%20callable%20without%20new%0A%09%09var%20instance%20%3D%20iterable%20%3F%20%5B%5D%20%2Eslice%2Eapply%20%28iterable%29%20%3A%20%5B%5D%3B%09%2F%2F%20Spread%20iterable%2C%20n%2Eb%2E%20array%2Eslice%20%28%29%2C%20so%20array%20before%20dot%0A%09%09%2F%2F%20Sort%20is%20the%20normal%20JavaScript%20sort%2C%20Python%20sort%20is%20a%20non%2Dmember%20function%0A%09%09return%20instance%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Elist%20%3D%20list%3B%0A%09Array%2Eprototype%2E%5F%5Fclass%5F%5F%20%3D%20list%3B%09%2F%2F%20All%20arrays%20are%20lists%20%28not%20only%20if%20constructed%20by%20the%20list%20ctor%29%2C%20unless%20constructed%20otherwise%0A%09list%2E%5F%5Fname%5F%5F%20%3D%20%27list%27%3B%0A%09%0A%09Array%2Eprototype%2E%5F%5Fgetslice%5F%5F%20%3D%20function%20%28start%2C%20stop%2C%20step%29%20%7B%0A%09%09if%20%28start%20%3C%200%29%20%7B%0A%09%09%09start%20%3D%20this%2Elength%20%2B%20start%3B%0A%09%09%7D%0A%09%09%0A%09%09if%20%28stop%20%3D%3D%20null%29%20%7B%0A%09%09%09stop%20%3D%20this%2Elength%3B%0A%09%09%7D%0A%09%09else%20if%20%28stop%20%3C%200%29%20%7B%0A%09%09%09stop%20%3D%20this%2Elength%20%2B%20stop%3B%0A%09%09%7D%0A%09%09%0A%09%09var%20result%20%3D%20list%20%28%5B%5D%29%3B%0A%09%09for%20%28var%20index%20%3D%20start%3B%20index%20%3C%20stop%3B%20index%20%2B%3D%20step%29%20%7B%0A%09%09%09result%2Epush%20%28this%20%5Bindex%5D%29%3B%0A%09%09%7D%0A%09%09%0A%09%09return%20result%3B%0A%09%7D%0A%09%09%0A%09Array%2Eprototype%2E%5F%5Fsetslice%5F%5F%20%3D%20function%20%28start%2C%20stop%2C%20step%2C%20source%29%20%7B%0A%09%09if%20%28start%20%3C%200%29%20%7B%0A%09%09%09start%20%3D%20this%2Elength%20%2B%20start%3B%0A%09%09%7D%0A%09%09%09%0A%09%09if%20%28stop%20%3D%3D%20null%29%20%7B%0A%09%09%09stop%20%3D%20this%2Elength%3B%0A%09%09%7D%0A%09%09else%20if%20%28stop%20%3C%200%29%20%7B%0A%09%09%09stop%20%3D%20this%2Elength%20%2B%20stop%3B%0A%09%09%7D%0A%09%09%09%0A%09%09if%20%28step%20%3D%3D%20null%29%20%7B%09%2F%2F%20Assign%20to%20%27ordinary%27%20slice%2C%20replace%20subsequence%0A%09%09%09Array%2Eprototype%2Esplice%2Eapply%20%28this%2C%20%5Bstart%2C%20stop%20%2D%20start%5D%20%2Econcat%20%28source%29%29%20%0A%09%09%7D%0A%09%09else%20%7B%09%09%09%09%2F%2F%20Assign%20to%20extended%20slice%2C%20replace%20designated%20items%20one%20by%20one%0A%09%09%09var%20sourceIndex%20%3D%200%3B%0A%09%09%09for%20%28var%20targetIndex%20%3D%20start%3B%20targetIndex%20%3C%20stop%3B%20targetIndex%20%2B%3D%20step%29%20%7B%0A%09%09%09%09this%20%5BtargetIndex%5D%20%3D%20source%20%5BsourceIndex%2B%2B%5D%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%09%0A%09Array%2Eprototype%2E%5F%5Frepr%5F%5F%20%3D%20function%20%28%29%20%7B%0A%09%09if%20%28this%2E%5F%5Fclass%5F%5F%20%3D%3D%20set%20%26%26%20%21this%2Elength%29%20%7B%0A%09%09%09return%20%27set%28%29%27%3B%0A%09%09%7D%0A%09%09%0A%09%09var%20result%20%3D%20%21this%2E%5F%5Fclass%5F%5F%20%7C%7C%20this%2E%5F%5Fclass%5F%5F%20%3D%3D%20list%20%3F%20%27%5B%27%20%3A%20this%2E%5F%5Fclass%5F%5F%20%3D%3D%20tuple%20%3F%20%27%28%27%20%3A%20%27%7B%27%3B%0A%09%09%0A%09%09for%20%28var%20index%20%3D%200%3B%20index%20%3C%20this%2Elength%3B%20index%2B%2B%29%20%7B%0A%09%09%09if%20%28index%29%20%7B%0A%09%09%09%09result%20%2B%3D%20%27%2C%20%27%3B%0A%09%09%09%7D%0A%09%09%09try%20%7B%0A%09%09%09%09result%20%2B%3D%20this%20%5Bindex%5D%20%2E%5F%5Frepr%5F%5F%20%28%29%3B%0A%09%09%09%7D%0A%09%09%09catch%20%28exception%29%20%7B%0A%09%09%09%09result%20%2B%3D%20this%20%5Bindex%5D%20%2EtoString%20%28%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09%0A%09%09if%20%28this%2E%5F%5Fclass%5F%5F%20%3D%3D%20tuple%20%26%26%20this%2Elength%20%3D%3D%201%29%20%7B%0A%09%09%09result%20%2B%3D%20%27%2C%27%3B%0A%09%09%7D%0A%09%09%0A%09%09result%20%2B%3D%20%21this%2E%5F%5Fclass%5F%5F%20%7C%7C%20this%2E%5F%5Fclass%5F%5F%20%3D%3D%20list%20%3F%20%27%5D%27%20%3A%20this%2E%5F%5Fclass%5F%5F%20%3D%3D%20tuple%20%3F%20%27%29%27%20%3A%20%27%7D%27%3B%3B%0A%09%09return%20result%3B%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2E%5F%5Fstr%5F%5F%20%3D%20Array%2Eprototype%2E%5F%5Frepr%5F%5F%3B%0A%09%0A%09Array%2Eprototype%2Eappend%20%3D%20function%20%28element%29%20%7B%0A%09%09this%2Epush%20%28element%29%3B%0A%09%7D%3B%0A%0A%09Array%2Eprototype%2Eclear%20%3D%20function%20%28%29%20%7B%0A%09%09this%2Elength%20%3D%200%3B%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Eextend%20%3D%20function%20%28aList%29%20%7B%0A%09%09this%2Epush%2Eapply%20%28this%2C%20aList%29%3B%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Einsert%20%3D%20function%20%28index%2C%20element%29%20%7B%0A%09%09this%2Esplice%20%28index%2C%200%2C%20element%29%3B%0A%09%7D%3B%0A%0A%09Array%2Eprototype%2Eremove%20%3D%20function%20%28element%29%20%7B%0A%09%09var%20index%20%3D%20this%2EindexOf%20%28element%29%3B%0A%09%09if%20%28index%20%3D%3D%20%2D1%29%20%7B%0A%09%09%09throw%20%28%27KeyError%27%29%3B%0A%09%09%7D%0A%09%09this%2Esplice%20%28index%2C%201%29%3B%0A%09%7D%3B%0A%0A%09Array%2Eprototype%2Eindex%20%3D%20function%20%28element%29%20%7B%0A%09%09return%20this%2EindexOf%20%28element%29%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Epy%5Fpop%20%3D%20function%20%28index%29%20%7B%0A%09%09if%20%28index%20%3D%3D%20undefined%29%20%7B%0A%09%09%09return%20this%2Epop%20%28%29%09%2F%2F%20Remove%20last%20element%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20this%2Esplice%20%28index%2C%201%29%20%5B0%5D%3B%0A%09%09%7D%0A%09%7D%3B%09%0A%09%0A%09Array%2Eprototype%2Epy%5Fsort%20%3D%20function%20%28%29%20%7B%0A%09%09%5F%5Fsort%5F%5F%2Eapply%20%20%28null%2C%20%5Bthis%5D%2Econcat%20%28%5B%5D%20%2Eslice%2Eapply%20%28arguments%29%29%29%3B%09%2F%2F%20Can%27t%20work%20directly%20with%20arguments%0A%09%09%2F%2F%20Python%20params%3A%20%28iterable%2C%20key%20%3D%20None%2C%20reverse%20%3D%20False%29%0A%09%09%2F%2F%20py%5Fsort%20is%20called%20with%20the%20Transcrypt%20kwargs%20mechanism%2C%20and%20just%20passes%20the%20params%20on%20to%20%5F%5Fsort%5F%5F%0A%09%09%2F%2F%20%5F%5Fsort%5F%5F%20is%20def%27ed%20with%20the%20Transcrypt%20kwargs%20mechanism%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2E%5F%5Fadd%5F%5F%20%3D%20function%20%28aList%29%20%7B%0A%09%09return%20list%20%28this%2Econcat%20%28aList%29%29%0A%09%7D%0A%09%0A%09Array%2Eprototype%2E%5F%5Fmul%5F%5F%20%3D%20function%20%28scalar%29%20%7B%0A%09%09var%20result%20%3D%20this%3B%0A%09%09for%20%28var%20i%20%3D%201%3B%20i%20%3C%20scalar%3B%20i%2B%2B%29%20%7B%0A%09%09%09result%20%3D%20result%2Econcat%20%28this%29%3B%0A%09%09%7D%0A%09%09return%20result%3B%0A%09%7D%0A%09%0A%09Array%2Eprototype%2E%5F%5Frmul%5F%5F%20%3D%20Array%2Eprototype%2E%5F%5Fmul%5F%5F%3B%0A%09%09%0A%09%2F%2F%20Tuple%20extensions%20to%20Array%0A%09%0A%09function%20tuple%20%28iterable%29%20%7B%0A%09%09var%20instance%20%3D%20iterable%20%3F%20%5B%5D%20%2Eslice%2Eapply%20%28iterable%29%20%3A%20%5B%5D%3B%0A%09%09instance%2E%5F%5Fclass%5F%5F%20%3D%20tuple%3B%09%2F%2F%20Not%20all%20arrays%20are%20tuples%0A%09%09return%20instance%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Etuple%20%3D%20tuple%3B%0A%09tuple%2E%5F%5Fname%5F%5F%20%3D%20%27tuple%27%3B%0A%09%0A%09%2F%2F%20Set%20extensions%20to%20Array%0A%09%2F%2F%20N%2EB%2E%20Since%20sets%20are%20unordered%2C%20set%20operations%20will%20occasionally%20alter%20the%20%27this%27%20array%20by%20sorting%20it%0A%09%09%0A%09function%20set%20%28iterable%29%20%7B%0A%09%09var%20instance%20%3D%20%5B%5D%3B%0A%09%09if%20%28iterable%29%20%7B%0A%09%09%09for%20%28var%20index%20%3D%200%3B%20index%20%3C%20iterable%2Elength%3B%20index%2B%2B%29%20%7B%0A%09%09%09%09instance%2Eadd%20%28iterable%20%5Bindex%5D%29%3B%0A%09%09%09%7D%0A%09%09%09%0A%09%09%09%0A%09%09%7D%0A%09%09instance%2E%5F%5Fclass%5F%5F%20%3D%20set%3B%09%2F%2F%20Not%20all%20arrays%20are%20sets%0A%09%09return%20instance%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Eset%20%3D%20set%3B%0A%09set%2E%5F%5Fname%5F%5F%20%3D%20%27set%27%3B%0A%09%0A%09Array%2Eprototype%2E%5F%5FbindexOf%5F%5F%20%3D%20function%20%28element%29%20%7B%09%2F%2F%20Used%20to%20turn%20O%20%28n%5E2%29%20into%20O%20%28n%20log%20n%29%0A%09%2F%2F%20Since%20sorting%20is%20lex%2C%20compare%20has%20to%20be%20lex%2E%20This%20also%20allows%20for%20mixed%20lists%0A%09%0A%09%09element%20%2B%3D%20%27%27%3B%0A%09%0A%09%09var%20mindex%20%3D%200%3B%0A%09%09var%20maxdex%20%3D%20this%2Elength%20%2D%201%3B%0A%09%09%09%20%0A%09%09while%20%28mindex%20%3C%3D%20maxdex%29%20%7B%0A%09%09%09var%20index%20%3D%20%28mindex%20%2B%20maxdex%29%20%2F%202%20%7C%200%3B%0A%09%09%09var%20middle%20%3D%20this%20%5Bindex%5D%20%2B%20%27%27%3B%0A%09%20%0A%09%09%09if%20%28middle%20%3C%20element%29%20%7B%0A%09%09%09%09mindex%20%3D%20index%20%2B%201%3B%0A%09%09%09%7D%0A%09%09%09else%20if%20%28middle%20%3E%20element%29%20%7B%0A%09%09%09%09maxdex%20%3D%20index%20%2D%201%3B%0A%09%09%09%7D%0A%09%09%09else%20%7B%0A%09%09%09%09return%20index%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%20%0A%09%09return%20%2D1%3B%0A%09%7D%0A%09%0A%09Array%2Eprototype%2Eadd%20%3D%20function%20%28element%29%20%7B%09%09%0A%09%09if%20%28this%2EindexOf%20%28element%29%20%3D%3D%20%2D1%29%20%7B%09%2F%2F%20Avoid%20duplicates%20in%20set%0A%09%09%09this%2Epush%20%28element%29%3B%0A%09%09%7D%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Ediscard%20%3D%20function%20%28element%29%20%7B%0A%09%09var%20index%20%3D%20this%2EindexOf%20%28element%29%3B%0A%09%09if%20%28index%20%21%3D%20%2D1%29%20%7B%0A%09%09%09this%2Esplice%20%28index%2C%201%29%3B%0A%09%09%7D%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Eisdisjoint%20%3D%20function%20%28other%29%20%7B%0A%09%09this%2Esort%20%28%29%3B%0A%09%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20other%2Elength%3B%20i%2B%2B%29%20%7B%0A%09%09%09if%20%28this%2E%5F%5FbindexOf%5F%5F%20%28other%20%5Bi%5D%29%20%21%3D%20%2D1%29%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20true%3B%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Eissuperset%20%3D%20function%20%28other%29%20%7B%0A%09%09this%2Esort%20%28%29%3B%0A%09%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20other%2Elength%3B%20i%2B%2B%29%20%7B%0A%09%09%09if%20%28this%2E%5F%5FbindexOf%5F%5F%20%28other%20%5Bi%5D%29%20%3D%3D%20%2D1%29%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20true%3B%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Eissubset%20%3D%20function%20%28other%29%20%7B%0A%09%09return%20set%20%28other%2Eslice%20%28%29%29%20%2Eissuperset%20%28this%29%3B%09%2F%2F%20Sort%20copy%20of%20%27other%27%2C%20not%20%27other%27%20itself%2C%20since%20it%20may%20be%20an%20ordered%20sequence%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Eunion%20%3D%20function%20%28other%29%20%7B%0A%09%09var%20result%20%3D%20set%20%28this%2Eslice%20%28%29%20%2Esort%20%28%29%29%3B%0A%09%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20other%2Elength%3B%20i%2B%2B%29%20%7B%0A%09%09%09if%20%28result%2E%5F%5FbindexOf%5F%5F%20%28other%20%5Bi%5D%29%20%3D%3D%20%2D1%29%20%7B%0A%09%09%09%09result%2Epush%20%28other%20%5Bi%5D%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20result%3B%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Eintersection%20%3D%20function%20%28other%29%20%7B%0A%09%09this%2Esort%20%28%29%3B%0A%09%09var%20result%20%3D%20set%20%28%29%3B%0A%09%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20other%2Elength%3B%20i%2B%2B%29%20%7B%0A%09%09%09if%20%28this%2E%5F%5FbindexOf%5F%5F%20%28other%20%5Bi%5D%29%20%21%3D%20%2D1%29%20%7B%0A%09%09%09%09result%2Epush%20%28other%20%5Bi%5D%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20result%3B%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Edifference%20%3D%20function%20%28other%29%20%7B%0A%09%09var%20sother%20%3D%20set%20%28other%2Eslice%20%28%29%20%2Esort%20%28%29%29%3B%0A%09%09var%20result%20%3D%20set%20%28%29%3B%0A%09%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Elength%3B%20i%2B%2B%29%20%7B%0A%09%09%09if%20%28sother%2E%5F%5FbindexOf%5F%5F%20%28this%20%5Bi%5D%29%20%3D%3D%20%2D1%29%20%7B%0A%09%09%09%09result%2Epush%20%28this%20%5Bi%5D%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20result%3B%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Esymmetric%5Fdifference%20%3D%20function%20%28other%29%20%7B%0A%09%09return%20this%2Eunion%20%28other%29%20%2Edifference%20%28this%2Eintersection%20%28other%29%29%3B%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2Eupdate%20%3D%20function%20%28%29%20%7B%09%2F%2F%20O%20%28n%29%0A%09%09var%20updated%20%3D%20%5B%5D%20%2Econcat%2Eapply%20%28this%2Eslice%20%28%29%2C%20arguments%29%20%2Esort%20%28%29%3B%09%09%0A%09%09this%2Eclear%20%28%29%3B%0A%09%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20updated%2Elength%3B%20i%2B%2B%29%20%7B%0A%09%09%09if%20%28updated%20%5Bi%5D%20%21%3D%20updated%20%5Bi%20%2D%201%5D%29%20%7B%0A%09%09%09%09this%2Epush%20%28updated%20%5Bi%5D%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2E%5F%5Feq%5F%5F%20%3D%20function%20%28other%29%20%7B%09%2F%2F%20Also%20used%20for%20list%0A%09%09if%20%28this%2Elength%20%21%3D%20other%2Elength%29%20%7B%0A%09%09%09return%20false%3B%0A%09%09%7D%0A%09%09if%20%28this%2E%5F%5Fclass%5F%5F%20%3D%3D%20set%29%20%7B%0A%09%09%09this%2Esort%20%28%29%3B%0A%09%09%09other%2Esort%20%28%29%3B%0A%09%09%7D%09%0A%09%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20this%2Elength%3B%20i%2B%2B%29%20%7B%0A%09%09%09if%20%28this%20%5Bi%5D%20%21%3D%20other%20%5Bi%5D%29%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20true%3B%0A%09%7D%3B%0A%09%0A%09Array%2Eprototype%2E%5F%5Fne%5F%5F%20%3D%20function%20%28other%29%20%7B%09%2F%2F%20Also%20used%20for%20list%0A%09%09return%20%21this%2E%5F%5Feq%5F%5F%20%28other%29%3B%0A%09%7D%0A%09%09%0A%09Array%2Eprototype%2E%5F%5Fle%5F%5F%20%3D%20function%20%28other%29%20%7B%0A%09%09return%20this%2Eissubset%20%28other%29%3B%0A%09%7D%0A%09%09%0A%09Array%2Eprototype%2E%5F%5Fge%5F%5F%20%3D%20function%20%28other%29%20%7B%0A%09%09return%20this%2Eissuperset%20%28other%29%3B%0A%09%7D%0A%09%09%0A%09Array%2Eprototype%2E%5F%5Flt%5F%5F%20%3D%20function%20%28other%29%20%7B%0A%09%09return%20this%2Eissubset%20%28other%29%20%26%26%20%21this%2Eissuperset%20%28other%29%3B%0A%09%7D%0A%09%09%0A%09Array%2Eprototype%2E%5F%5Fgt%5F%5F%20%3D%20function%20%28other%29%20%7B%0A%09%09return%20this%2Eissuperset%20%28other%29%20%26%26%20%21this%2Eissubset%20%28other%29%3B%0A%09%7D%0A%09%0A%09%2F%2F%20Dict%20extensions%20to%20object%0A%09%0A%09function%20%5F%5Fkeys%5F%5F%20%28%29%20%7B%0A%09%09var%20keys%20%3D%20%5B%5D%0A%09%09for%20%28var%20attrib%20in%20this%29%20%7B%0A%09%09%09if%20%28%21%5F%5Fspecialattrib%5F%5F%20%28attrib%29%29%20%7B%0A%09%09%09%09keys%2Epush%20%28attrib%29%3B%0A%09%09%09%7D%20%20%20%20%20%0A%09%09%7D%0A%09%09return%20keys%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2E%5F%5Fkeys%5F%5F%20%3D%20%5F%5Fkeys%5F%5F%3B%0A%09%09%0A%09function%20%5F%5Fitems%5F%5F%20%28%29%20%7B%0A%09%09var%20items%20%3D%20%5B%5D%0A%09%09for%20%28var%20attrib%20in%20this%29%20%7B%0A%09%09%09if%20%28%21%5F%5Fspecialattrib%5F%5F%20%28attrib%29%29%20%7B%0A%09%09%09%09items%2Epush%20%28%5Battrib%2C%20this%20%5Battrib%5D%5D%29%3B%0A%09%09%09%7D%20%20%20%20%20%0A%09%09%7D%0A%09%09return%20items%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2E%5F%5Fitems%5F%5F%20%3D%20%5F%5Fitems%5F%5F%3B%0A%09%09%0A%09function%20%5F%5Fdel%5F%5F%20%28key%29%20%7B%0A%09%09delete%20this%20%5Bkey%5D%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2E%5F%5Fdel%5F%5F%20%3D%20%5F%5Fdel%5F%5F%3B%0A%09%0A%09function%20%5F%5Fclear%5F%5F%20%28%29%20%7B%0A%09%09for%20%28var%20attrib%20in%20this%29%20%7B%0A%09%09%09delete%20this%20%5Battrib%5D%3B%0A%09%09%7D%0A%09%7D%0A%09%5F%5Fall%5F%5F%2E%5F%5Fclear%5F%5F%20%3D%20%5F%5Fclear%5F%5F%3B%0A%09%09%0A%09function%20dict%20%28objectOrPairs%29%20%7B%0A%09%09if%20%28%21objectOrPairs%20%7C%7C%20objectOrPairs%20instanceof%20Array%29%20%7B%09%2F%2F%20It%27s%20undefined%20or%20an%20array%20of%20pairs%0A%09%09%09var%20instance%20%3D%20%7B%7D%3B%0A%09%09%09if%20%28objectOrPairs%29%20%7B%0A%09%09%09%09for%20%28var%20index%20%3D%200%3B%20index%20%3C%20objectOrPairs%2Elength%3B%20index%2B%2B%29%20%7B%0A%09%09%09%09%09var%20pair%20%3D%20objectOrPairs%20%5Bindex%5D%3B%0A%09%09%09%09%09instance%20%5Bpair%20%5B0%5D%5D%20%3D%20pair%20%5B1%5D%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%09else%20%7B%09%09%09%09%09%09%09%09%09%09%09%09%09%2F%2F%20It%27s%20a%20JavaScript%20object%20literal%0A%09%09%09var%20instance%20%3D%20objectOrPairs%3B%0A%09%09%7D%0A%09%09%09%0A%09%09%2F%2F%20Trancrypt%20interprets%20e%2Eg%2E%20%7BaKey%3A%20%27aValue%27%7D%20as%20a%20Python%20dict%20literal%20rather%20than%20a%20JavaScript%20object%20literal%0A%09%09%2F%2F%20So%20dict%20literals%20rather%20than%20bare%20Object%20literals%20will%20be%20passed%20to%20JavaScript%20libraries%0A%09%09%2F%2F%20Some%20JavaScript%20libraries%20call%20all%20enumerable%20callable%20properties%20of%20an%20object%20that%27s%20passed%20to%20them%0A%09%09%2F%2F%20So%20the%20properties%20of%20a%20dict%20should%20be%20non%2Denumerable%0A%09%09Object%2EdefineProperty%20%28instance%2C%20%27%5F%5Fclass%5F%5F%27%2C%20%7Bvalue%3A%20dict%2C%20enumerable%3A%20false%2C%20writable%3A%20true%7D%29%3B%0A%09%09Object%2EdefineProperty%20%28instance%2C%20%27keys%27%2C%20%7Bvalue%3A%20%5F%5Fkeys%5F%5F%2C%20enumerable%3A%20false%7D%29%3B%09%09%09%0A%09%09Object%2EdefineProperty%20%28instance%2C%20%27items%27%2C%20%7Bvalue%3A%20%5F%5Fitems%5F%5F%2C%20enumerable%3A%20false%7D%29%3B%09%09%0A%09%09Object%2EdefineProperty%20%28instance%2C%20%27del%27%2C%20%7Bvalue%3A%20%5F%5Fdel%5F%5F%2C%20enumerable%3A%20false%7D%29%3B%0A%09%09Object%2EdefineProperty%20%28instance%2C%20%27clear%27%2C%20%7Bvalue%3A%20%5F%5Fclear%5F%5F%2C%20enumerable%3A%20false%7D%29%3B%0A%09%09%0A%09%09return%20instance%3B%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Edict%20%3D%20dict%3B%0A%09dict%2E%5F%5Fname%5F%5F%20%3D%20%27dict%27%3B%0A%09%0A%09%2F%2F%20String%20extensions%0A%09%09%0A%09function%20str%20%28stringable%29%20%7B%0A%09%09try%20%7B%0A%09%09%09return%20stringable%2E%5F%5Fstr%5F%5F%20%28%29%3B%0A%09%09%7D%0A%09%09catch%20%28e%29%20%7B%0A%09%09%09return%20new%20String%20%28stringable%29%3B%0A%09%09%7D%0A%09%7D%0A%09%5F%5Fall%5F%5F%2Estr%20%3D%20str%3B%09%0A%09%0A%09String%2Eprototype%2E%5F%5Fclass%5F%5F%20%3D%20str%3B%09%2F%2F%20All%20strings%20are%20str%0A%09str%2E%5F%5Fname%5F%5F%20%3D%20%27str%27%3B%0A%09%0A%09String%2Eprototype%2E%5F%5Frepr%5F%5F%20%3D%20function%20%28%29%20%7B%0A%09%09return%20%28this%2EindexOf%20%28%27%5C%27%27%29%20%3D%3D%20%2D1%20%3F%20%27%5C%27%27%20%2B%20this%20%2B%20%27%5C%27%27%20%3A%20%27%22%27%20%2B%20this%20%2B%20%27%22%27%29%20%2Ereplace%20%28%27%5Cn%27%2C%20%27%5C%5Cn%27%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2E%5F%5Fstr%5F%5F%20%3D%20function%20%28%29%20%7B%0A%09%09return%20this%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Ecapitalize%20%3D%20function%20%28%29%20%7B%0A%09%09return%20this%2EcharAt%20%280%29%2EtoUpperCase%20%28%29%20%2B%20this%2Eslice%20%281%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Eendswith%20%3D%20function%20%28suffix%29%20%7B%0A%09%09return%20suffix%20%3D%3D%20%27%27%20%7C%7C%20this%2Eslice%20%28%2Dsuffix%2Elength%29%20%3D%3D%20suffix%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Efind%20%20%3D%20function%20%28sub%2C%20start%29%20%7B%0A%09%09return%20this%2EindexOf%20%28sub%2C%20start%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2E%5F%5Fgetslice%5F%5F%20%3D%20function%20%28start%2C%20stop%2C%20step%29%20%7B%0A%09%09if%20%28start%20%3C%200%29%20%7B%0A%09%09%09start%20%3D%20this%2Elength%20%2B%20start%3B%0A%09%09%7D%0A%09%09%0A%09%09if%20%28stop%20%3D%3D%20null%29%20%7B%0A%09%09%09stop%20%3D%20this%2Elength%3B%0A%09%09%7D%0A%09%09else%20if%20%28stop%20%3C%200%29%20%7B%0A%09%09%09stop%20%3D%20this%2Elength%20%2B%20stop%3B%0A%09%09%7D%0A%09%09%0A%09%09var%20result%20%3D%20%27%27%3B%0A%09%09if%20%28step%20%3D%3D%201%29%20%7B%0A%09%09%09result%20%3D%20this%2Esubstring%20%28start%2C%20stop%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09for%20%28var%20index%20%3D%20start%3B%20index%20%3C%20stop%3B%20index%20%2B%3D%20step%29%20%7B%0A%09%09%09%09result%20%3D%20result%2Econcat%20%28this%2EcharAt%28index%29%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09return%20result%3B%0A%09%7D%0A%09%0A%09%2F%2F%20Since%20it%27s%20worthwhile%20for%20the%20%27format%27%20function%20to%20be%20able%20to%20deal%20with%20%2Aargs%2C%20it%20is%20defined%20as%20a%20property%0A%09%2F%2F%20%5F%5Fget%5F%5F%20will%20produce%20a%20bound%20function%20if%20there%27s%20something%20before%20the%20dot%0A%09%2F%2F%20Since%20a%20call%20using%20%2Aargs%20is%20compiled%20to%20e%2Eg%2E%20%3Cobject%3E%2E%3Cfunction%3E%2Eapply%20%28null%2C%20args%29%2C%20the%20function%20has%20to%20be%20bound%20already%0A%09%2F%2F%20Otherwise%20it%20will%20never%20be%2C%20because%20of%20the%20null%20argument%0A%09%2F%2F%20Using%20%27this%27%20rather%20than%20%27null%27%20contradicts%20the%20requirement%20to%20be%20able%20to%20pass%20bound%20functions%20around%0A%09%2F%2F%20The%20object%20%27before%20the%20dot%27%20won%27t%20be%20available%20at%20call%20time%20in%20that%20case%2C%20unless%20implicitly%20via%20the%20function%20bound%20to%20it%0A%09%2F%2F%20While%20for%20Python%20methods%20this%20mechanism%20is%20generated%20by%20the%20compiler%2C%20for%20JavaScript%20methods%20it%20has%20to%20be%20provided%20manually%0A%09%2F%2F%20Call%20memoizing%20is%20unattractive%20here%2C%20since%20every%20string%20would%20then%20have%20to%20hold%20a%20reference%20to%20a%20bound%20format%20method%0A%09Object%2EdefineProperty%20%28String%2Eprototype%2C%20%27format%27%2C%20%7B%0A%09%09get%3A%20function%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09var%20args%20%3D%20tuple%20%28%5B%5D%20%2Eslice%2Eapply%20%28arguments%29%2Eslice%20%281%29%29%3B%09%09%09%0A%09%09%09var%20autoIndex%20%3D%200%3B%0A%09%09%09return%20self%2Ereplace%20%28%2F%5C%7B%28%5Cw%2A%29%5C%7D%2Fg%2C%20function%20%28match%2C%20key%29%20%7B%20%0A%09%09%09%09if%20%28key%20%3D%3D%20%27%27%29%20%7B%0A%09%09%09%09%09key%20%3D%20autoIndex%2B%2B%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20%28key%20%3D%3D%20%2Bkey%29%20%7B%09%2F%2F%20So%20key%20is%20numerical%0A%09%09%09%09%09return%20args%20%5Bkey%5D%20%3D%3D%20%27undefined%27%20%3F%20match%20%3A%20args%20%5Bkey%5D%3B%0A%09%09%09%09%7D%0A%09%09%09%09else%20%7B%09%09%09%09%2F%2F%20Key%20is%20a%20string%0A%09%09%09%09%09for%20%28var%20index%20%3D%200%3B%20index%20%3C%20args%2Elength%3B%20index%2B%2B%29%20%7B%0A%09%09%09%09%09%09%2F%2F%20Find%20first%20%27dict%27%20that%20has%20that%20key%20and%20the%20right%20field%0A%09%09%09%09%09%09if%20%28typeof%20args%20%5Bindex%5D%20%3D%3D%20%27object%27%20%26%26%20typeof%20args%20%5Bindex%5D%5Bkey%5D%20%21%3D%20%27undefined%27%29%20%7B%0A%09%09%09%09%09%09%09return%20args%20%5Bindex%5D%5Bkey%5D%3B%09%2F%2F%20Return%20that%20field%20field%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09return%20match%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%29%3B%0A%09%09%7D%29%3B%7D%2C%0A%09%09enumerable%3A%20true%0A%09%7D%29%3B%0A%09%0A%09String%2Eprototype%2Eisnumeric%20%3D%20function%20%28%29%20%7B%0A%09%09return%20%21isNaN%20%28parseFloat%20%28this%29%29%20%26%26%20isFinite%20%28this%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Ejoin%20%3D%20function%20%28aList%29%20%7B%0A%09%09return%20aList%2Ejoin%20%28this%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Elower%20%3D%20function%20%28%29%20%7B%0A%09%09return%20this%2EtoLowerCase%20%28%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Epy%5Freplace%20%3D%20function%20%28old%2C%20aNew%2C%20maxreplace%29%20%7B%0A%09%09return%20this%2Esplit%20%28old%2C%20maxreplace%29%20%2Ejoin%20%28aNew%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Elstrip%20%3D%20function%20%28%29%20%7B%0A%09%09return%20this%2Ereplace%20%28%2F%5E%5Cs%2A%2Fg%2C%20%27%27%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Erfind%20%3D%20function%20%28sub%2C%20start%29%20%7B%0A%09%09return%20this%2ElastIndexOf%20%28sub%2C%20start%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Ersplit%20%3D%20function%20%28sep%2C%20maxsplit%29%20%7B%0A%09%09var%20split%20%3D%20this%2Esplit%20%28sep%20%7C%7C%20%2Fs%2B%2F%29%3B%0A%09%09return%20maxsplit%20%3F%20%5B%20split%2Eslice%20%280%2C%20%2Dmaxsplit%29%20%2Ejoin%20%28sep%29%20%5D%2Econcat%20%28split%2Eslice%20%28%2Dmaxsplit%29%29%20%3A%20split%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Erstrip%20%3D%20function%20%28%29%20%7B%0A%09%09return%20this%2Ereplace%20%28%2F%5Cs%2A%24%2Fg%2C%20%27%27%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Epy%5Fsplit%20%3D%20function%20%28sep%2C%20maxsplit%29%20%7B%0A%09%09if%20%28%21sep%29%20%7B%0A%09%09%09sep%20%3D%20%27%20%27%3B%0A%09%09%7D%0A%09%09return%20this%2Esplit%20%28sep%20%7C%7C%20%2Fs%2B%2F%2C%20maxsplit%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Estartswith%20%3D%20function%20%28prefix%29%20%7B%0A%09%09return%20this%2EindexOf%20%28prefix%29%20%3D%3D%200%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2Estrip%20%3D%20function%20%28%29%20%7B%0A%09%09return%20this%2Etrim%20%28%29%3B%0A%09%7D%3B%0A%09%09%0A%09String%2Eprototype%2Eupper%20%3D%20function%20%28%29%20%7B%0A%09%09return%20this%2EtoUpperCase%20%28%29%3B%0A%09%7D%3B%0A%09%0A%09String%2Eprototype%2E%5F%5Fmul%5F%5F%20%3D%20function%20%28scalar%29%20%7B%0A%09%09var%20result%20%3D%20this%3B%0A%09%09for%20%28var%20i%20%3D%201%3B%20i%20%3C%20scalar%3B%20i%2B%2B%29%20%7B%0A%09%09%09result%20%3D%20result%20%2B%20this%3B%0A%09%09%7D%0A%09%09return%20result%3B%0A%09%7D%0A%09%0A%09String%2Eprototype%2E%5F%5Frmul%5F%5F%20%3D%20String%2Eprototype%2E%5F%5Fmul%5F%5F%3B%0A%09%0A%09%2F%2F%20Operator%20overloading%2C%20only%20the%20ones%20that%20make%20most%20sense%20in%20matrix%20operations%0A%09%0A%09var%20%5F%5Fneg%5F%5F%20%3D%20function%20%28a%29%20%7B%0A%09%09if%20%28typeof%20a%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fneg%5F%5F%27%20in%20a%29%20%7B%0A%09%09%09return%20a%2E%5F%5Fneg%5F%5F%20%28%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20%2Da%3B%0A%09%09%7D%0A%09%7D%3B%20%20%0A%09%5F%5Fall%5F%5F%2E%5F%5Fneg%5F%5F%20%3D%20%5F%5Fneg%5F%5F%3B%0A%09%0A%09var%20%5F%5Fmatmul%5F%5F%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%09%09return%20a%2E%5F%5Fmatmul%5F%5F%20%28b%29%3B%0A%09%7D%3B%20%20%0A%09%5F%5Fall%5F%5F%2E%5F%5Fmatmul%5F%5F%20%3D%20%5F%5Fmatmul%5F%5F%3B%0A%09%0A%09var%20%5F%5Fmul%5F%5F%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%09%09if%20%28typeof%20a%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fmul%5F%5F%27%20in%20a%29%20%7B%0A%09%09%09return%20a%2E%5F%5Fmul%5F%5F%20%28b%29%3B%0A%09%09%7D%0A%09%09else%20if%20%28typeof%20b%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Frmul%5F%5F%27%20in%20b%29%20%7B%0A%09%09%09return%20b%2E%5F%5Frmul%5F%5F%20%28a%29%3B%0A%09%09%7D%0A%09%09else%20if%20%28typeof%20a%20%3D%3D%20%27string%27%29%20%7B%0A%09%09%09return%20a%2E%5F%5Fmul%5F%5F%20%28b%29%3B%0A%09%09%7D%0A%09%09else%20if%20%28typeof%20b%20%3D%3D%20%27string%27%29%20%7B%0A%09%09%09return%20b%2E%5F%5Frmul%5F%5F%20%28a%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20a%20%2A%20b%3B%0A%09%09%7D%0A%09%7D%3B%20%20%0A%09%5F%5Fall%5F%5F%2E%5F%5Fmul%5F%5F%20%3D%20%5F%5Fmul%5F%5F%3B%0A%09%0A%09var%20%5F%5Fdiv%5F%5F%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%09%09if%20%28typeof%20a%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fdiv%5F%5F%27%20in%20a%29%20%7B%0A%09%09%09return%20a%2E%5F%5Fdiv%5F%5F%20%28b%29%3B%0A%09%09%7D%0A%09%09else%20if%20%28typeof%20b%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Frdiv%5F%5F%27%20in%20b%29%20%7B%0A%09%09%09return%20b%2E%5F%5Frdiv%5F%5F%20%28a%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20a%20%2F%20b%3B%0A%09%09%7D%0A%09%7D%3B%20%20%0A%09%5F%5Fall%5F%5F%2E%5F%5Fdiv%5F%5F%20%3D%20%5F%5Fdiv%5F%5F%3B%0A%09%0A%09var%20%5F%5Fadd%5F%5F%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%09%09if%20%28typeof%20a%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fadd%5F%5F%27%20in%20a%29%20%7B%0A%09%09%09return%20a%2E%5F%5Fadd%5F%5F%20%28b%29%3B%0A%09%09%7D%0A%09%09else%20if%20%28typeof%20b%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fradd%5F%5F%27%20in%20b%29%20%7B%0A%09%09%09return%20b%2E%5F%5Fradd%5F%5F%20%28a%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20a%20%2B%20b%3B%0A%09%09%7D%0A%09%7D%3B%20%20%0A%09%5F%5Fall%5F%5F%2E%5F%5Fadd%5F%5F%20%3D%20%5F%5Fadd%5F%5F%3B%0A%09%0A%09var%20%5F%5Fsub%5F%5F%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%09%09if%20%28typeof%20a%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fsub%5F%5F%27%20in%20a%29%20%7B%0A%09%09%09return%20a%2E%5F%5Fsub%5F%5F%20%28b%29%3B%0A%09%09%7D%0A%09%09else%20if%20%28typeof%20b%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Frsub%5F%5F%27%20in%20b%29%20%7B%0A%09%09%09return%20b%2E%5F%5Frsub%5F%5F%20%28a%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20a%20%2D%20b%3B%0A%09%09%7D%0A%09%7D%3B%20%20%0A%09%5F%5Fall%5F%5F%2E%5F%5Fsub%5F%5F%20%3D%20%5F%5Fsub%5F%5F%3B%0A%09%0A%09var%20%5F%5Feq%5F%5F%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%09%09if%20%28typeof%20a%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Feq%5F%5F%27%20in%20a%29%20%7B%0A%09%09%09return%20a%2E%5F%5Feq%5F%5F%20%28b%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20a%20%3D%3D%20b%0A%09%09%7D%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Feq%5F%5F%20%3D%20%5F%5Feq%5F%5F%3B%0A%09%09%0A%09var%20%5F%5Fne%5F%5F%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%09%09if%20%28typeof%20a%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fne%5F%5F%27%20in%20a%29%20%7B%0A%09%09%09return%20a%2E%5F%5Fne%5F%5F%20%28b%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20a%20%21%3D%20b%0A%09%09%7D%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fne%5F%5F%20%3D%20%5F%5Fne%5F%5F%3B%0A%09%09%0A%09var%20%5F%5Flt%5F%5F%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%09%09if%20%28typeof%20a%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Flt%5F%5F%27%20in%20a%29%20%7B%0A%09%09%09return%20a%2E%5F%5Flt%5F%5F%20%28b%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20a%20%3C%20b%0A%09%09%7D%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Flt%5F%5F%20%3D%20%5F%5Flt%5F%5F%3B%0A%09%09%0A%09var%20%5F%5Fle%5F%5F%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%09%09if%20%28typeof%20a%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fle%5F%5F%27%20in%20a%29%20%7B%0A%09%09%09return%20a%2E%5F%5Fle%5F%5F%20%28b%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20a%20%3C%3D%20b%0A%09%09%7D%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fle%5F%5F%20%3D%20%5F%5Fle%5F%5F%3B%0A%09%09%0A%09var%20%5F%5Fgt%5F%5F%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%09%09if%20%28typeof%20a%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fgt%5F%5F%27%20in%20a%29%20%7B%0A%09%09%09return%20a%2E%5F%5Fgt%5F%5F%20%28b%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20a%20%3E%20b%0A%09%09%7D%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fgt%5F%5F%20%3D%20%5F%5Fgt%5F%5F%3B%0A%09%09%0A%09var%20%5F%5Fge%5F%5F%20%3D%20function%20%28a%2C%20b%29%20%7B%0A%09%09if%20%28typeof%20a%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fge%5F%5F%27%20in%20a%29%20%7B%0A%09%09%09return%20a%2E%5F%5Fge%5F%5F%20%28b%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20a%20%3E%3D%20b%0A%09%09%7D%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fge%5F%5F%20%3D%20%5F%5Fge%5F%5F%3B%0A%09%09%0A%09var%20%5F%5Fgetitem%5F%5F%20%3D%20function%20%28container%2C%20key%29%20%7B%0A%09%09if%20%28typeof%20container%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fgetitem%5F%5F%27%20in%20container%29%20%7B%0A%09%09%09return%20container%2E%5F%5Fgetitem%5F%5F%20%28key%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20container%20%5Bkey%5D%3B%0A%09%09%7D%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fgetitem%5F%5F%20%3D%20%5F%5Fgetitem%5F%5F%3B%0A%0A%09var%20%5F%5Fsetitem%5F%5F%20%3D%20function%20%28container%2C%20key%2C%20value%29%20%7B%0A%09%09if%20%28typeof%20container%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fsetitem%5F%5F%27%20in%20container%29%20%7B%0A%09%09%09container%2E%5F%5Fsetitem%5F%5F%20%28key%2C%20value%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09container%20%5Bkey%5D%20%3D%20value%3B%0A%09%09%7D%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fsetitem%5F%5F%20%3D%20%5F%5Fsetitem%5F%5F%3B%0A%0A%09var%20%5F%5Fgetslice%5F%5F%20%3D%20function%20%28container%2C%20lower%2C%20upper%2C%20step%29%20%7B%0A%09%09if%20%28typeof%20container%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fgetitem%5F%5F%27%20in%20container%29%20%7B%0A%09%09%09return%20container%2E%5F%5Fgetitem%5F%5F%20%28%5Blower%2C%20upper%2C%20step%5D%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20container%2E%5F%5Fgetslice%5F%5F%20%28lower%2C%20upper%2C%20step%29%3B%0A%09%09%7D%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fgetslice%5F%5F%20%3D%20%5F%5Fgetslice%5F%5F%3B%0A%0A%09var%20%5F%5Fsetslice%5F%5F%20%3D%20function%20%28container%2C%20lower%2C%20upper%2C%20step%2C%20value%29%20%7B%0A%09%09if%20%28typeof%20container%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fsetitem%5F%5F%27%20in%20container%29%20%7B%0A%09%09%09container%2E%5F%5Fsetitem%5F%5F%20%28%5Blower%2C%20upper%2C%20step%5D%2C%20value%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09container%2E%5F%5Fsetslice%5F%5F%20%28lower%2C%20upper%2C%20step%2C%20value%29%3B%0A%09%09%7D%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fsetslice%5F%5F%20%3D%20%5F%5Fsetslice%5F%5F%3B%0A%0A%09var%20%5F%5Fcall%5F%5F%20%3D%20function%20%28%2F%2A%20%3Ccallee%3E%2C%20%3Cparams%3E%2A%20%2A%2F%29%20%7B%0A%09%09var%20args%20%3D%20%5B%5D%20%2Eslice%2Eapply%20%28arguments%29%0A%09%09if%20%28typeof%20args%20%5B0%5D%20%3D%3D%20%27object%27%20%26%26%20%27%5F%5Fcall%5F%5F%27%20in%20args%20%5B0%5D%29%20%7B%0A%09%09%09return%20args%20%5B0%5D%20%2E%5F%5Fcall%5F%5F%20%2Eapply%20%28null%2C%20%20args%2Eslice%20%281%29%29%3B%0A%09%09%7D%0A%09%09else%20%7B%0A%09%09%09return%20args%20%5B0%5D%20%2Eapply%20%28null%2C%20args%2Eslice%20%281%29%29%3B%0A%09%09%7D%09%09%0A%09%7D%3B%0A%09%5F%5Fall%5F%5F%2E%5F%5Fcall%5F%5F%20%3D%20%5F%5Fcall%5F%5F%3B%0A%0A%09%28function%20%28%29%20%7B%0A%09%09var%20colors%20%3D%20function%20%28%29%20%7B%0A%09%09%09var%20%5F%5Faccu0%5F%5F%20%3D%20%5B%5D%3B%0A%09%09%09var%20%5F%5Fiter0%5F%5F%20%3D%20list%20%28%5Btuple%20%28%5B0%2C%200%2C%200%5D%29%2C%20tuple%20%28%5B0%2C%200%2C%20255%5D%29%2C%20tuple%20%28%5B0%2C%20255%2C%200%5D%29%2C%20tuple%20%28%5B0%2C%20255%2C%20255%5D%29%2C%20tuple%20%28%5B255%2C%200%2C%200%5D%29%2C%20tuple%20%28%5B255%2C%200%2C%20255%5D%29%2C%20tuple%20%28%5B255%2C%20255%2C%200%5D%29%2C%20tuple%20%28%5B255%2C%20255%2C%20255%5D%29%5D%29%3B%0A%09%09%09for%20%28var%20%5F%5Findex0%5F%5F%20%3D%200%3B%20%5F%5Findex0%5F%5F%20%3C%20%5F%5Fiter0%5F%5F%2Elength%3B%20%5F%5Findex0%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09var%20color%20%3D%20%5F%5Fiter0%5F%5F%20%5B%5F%5Findex0%5F%5F%5D%3B%0A%09%09%09%09%5F%5Faccu0%5F%5F%2Eappend%20%28JS%2Ergb2hex%20%28%27rgba%28%7B%7D%2C%200%29%27%2Eformat%20%28color%29%29%29%3B%0A%09%09%09%7D%0A%09%09%09return%20%5F%5Faccu0%5F%5F%3B%0A%09%09%7D%20%28%29%3B%0A%09%09var%20allcolors%20%3D%20function%20%28%29%20%7B%0A%09%09%09var%20%5F%5Faccu0%5F%5F%20%3D%20%5B%5D%3B%0A%09%09%09var%20%5F%5Fiter0%5F%5F%20%3D%20zip%20%28colors%2C%20colors%29%3B%0A%09%09%09for%20%28var%20%5F%5Findex0%5F%5F%20%3D%200%3B%20%5F%5Findex0%5F%5F%20%3C%20%5F%5Fiter0%5F%5F%2Elength%3B%20%5F%5Findex0%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09var%20tuplecolor%20%3D%20%5F%5Fiter0%5F%5F%20%5B%5F%5Findex0%5F%5F%5D%3B%0A%09%09%09%09var%20%5F%5Fiter1%5F%5F%20%3D%20tuplecolor%3B%0A%09%09%09%09for%20%28var%20%5F%5Findex1%5F%5F%20%3D%200%3B%20%5F%5Findex1%5F%5F%20%3C%20%5F%5Fiter1%5F%5F%2Elength%3B%20%5F%5Findex1%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09%09var%20color%20%3D%20%5F%5Fiter1%5F%5F%20%5B%5F%5Findex1%5F%5F%5D%3B%0A%09%09%09%09%09%5F%5Faccu0%5F%5F%2Eappend%20%28color%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09return%20%5F%5Faccu0%5F%5F%3B%0A%09%09%7D%20%28%29%3B%0A%09%09JS%2Eshuffle%20%28allcolors%29%3B%0A%09%09var%20all%20%3D%20function%20%28iterable%29%20%7B%0A%09%09%09var%20%5F%5Fiter0%5F%5F%20%3D%20iterable%3B%0A%09%09%09for%20%28var%20%5F%5Findex0%5F%5F%20%3D%200%3B%20%5F%5Findex0%5F%5F%20%3C%20%5F%5Fiter0%5F%5F%2Elength%3B%20%5F%5Findex0%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09var%20element%20%3D%20%5F%5Fiter0%5F%5F%20%5B%5F%5Findex0%5F%5F%5D%3B%0A%09%09%09%09if%20%28%21%28element%29%29%20%7B%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09return%20true%3B%0A%09%09%7D%3B%0A%09%09var%20Grid%20%3D%20%5F%5Fclass%5F%5F%20%28%27Grid%27%2C%20%5Bobject%5D%2C%20%7B%0A%09%09%09get%20%5F%5Finit%5F%5F%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%2C%20game%2C%20rows%2C%20cols%29%20%7B%0A%09%09%09%09if%20%28typeof%20rows%20%3D%3D%20%27undefined%27%20%7C%7C%20%28rows%20%21%3D%20null%20%26%26%20rows%20%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%29%20%7B%3B%0A%09%09%09%09%09var%20rows%20%3D%204%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20%28typeof%20cols%20%3D%3D%20%27undefined%27%20%7C%7C%20%28cols%20%21%3D%20null%20%26%26%20cols%20%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%29%20%7B%3B%0A%09%09%09%09%09var%20cols%20%3D%204%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09self%2Eoffset%20%3D%204%3B%0A%09%09%09%09self%2Egame%20%3D%20game%3B%0A%09%09%09%09self%2Erows%20%3D%20rows%3B%0A%09%09%09%09self%2Ecols%20%3D%20rows%3B%0A%09%09%09%09self%2Eligs%20%3D%20function%20%28%29%20%7B%0A%09%09%09%09%09var%20%5F%5Faccu0%5F%5F%20%3D%20%5B%5D%3B%0A%09%09%09%09%09for%20%28var%20j%20%3D%200%3B%20j%20%3C%20self%2Ecols%3B%20j%2B%2B%29%20%7B%0A%09%09%09%09%09%09%5F%5Faccu0%5F%5F%2Eappend%20%28function%20%28%29%20%7B%0A%09%09%09%09%09%09%09var%20%5F%5Faccu1%5F%5F%20%3D%20%5B%5D%3B%0A%09%09%09%09%09%09%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20self%2Erows%3B%20i%2B%2B%29%20%7B%0A%09%09%09%09%09%09%09%09%5F%5Faccu1%5F%5F%2Eappend%20%280%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09return%20%5F%5Faccu1%5F%5F%3B%0A%09%09%09%09%09%09%7D%20%28%29%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09return%20%5F%5Faccu0%5F%5F%3B%0A%09%09%09%09%7D%20%28%29%3B%0A%09%09%09%09self%2Espr%20%3D%20function%20%28%29%20%7B%0A%09%09%09%09%09var%20%5F%5Faccu0%5F%5F%20%3D%20%5B%5D%3B%0A%09%09%09%09%09for%20%28var%20j%20%3D%200%3B%20j%20%3C%20self%2Ecols%3B%20j%2B%2B%29%20%7B%0A%09%09%09%09%09%09%5F%5Faccu0%5F%5F%2Eappend%20%28function%20%28%29%20%7B%0A%09%09%09%09%09%09%09var%20%5F%5Faccu1%5F%5F%20%3D%20%5B%5D%3B%0A%09%09%09%09%09%09%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20self%2Erows%3B%20i%2B%2B%29%20%7B%0A%09%09%09%09%09%09%09%09%5F%5Faccu1%5F%5F%2Eappend%20%280%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09return%20%5F%5Faccu1%5F%5F%3B%0A%09%09%09%09%09%09%7D%20%28%29%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09return%20%5F%5Faccu0%5F%5F%3B%0A%09%09%09%09%7D%20%28%29%3B%0A%09%09%09%7D%29%3B%7D%2C%0A%09%09%09get%20display%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09var%20numcells%20%3D%20self%2Erows%20%2A%20self%2Ecols%3B%0A%09%09%09%09var%20cells%20%3D%20range%20%2816%29%3B%0A%09%09%09%09JS%2Eshuffle%20%28cells%29%3B%0A%09%09%09%09JS%2Eshuffle%20%28colors%29%3B%0A%09%09%09%09var%20%5F%5Fiter0%5F%5F%20%3D%20cells%3B%0A%09%09%09%09for%20%28var%20%5F%5Findex0%5F%5F%20%3D%200%3B%20%5F%5Findex0%5F%5F%20%3C%20%5F%5Fiter0%5F%5F%2Elength%3B%20%5F%5Findex0%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09%09var%20num%20%3D%20%5F%5Fiter0%5F%5F%20%5B%5F%5Findex0%5F%5F%5D%3B%0A%09%09%09%09%09var%20color%20%3D%20allcolors%20%5Bnum%5D%3B%0A%09%09%09%09%09var%20%5F%5Fleft0%5F%5F%20%3D%20tuple%20%28%5Bnum%20%25%20self%2Ecols%2C%20Math%2Efloor%20%28num%20%2F%20self%2Erows%29%5D%29%3B%0A%09%09%09%09%09var%20i%20%3D%20%5F%5Fleft0%5F%5F%20%5B0%5D%3B%0A%09%09%09%09%09var%20j%20%3D%20%5F%5Fleft0%5F%5F%20%5B1%5D%3B%0A%09%09%09%09%09var%20%5F%5Fleft0%5F%5F%20%3D%20tuple%20%28%5Bi%20%2A%20%28128%20%2B%20self%2Eoffset%29%2C%20j%20%2A%20%28128%20%2B%20self%2Eoffset%29%5D%29%3B%0A%09%09%09%09%09var%20posx%20%3D%20%5F%5Fleft0%5F%5F%20%5B0%5D%3B%0A%09%09%09%09%09var%20posy%20%3D%20%5F%5Fleft0%5F%5F%20%5B1%5D%3B%0A%09%09%09%09%09var%20sprite%20%3D%20self%2Egame%2Erectangle%20%28128%2C%20128%2C%20color%29%3B%0A%09%09%09%09%09sprite%2Ex%20%3D%20posx%3B%0A%09%09%09%09%09sprite%2Ey%20%3D%20posy%3B%0A%09%09%09%09%09sprite%2Enum%20%3D%20num%3B%0A%09%09%09%09%09sprite%2Econtent%20%3D%20color%3B%0A%09%09%09%09%09sprite%2Eshowed%20%3D%20false%3B%0A%09%09%09%09%09var%20rectb%20%3D%20self%2Egame%2Erectangle%20%28128%2C%20128%2C%20%27lightGray%27%29%3B%0A%09%09%09%09%09rectb%2Ex%20%3D%20posx%3B%0A%09%09%09%09%09rectb%2Ey%20%3D%20posy%3B%0A%09%09%09%09%09rectb%2Enum%20%3D%20num%3B%0A%09%09%09%09%09self%2Eligs%20%5Bi%5D%20%5Bj%5D%20%3D%20rectb%3B%0A%09%09%09%09%09self%2Espr%20%5Bi%5D%20%5Bj%5D%20%3D%20sprite%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%29%3B%7D%0A%09%09%7D%29%3B%0A%09%09var%20Memory%20%3D%20%5F%5Fclass%5F%5F%20%28%27Memory%27%2C%20%5Bobject%5D%2C%20%7B%0A%09%09%09get%20%5F%5Finit%5F%5F%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%2C%20width%2C%20height%29%20%7B%0A%09%09%09%09if%20%28typeof%20width%20%3D%3D%20%27undefined%27%20%7C%7C%20%28width%20%21%3D%20null%20%26%26%20width%20%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%29%20%7B%3B%0A%09%09%09%09%09var%20width%20%3D%20524%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09if%20%28typeof%20height%20%3D%3D%20%27undefined%27%20%7C%7C%20%28height%20%21%3D%20null%20%26%26%20height%20%2E%5F%5Fclass%5F%5F%20%3D%3D%20%5F%5Fkwargdict%5F%5F%29%29%20%7B%3B%0A%09%09%09%09%09var%20height%20%3D%20524%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09self%2Egame%20%3D%20hexi%20%28width%2C%20height%2C%20self%2Esetup%29%3B%0A%09%09%09%09self%2Egame%2EbackgroundColor%20%3D%20%27seaGreen%27%3B%0A%09%09%09%09self%2Emouse%20%3D%20self%2Egame%2Epointer%3B%0A%09%09%09%09self%2Emouse%2Etap%20%3D%20self%2Etap%3B%0A%09%09%09%09self%2Egrid%20%3D%20Grid%20%28self%2Egame%29%3B%0A%09%09%09%09self%2Ecurcell%20%3D%20null%3B%0A%09%09%09%09self%2Eclickedcells%20%3D%20list%20%28%5B%5D%29%3B%0A%09%09%09%7D%29%3B%7D%2C%0A%09%09%09get%20tap%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09self%2Etapped%20%3D%20true%3B%0A%09%09%09%7D%29%3B%7D%2C%0A%09%09%09get%20setup%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09self%2Egame%2EscaleToWindow%20%28%27seaGreen%27%29%3B%0A%09%09%09%09self%2Egrid%2Edisplay%20%28%29%3B%0A%09%09%09%09self%2Egame%2Estate%20%3D%20self%2Eplay%3B%0A%09%09%09%7D%29%3B%7D%2C%0A%09%09%09get%20get%5Fcurcell%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09for%20%28var%20i%20%3D%200%3B%20i%20%3C%20self%2Egrid%2Erows%3B%20i%2B%2B%29%20%7B%0A%09%09%09%09%09for%20%28var%20j%20%3D%200%3B%20j%20%3C%20self%2Egrid%2Ecols%3B%20j%2B%2B%29%20%7B%0A%09%09%09%09%09%09var%20curcell%20%3D%20self%2Egrid%2Eligs%20%5Bi%5D%20%5Bj%5D%3B%0A%09%09%09%09%09%09if%20%28self%2Egame%2Ehit%20%28self%2Egame%2Epointer%2C%20curcell%29%29%20%7B%0A%09%09%09%09%09%09%09self%2Ecurcell%20%3D%20curcell%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%29%3B%7D%2C%0A%09%09%09get%20compare%5Fcells%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09if%20%28len%20%28self%2Eclickedcells%29%20%3C%202%29%20%7B%0A%09%09%09%09%09return%20%3B%0A%09%09%09%09%7D%0A%09%09%09%09var%20numrows%20%3D%20self%2Egrid%2Erows%3B%0A%09%09%09%09var%20numcols%20%3D%20self%2Egrid%2Ecols%3B%0A%09%09%09%09var%20resetcell%20%3D%20function%20%28cells%29%20%7B%0A%09%09%09%09%09var%20%5Freset%20%3D%20function%20%28%29%20%7B%0A%09%09%09%09%09%09cells%20%5B0%5D%2Ealpha%20%3D%201%3B%0A%09%09%09%09%09%09cells%20%5B1%5D%2Ealpha%20%3D%201%3B%0A%09%09%09%09%09%09self%2Eclickedcells%20%3D%20list%20%28%5B%5D%29%3B%0A%09%09%09%09%09%7D%3B%0A%09%09%09%09%09return%20%5Freset%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09var%20%5F%5Fleft0%5F%5F%20%3D%20self%2Eclickedcells%2E%5F%5Fgetslice%5F%5F%20%280%2C%202%2C%201%29%3B%0A%09%09%09%09var%20cella%20%3D%20%5F%5Fleft0%5F%5F%20%5B0%5D%3B%0A%09%09%09%09var%20cellb%20%3D%20%5F%5Fleft0%5F%5F%20%5B1%5D%3B%0A%09%09%09%09if%20%28cella%2Enum%20%3D%3D%20cellb%2Enum%29%20%7B%0A%09%09%09%09%09self%2Eclickedcells%20%3D%20self%2Eclickedcells%2E%5F%5Fgetslice%5F%5F%20%280%2C%201%2C%201%29%3B%0A%09%09%09%09%09return%20%3B%0A%09%09%09%09%7D%0A%09%09%09%09else%20%7B%0A%09%09%09%09%09var%20%5F%5Fleft0%5F%5F%20%3D%20tuple%20%28%5Bcella%2Enum%20%25%20numcols%2C%20Math%2Efloor%20%28cella%2Enum%20%2F%20numrows%29%5D%29%3B%0A%09%09%09%09%09var%20icella%20%3D%20%5F%5Fleft0%5F%5F%20%5B0%5D%3B%0A%09%09%09%09%09var%20jcella%20%3D%20%5F%5Fleft0%5F%5F%20%5B1%5D%3B%0A%09%09%09%09%09var%20%5F%5Fleft0%5F%5F%20%3D%20tuple%20%28%5Bcellb%2Enum%20%25%20numcols%2C%20Math%2Efloor%20%28cellb%2Enum%20%2F%20numrows%29%5D%29%3B%0A%09%09%09%09%09var%20icellb%20%3D%20%5F%5Fleft0%5F%5F%20%5B0%5D%3B%0A%09%09%09%09%09var%20jcellb%20%3D%20%5F%5Fleft0%5F%5F%20%5B1%5D%3B%0A%09%09%09%09%09var%20spritea%20%3D%20self%2Egrid%2Espr%20%5Bicella%5D%20%5Bjcella%5D%3B%0A%09%09%09%09%09var%20spriteb%20%3D%20self%2Egrid%2Espr%20%5Bicellb%5D%20%5Bjcellb%5D%3B%0A%09%09%09%09%09var%20contenta%20%3D%20spritea%2Econtent%3B%0A%09%09%09%09%09var%20contentb%20%3D%20spriteb%2Econtent%3B%0A%09%09%09%09%09cellb%2Ealpha%20%3D%200%3B%0A%09%09%09%09%09cella%2Ealpha%20%3D%200%3B%0A%09%09%09%09%09if%20%28contenta%20%21%3D%20contentb%29%20%7B%0A%09%09%09%09%09%09setTimeout%20%28resetcell%20%28list%20%28%5Bcella%2C%20cellb%5D%29%29%2C%20500%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09else%20%7B%0A%09%09%09%09%09%09spritea%2Eshowed%20%3D%20true%3B%0A%09%09%09%09%09%09spriteb%2Eshowed%20%3D%20true%3B%0A%09%09%09%09%09%09self%2Eclickedcells%20%3D%20list%20%28%5B%5D%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%29%3B%7D%2C%0A%09%09%09get%20check%5Fendgame%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09var%20endgame%20%3D%20function%20%28%29%20%7B%0A%09%09%09%09%09var%20%5F%5Fiter0%5F%5F%20%3D%20lst%5Fspr%3B%0A%09%09%09%09%09for%20%28var%20%5F%5Findex0%5F%5F%20%3D%200%3B%20%5F%5Findex0%5F%5F%20%3C%20%5F%5Fiter0%5F%5F%2Elength%3B%20%5F%5Findex0%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09%09%09var%20s%20%3D%20%5F%5Fiter0%5F%5F%20%5B%5F%5Findex0%5F%5F%5D%3B%0A%09%09%09%09%09%09s%2Ealpha%20%3D%200%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09self%2Egame%2Estate%20%3D%20self%2Eend%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09var%20lst%5Fspr%20%3D%20function%20%28%29%20%7B%0A%09%09%09%09%09var%20%5F%5Faccu0%5F%5F%20%3D%20%5B%5D%3B%0A%09%09%09%09%09var%20%5F%5Fiter0%5F%5F%20%3D%20self%2Egrid%2Espr%3B%0A%09%09%09%09%09for%20%28var%20%5F%5Findex0%5F%5F%20%3D%200%3B%20%5F%5Findex0%5F%5F%20%3C%20%5F%5Fiter0%5F%5F%2Elength%3B%20%5F%5Findex0%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09%09%09var%20liste%5Fsprites%20%3D%20%5F%5Fiter0%5F%5F%20%5B%5F%5Findex0%5F%5F%5D%3B%0A%09%09%09%09%09%09var%20%5F%5Fiter1%5F%5F%20%3D%20liste%5Fsprites%3B%0A%09%09%09%09%09%09for%20%28var%20%5F%5Findex1%5F%5F%20%3D%200%3B%20%5F%5Findex1%5F%5F%20%3C%20%5F%5Fiter1%5F%5F%2Elength%3B%20%5F%5Findex1%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09%09%09%09var%20sprite%20%3D%20%5F%5Fiter1%5F%5F%20%5B%5F%5Findex1%5F%5F%5D%3B%0A%09%09%09%09%09%09%09%5F%5Faccu0%5F%5F%2Eappend%20%28sprite%29%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09return%20%5F%5Faccu0%5F%5F%3B%0A%09%09%09%09%7D%20%28%29%3B%0A%09%09%09%09var%20showed%5Fvalues%20%3D%20function%20%28%29%20%7B%0A%09%09%09%09%09var%20%5F%5Faccu0%5F%5F%20%3D%20%5B%5D%3B%0A%09%09%09%09%09var%20%5F%5Fiter0%5F%5F%20%3D%20lst%5Fspr%3B%0A%09%09%09%09%09for%20%28var%20%5F%5Findex0%5F%5F%20%3D%200%3B%20%5F%5Findex0%5F%5F%20%3C%20%5F%5Fiter0%5F%5F%2Elength%3B%20%5F%5Findex0%5F%5F%2B%2B%29%20%7B%0A%09%09%09%09%09%09var%20s%20%3D%20%5F%5Fiter0%5F%5F%20%5B%5F%5Findex0%5F%5F%5D%3B%0A%09%09%09%09%09%09%5F%5Faccu0%5F%5F%2Eappend%20%28s%2Eshowed%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09return%20%5F%5Faccu0%5F%5F%3B%0A%09%09%09%09%7D%20%28%29%3B%0A%09%09%09%09if%20%28all%20%28showed%5Fvalues%29%29%20%7B%0A%09%09%09%09%09setTimeout%20%28endgame%2C%202000%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%29%3B%7D%2C%0A%09%09%09get%20play%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09self%2Echeck%5Fendgame%20%28%29%3B%0A%09%09%09%09self%2Eget%5Fcurcell%20%28%29%3B%0A%09%09%09%09if%20%28self%2Emouse%2Etapped%29%20%7B%0A%09%09%09%09%09var%20lc%20%3D%20len%20%28self%2Eclickedcells%29%3B%0A%09%09%09%09%09self%2Eclickedcells%2Eappend%20%28self%2Ecurcell%29%3B%0A%09%09%09%09%09self%2Emouse%2Etapped%20%3D%20false%3B%0A%09%09%09%09%09self%2Ecompare%5Fcells%20%28%29%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%29%3B%7D%2C%0A%09%09%09get%20start%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09self%2Egame%2Estart%20%28%29%3B%0A%09%09%09%7D%29%3B%7D%2C%0A%09%09%09get%20end%20%28%29%20%7Breturn%20%5F%5Fget%5F%5F%20%28this%2C%20function%20%28self%29%20%7B%0A%09%09%09%09console%2Elog%20%28%27END%27%29%3B%0A%09%09%09%7D%29%3B%7D%0A%09%09%7D%29%3B%0A%09%09var%20memory%20%3D%20Memory%20%28%29%3B%0A%09%09memory%2Estart%20%28%29%3B%0A%09%09%5F%5Fpragma%5F%5F%20%28%27%3Call%3E%27%29%0A%09%09%09%5F%5Fall%5F%5F%2EGrid%20%3D%20Grid%3B%0A%09%09%09%5F%5Fall%5F%5F%2EMemory%20%3D%20Memory%3B%0A%09%09%09%5F%5Fall%5F%5F%2Eall%20%3D%20all%3B%0A%09%09%09%5F%5Fall%5F%5F%2Eallcolors%20%3D%20allcolors%3B%0A%09%09%09%5F%5Fall%5F%5F%2Ecolors%20%3D%20colors%3B%0A%09%09%09%5F%5Fall%5F%5F%2Ememory%20%3D%20memory%3B%0A%09%09%5F%5Fpragma%5F%5F%20%28%27%3C%2Fall%3E%27%29%0A%09%7D%29%20%28%29%3B%0A%09return%20%5F%5Fall%5F%5F%3B%0A%7D%0Awindow%20%5B%27memory%27%5D%20%3D%20memory%20%28%29%3B%0A"></script>

</body>

